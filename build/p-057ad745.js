import{i as t}from"./p-ed1a11ab.js";import{L as s}from"./p-13e550f5.js";class o extends t{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(t){const o=this.createRenderParams(t),{context:e,painter:i,profiler:r}=o;this._prevFBO=e.getBoundFramebufferObject(),r.recordContainerStart(this.name);const h=this._getFbo(o),n=i.getRenderTarget();e.bindFramebuffer(h),i.setRenderTarget(h),e.setDepthWriteEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setClearColor(0,0,0,0),e.setClearDepth(1),e.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.setDepthWriteEnabled(!1);for(const s of this.children)s.beforeRender(t);for(const t of this.children)t.processRender(o);for(const s of this.children)s.afterRender(t);i.setRenderTarget(n),i.releaseFbo(h),e.bindFramebuffer(this._prevFBO),i.beforeRenderLayer(o,this._clippingInfos?255:0,this.computedOpacity),h.colorTexture&&(e.setStencilTestEnabled(!1),e.setStencilWriteMask(0),i.blitTexture(e,h.colorTexture,s.NEAREST)),i.compositeLayer(o,this.computedOpacity),r.recordContainerEnd()}createRenderParams(t){return{...super.createRenderParams(t),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:s,painter:o}=t,{width:e,height:i}=s.getViewport();return o.acquireFbo(e,i)}}export{o as r};
//# sourceMappingURL=p-057ad745.js.map