{"version":3,"names":["isOpen","component","opened","open","emitImmediately","nonOpenCloseComponent","transitionProp","onBeforeOpen","onBeforeClose","onOpen","onClose","onToggleOpenCloseComponent","readTask","transitionEl","transitionDuration","allDurations","transitionProperty","allProps","getComputedStyle","allTransitionDurationsArray","split","allTransitionPropsArray","openTransitionPropIndex","indexOf","openTransitionProp","fallbackTimeoutId","setTimeout","removeEventListener","onStart","onEndOrCancel","parseFloat","addEventListener","event","propertyName","target","clearTimeout"],"sources":["./node_modules/@esri/calcite-components/dist/components/openCloseComponent.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\n * v1.9.0\n */\nimport { readTask } from '@stencil/core/internal/client/index.js';\n\nfunction isOpen(component) {\n  return \"opened\" in component ? component.opened : component.open;\n}\nfunction emitImmediately(component, nonOpenCloseComponent = false) {\n  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n    ? component.onBeforeOpen()\n    : component.onBeforeClose();\n  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n    ? component.onOpen()\n    : component.onClose();\n}\n/**\n * Helper to determine globally set transition duration on the given openTransitionProp, which is imported and set in the @Watch(\"open\").\n * Used to emit (before)open/close events both for when the opacity transition is present and when there is none (transition-duration is set to 0).\n *\n * @example\n * import { onToggleOpenCloseComponent, OpenCloseComponent } from \"../../utils/openCloseComponent\";\n *\n * async componentWillLoad() {\n * // When component initially renders, if `open` was set we need to trigger on load as watcher doesn't fire.\n * if (this.open) {\n *    onToggleOpenCloseComponent(this);\n * }\n * @Watch(\"open\")\n * async toggleModal(value: boolean): Promise<void> {\n *    onToggleOpenCloseComponent(this);\n * }\n *\n * @param component - OpenCloseComponent uses `open` prop to emit (before)open/close.\n * @param nonOpenCloseComponent - OpenCloseComponent uses `expanded` prop to emit (before)open/close.\n */\nfunction onToggleOpenCloseComponent(component, nonOpenCloseComponent = false) {\n  readTask(() => {\n    if (component.transitionEl) {\n      const { transitionDuration: allDurations, transitionProperty: allProps } = getComputedStyle(component.transitionEl);\n      const allTransitionDurationsArray = allDurations.split(\",\");\n      const allTransitionPropsArray = allProps.split(\",\");\n      const openTransitionPropIndex = allTransitionPropsArray.indexOf(component.openTransitionProp);\n      const transitionDuration = allTransitionDurationsArray[openTransitionPropIndex] ??\n        /* Safari will have a single transition value if multiple props share it,\n        so we fall back to it if there's no matching prop duration */\n        allTransitionDurationsArray[0];\n      if (transitionDuration === \"0s\") {\n        emitImmediately(component, nonOpenCloseComponent);\n        return;\n      }\n      const fallbackTimeoutId = setTimeout(() => {\n        component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n        component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n        component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n        emitImmediately(component, nonOpenCloseComponent);\n      }, parseFloat(transitionDuration) * 1000);\n      component.transitionEl.addEventListener(\"transitionstart\", onStart);\n      component.transitionEl.addEventListener(\"transitionend\", onEndOrCancel);\n      component.transitionEl.addEventListener(\"transitioncancel\", onEndOrCancel);\n      function onStart(event) {\n        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n          clearTimeout(fallbackTimeoutId);\n          component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n            ? component.onBeforeOpen()\n            : component.onBeforeClose();\n        }\n      }\n      function onEndOrCancel(event) {\n        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n            ? component.onOpen()\n            : component.onClose();\n          component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n          component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n        }\n      }\n    }\n  });\n}\n\nexport { onToggleOpenCloseComponent as o };\n"],"mappings":";;;;;GAOA,SAASA,EAAOC,GACd,MAAO,WAAYA,EAAYA,EAAUC,OAASD,EAAUE,IAC9D,CACA,SAASC,EAAgBH,EAAWI,EAAwB,QACzDA,EAAwBJ,EAAUA,EAAUK,gBAAkBN,EAAOC,IAClEA,EAAUM,eACVN,EAAUO,iBACbH,EAAwBJ,EAAUA,EAAUK,gBAAkBN,EAAOC,IAClEA,EAAUQ,SACVR,EAAUS,SAChB,CAqBA,SAASC,EAA2BV,EAAWI,EAAwB,OACrEO,GAAS,KACP,GAAIX,EAAUY,aAAc,CAC1B,MAAQC,mBAAoBC,EAAcC,mBAAoBC,GAAaC,iBAAiBjB,EAAUY,cACtG,MAAMM,EAA8BJ,EAAaK,MAAM,KACvD,MAAMC,EAA0BJ,EAASG,MAAM,KAC/C,MAAME,EAA0BD,EAAwBE,QAAQtB,EAAUuB,oBAC1E,MAAMV,EAAqBK,EAA4BG,IAGrDH,EAA4B,GAC9B,GAAIL,IAAuB,KAAM,CAC/BV,EAAgBH,EAAWI,GAC3B,MACR,CACM,MAAMoB,EAAoBC,YAAW,KACnCzB,EAAUY,aAAac,oBAAoB,kBAAmBC,GAC9D3B,EAAUY,aAAac,oBAAoB,gBAAiBE,GAC5D5B,EAAUY,aAAac,oBAAoB,mBAAoBE,GAC/DzB,EAAgBH,EAAWI,EAAsB,GAChDyB,WAAWhB,GAAsB,KACpCb,EAAUY,aAAakB,iBAAiB,kBAAmBH,GAC3D3B,EAAUY,aAAakB,iBAAiB,gBAAiBF,GACzD5B,EAAUY,aAAakB,iBAAiB,mBAAoBF,GAC5D,SAASD,EAAQI,GACf,GAAIA,EAAMC,eAAiBhC,EAAUuB,oBAAsBQ,EAAME,SAAWjC,EAAUY,aAAc,CAClGsB,aAAaV,GACbxB,EAAUY,aAAac,oBAAoB,kBAAmBC,IAC7DvB,EAAwBJ,EAAUA,EAAUK,gBAAkBN,EAAOC,IAClEA,EAAUM,eACVN,EAAUO,eACxB,CACA,CACM,SAASqB,EAAcG,GACrB,GAAIA,EAAMC,eAAiBhC,EAAUuB,oBAAsBQ,EAAME,SAAWjC,EAAUY,aAAc,EACjGR,EAAwBJ,EAAUA,EAAUK,gBAAkBN,EAAOC,IAClEA,EAAUQ,SACVR,EAAUS,UACdT,EAAUY,aAAac,oBAAoB,gBAAiBE,GAC5D5B,EAAUY,aAAac,oBAAoB,mBAAoBE,EACzE,CACA,CACA,IAEA,Q"}