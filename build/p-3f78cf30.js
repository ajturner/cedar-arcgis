import{ae as p,L as t,V as s,R as i,k as r,l as o,n as a}from"./p-98455486.js";import{f as m,d as e}from"./p-f7917469.js";import{i as j}from"./p-71431ad3.js";import{o as c}from"./p-bd7f9fc7.js";import"./p-5572f01a.js";import"./p-07f12c16.js";import"./p-1abe3c64.js";import"./p-13e550f5.js";import"./p-7099a764.js";import"./p-0c70c0e2.js";import"./p-d46be2b1.js";import"./p-fc9cd10b.js";import"./p-4f27d9ab.js";import"./p-ecc7ed03.js";import"./p-c5929b55.js";import"./p-8043ab9b.js";import"./p-4cbc7b66.js";import"./p-3a9bb31c.js";import"./p-f5452a6b.js";import"./p-8b2bb530.js";import"./p-9a4094ba.js";import"./p-9f1a0adc.js";import"./p-a9fef357.js";import"./p-0d2202fd.js";import"./p-f33b44a5.js";import"./p-e91d9d8d.js";import"./p-e22a21a4.js";import"./p-958a5da8.js";import"./p-fcbd27c0.js";import"./p-5abe9c67.js";import"./p-66f65b6a.js";import"./p-14843b2a.js";import"./p-ffb89da5.js";import"./p-dfd7ee02.js";import"./p-da8336be.js";import"./p-1172b129.js";import"./p-e6a64715.js";import"./p-dc29c329.js";import"./p-0fdabe4a.js";import"./p-8399f9e1.js";import"./p-9803a24d.js";import"./p-b15bfa44.js";import"./p-baa730bb.js";import"./p-e1758a64.js";import"./p-ec443a8b.js";import"./p-f4b056c3.js";import"./p-6133cc0f.js";import"./p-e75aa2b5.js";import"./p-f5f26b1f.js";import"./p-783b6965.js";import"./p-b8afab55.js";import"./p-2d1dac84.js";import"./p-c782b111.js";import"./p-7dc0ec82.js";import"./p-0e94eaa4.js";import"./p-795f7c81.js";import"./p-4a6353a7.js";import"./p-238fbe63.js";import"./p-af5dfb20.js";import"./p-cc77f67d.js";import"./p-ed1a11ab.js";import"./p-908b7a05.js";import"./p-620ed352.js";import"./p-220b11a0.js";import"./p-4f76b2d1.js";import"./p-42c332a2.js";import"./p-38e70926.js";import"./p-69ec1c26.js";import"./p-83c727f2.js";import"./p-2b6b8db8.js";import"./p-50b034e8.js";import"./p-6bb7b693.js";import"./p-de65627f.js";import"./p-a3c11f30.js";import"./p-a18c7841.js";import"./p-1382d09e.js";import"./p-b4b7d6a0.js";import"./p-b0610ac0.js";import"./p-073c3089.js";import"./p-c6ce33a2.js";import"./p-eda79132.js";import"./p-5977fcaf.js";import"./p-eeca6bc1.js";import"./p-21ae9bf7.js";import"./p-aedab47c.js";import"./p-f705ab94.js";import"./p-3c3976eb.js";import"./p-623dbe5e.js";const b={remove(){},pause(){},resume(){}};let h=class extends(m(e)){constructor(){super(...arguments),this._highlightIds=new Map}attach(){this.graphicsView=new c({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new j(this.view.featuresTilingScheme)}),this._updateHighlight(),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler))}detach(){this.container.removeAllChildren(),this.graphicsView=p(this.graphicsView)}async hitTest(p){return this.graphicsView?this.graphicsView.hitTest(p).map((t=>({type:"graphic",graphic:t,mapPoint:p,layer:this.layer}))):null}async fetchPopupFeatures(p){return this.graphicsView?this.graphicsView.hitTest(p).filter((p=>!!p.popupTemplate)):[]}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(p){this.graphicsView.processUpdate(p)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(p){let r;"number"==typeof p?r=[p]:p instanceof t?r=[p.uid]:Array.isArray(p)&&p.length>0?r="number"==typeof p[0]?p:p.map((p=>p&&p.uid)):s.isCollection(p)&&p.length>0&&(r=p.map((p=>p&&p.uid)).toArray());const o=r?.filter(i);return o?.length?(this._addHighlight(o),{remove:()=>this._removeHighlight(o)}):b}_addHighlight(p){for(const t of p)if(this._highlightIds.has(t)){const p=this._highlightIds.get(t);this._highlightIds.set(t,p+1)}else this._highlightIds.set(t,1);this._updateHighlight()}_removeHighlight(p){for(const t of p)if(this._highlightIds.has(t)){const p=this._highlightIds.get(t)-1;0===p?this._highlightIds.delete(t):this._highlightIds.set(t,p)}this._updateHighlight()}_updateHighlight(){this.graphicsView?.setHighlight(Array.from(this._highlightIds.keys()))}};r([o()],h.prototype,"graphicsView",void 0),h=r([a("esri.views.2d.layers.GraphicsLayerView2D")],h);const f=h;export default f;
//# sourceMappingURL=p-3f78cf30.js.map