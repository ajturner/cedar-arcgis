import{fA as t,fB as n,fC as s,cV as e,eo as r,ef as i,b9 as o,e8 as c,ec as u,ea as a,fD as h,fE as f,eK as l,fF as p,e7 as M,c as m,fG as d,er as w,e5 as g,e9 as y,ed as j,fH as A,e6 as b,fx as S,fz as _,fw as R}from"./p-98455486.js";import{E as x}from"./p-52d8e383.js";import{n as V}from"./p-de65f975.js";import{n as C}from"./p-cc24e5bd.js";import{n as E}from"./p-603bf978.js";import{o as P}from"./p-783b6965.js";class v{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&t((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*O);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,O));t++)this._items.push(this._allocator())}}const O=1024;class z{constructor(t,n,s){this._itemByteSize=t,this._itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(s/this._itemByteSize)}get(){0===this._itemsPtr&&t((()=>this._reset()));const n=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=n;){const t=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let n=0;n<this._itemsPerBuffer;++n)this._items.push(this._itemCreate(t,n*this._itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=B){return new z(16,P,t)}static createVec3f64(t=B){return new z(24,n,t)}static createVec4f64(t=B){return new z(32,s,t)}static createMat3f64(t=B){return new z(72,V,t)}static createMat4f64(t=B){return new z(128,C,t)}static createQuatf64(t=B){return new z(32,E,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const B=4*x.KILOBYTES;z.createVec2f64();const T=z.createVec3f64();z.createVec4f64();z.createMat3f64();const D=z.createMat4f64();z.createQuatf64();var F;!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(F||(F={}));function G(t){return t?H(r(t.origin),r(t.direction)):H(e(),e())}function H(t,n){return{origin:t,direction:n}}function K(t,n){const s=Q.get();return s.origin=t,s.direction=n,s}function N(t,n,s){const e=c(t.direction,u(s,n,t.origin));return i(s,t.origin,o(s,t.direction,e)),s}const Q=new v((()=>G()));function X(t,n){const s=c(t,n)/(h(t)*h(n));return-a(s)}const Y=Z();function Z(){return f()}function k(t,n=Z()){return l(n,t)}function q(t,n){return p(t[0],t[1],t[2],n)}function I(t){return t}function J(t){t[0]=t[1]=t[2]=t[3]=0}function L(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function U(t){return t[3]}function W(t){return t}function $(t,n,s,e){return p(t,n,s,e)}function tt(t,n,s){return t!==s&&M(s,t),s[3]=t[3]+n,s}function nt(t,n,s){return m.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===s?s:k(t,s)}function st(t,n,s){if(null==n)return!1;const{origin:e,direction:r}=n,i=et;i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2];const o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(0===o)return!1;const c=2*(r[0]*i[0]+r[1]*i[1]+r[2]*i[2]),u=c*c-4*o*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);let h=(-c-a)/(2*o);const f=(-c+a)/(2*o);return(h<0||f<h&&f>0)&&(h=f),!(h<0)&&(s&&(s[0]=e[0]+r[0]*h,s[1]=e[1]+r[1]*h,s[2]=e[2]+r[2]*h),!0)}const et=e();function rt(t,n){return st(t,n,null)}function it(t,n,s){if(st(t,n,s))return s;const e=ot(t,n,T.get());return i(s,n.origin,o(T.get(),n.direction,g(n.origin,e)/h(n.direction))),s}function ot(t,n,s){const e=T.get(),r=D.get();y(e,n.origin,n.direction);const i=U(t);y(s,e,n.origin),o(s,s,1/h(s)*i);const c=ht(t,n.origin),u=X(n.origin,s);return d(r,u+c,e),w(s,s,r),s}function ct(t,n,s){return st(t,n,s)?s:(N(n,W(t),s),ut(t,s,s))}function ut(t,n,s){const e=u(T.get(),n,W(t)),r=o(T.get(),e,t[3]/h(e));return i(s,r,W(t))}function at(t,n){const s=u(T.get(),n,W(t)),e=_(s),r=t[3]*t[3];return Math.sqrt(Math.abs(e-r))}function ht(t,n){const s=u(T.get(),n,W(t)),e=h(s),r=U(t),i=r+Math.abs(r-e);return a(r/i)}const ft=e();function lt(t,n,s,e){const r=u(ft,n,W(t));switch(s){case F.X:{const t=A(r,ft)[2];return b(e,-Math.sin(t),Math.cos(t),0)}case F.Y:{const t=A(r,ft),n=t[1],s=t[2],i=Math.sin(n);return b(e,-i*Math.cos(s),-i*Math.sin(s),Math.cos(n))}case F.Z:return j(e,r);default:return}}function pt(t,n){const s=u(wt,n,W(t));return h(s)-t[3]}function Mt(t,n,s,e){const r=pt(t,n),c=lt(t,n,F.Z,wt),u=o(wt,c,s-r);return i(e,n,u)}function mt(t,n){const s=R(W(t),n),e=U(t);return s<=e*e}function dt(t,n,s=Z()){const e=g(t,n),r=t[3],i=n[3];return e+i<r?(l(s,t),s):e+r<i?(l(s,n),s):(S(s,t,n,(e+i-r)/(2*e)),s[3]=(e+r+i)/2,s)}const wt=e(),gt=Z();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:Y,altitudeAt:pt,angleToSilhouette:ht,axisAt:lt,clear:J,closestPoint:ct,closestPointOnSilhouette:ot,containsPoint:mt,copy:k,create:Z,distanceToSilhouette:at,elevate:tt,fromCenterAndRadius:q,fromRadius:L,fromValues:$,getCenter:W,getRadius:U,intersectRay:st,intersectRayClosestSilhouette:it,intersectsRay:rt,projectPoint:ut,setAltitudeAt:Mt,setExtent:nt,tmpSphere:gt,union:dt,wrap:I},Symbol.toStringTag,{value:"Module"}));export{mt as Q,rt as V,Z as _,T as c,G as d,U as k,K as p,k as q,v as s,W as z};
//# sourceMappingURL=p-7bd5d456.js.map