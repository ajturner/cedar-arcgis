import{r as i,c as t,g as e,h as s,H as a,a as n}from"./p-fc9cd10b.js";import{u as h,a as d,r as o,p as r,W as l,i as c,b as u,c as p,d as f,e as m,Y as g,g as b,f as y,A as v,m as w}from"./p-d46be2b1.js";import{a as j,I as C,b as L,y as x,S as I,u as S,C as D}from"./p-98455486.js";import"./p-4f27d9ab.js";import"./p-c5929b55.js";import"./p-f33b44a5.js";import"./p-4cbc7b66.js";import"./p-3a9bb31c.js";import"./p-f5452a6b.js";import"./p-8b2bb530.js";import"./p-9a4094ba.js";import"./p-9f1a0adc.js";import"./p-a9fef357.js";import"./p-0d2202fd.js";import"./p-e91d9d8d.js";import"./p-e22a21a4.js";import"./p-958a5da8.js";import"./p-fcbd27c0.js";import"./p-5abe9c67.js";import"./p-66f65b6a.js";import"./p-14843b2a.js";import"./p-ffb89da5.js";import"./p-dfd7ee02.js";import"./p-da8336be.js";import"./p-1172b129.js";import"./p-e6a64715.js";import"./p-dc29c329.js";import"./p-0fdabe4a.js";import"./p-8399f9e1.js";import"./p-9803a24d.js";import"./p-b15bfa44.js";import"./p-baa730bb.js";import"./p-e1758a64.js";import"./p-ec443a8b.js";import"./p-f4b056c3.js";import"./p-6133cc0f.js";import"./p-e75aa2b5.js";import"./p-f5f26b1f.js";import"./p-783b6965.js";import"./p-b8afab55.js";import"./p-07f12c16.js";import"./p-2d1dac84.js";import"./p-c782b111.js";import"./p-0c70c0e2.js";import"./p-ecc7ed03.js";import"./p-8043ab9b.js";const A='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.comboLineAndBarSeries{flex-grow:1;overflow-y:hidden}.comboLineAndBarSeries>div{justify-content:center;align-items:center}.comboLineAndBarSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.comboLineAndBarSeries .arcgis-charts-modal-inside ol{padding-left:2em}.comboLineAndBarSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.comboLineAndBarSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.comboLineAndBarSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.comboLineAndBarSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.comboLineAndBarSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-bar-line-chart-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-bar-line-chart-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const M=class{constructor(e){i(this,e);this.arcgisChartsDataProcessError=t(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=t(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsLegendItemVisibilityChange=t(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=t(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsSeriesColorChange=t(this,"arcgisChartsSeriesColorChange",7);this.arcgisChartsAxesMinMaxChange=t(this,"arcgisChartsAxesMinMaxChange",7);this.arcgisChartsSelectionComplete=t(this,"arcgisChartsSelectionComplete",7);this.arcgisChartsNoRenderPropChange=t(this,"arcgisChartsNoRenderPropChange",7);this.skipNextUpdate=false;this.noRenderProps=["rotation","legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.rotation=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.returnFeaturesExtent=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.selectionTheme=undefined;this.chartLimits=undefined;this.ignoreSmoothRenderingLimit=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.guideTooltipFormatter=undefined;this.xAxisLabelFormatter=undefined;this.yAxisLabelFormatter=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.disableTogglingLegendItems=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(i){this.arcgisChartsDataProcessComplete.emit(i.detail)}handleLegendItemVisibilityChanged(i){this.arcgisChartsLegendItemVisibilityChange.emit(i.detail)}handleUpdateCompleted(i){this.arcgisChartsUpdateComplete.emit(i.detail)}handleSeriesColorsChange(i){this.arcgisChartsSeriesColorChange.emit(i.detail)}handleSelection(i){this.arcgisChartsSelectionComplete.emit(i.detail)}handleTooManySelectedElements(){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.tooManySelectedElements.title;this.notifyMessage=this.strings.tooManySelectedElements.message;this.notifyOptions={kind:"warning",autoClose:true,duration:"fast",active:true};this.showNotifyPanel=true}}handleAlertClosed(i){if(i.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}handleAxesMinMaxChange(i){this.arcgisChartsAxesMinMaxChange.emit(i.detail)}async viewChange(i,t){await this.addExtentChangeListener();if(t!==undefined&&i===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}rotationChange(i){this.config=j(i,this.config)}legendPositionChange(i){this.config=h(i,this.config)}legendVisibilityChange(i){this.config=d(i,this.config)}filterBySelectionChanged(){this.config=o(this.config)}async notify(i,t,e){if(this.chart!==undefined){this.chart.notify(i,t,e)}return Promise.resolve(undefined)}async errorAlert(i){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=i;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async resetZoom(){if(this.chart!==undefined)this.chart.resetZoom();return Promise.resolve(undefined)}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(i){var t,e,s,a,n,h,d,o,r,l,c,u;const{updateData:p=true,resetAxesBounds:f=false,updateExtent:m=false}=i!==null&&i!==void 0?i:{};this.viewExtentUpdated=m;if(p===true)this.dataUpdateIsNeeded();if(f===true){(s=(e=(t=this.config)===null||t===void 0?void 0:t.axes)===null||e===void 0?void 0:e[0])===null||s===void 0?true:delete s.minimum;(h=(n=(a=this.config)===null||a===void 0?void 0:a.axes)===null||n===void 0?void 0:n[0])===null||h===void 0?true:delete h.maximum;(r=(o=(d=this.config)===null||d===void 0?void 0:d.axes)===null||o===void 0?void 0:o[1])===null||r===void 0?true:delete r.minimum;(u=(c=(l=this.config)===null||l===void 0?void 0:l.axes)===null||c===void 0?void 0:c[1])===null||u===void 0?true:delete u.maximum}await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...i){const[t,,e]=i;this.updatedProps.add(e);const s=this.noRenderProps.includes(e);if(s===true){this.arcgisChartsNoRenderPropChange.emit({propName:e,value:t})}const a=this.skipNextUpdate===false&&s===false;this.skipNextUpdate=false;return a}async componentWillLoad(){({strings:this.strings}=await C(this.el,e(`.`)));this.debouncedChartUpdate=r((async()=>{if(this.chart!==undefined){const i=Array.from(this.updatedProps);const t=i.some((i=>this.dataUpdateNeededProps.includes(i)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:b({component:this,dataUpdated:t,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:y(this)})}}),w)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var i;if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await L([l.BarSeries,l.LineSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const t=(i=this.config)===null||i===void 0?void 0:i.dataSource;if(c(this.inlineData,t)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(i){if(this.chartRef!==undefined&&this.config!==undefined){if(i.name===x.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(i===null||i===void 0?void 0:i.message);if(i.name===x.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(i.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}render(){var i;const t=this.showNotifyPanel===true?s(v,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const e=this.showNotifyPanel===true&&((i=this.notifyOptions)===null||i===void 0?void 0:i.kind)==="danger"?"hide":`${l.ComboLineAndBarSeries} show`;const n=this.showNotifyPanel===true?"show notifyPanel":"hide";return s(a,null,s("slot",{name:I.actionBar}),s("div",{class:e,ref:i=>{this.chartRef=i}}),s("div",{class:n},t))}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await u({layer:this.layer,component:this});this.layerRendererListener=await p({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await f({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var i;const t=(i=this.config)===null||i===void 0?void 0:i.version;if(this.displayErrorAlert!==false&&S(t).versionStatus===m.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=D(this.strings.incompatibleChartVersion.message,{chartVersion:t!==null&&t!==void 0?t:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(i=true){var t,e;await L([l.BarSeries,l.LineSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const e=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(c(this.inlineData,e)){this.chartCreationProcessing=g({chartContainer:this.chartRef,chartConfig:this.config,options:b({component:this}),globalOptions:y(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(i===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(i){if(i.name===x.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(i.details)}this.errorAlert(i===null||i===void 0?void 0:i.message);(e=this.chart)===null||e===void 0?void 0:e.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return n(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],rotation:["rotationChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"],filterBySelection:["filterBySelectionChanged"]}}};M.style=A;export{M as arcgis_charts_bar_line_chart};
//# sourceMappingURL=p-ecab5049.entry.js.map