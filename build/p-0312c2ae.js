import{cO as t,v as r,j as n}from"./p-98455486.js";import{u as e,o as s}from"./p-5abe9c67.js";class i{constructor(t,r,n){this.assetName=t,this.assetMimeType=r,this.parts=n}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&t(this.parts,r.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:n}=this;if(1===n.length)return n[0].toBlob(t);const e=await Promise.all(n.map((r=>r.toBlob(t))));return r(t),new Blob(e)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await n(this.partUrl,{responseType:"blob"});return r(t),e}}function u(t){return h(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,a=/\.(gltf|glb)/i;function h(t){if(!t)return!1;if(Array.isArray(t)){return t.some(l)}return l(t)}function l(t){if(t instanceof File){const{type:r,name:n}=t;return f.test(r)||a.test(n)}return f.test(t.assetMimeType)||a.test(t.assetName)}function m(t,r){if(!t)return!1;const{source:n}=t;return y(n,r)}function p(t,r){if(t===r)return!0;const{source:n}=t,{source:e}=r;if(n===e)return!0;if(c(n)&&c(e)){if(n.length!==e.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...n].sort(t),s=[...e].sort(t);for(let t=0;t<r.length;++t)if(!r[t].equals(s[t]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){return t.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function g(t,r){return t instanceof File?e(t.name,r)??s(t.type,r):s(t.assetMimeType,r)??e(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function d(t){return!!t.original}export{d as A,A as N,i as a,g,p as h,o as i,m,u as o};
//# sourceMappingURL=p-0312c2ae.js.map