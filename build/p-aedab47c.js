import{s as e,dt as t,du as s,bP as n,dv as o,dw as l,ck as r,bm as a,dx as m,bv as i,dy as u,dz as y,dA as c,dB as b,dC as f}from"./p-98455486.js";import{c as d,a as p}from"./p-21ae9bf7.js";function g(t,s,n,o){const a=t.name;return null==a?Promise.reject(new e("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?P(a,s,o):l(t,s,o).then((e=>w(r(e),a,s,n,f,o)))}function S(e,t){return t.items.find((t=>t.name===e))}function w(l,r,c,f,g,w){const P=c&&null!=c.portal?c.portal:a.getDefault(),v={portal:P,url:n(l.baseUrl),origin:"portal-item"},N=S(r,l.data);if(!N){const t=`The symbol name '${r}' could not be found`;return Promise.reject(new e("symbolstyleutils:symbol-name-not-found",t,{symbolName:r}))}let h=m(g(N,f),v),j=N.thumbnail?.href??null;const x=N.thumbnail&&N.thumbnail.imageData;d()&&(h=p(h)??"",j=p(j));const F={portal:P,url:n(o(h)),origin:"portal-item"};return t(h,w).then((e=>{const t="cimRef"===f?b(e.data):e.data,n=s(t,F);if(n&&i(n)){if(j){const e=m(j,v);n.thumbnail=new u({url:e})}else x&&(n.thumbnail=new u({url:`data:image/png;base64,${x}`}));l.styleUrl?n.styleOrigin=new y({portal:c.portal,styleUrl:l.styleUrl,name:r}):l.styleName&&(n.styleOrigin=new y({portal:c.portal,styleName:l.styleName,name:r}))}return n}))}function P(e,l,r){const m=c.replaceAll(/\{SymbolName\}/gi,e),i=null!=l.portal?l.portal:a.getDefault();return t(m,r).then((e=>{const t=b(e.data);return s(t,{portal:i,url:n(o(m)),origin:"portal-item"})}))}export{w as fetchSymbolFromStyle,S as getStyleItemFromStyle,g as resolveWebStyleSymbol};
//# sourceMappingURL=p-aedab47c.js.map