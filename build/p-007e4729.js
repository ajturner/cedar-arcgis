import{cr as e,s as t,dD as r,j as s}from"./p-98455486.js";async function n(t,r={},s){await t.load(s);const n=e(t.itemUrl,"resources"),{start:o=1,num:a=10,sortOrder:c="asc",sortField:i="created"}=r,u={query:{start:o,num:a,sortOrder:c,sortField:i,token:t.apiKey},signal:s?.signal},l=await t.portal.request(n,u);return{total:l.total,nextStart:l.nextStart,resources:l.resources.map((({created:e,size:r,resource:s})=>({created:new Date(e),size:r,resource:t.resourceFromPath(s)})))}}async function o(r,s,n,o){if(!r.hasPath())throw new t(`portal-item-resource-${s}:invalid-path`,"Resource does not have a valid path");const a=r.portalItem;await a.load(o);const c=e(a.userItemUrl,"add"===s?"addResources":"updateResources"),[u,l]=i(r.path),f=await d(n),m=new FormData;return u&&"."!==u&&m.append("resourcesPrefix",u),null!=o&&o.compress&&m.append("compress","true"),m.append("fileName",l),m.append("file",f,l),m.append("f","json"),null!=o&&o.access&&m.append("access",o.access),await a.portal.request(c,{method:"post",body:m,signal:o?.signal}),r}async function a(r,s,n){if(!s.hasPath())throw new t("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await r.load(n);const o=e(r.userItemUrl,"removeResources");await r.portal.request(o,{method:"post",query:{resource:s.path},signal:n?.signal}),s.portalItem=null}async function c(t,r){await t.load(r);const s=e(t.userItemUrl,"removeResources");return t.portal.request(s,{method:"post",query:{deleteAll:!0},signal:r?.signal})}function i(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function u(e){const[t,r]=l(e),[s,n]=i(t);return[s,n,r]}function l(e){const t=r(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function d(e){if(e instanceof Blob)return e;return(await s(e.url,{responseType:"blob"})).data}function f(t,r){if(!t.hasPath())return null;const[s,,n]=u(t.path);return t.portalItem.resourceFromPath(e(s,r+n))}function m(t,r){if(!t.hasPath())return null;const[s,,n]=u(t.path);return t.portalItem.resourceFromPath(e(s,r+n))}export{o as addOrUpdateResource,d as contentToBlob,n as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,a as removeResource,u as splitPrefixFileNameAndExtension};
//# sourceMappingURL=p-007e4729.js.map