import{s as e,T as n,b$ as t,c0 as r,c1 as i}from"./p-98455486.js";const o=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),a=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function s(e){return"basemap"===e.layerContainerType?o:"operational-layers"===e.layerContainerType?a:null}function l(e,n){if(n.restrictedWebMapWriting){const r=s(n);return null==r||r.has(e.type)&&!t(e)}return!0}function u(e,n){if(n)if(t(e)){const t=i("featureCollection.layers",n),r=t&&t[0]&&t[0].layerDefinition;r&&m(e,r)}else"group"!==e.type&&m(e,n)}function m(e,n){"maxScale"in e&&(n.maxScale=r(e.maxScale)??void 0),"minScale"in e&&(n.minScale=r(e.minScale)??void 0)}function p(e,n){if(u(e,n),n&&("blendMode"in e&&(n.blendMode=e.blendMode,"normal"===n.blendMode&&delete n.blendMode),n.opacity=r(e.opacity)??void 0,n.title=e.title||"Layer",n.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type))if(t(e)){const t=n.featureCollection;t&&(t.showLegend=e.legendEnabled)}else n.showLegend=e.legendEnabled}function c(t,r,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new e("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(l(t,i)){const e={};return t.write(e,i)?e:null}return null!=r&&p(t,r=n(r)),r}export{c as f};
//# sourceMappingURL=p-958a5da8.js.map