{"version":3,"names":["i","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","s","e","c","type","t","features","u","coordinates","l","o","geometryType","r","objectIdField","geometry","properties","id","f","a","y","g","n","length","p","d","push","m","h","w","P","b","j","G","S","F","k","M","lengths","coords","hasZ","O","T","data","crs","name","code","RegExp","test","L","Set","Object","keys","filter","has","add","delete","alias","fields","objectIdFieldName","objectIdFieldType","unknownFields","Array","from","I"],"sources":["./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{normalizeFieldName as o,isNumericField as r}from\"../../../support/fieldUtils.js\";const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function s(e){return i[e]}function*c(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*u(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,o={}){const{geometryType:r,objectIdField:i}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&s(e.type)!==r)continue;const f=u||{};let a;i&&(a=f[i],null==l||a||(f[i]=a=l));const y=new t(e?g(new n,e,o):null,f,null,a??void 0);yield y}}function f(e){for(const t of e)if(t.length>2)return!0;return!1}function a(e){return!p(e)}function y(e){return p(e)}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case\"LineString\":return m(e,t,n);case\"MultiLineString\":return h(e,t,n);case\"MultiPoint\":return w(e,t,n);case\"MultiPolygon\":return P(e,t,n);case\"Point\":return b(e,t,n);case\"Polygon\":return j(e,t,n)}}function m(e,t,n){return G(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates)G(e,o,n);return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates){S(e,o[0],n);for(let t=1;t<o.length;t++)F(e,o[t],n)}return e}function b(e,t,n){return k(e,t.coordinates,n),e}function j(e,t,n){const o=t.coordinates;S(e,o[0],n);for(let r=1;r<o.length;r++)F(e,o[r],n);return e}function S(e,t,n){const o=d(t);a(o)?M(e,o,n):G(e,o,n)}function F(e,t,n){const o=d(t);y(o)?M(e,o,n):G(e,o,n)}function G(e,t,n){for(const o of t)k(e,o,n);e.lengths.push(t.length)}function M(e,t,n){for(let o=t.length-1;o>=0;o--)k(e,t[o],n);e.lengths.push(t.length)}function k(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function T(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function L(e,t={}){const n=[],i=new Set,l=new Set;let a,y=!1,p=null,d=!1,{geometryType:g=null}=t,m=!1;for(const r of c(e)){const{geometry:e,properties:t,id:c}=r;if(!e||(g||(g=s(e.type)),s(e.type)===g)){if(!y){y=f(u(e))}if(d||(d=null!=c,d&&(a=typeof c,t&&(p=Object.keys(t).filter((e=>t[e]===c))))),t&&p&&d&&null!=c&&(p.length>1?p=p.filter((e=>t[e]===c)):1===p.length&&(p=t[p[0]]===c?p:[])),!m&&t){let e=!0;for(const r in t){if(i.has(r))continue;const s=t[r];if(null==s){e=!1,l.add(r);continue}const c=O(s);if(\"unknown\"===c){l.add(r);continue}l.delete(r),i.add(r);const u=o(r);u&&n.push({name:u,alias:r,type:c})}m=e}}}const h=o(1===p?.length&&p[0]||null)??void 0;if(h)for(const o of n)if(o.name===h&&r(o)){o.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:y,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(l)}}function I(e,t){return Array.from(l(c(e),t))}export{I as createOptimizedFeatures,s as getGeometryType,L as inferLayerProperties,T as validateGeoJSON};\n"],"mappings":"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"}