import{s as e}from"./p-98455486.js";import{S as t,E as s,L as r,A as n}from"./p-7dc0ec82.js";var i,a;function o(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":return i.Center}}function c(e){switch(e){case"top":return a.Top;case"middle":return a.Center;case"baseline":return a.Baseline;case"bottom":return a.Bottom}}function u(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[i.Right,a.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[i.Center,a.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[i.Left,a.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[i.Right,a.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[i.Center,a.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[i.Left,a.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[i.Right,a.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[i.Center,a.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[i.Left,a.Top];default:return console.debug(`Found invalid placement type ${e}`),[i.Center,a.Center]}}function l(e){switch(e){case i.Right:return-1;case i.Center:return 0;case i.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function h(e){switch(e){case a.Top:return 1;case a.Center:return 0;case a.Bottom:case a.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function v(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":return i.Center}}function S(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}!function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(i||(i={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(a||(a={}));function g(e,t,i){const a=r.SIZE_FIELD_STOPS|r.SIZE_MINMAX_VALUE|r.SIZE_SCALE_STOPS|r.SIZE_UNIT_VALUE,o=(t&(n.FIELD_TARGETS_OUTLINE|n.MINMAX_TARGETS_OUTLINE|n.SCALE_TARGETS_OUTLINE|n.UNIT_TARGETS_OUTLINE))>>>4;return e===s.LINE&&i.isOutline||e===s.FILL&&U(i.symbologyType)?a&o:a&~o}const p=0,f=8,d=7,m=8,V=11,b=11,w=12,y=13,z=14,P=15,L=16,x=17,M=18,A=19,C=20,B=21,F=26,T=Object.keys(t).filter((e=>"number"==typeof t[e])).reduce(((e,s)=>({...e,[s]:t[s]})),{});function O(e){return e===t.SIMPLE||e===t.OUTLINE_FILL_SIMPLE}function U(e){return e===t.OUTLINE_FILL||e===t.OUTLINE_FILL_SIMPLE}function R(e){return O(e.symbologyType)}function $(e){return U(e.symbologyType)}function j(e,t){switch(e){case s.FILL:return _.from(t);case s.LINE:return D.from(t);case s.MARKER:return q.from(t);case s.TEXT:return I.from(t);case s.LABEL:return J.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function k(e){switch(E.load(e).geometryType){case s.MARKER:return new q(e);case s.FILL:return new _(e);case s.LINE:return new D(e);case s.TEXT:return new I(e);case s.LABEL:return new J(e)}}class E{static load(e){const t=this.shared;return t.data=e,t}constructor(e){this._data=0,this._data=e}set data(e){this._data=e??0}get data(){return this._data}get geometryType(){return this.bits(m,V)}set geometryType(e){this.setBits(e,m,V)}get mapAligned(){return!!this.bit(C)}set mapAligned(e){this.setBit(C,e)}get sdf(){return!!this.bit(b)}set sdf(e){this.setBit(b,e??!1)}get pattern(){return!!this.bit(w)}set pattern(e){this.setBit(w,e)}get textureBinding(){return this.bits(p,f)}set textureBinding(e){this.setBits(e,p,f)}get symbologyType(){return this.bits(B,F)}set symbologyType(e){this.setBits(e,B,F)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return"fill";case s.MARKER:return"marker";case s.LINE:return"line";case s.TEXT:return"text";case s.LABEL:return"label";default:throw new e(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const s=1<<e;t?this._data|=s:this._data&=~s}bit(e){return(this._data&1<<e)>>e}setBits(e,t,s){for(let r=t,n=0;r<s;r++,n++)this.setBit(r,0!=(e&1<<n))}bits(e,t){let s=0;for(let r=e,n=0;r<t;r++,n++)s|=this.bit(r)<<n;return s}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:t[this.symbologyType],options:T,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(d&this.textureBinding)}}E.shared=new E(0);const Y=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(L)}set vvSizeMinMaxValue(e){this.setBit(L,e)}get vvSizeScaleStops(){return 0!==this.bit(x)}set vvSizeScaleStops(e){this.setBit(x,e)}get vvSizeFieldStops(){return 0!==this.bit(M)}set vvSizeFieldStops(e){this.setBit(M,e)}get vvSizeUnitValue(){return 0!==this.bit(A)}set vvSizeUnitValue(e){this.setBit(A,e)}hasSizeVV(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}hasVV(){return super.hasVV()||this.hasSizeVV()}setVV(e,t){super.setVV(e,t);const s=g(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(s&r.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&r.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&r.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&r.SIZE_SCALE_STOPS)}},H=e=>class extends e{get vvRotation(){return 0!==this.bit(P)}set vvRotation(e){this.setBit(P,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&r.ROTATION)}},G=e=>class extends e{get vvColor(){return 0!==this.bit(y)}set vvColor(e){this.setBit(y,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&r.COLOR)}},K=e=>class extends e{get vvOpacity(){return 0!==this.bit(z)}set vvOpacity(e){this.setBit(z,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&r.OPACITY)}};class _ extends(G(K(Y(E)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:r,vvFlags:n}=e,i=this.load(0);return i.geometryType=s.FILL,i.symbologyType=r,r!==t.DOT_DENSITY&&i.setVV(n,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}_.shared=new _(0);class q extends(G(K(H(Y(E))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:r,vvFlags:n}=e,i=this.load(0);return i.geometryType=s.MARKER,i.symbologyType=r,r!==t.HEATMAP&&i.setVV(n,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}q.shared=new q(0);class D extends(G(K(Y(E)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=s.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}D.shared=new D(0);class I extends(G(K(H(Y(E))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=s.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}I.shared=new I(0);class J extends(Y(E)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=s.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=S(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}J.shared=new J(0);const N=256/360,Q=1/Math.LN2;function W(e,t){return(e%=t)>=0?e:e+t}function X(e){return W(e*N,256)}function Z(e){return Math.log(e)*Q}export{k as A,D as C,q as N,$ as O,I as P,E as U,J as Z,U as _,i as a,u as b,X as c,l as d,Z as e,R as f,j as g,S as i,c as n,h as o,o as r,v as s,a as t,_ as w};
//# sourceMappingURL=p-220b11a0.js.map