{"version":3,"names":["t","constructor","e","E","T","r","_","i","u","s","this","createQuery","deleteQuery","resultAvailable","getResult","disjoint","beginTimeElapsed","endTimeElapsed","createTimestamp","timestampBits","disjointTimerQuery","getExtension","getQueryParameter","QUERY_RESULT_AVAILABLE","QUERY_RESULT","getParameter","GPU_DISJOINT_EXT","beginQuery","TIME_ELAPSED_EXT","endQuery","queryCounterEXT","TIMESTAMP_EXT","getQuery","QUERY_COUNTER_BITS_EXT","createQueryEXT","deleteQueryEXT","getQueryObjectEXT","QUERY_RESULT_AVAILABLE_EXT","QUERY_RESULT_EXT","beginQueryEXT","endQueryEXT","getQueryEXT","_result","dispose","_program","result","_test","f","g","super","_rctx","programCache","acquire","Map","gl","l","c","wrapMode","CLAMP_TO_EDGE","samplingMode","o","NEAREST","w","m","v","createVertex","n","STATIC_DRAW","Uint16Array","x","d","geometry","h","LINEAR","b","useProgram","bindTexture","setUniform1i","A","getBoundFramebufferObject","y","width","j","height","C","getViewport","bindFramebuffer","setViewport","setClearColor","setBlendingEnabled","clearSafe","COLOR_BUFFER_BIT","bindVAO","drawArrays","TRIANGLE_STRIP","Uint8Array","readPixels","a","RGBA","p","UNSIGNED_BYTE","Image","src","decode"],"sources":["./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js","./node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js","./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"./isWebGL2Context.js\";class t{constructor(e,t,E,T,r,_,i,u,s){this.createQuery=e,this.deleteQuery=t,this.resultAvailable=E,this.getResult=T,this.disjoint=r,this.beginTimeElapsed=_,this.endTimeElapsed=i,this.createTimestamp=u,this.timestampBits=s}}let E=!1;function T(T,r){if(r.disjointTimerQuery)return null;let _=T.getExtension(\"EXT_disjoint_timer_query_webgl2\");return _&&e(T)?new t((()=>T.createQuery()),(e=>{T.deleteQuery(e),E=!1}),(e=>T.getQueryParameter(e,T.QUERY_RESULT_AVAILABLE)),(e=>T.getQueryParameter(e,T.QUERY_RESULT)),(()=>T.getParameter(_.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,T.beginQuery(_.TIME_ELAPSED_EXT,e))}),(()=>{T.endQuery(_.TIME_ELAPSED_EXT),E=!1}),(e=>_.queryCounterEXT(e,_.TIMESTAMP_EXT)),(()=>T.getQuery(_.TIMESTAMP_EXT,_.QUERY_COUNTER_BITS_EXT))):(_=T.getExtension(\"EXT_disjoint_timer_query\"),_?new t((()=>_.createQueryEXT()),(e=>{_.deleteQueryEXT(e),E=!1}),(e=>_.getQueryObjectEXT(e,_.QUERY_RESULT_AVAILABLE_EXT)),(e=>_.getQueryObjectEXT(e,_.QUERY_RESULT_EXT)),(()=>T.getParameter(_.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,_.beginQueryEXT(_.TIME_ELAPSED_EXT,e))}),(()=>{_.endQueryEXT(_.TIME_ELAPSED_EXT),E=!1}),(e=>_.queryCounterEXT(e,_.TIMESTAMP_EXT)),(()=>_.getQueryEXT(_.TIMESTAMP_EXT,_.QUERY_COUNTER_BITS_EXT))):null)}export{t as DisjointTimerQuery,T as createDisjointTimerQuery,E as hasRunningElapsedTimer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as s}from\"../../core/maybe.js\";class t{constructor(){this._result=!1}dispose(){this._program=s(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}export{t as WebGLDriverTestModule};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{Pos2us as e}from\"../2d/engine/webgl/DefaultVertexAttributeLayouts.js\";import{BufferObject as r}from\"./BufferObject.js\";import{TextureWrapMode as t,TextureSamplingMode as o,Usage as n,ClearBufferBit as s,PrimitiveType as i,PixelFormat as a,PixelType as p}from\"./enums.js\";import{FramebufferObject as m}from\"./FramebufferObject.js\";import{Texture as u}from\"./Texture.js\";import{TextureDescriptor as c}from\"./TextureDescriptor.js\";import{VertexArrayObject as d}from\"./VertexArrayObject.js\";import{WebGLDriverTestModule as g}from\"./WebGLDriverTestModule.js\";class f extends g{constructor(e){super(),this._rctx=e;const r=\"\\n    precision highp float;\\n\\n    attribute vec2 a_pos;\\n    varying vec2 v_uv;\\n\\n    void main() {\\n      v_uv = a_pos;\\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n    }\\n    \",t=\"\\n    precision highp float;\\n\\n    varying vec2 v_uv;\\n\\n    uniform sampler2D u_texture;\\n\\n    void main() {\\n      gl_FragColor = texture2D(u_texture, v_uv);\\n    }\\n    \";this._program=e.programCache.acquire(r,t,new Map([[\"a_pos\",0]]))}dispose(){super.dispose()}_test(g){const f=this._rctx;if(!f.gl)return g.dispose(),!0;const l=new c(1);l.wrapMode=t.CLAMP_TO_EDGE,l.samplingMode=o.NEAREST;const w=new m(f,l),v=r.createVertex(f,n.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),x=new d(f,new Map([[\"a_pos\",0]]),e,{geometry:v}),h=new c;h.samplingMode=o.LINEAR,h.wrapMode=t.CLAMP_TO_EDGE;const b=new u(f,h,_);f.useProgram(g),f.bindTexture(b,0),g.setUniform1i(\"u_texture\",0);const A=f.getBoundFramebufferObject(),{x:E,y:T,width:j,height:C}=f.getViewport();f.bindFramebuffer(w),f.setViewport(0,0,1,1),f.setClearColor(0,0,0,0),f.setBlendingEnabled(!1),f.clearSafe(s.COLOR_BUFFER_BIT),f.bindVAO(x),f.drawArrays(i.TRIANGLE_STRIP,0,4);const y=new Uint8Array(4);return w.readPixels(0,0,1,1,a.RGBA,p.UNSIGNED_BYTE,y),x.dispose(),w.dispose(),b.dispose(),f.setViewport(E,T,j,C),f.bindFramebuffer(A),255!==y[0]}}const _=new Image;_.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",_.width=5,_.height=5,_.decode();export{f as SVGPremultipliedAlpha};\n"],"mappings":"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"}