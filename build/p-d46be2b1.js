import{h as t,r as e,c as i,g as n,H as r,a as s}from"./p-fc9cd10b.js";import{h as a,i as o,s as u,c as l,d as h,e as c,f as d,j as f,m,g as v,t as p,k as b,l as g,n as y,o as w,p as S,_ as x,q as C,r as O,R as M,v as T,w as k,x as I,z as A,A as j,B as F,E as D,F as P,G as L,H as E,J as N,K as R,L as B,M as _,N as z,O as V,V as G,P as $,Q as W,T as q,U as H,W as U,X as K,Y as J,Z as Y,$ as Z,a0 as X,a1 as Q,a2 as tt,a3 as et,a4 as it,a5 as nt,a6 as rt,a7 as st,a8 as at,a9 as ot,aa as ut,ab as lt,ac as ht,ad as ct,ae as dt,af as ft,ag as mt,ah as vt,ai as pt,aj as bt,ak as gt,al as yt,am as wt,an as St,ao as xt,ap as Ct,aq as Ot,ar as Mt,as as Tt,at as kt,au as It,av as At,aw as jt,ax as Ft,ay as Dt,az as Pt,aA as Lt,aB as Et,aC as Nt,aD as Rt,aE as Bt,aF as _t,aG as zt,aH as Vt,aI as Gt,aJ as $t,aK as Wt,aL as qt,aM as Ht,aN as Ut,aO as Kt,aP as Jt,aQ as Yt,aR as Zt,aS as Xt,aT as Qt,aU as te,aV as ee,aW as ie,aX as ne,aY as re,aZ as se,a_ as ae,a$ as oe,b0 as ue,b1 as le,b2 as he,b3 as ce,b4 as de,b5 as fe,b6 as me,b7 as ve,b8 as pe,b9 as be,ba as ge,bb as ye,bc as we,bd as Se,be as xe,bf as Ce,bg as Oe,bh as Me,bi as Te,bj as ke,bk as Ie,bl as Ae,bm as je,a as Fe,I as De,b as Pe,y as Le,S as Ee,u as Ne,C as Re,bn as Be,bo as _e,bp as ze,bq as Ve,br as Ge,bs as $e,bt as We}from"./p-98455486.js";import{q as qe,g as He,D as Ue,I as Ke,b as Je,d as Ye}from"./p-4f27d9ab.js";import{i as Ze,e as Xe,a as Qe,n as ti,h as ei,o as ii,T as ni,b as ri,W as si,c as ai}from"./p-c5929b55.js";import{f as oi,e as ui,c as li,i as hi,M as ci,h as di,r as fi,n as mi}from"./p-4cbc7b66.js";import{F as vi,j as pi,g as bi,d as gi,p as yi,c as wi,v as Si,z as xi,I as Ci,a as Oi,x as Mi,b as Ti}from"./p-a9fef357.js";import{s as ki,O as Ii}from"./p-e91d9d8d.js";import{a as Ai,n as ji}from"./p-f33b44a5.js";import{f as Fi}from"./p-fcbd27c0.js";import{f as Di}from"./p-14843b2a.js";import"./p-9803a24d.js";import"./p-1172b129.js";import"./p-8399f9e1.js";import{$ as Pi,s as Li,c as Ei,m as Ni,g as Ri,F as Bi,S as _i,a as zi,N as Vi}from"./p-0d2202fd.js";import{t as Gi}from"./p-e22a21a4.js";import{n as $i}from"./p-b15bfa44.js";import{o as Wi,u as qi}from"./p-5abe9c67.js";import{l as Hi,d as Ui,t as Ki,n as Ji}from"./p-baa730bb.js";import{s as Yi}from"./p-e1758a64.js";import{p as Zi,j as Xi}from"./p-ec443a8b.js";import{r as Qi,I as tn,F as en}from"./p-f4b056c3.js";import{l as nn,i as rn,p as sn}from"./p-6133cc0f.js";import{l as an}from"./p-e75aa2b5.js";import{t as on,r as un}from"./p-f5f26b1f.js";import{g as ln,l as hn,r as cn,a as dn,C as fn,z as mn,o as vn,v as pn,y as bn,j as gn,q as yn,s as wn,m as Sn}from"./p-3a9bb31c.js";import{n as xn,r as Cn}from"./p-783b6965.js";import{d as On,h as Mn}from"./p-f5452a6b.js";import"./p-8b2bb530.js";import{s as Tn,r as kn,M as In,h as An,i as jn}from"./p-b8afab55.js";import{e as Fn}from"./p-07f12c16.js";import{t as Dn}from"./p-2d1dac84.js";import{n as Pn}from"./p-c782b111.js";import{n as Ln}from"./p-0c70c0e2.js";function En(t){return()=>t}const Nn={UniqueValue:"unique-value",Simple:"simple",ClassBreaks:"class-breaks",Heatmap:"heatmap",DotDensity:"dot-density",Dictionary:"dictionary",PieChart:"pie-chart"};const Rn={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const Bn={Single:"singleColor",Match:"colorMatch"};const _n={Inline:"inline",Layer:"layer"};const zn={Same:"same",Newer:"newer",Older:"older",Unrecognized:"unrecognized"};var Vn;!function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"}(Vn||(Vn={}));const Gn=a("android");a("chrome")||Gn&&Gn>=4?"auto":"optimizeLegibility";Ze();function $n(t){return t&&"opacity"in t?t.opacity*$n(t.parent):1}async function Wn(t,e){if(!t)return;const i=t.sourceLayer,n=(null!=e&&e.useSourceLayer?i:t.layer)??i,r=$n(n);if(null!=t.symbol&&(null==e||!0!==e.ignoreGraphicSymbol)){const i="web-style"===t.symbol.type?await qe(t.symbol,{...e,cache:null!=e?e.webStyleCache:null}):t.symbol.clone();return He(i,null,r),i}const s=(null!=e?e.renderer:null)??(n&&"renderer"in n?n.renderer:null);let a=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!a)return;if(a="web-style"===a.type?await a.fetchSymbol({...e,cache:null!=e?e.webStyleCache:null}):a.clone(),!(s&&"visualVariables"in s&&s.visualVariables&&s.visualVariables.length))return He(a,null,r),a;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(null==e||null==e.arcade)){const t={...e};t.arcade=await o(),e=t}const{getColor:u,getOpacity:l,getAllSizes:h,getRotationAngle:c}=await import("./p-98455486.js").then((function(t){return t.kb})),d=[],f=[],m=[],v=[];for(const t of s.visualVariables)switch(t.type){case"color":d.push(t);break;case"opacity":f.push(t);break;case"rotation":v.push(t);break;case"size":t.target||m.push(t)}const p=!!d.length&&d[d.length-1],b=p?u(p,t,e):null,g=!!f.length&&f[f.length-1];let y=g?l(g,t,e):null;if(null!=r&&(y=null!=y?y*r:r),He(a,b,y),m.length){const i=h(m,t,e);await Ue(a,i)}for(const i of v)Ke(a,c(i,t,e),i.axis);return a}async function qn(t,e){if(!t)return;const i=$n(t.layer||t.sourceLayer);if(null!=t.symbol&&(null==e||!0!==e.ignoreGraphicSymbol)){const n="web-style"===t.symbol.type?await qe(t.symbol,e):t.symbol.clone();return Je(n,i)}const n=null!=e&&e.renderer||t.get("layer.renderer")||t.get("sourceLayer.renderer");let r=await n.getSymbolAsync(t,e);if(!r)return;r="web-style"===r.type?await qe(r,e):r.clone();const s=Je(r,i);if(!("visualVariables"in n)||"visualVariables"in n&&!n.visualVariables||"visualVariables"in n&&!n.visualVariables?.length)return s;if(n.arcadeRequiredForVisualVariables&&(null==e||null==e.arcade)){const t={...e};t.arcade=await o(),e=t}const{getColor:a,getOpacity:u}=await import("./p-98455486.js").then((function(t){return t.kb})),l=[],h=[];for(const t of n.visualVariables)switch(t.type){case"color":l.push(t);break;case"opacity":h.push(t)}const c=l.length>0?l[l.length-1]:null,d=c?a(c,t,e):s,f=h.length>0?h[h.length-1]:null;let m=f?u(f,t,e):null;return null!=i&&(m=null!=m?m*i:i),d?Ye(d,m):null}function Hn(t,e){if(!t.view)throw new u(`${e}:missing-parameters`,"'view' parameter is required for binning");if(t.sqlExpression)throw new u(`${e}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===t.view.type)throw new u(`${e}:invalid-parameters`,"3d view is not supported for binning")}const Un=l.getLogger("esri.support.basemapUtils");function Kn(){return{}}function Jn(t){for(const e in t){const i=t[e];!1===i?.destroyed&&i.destroy(),delete t[e]}}function Yn(t,e){let i;if("string"==typeof t){if(!(t in ki)){const e=Object.entries(ki).filter((([t,e])=>h.apiKey&&!e.classic||!h.apiKey&&e.classic&&!e.deprecated)).map((([t])=>`"${t}"`)).join(", ");return Un.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${e}`),null}e&&(i=e[t]),i||(i=Ii.fromId(t),e&&(e[t]=i))}else i=c(Ii,t);return i?.destroyed&&(Un.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}const Zn=",",Xn="percent-of-total",Qn="field",tr={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},er=["integer","small-integer"];let ir=null;async function nr(t){const{field:e,field2:i,field3:n,normalizationField:r,valueExpression:s}=t;let a=[];if(s){if(!ir){const{arcadeUtils:t}=await o();ir=t}a=ir.extractFieldNames(s)}return e&&a.push(e),i&&a.push(i),n&&a.push(n),r&&a.push(r),a}function rr(t){let e=t.normalizationType;return e||(t.normalizationField?e=Qn:null!=t.normalizationTotal&&(e=Xn)),e??void 0}function sr(t){return String(t).padStart(2,"0")}function ar(t,e,i){let n;if("date"===e||"number"===e){"number"===e&&(t=new Date(t));n=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${sr((i?t.getMonth():t.getUTCMonth())+1)}-${sr(i?t.getDate():t.getUTCDate())} ${sr(i?t.getHours():t.getUTCHours())}:${sr(i?t.getMinutes():t.getUTCMinutes())}:${sr(i?t.getSeconds():t.getUTCSeconds())}'`}else n=t;return n}function or(t,e,i,n){const{hasQueryEngine:r}=t;let s=`(${ar(i,ur(t,i),r)} - ${ar(e,ur(t,e),r)})`;r&&(s=`(${s} * ${tr.milliseconds})`);let a=tr[n],o="/";a<1&&(a=1/a,o="*");return{sqlExpression:1===a?s:`(${s} ${o} ${a})`,sqlWhere:null}}function ur(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const i=t.getField(e);if("<now>"===e.toLowerCase())return;if(i&&"date"===i.type)return"field"}}function lr(t,e){const i=e&&t.getField(e);return!!i&&er.includes(i.type)}function hr(t){return`cast(${t} as float)`}class cr{constructor(){this.connection=null}async open(t){this.connection=await d("statsWorker",{strategy:"distributed",signal:t})}destroy(){this.connection?.close()}static getInstance(){return cr.instance||(cr.instance=new cr),cr.instance}async summaryStatistics(t,e){if(!this.connection)throw new u("worker-client:summary-statistics","connection is required");return this.connection.invoke("summaryStatistics",{attribute:t,features:e})}async uniqueValues(t,e){if(!this.connection)throw new u("worker-client:unique-values","connection is required");return this.connection.invoke("uniqueValues",{attribute:t,features:e})}async classBreaks(t,e){if(!this.connection)throw new u("worker-client:class-breaks","connection is required");return this.connection.invoke("classBreaks",{attribute:t,features:e})}async histogram(t,e){if(!this.connection)throw new u("worker-client:histogram","connection is required");return this.connection.invoke("histogram",{attribute:t,features:e})}async heatmapStatistics(t,e){if(!this.connection)throw new u("worker-client:heatmap-statistics","connection is required");return this.connection.invoke("heatmapStatistics",{attribute:t,features:e})}}async function dr(t,e,i,n){const r=Di(t),{source:s,checkValueRange:a}=e,{classificationDefinition:o}=i,u={...i.toJSON(),f:"json"};let l=null;if(l="class-breaks-definition"===o?.type?o.classificationField:o?.attributeField,s){const t={source:s?.toJSON()};u.layer=JSON.stringify(t)}u.classificationDef&&(u.classificationDef=JSON.stringify(u.classificationDef));let h={query:u};n&&(h={...n,...h});const c={url:r.path,field:l,checkValueRange:a},d=r.path+"/generateRenderer";return f(d,h).then((t=>fr(c,t)))}function fr(t,e){const{field:i,checkValueRange:n,url:r}=t,s=e&&e.data;if(!s)return;if(!n){const t=mr(s);return Promise.resolve(t)}const a=new m({statisticType:"min",onStatisticField:i}),o=new m({statisticType:"max",onStatisticField:i}),u=new v({outStatistics:[a,o]});return Fi(r,u).then((t=>{const e=t.features[0].attributes;let i=null,n=null;for(const t in e)0===t.toLowerCase().indexOf("min")?i=e[t]:n=e[t];return mr(s,i,n)}))}function mr(t,e,i){if("classBreaks"===t.type){const n=p(t);return{classBreaks:n.classBreakInfos.map(((t,r)=>(0===r&&null!=e&&(t.minValue=e),r===n.classBreakInfos.length-1&&null!=i&&(t.maxValue=i),{minValue:t.minValue,maxValue:t.maxValue,label:t.label}))),normalizationTotal:n.normalizationTotal}}const{uniqueValueInfos:n}=t;return{uniqueValues:n?.map(((t,r)=>(0===r&&null!=e&&(t.value=e),r===n.length-1&&null!=i&&(t.value=i),{count:t.count,value:t.value,label:t.label})))??[]}}let vr=class extends w{constructor(t){super(t),this.classificationDefinition=null,this.where=null}};b([g({json:{name:"classificationDef",write:!0}})],vr.prototype,"classificationDefinition",void 0),b([g({type:String,json:{write:!0}})],vr.prototype,"where",void 0),vr=b([y("esri.rest.support.GenerateRendererParameters")],vr);const pr=vr;let br=class extends w{constructor(t){super(t),this.type="unique-value-definition",this.attributeField=null,this.attributeField2=null,this.attributeField3=null,this.fieldDelimiter=null}get uniqueValueFields(){const t=[];return this.attributeField&&t.push(this.attributeField),this.attributeField2&&t.push(this.attributeField2),this.attributeField3&&t.push(this.attributeField3),t}};b([S({uniqueValueDef:"unique-value-definition"})],br.prototype,"type",void 0),b([g()],br.prototype,"attributeField",void 0),b([g()],br.prototype,"attributeField2",void 0),b([g()],br.prototype,"attributeField3",void 0),b([g({json:{write:!0}})],br.prototype,"fieldDelimiter",void 0),b([g({json:{write:!0}})],br.prototype,"uniqueValueFields",null),br=b([y("esri.rest.support.UniqueValueDefinition")],br);const gr=br;const yr="no_dominant_category";function wr(t){return{expression:Sr(t,{returnFieldName:!0,defaultValue:`'${yr}'`})}}function Sr(t,e){const{returnFieldName:i,defaultValue:n,layer:r}=e,s=[];if(i&&n){const e=t.map((t=>`${t} <= 0`)).join(" AND ");s.push(`WHEN ${e} THEN ${n}`)}for(const e of t){const n=t.reduce(((t,i)=>(e!==i&&t.push(`${e} > ${i}`),t)),[]).join(" AND "),a=r&&lr(r,e),o=i&&`'${e}'`?`'${e}'`:a?hr(e):e;s.push(`WHEN ${n} THEN ${o}`)}return`CASE ${s.join(" ")} ELSE ${n||"0"} END`}function xr(t){return t&&t.map((t=>`$feature["${t}"];`)).join("\n")+"\n"||""}function Cr(t,e=!1){const i=t.map((t=>`"${t}"`)),n="\n  if(value != null && value >= 0) {\n    if (totalValue == null) { totalValue = 0; }\n    totalValue = totalValue + value;\n  }\n  ";return`\n  var fieldNames = [ ${i.join(", ")} ];\n  var numFields = ${i.length};\n  var maxValueField = null;\n  var maxValue = -Infinity;\n  var value, i, totalValue = null;\n\n  for(i = 0; i < numFields; i++) {\n    value = $feature[fieldNames[i]];\n\n    if(value > 0) {\n      if(value > maxValue) {\n        maxValue = value;\n        maxValueField = fieldNames[i];\n      }\n      else if (value == maxValue) {\n        maxValueField = null;\n      }\n    }\n    ${e?n:""}\n  }\n  `}function Or(t){const e=Cr(t);return`\n  ${xr(t)}\n  ${e}\n  return maxValueField;\n  `}let Mr=class extends x{constructor(t){super(t)}};b([g({constructOnly:!0})],Mr.prototype,"layer",void 0),b([g()],Mr.prototype,"geometryType",void 0),b([g()],Mr.prototype,"objectIdField",void 0),b([g()],Mr.prototype,"supportsSQLExpression",void 0),b([g()],Mr.prototype,"hasQueryEngine",void 0),b([g()],Mr.prototype,"minScale",void 0),b([g()],Mr.prototype,"maxScale",void 0),b([g()],Mr.prototype,"fullExtent",void 0),Mr=b([y("esri.smartMapping.support.adapters.LayerAdapter")],Mr);const Tr=Mr;const kr=/_value$/i,Ir=Math.LOG10E,Ar=10;function jr(t){return t.map((t=>t.toJSON()))}function Fr(t,e){const i=[],n=t.layer,r="featureReduction"in n?n.featureReduction:null,s="binning"===r?.type,a=null!=r&&"fields"in r?r.fields?.map((t=>t.name?.toLowerCase())).filter(Boolean):[];if(!s||!e)return i;for(const t of e)a.includes(t.toLowerCase())||i.push(t);return i}function Dr(t,e,i){const n=[];if(e)for(const r of e){const e=t.getField(r);e&&i&&"availableFields"in i&&!i.availableFields?.includes(e.name)&&n.push(e.name)}return n}function Pr(t,e){const i=t&&t.features;if(0===i?.length)return{avg:null,count:0,max:null,median:null,min:null,nullcount:0,stddev:null,sum:null,variance:null};const n=i?.[0]?.attributes,r={};for(const t in n)r[t.replace(kr,"").toLowerCase()]=n[t];return null!=r.totalcount&&r.totalcount>=r.count&&(r.nullcount=r.totalcount-r.count),delete r.totalcount,r.min===r.max&&null!=r.min&&null==r.stddev&&(r.stddev=r.variance=0),e&&(["min","max","avg","stddev","sum","variance"].forEach((t=>{null!=r[t]&&(r[t]=Math.ceil(r[t]))})),r.min===r.max&&null!=r.min&&(r.avg=r.min,r.stddev=r.variance=0)),r}function Lr(t){const e=[],i=t.classBreaks,n=i[0].minValue,r=i[i.length-1].maxValue;i.forEach((t=>{e.push([t.minValue,t.maxValue])}));const s={field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,layer:t.layer};return{min:n,max:r,intervals:e,sqlExpr:Er(s),excludeZerosExpr:t.where,normTotal:t.normalizationTotal}}function Er(t){const{field:e,normalizationType:i,normalizationField:n,normalizationTotal:r,layer:s}=t,a=lr(s,e);let o=e;return"percent-of-total"===i?o=`((${a?hr(e):e} / ${r}) * 100)`:"log"===i?o=`(log(${e}) * ${Ir})`:"field"===i?o=`(${a?hr(e):e} / ${n})`:"natural-log"===i?o=`(log(${a?hr(e):e}))`:"square-root"===i&&(o=`(power(${a?hr(e):e}, 0.5))`),o}function Nr(t,e){let i;if(e=e.toLowerCase(),t)for(const n in t)if(n.toLowerCase()!==e){i=t[n];break}return i}function Rr(t,e){let i;if(e=e.toLowerCase(),t)for(const n in t)if(n.toLowerCase()===e){i=t[n];break}return i}function Br(t,e,i,n,r){const s={},a="countOFExpr";t&&t.features&&t.features.forEach((t=>{const e=t.attributes,i=Nr(e,a),n=Rr(e,a);null!=i&&null!=n&&0!==i&&(s[i]=n)}));const o=[];return Pi(e,i,n).forEach(((t,e)=>{const i=(e+1).toString();o.push({minValue:t[0],maxValue:t[1],count:s.hasOwnProperty(i)?s[i]:0})})),{bins:o,minValue:e,maxValue:i,normalizationTotal:r}}function _r(t,e){const i=t&&t.features,{field:n,field2:r,field3:s,fieldDelimiter:a,layer:o,view:u,signal:l,labels:h}=e,c=`countOF${!(!n||!r)?"Expr":n||"Expr"}`,d={};let f=!1;if(i.forEach((t=>{const e=t.attributes,i=Rr(e,c);let o=n?Rr(e,n):Nr(e,c),u=r?Rr(e,r):null,l=s?Rr(e,s):null;null===o&&0===i&&(f=!0),(null==o||"string"==typeof o&&""===o.trim())&&(o=null),r&&(null==u||"string"==typeof u&&""===u.trim())&&(u=null),s&&(null==l||"string"==typeof l&&""===l.trim())&&(l=null);let h=o;r&&(h=`${Ei(h)}${a}${Ei(u)}`,s&&(h=`${h}${a}${Ei(l)}`)),null==d[h]?d[h]={count:i,data:h}:d[h].count=d[h].count+i})),n&&f){const t=n+" is NULL";return o.queryFeatureCount({whereClause:t,view:u,signal:l}).then((t=>(t=t||0,d.null.count=d.null.count+t,zr(d,h)))).catch((()=>(T(l),zr(d,h))))}return Promise.resolve(zr(d,h))}function zr(t,e){if(e)for(const i in t)t[i].label=e[i];return{count:t}}async function Vr(t,e,i){const n=t?i.getField(t):null,r=n?i.getFieldDomain(n.name):null;if(r)return r;const{uniqueValueInfos:s}=await i.uniqueValues({field:t,sqlWhere:e.sqlWhere,features:e.features,useFeaturesInView:e.useFeaturesInView,view:e.view,signal:e.signal}),a=s.map((t=>({code:t.value})));return new I({codedValues:a})}async function Gr(t,e){if(!t.returnAllCodedValues)return[];const{field:i,field2:n,field3:r}=t;if(i&&!n){const t=i?e.getField(i):null,n=t?e.getFieldDomain(t.name):null;return n?[n]:[]}const s=[];return i&&(s.push(Vr(i,t,e)),n&&(s.push(Vr(n,t,e)),r&&s.push(Vr(r,t,e)))),Promise.all(s)}function $r(t,e){return or(t,new Date(0),e,"milliseconds").sqlExpression}function Wr(t){return{viewingMode:"2d"===t.type?"map":t.viewingMode,scale:t.scale,spatialReference:t.spatialReference?.toJSON()}}function qr(t,e){const i=t.map((t=>t.value)),n=e.filter((t=>!i.includes(t)));for(const e of n)t.push({value:e,count:0});t.sort(((t,i)=>e.indexOf(t.value)-e.indexOf(i.value)));for(const e of t)e.value===yr&&(e.value=null);return{predominantCategoryInfos:t}}function Hr(t){const e="featureReduction"in t?t.featureReduction:null;return((null!=e&&"fields"in e?e.fields:null)??[]).map((e=>{const i=Ur(e,t.fieldsIndex);return i?new O({type:i,name:e.name,alias:e.alias}):null})).filter(M)}function Ur(t,e){switch(t.statisticType){case"avg":case"avg_angle":return"double";case"count":return"integer";case"min":case"max":case"sum":return t.onStatisticField?e.get(t.onStatisticField)?.type??null:t.onStatisticExpression?"string"===t.onStatisticExpression.returnType?null:"double":null;case"mode":return t.onStatisticField?e.get(t.onStatisticField)?.type??null:t.onStatisticExpression?"string"===t.onStatisticExpression.returnType?"string":"double":null;default:return null}}function Kr(t,e,i){const{field:n,normalizationType:r,normalizationField:s,normalizationTotal:a,minValue:o,maxValue:u,filter:l}=e,h=t.supportsSQLExpression&&i?$r(t,n):e.sqlExpression,c=Er({field:n,normalizationType:r,normalizationField:s,normalizationTotal:a,layer:t}),d=h||c,f=d?pi(d,o,u):null,v=bi({field:n,normalizationField:s,normalizationType:r}),p=vi(e.sqlWhere,v),b=vi(p,f),g=Ni({normalizationField:s,normalizationType:r,sqlExpression:h,supportsSQLExpression:t.supportsSQLExpression,minValue:o,maxValue:u}),y=k(t.getField(n??void 0)),w=Li.filter((t=>"nullcount"===t?g:!y||"count"===t)),S=t.createQuery();return S.where=vi(S.where,b),S.sqlFormat=h?"standard":null,S.outStatistics=w.map((e=>{const i=new m;let n=null,r=null,s=`${e}_value`;return"variance"===e?(n="var",r=d):"nullcount"===e?(n="count",r=t.objectIdField,s="totalcount_value"):"median"===e?(n="percentile-continuous",r=d,i.statisticParameters={value:.5}):(n=e,r=d),i.statisticType=n,i.onStatisticField=r,i.outStatisticFieldName=s,i})),Jr(S,l),S}function Jr(t,e){e&&(t.geometry=e.geometry,t.spatialRelationship=e.spatialRelationship)}function Yr(t,e){const{field:i,field2:n,field3:r,sqlExpression:s}=e,a=!(!i||!n),o=t.createQuery();return o.where=vi(o.where,e.sqlWhere),o.sqlFormat=s?"standard":null,o.outStatistics=[Zr(a?null:i,a?"1":s)].filter(Boolean),o.groupByFieldsForStatistics=[i||s,n,r].filter(Boolean),Jr(o,e.filter),o}function Zr(t,e){const i="countOF"+(t||"Expr"),n=new m;return n.statisticType="count",n.onStatisticField=e?"1":t,n.outStatisticFieldName=i,n}function Xr(t,e,i,n=Ar,r,s,a){const{min:o,max:u,normTotal:l,excludeZerosExpr:h}=e,c=e.intervals||Pi(o,u,n),d=e.sqlExpr||i;return Qr(t,c,d,h,r,s,a).then((t=>({bins:t.map(((t,e)=>({minValue:c[e][0],maxValue:c[e][1],count:t.value}))),minValue:o,maxValue:u,normalizationTotal:l})))}function Qr(t,e,i,n,r,s,a){const o=[],u=e.length;for(let t=0;t<u;t++){const r=vi(n,vi(i+" >= "+e[t][0],null!==e[t][1]?i+(t===u-1?" <= ":" < ")+e[t][1]:""));o.push(r)}return C(o.map((e=>t.queryFeatureCount({whereClause:e,view:r,filter:s,signal:a}))))}const ts=5;let es=null,is=class extends Tr{constructor(){super(...arguments),this._hasLocalSource=!1,this.adapterName="in-memory-layer-adapter"}destroy(){this.workerClient?.destroy()}async _waitForLayerViewUpdate(t){if(!t)throw new u(`${this.adapterName}:insufficient-data", "layerView is required to fetch the features`);const e=new AbortController,i=A((()=>!t.updating),e.signal);await j(i,5e3,e).catch((t=>{throw l.getLogger(this).warn("LayerView is taking too long to update. Aborting fetch from layerView."),t}))}async _fetchFeatureSetFromMemory(t,e,i){const n=this.layer;if(this._hasLocalSource)return n.queryFeatures(t);if(!e)throw new u(`${this.adapterName}:insufficient-data`,"view is required to fetch the features from layerView");const r=await e.whenLayerView(this.layer);return await this._waitForLayerViewUpdate(r),r.queryFeatures(t,{signal:i})}async _fetchFeaturesFromMemory(t,e,i,n){const r=this.layer,s="json"===n;if(this._hasLocalSource){const t=await r.queryFeatures(e);return s?jr(t.features):t.features}if(await this._waitForLayerViewUpdate(t),s&&"queryFeaturesJSON"in t&&t.queryFeaturesJSON){const{features:n}=await t.queryFeaturesJSON(e,{signal:i});return n}if(!("queryFeatures"in t))throw new u(`${this.adapterName}:not-supported`,"'queryFeatures' is not supported on the layerView");const a=await t.queryFeatures(e,{signal:i});return s?jr(a.features):a.features}_fetchFeaturesForStats(t,e){return nr({field:t.field,field2:t.field2,field3:t.field3,normalizationField:t.normalizationField,valueExpression:t.valueExpression}).then((i=>this.getSampleFeatures({sampleSize:-1,view:t.view,returnGeometry:t.returnGeometry,filter:t.filter,requiredFields:i,signal:t.signal},e)))}async _summaryStatsFromClientQuery(t,e){const{view:i,signal:n}=t,r=Kr(this,t,e),s=await this._fetchFeatureSetFromMemory(r,i,n),a=Pr(s,e);return Ri(a)}async _getNormalizationTotalFromMemory(t,e,i){const{featuresJSON:n,graphics:r,layerView:s,query:a}=e,o=(!n&&!r&&s&&"querySummaryStatistics"in s?await s.querySummaryStatistics(a,{field:t},{signal:i}):n?await this.workerClient.summaryStatistics({field:t},n):await gi({attribute:{field:t},features:r??[]})).sum;if(null==o)throw new u(`${this.adapterName}:invalid`,"invalid normalizationTotal");return o}async _summaryStatsFromMemory(t,e){const{view:i,field:n,valueExpression:r,normalizationType:s,signal:a}=t,o={field:n,valueExpression:r,normalizationType:s,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue},{featuresJSON:u,graphics:l,layerView:h,query:c,fieldInfos:d}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"querySummaryStatistics"});return r&&i&&(u||l)&&(o.fieldType=e?.type?F.toJSON(e.type):null,o.viewInfoParams=Wr(i),o.fieldInfos=d),"percent-of-total"===s&&null==t.normalizationTotal&&(o.normalizationTotal=await this._getNormalizationTotalFromMemory(n,{featuresJSON:u,graphics:l,layerView:h,query:c},a)),!u&&!l&&h&&"querySummaryStatistics"in h?h.querySummaryStatistics(c,o,{signal:a}):u?this.workerClient.summaryStatistics(o,u):gi({attribute:o,features:l})}async _getFilteredFeatures(t,e){let i=[];if("intersects"===e?.spatialRelationship){const{intersect:n}=await import("./p-f51cdd06.js"),r=null!=e.geometry?e.geometry:null;for(const e of t){const t=null!=e.geometry?e.geometry:null;if(t&&r){await n(t,r)&&i.push(e)}}}else i=t;return t.length&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass?{graphics:i}:{featuresJSON:i}}async _processStatsFromMemoryParams(t){const{features:e,filter:i}=t;if(e?.length)return this._getFilteredFeatures(e,i);const{view:n,field:r,field2:s,field3:a,normalizationField:u,valueExpression:l,layerViewFunc:h,signal:c}=t;let d=t.returnGeometry;if(null==d&&l){if(!es){const{arcadeUtils:t}=await o();es=t}const t=es.hasGeometryOperations(l);t&&await es.enableGeometryOperations(),d=t}let f=null,m=null,v=null,p=null,b=null;if(n)try{f=await n.whenLayerView(this.layer),m=null!=h&&h in f&&"function"==typeof f[h]}catch{m=!1}if(m)try{await this._waitForLayerViewUpdate(f);const t=await nr({field:r,field2:s,field3:a,normalizationField:u,valueExpression:l});Dr(this,t,f).length?m=!1:(v=this.layer.createQuery(),v.outFields=t,v.returnGeometry=!1,Jr(v,i)),f.suspended&&(m=!1)}catch{m=!1}return m||(p=await this._fetchFeaturesForStats({field:r,field2:s,field3:a,valueExpression:l,normalizationField:u,returnGeometry:d,filter:i,view:n,signal:c},"json"),b=(await nr({valueExpression:l})).map((t=>this.getField(t)?.toJSON())).filter(Boolean)),{layerView:f,query:v,featuresJSON:p,fieldInfos:b}}async _uvFromClientQuery(t,e){const{view:i,signal:n}=t,r=Yr(this,t),s=await this._fetchFeatureSetFromMemory(r,i,n),a=await _r(s,{layer:this,field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:Zn,view:t.view,signal:t.signal});return Bi(a,e,t.returnAllCodedValues,Zn)}async _uvFromMemory(t,e){const{view:i,field:n,valueExpression:r,returnAllCodedValues:s,signal:a}=t,{featuresJSON:o,graphics:u,layerView:l,query:h,fieldInfos:c}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryUniqueValues"}),d={field:n,field2:t.field2,field3:t.field3,fieldDelimiter:Zn,valueExpression:r,domains:e,returnAllCodedValues:s};return r&&i&&(o||u)&&(d.viewInfoParams=Wr(i),d.fieldInfos=c),!o&&!u&&l&&"queryUniqueValues"in l?l.queryUniqueValues(h,d,{signal:a}):o?this.workerClient.uniqueValues(d,o):yi({attribute:d,features:u})}_histogramForField(t){let e=null;return e=null!=t.minValue&&null!=t.maxValue?Promise.resolve({min:t.minValue,max:t.maxValue}):this.summaryStatistics(t).then((t=>{if(!t.count)throw new u(`${this.adapterName}:insufficient-data`,"Either the layer has no features or none of the features have data for the field");return{min:t.min,max:t.max}})),e.then((e=>Xr(this,{min:e.min,max:e.max},t.field,t.numBins??void 0,t.view,t.filter,t.signal)))}async _histogramFromMemory(t){const{view:e,field:i,valueExpression:n,signal:r}=t,{featuresJSON:s,graphics:a,layerView:o,query:u,fieldInfos:l}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryHistogram"}),h={field:i,valueExpression:n,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numBins:t.numBins};return n&&e&&(s||a)&&(h.viewInfoParams=Wr(e),h.fieldInfos=l),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:s,graphics:a,layerView:o,query:u},r)),!s&&!a&&o&&"queryHistogram"in o?o.queryHistogram(u,h,{signal:r}):s?this.workerClient.histogram(h,s):wi({attribute:h,features:a})}_classBreaksFromInterpolation(t){const{minValue:e,maxValue:i}=t,n=t.numClasses||ts,r=[],s=(i-e)/n;for(let t=0;t<n;t++){const i=e+t*s;r.push({minValue:i,maxValue:i+s})}r[n-1].maxValue=i;const a={classBreaks:r,normalizationTotal:t.normalizationTotal},o=_i(a,t.classificationMethod);return Promise.resolve(o)}async _classBreaksFromMemory(t){const{view:e,field:i,valueExpression:n,signal:r}=t,{featuresJSON:s,graphics:a,layerView:o,query:u,fieldInfos:l}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryClassBreaks"}),h={field:i,valueExpression:n,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numClasses:t.numClasses};return n&&e&&(s||a)&&(h.viewInfoParams=Wr(e),h.fieldInfos=l),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:s,graphics:a,layerView:o,query:u},r)),!s&&!a&&o&&"queryClassBreaks"in o?o.queryClassBreaks(u,h,{signal:r}):s?this.workerClient.classBreaks(h,s):Si({attribute:h,features:a})}async _heatmapStatsFromMemory(t,e){const{view:i,field:n,radius:r}=t,{featuresJSON:s,graphics:a}=await this._processStatsFromMemoryParams({...t,returnGeometry:!0});D(i,"InMemoryLayerAdapter: must have a view");const o=new P({extent:i.extent,tolerance:"2d"===i.type?i.state.resolution:i.pixelSizeAt?.(i.center)}),u={field:n,fieldOffset:e,radius:r,transform:zi(o),spatialReference:i.spatialReference?.toJSON(),size:i.size};return s?.length||a?.length?s?this.workerClient.heatmapStatistics(u,s):xi({attribute:u,features:a}):{count:0,min:null,max:null,avg:null,stddev:null}}getField(t=""){return this.layer.getField(t)}getFieldUsageInfo(t){return this.getField(t)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:null}getFieldDomain(t,e){return this.layer.getFieldDomain(t,e)}createQuery(){return this.layer.createQuery()}async summaryStatistics(t){const{field:e,valueExpression:i,sqlExpression:n,features:r,view:s}=t,a=e?this.getField(e):null,o=L(a),l=!!i,h="3d"===s?.type;if(!i&&n&&!this.supportsSQLExpression)throw new u(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return l||r||h?this._summaryStatsFromMemory(t,a):this._summaryStatsFromClientQuery(t,o)}async uniqueValues(t){const{valueExpression:e,sqlExpression:i,features:n,view:r}=t,s=await Gr(t,this),a=!!e,o="3d"===r?.type;if(!e&&i&&!this.supportsSQLExpression)throw new u(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return a||n||o?this._uvFromMemory(t,s):this._uvFromClientQuery(t,s)}async histogram(t){const{features:e,valueExpression:i,normalizationType:n,sqlExpression:r}=t,s=e||!!i;if(!i&&r&&!this.supportsSQLExpression)throw new u(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return s||n?this._histogramFromMemory(t):this._histogramForField(t)}async classBreaks(t){return!1!==t.analyzeData?this._classBreaksFromMemory(t):this._classBreaksFromInterpolation(t)}async queryFeatureCount(t){const{whereClause:e,view:i,signal:n}=t;if(!i)throw new u(`${this.adapterName}:insufficient-data`,"view is required to fetch the features from layerView");const r=this.layer.createQuery();r.where=vi(r.where,e);const s=await i.whenLayerView(this.layer);return await A((()=>!s.updating),n),s.queryFeatureCount(r,{signal:n})}async generateRenderer(t,e){throw new u(`${this.adapterName}:not-supported`,"Layer does not support generateRenderer operation")}async predominantCategories(t){const{fields:e,view:i,signal:n}=t,r=Or(e),s=await this._uvFromMemory({valueExpression:r,view:i,signal:n});return qr(s.uniqueValueInfos,e)}async heatmapStatistics(t){const{field:e,fieldOffset:i,view:n,signal:r}=t;return(e&&null==i?this.summaryStatistics({field:e,view:n,signal:r}):Promise.resolve(null)).then((e=>{let n=i||0;if(e){const{count:t,min:i,max:r}=e;t?i===r&&0===i?n=1:r<=0?n="abs":i<0&&(n=-1.01*i):n=1}return this._heatmapStatsFromMemory(t,n).then((t=>({...t,summaryStatistics:e,fieldOffset:n})))}))}async getSampleFeatures(t,e){const{view:i,sampleSize:n,requiredFields:r,returnGeometry:s,filter:a,signal:o}=t,l=this.layer.createQuery(),h=1;if(l.outSpatialReference=t.spatialReference||i&&i.spatialReference,l.returnGeometry=!!s,l.outFields=r,Jr(l,a),!i)throw new u(`${this.adapterName}:not-supported`,"view is required to get sample features for Layer");const c=await i.whenLayerView(this.layer);if(Dr(this,r,c).length)throw new u(`${this.adapterName}:not-supported`,"Required fields need to be passed in the outFields for Layer");const d=await this._fetchFeaturesFromMemory(c,l,o,e),f=null!=n&&n>0&&n<=d.length?n:d.length;return E(d,f,h)}load(t){const e=this.layer.load(t).then((async e=>{this.geometryType=e.geometryType,this.objectIdField=e.objectIdField,this.supportsSQLExpression=e.get("capabilities.query.supportsSqlExpression"),this.minScale=e.minScale,this.maxScale=e.maxScale,this.fullExtent=e.fullExtent,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=cr.getInstance(),await this.workerClient.open(t.signal)}));return this.addResolvingPromise(e),Promise.resolve(this)}};b([g({constructOnly:!0})],is.prototype,"layer",void 0),is=b([y("esri.smartMapping.support.adapters.InMemoryLayerAdapter")],is);const ns=is;const rs=5,ss=2e4,as=4e5;let os=class extends ns{constructor(){super(...arguments),this.adapterName="feature-layer-adapter"}_isStatsSupportedOnService(){const t=this.layer;if(!t.get("capabilities.query.supportsStatistics")||"multipatch"===this.geometryType&&!N(t.url)&&t.version<10.5)throw new u(`${this.adapterName}:not-supported`,"Layer does not support statistics query");return Promise.resolve()}_fetchFeaturesFromService(t,e){return this.layer.queryFeatures(t,{signal:e}).then((t=>t.features))}_fetchFeaturesJSONFromService(t,e){return this._fetchFeaturesFromService(t,e).then(jr)}_summaryStatsFromGenRend(t){const e=t.normalizationType,i=t.normalizationField;return this.classBreaks({field:t.field,numClasses:rs,classificationMethod:"standard-deviation",standardDeviationInterval:.25,normalizationType:e,normalizationField:"field"===e?i:void 0,minValue:t.minValue,maxValue:t.maxValue,filter:t.filter,signal:t.signal}).then((t=>{let e,i,n;if(t.classBreakInfos?.some((t=>(t.hasAvg&&(e=t),!!e))),e){const t=e.maxValue-e.minValue;i=e.minValue+t/2,n=4*t}const r={min:t.minValue,max:t.maxValue,avg:i,stddev:n};return Ri(r)}))}async _summaryStatsFromServiceQuery(t,e){await this._isStatsSupportedOnService(),"percent-of-total"===t.normalizationType&&(t.normalizationTotal=await this._getNormalizationTotal(t.field,t.normalizationType,t.filter));const i=Kr(this,t,e),n=await this.layer.queryFeatures(i,{signal:t.signal}),r=Pr(n,e);return Ri(r)}_uvFromGenRenderer(t,e){const i=t.field??void 0,n=new gr;n.attributeField=i;const r=new pr;return r.classificationDefinition=n,this.generateRenderer(r,t.signal).then((t=>{const e={},n=this.getField(i);return t.uniqueValues.forEach((t=>{let i=t.value;null!=i&&""!==i&&("string"!=typeof i||""!==i.trim()&&"<null>"!==i.toLowerCase())||(i=null),null==e[i]?e[i]={count:t.count,data:R(n)&&i?Number(i):i}:e[i].count=e[i].count+t.count})),{count:e}})).then((i=>Bi(i,[e],t.returnAllCodedValues)))}async _uvFromServiceQuery(t,e){return this._isStatsSupportedOnService().then((()=>this.layer.queryFeatures(Yr(this,t),{signal:t.signal}))).then((e=>_r(e,{layer:this,field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:Zn,view:t.view,signal:t.signal}))).then((i=>Bi(i,e,t.returnAllCodedValues,Zn)))}_calcBinsSQL(t,e,i){const n=[],r=e.length;return e.forEach(((e,s)=>{const[a,o]=e;let u=null;u=0!==s||i?s!==r-1||i?vi(`${t} >= ${a}`,`${t} ${s===r-1?" <= ":" < "} ${o}`):`${t} >= ${a}`:`${t} < ${o}`,n.push("WHEN ("+u+") THEN "+(s+1))})),["CASE",n.join(" "),"ELSE 0","END"].join(" ")}_getNormalizationTotal(t,e,i,n){return t&&"percent-of-total"===e?this.summaryStatistics({field:t,filter:i,signal:n}).then((t=>t.sum)):Promise.resolve(null)}_getQueryParamsForExpr(t,e){const i=t.valueExpression||t.sqlExpression,n=t.signal;if(!i){const{field:i,normalizationType:r,normalizationField:s}=t,a=i?this.getField(i):null,o=L(a),u={field:i,normalizationType:r,normalizationField:s,normalizationTotal:e,layer:this};return{sqlExpression:o?$r(this,i):Er(u),sqlWhere:o?null:t.sqlWhere||bi({field:i,normalizationType:r,normalizationField:s}),filter:t.filter,signal:n}}return{valueExpression:t.valueExpression,sqlExpression:t.sqlExpression,sqlWhere:t.sqlWhere,filter:t.filter,signal:n}}_getDataRange(t,e,i){return null!=e&&null!=i?Promise.resolve({min:e,max:i}):this.summaryStatistics(t).then((t=>({min:t.min,max:t.max})))}_histogramForExpr(t){return this._getNormalizationTotal(t.field,t.normalizationType,t.filter,t.signal).then((e=>{const i=this._getQueryParamsForExpr(t,e);return this._getDataRange(i,t.minValue,t.maxValue).then((n=>{const r=n.min,s=n.max;if(null==r||null==s)return{bins:[],minValue:r,maxValue:s,normalizationTotal:e};const a=t.numBins||Ar,o=Pi(r,s,a),u=this._calcBinsSQL(i.sqlExpression,o,null!=t.minValue&&null!=t.maxValue),l=new m({statisticType:"count",outStatisticFieldName:"countOFExpr",onStatisticField:"1"}),h=this.layer.createQuery();return h.where=vi(h.where,i.sqlWhere),h.sqlFormat="standard",h.outStatistics=[l],h.groupByFieldsForStatistics=[u],h.orderByFields=[u],Jr(h,t.filter),this._isStatsSupportedOnService().then((()=>this.layer.queryFeatures(h,{signal:i.signal}))).then((t=>Br(t,r,s,a,e)))}))}))}_binParamsFromGenRend(t,e){const{field:i,normalizationType:n,normalizationField:r,signal:s}=t,a=bi({field:i,normalizationType:n,normalizationField:r}),o=new pr({classificationDefinition:Vi({field:i,normalizationType:n,normalizationField:r,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numBins||Ar}),where:vi(a,e)});return this.generateRenderer(o,s).then((t=>{const{normalizationTotal:e,classBreaks:s}=t;return Lr({field:i,normalizationType:n,normalizationField:r,normalizationTotal:e,classBreaks:s,where:a,layer:this})}))}_classBreaksFromGenRend(t){const{field:e,normalizationType:i,normalizationField:n,normalizationTotal:r,signal:s}=t,a=bi({field:e,normalizationType:i,normalizationField:n}),o=Er({field:e,normalizationType:i,normalizationField:n,normalizationTotal:r,layer:this}),u=pi(o,t.minValue,t.maxValue),l=Vi({field:e,normalizationType:i,normalizationField:n,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||rs}),h=new pr;return h.classificationDefinition=l,h.where=vi(a,u),this.generateRenderer(h,s).then((e=>_i(e,t.classificationMethod)))}async summaryStatistics(t){const{field:e,normalizationType:i,sqlExpression:n,view:r,features:s,useFeaturesInView:a}=t,o=e?this.getField(e):null,l=L(o),h=t.valueExpression||n,c=h&&!n,d=this._hasLocalSource||s||a,f=r&&"3d"===r.type;if(d||c)return c||s||a||f?this._summaryStatsFromMemory(t,o):this._summaryStatsFromClientQuery(t,l);if(!this.supportsSQLExpression&&(l||h||"natural-log"===i||"square-root"===i))throw new u(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return(i&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(t):this._summaryStatsFromServiceQuery(t,l)).catch((()=>(T(t.signal),this._summaryStatsFromMemory(t,o))))}async uniqueValues(t){const{valueExpression:e,sqlExpression:i,features:n,useFeaturesInView:r,signal:s}=t,a=e&&(!i||!this.supportsSQLExpression),o=this._hasLocalSource||n||r||a,u=t.view,l=u&&"3d"===u.type,h=await Gr(t,this);return o?a||n||r||l?this._uvFromMemory(t,h):this._uvFromClientQuery(t,h):this._uvFromServiceQuery(t,h).catch((e=>(T(s),!t.field||t.field2||t.field3||t.filter?e:this._uvFromGenRenderer(t,h[0])))).catch((()=>(T(s),l?this._uvFromMemory(t,h):this._uvFromClientQuery(t,h))))}async histogram(t){const{field:e,normalizationType:i,normalizationField:n,classificationMethod:r,view:s,filter:a,signal:o}=t,l=e?this.getField(e):null,h=L(l),c=t.valueExpression||t.sqlExpression,d=c&&!t.sqlExpression,f=this._hasLocalSource||t.features||t.useFeaturesInView||d,m=this.supportsSQLExpression,v=!r||"equal-interval"===r,p=t.minValue,b=t.maxValue,g=null!=p&&null!=b,y=t.numBins||Ar;if(f)return this._histogramFromMemory(t);if((c||m)&&v){if(!m&&(c||"natural-log"===i||"square-root"===i))throw new u(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return this._histogramForExpr(t)}if(h&&v)throw new u(`${this.adapterName}:not-supported`,"Normalization and date field are not allowed when layer does not support standardized SQL expression for queries");return i||!v?this._binParamsFromGenRend(t).then((r=>{if(!g)return Xr(this,r,e,y,s,a,o);if(p>r.max||b<r.min)throw new u(`${this.adapterName}:insufficient-data`,"Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field");if(v)return Xr(this,{min:p,max:b,sqlExpr:r.sqlExpr,excludeZerosExpr:r.excludeZerosExpr},e,y,s,a,o);{const u={field:e,normalizationType:i,normalizationField:n,normalizationTotal:r.normTotal,layer:this},l=Er(u),h=pi(l,p,b);return this._binParamsFromGenRend(t,h).then((t=>Xr(this,t,e,y,s,a,o)))}})):this._histogramForField(t)}async classBreaks(t){const e=!1!==t.analyzeData,i=this._hasLocalSource||t.features||t.useFeaturesInView||t.valueExpression||t.filter;if(e&&i)return this._classBreaksFromMemory(t);return(e?this._classBreaksFromGenRend(t):this._classBreaksFromInterpolation(t)).catch((()=>(T(t.signal),this._classBreaksFromMemory(t))))}async queryFeatureCount(t){if(this._hasLocalSource)throw new u(`${this.adapterName}:not-supported`,"Layer does not support count query");const e=this.layer,i=e.createQuery();return i.where=vi(i.where,t.whereClause),Jr(i,t.filter),e.queryFeatureCount(i,{signal:t.signal})}async generateRenderer(t,e){const i=this.layer;if(this._hasLocalSource||i.version<10.1)throw new u(`${this.adapterName}:not-supported`,"Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)");const n=i.createQuery();return t.where=vi(t.where,n.where),dr(i.parsedUrl.path,{source:i.dynamicDataSource??void 0,gdbVersion:i.gdbVersion??void 0},t,{signal:e})}async heatmapStatistics(t){const{field:e,fieldOffset:i,view:n,signal:r}=t;return(e&&null==i?this.summaryStatistics({field:e,view:n,signal:r}):Promise.resolve(null)).then((e=>{let n=i||0;if(e){const{count:t,min:i,max:r}=e;t?i===r&&0===i?n=1:r<=0?n="abs":i<0&&(n=-1.01*i):n=1}return this._heatmapStatsFromMemory(t,n).then((t=>({...t,summaryStatistics:e,fieldOffset:n})))}))}async predominantCategories(t){if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new u(`${this.adapterName}:not-supported`,"Layer does not support advanced SQL expressions and standardized queries");const{fields:e,view:i,signal:n}=t,r=Or(e),s=wr(e),a=i&&this._hasLocalSource?await this._uvFromMemory({valueExpression:r,view:i,signal:n}):await this._uvFromServiceQuery({sqlExpression:s.expression,valueExpression:r,signal:n});return qr(a.uniqueValueInfos,e)}async getSampleFeatures(t,e){const{view:i,sampleSize:n,requiredFields:r,returnGeometry:s,filter:a,signal:o}=t,u=this.layer.createQuery(),l=1,h="json"===e;u.outSpatialReference=t.spatialReference||i&&i.spatialReference,u.returnGeometry=!!s,u.outFields=r,Jr(u,a);let c=[],d=!1;if(i)try{const t=await i.whenLayerView(this.layer);if(d=!Dr(this,r,t).length,d&&(c=await this._fetchFeaturesFromMemory(t,u,o,e),c.length&&null!=n&&n>0&&n<=c.length))return E(c,n,l)}catch(t){T(o)}try{if(this._hasLocalSource)return d?c:h?this._fetchFeaturesJSONFromService(u,o):this._fetchFeaturesFromService(u,o);const e=await this.queryFeatureCount({view:i,filter:a,signal:o}),r=this.layer.capabilities.query.maxRecordCount;let s=-1===n?e:n;if(s=r&&s>r?r:s,e<=c.length||c.length>=r)return c;D(i,"FeatureLayerAdapter: must have a view");const f=i.extent.width/i.width/i.scale*as;if(u.maxAllowableOffset=t.resolution||f,e<=s)return h?this._fetchFeaturesJSONFromService(u,o):this._fetchFeaturesFromService(u,o);if(e<=ss){const t=this.layer.createQuery();Jr(t,a);const e=await this.layer.queryObjectIds();return u.objectIds=E(e,s,l),h?this._fetchFeaturesJSONFromService(u,o):this._fetchFeaturesFromService(u,o)}return this.layer.get("capabilities.query.supportsPagination")&&(u.num=Math.min(s,ss)),h?this._fetchFeaturesJSONFromService(u,o):this._fetchFeaturesFromService(u,o)}catch(t){return T(o),c}}load(t){const e=this.layer.load(t).then((async e=>{this.geometryType=e.geometryType,this.objectIdField=e.objectIdField,this.supportsSQLExpression=e.get("capabilities.query.supportsSqlExpression"),this._hasLocalSource=!e.url&&!!e.source,this.hasQueryEngine=this._hasLocalSource,this.minScale=e.minScale,this.maxScale=e.maxScale,this.fullExtent=e.fullExtent,this.workerClient=cr.getInstance(),await this.workerClient.open(t.signal)}));return this.addResolvingPromise(e),Promise.resolve(this)}};b([g({constructOnly:!0})],os.prototype,"layer",void 0),os=b([y("esri.smartMapping.support.adapters.FeatureLayerAdapter")],os);const us=os;let ls=class extends us{constructor(){super(...arguments),this.adapterName="csv-layer-adapter"}async _createGenerateRendererResult(t,e,i,n,r){const s=t?.features,a=s?.length;if(!a)throw new u("csv-layer-adapter:insufficient-data","No features are available to calculate statistics");const o=jr(s);let l=null;if("percent-of-total"===n){if(l=(await this.workerClient.summaryStatistics({field:e},o)).sum,null==l)throw new u("csv-layer-adapter:invalid","invalid normalizationTotal")}if("class-breaks-definition"===r?.type){const t=(await Ci({field:e,normalizationType:n,normalizationField:i,normalizationTotal:l},o)).filter((t=>Number.isFinite(t)));return Ai({definition:r,values:t,normalizationTotal:l})}const h=(await Ci({field:e},o)).filter((t=>null!=t&&"string"==typeof t&&""!==t.trim()));return ji(h)}generateRenderer(t,e){const i=t.classificationDefinition;let n=null,r=null,s=null;"class-breaks-definition"===i?.type?(n=i.classificationField,r=i.normalizationField,s=i.normalizationType):n=i?.attributeField;const a=this.layer;return nr({field:n,normalizationField:r}).then((o=>{const u=a.createQuery();return u.returnGeometry=!1,u.outFields=o,u.where=vi(u.where,t.where),a.queryFeatures(u,{signal:e}).then((t=>this._createGenerateRendererResult(t,n,r,s,i)))}))}load(t){const e=this.layer.load(t).then((async e=>{this.geometryType=e.geometryType,this.objectIdField=e.objectIdField,this.supportsSQLExpression=!0,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=cr.getInstance(),await this.workerClient.open(t.signal)}));return this.addResolvingPromise(e),Promise.resolve(this)}};ls=b([y("esri.smartMapping.support.adapters.CSVLayerAdapter")],ls);const hs=ls;let cs=class extends us{constructor(){super(...arguments),this.adapterName="feature-layer-binning-adapter"}async _getNormalizationTotalFromMemory(t,e,i){const{featuresJSON:n,graphics:r,layerView:s,query:a}=e,o=(!n&&!r&&s&&"queryAggregateSummaryStatistics"in s?await s.queryAggregateSummaryStatistics(a,{field:t},{signal:i}):n?await this.workerClient.summaryStatistics({field:t},n):await gi({attribute:{field:t},features:r})).sum;if(null==o)throw new u(`${this.adapterName}:invalid`,"invalid normalizationTotal");return o}async _processStatsFromMemoryParams(t){const{features:e,filter:i}=t;if(e?.length)return this._getFilteredFeatures(e,i);const{view:n,field:r,field2:s,field3:a,normalizationField:o,valueExpression:l,returnGeometry:h,layerViewFunc:c,signal:d}=t;let f=null,m=null,v=null,p=null,b=null;if(n)try{if(f=await n.whenLayerView(this.layer),m=null!=c&&c in f&&"function"==typeof f[c],m){await this._waitForLayerViewUpdate(f);const t=await nr({field:r,field2:s,field3:a,normalizationField:o,valueExpression:l});Fr(this,t).length?m=!1:(v="createAggregateQuery"in f?f.createAggregateQuery():null,v?(v.outFields=t,v.returnGeometry=!1,Jr(v,i)):m=!1),f.suspended&&(m=!1)}}catch{m=!1}if(!m&&(b=Hr(this.layer).map((t=>t.toJSON())),p=await this._fetchFeaturesForStats({field:r,field2:s,field3:a,valueExpression:l,normalizationField:o,returnGeometry:h,filter:i,view:n,signal:d},"json"),!p?.length))throw new u(`${this.adapterName}:insufficient-data`,"No features are available to calculate statistics");return{layerView:f,query:v,featuresJSON:p,fieldInfos:b}}async _summaryStatsFromMemory(t,e){const{view:i,field:n,valueExpression:r,normalizationType:s,signal:a}=t,o={field:n,valueExpression:r,normalizationType:s,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue},{featuresJSON:u,graphics:l,layerView:h,query:c,fieldInfos:d}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryAggregateSummaryStatistics"});return r&&i&&(u||l)&&(o.fieldType=e?.type?F.toJSON(e.type):null,o.viewInfoParams=Wr(i),o.fieldInfos=d),"percent-of-total"===s&&null==t.normalizationTotal&&(o.normalizationTotal=await this._getNormalizationTotalFromMemory(n,{featuresJSON:u,graphics:l,layerView:h,query:c},a)),!u&&!l&&h&&"queryAggregateSummaryStatistics"in h?h.queryAggregateSummaryStatistics(c,o,{signal:a}):u?this.workerClient.summaryStatistics(o,u):gi({attribute:o,features:l})}async _uvFromMemory(t,e){const{view:i,field:n,valueExpression:r,returnAllCodedValues:s,signal:a}=t,{featuresJSON:o,graphics:u,layerView:l,query:h,fieldInfos:c}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryAggregateUniqueValues"}),d={field:n,field2:t.field2,field3:t.field3,fieldDelimiter:Zn,valueExpression:r,domains:e,returnAllCodedValues:s};return r&&i&&(o||u)&&(d.viewInfoParams=Wr(i),d.fieldInfos=c),!o&&!u&&l&&"queryAggregateUniqueValues"in l?l.queryAggregateUniqueValues(h,d,{signal:a}):o?this.workerClient.uniqueValues(d,o):yi({attribute:d,features:u})}async _histogramFromMemory(t){const{view:e,field:i,valueExpression:n,signal:r}=t,{featuresJSON:s,graphics:a,layerView:o,query:u,fieldInfos:l}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryAggregateHistogram"}),h={field:i,valueExpression:n,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numBins:t.numBins};return n&&e&&(s||a)&&(h.viewInfoParams=Wr(e),h.fieldInfos=l),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:s,graphics:a,layerView:o,query:u},r)),!s&&!a&&o&&"queryAggregateHistogram"in o?o.queryAggregateHistogram(u,h,{signal:r}):s?this.workerClient.histogram(h,s):wi({attribute:h,features:a})}async _classBreaksFromMemory(t){const{view:e,field:i,valueExpression:n,signal:r}=t,{featuresJSON:s,graphics:a,layerView:o,query:u,fieldInfos:l}=await this._processStatsFromMemoryParams({...t,layerViewFunc:"queryAggregateClassBreaks"}),h={field:i,valueExpression:n,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numClasses:t.numClasses};return n&&e&&(s||a)&&(h.viewInfoParams=Wr(e),h.fieldInfos=l),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:s,graphics:a,layerView:o,query:u},r)),!s&&!a&&o&&"queryAggregateClassBreaks"in o?o.queryAggregateClassBreaks(u,h,{signal:r}):s?this.workerClient.classBreaks(h,s):Si({attribute:h,features:a})}getField(t=""){const e=Hr(this.layer);return e?.find((e=>e.name.toLowerCase()===t?.toLowerCase()))}getFieldUsageInfo(t){return this.getField(t)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!1,supportsStatistics:!0}:null}getFieldDomain(t,e){return null}async summaryStatistics(t){const{field:e}=t,i=e?this.getField(e):null,n=L(i),r=t.sqlExpression&&!t.valueExpression&&!e;if(n||r)throw new u(`${this.adapterName}:not-supported`,"Date field and sqlExpression are not supported");return this._summaryStatsFromMemory(t,i)}async uniqueValues(t){const e=await Gr(t,this);return this._uvFromMemory(t,e)}async histogram(t){const{field:e}=t,i=e?this.getField(e):null,n=L(i),r=t.sqlExpression&&!t.valueExpression&&!e;if(n||r)throw new u(`${this.adapterName}:not-supported`,"Date field and sqlExpression are not supported");return this._histogramFromMemory(t)}async classBreaks(t){return(!1!==t.analyzeData?this._classBreaksFromMemory(t):this._classBreaksFromInterpolation(t)).catch((()=>(T(t.signal),this._classBreaksFromMemory(t))))}async queryFeatureCount(t){const e=await(t.view?.whenLayerView(this.layer));if(!e||!("queryAggregateCount"in e)||!e.queryAggregateCount)throw new u(`${this.adapterName}:not-supported`,"LayerView is not supported.");await this._waitForLayerViewUpdate(e);const i=e.createAggregateQuery();return i.where=vi(i.where,t.whereClause),Jr(i,t.filter),e.queryAggregateCount(i,{signal:t.signal})}generateRenderer(t,e){throw new u(`${this.adapterName}:not-supported`,"'generateRenderer' is not supported.")}heatmapStatistics(t){throw new u(`${this.adapterName}:not-supported`,"'heatmapStatistics' is not supported.")}async predominantCategories(t){const{fields:e,view:i,signal:n}=t,r=Or(e),s=await this._uvFromMemory({valueExpression:r,view:i,signal:n});return qr(s.uniqueValueInfos,e)}async getSampleFeatures(t,e){const{view:i,sampleSize:n,requiredFields:r,returnGeometry:s,filter:a,signal:o}=t;if(!i)throw new u(`${this.adapterName}:not-supported`,"'view' is required to get sample features for binning.");if("3d"===i.type)throw new u(`${this.adapterName}:not-supported`,"3d 'view' is not supported to get sample features for binning.");const l=await i.whenLayerView(this.layer);if(!("queryAggregateJSON"in l&&l.queryAggregateJSON&&"queryAggregates"in l&&l.queryAggregates))throw new u(`${this.adapterName}:not-supported`,"LayerView is not supported.");await this._waitForLayerViewUpdate(l);if(Fr(this,r).length)throw new u(`${this.adapterName}:insufficient-data`,"Layer does not have required fields");const h=1,c="json"===e,d=l.createAggregateQuery();d.outSpatialReference=t.spatialReference||i&&i.spatialReference,d.returnGeometry=!!s,d.outFields=r,Jr(d,a);const{features:f}=c?await l.queryAggregateJSON(d,{signal:o}):await l.queryAggregates(d,{signal:o});return f.length&&null!=n&&n>0&&n<=f.length?E(f,n,h):f}load(t){const e=this.layer.load(t).then((async e=>{if(this.geometryType="polygon",this.objectIdField=null,this.supportsSQLExpression=!1,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.minScale=e.minScale,this.maxScale=e.maxScale,this.fullExtent=e.fullExtent,"geometryType"in e&&"point"!==e.geometryType)throw new u(`${this.adapterName}:invalid-parameters`,"Only 'point' geometry type is supported");const i="featureReduction"in e?e.featureReduction:null;if("binning"!==i?.type&&"cluster"!==i?.type)throw new u(`${this.adapterName}:invalid-parameters`,`Feature reduction type ${i?.type} is not supported`);this.workerClient=cr.getInstance(),await this.workerClient.open(t.signal)}));return this.addResolvingPromise(e),Promise.resolve(this)}};cs=b([y("esri.smartMapping.support.adapters.FeatureLayerBinningAdapter")],cs);const ds=cs;let fs=class extends Tr{constructor(t){super(t),this._featureLayerAdapter=null,this.workerClient=null}destroy(){this.workerClient?.destroy()}_hasCachedStatistics(t){return this.layer.hasCachedStatistics(t)}_updateQuery(t,e=[],i=[]){if(!t||!i.length)return t;const n=this.layer.objectIdField,r=t.clone(),s=e.filter((t=>{const e=this.layer.getField(t);return!i.includes(e.name)})),a=s.some((t=>this.layer.getField(t).name===n));return r.outFields=a?s:[...s,n],r}async _fetchFeaturesFromMemory(t,e,i){if(!t)throw new u("scene-layer-adapter:insufficient-data","view is required to fetch the features from layerView");const n=await t.whenLayerView(this.layer),r=new AbortController,s=r.signal,a=A((()=>!n.updating),s);await j(a,5e3,r);const o=Dr(this,i,n);T(s);const l=this._updateQuery(e,i??[],o),h=await n.queryFeatures(l,{signal:s});T(s);const c=h.features;return o.length?n.whenGraphicAttributes(c,o):c}async _fetchFeaturesJSONFromMemory(t,e,i){return this._fetchFeaturesFromMemory(t,e,i).then(jr)}_fetchFeaturesForStats(t,e){return nr({field:t.field,normalizationField:t.normalizationField,valueExpression:t.valueExpression}).then((i=>this.getSampleFeatures({sampleSize:-1,view:t.view,returnGeometry:t.returnGeometry,requiredFields:i,signal:t.signal},e)))}async _processStatsFromMemoryParams(t){const e=t.features;if(e?.length){return e.length&&"declaredClass"in e[0]&&"esri.Graphic"===e[0].declaredClass?{graphics:e}:{featuresJSON:e}}const{view:i,field:n,normalizationField:r,valueExpression:s,signal:a}=t,o=await this._fetchFeaturesForStats({field:n,valueExpression:s,normalizationField:r,view:i,signal:a});if(!o?.length)throw new u("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");return{graphics:o}}_generateFeatureSetForCachedHistogram(t,e=t.minimum,i=t.maximum,n){const r=[];for(let t=0;t<n;t++)r[t]=0;const s=t.counts.length,a=t.minimum,o=t.maximum;for(let u=0;u<s;u++){const l=(u+.5)/s,h=((1-l)*a+l*o-e)/(i-e)*n;h>=0&&h<=n&&(r[h===n?n-1:Math.floor(h)]+=t.counts[u])}const u=[];r.forEach(((t,e)=>{const i=new B({attributes:{}});i.attributes.EXPR_1=e+1,i.attributes.countOFExpr=t,u.push(i)}));const l=new _;return l.features=u,l}_getCachedStatistics(t,e){const i=this.layer;return t.valueExpression||t.sqlExpression||t.sqlWhere||t.minValue||t.maxValue?Promise.reject(new u("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified")):i.queryCachedStatistics(e?.name,{signal:t.signal}).then((t=>{const e=t.stats,{min:i,max:n,totalValuesCount:r}=e;let{avg:s,stddev:a,sum:o,variance:u,count:l}=e;return 0===i&&0===n||(s=0===s?null:s,o=0===o?null:o,a=0===a?null:a,u=0===u?null:u,l=0===l?null:l),null==l&&(null!=o&&null!=s?l=Math.round(o/s):null!=r&&(l=r)),{avg:s,count:l,max:n,min:i,stddev:a,sum:o,variance:u}}))}async _getNormalizationTotal(t,e,i){const n=(e?await this.workerClient.summaryStatistics({field:t},e):await gi({attribute:{field:t},features:i})).sum;if(null==n)throw new u("scene-layer-adapter:invalid","invalid normalizationTotal");return n}async _getSummaryStatisticsFromMemory(t,e){const{view:i,field:n,normalizationField:r,valueExpression:s}=t,{featuresJSON:a,graphics:o}=await this._processStatsFromMemoryParams(t),u={field:n,valueExpression:s,normalizationType:t.normalizationType,normalizationField:r,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue};return t.valueExpression&&i&&a&&(u.fieldType=e?.type?F.toJSON(e.type):null,u.viewInfoParams=Wr(i)),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(u.normalizationTotal=await this._getNormalizationTotal(n,a,o)),a?this.workerClient.summaryStatistics(u,a):gi({attribute:u,features:o})}_getCachedStatisticsForUniqueValues(t,e){const i=this.layer,n=e?.name,r=e&&t.field?this.getFieldDomain(t.field):null;return t.valueExpression||t.sqlExpression||t.sqlWhere?Promise.reject(new u("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified")):i.queryCachedStatistics(n,{signal:t.signal}).then((r=>{const s=r.stats;if(!s.mostFrequentValues)throw new Error;const a=r.labels&&r.labels.labels,o={},u=[],l="countOF"+n;s.mostFrequentValues.forEach((t=>{const r=new B({attributes:{}});r.attributes[n]=e&&e.name!==i.objectIdField&&(R(e)||L(e))?Number(t.value):t.value,r.attributes[l]=t.count,u.push(r)})),a&&a.forEach((t=>{o[t.value]=t.label}));const h=new _;return h.features=u,_r(h,{layer:this,field:t.field,labels:o,view:t.view,signal:t.signal})})).then((e=>Bi(e,[r],t.returnAllCodedValues)))}async _getUniqueValuesFromMemory(t,e){const{view:i,field:n,field2:r,field3:s,valueExpression:a,returnAllCodedValues:o}=t,u={field:n,field2:r,field3:s,fieldDelimiter:Zn,valueExpression:a,domains:e,returnAllCodedValues:o},{featuresJSON:l,graphics:h}=await this._processStatsFromMemoryParams(t);return t.valueExpression&&i&&l&&(u.viewInfoParams=Wr(i)),l?this.workerClient.uniqueValues(u,l):yi({attribute:u,features:h})}_getCachedStatisticsForHistogram(t,e){const i=this.layer;return t.valueExpression||t.sqlExpression||t.sqlWhere||t.normalizationType?Promise.reject(new u("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified")):i.queryCachedStatistics(e&&e.name,{signal:t.signal}).then((e=>{const i=e.stats,{minValue:n,maxValue:r}=t,s=null!=n?n:i.min,a=null!=r?r:i.max,o=t.numBins||10,u=this._generateFeatureSetForCachedHistogram(i.histogram,s,a,o);return Br(u,s,a,o)}))}async _getClassBreaksFromMemory(t){const{view:e,field:i,normalizationField:n,valueExpression:r}=t,{featuresJSON:s,graphics:a}=await this._processStatsFromMemoryParams(t),o={field:i,valueExpression:r,normalizationType:t.normalizationType,normalizationField:n,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numClasses:t.numClasses};return t.valueExpression&&e&&s&&(o.viewInfoParams=Wr(e)),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(o.normalizationTotal=await this._getNormalizationTotal(i,s,a)),s?this.workerClient.classBreaks(o,s):Si({attribute:o,features:a})}async _getHistogramFromMemory(t){const{view:e,field:i}=t,{featuresJSON:n,graphics:r}=await this._processStatsFromMemoryParams(t),s={field:i,valueExpression:t.valueExpression,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,minValue:t.minValue,maxValue:t.maxValue,standardDeviationInterval:t.standardDeviationInterval,classificationMethod:t.classificationMethod,numBins:t.numBins};return t.valueExpression&&e&&n&&(s.viewInfoParams=Wr(e)),"percent-of-total"===t.normalizationType&&null==t.normalizationTotal&&(s.normalizationTotal=await this._getNormalizationTotal(i,n,r)),n?this.workerClient.histogram(s,n):wi({attribute:s,features:r})}getField(t){return this.layer.getField(t??"")}getFieldUsageInfo(t){const e=this.getField(t);if(!e)return null;const i=this.layer.getFieldUsageInfo(e.name);return{supportsLabelingInfo:i.supportsLabelingInfo,supportsPopupTemplate:i.supportsPopupTemplate,supportsRenderer:i.supportsRenderer,supportsLayerQuery:i.supportsLayerQuery,supportsStatistics:!0}}getFieldDomain(t,e){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(t,e):null}createQuery(){return this.layer.createQuery()}summaryStatistics(t){const e=this.getField(t.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.summaryStatistics(t);if(t.filter)throw new u("scene-layer-adapter:not-supported","filter is not supported");return this._hasCachedStatistics(e&&e.name)?this._getCachedStatistics(t,e).catch((()=>(T(t.signal),this._getSummaryStatisticsFromMemory(t,e)))):this._getSummaryStatisticsFromMemory(t,e)}async uniqueValues(t){if(this._featureLayerAdapter)return this._featureLayerAdapter.uniqueValues(t);if(t.filter)throw new u("scene-layer-adapter:not-supported","filter is not supported");const e=await Gr(t,this),{field:i,field2:n}=t,r=i&&n,s=this.getField(i);return!r&&s&&this._hasCachedStatistics(s.name)?this._getCachedStatisticsForUniqueValues(t,s).catch((()=>(T(t.signal),this._getUniqueValuesFromMemory(t,e)))):this._getUniqueValuesFromMemory(t,e)}histogram(t){const e=this.getField(t.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.histogram(t);if(t.filter)throw new u("scene-layer-adapter:not-supported","filter is not supported");return e&&this._hasCachedStatistics(e.name)?this._getCachedStatisticsForHistogram(t,e).catch((()=>(T(t.signal),this._getHistogramFromMemory(t)))):this._getHistogramFromMemory(t)}classBreaks(t){const e=this.getField(t.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.classBreaks(t);if(t.filter)throw new u("scene-layer-adapter:not-supported","filter is not supported");return this._hasCachedStatistics(e&&e.name)?Promise.reject(new u("scene-layer-adapter:not-supported","Cached stats not supported")):this._getClassBreaksFromMemory(t)}queryFeatureCount(t){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(t):Promise.reject(new u("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support count query"))}generateRenderer(t,e){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(t,e):Promise.reject(new u("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support generateRenderer operation"))}heatmapStatistics(t){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(t):Promise.reject(new u("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support heatmapStatistics operation"))}async predominantCategories(t){if(this._featureLayerAdapter)return this._featureLayerAdapter.predominantCategories(t);throw new u("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support predominantCategories")}async getSampleFeatures(t,e){if(t.filter)throw new u("scene-layer-adapter:not-supported","filter is not supported");const{view:i,sampleSize:n,requiredFields:r,returnGeometry:s,signal:a}=t,o=1,l="json"===e,h=this.createQuery();h.outFields=r,h.returnGeometry=!!s,h.where=null,h.num=n;let c=[];try{if(c=l?await this._fetchFeaturesJSONFromMemory(i,h,r):await this._fetchFeaturesFromMemory(i,h,r),c.length&&null!=n&&n>0&&n<=c.length)return E(c,n,o)}catch(t){T(a)}let d=null;if(this._featureLayerAdapter){const i={...t};delete i.view,d=await this._featureLayerAdapter.getSampleFeatures(i,e)}return d&&d.length?d:E(c,c.length,o)}load(t){const e=this.layer.load(t).then((async e=>{this.workerClient=cr.getInstance(),await this.workerClient.open(t.signal);const i=e.associatedLayer;if(this.geometryType=e.geometryType,null!=i){this._featureLayerAdapter=new us({layer:i});return this._featureLayerAdapter.load(t).then((()=>{this.objectIdField=this._featureLayerAdapter.objectIdField,this.supportsSQLExpression=this._featureLayerAdapter.supportsSQLExpression,this.minScale=this._featureLayerAdapter.minScale,this.maxScale=this._featureLayerAdapter.maxScale,this.fullExtent=this._featureLayerAdapter.fullExtent}))}this.objectIdField=e.objectIdField,this.supportsSQLExpression=!1,this.hasQueryEngine=!1,this.fullExtent=e.fullExtent}));return this.addResolvingPromise(e),Promise.resolve(this)}};b([g({constructOnly:!0})],fs.prototype,"layer",void 0),fs=b([y("esri.smartMapping.support.adapters.SceneLayerAdapter")],fs);const ms=fs;let vs=class extends ms{constructor(t){super(t)}getField(t){return this.layer.fieldsIndex.get(t??"")}getFieldUsageInfo(t){const e=this.getField(t);if(!e)return null;const i=this._hasCachedStatistics(e.name);return{supportsLabelingInfo:i,supportsPopupTemplate:i,supportsRenderer:i,supportsLayerQuery:!1,supportsStatistics:i}}getFieldDomain(){return null}load(t){const e=this.layer.load(t).then((()=>{this.geometryType="point",this.objectIdField=null,this.supportsSQLExpression=!1,this.hasQueryEngine=!1}));return this.addResolvingPromise(e),Promise.resolve(this)}};vs=b([y("esri.smartMapping.support.adapters.PointCloudLayerAdapter")],vs);const ps=vs;let bs=class extends ns{async _summaryStatsFromClientQuery(t,e){const{signal:i,view:n}=t,r=Kr(this,t,e);r.outStatistics=r.outStatistics?.filter((t=>"totalcount_value"!==t.outStatisticFieldName));const s=await this._fetchFeatureSetFromMemory(r,n,i),a=Pr(s,e);return Ri(a)}};bs=b([y("esri.smartMapping.support.adapters.StreamLayerAdapter")],bs);const gs=bs;var ys;!function(t){t[t.CSVLayer=0]="CSVLayer",t[t.GeoJSONLayer=1]="GeoJSONLayer",t[t.FeatureLayer=2]="FeatureLayer",t[t.OGCFeatureLayer=3]="OGCFeatureLayer",t[t.SceneLayer=4]="SceneLayer",t[t.StreamLayer=5]="StreamLayer",t[t.PointCloudLayer=6]="PointCloudLayer",t[t.WFSLayer=7]="WFSLayer"}(ys||(ys={}));const ws={[ys.CSVLayer]:{adapter:hs,type:"csv",label:"CSVLayer"},[ys.FeatureLayer]:{adapter:us,type:"feature",label:"FeatureLayer"},[ys.OGCFeatureLayer]:{adapter:ns,type:"ogc-feature",label:"OGCFeatureLayer"},[ys.GeoJSONLayer]:{adapter:us,type:"geojson",label:"GeoJSONLayer"},[ys.SceneLayer]:{adapter:ms,type:"scene",label:"SceneLayer"},[ys.StreamLayer]:{adapter:gs,type:"stream",label:"StreamLayer"},[ys.PointCloudLayer]:{adapter:ps,type:"point-cloud",label:"PointCloudLayer"},[ys.WFSLayer]:{adapter:us,type:"wfs",label:"WFSLayer"}},Ss=[ys.CSVLayer,ys.FeatureLayer,ys.OGCFeatureLayer,ys.GeoJSONLayer,ys.SceneLayer,ys.StreamLayer,ys.PointCloudLayer,ys.WFSLayer],xs=[ys.CSVLayer,ys.FeatureLayer,ys.OGCFeatureLayer,ys.StreamLayer,ys.GeoJSONLayer,ys.WFSLayer];function Cs(t){return t.map((t=>ws[t].label))}function Os(t,e=Ss,i){if(t instanceof Tr)return t;const n=Ms(t,e);return n?i?new ds({layer:t}):new n({layer:t}):null}function Ms(t,e=Ss){let i=null;return e.some((e=>{const n=t.type===ws[e].type;return n&&(i=ws[e].adapter),n})),i}const Ts=["date",...z];async function ks(t){if(!(t&&t.layer&&(t.field||t.valueExpression||t.sqlExpression)))throw new u("histogram:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(t.valueExpression&&!t.sqlExpression&&!t.view)throw new u("histogram:missing-parameters","View is required when 'valueExpression' is specified");t.forBinning&&Hn(t,"histogram");const{layer:e,...i}=t,n=t.forBinning?xs:Ss,r=Os(e,n,t.forBinning);if(!r)throw new u("histogram:invalid-parameters","'layer' must be one of these types: "+Cs(n).join(", "));const s={layerAdapter:r,...i};s.normalizationType=rr(s);const a=null!=s.signal?{signal:s.signal}:null;await r.load(a);const o=s.valueExpression||s.sqlExpression,l=s.field,h=l?r.getField(l):null,c=!s.classificationMethod||"equal-interval"===s.classificationMethod,d=await nr({field:l,normalizationField:s.normalizationField,valueExpression:s.valueExpression}),f=Oi(r,d,"histogram:invalid-parameters");if(f)throw f;if(h){const t=Mi(r,h,"histogram:invalid-parameters",Ts);if(t)throw t;if(L(h)){if(s.normalizationType)throw new u("histogram:invalid-parameters","Normalization is not allowed for date fields");if(!c)throw new u("histogram:invalid-parameters","'classificationMethod' other than 'equal-interval' is not allowed for date fields")}}else if(o){if(s.normalizationType)throw new u("histogram:invalid-parameters","Normalization is not allowed when 'valueExpression' or 'sqlExpression' is specified");if(!c)throw new u("histogram:invalid-parameters","'classificationMethod' other than 'equal-interval' is not allowed when 'valueExpression' or 'sqlExpression' is specified")}const m=Ti(s.filter,"histogram:invalid-parameters");if(m)throw m;return s}async function Is(t){const{layerAdapter:e,...i}=await ks(t);return e.histogram(i)}var As;let js=As=class extends w{constructor(t){super(t),this.type="none"}clone(){return new As({type:this.type})}};b([S({none:"none",stayAbove:"stay-above"})],js.prototype,"type",void 0),js=As=b([y("esri.ground.NavigationConstraint")],js);var Fs;let Ds=Fs=class extends(V(x)){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new G;const e=t=>{t.parent&&t.parent!==this&&"remove"in t.parent&&t.parent.remove(t),t.parent=this,"elevation"!==t.type&&"base-elevation"!==t.type&&l.getLogger(this).error(`Layer '${t.title}, id:${t.id}' of type '${t.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=t=>{t.parent=null};this.addHandles([this.layers.on("after-add",(t=>e(t.item))),this.layers.on("after-remove",(t=>i(t.item)))])}initialize(){this.when().catch((t=>{$(t)||l.getLogger(this).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",W(t,this._get("layers")))}writeLayers(t,e,i,n){const r=[];t?(n={...n,layerContainerType:"ground"},t.forEach((t=>{if("write"in t){const e={};En(t)().write(e,n)&&r.push(e)}else n&&n.messages&&n.messages.push(new u("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted in the ground`,{layer:t}))})),e.layers=r):e.layers=r}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Gi(this,(t=>{t(this.layers)}))}async queryElevation(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await import("./p-6697c834.js");T(e);const n=new i,r=this.layers.filter(Ls).toArray();return n.queryAll(r,t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await import("./p-6697c834.js");T(e);const n=new i,r=this.layers.filter(Ls).toArray();return n.createSamplerAll(r,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:q(this.surfaceColor),navigationConstraint:q(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Fs({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const n=e&&e.origin||"web-scene",r=e&&e.portal||null,s=e&&e.url||null;return import("./p-eedc1da8.js").then((({populateOperationalLayers:e})=>{T(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const i={context:{origin:n,url:s,portal:r,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(e(this.layers,t.layers,i))}return C(a)})).then((()=>{}))}};function Ps(t){return t&&"createElevationSampler"in t}function Ls(t){return"elevation"===t.type||Ps(t)}b([g({json:{read:!1}})],Ds.prototype,"layers",null),b([H("layers")],Ds.prototype,"writeLayers",null),b([g({readOnly:!0})],Ds.prototype,"resourceInfo",void 0),b([g({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:U,read:{reader:K,source:"transparency"},write:{writer:(t,e)=>{e.transparency=J(t)},target:"transparency"}}})],Ds.prototype,"opacity",void 0),b([g({type:Y,json:{type:[U],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ds.prototype,"surfaceColor",void 0),b([g({type:js,json:{write:!0}})],Ds.prototype,"navigationConstraint",void 0),Ds=Fs=b([y("esri.Ground")],Ds);const Es=Ds;function Ns(t){return!(!(t&&"object"==typeof t&&"loaded"in t&&t.loaded&&Z(t)?.operations?.supportsEditing&&"type"in t)||"editingEnabled"in t&&!X(t)||"scene"===t.type&&!Rs(t))}function Rs(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:n}=e,r=Wi("model/gltf-binary",i)??qi("glb",i);return null!=r&&n.includes(r)}const Bs={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function _s(t){let e=null;if("string"==typeof t)if(t in Bs){const i=Bs[t];e=new Es({resourceInfo:{data:{layers:[i]}}})}else l.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=c(Es,t);return e}let zs=class extends(Hi(Ui(Q.EventedMixin(tt)))){constructor(t){super(t),this.allLayers=new $i({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Ki(this),this.basemap=null,this.editableLayers=new $i({getCollections:()=>[this.allLayers],itemFilterFunction:Ns}),this.ground=new Es,this._basemapCache=Kn()}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),Jn(this._basemapCache),this._basemapCache=null}castBasemap(t){return Yn(t,this._basemapCache)}castGround(t){const e=_s(t);return e??this._get("ground")}findLayerById(t){return this.allLayers.find((e=>e.id===t))}findTableById(t){return this.allTables.find((e=>e.id===t))}};b([g({readOnly:!0,dependsOn:[]})],zs.prototype,"allLayers",void 0),b([g({readOnly:!0})],zs.prototype,"allTables",void 0),b([g({type:Ii})],zs.prototype,"basemap",void 0),b([et("basemap")],zs.prototype,"castBasemap",null),b([g({readOnly:!0})],zs.prototype,"editableLayers",void 0),b([g({type:Es,nonNullable:!0})],zs.prototype,"ground",void 0),b([et("ground")],zs.prototype,"castGround",null),zs=b([y("esri.Map")],zs);const Vs=zs;let Gs=class extends(it(w)){constructor(...t){super(...t),this.position=new nt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,e,i,n){if(t&&"object"==typeof t&&("x"in t||Array.isArray(t))){const r={position:t};return null!=e&&(r.heading=e),null!=i&&(r.tilt=i),null!=n&&(r.fov=n),r}return t}writePosition(t,e,i,n){const r=t.clone();r.x=rt(t.x||0),r.y=rt(t.y||0),r.z=t.hasZ?rt(t.z||0):t.z,e[i]=r.write({},n)}readPosition(t,e){const i=new nt;return i.read(t,e),i.x=rt(i.x||0),i.y=rt(i.y||0),i.z=i.hasZ?rt(i.z||0):i.z,i}equals(t){return null!=t&&(this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position))}};b([g({type:nt,json:{write:{isRequired:!0}}})],Gs.prototype,"position",void 0),b([H("position")],Gs.prototype,"writePosition",null),b([st("position")],Gs.prototype,"readPosition",null),b([g({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),et((t=>Yi.normalize(rt(t))))],Gs.prototype,"heading",void 0),b([g({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),et((t=>at(rt(t),-180,180)))],Gs.prototype,"tilt",void 0),b([g({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Gs.prototype,"fov",void 0),Gs=b([y("esri.Camera")],Gs);const $s=Gs;var Ws;let qs=Ws=class extends w{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new Ws({rotation:this.rotation,scale:this.scale,targetGeometry:null!=this.targetGeometry?this.targetGeometry.clone():null,camera:null!=this.camera?this.camera.clone():null})}};function Hs(){return{enabled:!this.camera}}b([g({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Hs}}}}})],qs.prototype,"rotation",void 0),b([et("rotation")],qs.prototype,"castRotation",null),b([g({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Hs}}}}})],qs.prototype,"scale",void 0),b([g({types:ot,json:{read:ut,write:!0,origins:{"web-scene":{read:ut,write:{overridePolicy:Hs}}}}})],qs.prototype,"targetGeometry",void 0),b([g({type:$s,json:{write:!0}})],qs.prototype,"camera",void 0),qs=Ws=b([y("esri.Viewpoint")],qs);const Us=qs;const Ks={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],r=this.values;return n>=i?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Js={xsmall:544,small:768,medium:992,large:1200};function Ys(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Zs(t,e){return e?Ks[t].valueToClassName[e].split(" "):[]}const Xs=t=>{let e=class extends t{constructor(...t){super(...t),this._breakpointsHandles=new lt,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Js}initialize(){this._breakpointsHandles.add(ht((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),ct))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=dt(this._breakpointsHandles))}set breakpoints(t){if(t===this._get("breakpoints"))return;const e=Ys(t);if(!e){const t=JSON.stringify(Js,null,2);console.warn("provided breakpoints are not valid, using defaults:"+t)}t=e?t:Js,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=ft.acquire(),e=ft.acquire();let i,n=!1;for(i in Ks){const r=this[i],s=Ks[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==s&&(n=!0,this[i]=s,Zs(i,r).forEach((t=>e.push(t))),Zs(i,s).forEach((e=>t.push(e))))}n&&(this._applyClassNameChanges(t,e),ft.release(t),ft.release(e))}_applyClassNameChanges(t,e){const i=this.container;i&&(e.forEach((t=>i.classList.remove(t))),t.forEach((t=>i.classList.add(t))))}_removeActiveClassNames(){const t=this.container;if(!t)return;let e;for(e in Ks)Zs(e,this[e]).forEach((e=>t.classList.remove(e)))}};return b([g()],e.prototype,"breakpoints",null),b([g()],e.prototype,"orientation",void 0),b([g()],e.prototype,"widthBreakpoint",void 0),b([g()],e.prototype,"heightBreakpoint",void 0),e=b([y("esri.views.BreakpointsOwner")],e),e};let Qs=class extends tt{constructor(){super(...arguments),this.items=new G,this._watchUpdatingTracking=new mt,this._callbacks=new Map,this._projector=Ze(),this._hiddenProjector=Ze()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(t=>{for(const e of t.added){const t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t)}for(const e of t.removed){const t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e)}}))}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const e=this._hiddenSurface,i=this._hiddenProjector;let n;const r=()=>(n=t.render(),n);i.append(e,r),i.renderNow();const s={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const t=n.domNode.getBoundingClientRect();s.left=t.left,s.top=t.top,s.right=t.right,s.bottom=t.bottom}for(i.detach(r);e.firstChild;)e.removeChild(e.firstChild);return s}overlaps(t,e){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(e);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(t){if(!this.items.some((t=>t.visible)))return;const e=t.getContext("2d");e.save(),e.font=this._fontString(),this.items.forEach((t=>{e.save(),t.renderCanvas(e),e.restore()})),e.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b([g({readOnly:!0})],Qs.prototype,"surface",void 0),b([g({readOnly:!0})],Qs.prototype,"items",void 0),b([g({readOnly:!0})],Qs.prototype,"needsRender",null),b([g({readOnly:!0})],Qs.prototype,"_watchUpdatingTracking",void 0),b([g({readOnly:!0})],Qs.prototype,"updating",null),Qs=b([y("esri.views.overlay.ViewOverlay")],Qs);const ta=Qs;const ea=[0,0];function ia(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return ea[0]=i.left+(e?.pageXOffset??0),ea[1]=i.top+(e?.pageYOffset??0),ea}function na(t){t&&(ti(t),t.parentNode&&t.parentNode.removeChild(t))}function ra(t){const e=document.createElement("div");return t.appendChild(e),e}const sa=16,aa=750,oa=512,ua=2,la=t=>{let e=class extends t{constructor(...t){super(...t),this._freqInfo={freq:sa,time:aa},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ht((()=>this.cursor),(t=>{const{surface:e}=this;e&&e.setAttribute("data-cursor",t)})),ht((()=>this.navigating),(t=>{const{surface:e}=this;e&&e.setAttribute("data-navigating",t.toString())}))])}initialize(){this.addHandles([ht((()=>this.ui),((t,e)=>this._handleUIChange(t,e)),ct),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui=dt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(t){const e=this._get("container"),i=Xe(t);if(i||"string"!=typeof t||l.getLogger(this).error("#container",`element with id '${t}' not found`),e===i)return;if(this._stopMeasuring(),e&&(e.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(na(this.root),this._set("root",null)),this.userContent&&(Qe(this.userContent,e),na(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",Qe(i,n),i.appendChild(n),this._set("userContent",n);const r=document.createElement("div");r.className="esri-view-root",i.insertBefore(r,i.firstChild),this._set("root",r);const s=document.createElement("div");s.className="esri-view-surface",s.setAttribute("role","application"),s.tabIndex=0,r.appendChild(s),this._set("surface",s);const a=new ta;r.appendChild(a.surface),this._set("overlay",a),this.addHandles(ht((()=>a.needsRender),(t=>{t&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=vt({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=pt(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(t,e,i){const n=this.position;return t-=n?n[0]:0,e-=n?n[1]:0,i?(i[0]=t,i[1]=e):i=[t,e],i}containerToPage(t,e,i){const n=this.position;return t+=n?n[0]:0,e+=n?n[1]:0,i?(i[0]=t,i[1]=e):i=[t,e],i}_handleUIChange(t,e){this.removeHandles("ui"),e&&e!==t&&e.destroy(),t&&(t.view=this,this.addHandles(ht((()=>this.root),(e=>{t.container=e?ra(e):null}),ct),"ui")),this._set("ui",t)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const t=this._freqInfo;t.freq=sa,t.time=aa,this.addHandles([(()=>{const e=()=>{t.freq=sa,t.time=aa};return window.addEventListener("resize",e),{remove(){window.removeEventListener("resize",e)}}})(),vt({prepare:t=>{const e=this._measure(),i=this._freqInfo;if(i.time+=t.deltaTime,e&&(i.freq=sa,this._get("resizing")||this._set("resizing",!0)),i.time<i.freq)return;i.time=0;const n=this._position();i.freq=n||e?sa:Math.min(aa,i.freq*ua),!e&&i.freq>=oa&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const t=this.container,e=t?t.clientWidth:0,i=t?t.clientHeight:0;if(0===e||0===i)return this.suspended||this._set("suspended",!0),!1;const n=this.width,r=this.height;return e===n&&i===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",e),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:r,width:e,height:i}),!0)}_position(){const t=this.container,e=this.position,i=t&&ia(t);return!!i&&((!e||i[0]!==e[0]||i[1]!==e[1])&&(this._set("position",[i[0],i[1]]),!0))}forceDOMReadyCycle(){}};return b([g()],e.prototype,"container",null),b([g({readOnly:!0})],e.prototype,"focused",null),b([g({readOnly:!0})],e.prototype,"height",void 0),b([g({type:ta})],e.prototype,"overlay",void 0),b([g({readOnly:!0})],e.prototype,"position",void 0),b([g({readOnly:!0})],e.prototype,"resizing",void 0),b([g({readOnly:!0})],e.prototype,"root",void 0),b([g({value:null,readOnly:!0})],e.prototype,"size",null),b([g({readOnly:!0})],e.prototype,"surface",void 0),b([g({readOnly:!0})],e.prototype,"suspended",void 0),b([g()],e.prototype,"ui",void 0),b([g({readOnly:!0})],e.prototype,"userContent",void 0),b([g({readOnly:!0})],e.prototype,"width",void 0),b([g()],e.prototype,"widthBreakpoint",void 0),e=b([y("esri.views.DOMContainer")],e),e};class ha{constructor(t,e){this._owner=e,this._properties={},this._afterDispatchHandle=null;for(const e in t){const i=t[e],n=new bt(i,void 0,void 0,2,2);this._properties[e]={pool:n,acquired:[]}}this._afterDispatchHandle=gt((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const e=this._properties[t];for(const t of e.acquired)yt(t)||e.pool.release(t);e.pool.destroy(),e.pool=null,e.acquired=null}this._properties=null,this._owner=null}get(t){const e=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===e;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const e=this._properties[t];let i=0;for(const t of e.acquired)yt(t)?e.acquired[i++]=t:e.pool.release(t);e.acquired.length=i}}}const ca=a("mac")?"Meta":"Ctrl",da={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)da[t]=String.fromCharCode(t);for(let t=1;t<25;t++)da[111+t]=`F${t}`;for(let t=65;t<91;t++)da[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function fa(t){if(void 0!==t.key)return wt(t);const e=da[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function ma(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class va{constructor(t,e=[]){this.eventType=t,this.keyModifiers=e}matches(t){if(t.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const e=t.modifiers;for(const t of this.keyModifiers)if(!e.has(t))return!1;return!0}}const pa=l.getLogger("esri.views.input.InputHandler");class ba{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const e=this._incoming[t];for(const t of e)this._incomingEventMatches.push(t.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((t=>t.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?pa.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback((t=>this._handleEvent(t))),t.setUninstallCallback((()=>this._onUninstall())),this._manager=t)}onUninstall(){}registerIncoming(t,e,i){let n;"function"==typeof e?(i=e,n=[]):n=e||[];const r="string"==typeof t?new va(t,n):t,s=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=t=>{const e=this._incoming[t.match.eventType];if(e){const i=e.indexOf(t);e.splice(i,1),s(),this._manager&&this._manager.updateDependencies()}},o=new ga(r,i,{onPause:a,onRemove:a,onResume:t=>{const e=this._incoming[t.match.eventType];e&&!e.includes(t)&&(e.push(t),s(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[r.eventType];return u||(u=[],this._incoming[r.eventType]=u),u.push(o),s(),this._manager&&this._manager.updateDependencies(),o}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const e=new ya(t,{onEmit:(t,e,i,n)=>{this._manager?.emit(t.eventType,e,i,n)},onRemove:t=>{delete this._outgoing[t.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=e,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),e}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):pa.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const e=this._incoming[t.type];if(e)for(const i of e)if(i.match.matches(t)&&(i.callback?.(t),t.shouldStopPropagation()))break}}class ga{constructor(t,e,i){this.match=t,this._callback=e,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class ya{constructor(t,e){this.eventType=t,this._removed=!1,this._handler=e}emit(t,e,i){this._removed||this._handler.onEmit(this,t,e,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class wa extends ba{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(t=>{this._update(t.data)}))}_update(t){const e="touch"===t.native.pointerType?"touch":"mouse",{x:i,y:n}=t;e===this._value&&this._x===i&&this._y===n||(this._value=e,this._x=i,this._y=n,this._onChange(e,i,n))}}class Sa extends ba{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Qi(!1),this._onPointerAdd=({data:t})=>{"touch"===t.pointerType&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{"touch"===t.pointerType&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}let xa=class extends tt{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ca,this._latestPointerType="mouse",this._propertiesPool=new ha({latestPointerLocation:ka},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const e of t)this.uninstallHandlers(e);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((t=>t.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,e,i=Ma.INTERNAL){if(this._nameToGroup[t])return void l.getLogger(this).error("There is already an InputHandler group registered under the name `"+t+"`");if(0===e.length)return void l.getLogger(this).error("Can't register a group of zero handlers");const n={name:t,handlers:e.map((t=>({handler:t,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[t]=n;for(let t=n.handlers.length-1;t>=0;t--){const e=n.handlers[t];this._handlers.push(e),e.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(t,i,n,r,s)=>{this._emitInputEvent(e.priorityIndex+1,t,i,n,s,r)},setPointerCapture:(t,i)=>{this._setPointerCapture(n,e,t,i)},setEventCallback:t=>{e.eventCallback=t},setUninstallCallback:t=>{e.uninstallCallback=t},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const e=this._nameToGroup[t];e?(e.handlers.forEach((t=>{t.removed=!0,t.uninstallCallback?.()})),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):l.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return void 0!==this._nameToGroup[t]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,e=new Set;this._handlersPriority=[];for(let t=this._handlers.length-1;t>=0;t--){const e=this._handlers[t];e.priorityIndex=t,this._handlersPriority.push(e)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let r=n.handler.hasSideEffects;if(!r)for(const e of n.handler.outgoingEventTypes)if(t.has(e)){r=!0;break}if(r)for(const i of n.handler.incomingEventMatches){t.add(i.eventType);for(const t of i.keyModifiers)ma(t)||e.add(t)}n.active=r}this._sourceEvents=t,this._keyModifiers=e,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,e,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(null==n||n.x!==e||n.y!==i){const t=this._propertiesPool.get("latestPointerLocation");t.x=e,t.y=i,this._set("latestPointerLocation",t)}}_onEventReceived(t,e){if("pointer-capture-lost"===t){const t=e;this._pointerCaptures.delete(t.native.pointerId)}this._updateKeyModifiers(t,e);const i=null!=this.test.timestamp?this.test.timestamp:e.native?e.native.timestamp:void 0,n=e.native?e.native.cancelable:void 0;this._emitInputEventFromSource(t,e,i,n)}_updateKeyModifiers(t,e){if(!e)return;let i=!1;const n=()=>{if(!i){const t=new Set;this._activeKeyModifiers.forEach((e=>{t.add(e)})),this._activeKeyModifiers=t,i=!0}},r=(t,e)=>{e&&!this._activeKeyModifiers.has(t)?(n(),this._activeKeyModifiers.add(t)):!e&&this._activeKeyModifiers.has(t)&&(n(),this._activeKeyModifiers.delete(t))};if("key-down"===t||"key-up"===t){const i=e.key;this._keyModifiers.has(i)&&r(i,"key-down"===t)}const s=e.native;r("Alt",!(!s||!s.altKey)),r("Ctrl",!(!s||!s.ctrlKey)),r("Shift",!(!s||!s.shiftKey)),r("Meta",!(!s||!s.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new wa(((t,e,i)=>this._setLatestPointer(t,e,i))),this._multiTouchHandler=new Sa,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ma.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ma.INTERNAL)}_setPointerCapture(t,e,i,n){const r=t.name+"-"+e.priorityIndex,s=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,s),n?(s.add(r),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):s.has(r)&&(s.delete(r),0===s.size&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((t=>!t.removed)),this.updateDependencies()}_emitInputEventFromSource(t,e,i,n){this._emitInputEvent(0,t,e,i,n)}_emitInputEvent(t,e,i,n,r,s){const a=void 0!==n?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),o=void 0!==r&&r,u={event:new Ca(e,i,a,s||this._activeKeyModifiers,o),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(t){this._currentPropagation={events:new St,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:e,priorityIndex:i}=t.events.pop(),n=e.data&&e.data.eventId;if(!(null!=n&&this._stoppedPropagationEventIds.has(n)))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!e.shouldStopPropagation()&&t.currentHandler.eventCallback?.(e),e.shouldStopPropagation()){null!=n&&this._stoppedPropagationEventIds.add(n);break}if(e.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:e,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const e=new St;e.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)e.push(i.events.pop());i.events=e,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,e){if(t.handler.hasSideEffects!==e.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==e.groupPriority)return t.groupPriority>e.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const t of e.handler.incomingEventMatches){if(i.eventType!==t.eventType)continue;const e=i.keyModifiers.filter((e=>t.keyModifiers.includes(e)));if(e.length===i.keyModifiers.length!==(e.length===t.keyModifiers.length))return i.keyModifiers.length>t.keyModifiers.length?-1:1}return t.priorityIndex>e.priorityIndex?-1:1}_sortHandlersPriority(t){const e=[];for(const i of t){let t=0;for(;t<e.length&&this._compareHandlerPriority(i,e[t])>=0;)t++;e.splice(t,0,i)}return e}get debug(){const t=t=>{const e=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=e};return{injectEvent:(e,i)=>{t((()=>{this._onEventReceived(e,i)}))},disablePointerCapture:t}}};b([g({readOnly:!0})],xa.prototype,"hasPendingInputs",null),b([g({constructOnly:!0})],xa.prototype,"eventSource",void 0),b([g({constructOnly:!0})],xa.prototype,"recognizers",void 0),b([g()],xa.prototype,"_latestPointerType",void 0),b([g()],xa.prototype,"latestPointerType",null),b([g()],xa.prototype,"multiTouchActive",null),b([g({readOnly:!0})],xa.prototype,"latestPointerLocation",void 0),b([g()],xa.prototype,"_paused",void 0),b([g({readOnly:!0})],xa.prototype,"updating",null),xa=b([y("esri.views.input.InputManager")],xa);class Ca{constructor(t,e,i,n,r){this.type=t,this.data=e,this.timestamp=i,this.modifiers=n,this.cancelable=r,this._propagationState=Oa.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Oa.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&Oa.STOPPED)}async(t){this._propagationState|=Oa.PAUSED;const e=(t,e)=>{this._propagationState&=~Oa.PAUSED;const i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),e)throw t;return t};return("function"==typeof t?t():t).then((t=>e(t,!1)),(t=>e(t,!0)))}shouldPausePropagation(t){return!!(this._propagationState&Oa.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Oa;!function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"}(Oa||(Oa={}));const Ma={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class Ta{}const ka=Ta;function Ia(t){return null!=t&&"open"in t&&"declaredClass"in t}function Aa(t){return null!=t&&"declaredClass"in t&&"dockOptions"in t}const ja=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ht((()=>[this.ui,this.popup]),(([t,e],i)=>{const n="popup",r="manual";if(i){const[t,e]=i;t&&Ia(e)&&(e.view=null,Aa(e)&&t.remove(e,n))}t&&Ia(e)&&(e.view=this,Aa(e)&&t.add(e,{key:n,position:r,internal:!0}))}),ct),this.on("click",(t=>{this.popup&&this.popupEnabled&&("mouse"!==t.pointerType||0===t.button)&&(!Ia(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(Ia(this.popup)?this.popup.viewModel.handleViewClick(t):t.async((async()=>{await this.setupPopup(),Ia(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(t)}))))}),Ma.WIDGET)]),A((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{import("./p-e299cf43.js").then((function(t){return t.a0}))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(t){Ia(this.popup)&&this.popup.open(t);try{if(await this.setupPopup(),!this.popup)return void l.getLogger(this).error(new u("view:null-popup","Popup is null and can't be opened"));this.popup.open(t)}catch{}}closePopup(){this._popupSetupTask?.abort(),Ia(this.popup)&&this.popup.close()}async fetchPopupFeatures(t,e){await this.when();const{location:i,queryArea:n,layerViewsAndGraphics:r,clientOnlyGraphics:s}=await this._prepareFetchPopupFeatures(t,e),a=Promise.resolve(s),o=this._queryLayerPopupFeatures(n,r,e),u=o.map((t=>t.promise));return{location:i,clientOnlyGraphics:s,allGraphicsPromise:Ct([a,...u]).then((t=>Array.from(new Set(t.flat())))),promisesPerLayerView:o}}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Ia(this.popup))return this._popupSetupTask=Ot((async t=>{const{default:e}=await import("./p-e299cf43.js").then((function(t){return t.a0}));if(T(t),!this.popup||Ia(this.popup))return;const i=this.popup;delete i.open,delete i.close,this.popup=new e(i)})),this._popupSetupTask.promise}_queryLayerPopupFeatures(t,e,i){return e.map((({layerView:e,graphics:n})=>{const r={clientGraphics:n,event:null!=i?i.event:void 0,signal:null!=i?i.signal:void 0,defaultPopupTemplateEnabled:null!=i&&!!i.defaultPopupTemplateEnabled},s=e.fetchPopupFeatures(t,r);return{layerView:e,promise:s}}))}_isValidPopupGraphic(t,e){return t&&!!t.getEffectivePopupTemplate(null!=e&&e.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,e){const{clientGraphics:i,queryArea:n,location:r}=await this._popupHitTestGraphics(t,e),s=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:a,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(i,s);return{clientOnlyGraphics:o,layerViewsAndGraphics:a,queryArea:n,location:r}}async _popupHitTestGraphics(t,e){const i=await this.popupHitTest(t),n=i.results,r=i.mapPoint,s=n.filter((t=>"graphic"===t.type&&this._isValidPopupGraphic(t.graphic,e))),a=s.length?s[0].mapPoint:null;return{clientGraphics:s.map((t=>t.graphic)),queryArea:r,location:r||a}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach((e=>{this._isValidPopupLayerView(e)&&t.push(e)})),null!=this.graphicsView&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return null!=t&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,e){const i=[],n=new Map,r=e.map((t=>{const e=[];return"layer"in t?n.set(t.layer,e):n.set(t.graphics,e),{layerView:t,graphics:e}}));for(const e of t){const t=n.get(e.layer)||n.get(e.sourceLayer)||null;t?t.push(e):i.push(e)}return{layerViewsAndGraphics:r,clientOnlyGraphics:i}}};return b([g({cast(t){return!t||Ia(t)||"object"==typeof t&&(t.open=t=>(xt(l.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(t)),t.close=()=>(xt(l.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),t}})],e.prototype,"popup",void 0),b([g()],e.prototype,"popupEnabled",void 0),e=b([y("esri.views.PopupView")],e),e};let Fa=class extends nn{constructor(t){super(t),this.handles.add(this.on("before-add",(t=>{null!=t.item&&t.item.parent===this.owner&&(l.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())})))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Fa=b([y("esri.support.AnalysesCollection")],Fa);let Da=class extends tt{constructor(t){super(t),this.view=null,this.baseLayerViews=new G,this.referenceLayerViews=new G,this._loadingHandle=ht((()=>this.view?.map?.basemap),(t=>{t&&t.load().catch((()=>{}))}),ct)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const t=this.view?.map?.basemap;return!!t&&(!!t.loaded&&(this.baseLayerViews.some((t=>t.updating))||this.referenceLayerViews.some((t=>t.updating))))}};b([g({constructOnly:!0})],Da.prototype,"view",void 0),b([g({readOnly:!0})],Da.prototype,"baseLayerViews",void 0),b([g({readOnly:!0})],Da.prototype,"referenceLayerViews",void 0),b([g({readOnly:!0})],Da.prototype,"suspended",null),b([g({type:Boolean,readOnly:!0})],Da.prototype,"updating",null),Da=b([y("esri.views.BasemapView")],Da);function Pa(t){return"tryRecycleWith"in t}class La{constructor(t,e,i){this.layer=t,this.view=e,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Mt(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ft(this._controller.signal,(()=>{const e=new u("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(e)}))}tryRecycle(t){if(!this.done||!this.layerView||!Pa(this.layerView))return null;const e=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const r=t[n];if(r.type!==e)continue;const s=this.layerView.tryRecycleWith(r,{signal:i});if(s){t.splice(n,1),this.layer=r;const e=this.layerView,i=e.view;return this.promise=Promise.race([s.then((()=>(T(this._controller.signal),r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{view:i,layerView:e}),r.emit("layerview-create",{view:i,layerView:e}),i.emit("layerview-create",{view:i,layerView:e}),e))),new Promise(((t,e)=>Ft(this._controller.signal,(()=>e(At())))))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:e,view:i}=this;e.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:e,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:e,view:i}=this;this._map=i.map;try{let n,r;if(await e.load({signal:t}),"prefetchResources"in e&&await(e.prefetchResources?.({signal:t})),Ra(e))n=await e.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(e))throw new u("layer:view-not-supported","No layerview implementation was found");const r=await this.layerViewImporter.importLayerView(e);T(t),n="default"in r?new r.default({layer:e,view:i}):new r({layer:e,view:i})}const s=()=>{r=pt(r),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};r=Ft(t,s),T(t);try{await n.when()}catch(t){throw s(),t}const a=this._map?.allLayers?.includes(e);if(!a)return s(),void this._deferred.reject(new u("view:no-layerview-for-layer","The layer has been removed from the map",{layer:e}));this.layerView=n,e.emit("layerview-create",{view:i,layerView:n}),i.emit("layerview-create",{layer:e,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(t){e.emit("layerview-create-error",{view:i,error:t}),i.emit("layerview-create-error",{layer:e,error:t}),this.done=!0,this._deferred.reject(new u("layerview:create-error","layerview creation failed",{layer:e,error:t}))}}}let Ea=class extends tt{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new mt,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const t=this.view.map?.allLayers;if(t)for(const e of t)this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e)},this._reschedule=()=>this.destroyed?Promise.reject():(null==this._workPromise&&(this._workPromise=Mt(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(Tt(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),null==this._workPromise)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const e=new Set,i=[],n=this.view.ready,r=t=>{if(null!=t)for(const s of t)if(s){e.add(s);const t=this._layerLayerViewInfoMap.get(s);t&&n?t.start():t||this._recyclingInfoMap.has(s)||i.push(s),"layers"in s&&s.layers&&r(s.layers)}};for(const t of this._rootCollectionNames)r(this.get(t));for(const[t,n]of this._layerLayerViewInfoMap)if(!e.has(t)){this._layerLayerViewInfoMap.delete(n.layer);const t=n.tryRecycle(i);t?(this.notifyChange("updating"),this._recyclingInfoMap.set(n.layer,n),t.then((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(n.layer),this._layerLayerViewInfoMap.set(n.layer,n),this._reschedule()})).catch((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(n.layer),n.destroy(),this._reschedule()}))):n.destroy()}for(const[t,i]of this._recyclingInfoMap)e.has(t)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(i.layer),i.destroy());for(const t of i)this._createLayerView(t);this._refreshCollections();const s=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter((t=>!!t));e.forEach((t=>"layers"in t&&s.push(t.layers))),this.addHandles(s.map((t=>this._watchUpdatingTracking.addOnCollectionChange((()=>t),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([kt((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ht((()=>{const t=this.view,e=t?.map;return[e?.basemap,e?.ground,e?.layers,t?.ready]}),(()=>this._reschedule()),It)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Ji(this._recyclingInfoMap),Ji(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,null!=this._workPromise&&(this._workPromise.reject(At()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return null!=this._workPromise||this._watchUpdatingTracking.updating||jt(this._layerLayerViewInfoMap,(t=>!t.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const e of this._layerLayerViewInfoMap.values())e.done||++t;return t}clear(){this.destroyed||(Ji(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new u("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(const[t,e]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(t),this.get(e),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,e,i){if(!t||!e)return void(e&&e.removeAll());let n=0;for(const r of t){const t=this._layerLayerViewInfoMap.get(r);if(!t||!t.layerView)continue;const s=t.layerView;s.layer=r,s.parent=i,e.at(n)!==s&&e.splice(n,0,s),r.layers&&this._populateLayerViewsOwners(r.layers,s.layerViews,s),n+=1}n<e.length&&e.splice(n,e.length)}_createLayerView(t){t.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const e=new La(t,this.view,this.layerViewImporter);e.promise.then((()=>this._refreshCollections()),(e=>{e&&($(e)||"cancelled:layerview-create"===e.name)||l.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:e}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(t,e),this.view.ready&&e.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};b([g()],Ea.prototype,"_workPromise",void 0),b([g({readOnly:!0})],Ea.prototype,"_watchUpdatingTracking",void 0),b([g({readOnly:!0})],Ea.prototype,"_layersToLayerViews",null),b([g({readOnly:!0})],Ea.prototype,"_rootCollectionNames",null),b([g()],Ea.prototype,"layerViewImporter",void 0),b([g()],Ea.prototype,"supportsGround",void 0),b([g({readOnly:!0})],Ea.prototype,"updating",null),b([g({readOnly:!0})],Ea.prototype,"updatingRemaining",null),b([g({constructOnly:!0})],Ea.prototype,"view",void 0),Ea=b([y("esri.views.LayerViewManager")],Ea);const Na=Ea;function Ra(t){return"createLayerView"in t&&null!=t.createLayerView}let Ba=class extends tt{constructor(t){super(t),this.factor=1.5,this.offset=Dt(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};b([g({type:Number})],Ba.prototype,"factor",void 0),b([g({nonNullable:!0})],Ba.prototype,"offset",void 0),b([g()],Ba.prototype,"position",void 0),b([g({type:Number,range:{min:0}})],Ba.prototype,"size",void 0),b([g()],Ba.prototype,"maskUrl",void 0),b([g()],Ba.prototype,"maskEnabled",void 0),b([g()],Ba.prototype,"overlayUrl",void 0),b([g()],Ba.prototype,"overlayEnabled",void 0),b([g({readOnly:!0})],Ba.prototype,"version",null),b([g({type:Boolean})],Ba.prototype,"visible",void 0),Ba=b([y("esri.views.Magnifier")],Ba);const _a=Ba;let za=class extends tt{constructor(t,e){super({}),this._stage=t,this._textureRequests=new Map,this._frameTask=e?.registerTask(tn.TEXTURE_UNLOAD)??en}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask?.remove(),this._textureRequests?.forEach((t=>this._releaseTextureRequest(t))),this._textureRequests?.clear()}get updating(){return this._frameTask.updating}fromData(t,e,i){const n=this.makeUid(t);let r=this._textureRequests.get(n);if(!r){const t=new Va(i);t.texture=e(),this._stage?.add(t.texture),this._stage?.loadImmediate(t.texture),this._textureRequests.set(n,t),r=t}return r.referenceCount++,{uid:n,texture:r.texture,release:()=>this._release(n)}}_release(t){const e=this._textureRequests.get(t);e?(e.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),e.referenceCount--,e.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(t)))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;const e=this._textureRequests.get(t);!e||e.referenceCount>0||(this._releaseTextureRequest(e),this._textureRequests.delete(t))}_releaseTextureRequest(t){t.onRemove&&t.onRemove(),t.texture?this._stage?.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,e=null){return null!=e?`${t}.${e}px`:t}};b([g()],za.prototype,"_frameTask",void 0),b([g()],za.prototype,"updating",null),za=b([y("esri.views.3d.support.TextureCollection")],za);class Va{constructor(t){this.onRemove=t,this.referenceCount=0}}var Ga;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(Ga||(Ga={}));const $a=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Wa={};function qa(t){return!!Wa[t]}function Ha(t){for(const e of t)if(!qa(e))return!1;return!0}$a.forEach((t=>{Wa[t]=!0}));class Ua{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach((({handler:t,priority:e},i)=>this.inputManager?.installHandlers(i,[t],e)))}disconnect(){this.inputManager&&this._handlers.forEach(((t,e)=>this.inputManager?.uninstallHandlers(e))),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,e,i,n){const r=Array.isArray(t)?t:t.split(",");if(!Ha(r))return r.some(qa)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(e)?a=e:(s=e,a=[]),"function"==typeof i?s=i:n=i,n=null!=n?n:Ma.DEFAULT;const o=this._createUniqueGroupName(),u=new Ka(this.view,r,a,s);this._handlers.set(o,{handler:u,priority:n});for(const t of r){const e=this._handlerCounts.get(t)||0;this._handlerCounts.set(t,e+1)}return this.inputManager&&this.inputManager.installHandlers(o,[u],n),{remove:()=>this._removeHandler(o,r)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,e){if(this._handlers.has(t)){this._handlers.delete(t);for(const t of e){const e=this._handlerCounts.get(t);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",t):1===e?this._handlerCounts.delete(t):this._handlerCounts.set(t,e-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class Ka extends ba{constructor(t,e,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const t of e)switch(t){case"click":this.registerIncoming("click",i,(t=>n(this._wrapClick(t))));break;case"double-click":this.registerIncoming("double-click",i,(t=>n(this._wrapDoubleClick(t))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(t=>n(this._wrapImmediateClick(t))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(t=>n(this._wrapImmediateDoubleClick(t))));break;case"hold":this.registerIncoming("hold",i,(t=>n(this._wrapHold(t))));break;case"drag":this.registerIncoming("drag",i,(t=>{const e=this._wrapDrag(t);e&&n(e)}));break;case"key-down":this.registerIncoming("key-down",i,(t=>n(this._wrapKeyDown(t))));break;case"key-up":this.registerIncoming("key-up",i,(t=>n(this._wrapKeyUp(t))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(t=>n(this._wrapPointer(t,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(t=>n(this._wrapPointer(t,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(t=>n(this._wrapPointer(t,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(t=>n(this._wrapPointerDrag(t))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(t=>n(this._wrapMouseWheel(t))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(t=>n(this._wrapPointer(t,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(t=>n(this._wrapPointer(t,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(t=>{n(this._wrapGamepad(t))}));break;case"focus":this.registerIncoming("focus",i,(t=>{n(this._wrapFocus(t))}));break;case"blur":this.registerIncoming("blur",i,(t=>{n(this._wrapBlur(t))}))}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:e,button:i,buttons:n,x:r,y:s,native:a,eventId:o}=t.data,{cancelable:u,timestamp:l}=t;return{type:"click",pointerType:e,button:i,buttons:n,x:r,y:s,native:a,timestamp:l,screenPoint:Dt(r,s),mapPoint:this._getMapPoint(r,s),eventId:o,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:e,button:i,buttons:n,x:r,y:s,native:a,eventId:o}=t.data,{cancelable:u,timestamp:l}=t;return{type:"double-click",pointerType:e,button:i,buttons:n,x:r,y:s,native:a,timestamp:l,mapPoint:this._getMapPoint(r,s),eventId:o,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:e,button:i,buttons:n,x:r,y:s,native:a,eventId:o}=t.data,u=a.pointerId,{cancelable:l,timestamp:h}=t;return{type:"immediate-click",pointerId:u,pointerType:e,button:i,buttons:n,x:r,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(r,s),eventId:o,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:e,button:i,buttons:n,x:r,y:s,native:a,eventId:o}=t.data,u=a.pointerId,{cancelable:l,timestamp:h}=t;return{type:"immediate-double-click",pointerId:u,pointerType:e,button:i,buttons:n,x:r,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(r,s),eventId:o,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:e,button:i,buttons:n,x:r,y:s,native:a}=t.data,{cancelable:o,timestamp:u}=t;return{type:"hold",pointerType:e,button:i,buttons:n,x:r,y:s,native:a,timestamp:u,mapPoint:this._getMapPoint(r,s),cancelable:o,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,e){return this.view.toMap(Dt(t,e),{exclude:[]})}_wrapDrag(t){const e=t.data,{x:i,y:n}=e.center,{action:r,pointerType:s,button:a}=e;if("start"===r&&(this._latestDragStart=e),!this._latestDragStart)return;const o=e.pointer.native,u=e.buttons,{cancelable:l,timestamp:h}=t,c={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===r&&(this._latestDragStart=void 0),{type:"drag",action:r,x:i,y:n,origin:c,pointerType:s,button:a,buttons:u,radius:e.radius,angle:Pt(e.angle),native:o,timestamp:h,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:e,repeat:i,native:n}=t.data,{cancelable:r,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:n,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:e,native:i}=t.data,{cancelable:n,timestamp:r}=t;return{type:"key-up",key:e,native:i,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,e){const{x:i,y:n,button:r,buttons:s,native:a,eventId:o}=t.data,u=a.pointerId,l=a.pointerType,{cancelable:h,timestamp:c}=t;return{type:e,x:i,y:n,pointerId:u,pointerType:l,button:r,buttons:s,native:a,timestamp:c,eventId:o,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:e,y:i,buttons:n,native:r,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,o=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,l=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:c,timestamp:d}=t;return{type:"pointer-drag",x:e,y:i,pointerId:o,pointerType:u,button:a,buttons:n,action:l,origin:h,native:r,timestamp:d,eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:e,data:i,timestamp:n}=t,{x:r,y:s,deltaY:a,native:o}=i;return{type:"mouse-wheel",x:r,y:s,deltaY:a,native:o,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:e,state:i,device:n}=t.data,{cancelable:r,timestamp:s}=t,{buttons:a,axes:o}=i;return{type:"gamepad",device:n,timestamp:s,action:e,buttons:a,axes:o,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}var Ja,Ya,Za;!function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"}(Ja||(Ja={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Ya||(Ya={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Za||(Za={}));function Xa(t){return[t.on("before-add",(e=>{const i=e.item;if(null==i||t.includes(i))return l.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()})),t.on("after-remove",(t=>{const e=t.item;e.active&&(e.view.activeTool=null),e.destroy()}))]}function Qa(t){return t.visible&&null!=t.getEditableFlag&&t.getEditableFlag(Ja.USER)&&t.getEditableFlag(Ja.MANAGER)}function to(t){return Dt(t.x,t.y)}function eo(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?Dt(e.clientX-i.left,e.clientY-i.top):Dt(0,0)}function io(t,e){return e instanceof Event?eo(t,e):to(e)}function no(t){if(t instanceof Event)return!0;if("object"==typeof t&&"type"in t){switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}}return!1}class ro{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,e){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":so(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),"end"===t.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!ao(t))break;const n=to(t),r=this._intersect(n,t.pointerType,e.forEachTool);if(null==r)break;const s=r.manipulator,a=r.tool;null==s||null==a||!s.interactive||s.grabbable&&s.grabbableForEvent(t)||!s.grabbing||s.dragging||this._ungrabManipulatorBeforeDragging(s,t,e),null!=s&&null!=a&&s.interactive&&s.grabbable&&s.grabbableForEvent(t)&&!s.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:s,tool:a,start:n,pointerType:t.pointerType}),1===this._grabbedManipulators.size&&null==e.activeTool&&(this._revertToNullActiveTool=!0,e.setActiveTool(r.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,e);break;case"pointer-drag":{if(!ao(t))break;const n=this._grabbedManipulators.get(t.pointerId),r=Lt(n,(({manipulator:t})=>t)),s=Lt(n,(({tool:t})=>t));if(null==r||null==s)break;const a=to(t);a.x=at(a.x,0,e.view.width),a.y=at(a.y,0,e.view.height);const o=n.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":"update"!==t.action&&1!==this._grabbedManipulators.size||(r.dragging=!0,u?r.events.emit("drag",{action:"update",start:o,screenPoint:a}):r.events.emit("drag",{action:"start",start:o,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:s,manipulator:r,start:o}));break;case"end":r.dragging=!1,u&&r.events.emit("drag",{action:"end",start:o,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,e)}i();break}case"immediate-click":{const n=to(t),r=this._intersect(n,t.pointerType,e.forEachTool);if(oo(t)||e.forEachTool((t=>{if((null==r||r.tool!==t||t.automaticManipulatorSelection)&&t.manipulators){let e=!1;t.manipulators.forEach((({manipulator:t})=>{t.selected&&(t.selected=!1,e=!0)})),e&&t.onManipulatorSelectionChanged&&t.onManipulatorSelectionChanged()}})),null==r)break;const{manipulator:s,tool:a}=r;if(!s.interactive)break;s.selectable&&a.automaticManipulatorSelection&&(s.selected=!s.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const o=t.native.shiftKey;s.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:o,stopPropagation:i});break}case"click":{const n=to(t),r=this._intersect(n,t.pointerType,e.forEachTool),s=null!=r?r.manipulator:null;if(null==s||!s.interactive)break;const a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=to(t),r=this._intersect(n,t.pointerType,e.forEachTool),s=null!=r?r.manipulator:null;if(null==s||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const n=to(t),r=this._intersect(n,t.pointerType,e.forEachTool),s=null!=r?r.manipulator:null;if(null==s||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(e.forEachTool)}_ungrabManipulatorBeforeDragging(t,e,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:to(e)}),this._grabbedManipulators.forEach((({manipulator:e},i)=>{e===t&&this._grabbedManipulators.delete(i)})),this._afterManipulatorUngrab(i.setActiveTool)}_handlePointerEnd(t,e){const i=Lt(this._grabbedManipulators.get(t.pointerId),(({manipulator:t})=>t));null!=i&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:to(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(e.setActiveTool))}_cursorFromMap(t){let e=null;return jt(t,(({manipulator:t})=>!(null==t||!t.interactive)&&(t.grabbing&&t.grabCursor?(e=t.grabCursor,!0):!!t.cursor&&(e=t.cursor,!0)))),e}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const e=new Set,i=new Set;this._grabbedManipulators.forEach((({tool:t})=>{e.add(t)})),this._hoveredManipulators.forEach((({tool:t})=>{i.add(t)})),t((t=>{t.hasGrabbedManipulators=e.has(t),t.hasHoveredManipulators=i.has(t);const n=this._grabbedManipulators.values(),r=Et(n,(({tool:e})=>e===t));t.firstGrabbedManipulator=null!=r?r.manipulator:null}))}clearPointers(t,{forEachTool:e,setActiveTool:i},n=!0,r){const s=(e,i)=>e===t&&(null==r||r===i);this._grabbedManipulators.forEach((({tool:t,manipulator:e,pointerType:i},n)=>{s(t,e)&&(this._grabbedManipulators.delete(n),e.grabbing=!1,e.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}))})),this._draggedManipulators.forEach((({tool:t,manipulator:e},i)=>{s(t,e)&&(this._draggedManipulators.delete(i),e.dragging=!1,e.events.emit("drag",{action:"cancel"}))})),n&&this._hoveredManipulators.forEach((({tool:t,manipulator:e},i)=>{s(t,e)&&(this._hoveredManipulators.delete(i),e.hovering=!1)})),this._afterManipulatorUngrab(i),this._onFocusChange(e)}_intersect(t,e,i){let n=null;return i((i=>{if(null==i.manipulators||!Qa(i))return!1;const r=i.manipulators.intersect(t,e);return null!=r&&(n={tool:i,manipulator:r},!0)})),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach(((e,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Dt(e.x,e.y),i,e.pointerType,t)}))}handleHoverEvent(t,e){"pointer-up"!==t.type&&"immediate-click"!==t.type&&"pointer-move"!==t.type||!so(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(to(t),t.pointerId,t.pointerType,e)}_updateHoveredStateForPointerAtScreenPosition(t,e,i,n){let r=this._intersect(t,i,n);const s=Lt(this._hoveredManipulators.get(e),(({manipulator:t})=>t));null==r||r.manipulator.interactive||(r=null),null!=r&&s===r.manipulator||(null!=s&&(s.hovering=!1),null!=r?(r.manipulator.hovering=!0,this._hoveredManipulators.set(e,r)):this._hoveredManipulators.delete(e),this._onFocusChange(n))}_afterManipulatorUngrab(t){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function so(t){return"mouse"===t}function ao(t){return"mouse"!==t.pointerType||0===t.button}function oo(t){return!!t.native.shiftKey}const uo="attached",lo="tools",ho=1e3;let co=class extends Nt{constructor(t){super(t),this._clock=Rt,this._manipulatorState=new ro,this.tools=new G,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=t=>{for(const e of this.tools.items)if(t(e))return}}initialize(){this.handles.add([this.view.on($a,(t=>{this._handleInputEvent(t)}),Ma.TOOL),...Xa(this.tools),this.tools.on("before-add",(({item:t})=>{this._updateToolEditableFlag(t)})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(null!=t&&!this.view.ready)return void l.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const e=this.activeTool;this._set("activeTool",t),null!=e&&e.deactivate(),null!=t&&t.activate(),this._removeIncompleteTools(t);for(const t of this.tools){this._updateToolEditableFlag(t);const e=Qa(t);null!=this.activeTool&&e||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!e)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some((t=>t.updating))||(this.textures?.updating??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=pt(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout((()=>this._interacting=!1),ho)}attach(){"3d"===this.view.type?(this._set("textures",new za(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([ht((()=>{const{state:t}=this.view;return"camera"in t&&t.camera}),(()=>this._forEachManipulator((t=>t.onViewChange())))),this.view.elevationProvider?.on("elevation-change",(t=>this._forEachManipulator((e=>e.onElevationChange(t))))),Bt((()=>this._set("textures",dt(this.textures))))],uo)):this.handles.add(ht((()=>this.view.extent),(()=>this._forEachManipulator((t=>t.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(uo),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool((e=>{e.manipulators&&e.manipulators.forEach((({manipulator:i})=>t(i,e)))}))}_handleInputEvent(t){let e=!1;const i={...t,stopPropagation:()=>{e=!0,t.stopPropagation()}};null!=this.activeTool?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((t=>{!e&&t.visible&&t.handleInputEvent(i)})),!e&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),e||null==this.activeTool||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),"pointer-move"===t.type&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(lo),this._forEachTool((t=>{if(t instanceof tt){const e=ht((()=>[t.cursor,t.visible,t.editable]),(()=>{Qa(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}));this.handles.add(e,lo)}t.manipulators&&this.handles.add([t.manipulators.on("after-remove",(e=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,e.item.manipulator)})),t.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],lo)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(Ja.MANAGER,null==this.activeTool||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;null==t&&this._forEachTool((e=>!(null==e.cursor||!e.visible)&&(t=e.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter((e=>(null==t||e!==t)&&!e.created&&e.removeIncompleteOnCancel)).forEach((t=>{this.tools.remove(t)}))}get test(){return{setClock:t=>this._clock=t}}};b([g({constructOnly:!0,nonNullable:!0})],co.prototype,"view",void 0),b([g({readOnly:!0,nonNullable:!0})],co.prototype,"textures",void 0),b([g({value:null})],co.prototype,"activeTool",null),b([g({readOnly:!0,type:G})],co.prototype,"tools",void 0),b([g({readOnly:!0})],co.prototype,"cursor",void 0),b([g({readOnly:!0})],co.prototype,"updating",null),b([g()],co.prototype,"_interacting",void 0),b([g({readOnly:!0})],co.prototype,"interacting",null),co=b([y("esri.views.ToolViewManager")],co);let fo=class extends tt{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===t.mapping?this._detectedDeviceType="standard":mo.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return vo[this.deviceType]}};b([g({nonNullable:!0,readOnly:!0})],fo.prototype,"nativeIndex",void 0),b([g({type:String,readOnly:!0})],fo.prototype,"deviceType",null),b([g({type:Number,readOnly:!0})],fo.prototype,"axisThreshold",null),fo=b([y("esri.views.input.gamepad.GamepadInputDevice")],fo);const mo=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),vo={standard:.15,spacemouse:.025,unknown:0},po=fo;let bo=class extends tt{constructor(...t){super(...t),this.devices=new G,this.enabledFocusMode="document"}};b([g({type:G.ofType(po),readOnly:!0})],bo.prototype,"devices",void 0),b([g({type:["document","view","none"]})],bo.prototype,"enabledFocusMode",void 0),bo=b([y("esri.views.input.gamepad.GamepadSettings")],bo);const go=bo;let yo=class extends tt{constructor(){super(...arguments),this.gamepad=new go}};b([g({readOnly:!0})],yo.prototype,"gamepad",void 0),yo=b([y("esri.views.input.Input")],yo);const wo=yo;let So=class extends tt{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};b([g({type:Boolean,nonNullable:!0})],So.prototype,"enabled",void 0),b([g({type:po})],So.prototype,"device",void 0),b([g({type:["pan","zoom"],nonNullable:!0})],So.prototype,"mode",void 0),b([g({type:["forward-down","forward-up"],nonNullable:!0})],So.prototype,"tiltDirection",void 0),b([g({type:Number,nonNullable:!0})],So.prototype,"velocityFactor",void 0),So=b([y("esri.views.navigation.gamepad.GamepadSettings")],So);const xo=So;let Co=class extends tt{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new xo,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};b([g({type:Boolean})],Co.prototype,"browserTouchPanEnabled",void 0),b([g({type:xo,nonNullable:!0})],Co.prototype,"gamepad",void 0),b([g({type:Boolean})],Co.prototype,"momentumEnabled",void 0),b([g({type:Boolean})],Co.prototype,"mouseWheelZoomEnabled",void 0),Co=b([y("esri.views.navigation.Navigation")],Co);const Oo=Co;var Mo;function To(t){const e=t.url?zt(t.url):void 0,i=t.spatialReference?.vcsWkid;return!(null==i&&null!=e&&"ImageServer"===e.serverType)&&ko(t)&&t.heightModelInfo?t.heightModelInfo:Ao(t)?_t.deriveUnitFromSR(Do,t.spatialReference):null}function ko(t){return"heightModelInfo"in t}function Io(t){if("unknown"===t.type||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Ao(t){return Io(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Fo(t)}function jo(t){return null!=t.layers||Fo(t)||Io(t)||ko(t)}function Fo(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}!function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"}(Mo||(Mo={}));const Do=new _t({heightModel:"gravity-related-height"});let Po,Lo=null;async function Eo(t){Lo||(Lo=import("./p-17a58a2a.js").then((t=>Po=t))),await Lo,T(t)}async function No(t,e,i,n){if(!t)return null;const r=t.spatialReference;return Vt()||Gt(r,e)?$t(t,e):Po?Po.projectGeometry(t,e,i,n):(await Promise.race([Eo(n),Wt(n)]),No(t,e,i,n))}let Ro=class extends tt{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=qt(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return null!=this.userSpatialReference?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return null==this.userSpatialReference||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const t=this.map?.(),e=[];return null!=this.priorityCollection&&e.push(this.priorityCollection),e.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),e}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:e}=this._allLayers;let i=null;for(const e of t){const t=this._getSupportedSpatialReferences(e);if(t.length>0){const e=this._narrowDownSpatialReferenceCandidates(i,t);null!=e&&(i=e)}if(null!=i&&1===i.length)break}if(e&&(null==i||1!==i.length))return{updating:!0};const n=this._pickSpatialReferenceCandidate(i);return{spatialReference:null!=n?n.spatialReference:null,viewingMode:null!=n?n.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:e}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const e=t[0].tileInfo;return{tileInfo:e&&e.spatialReference.equals(this.spatialReference)?e:null,updating:!1}}return{updating:e}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:e}=this._allLayers;for(const e of t)if(jo(e)){const t=To(e);if(t)return{heightModelInfo:t,vcsWkid:e.spatialReference?.vcsWkid,latestVcsWkid:e.spatialReference?.latestVcsWkid,updating:!1}}return{updating:e}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,e=t.updating,i=[];for(const e of t.layers){const t="fullExtents"in e&&e.fullExtents||(null!=e.fullExtent?[e.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:t[0],r=t.find((t=>t.spatialReference.equals(this.spatialReference)))??n;if(r)return{candidates:[{extent:r,layer:e}],updating:!1};if(this._getSupportedSpatialReferences(e).length>0)for(const n of t)i.push({extent:n,layer:e})}return{candidates:i,updating:e}}get _extentTask(){const{candidates:t,updating:e}=this._extentCandidatesTask;if(e)return{updating:e};if(null==t||0===t.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:null!=this._projectExtentTask.task&&!this._projectExtentTask.task.finished}:(null!=this._projectExtentTask.task&&(this._projectExtentTask.task=qt(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:Ot((async t=>{try{const e=await No(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,t);this._projectExtentTask={...this._projectExtentTask,task:null,output:e}}catch(e){if(Ht(t))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,e){if(null==t)return e;const i=[],n=(t,e)=>null!=t?null!=e?t===e&&t:t:e;for(const r of t)for(const t of e){if(!r.spatialReference.equals(t.spatialReference))continue;const e=n(r.viewingMode,t.viewingMode);if(!1!==e){i.push({spatialReference:r.spatialReference,viewingMode:e});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const e=this.defaultSpatialReference;return null==t||t.length<1?null!=e?{spatialReference:e,viewingMode:null}:null:(null!=e&&t.length>1&&t.some((({spatialReference:t})=>t.equals(e)))&&(t=t.filter((({spatialReference:t})=>t.equals(e)))),t.length>1&&t.some((({viewingMode:t})=>t!==an.Local))&&(t=t.filter((({viewingMode:t})=>t!==an.Local))),t[0])}_getSupportedSpatialReferences(t){const e="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(0===e.length)return[];const i=[];for(const n of e){const e=this.getSpatialReferenceSupport({spatialReference:n,layer:t});if(null!=e){const t=null!=e.constraints?e.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:e,viewingMode:n}of t)this.requiresExtentInSpatialReference&&null!=this.userSpatialReference&&!e.equals(this.userSpatialReference)||i.push({spatialReference:e,viewingMode:n})}}return i}_pickExtentCandidate(t){const e=this.spatialReference;return t.find((({extent:t})=>e.equals(t.spatialReference)))||t[0]}_collectLayers(t){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};const e=new Bo;for(const i of t)if(this._collectCollection(i,e),e.preloading===this.sourcePreloadCount)break;return{layers:e.layers,updating:e.updating}}_collectCollection(t,e){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return e.updating=!0,void++e.preloading;case"failed":return}for(const i of t.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":e.updating=!0,++e.preloading;break;case"loaded":e.updating||e.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},e)}if(e.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&null!=t.loadStatus?"not-loaded"===t.loadStatus?(t.load().catch((t=>{$(t)||console.log(t)})),"loading"):t.loadStatus:"loaded"}};b([g()],Ro.prototype,"required",void 0),b([g({constructOnly:!0})],Ro.prototype,"map",void 0),b([g({constructOnly:!0})],Ro.prototype,"getSpatialReferenceSupport",void 0),b([g()],Ro.prototype,"defaultSpatialReference",void 0),b([g()],Ro.prototype,"userSpatialReference",void 0),b([g()],Ro.prototype,"sourcePreloadCount",void 0),b([g()],Ro.prototype,"priorityCollection",void 0),b([g()],Ro.prototype,"requiresExtentInSpatialReference",void 0),b([g()],Ro.prototype,"suspended",void 0),b([g({readOnly:!0})],Ro.prototype,"ready",null),b([g({readOnly:!0})],Ro.prototype,"heightModelInfoReady",null),b([g({readOnly:!0})],Ro.prototype,"spatialReference",null),b([g({readOnly:!0})],Ro.prototype,"extent",null),b([g({readOnly:!0})],Ro.prototype,"heightModelInfo",null),b([g({readOnly:!0})],Ro.prototype,"vcsWkid",null),b([g({readOnly:!0})],Ro.prototype,"latestVcsWkid",null),b([g({readOnly:!0})],Ro.prototype,"viewingMode",null),b([g({readOnly:!0})],Ro.prototype,"tileInfo",null),b([g({readOnly:!0})],Ro.prototype,"mapCollections",null),b([g({readOnly:!0})],Ro.prototype,"_allLayers",null),b([g({readOnly:!0})],Ro.prototype,"_spatialReferenceTask",null),b([g({readOnly:!0})],Ro.prototype,"_tileInfoTask",null),b([g({readOnly:!0})],Ro.prototype,"_heightModelInfoTask",null),b([g({readOnly:!0})],Ro.prototype,"_extentCandidatesTask",null),b([g()],Ro.prototype,"_extentTask",null),b([g()],Ro.prototype,"_projectExtentTask",void 0),Ro=b([y("esri.views.support.DefaultsFromMap")],Ro);class Bo{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}}var _o;let zo=_o=class extends(Ut(Q.EventedMixin(Kt(tt)))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new $i({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:Go}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new rn,this.analyses=new Fa,this.typeSpecificPreconditionsReady=!0,this.layerViews=new G,this.magnifier=new _a,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Jt,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new wo,this.navigation=new Oo,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Ua(this),this.persistableViewModels=new G,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(ht((()=>this.preconditionsReady),(t=>{t?(this._currentSpatialReference=this.spatialReference,_o.views.add(this)):(this._currentSpatialReference=null,_o.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?(this.toolViewManager?.detach(),null!=this.analysisViewManager&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):t&&!this.ready&&(this._startup(),null!=this.analysisViewManager&&this.analysisViewManager.attach(),this.toolViewManager.attach())}),ee))}initialize(){this.addResolvingPromise(this.validate().then((()=>(this._isValid=!0,A((()=>this.ready)))))),this.basemapView=new Da({view:this}),this.layerViewManager=new Na({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new co({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([ht((()=>this.initialExtentRequired),(t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t}),{sync:!0,initial:!0}),ht((()=>this.ready),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)}),{sync:!0}),ht((()=>this._userSpatialReference),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)}),{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([ht((()=>this.defaultsFromMap?.ready),(e=>{const i=this.map?.allLayers.length>0;if(e&&!this.spatialReference&&i){if(null!=t)return;const e=Bt((()=>t=qt(t)));t=Ot((async e=>{try{await ie(this.spatialReferenceWarningDelay,null,e)}catch{return}finally{t=null}l.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.handles.add(e,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")}),{sync:!0})])}destroy(){this.destroyed||(_o.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=dt(this.graphics),this.analyses=dt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),dt(this.analysisViewManager),this.toolViewManager=dt(this.toolViewManager),this.layerViewManager=dt(this.layerViewManager),this.basemapView=dt(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach((t=>t.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=dt(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return l.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ro({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||x.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t?.destroyed&&(l.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),x.isLoadable(t)&&t.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&this.defaultsFromMap?.required?.heightModelInfo&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Yt(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return null!=t?t:this._cursor||"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){return this.layerViewManager?.whenLayerView(t)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(t){throw new u("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return null!=this.getSpatialReferenceSupport({spatialReference:t})}when(t,e){return this.isResolved()&&!this.ready&&l.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Zt((()=>this.destroyed||!1===this.preconditionsReady),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};zo.views=new G,b([g()],zo.prototype,"_userSpatialReference",void 0),b([g()],zo.prototype,"activeTool",null),b([g({readOnly:!0})],zo.prototype,"allLayerViews",void 0),b([g()],zo.prototype,"groundView",void 0),b([g()],zo.prototype,"animation",null),b([g()],zo.prototype,"basemapView",void 0),b([g()],zo.prototype,"center",null),b([g({readOnly:!0})],zo.prototype,"_defaultsFromMapSettings",null),b([g()],zo.prototype,"defaultsFromMap",null),b([g()],zo.prototype,"fatalError",void 0),b([g({type:Xt})],zo.prototype,"extent",null),b([g(sn(rn,"graphics"))],zo.prototype,"graphics",void 0),b([g(sn(Fa,"analyses"))],zo.prototype,"analyses",void 0),b([g({readOnly:!0,type:_t})],zo.prototype,"heightModelInfo",null),b([g({readOnly:!0})],zo.prototype,"interacting",null),b([g({readOnly:!0})],zo.prototype,"navigating",null),b([g({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],zo.prototype,"preconditionsReady",null),b([g({readOnly:!0})],zo.prototype,"typeSpecificPreconditionsReady",void 0),b([g({type:G,readOnly:!0})],zo.prototype,"layerViews",void 0),b([g()],zo.prototype,"resolution",null),b([g({type:_a})],zo.prototype,"magnifier",void 0),b([g({value:null,type:Vs})],zo.prototype,"map",null),b([g()],zo.prototype,"padding",void 0),b([g({readOnly:!0})],zo.prototype,"ready",void 0),b([g({type:Qt})],zo.prototype,"spatialReference",null),b([g()],zo.prototype,"spatialReferenceWarningDelay",void 0),b([g()],zo.prototype,"stationary",null),b([g({readOnly:!0})],zo.prototype,"supportsGround",void 0),b([g({type:te})],zo.prototype,"timeExtent",void 0),b([g({type:Jt,nonNullable:!0})],zo.prototype,"timeReference",void 0),b([g()],zo.prototype,"tools",null),b([g()],zo.prototype,"toolViewManager",void 0),b([g({readOnly:!0})],zo.prototype,"type",void 0),b([g({type:Number})],zo.prototype,"scale",void 0),b([g({readOnly:!0})],zo.prototype,"updating",void 0),b([g({readOnly:!0})],zo.prototype,"initialExtentRequired",void 0),b([g({readOnly:!0})],zo.prototype,"initialExtent",null),b([g()],zo.prototype,"cursor",null),b([g({readOnly:!0})],zo.prototype,"input",void 0),b([g({type:Oo,nonNullable:!0})],zo.prototype,"navigation",void 0),b([g()],zo.prototype,"layerViewManager",void 0),b([g()],zo.prototype,"analysisViewManager",void 0),b([g()],zo.prototype,"width",void 0),b([g()],zo.prototype,"height",void 0),b([g({readOnly:!0})],zo.prototype,"resizing",void 0),b([g({value:null,readOnly:!0})],zo.prototype,"size",null),b([g({readOnly:!0})],zo.prototype,"suspended",void 0),b([g({readOnly:!0})],zo.prototype,"viewEvents",void 0),b([g({readOnly:!0})],zo.prototype,"persistableViewModels",void 0),b([g()],zo.prototype,"_isValid",void 0),b([g()],zo.prototype,"_readyCycleForced",void 0),b([g()],zo.prototype,"_currentSpatialReference",void 0),zo=_o=b([y("esri.views.View")],zo);const Vo=zo;function Go(t){return t.layerViews}let $o=class extends ne{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Mt(),this.addResolvingPromise(this._resolver.promise)}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._resolver?.reject(new u("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._resolver?.resolve())}update(t,e){e||(e=re(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",e)}};b([g({readOnly:!0})],$o.prototype,"done",null),b([g({readOnly:!0,type:String})],$o.prototype,"state",void 0),b([g()],$o.prototype,"target",void 0),$o=b([y("esri.views.ViewAnimation")],$o),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}($o||($o={}));const Wo=$o;function qo(){return[1,0,0,1,0,0]}function Ho(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Uo(t,e,i,n,r,s){return[t,e,i,n,r,s]}function Ko(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Ho,create:qo,createView:Ko,fromValues:Uo},Symbol.toStringTag,{value:"Module"}));const Jo=96,Yo=39.37,Zo=180/Math.PI;function Xo(t){return t.wkid?t:t.spatialReference||Qt.WGS84}function Qo(t,e){return e.type?cn(t,e.x,e.y):dn(t,e)}function tu(t){return ae(t)}function eu(t,e){const i=Math.max(1,e[0]),n=Math.max(1,e[1]);return Math.max(t.width/i,t.height/n)*pu(t.spatialReference)}async function iu(t,e,i,n){let r,s;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(G.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){const r=t.every((t=>"attributes"in t)),s=t.some((t=>!t.geometry));let a=t;if(r&&s&&e&&e.allLayerViews){const i=new Map;for(const e of t){const t=e.layer,n=i.get(t)||[],r=e.attributes[t.objectIdField];null!=r&&n.push(r),i.set(t,n)}const n=[];i.forEach(((t,i)=>{const r=e.allLayerViews.find((t=>t.layer.id===i.id));if(r&&"queryFeatures"in r){const e=i.createQuery();e.objectIds=t,e.returnGeometry=!0,n.push(r.queryFeatures(e))}}));const r=await Promise.all(n),s=[];for(const t of r)if(t&&t.features&&t.features.length)for(const e of t.features)null!=e.geometry&&s.push(e.geometry);a=s}for(const t of a)n=await iu(t,e,i,n);return n}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])r=new nt(t);else if(t instanceof oe)r=t;else if("geometry"in t)if(t.geometry)r=t.geometry;else if(t.layer){const i=t.layer,n=e.allLayerViews.find((t=>t.layer.id===i.id));if(n&&"queryFeatures"in n){const e=i.createQuery();e.objectIds=[t.attributes[i.objectIdField]],e.returnGeometry=!0;const s=await n.queryFeatures(e);r=s?.features?.[0]?.geometry}}if(null==r)return null;if(s="point"===r.type?new Xt({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference}):r.extent,!s)return null;Vt()||Gt(s.spatialReference,i)||await Wt();const a=$t(s,i);return a?n=n?n.union(a):a:null}function nu(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>"layer"in t))){let e=0,i=0;for(const n of t){const t=n.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,i=t.maxScale>i?t.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function ru(t,e){return Yt(Xo(t),e)?t:$t(t,e)}async function su(t,e){if(!t||!e)return new Us({targetGeometry:new nt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:r,viewpoint:s,size:a}=e,o=[r?a[0]-r.left-r.right:a[0],r?a[1]-r.top-r.bottom:a[1]];let u=null;t instanceof Us?u=t:t.viewpoint?u=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(u=t.target);let l=null;u&&u.targetGeometry?l=u.targetGeometry:t instanceof Xt?l=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(l=await iu(t.center,e,i)||await iu(t.extent,e,i)||await iu(t.target,e,i)||await iu(t,e,i)),!l&&s&&s.targetGeometry?l=s.targetGeometry:!l&&e.extent&&(l=e.extent),i||(i=Xo(e.spatialReference||e.extent||l)),Vt()||Yt(l.spatialReference,i)||Gt(l,i)||await Wt();const h=ru(l.center??l,i);let c=0;if(u&&null!=u.targetGeometry&&"point"===u.targetGeometry.type)c=u.scale;else if("scale"in t&&t.scale)c=t.scale;else if("zoom"in t&&-1!==t.zoom&&n&&n.effectiveLODs)c=n.zoomToScale(t.zoom);else if(Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height){const t=ru(e.extent,i);c=null!=t?eu(t,o):e.extent?eu(e.extent,o):s.scale}else c=eu(ru(l.extent,i),o);const d=nu(t);d&&(d.min&&d.min>c?c=d.min:d.max&&d.max<c&&(c=d.max));let f=0;u?f=u.rotation:t.hasOwnProperty("rotation")?f=t.rotation:s&&(f=s.rotation);let m=new Us({targetGeometry:h,scale:c,rotation:f});return n&&(m=n.fit(m),n.constrainByGeometry(m),n.rotationEnabled||(m.rotation=f)),m}function au(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function ou(t,e,i){return i?cn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):hn(t,e,.5)}const uu=function(){const t=xn();return function(e,i,n){const r=i.targetGeometry;Qo(t,r);const s=.5*fu(i);return e.xmin=t[0]-s*n[0],e.ymin=t[1]-s*n[1],e.xmax=t[0]+s*n[0],e.ymax=t[1]+s*n[1],e.spatialReference=r.spatialReference,e}}();function lu(t,e,i,n,r){return Mu(t,e,i.center),t.scale=eu(i,n),r?.constraints?.constrain(t),t}function hu(t,e,i,n){return yu(t,e,i,n),fi(t,t)}const cu=function(){const t=xn();return function(e,i,n){return fn(e,bu(e,i),ou(t,i,n))}}(),du=function(){const t=qo(),e=xn();return function(i,n,r,s){const a=fu(n),o=vu(n);return cn(e,a,a),ci(t,e),ui(t,t,o),hi(t,t,cu(e,r,s)),hi(t,t,[0,s.top-s.bottom]),cn(i,t[4],t[5])}}();function fu(t){return t.scale*mu(t.targetGeometry)}function mu(t){return null!=t&&se(t.spatialReference)?1/(tu(t.spatialReference)*Yo*Jo):1}function vu(t){return ue(t.rotation)||0}function pu(t){return se(t)?tu(t)*Yo*Jo:1}function bu(t,e){return hn(t,e,.5)}const gu=function(){const t=xn(),e=xn(),i=xn();return function(n,r,s,a,o,u){return ln(t,r),hn(e,s,.5*u),cn(i,1/a*u,-1/a*u),oi(n,e),o&&ui(n,n,o),li(n,n,i),hi(n,n,t),n}}(),yu=function(){const t=xn();return function(e,i,n,r){const s=fu(i),a=vu(i);return Qo(t,i.targetGeometry),gu(e,t,n,s,a,r)}}(),wu=function(){const t=xn();return function(e,i,n,r){const s=fu(i);return Qo(t,i.targetGeometry),gu(e,t,n,s,0,r)}}();function Su(t){const e=le(t);return e?e.valid[1]-e.valid[0]:0}function xu(t,e){return Math.round(Su(t)/e)}const Cu=function(){const t=xn(),e=xn(),i=[0,0,0];return function(n,r,s){vn(t,n,r),pn(t,t),vn(e,n,s),pn(e,e),bn(i,t,e);let a=Math.acos(gn(t,e)/(yn(t)*yn(e)))*Zo;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}}(),Ou=function(){const t=xn();return function(e,i,n,r){const s=e.targetGeometry;return au(e,i),du(t,i,n,r),s.x+=t[0],s.y+=t[1],e}}(),Mu=function(t,e,i){au(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},Tu=function(){const t=xn();return function(e,i,n,r,s){s||(s="center"),fn(t,n,r),hn(t,t,.5);const a=t[0],o=t[1];switch(s){case"center":cn(t,0,0);break;case"left":cn(t,-a,0);break;case"top":cn(t,0,o);break;case"right":cn(t,a,0);break;case"bottom":cn(t,0,-o);break;case"top-left":cn(t,-a,o);break;case"bottom-left":cn(t,-a,-o);break;case"top-right":cn(t,a,o);break;case"bottom-right":cn(t,a,-o)}return Eu(e,i,t),e}}();function ku(t,e,i){return au(t,e),t.rotation+=i,t}function Iu(t,e,i){return au(t,e),t.rotation=i,t}const Au=function(){const t=xn();return function(e,i,n,r,s){return au(e,i),isNaN(n)||0===n||(Pu(t,r,i,s),e.scale=i.scale*n,Lu(t,t,e,s),Eu(e,e,cn(t,t[0]-r[0],r[1]-t[1]))),e}}();function ju(t,e,i){return au(t,e),t.scale=i,t}const Fu=function(){const t=xn();return function(e,i,n,r,s,a){return au(e,i),isNaN(n)||0===n||(Pu(t,s,i,a),e.scale=i.scale*n,e.rotation+=r,Lu(t,t,e,a),Eu(e,e,cn(t,t[0]-s[0],s[1]-t[1]))),e}}(),Du=function(){const t=xn(),e=xn();return function(i,n,r,s,a,o,u){return cu(e,o,u),wn(t,a,e),s?Fu(i,n,r,s,t,o):Au(i,n,r,t,o)}}(),Pu=function(){const t=qo();return function(e,i,n,r){return mn(e,i,hu(t,n,r,1))}}(),Lu=function(){const t=qo();return function(e,i,n,r){return mn(e,i,yu(t,n,r,1))}}(),Eu=function(){const t=xn(),e=qo();return function(i,n,r){au(i,n);const s=fu(n),a=i.targetGeometry;return di(e,vu(n)),li(e,e,Cn(s,s)),mn(t,r,e),a.x+=t[0],a.y+=t[1],i}}();class Nu{constructor(t,e,i,n){const r=t.targetGeometry,s=e.targetGeometry;n?"string"==typeof n&&(n=un(n)||on.ease):n=on.ease,this.easing=n,this.duration=i,this.sCenterX=r.x,this.sCenterY=r.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=s.x,this.tCenterY=s.y,this.tScale=e.scale,this.tRotation=e.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,e){const i=this.easing(e);let n,r,s,a;e>=1?(n=this.tCenterX,r=this.tCenterY,s=this.tRotation,a=this.tScale):(n=this.sCenterX+i*this.dCenterX,r=this.sCenterY+i*this.dCenterY,s=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=r,t.scale=a,t.rotation=s}}let Ru=class extends tt{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=on.ease,this.view=null,this.viewpoint=new Us({targetGeometry:new nt,scale:0,rotation:0}),this._updateTask=vt({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=pt(this._updateTask)}animate(t,e,i){this.stop();const n=this.viewpoint;au(n,e),this.transition=new Nu(this.viewpoint,t.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const r=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,e){this.stop(),this.updateFunction=e,this.viewpoint=t;const i=new Wo({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const e=this.animation;if(e&&e.state!==Wo.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const t=this.transition,e=(performance.now()-this._startTime)/t.duration,i=e>=1;t.applyRatio(this.viewpoint,e),i&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};b([g()],Ru.prototype,"animation",void 0),b([g()],Ru.prototype,"duration",void 0),b([g()],Ru.prototype,"transition",void 0),b([g()],Ru.prototype,"easing",void 0),b([g()],Ru.prototype,"view",void 0),b([g()],Ru.prototype,"viewpoint",void 0),Ru=b([y("esri.views.2d.AnimationManager")],Ru);const Bu=Ru;class _u{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:t,graphicsView:e,labelManager:i,state:{id:n}}=this.view;t.forEach(this._updateLayerView,this),null!=i&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),null!=e&&(e.lastUpdateId!==n&&(e.viewChange(),e.lastUpdateId=n),e.updateRequested&&e.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ht((()=>t.stationary),(t=>{this.stationary=t,this.requestFrame()})),this._frameTaskHandle=vt(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const e=this.view.state,i=t.lastUpdateId;null!=i&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==e.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=e.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}}function zu(){return Promise.all([import("./p-1b9fea8f.js"),import("./p-aac7cecd.js")])}const Vu=()=>zu().then((()=>import("./p-4ea21f42.js"))),Gu=()=>zu().then((()=>import("./p-affd6ef9.js"))),$u={"base-dynamic":()=>zu().then((()=>import("./p-6dd6007b.js"))),"base-tile":Vu,"bing-maps":Vu,csv:Gu,"geo-rss":()=>zu().then((()=>import("./p-d0c28623.js"))),feature:Gu,geojson:Gu,graphics:()=>zu().then((()=>import("./p-3f78cf30.js"))),group:()=>zu().then((()=>import("./p-e2a84248.js"))),imagery:()=>zu().then((()=>import("./p-dc233ac3.js"))),"imagery-tile":()=>zu().then((()=>import("./p-c3cd925e.js"))),kml:()=>zu().then((()=>import("./p-07618a96.js"))),"knowledge-graph":()=>zu().then((()=>import("./p-fbca6dd8.js"))),"link-chart":()=>zu().then((()=>import("./p-fbca6dd8.js"))),"knowledge-graph-sublayer":Gu,"map-image":()=>zu().then((()=>import("./p-d63285cc.js"))),"map-notes":()=>zu().then((()=>import("./p-9f0df431.js"))),media:()=>zu().then((()=>import("./p-0b294e7a.js"))),"ogc-feature":()=>zu().then((()=>import("./p-c649e718.js"))),"open-street-map":Vu,"oriented-imagery":Gu,route:()=>zu().then((()=>import("./p-0611a037.js"))),stream:()=>zu().then((()=>import("./p-fca020a3.js"))),"subtype-group":()=>zu().then((()=>import("./p-48854c2c.js"))),tile:Vu,"vector-tile":()=>zu().then((()=>import("./p-816bedd1.js"))),video:()=>zu().then((()=>import("./p-848628ae.js"))),wcs:()=>zu().then((()=>import("./p-c3cd925e.js"))),"web-tile":Vu,wfs:Gu,wms:()=>zu().then((()=>import("./p-3d46c3bd.js"))),wmts:()=>zu().then((()=>import("./p-2cbe61dc.js"))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Wu(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new u(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const qu={hasLayerViewModule:t=>null!=$u[t.type],importLayerView:t=>{const e=$u[t.type];if(null==e)throw Wu(t);return e(t)}};function Hu(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let r=Number.POSITIVE_INFINITY,s=0,a=0;const o=[0,0],u="extent"===t.type?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const t of u)for(let e=0;e<t.length-1;e++){he(o,n,t,e);const i=Sn(n,o);i<r&&(r=i,s=o[0],a=o[1])}return{coordinate:new nt({x:s,y:a,spatialReference:i}),distance:r}}var Uu;let Ku=Uu=class extends(ce(tt)){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return $t(this.geometry,this.spatialReference)}catch(t){return l.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(null==this.normalizedGeometry)return t;const i=t.targetGeometry;if("extent"===this.normalizedGeometry.type?de(this.normalizedGeometry,i):fe(this.normalizedGeometry,i))return t;const{coordinate:n}=Hu(this.normalizedGeometry,i);return n?(t.targetGeometry=n,t):t}clone(){return new Uu({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};b([g({constructOnly:!0})],Ku.prototype,"geometry",void 0),b([g({readOnly:!0})],Ku.prototype,"normalizedGeometry",null),b([g({constructOnly:!0})],Ku.prototype,"spatialReference",void 0),Ku=Uu=b([y("esri.views.2d.constraints.GeometryConstraint")],Ku);var Ju;let Yu=Ju=class extends(ce(tt)){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e?(this.rotationEnabled||(t.rotation=e.rotation),t):t}clone(){return new Ju({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b([g()],Yu.prototype,"enabled",void 0),b([g()],Yu.prototype,"rotationEnabled",void 0),Yu=Ju=b([y("esri.views.2d.constraints.RotationConstraint")],Yu);const Zu=Yu;var Xu;let Qu=Xu=class extends(ce(tt)){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:r,maxZoom:s}=this,a=-1,o=-1,u=!1,l=!1;if(0!==i&&0!==n&&i<n&&([i,n]=[n,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map((t=>t.clone())),e.sort(((t,e)=>e.scale-t.scale)),e.forEach(((t,e)=>t.level=e));for(const r of e)!u&&i>0&&i>=r.scale&&(a=r.level,u=!0),!l&&n>0&&n>=r.scale&&(o=t?t.level:-1,l=!0),t=r;-1===r&&(r=0===i?0:a),-1===s&&(s=0===n?e.length-1:o),r=Math.max(r,0),r=Math.min(r,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),r>s&&([r,s]=[s,r]),i=e[r].scale,n=e[s].scale,e.splice(0,r),e.splice(s-r+1,e.length),e.forEach(((t,e)=>{this._lodByScale[t.scale]=t,this._scales[e]=t.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",r),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,r=t.targetGeometry,s=e&&e.targetGeometry,a=0!==n&&t.scale<n,o=0!==i&&t.scale>i;if(a||o){const a=o?i:n;if(e&&s){const i=(a-e.scale)/(t.scale-e.scale);r.x=s.x+(r.x-s.x)*i,r.y=s.y+(r.y-s.y)*i}t.scale=a}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),n=Math.round(t);return e[n]+(n-t)*(e[i]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let r=0;r<e.length-1;r++){if(i=e[r],n=e[r+1],n===t){return r+this.effectiveMinZoom+1}if(i>t&&n<t){return r+this.effectiveMinZoom+1-(t-n)/(i-n)}}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new Xu({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};b([g({readOnly:!0})],Qu.prototype,"effectiveLODs",void 0),b([g({readOnly:!0})],Qu.prototype,"effectiveMinZoom",void 0),b([g({readOnly:!0})],Qu.prototype,"effectiveMaxZoom",void 0),b([g({readOnly:!0})],Qu.prototype,"effectiveMinScale",void 0),b([g({readOnly:!0})],Qu.prototype,"effectiveMaxScale",void 0),b([g()],Qu.prototype,"lods",void 0),b([g()],Qu.prototype,"minZoom",void 0),b([g()],Qu.prototype,"maxZoom",void 0),b([g()],Qu.prototype,"minScale",void 0),b([g()],Qu.prototype,"maxScale",void 0),b([g()],Qu.prototype,"snapToZoom",void 0),Qu=Xu=b([y("esri.views.2d.constraints.ZoomConstraint")],Qu);const tl=Qu;const el={base:null,key:"type",typeMap:{extent:Xt,polygon:me}};let il=class extends tt{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new G}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new Ku({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Zu({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),e=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,n=this.maxZoom,r=this.minScale,s=this.maxScale,a=this.snapToZoom;return t&&t.lods===e&&t.minZoom===i&&t.maxZoom===n&&t.minScale===r&&t.maxScale===s&&t.snapToZoom===a?t:new tl({lods:e,minZoom:i,maxZoom:n,minScale:r,maxScale:s,snapToZoom:a})}canZoomInTo(t){const e=this.effectiveMaxScale;return 0===e||t>=e}canZoomOutTo(t){const e=this.effectiveMinScale;return 0===e||t<=e}constrain(t,e){return this._zoom.constrain(t,e),this._rotation.constrain(t,e),this._geometry.constrain(t,e),this.customConstraints.forEach((i=>i.constrain(t,e))),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};b([g({readOnly:!0})],il.prototype,"effectiveLODs",null),b([g({readOnly:!0})],il.prototype,"effectiveMinScale",null),b([g({readOnly:!0})],il.prototype,"effectiveMaxScale",null),b([g({readOnly:!0})],il.prototype,"effectiveMinZoom",null),b([g({readOnly:!0})],il.prototype,"effectiveMaxZoom",null),b([g({types:el,value:null})],il.prototype,"geometry",null),b([g({type:[Zi]})],il.prototype,"lods",void 0),b([g()],il.prototype,"minScale",void 0),b([g()],il.prototype,"maxScale",void 0),b([g()],il.prototype,"minZoom",void 0),b([g()],il.prototype,"maxZoom",void 0),b([g()],il.prototype,"rotationEnabled",void 0),b([g()],il.prototype,"snapToZoom",void 0),b([g({type:G})],il.prototype,"customConstraints",void 0),b([g()],il.prototype,"view",void 0),b([g({readOnly:!0})],il.prototype,"version",null),b([g({type:Ku,readOnly:!0})],il.prototype,"_geometry",null),b([g({type:Zu})],il.prototype,"_rotation",null),b([g({readOnly:!0,type:tl})],il.prototype,"_zoom",null),il=b([y("esri.views.2d.MapViewConstraints")],il);const nl=il;function rl(t){return t instanceof Float32Array&&t.length>=2}function sl(t){return Array.isArray(t)&&t.length>=2}function al(t){return rl(t)||sl(t)}var ol;const ul=[0,0];let ll=ol=class extends w{constructor(t){super(t),this._viewpoint2D={center:xn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Xt,this.id=0,this.inverseTransform=qo(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=qo(),this.transformNoRotation=qo(),this.displayMat3=Fn(),this.displayViewMat3=Fn(),this.viewMat3=Fn(),this.viewMat2d=mi(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=au(i,t.viewpoint),this._set("size",dn(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new ol({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return al(e)?mn(t,e,this.inverseTransform):(ul[0]=e,ul[1]=i,mn(t,ul,this.inverseTransform))}toScreen(t,e,i){return al(e)?mn(t,e,this.transform):(ul[0]=e,ul[1]=i,mn(t,ul,this.transform))}toScreenNoRotation(t,e,i){return al(e)?mn(t,e,this.transformNoRotation):(ul[0]=e,ul[1]=i,mn(t,ul,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,r=this._get("size");return gu(t,i,r,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size"),a=new Us({targetGeometry:new nt(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",a),!s||!e||!i)return;this.resolution=fu(a),this.rotation=n,this.scale=i,this.spatialReference=e,dn(this.center,t);const o=0!==s[0]?2/s[0]:0,u=0!==s[1]?-2/s[1]:0;Tn(this.displayMat3,o,0,0,0,u,0,-1,1,1);const l=kn(this.viewMat3),h=Dn(s[0]/2,s[1]/2),c=Dn(-s[0]/2,-s[1]/2),d=ue(n);In(l,l,h),An(l,l,d),In(l,l,c),jn(this.displayViewMat3,this.displayMat3,l);const f=oi(this.viewMat2d,h);return ui(f,f,d),hi(f,f,c),uu(this.extent,a,s),yu(this.transform,a,s,r),fi(this.inverseTransform,this.transform),wu(this.transformNoRotation,a,s,r),this.worldScreenWidth=xu(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};b([g({readOnly:!0})],ll.prototype,"id",void 0),b([g({value:1,json:{write:!0}})],ll.prototype,"pixelRatio",null),b([g({json:{write:!0}})],ll.prototype,"size",null),b([g()],ll.prototype,"spatialReference",void 0),b([g({type:Us,json:{write:!0}})],ll.prototype,"viewpoint",null),ll=ol=b([y("esri.views.2d.ViewState")],ll);const hl=ll;var cl,dl;let fl=cl=class extends tt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new cl({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b([g()],fl.prototype,"left",void 0),b([g()],fl.prototype,"top",void 0),b([g()],fl.prototype,"right",void 0),b([g()],fl.prototype,"bottom",void 0),fl=cl=b([y("esri.views.2d.PaddedViewState.Padding")],fl);let ml=dl=class extends hl{constructor(...t){super(...t),this.paddedViewState=new hl,this._updateContent=(()=>{const t=xn();return()=>{const e=this._get("size"),i=this._get("padding");if(!e||!i)return;const n=this.paddedViewState;cn(t,i.left+i.right,i.top+i.bottom),vn(t,e,t),dn(n.size,t);const r=n.viewpoint;r&&(this.viewpoint=r)}})(),this.addHandles(ht((()=>[this.size,this.padding]),(()=>this._updateContent()),ee)),this.padding=new fl,this.size=[0,0]}set padding(t){this._set("padding",t||new fl)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,Ou(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,n=e.targetGeometry;i.center[0]=n.x,i.center[1]=n.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=n.spatialReference,this._update()}}clone(){return new dl({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b([g()],ml.prototype,"paddedViewState",void 0),b([g({type:fl})],ml.prototype,"padding",null),b([g()],ml.prototype,"viewpoint",null),ml=dl=b([y("esri.views.2d.PaddedViewState")],ml);const vl=ml;let pl=class extends tt{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ht((()=>this.constraints?.version),(t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),ee)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return this.state.commitProperty("id"),new nt({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this.ready)return void this._set("center",t);let e;try{e=this._project(t,this.state.spatialReference)}catch(e){return void l.getLogger(this).error(new u("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:e}))}const i=this.viewpoint;Mu(i,i,e),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(null==t)return;if(!t.width||!t.height)return void l.getLogger(this).error(new u("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let e;try{e=this._project(t,this.state.spatialReference)}catch(t){return void l.getLogger(this).error(new u("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:t}))}const i=this.viewpoint;lu(i,i,e,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;Iu(e,e,t),this.viewpoint=e}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const e=this._get("extent");return void(e&&(this._set("extent",void 0),this._set("center",e.center)))}const e=this.viewpoint;ju(e,e,t),this.viewpoint=e}get viewpoint(){if(!this.ready)return this._get("viewpoint");return this.state.paddedViewState.viewpoint.clone()}set viewpoint(t){if(null==t)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let e,i;try{e=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new u("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):null==t.targetGeometry&&(i=new u("mapview:invalid-viewpoint","geometry not defined"))}catch(t){i=new u("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:t})}if(i)return void l.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new Us({targetGeometry:new nt,scale:0,rotation:0});au(n,e),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const e=this._get("extent");return void(e&&(this._set("extent",void 0),this._set("center",e.center)))}const e=this.constraints?.zoomToScale(t)??0;if(!e)return void this._set("zoom",-1);const i=this.viewpoint;ju(i,i,e),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:e,constraints:i}=this,n=this._get("center"),r=this._get("extent"),s=this._get("scale"),a=this._get("rotation"),o=this._get("viewpoint"),u=this._get("zoom"),l=null!=u&&null!=i&&i.zoomToScale(u)||void 0;let h,c,d;const f=o?.rotation,m=o?.targetGeometry;"extent"===m?.type?h=m:"point"===m?.type&&(c=m,d=o?.scale);const v=r??h;return{center:n??c??v?.center,rotation:a??f,scale:(s??l??d??(v&&eu(v,[t[0]-e.left-e.right,t[1]-e.top-e.bottom])))||void 0}}startup(t,e,i,n){const r=t.targetGeometry;try{this._project(t,i)}catch(e){l.getLogger(this).warn(new ve("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:r.toJSON(),spatialReference:i,error:e})),t.targetGeometry=n||new nt({x:0,y:0,spatialReference:i})}this.constraints?.fit(t),this._set("state",new vl({padding:this.padding,size:e,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,e],spatialReference:i,rotation:n,scale:r}=this.state.paddedViewState,s=new nt({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",n),this._set("scale",r),this._set("state",null)}changeSpatialReference(t){const e=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=e.scale;else{const t=e.viewpoint.clone();t.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=t}const i=e.clone(),[n,r]=e.center;let s=null;try{s=this._project(new nt({x:n,y:r,spatialReference:e.spatialReference}),t)}catch(e){pe()||l.getLogger(this).warn(new ve("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:t,error:e}))}s||(s=new nt({x:0,y:0,spatialReference:t}));const o=Mu(new Us({targetGeometry:new nt,scale:0,rotation:0}),e.viewpoint,s);i.viewpoint=o;try{const n=20,r=[e.size[0]/2,e.size[1]/2],s=[r[0]+n,r[1]],u=e.toMap([0,0],s),{x:l,y:h}=this._project(new nt({x:u[0],y:u[1],spatialReference:e.spatialReference}),t);u[0]=l,u[1]=h,i.toScreen(u,u);const c=Cu(r,u,s),d=Math.hypot(u[0]-r[0],u[1]-r[1])/n;!Number.isFinite(d)||Math.abs(d)>4?(o.rotation=0,o.targetGeometry=new nt({x:0,y:0,spatialReference:t})):(o.scale*=d,o.scale>a("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(c)?c:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(t,e){if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();i.size=[t,e],Tu(n,n,r,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints?.constrain(n,void 0)??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const e=[0,0],[i,n]=this.state.toMap(e,[t.x,t.y]),r=this.state.spatialReference;return new nt({x:i,y:n,spatialReference:r})}toScreen(t){if(!this.ready)return null;const e=this._project(t,this.state.spatialReference),i=[e.x,e.y];return this.state.toScreen(i,i),Dt(i[0],i[1])}_project(t,e){const i=t&&t.targetGeometry||t;if(!e)return t;if(!i)return null;if(e.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem)return t;if(Yt(e,i.spatialReference))return t;const n=$t(i,e);if(!n)throw new u("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:e});return bl(t)?(t.targetGeometry=n,t):n}};function bl(t){return"esri.Viewpoint"===t?.declaredClass}b([g({type:nt})],pl.prototype,"center",null),b([g()],pl.prototype,"constraints",void 0),b([g({type:Xt})],pl.prototype,"extent",null),b([g({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],pl.prototype,"padding",null),b([g()],pl.prototype,"ready",void 0),b([g()],pl.prototype,"resizeAlign",void 0),b([g({readOnly:!0})],pl.prototype,"resolution",null),b([g({type:Number})],pl.prototype,"rotation",null),b([g({type:Number})],pl.prototype,"scale",null),b([g({readOnly:!0})],pl.prototype,"state",void 0),b([g({type:Us})],pl.prototype,"viewpoint",null),b([g()],pl.prototype,"zoom",null),pl=b([y("esri.views.2d.ViewStateManager")],pl);function gl(t,e){switch(e){case"primary":return"touch"===t.pointerType||0===t.button;case"secondary":return"touch"!==t.pointerType&&2===t.button;case"tertiary":return"touch"!==t.pointerType&&1===t.button}}class yl extends ba{constructor(t,e){super(!0),this._view=t,this.registerIncoming("double-click",e,(t=>this._handleDoubleClick(t,e)))}_handleDoubleClick(t,e){gl(t.data,"primary")&&(t.stopPropagation(),e?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class wl extends ba{constructor(t,e,i){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",i,(t=>this._handleDoubleTapDrag(t)))}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:i}=e;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:r}=e,{view:s}=this,{mapViewNavigation:a}=s;switch(n){case"begin":{const{scale:t}=s;this._startScale=t,this._currentScale=t,this._previousDelta=r,a.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const t=1.015**r.y,e=this._startScale*t,i=e/this._currentScale;a.setViewpointImmediate(i),this._currentScale=e;break}case"end":{const{constraints:t}=s,{effectiveLODs:e,snapToZoom:i}=t;if(!i||!e)return void a.end();const n=t.snapScale(this._currentScale),o=(r.y>0?Math.max(n,t.snapToPreviousScale(this._startScale)):Math.min(n,t.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(o);break}}}}class Sl{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const e=t.data,i=e.pointers.size;switch(e.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class xl extends ba{constructor(t,e,i){super(!0),this.view=t,this.pointerAction=e,this.registerIncoming("drag",i,(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(t){super.onInstall(t),this._dragEventSeparator=new Sl({start:(t,e)=>{this.view.mapViewNavigation.pan.begin(this.view,e.data),e.stopPropagation()},update:(t,e)=>{this.view.mapViewNavigation.pan.update(this.view,e.data),e.stopPropagation()},end:(t,e)=>{this.view.mapViewNavigation.pan.end(this.view,e.data),e.stopPropagation()},condition:(t,e)=>1===t&&gl(e.data,this.pointerAction)})}_handleDrag(t){const e=this.view.mapViewNavigation;e.pinch.zoomMomentum||e.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Cl extends ba{constructor(t,e,i){super(!0),this._view=t,this.pointerAction=e;const n=this._view.mapViewNavigation;this._dragEventSeparator=new Sl({start:(t,e)=>{n.rotate.begin(this._view,e.data),e.stopPropagation()},update:(t,e)=>{n.rotate.update(this._view,e.data),e.stopPropagation()},end:(t,e)=>{n.rotate.end(),e.stopPropagation()},condition:(t,e)=>1===t&&gl(e.data,this.pointerAction)}),this.registerIncoming("drag",i,(t=>this._dragEventSeparator.handle(t)))}}function Ol(t){let e=t*t;return t<0&&(e*=-1),e}function Ml(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Tl(t,e,i){const n=i,r=t.state,s=t.device,a="forward-down"===e.tiltDirection?1:-1,o=1;return"standard"===s.deviceType?(n.translation[0]=Ol(r.axes[0]),n.translation[1]=Ol(r.axes[1]),n.translation[2]=Ol(r.buttons[7])-Ol(r.buttons[6]),n.heading=Ol(r.axes[2]),n.tilt=Ol(r.axes[3])):"spacemouse"===s.deviceType&&(n.translation[0]=1.2*Ol(r.axes[0]),n.translation[1]=1.2*Ol(r.axes[1]),n.translation[2]=2*-Ol(r.axes[2]),n.heading=1.2*Ol(r.axes[5]),n.tilt=1.2*Ol(r.axes[3])),n.tilt*=a,be(n.translation,n.translation,o),n}function kl(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}class Il extends ba{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new lt,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(t=>this._handleGamePadEvent(t))),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ht((()=>this._view.navigation.gamepad?.enabled),(t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=vt({update:t=>this._frameUpdate(t.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),ct)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const e=this._view.navigation.gamepad.device;e&&t.data.device!==e||this._currentDevice&&this._currentDevice!==t.data.device||("end"===t.data.action?(this._currentDevice=null,Ml(this._transformation)):(this._currentDevice=t.data.device,Tl(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const e=this._transformation;if(kl(e))return;const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,r=jl*n*t;Eu(i,i,[e.translation[0]*r,-e.translation[1]*r]);const s=1+e.translation[2]*Fl*t,a=this._view.constraints.rotationEnabled?-e.heading*Al*t:0,o=this._view.size,u=[o[0]/2,o[1]];Fu(i,i,s,a,u,o);const l=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=l}}const Al=.06,jl=.7,Fl=6e-4;class Dl extends ba{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._pressed=!1,this._keyMap={[e.left]:"left",[e.right]:"right",[e.up]:"up",[e.down]:"down"},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),this.registerIncoming("key-up",i,(t=>this._handleKeyUp(t))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const i=this._keyMap[t.data.key];if(this._pressed=null!=i,this._pressed){if(e)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class Pl extends ba{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._pressed=!1,this._keyToDirection={[e.clockwiseOption1]:"clockwise",[e.clockwiseOption2]:"clockwise",[e.counterClockwiseOption1]:"counterClockwise",[e.counterClockwiseOption2]:"counterClockwise",[e.resetOption1]:"reset",[e.resetOption2]:"reset"},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),this.registerIncoming("key-up",i,(t=>this._handleKeyUp(t))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=null!=n,this._pressed){if(e)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var Ll;!function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"}(Ll||(Ll={}));class El extends ba{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._keysToZoomAction={},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),e.zoomIn.forEach((t=>this._keysToZoomAction[t]=Ll.IN)),e.zoomOut.forEach((t=>this._keysToZoomAction[t]=Ll.OUT))}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const e=t.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:r}=this.view;let s=null;switch(n){case Ll.IN:s=r.zoomIn();break;case Ll.OUT:s=r.zoomOut();break;default:return}r.begin(),s.then((()=>r.end())),t.stopPropagation()}}const Nl=.6;class Rl extends ba{constructor(t,e){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",e,(t=>this._handleMouseWheel(t)))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled)return;if(t.preventDefault(),t.stopPropagation(),!this._canZoom)return;const e=this._view.mapViewNavigation,{x:i,y:n,deltaY:r}=t.data,s=1/Nl**(1/60*r),a=e.zoom(s,[i,n]);a&&(this._canZoom=!1,a.catch((()=>{})).then((()=>{this._canZoom=!0,e.end()})))}}class Bl extends ba{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const e=this.view.mapViewNavigation;this._dragEventSeparator=new Sl({start:(t,i)=>{e.pinch.begin(this.view,i.data),i.stopPropagation()},update:(t,i)=>{e.pinch.update(this.view,i.data),i.stopPropagation()},end:(t,i)=>{e.pinch.end(this.view),i.stopPropagation()},condition:t=>t>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function _l(t){const e=t.native;return e?{buttons:e.buttons.map((t=>t.pressed?t.value||1:0)),axes:e.axes.map((e=>Gl(e,t.axisThreshold)))}:{buttons:[],axes:[]}}function zl(t,e){if(t.axes.length!==e.axes.length)return!1;if(t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Vl(t){for(let e=0;e<t.axes.length;e++)if(0!==t.axes[e])return!1;for(let e=0;e<t.buttons.length;e++)if(0!==t.buttons[e])return!1;return!0}function Gl(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}class $l{constructor(t,e){this._element=t,this._input=e,this._hasEventListeners=!1,this._onConnectGamepad=t=>{this._connectGamepad(t.gamepad)},this._onDisconnectGamepad=t=>{const e=t.gamepad,i=e.index,n=this._inputDevices[i];n&&(this._emitGamepadEvent(e,_l(n),!1),this._inputDevices.splice(i,1),this._latestUpdate.splice(i,1),this._input.gamepad.devices.remove(n),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this._forEachGamepad((t=>this._connectGamepad(t))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const e=new po(t);"unknown"!==e.deviceType&&(this._inputDevices[t.index]=e,this._input.gamepad.devices.add(e)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=vt({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),e=this._element.contains(document.activeElement),i="document"===this._input.gamepad.enabledFocusMode&&!t||"view"===this._input.gamepad.enabledFocusMode&&!e;this._forEachGamepad((t=>{const e=this._inputDevices[t.index];if(!e)return;const n=this._latestUpdate[t.index],r=_l(e),s=i||Vl(r);if(n){if(n.timestamp===t.timestamp)return;if(!n.active&&s)return;if(zl(n.state,r))return}this._emitGamepadEvent(t,r,!s)}))}_forEachGamepad(t){const e=window.navigator.getGamepads();for(let i=0;i<e.length;i++){const n=e[i];this._validate(n)&&t(n)}}_emitGamepadEvent(t,e,i){const n=this._latestUpdate[t.index],r=n&&n.active;if(!r&&!i)return;const s=!r&&i?"start":r&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:e,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:e,action:s})}_validate(t){if(!t)return!1;if(!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}}const Wl=a("edge"),ql=a("chrome"),Hl=a("ff"),Ul=a("safari"),Kl="esri-view-surface",Jl={touchNone:`${Kl}--touch-none`,touchPan:`${Kl}--touch-pan`};class Yl{constructor(t,e){this._input=e,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new $l(t,this._input),this._gamepadSource.onEvent=t=>this._callback("gamepad",t)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((t=>{this._releasePointerCaptureSafe(t)})),this._gamepadSource=dt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const e in this._active)if(!t||!t.has(e)){const t=this._active[e];this._element.removeEventListener(Zl[e],t),delete this._active[e]}t&&t.forEach((t=>{if(!this._active[t]&&Zl[t]){const e=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(Zl[t],e),this._active[t]=e}})),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,e){e?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Jl.touchNone:Jl.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Jl.touchPan:Jl.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Jl.touchNone),this._element.classList.remove(Jl.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch(t){}}_updateNormalizedPointerLikeEvent(t,e){const i=eo(this._element,t);return Yl.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),e.x=i.x,e.y=i.y,e}_handleKey(t,e){const i=fa(e);i&&"key-up"===t&&this._keyDownState.delete(i);const n={native:e,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&"key-down"===t&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,e){const i=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,e){const i=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});e.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,e){let i=e.deltaY;switch(e.deltaMode){case 0:Wl&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Wl?i*=.7:ql||Ul?i*=.6:Hl&&(i*=1.375);const n=100,r=Math.abs(i);if(r>n){const t=.02;i=i/r*200/(1+Math.exp(-t*(r-n)))}const s=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:i});this._callback(t,s)}_handlePointerCaptureLost(t,e){this._activePointerCaptures.delete(e.pointerId),this._handleDefault(t,e)}_handleDefault(t,e){const i={native:e};e.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){"Alt"===t.key&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}Yl.test={disableSubpixelCoordinates:!1};const Zl={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Xl extends ba{constructor(){super(!0),this.registerIncoming("context-menu",(t=>{t.data.native.preventDefault()}))}}function Ql(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function th(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function eh(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Dt()},0===t.length)return e;if(1===t.length)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(2===t.length){const[i,n]=t,[r,s]=[n.x-i.x,n.y-i.y];return e.radius=Math.sqrt(r*r+s*s)/2,e.center.x=(i.x+n.x)/2,e.center.y=(i.y+n.y)/2,e}let i=0,n=0;for(let e=0;e<t.length;e++)i+=t[e].x,n+=t[e].y;i/=t.length,n/=t.length;const r=t.map((t=>t.x-i)),s=t.map((t=>t.y-n));let a=0,o=0,u=0,l=0,h=0,c=0,d=0;for(let t=0;t<r.length;t++){const e=r[t],i=s[t],n=e*e,f=i*i;a+=n,o+=f,u+=e*i,l+=n*e,h+=f*i,c+=e*f,d+=i*n}const f=.5*(l+c),m=.5*(h+d),v=a*o-u*u,p=(f*o-m*u)/v,b=(a*m-u*f)/v,g=Dt(p+i,b+n);return{radius:Math.sqrt(p*p+b*b+(a+o)/t.length),center:g}}function ih(t){const{native:e}=t,{pointerId:i,button:n,pointerType:r}=e;return"mouse"===r?`${i}:${n}`:`${r}`}const nh={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class rh extends ba{constructor(t=nh.maximumDoubleClickDelay,e=nh.maximumDoubleClickDistance,i=nh.maximumDoubleTouchDelay,n=nh.maximumDoubleTouchDistance,r=Rt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=e,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach((t=>t.doubleClickTimer=pt(t.doubleClickTimer)))}get hasPendingInputs(){return jt(this._pointerState,(t=>null!=t.doubleClickTimer))}_clearDoubleClickTimer(t,e){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=pt(i.doubleClickTimer),e&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const e=this._pointerState.get(t);1===e.pointerDownCount&&this._click.emit(e.event.data,void 0,e.event.modifiers),e.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:e,pointerType:i,button:n}=t.native;return"mouse"===i?`${e}:${n}`:`${i}`}_handleImmediateClick(t){const e=t.data,{pointerType:i}=e.native,n=this._getPointerId(e);if(!this._pointerState.has(n))return void this._startClick(t);const r=this._pointerState.get(n),{data:s,modifiers:a}=r.event,o="touch"===i?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Ql(s,e)>o?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),2===r.pointerDownCount&&this._doubleClick.emit(s,void 0,a))}_handlePointerDown(t){const e=ih(t.data),i=this._pointerState.get(e);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:e}=t,{native:{pointerType:i}}=e,n=ih(e),r="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(n)),r),a=1;this._pointerState.set(n,{event:t,doubleClickTimer:s,pointerDownCount:a}),this.refreshHasPendingInputs()}}class sh extends ba{constructor(t=nh.maximumDoubleClickDelay,e=nh.maximumDoubleClickDistance,i=nh.maximumDoubleTouchDelay,n=nh.maximumDoubleTouchDistance,r=Rt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=e,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Dt(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Sl({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",(t=>this._dragEventSeparator.handle(t))),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((t=>{t.doubleTapTimeout=pt(t.doubleTapTimeout)}))}get hasPendingInputs(){return jt(this._pointerState,(t=>null!=t.doubleTapTimeout))}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout=pt(e.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,e,i){const{button:n,buttons:r,pointer:s,pointers:a,pointerType:o,timestamp:u}=i;return{action:t,delta:e,button:n,buttons:r,pointer:s,pointers:a,pointerType:o,timestamp:u}}_dragStart(t,e){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=e,{center:r}=i;this._dragStartCenter=r;const s=this._createDoubleTapDragData("begin",Dt(0,0),i);this._doubleTapDrag.emit(s,void 0,n),e.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:n}=e,r=Dt(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("update",r,e);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:n}=e,r=Dt(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("end",r,e);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:e}=t,i=ih(e),n=this._pointerState.get(i),{pointerType:r}=e.native;if(n){const s="touch"===r?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),Ql(n.event.data,e)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,n=ih(e),r="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout((()=>this._clearPointerDown(n)),r);this._pointerState.set(n,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}}class ah extends ba{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,e,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:e.buttons,timestamp:n,pointers:lh(this._activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const e=t.native.pointerId,i=uh(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(e,n);const r=hh(n,oh(this._activePointerMap));n.initialAngle=r,n.lastAngle=r,this._updatePointerAngles(i)}_updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this._activePointerMap.get(e);i?i.event=t:this._addPointer(t)}_removePointer(t){const e=uh(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(e)}_updatePointerAngles(t){const e=uh(this._activePointerMap);this._activePointerMap.forEach((i=>{i.initialAngle=hh(i,e)-t,i.lastAngle=hh(i,e)-t}))}_emitEvent(t,e,i){const n=uh(this._activePointerMap);this._drag.emit(this._createPayload(t,e,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const e=t.data.native.pointerId,i=ge(t.timestamp);this._activePointerMap.get(e)&&(1===this._activePointerMap.size?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(e)):(this._removePointer(e),this._emitEvent("removed",t.data,ge(t.timestamp))))}_handlePointerDrag(t){const e=t.data,i=e.currentEvent,n=ge(t.timestamp);switch(e.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}function oh(t){const e=[];return t.forEach((t=>{e.push(Dt(t.event.x,t.event.y))})),eh(e)}function uh(t){const e=oh(t);let i=0;return t.forEach((t=>{let n=hh(t,e),r=n-t.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;n=t.lastAngle+r,t.lastAngle=n;const s=n-t.initialAngle;i+=s})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function lh(t){const e=new Map;return t.forEach(((t,i)=>e.set(i,t.event))),e}function hh(t,e){const i=t.event,n=i.x-e.center.x,r=i.y-e.center.y;return Math.atan2(r,n)}var ch;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"}(ch||(ch={}));class dh extends ba{constructor(t=nh.maximumDoubleClickDelay,e=nh.maximumDoubleClickDistance,i=nh.maximumDoubleTouchDelay,n=nh.maximumDoubleTouchDistance,r=Rt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=e,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=ih(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native)}}_handlePointerUp(t){const e=t.data,i=ih(e),n=this._pointerState.get(i);if(n&&n.downButton===e.native.button){const i=n.immediateDoubleClick;if(i){i.timeoutHandle.remove();const r="touch"===t.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Ql(i,t.data)>r?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,i.modifiers),this._removeState(e))}else this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_removeState(t){const e=ih(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const fh={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class mh extends ba{constructor(t=fh.maximumClickDelay,e=fh.movementUntilMouseDrag,i=fh.movementUntilPenDrag,n=fh.movementUntilTouchDrag,r=fh.holdDelay,s=Rt){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=e,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=r,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel")})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((t=>{t.holdTimeout=pt(t.holdTimeout)})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0}e.holdTimeout=null}}),this._holdDelay));const r={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,r),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}_handlePointerMove(t){const e=t.data,i=e.native.pointerId,n=this._pointerState.get(i);if(n){if(n.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",n,e),void 0,n.modifiers);else{th(e,n.startEvent)>this._getDragThreshold(e.native.pointerType)&&this._startDragging(t)}n.previousEvent=e}}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,e)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))}))}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,r=this._pointerState.get(n);if(r){if(null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging)this._pointerDrag.emit(this._createPointerDragData("end",r,"pointer-up"===e?i:r.previousEvent),void 0,r.modifiers);else if("pointer-up"===e&&r.downButton===i.native.button){t.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(i)}this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause()}}}const vh={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let ph=class extends tt{constructor(){super(...arguments),this._handles=new lt}initialize(){const t=()=>this.view?.ready;this._handles.add([Zt((()=>!t()),(()=>this._disconnect())),Zt(t,(()=>this._connect()))])}destroy(){this._handles=dt(this._handles),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=dt(this._inputManager)}_connect(){const t=this.view.surface,e=new Yl(t,this.view.input),i=[new dh,new mh,new rh,new ah(this.view.navigation),new sh],n=new xa({eventSource:e,recognizers:i});n.installHandlers("prevent-context-menu",[new Xl],Ma.INTERNAL),n.installHandlers("navigation",[new Bl(this.view),new Il(this.view),new Rl(this.view),new yl(this.view),new yl(this.view,[vh.counter]),new xl(this.view,"primary"),new Dl(this.view,vh.pan),new El(this.view,vh.zoom),new Pl(this.view,vh.rotate),new Cl(this.view,"secondary"),new wl(this.view,"touch")],Ma.INTERNAL),this.view.viewEvents.connect(n),this._source=e,this._inputManager=n,ht((()=>this.view?.navigation?.browserTouchPanEnabled),(t=>{this._source&&(this._source.browserTouchPanningEnabled=!t)}),ct)}get test(){return{inputManager:this._inputManager}}};b([g()],ph.prototype,"view",void 0),b([g()],ph.prototype,"latestPointerType",null),b([g()],ph.prototype,"latestPointerLocation",null),b([g()],ph.prototype,"multiTouchActive",null),ph=b([y("esri.views.2d.input.MapViewInputManager")],ph);const bh=ph;let gh=class extends tt{constructor(){super(...arguments),this.color=new Y([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};b([g({type:Y})],gh.prototype,"color",void 0),b([g({type:Y})],gh.prototype,"haloColor",void 0),b([g()],gh.prototype,"haloOpacity",void 0),b([g()],gh.prototype,"fillOpacity",void 0),gh=b([y("esri.views.2d.support.HighlightOptions")],gh);const yh=gh;const wh=t=>t.includes("Brush");class Sh{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),wh(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function xh(t,e,i,n,r,s,a,o){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let u=null;null!=t.width&&null!=t.height?u=[t.width,t.height]:null==t.width&&null!=t.height?u=[t.height,t.height]:null!=t.width&&null==t.height?u=[t.width,t.width]:null==t.width&&null==t.height&&(u=null);const l=i[0]-(n.left+n.right),h=i[1]-(n.top+n.bottom);let c,d,f=t.area||{x:0,y:0,width:l,height:h};if(u){const t=l/h,e=u[0]/u[1];if(e>t){const t=f.width/e;f={x:f.x,y:Math.round(f.y+(f.height-t)/2),width:f.width,height:Math.round(t)}}else{const t=f.height*e;f={x:Math.round(f.x+(f.width-t)/2),y:f.y,width:Math.round(t),height:f.height}}}else u=[f.width,f.height];u[0]>f.width?(c=Math.min(u[0]/f.width,e),d=u[0]/f.width/c):(c=1,d=u[0]/f.width);return{resolutionScale:c,cropArea:{x:Math.round((f.x+n.left)*c),y:Math.round((f.y+n.top)*c),width:Math.round(f.width*c),height:Math.round(f.height*c)},outputScale:d,format:r,quality:s,children:a,rotation:o}}function Ch(t,e,i){const{ctx:n,canvas:r}=Mh(t,i),s=n.getImageData(0,0,t.width,t.height),a=Ah(r,e);return Th(r),{dataUrl:a,data:s}}function Oh(t,e){const{ctx:i,canvas:n}=Mh(t,e),r=i.getImageData(0,0,t.width,t.height);return Th(n),r}function Mh(t,e){const i=kh();e.premultipliedAlpha&&Eh(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&Lh(n),{ctx:n,canvas:i}}function Th(t){t.width=0,t.height=0}function kh(){return null==Ih&&(Ih=document.createElement("canvas")),Ih}let Ih=null;function Ah(t,e){const i=Nh[e.format],n=e.quality/100;return t.toDataURL(i,n)}function jh(t,e){const i=Ph(t),n=_h[i];return{format:i,quality:at(null!=e?e:n,0,100)}}function Fh(t,e){return e/Math.max(t[0],t[1])}function Dh(t,e,i,n=0,r=0,s=t.width-n,a=t.height-r,o=!1){const{data:u}=t,{width:l,height:h,data:c}=e,d=s/l,f=a/h,m=Math.ceil(d/2),v=Math.ceil(f/2),p=t.width;for(let t=0;t<h;t++)for(let e=0;e<l;e++){const s=4*(e+(o?h-t-1:t)*l);let a=0,b=0,g=0,y=0,w=0,S=0;const x=(t+.5)*f;for(let s=Math.floor(t*f);s<(t+1)*f;s++){const t=Math.abs(x-(s+.5))/v,o=(e+.5)*d,l=t*t;for(let t=Math.floor(e*d);t<(e+1)*d;t++){const e=Math.abs(o-(t+.5))/m,h=Math.sqrt(l+e*e);if(h>=1)continue;let c=2*h*h*h-3*h*h+1;const d=4*(n+t+(r+s)*p);S+=c*u[d+3],b+=c,!i&&u[d+3]<255&&(c=c*u[d+3]/255),g+=c*u[d],y+=c*u[d+1],w+=c*u[d+2],a+=c}}c[s]=g/a,c[s+1]=y/a,c[s+2]=w/a,c[s+3]=S/b}return e}function Ph(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Bh}}function Lh(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Eh(t){const e=t.data,i=e.length;for(let t=0;t<i;t+=4){const i=e[t+3];if(255!==i&&i>0){const n=255/i;e[t]=e[t]*n,e[t+1]=e[t+1]*n,e[t+2]=e[t+2]*n}}}const Nh={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Rh=98,Bh="png",_h={png:100,jpg:Rh,jpeg:Rh};function zh(t){const e=Pn(t);if(!e.available)return new u("webgl:required","3d"===t?"WebGL2 is required but not supported.":"WebGL is required but not supported.",(new Error).stack);if("3d"===t&&e.majorPerformanceCaveat)return new u("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new u("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new u("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ln.WEBGL1){if(!e.supportsElementIndexUint)return new u("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new u("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new u("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Vh(t){return t&&"nodeType"in t}function Gh(t){return t&&"function"==typeof t.render}const $h={component:"esri-component"};let Wh=class extends tt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const e=this._get("node");t!==e&&(t&&t.classList.add($h.component),e&&e.classList.remove($h.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?"string"==typeof t||Vh(t)?(this._set("widget",null),Xe(t)):(Gh(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};b([g({dependsOn:[]})],Wh.prototype,"id",null),b([g()],Wh.prototype,"node",null),b([et("node")],Wh.prototype,"castNode",null),b([g({readOnly:!0})],Wh.prototype,"widget",void 0),Wh=b([y("esri.views.ui.Component")],Wh);const qh=Wh;const Hh="calcite-mode-";function Uh(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function Kh(){return Uh().startsWith("dark")}function Jh(){return`${Hh}${Kh()?"dark":"light"}`}function Yh(t){Zh(t),t.classList.add(Jh())}function Zh(t){Array.from(t.classList).forEach((e=>{e.startsWith(Hh)&&t.classList.remove(e)}))}const Xh={left:0,top:0,bottom:0,right:0},Qh={bottom:30,top:15,right:15,left:15},tc="esri-ui",ec={ui:tc,corner:`${tc}-corner`,innerContainer:`${tc}-inner-container`,manualContainer:`${tc}-manual-container`,cornerContainer:`${tc}-corner-container`,topLeft:`${tc}-top-left`,topRight:`${tc}-top-right`,bottomLeft:`${tc}-bottom-left`,bottomRight:`${tc}-bottom-right`};function ic(t){return t&&!t._started&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}function nc(t){return 0===t?"0":`${t}px`}function rc(t){const e="object"==typeof t&&null!==t&&Object.getPrototypeOf(t);return(null===e||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function sc(t,{top:e,bottom:i,left:n,right:r}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=r}let ac=class extends Q.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=ye(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&sc(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&sc(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ht((()=>[this.view?.padding,this.container]),this._applyViewPadding,ct),ht((()=>this.padding),this._applyUIPadding,ct),ht((()=>[this.container,this._locale]),(([t,e])=>{t&&t.setAttribute("lang",e)}),ct),we((t=>{this._locale=t}))])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const e=this._get("container");t!==e&&(t&&(t.classList.add(ec.ui),Yh(t),this._attachContainers(t)),e&&(e.classList.remove(ec.ui),sc(e,{top:"",bottom:"",left:"",right:""}),ti(e)),this._set("container",t))}get height(){const t=this.view?.height??0;if(0===t)return t;const e=this._getViewPadding(),{top:i,bottom:n}=e;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return"number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...Qh,...t}}get width(){const t=this.view?.width??0;if(0===t)return t;const e=this._getViewPadding(),{left:i,right:n}=e;return Math.max(t-i-n,0)}add(t,e){let i,n,r;if(Array.isArray(t))return void t.forEach((t=>this.add(t,e)));const s=rc(t);s&&({index:i,position:e,component:t,key:n}=s),e&&"object"==typeof e&&({index:i,key:n,position:e,internal:r}=e),!t||e&&!this._isValidPosition(e)||this._add(t,e,i,n,r)}remove(t,e){if(!t)return;if(Array.isArray(t))return t.map((t=>this.remove(t,e)));const i=this._find(t);if(i){if(this._componentMap.has(t)&&this._componentMap.get(t)?.key!==e)return;const n=this._components.indexOf(i),r=i.node.parentNode;return r?.removeChild(i.node),this._componentMap.delete(t),this._components.splice(n,1)[0]}}empty(t,e={removeInternal:!1}){if(Array.isArray(t)){for(const i of t)this.empty(i,e);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map((t=>this._findByNode(t))).filter((t=>{if(null==t)return!1;return!(this._componentMap.get(t)?.internal??!1)||e.removeInternal}));for(const t of n)this.remove(t)}move(t,e){if(Array.isArray(t)&&t.forEach((t=>this.move(t,e))),!t)return;let i;const n=rc(t)||rc(e);if(n&&(i=n.index,e=n.position,t=n.component||t),e&&!this._isValidPosition(e))return;const r=this.remove(t);r&&this.add(r,{position:e,index:i})}find(t){if(!t)return null;const e=this._findById(t);return e&&(e.widget||e.node)}getComponents(t,e={includeInternal:!1}){return t?Array.isArray(t)?t.map((t=>this._getComponentsAtPosition(t,e))).flat():this._getComponentsAtPosition(t,e):this._components.filter((t=>e.includeInternal||!this._componentMap.get(t)?.internal)).map((({widget:t,node:e})=>t??e))}getPosition(t){for(const e in this._positionNameToContainerLookup){if(this._positionNameToContainerLookup[e].contains(t))return e}return null}_add(t,e,i,n,r){t instanceof qh||(t=new qh({node:t})),this._place({component:t,position:e,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:r})}_find(t){return t?t instanceof qh?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.view?.padding??Xh}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(ec.innerContainer,ec.cornerContainer);const e=document.createElement("div");e.classList.add(ec.innerContainer,ec.manualContainer);const i=document.createElement("div");i.classList.add(ec.topLeft,ec.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(ec.topRight,ec.corner),t.appendChild(n);const r=document.createElement("div");r.classList.add(ec.bottomLeft,ec.corner),t.appendChild(r);const s=document.createElement("div");s.classList.add(ec.bottomRight,ec.corner),t.appendChild(s),this._innerContainer=t,this._manualContainer=e;const a=ei();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":r,"bottom-right":s,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?s:r,"bottom-trailing":a?r:s},this._positionNameToContainerLookup={manual:e,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const e=t.position??"manual",{component:i,index:n}=t,r=this._positionNameToContainerLookup[e],s=null!=n&&n>-1;if(ic(i.widget)&&i.widget.startup(),!s)return void r.appendChild(i.node);const a=Array.from(r.children);if(0===n)return void(r.firstChild?ii(i.node,r.firstChild):r.appendChild(i.node));n>=a.length?r.appendChild(i.node):ii(i.node,a[n])}_toPixelPosition(t){return{top:nc(t.top),left:nc(t.left),right:nc(t.right),bottom:nc(t.bottom)}}_findByComponent(t){return this._components.find((e=>e===t))??null}_findById(t){return this._components.find((({id:e})=>e===t))??null}_findByNode(t){return this._components.find((({node:e})=>e===t))??null}_getComponentsAtPosition(t,e){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map((t=>this._findByNode(t))).filter(M).filter((t=>e.includeInternal||!this._componentMap.get(t)?.internal)).map((({widget:t,node:e})=>t??e))}};b([g()],ac.prototype,"_locale",void 0),b([g()],ac.prototype,"container",null),b([g()],ac.prototype,"height",null),b([g({value:Qh})],ac.prototype,"padding",null),b([et("padding")],ac.prototype,"castPadding",null),b([g()],ac.prototype,"view",void 0),b([g()],ac.prototype,"width",null),ac=b([y("esri.views.ui.UI")],ac);const oc=ac;function uc(t,e){return t&&"copyright"in t&&(!e||"function"==typeof t.originOf&&"user"===t.originOf("copyright"))}function lc(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))}function hc(t,e,i){if(!i||!e)return;t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e})}function cc(t){return"bing-maps"===t.type}const dc=[];let fc=class extends Nt{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new G,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const e=this.get("view.allLayerViews");e&&this.handles.add(e.map((t=>ht((()=>[t.suspended,t.layer?.attributionVisible]),(()=>this._updateAttributionItems())))),"suspension"),t&&t.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t)})),this._updateAttributionItems()},this.handles.add([kt((()=>this.view?.allLayerViews),"change",(t=>this._allLayerViewsChange(t)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Zt((()=>!0===this.view?.stationary),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;dc.length=0,t&&e?(e.forEach((e=>{if(e.suspended||!e.layer?.attributionVisible)return;const i=e.layer;if(uc(i,"user"))return void hc(dc,e,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(e)){const n=this._fetchedAttributionData.get(e);return void(n?hc(dc,e,this._getDynamicAttribution(n,t,i)):uc(i)&&hc(dc,e,i.copyright))}return void this._fetchAttributionData(e)}const n=i.get("portalItem.accessInformation");hc(dc,e,n||i.copyright)})),lc(this.items,dc)&&(this.items.removeAll(),this.items.addMany(dc)),dc.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await Se(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,cc(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,n={};if(!i)return n;for(let t=0;t<i.length;t++){const r=i[t],s=r.coverageAreas;if(!s)return;for(const i of s){const s=i.bbox,a=i.zoomMin-(e&&i.zoomMin?1:0),o=i.zoomMax-(e&&i.zoomMax?1:0),u=new Xt({xmin:s[1],ymin:s[0],xmax:s[3],ymax:s[2],spatialReference:Qt.WGS84}),l={extent:xe(u),attribution:r.attribution||"",score:null!=i.score?i.score:100,id:t};for(let t=a;t<=o;t++)n[t]??=[],n[t].push(l)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,e,i){const{extent:n,scale:r}=e;let s=i.tileInfo?.scaleToZoom(r)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!n||null==s||s<=-1)return"";const a=t[s],o=Ce(n.center.clone().normalize(),e.spatialReference),u=new Set;return a?a.filter((t=>{const e=t.id,i=!u.has(e)&&o&&t.extent&&de(t.extent,o);return i&&u.add(e),i})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(", "):""}};b([g({readOnly:!0,type:G})],fc.prototype,"items",void 0),b([g({readOnly:!0})],fc.prototype,"state",null),b([g()],fc.prototype,"view",void 0),fc=b([y("esri.widgets.Attribution.AttributionViewModel")],fc);const mc=fc;function vc(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:bc(t[e])}}}function pc(t){const e=t?.type;return t instanceof KeyboardEvent||"keyup"===e||"keydown"===e||"keypress"===e}function bc(t){return function(e,...i){pc(e)?ni(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}const gc="esri-attribution",yc={base:`${gc} esri-widget`,poweredBy:`${gc}__powered-by`,sources:`${gc}__sources`,open:`${gc}--open`,sourcesOpen:`${gc}__sources--open`,link:`${gc}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let wc=class extends si{constructor(t,e){super(t,e),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((t=>t.forEach((({target:t})=>this._checkSourceTextOverflow(t))))),this.iconClass=yc.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new mc}initialize(){this.addHandles(kt((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((t,e)=>(t.includes(e.text)||t.push(e.text),t)),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[yc.open]:this._isOpen};return ai("div",{bind:this,class:this.classes(yc.base,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return ai("div",{class:yc.poweredBy},"Powered by"," ",ai("a",{class:yc.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const t=this._isOpen,e=this._isInteractive,i=e?"0":"",{attributionText:n}=this,r={[yc.sourcesOpen]:t,[yc.interactive]:e};return ai("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(yc.sources,r),innerHTML:n,tabindex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let e=!1;const{clientHeight:i,clientWidth:n,scrollWidth:r}=t,s=r>n,a=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,a&&(e=!0),this._isOpen){const t=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,t&&(this._isOpen=!1,e=!0)}e&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b([g()],wc.prototype,"_isOpen",void 0),b([g()],wc.prototype,"_isInteractive",null),b([g()],wc.prototype,"_attributionTextOverflowed",void 0),b([g()],wc.prototype,"_prevSourceNodeHeight",void 0),b([g({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],wc.prototype,"attributionText",null),b([g()],wc.prototype,"iconClass",void 0),b([g()],wc.prototype,"icon",void 0),b([g()],wc.prototype,"itemDelimiter",void 0),b([g()],wc.prototype,"label",null),b([g(),ri("esri/widgets/Attribution/t9n/Attribution")],wc.prototype,"messages",void 0),b([g()],wc.prototype,"view",null),b([g({type:mc})],wc.prototype,"viewModel",void 0),b([vc()],wc.prototype,"_toggleState",null),wc=b([y("esri.widgets.Attribution")],wc);const Sc=wc;const xc=t=>{let e=class extends t{constructor(...t){super(...t),this.goToOverride=null,this.view=null}callGoTo(t){const{view:e}=this;return D(e),this.goToOverride?this.goToOverride(e,t):e.goTo(t.target,t.options)}};return b([g()],e.prototype,"goToOverride",void 0),b([g()],e.prototype,"view",void 0),e=b([y("esri.widgets.support.GoTo")],e),e};const Cc="esri.widgets.CompassViewModel";let Oc=class extends(xc(tt)){constructor(t){super(t),this._handles=new lt,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(ht((()=>this.view),this._updateRotationWatcher,ct))}destroy(){pt(this._handles),this.view=null}get canShowNorth(){const t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};"2d"===this.view?.type?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){null!=t&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add("2d"===t.type?ht((()=>t?.rotation),this._updateForRotation,ct):ht((()=>t?.camera),this._updateForCamera,ct))}};b([g({readOnly:!0})],Oc.prototype,"canShowNorth",null),b([g()],Oc.prototype,"orientation",void 0),b([g({readOnly:!0})],Oc.prototype,"state",null),b([g()],Oc.prototype,"view",void 0),Oc=b([y(Cc)],Oc);const Mc=Oc;const Tc={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let kc=class extends si{constructor(t,e){super(t,e),this.iconClass=Tc.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Mc}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:e}=this.viewModel,i="disabled"===e,n="compass"===("rotation"===e?"rotation":"compass"),r=i?-1:0,s={[Tc.disabled]:i,[Tc.interactive]:!i},a={[Tc.northIcon]:n,[Tc.rotationIcon]:!n},{messages:o}=this;return ai("div",{bind:this,class:this.classes(Tc.base,s),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":o.reset,title:o.reset},ai("span",{"aria-hidden":"true",class:this.classes(Tc.icon,a),styles:this._toRotationTransform(t)}),ai("span",{class:Tc.text},o.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};b([g()],kc.prototype,"goToOverride",null),b([g()],kc.prototype,"iconClass",void 0),b([g()],kc.prototype,"icon",void 0),b([g()],kc.prototype,"label",null),b([g(),ri("esri/widgets/Compass/t9n/Compass")],kc.prototype,"messages",void 0),b([g()],kc.prototype,"view",null),b([g({type:Mc})],kc.prototype,"viewModel",void 0),b([vc()],kc.prototype,"_reset",null),kc=b([y("esri.widgets.Compass")],kc);const Ic=kc;const Ac="esri-navigation-toggle",jc={base:`${Ac} esri-widget`,button:`${Ac}__button esri-widget--button`,activeButton:`${Ac}__button--active`,panButton:`${Ac}__button--pan`,rotateButton:`${Ac}__button--rotate`,isLayoutHorizontal:`${Ac}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Fc=class extends tt{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.own(Zt((()=>this.view?.inputManager),(()=>this._setNavigationMode())))}destroy(){this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};b([g({readOnly:!0})],Fc.prototype,"state",null),b([g()],Fc.prototype,"navigationMode",void 0),b([g()],Fc.prototype,"view",void 0),Fc=b([y("esri.widgets.NavigationToggleViewModel")],Fc);const Dc=Fc;let Pc=class extends si{constructor(t,e){super(t,e),this.iconClass=jc.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Dc}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){const t="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),i={[jc.disabled]:t,[jc.isLayoutHorizontal]:"horizontal"===this.layout},n={[jc.activeButton]:e},r={[jc.activeButton]:!e},s=t?-1:0,a=this.messages.toggle;return ai("div",{bind:this,class:this.classes(jc.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:s,"aria-label":a,title:a},ai("div",{class:this.classes(jc.button,jc.panButton,n)},ai("span",{class:jc.panIcon})),ai("div",{class:this.classes(jc.button,jc.rotateButton,r)},ai("span",{class:jc.rotationIcon})))}_toggle(){this.toggle()}};b([g()],Pc.prototype,"iconClass",void 0),b([g()],Pc.prototype,"icon",void 0),b([g()],Pc.prototype,"label",null),b([g({value:"vertical"})],Pc.prototype,"layout",null),b([g(),ri("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Pc.prototype,"messages",void 0),b([g()],Pc.prototype,"view",null),b([g({type:Dc})],Pc.prototype,"viewModel",void 0),b([vc()],Pc.prototype,"_toggle",null),Pc=b([y("esri.widgets.NavigationToggle")],Pc);const Lc=Pc;const Ec={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Nc=class extends si{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const t=this.enabled?0:-1,e={[Ec.disabled]:!this.enabled,[Ec.interactive]:this.enabled};return ai("div",{bind:this,class:this.classes(Ec.button,e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},ai("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Ec.icon,this.iconClass??"")}),ai("span",{class:Ec.iconText},this.title))}_triggerAction(){this.action.call(this)}};b([g()],Nc.prototype,"action",void 0),b([g()],Nc.prototype,"enabled",void 0),b([g()],Nc.prototype,"iconClass",void 0),b([g()],Nc.prototype,"icon",void 0),b([g()],Nc.prototype,"title",void 0),b([vc()],Nc.prototype,"_triggerAction",null),Nc=b([y("esri.widgets.IconButton")],Nc);const Rc=Nc;let Bc=class extends tt{get canZoomIn(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return 0===e||t>e}get canZoomOut(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return 0===e||t<e}};b([g({readOnly:!0})],Bc.prototype,"canZoomIn",null),b([g({readOnly:!0})],Bc.prototype,"canZoomOut",null),b([g()],Bc.prototype,"view",void 0),Bc=b([y("esri.widgets.Zoom.ZoomConditions2D")],Bc);const _c=Bc;let zc=class extends tt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b([g({readOnly:!0})],zc.prototype,"canZoomIn",null),b([g({readOnly:!0})],zc.prototype,"canZoomOut",null),b([g()],zc.prototype,"view",void 0),zc=b([y("esri.widgets.Zoom.ZoomConditions3D")],zc);const Vc=zc;let Gc=class extends tt{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?"2d"===t.type?this._zoomConditions=new _c({view:t}):"3d"===t.type&&(this._zoomConditions=new Vc({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;"2d"===t.type?t.mapViewNavigation.zoomIn():Oe(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;"2d"===t.type?t.mapViewNavigation.zoomOut():Oe(t.goTo({zoomFactor:.5}))}};b([g()],Gc.prototype,"_zoomConditions",void 0),b([g()],Gc.prototype,"canZoomIn",null),b([g()],Gc.prototype,"canZoomOut",null),b([g({readOnly:!0})],Gc.prototype,"state",null),b([g()],Gc.prototype,"view",null),Gc=b([y("esri.widgets.Zoom.ZoomViewModel")],Gc);const $c=Gc;const Wc={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let qc=class extends si{constructor(t,e){super(t,e),this.iconClass=Wc.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new $c}initialize(){this._zoomInButton=new Rc({action:this.zoomIn.bind(this),iconClass:Wc.zoomInIcon}),this._zoomOutButton=new Rc({action:this.zoomOut.bind(this),iconClass:Wc.zoomOutIcon})}destroy(){this._zoomInButton=dt(this._zoomInButton),this._zoomOutButton=dt(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t=this.viewModel,e={[Wc.horizontalLayout]:"horizontal"===this.layout},{canZoomIn:i,canZoomOut:n}=t;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=n;const{zoomIn:r,zoomOut:s}=this.messages;return this._zoomInButton.title=r,this._zoomOutButton.title=s,ai("div",{class:this.classes(Wc.base,e)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};b([g()],qc.prototype,"iconClass",void 0),b([g()],qc.prototype,"icon",void 0),b([g()],qc.prototype,"label",null),b([g({value:"vertical"})],qc.prototype,"layout",null),b([g(),ri("esri/widgets/Zoom/t9n/Zoom")],qc.prototype,"messages",void 0),b([g()],qc.prototype,"view",null),b([g({type:$c})],qc.prototype,"viewModel",void 0),qc=b([y("esri.widgets.Zoom")],qc);const Hc=qc;function Uc(t){return void 0!==t?.view}let Kc=class extends oc{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach((e=>{const i=this._find(e),n=i?.widget;Uc(n)&&(n.view=t)}))},this._componentsWatcher=(t,e)=>{this._removeComponents(e),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([ht((()=>this.components),this._componentsWatcher,ct),ht((()=>this.view),this._updateViewAwareWidgets,ct)])}_add(t,e,i,n,r){let s=t;if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,i,n,r)}_removeComponents(t){t.forEach((t=>{const e=this._find(t);e&&(this.remove(e),e.destroy())}))}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(t){this.constructed&&t.forEach((t=>this.add(this._createComponent(t),this._defaultPositionLookup[t])))}_createComponent(t){const e=this._createWidget(t);return new qh({id:t,node:e})}_createWidget(t){const{view:e}=this;switch(t){case"attribution":return new Sc({view:e});case"compass":return new Ic({view:e});case"navigation-toggle":return new Lc({view:e});case"zoom":return new Hc({view:e})}}};b([g()],Kc.prototype,"components",void 0),Kc=b([y("esri.views.ui.DefaultUI")],Kc);const Jc=Kc;let Yc=class extends Jc{constructor(t){super(t),this.components=["attribution","zoom"]}};b([g()],Yc.prototype,"components",void 0),Yc=b([y("esri.views.ui.2d.DefaultUI2D")],Yc);const Zc=Yc;var Xc;let Qc=Xc=class extends w{constructor(t){super(t),this.color=new Y([0,0,0,1])}clone(){return new Xc(q({color:this.color}))}};b([g({type:Y,json:{write:!0}})],Qc.prototype,"color",void 0),Qc=Xc=b([y("esri.webmap.background.ColorBackground")],Qc);const td=Qc;let ed,id,nd,rd,sd,ad;async function od(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:r,Stage:s}]=await Promise.all([import("./p-1b9fea8f.js"),import("./p-aac7cecd.js")]);id=t,nd=e,rd=i,sd=n,ad=r,ed=s}const ud=160,ld={flipY:!0,premultipliedAlpha:!0};let hd=class extends(Xs(ja(la(Vo)))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new $i({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new pl({constraints:new nl({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new _u(this),this._pePromise=null,this.floors=new G,this.highlightOptions=new yh,this.inputManager=new bh({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Sh,this.type="2d",this.ui=new Zc,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ht((()=>this.viewpoint),(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(ud)}),ee),this.on("resize",(t=>this.stateManager.resize(t.width,t.height))),ht((()=>this.animationManager?.animation),(t=>{this.animation=t}))]),Me()}destroy(){this._set("preconditionsReady",!1),this.frameTask=dt(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new On(this.featuresTilingScheme)}get constraintsInfo(){const t=this.defaultsFromMap?.tileInfo,e=this.spatialReference;return{lods:t?.spatialReference?.equals(e)?t.lods:null,spatialReference:e}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:t,constraints:e,center:i,viewpoint:n,extent:r}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&(!r&&(e?.effectiveLODs||(s=-1),(!i||0===t&&-1===s)&&(!n||null==n.targetGeometry||"extent"!==n.targetGeometry.type&&!n.scale)))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Vt()||(this._pePromise||(this._pePromise=Wt().finally((()=>{this._pePromise=null}))),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!Gt(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1};t.when(i,i)}get background(){return vd(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){return this.stateManager?.center??null}set center(t){this.stateManager.center=t}get constraints(){return this.stateManager?.constraints}set constraints(t){t.view=this;const e=this.stateManager.constraints;this.stateManager.constraints=t,e?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(t){this.stateManager.extent=t}get padding(){return this.stateManager?.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){this.stateManager.rotation=t}get scale(){return this.stateManager?.scale??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating)));if(a("esri-2d-log-updating")){const e=this.allLayerViews.reduce(((t,e)=>({...t,[e.layer.id]:!e.destroyed&&!("layerViews"in e)&&e.updating})),{});console.log(`Updating MapView: ${t}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(e)}\n`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),A((()=>this.ready),e).then((()=>{const i={animate:!0,...e},n=su(t,this);return this.animation?.update(n),this._gotoTask={},i.animate?this._gotoAnimated(n,i):this._gotoImmediate(n,i)}));l.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=no(t)?io(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set,r=!1,s=null,a=null;e?.include?md(e.include,fd(this,(t=>n.add(t)),(t=>{s||(s=new Set),s.add(t)}),(t=>n.add(t)),(()=>r=!0))):(r=!0,n=new Set(this.allLayerViews)),e?.exclude&&md(e.exclude,fd(this,(t=>n.delete(t)),(t=>{a||(a=new Set),a.add(t)})));const o=this.allLayerViews.filter((t=>!t.suspended&&n.has(t))).reverse(),u=this.toMap(i);let l=[...r?this.graphicsView.hitTest(u).map((t=>({type:"graphic",graphic:t,layer:null,mapPoint:u}))):[],...await Promise.all(o.map((t=>t.hitTest(u,i))).toArray())].filter(M).flat().filter(M);return s&&(l=l.filter((t=>!("graphic"in t)||!t.graphic||s?.has(dd(t.graphic))))),a&&(l=l.filter((t=>!("graphic"in t)||!t.graphic||!a?.has(dd(t.graphic))))),{screenPoint:i,results:l}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return Ch(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},ld)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return Oh(i,ld)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,Fh(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach((t=>{const e=this.allLayerViews.find((e=>e.layer.id===t.id));e&&"container"in e&&e.container&&i.push(e.container)}))):i=this._stage.children;const{format:n,quality:r}=jh(t.format,t.quality);return xh(t,e,this.size,this.padding,n,r,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=no(t)?io(this,t):t;return this.stateManager.toMap(e)}toScreen(t){return this.stateManager.toScreen(t)}on(t,e,i,n){const r=this.inputManager&&this.viewEvents.on(t,e,i,n);return r||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){if(this.graphicsView){this.graphicsView.graphicUpdateHandler(t)}}whenReady(){return new Promise((t=>{this.ready?t(this):this._resolveWhenReady.push(t)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(t){return qu.hasLayerViewModule(t)}importLayerView(t){return qu.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(l.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then((e=>({...e,mapPoint:this.toMap(t)})))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=zh(this.type);return a("safari")&&a("safari")<9&&(t=new u("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:a("safari")})),null!=t?(l.getLogger(this).warn("#validate()",t.message),Promise.reject(t)):od()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Wo),this.animation}_cancellableGoTo(t,e,i){const n=()=>t===this._gotoTask,r=i.then((()=>{n()&&(this.animation=null)})).catch((t=>{throw n()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),t})),s=new Promise((t=>t(r)));return e.when().catch((()=>{n()&&s.cancel&&s.cancel()})),s}_gotoImmediate(t,e){const i=this._gotoTask,n=this.animation,r=t.then((t=>{if(T(e),i!==this._gotoTask)throw new u("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=t,n.finish()}));return this._cancellableGoTo(i,n,r)}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<ud&&(this._stationaryTimer=this._flipStationary(t))}),t)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:t,initialExtent:e,map:i,padding:n,size:r}=this;if(!t)return null;const s=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),o=s?.viewpoint,u=o?.targetGeometry?.extent??e,l=u?.center,h=o?.rotation??0,c=o?.scale||u&&eu(u,[r[0]-n.left-n.right,r[1]-n.top-n.bottom]),d=a.center??l,f=a.rotation??h,m=a.scale??c;return d&&m?new Us({targetGeometry:d,scale:m,rotation:f}):null}_gotoAnimated(t,e){const i=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const r=t.then((t=>{if(T(e),i!==this._gotoTask)throw new u("view:goto-interrupted","Goto was interrupted");return n.update(t),this.animationManager.animate(n,this.viewpoint,e),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,n,r)}_startup(){this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const e=new ed(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=e,this._magnifierView=new ad,this._magnifierView.magnifier=this.magnifier;const i=new rd({view:this});this._set("labelManager",i);const n=new Bu({view:this});this._set("animationManager",n);const r=new sd({view:this,animationManager:n});this._set("mapViewNavigation",r),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),e.on("post-render",(()=>this._set("rendering",e.renderRequested))),e.on("will-render",(()=>this._set("rendering",e.renderRequested))),e.on("webgl-error",(t=>this.fatalError=t.error)),ht((()=>this.stationary),(t=>e.stationary=t),It),ht((()=>this.background),(t=>{e.backgroundColor=t?.color,this._magnifierView.backgroundColor=t?.color}),It),ht((()=>this.magnifier),(t=>this._magnifierView.magnifier=t),It),ht((()=>this.renderingOptions),(t=>e.renderingOptions=t),It),ht((()=>this.highlightOptions),(t=>e.highlightOptions=t),It),ht((()=>this.state.id),(()=>e.state=this.state),It)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach((t=>t(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((t=>{this._stage.addChild(t.container)}));const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new Mn(Xi.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new id({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new nd(t)});this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};hd.type="2d",b([g({readOnly:!0})],hd.prototype,"animationManager",void 0),b([g({constructOnly:!0})],hd.prototype,"deactivatedWebGLExtensions",void 0),b([g({constructOnly:!0})],hd.prototype,"debugWebGLExtensions",void 0),b([g({readOnly:!0})],hd.prototype,"featuresTilingScheme",void 0),b([g({readOnly:!0})],hd.prototype,"fullOpacity",void 0),b([g({readOnly:!0})],hd.prototype,"graphicsTileStore",null),b([g()],hd.prototype,"graphicsView",void 0),b([g()],hd.prototype,"stateManager",void 0),b([g()],hd.prototype,"constraintsInfo",null),b([g({readOnly:!0})],hd.prototype,"state",null),b([g()],hd.prototype,"initialExtentRequired",null),b([g()],hd.prototype,"labelManager",void 0),b([g({readOnly:!0})],hd.prototype,"resourceManager",null),b([g({readOnly:!0})],hd.prototype,"textureManager",null),b([g({readOnly:!0})],hd.prototype,"mapViewNavigation",void 0),b([g({constructOnly:!0})],hd.prototype,"renderCanvas",void 0),b([g()],hd.prototype,"renderingOptions",void 0),b([g({readOnly:!0})],hd.prototype,"rendering",void 0),b([g({constructOnly:!0})],hd.prototype,"supersampleScreenshotsEnabled",void 0),b([g({readOnly:!0})],hd.prototype,"supportsGround",void 0),b([g()],hd.prototype,"_stationaryTimer",void 0),b([g()],hd.prototype,"_defaultsFromMapSettings",null),b([g()],hd.prototype,"_pePromise",void 0),b([g({readOnly:!0})],hd.prototype,"typeSpecificPreconditionsReady",null),b([g()],hd.prototype,"animation",null),b([g({type:td})],hd.prototype,"background",null),b([g()],hd.prototype,"center",null),b([g({type:nl})],hd.prototype,"constraints",null),b([g()],hd.prototype,"extent",null),b([g()],hd.prototype,"floors",void 0),b([g({type:yh})],hd.prototype,"highlightOptions",void 0),b([g({readOnly:!0})],hd.prototype,"inputManager",void 0),b([g()],hd.prototype,"map",void 0),b([g()],hd.prototype,"padding",null),b([g()],hd.prototype,"resizeAlign",null),b([g({readOnly:!0})],hd.prototype,"resolution",null),b([g()],hd.prototype,"rotation",null),b([g()],hd.prototype,"scale",null),b([g({constructOnly:!0})],hd.prototype,"spatialReferenceLocked",void 0),b([g()],hd.prototype,"stationary",null),b([g({type:Sh,readOnly:!0})],hd.prototype,"timeline",void 0),b([g({readOnly:!0})],hd.prototype,"type",void 0),b([g({readOnly:!0})],hd.prototype,"updating",null),b([g()],hd.prototype,"viewpoint",null),b([g()],hd.prototype,"zoom",null),b([g({readOnly:!0})],hd.prototype,"navigating",null),b([g(),et((t=>t instanceof Jc?t:ke(Zc,t)))],hd.prototype,"ui",void 0),hd=b([y("esri.views.MapView")],hd);const cd=hd;function dd(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function fd(t,e,i,n,r){return s=>{if(s instanceof B){if(s.layer===t)r?.();else{const e=t.allLayerViews.find((t=>t.layer===s.layer));e&&n?.(e)}i(dd(s))}else{const i=t.allLayerViews.find((t=>t.layer===s));i&&e(i)}}}function md(t,e){if(t)if(Te(t))for(const i of t)if(Te(i))for(const t of i)e(t);else e(i);else e(t)}function vd(t){return"esri.WebMap"===t?.declaredClass}const pd=[...z,"date","string"];async function bd(t){if(!(t&&t.layer&&(t.field||t.valueExpression||t.sqlExpression)))throw new u("summary-statistics:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(t.valueExpression&&!t.sqlExpression&&!t.view)throw new u("summary-statistics:missing-parameters","View is required when 'valueExpression' is specified");t.forBinning&&Hn(t,"summary-statistics");const{layer:e,...i}=t,n=t.forBinning?xs:Ss,r=Os(e,n,t.forBinning);if(!r)throw new u("summary-statistics:invalid-parameters","'layer' must be one of these types: "+Cs(n).join(", "));const s={layerAdapter:r,...i};s.normalizationType=rr(s);const a=null!=s.signal?{signal:s.signal}:null;await r.load(a);const o=s.field,l=s.normalizationType,h=s.valueExpression||s.sqlExpression,c=o?r.getField(o):null,d=await nr({field:s.field,normalizationField:s.normalizationField,valueExpression:s.valueExpression}),f=Oi(r,d,"summary-statistics:invalid-parameters");if(f)throw f;if(c){const t=Mi(r,c,"summary-statistics:invalid-parameters",pd);if(t)throw t;if(L(c)&&l)throw new u("summary-statistics:invalid-parameters","Normalization is not allowed for date fields")}else if(h&&l)throw new u("summary-statistics:invalid-parameters","Normalization is not allowed when 'valueExpression' or 'sqlExpression' is specified");const m=Ti(s.filter,"summary-statistics:invalid-parameters");if(m)throw m;return s}async function gd(t){const{layerAdapter:e,...i}=await bd(t);return e.summaryStatistics(i)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yd(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}u((n=n.apply(t,e||[])).next())}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wd=function(t,e){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},wd(t,e)};function Sd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}wd(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var xd=function(){return xd=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xd.apply(this,arguments)};function Cd(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}u((n=n.apply(t,e||[])).next())}))}function Od(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function Md(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Td(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function kd(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Td(arguments[e]));return t}var Id=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._value+"%"},t}();function Ad(t){return new Id(t)}function jd(t){return Number(t)!==t}function Fd(t){return{}.toString.call(t)}function Dd(t){if("string"==typeof t)return t;if("number"==typeof t)return""+t;throw new Error("Expected a string or number but got "+Fd(t))}function Pd(t){return!!t}function Ld(t){if(Rd(t)&&!Gd(t)){var e=Number(t);return jd(e)&&Vd(t)&&""!=t?Ld(t.replace(/[^0-9.\-]+/g,"")):e}return t}function Ed(t){if(Rd(t)&&!Vd(t)){if(Gd(t))return Dd(t);if($d(t))return t.toString()}return t}function Nd(t){return!Rd(t)||Gd(t)||function(t){return t instanceof Id}(t)?t:Vd(t)&&-1!=t.indexOf("%")?Ad(Ld(t)):Ld(t)}function Rd(t){return null!=t}function Bd(t){if(Rd(t))return t;throw new Error("Value doesn't exist")}function _d(t,e){return Rd(t)?t:e}function zd(t){return"[object Date]"===Fd(t)}function Vd(t){return"string"==typeof t}function Gd(t){return"number"==typeof t&&Number(t)==t}function $d(t){return"object"==typeof t&&null!=t}function Wd(t){return Array.isArray(t)}var qd=Math.PI,Hd=qd/2,Ud=qd/180,Kd=180/qd;function Jd(t,e,i){return Rd(t)?Xd(t=Ld(t),e,i):t}function Yd(t,e,i){if(!Gd(e)||e<=0){var n=Math.round(t);return i&&n-t==.5&&n--,n}var r=Math.pow(10,e);return Math.round(t*r)/r}function Zd(t,e){if(!Gd(e)||e<=0)return Math.ceil(t);var i=Math.pow(10,e);return Math.ceil(t*i)/i}function Xd(t,e,i){if(Gd(e)){if(Gd(i)&&i<e){var n=i;i=e,e=n}t<e&&(t=e)}return Gd(i)&&t>i&&(t=i),t}function Qd(t){return Yd(Math.sin(Ud*t),10)}function tf(t){return Yd(Math.tan(Ud*t),10)}function ef(t){return Yd(Math.cos(Ud*t),10)}function nf(t,e){return Gd(t)?Gd(e)&&e>t?e:t:Gd(e)?e:null}function rf(t,e){return Gd(t)?Gd(e)&&e<t?e:t:Gd(e)?e:null}function sf(t,e){var i=Bd(t.start),n=Bd(e.start),r=Bd(t.end),s=Bd(e.end);return Math.max(i,n)<=Math.min(r,s)}function af(t){var e=Bd(t.start);return{start:1-Bd(t.end),end:1-e}}function of(t,e){return t?(e||(e={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))):0}function uf(t,e,i,n,r){if(!t)return 0;e||(e={x:0,y:0});var s=0,a=t;if(r>0)for(var o=0;o<=r;o++){var u=vf(t,e,i,n,o/r);s+=of(a,u),a=u}return s}function lf(t,e,i,n){var r=of(e,n),s=of(t,i);return Math.abs(s/r)}function hf(t,e,i){return Gd(i)||(i=.5),{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}function cf(t,e){e||(e={x:2*t.x,y:2*t.y});var i=e.x-t.x,n=e.y-t.y,r=Math.atan2(n,i)*Kd;return r<0&&(r+=360),yf(r)}function df(t){if(t){var e=t.length;if(0!==e){for(var i,n=void 0,r=void 0,s=void 0,a=0;a<e;a++){var o=t[a];(!Gd(r)||o.x>r)&&(r=o.x),(!Gd(n)||o.x<n)&&(n=o.x),(!Gd(i)||o.y<i)&&(i=o.y),(!Gd(s)||o.y>s)&&(s=o.y)}return{x:n,y:i,width:r-n,height:s-i}}}return{x:0,y:0,width:0,height:0}}function ff(t){var e=t.length;if(0!==e){for(var i=void 0,n=void 0,r=void 0,s=void 0,a=0;a<e;a++){var o=t[a];i=rf(o.x,i),n=rf(o.y,n),r=nf(o.x+o.width,r),s=nf(o.y+o.height,s)}return{x:i,y:n,width:r-i,height:s-n}}}function mf(t,e,i,n){return{x:(1-n)*(1-n)*t.x+2*(1-n)*n*i.x+n*n*e.x,y:(1-n)*(1-n)*t.y+2*(1-n)*n*i.y+n*n*e.y}}function vf(t,e,i,n,r){var s={x:0,y:0},a=1-r,o=a*a,u=o*a;return s.x=t.x*u+3*i.x*o*r+3*n.x*a*r*r+e.x*r*r*r,s.y=t.y*u+3*i.y*o*r+3*n.y*a*r*r+e.y*r*r*r,s}function pf(t,e,i,n,r,s){return r=gf(r),s=gf(s),{x:(-t.x+e.x/r+i.x)*r,y:(-t.y+e.y/s+i.y)*s}}function bf(t,e,i,n,r,s){return r=gf(r),s=gf(s),{x:(e.x+i.x/r-n.x)*r,y:(e.y+i.y/s-n.y)*s}}function gf(t){return 1-t+1e-5}function yf(t){return 360==t?360:t%360}function wf(t,e,i){if(e>i){var n=e;e=i,i=n}t=yf(t);var r=(e-yf(e))/360;return t<e&&(t+=360*(r+1)),t>i&&(t-360>e?t-=360:t=t<e+(i-e)/2+180?i:e),t<e&&(t=t>e+(i-e)/2-180?e:i),t}function Sf(t,e,i){var n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=-Number.MAX_VALUE,o=[];Gd(i)||(i=1),o.push(xf(i,t)),o.push(xf(i,e));for(var u=Math.min(90*Math.floor(t/90),90*Math.floor(e/90)),l=Math.max(90*Math.ceil(t/90),90*Math.ceil(e/90)),h=u;h<=l;h+=90)h>=t&&h<=e&&o.push(xf(i,h));for(var c=0;c<o.length;c++){var d=o[c];d.x<n&&(n=d.x),d.y<r&&(r=d.y),d.x>s&&(s=d.x),d.y>a&&(a=d.y)}return{x:n,y:r,width:s-n,height:a-r}}function xf(t,e){return{x:t*ef(e),y:t*Qd(e)}}function Cf(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function Of(t,e){for(var i=t.length,n=0;n<i;++n)if(t[n]===e)return n;return-1}function Mf(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n]))return!0;return!1}function Tf(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=e(t[r],r);return n}function kf(t,e){for(var i=t.length,n=0;n<i;++n)e(t[n],n)}function If(t,e){for(var i=t.length,n=0;n<i&&e(t[n],n);++n);}function Af(t,e){var i=!1,n=t.indexOf(e);if(-1!==n){i=!0,t.splice(n,1);for(var r=t.length;n<r;)t[n]===e?(t.splice(n,1),--r):++n}return i}function jf(t,e,i){var n=Of(t,e);-1!==n&&Ef(t,n),null==i?t.push(e):Lf(t,i,e)}function Ff(t,e,i){Gd(i)?0===i?t.unshift(e):t.splice(i,0,e):t.push(e)}function Df(t){return Array.isArray(t)?t:[t]}function Pf(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function Lf(t,e,i){t.splice(e,0,i)}function Ef(t,e){t.splice(e,1)}function Nf(t,e,i){for(var n=0,r=t.length,s=!1;n<r;){var a=n+r>>1,o=e(i,t[a]);o<0?r=a:0===o?(s=!0,n=a+1):n=a+1}return{found:s,index:s?n-1:n}}function Rf(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return n;return-1}function Bf(t,e){for(var i=t.length,n=0;n<i;)e(t[n])?++n:(t.splice(n,1),--i)}var _f=function(){function t(t){this._disposed=!1,this._dispose=t}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},t}(),zf=function(t){function e(e){return t.call(this,(function(){kf(e,(function(t){t.dispose()}))}))||this}return Sd(e,t),e}(_f),Vf=function(t){function e(){var e=t.call(this,(function(){Rd(e._disposer)&&(e._disposer.dispose(),e._disposer=void 0)}))||this;return e}return Sd(e,t),e.prototype.get=function(){return this._value},e.prototype.set=function(t,e){Rd(this._disposer)&&this._disposer.dispose(),this._disposer=e,this._value=t},e.prototype.reset=function(){this.set(void 0,void 0)},e}(_f),Gf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._counter=0,e}return Sd(e,t),e.prototype.increment=function(){var t=this;return++this._counter,new _f((function(){--t._counter,0===t._counter&&t.dispose()}))},e}(_f),$f=!1,Wf=[],qf=[],Hf=[],Uf=[],Kf="function"==typeof requestAnimationFrame?function(t){requestAnimationFrame(t)}:function(t){setTimeout(t,16.666666666666668)};function Jf(){for(var t=Date.now(),e=Wf.length,i=0;i<e;++i)Wf[i](t);!function(t,e){for(var i=t.length,n=e;n<i;++n)t[n-e]=t[n];t.length=i-e}(Wf,e);for(i=0;i<qf.length;++i)qf[i](t);qf.length=0;for(i=0;i<Hf.length;++i)Hf[i](t);Hf.length=0,0===Wf.length&&0===qf.length?$f=!1:Kf(Jf)}function Yf(){$f||($f=!0,Kf(Jf))}function Zf(t){Hf.push(t),Yf()}var Xf=function(){function t(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{kf(t,(function(t){t.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}},t.prototype.hasListeners=function(){return 0!==this._listeners.length},t.prototype.hasListenersByType=function(t){return Mf(this._listeners,(function(e){return(null===e.type||e.type===t)&&!e.killed}))},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.enableType=function(t){delete this._disabled[t]},t.prototype.disableType=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._removeListener=function(t){if(0===this._iterating){var e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)},t.prototype._removeExistingListener=function(t,e,i,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==t||r.type!==e||null!=i&&r.callback!==i||r.context!==n||r.disposer.dispose()}))},t.prototype.isEnabled=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&null==this._disabled[t]},t.prototype.has=function(t,e,i){return-1!==Rf(this._listeners,(function(n){return!0!==n.once&&n.type===t&&(null==e||n.callback===e)&&n.context===i}))},t.prototype._shouldDispatch=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return Gd(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled},t.prototype._eachListener=function(t){var e=this;++this._iterating;try{kf(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(kf(this._killed,(function(t){e._removeListener(t)})),this._killed.length=0)}},t.prototype.dispatchImmediately=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==t||i.dispatch(t,e)}))},t.prototype.dispatch=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==t||function(t){Uf.push(t)}((function(){i.killed||i.dispatch(t,e)}))}))},t.prototype._on=function(t,e,i,n,r,s){var a=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,n);var o={type:e,callback:i,context:n,shouldClone:r,dispatch:s,killed:!1,once:t,disposer:new _f((function(){o.killed=!0,a._removeListener(o)}))};return this._listeners.push(o),o},t.prototype.onAll=function(t,e,i){return void 0===i&&(i=!0),this._on(!1,null,t,e,i,(function(i,n){return t.call(e,i,n)})).disposer},t.prototype.on=function(t,e,i,n){return void 0===n&&(n=!0),this._on(!1,t,e,i,n,(function(t,n){return e.call(i,n)})).disposer},t.prototype.once=function(t,e,i,n){void 0===n&&(n=!0);var r=this._on(!0,t,e,i,n,(function(t,n){r.disposer.dispose(),e.call(i,n)}));return r.disposer},t.prototype.off=function(t,e,i){this._removeExistingListener(!1,t,e,i)},t.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");kf(t._listeners,(function(t){!t.killed&&t.shouldClone&&(null===t.type?e.onAll(t.callback,t.context):t.once?e.once(t.type,t.callback,t.context):e.on(t.type,t.callback,t.context))}))},t}(),Qf=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return Sd(e,t),e.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");kf(t._listeners,(function(i){i.context!==t.target&&!i.killed&&i.shouldClone&&(null===i.type?e.onAll(i.callback,i.context):i.once?e.once(i.type,i.callback,i.context):e.on(i.type,i.callback,i.context))}))},e}(Xf);function tm(t){var e=[];for(var i in t)em(t,i)&&e.push(i);return e}function em(t,e){return{}.hasOwnProperty.call(t,e)}function im(t,e){for(var i in t)if(em(t,i)&&!e(i,t[i]))break}function nm(t,e){im(t,(function(t,i){return e(t,i),!0}))}function rm(t,e,i){kf(function(t,e){return tm(t).sort(e)}(t,i),(function(i){e(i,t[i])}))}function sm(t,e){return Object.assign({},t,e)}function am(t,e,i){kf(i,(function(i){Rd(t[i])&&(e[i]=t[i])}))}function om(t,e){am(t,e,tm(t))}function um(t){return function(e){for(var i=t.length,n=0;n<i&&e(t[n]);++n);}}function lm(t){var e=[];return t((function(t){return e.push(t),!0})),e}function hm(t,e){t(e)}function cm(t,e){t((function(t){return e(t),!0}))}function dm(t,e){return um(lm(t).sort(e))}function fm(t,e){return function(i){return t((function(t){return i(e(t))}))}}function mm(t){return function(e){var i=0;t((function(t){return e([i++,t])}))}}function vm(t,e){var i=!1;return t((function(t){return!e(t)||(i=!0,!1)})),i}var pm=function(){function t(t,e){this.createNewItems=!1,this.list=t,this._create=e,this.reset()}return t.prototype.reset=function(){this._listCopy=lm(this.list.iterator())},t.prototype.clear=function(){this._listCopy.length=0},t.prototype.getFirst=function(){return this.returnItem(0)},t.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},t.prototype.find=function(t){var e=Rf(this._listCopy,t);if(-1!==e){var i=this._listCopy[e];return Af(this._listCopy,i),i}return this.getLast()},t.prototype.removeItem=function(t){return Af(this._listCopy,t)},t.prototype.returnItem=function(t){if(t>=0&&t<this._listCopy.length){var e=this._listCopy[t];return Af(this._listCopy,e),e}if(this.createNewItems)return this._create()},t.prototype.iterator=function(){return um(this._listCopy)},t}();function bm(t,e){return t===e?0:t<e?-1:1}function gm(t,e){return new Array(e+1).join(t)}var ym=function(t){function e(e){var i,n=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);return i=t.call(this,(function(){n.dispose(),cm(e.iterator(),(function(t){t[1].dispose()}))}))||this,i}return Sd(e,t),e}(_f),wm=function(){function t(){this.events=new Xf,this._dictionary={}}return t.prototype.hasKey=function(t){return em(this._dictionary,t)},t.prototype.getKey=function(t){return this._dictionary[t]},t.prototype.insertKey=function(t,e){if(em(this._dictionary,t))throw new Error("Key "+t+" already exists in dictionary");this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.setKey=function(t,e){if(em(this._dictionary,t)){var i=this._dictionary[t];i!==e&&(this._dictionary[t]=e,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:i,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))}else this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.updateKey=function(t,e){if(!em(this._dictionary,t))throw new Error("Key "+t+" doesn't exist in dictionary");var i=this._dictionary[t],n=e(i);i!==n&&(this._dictionary[t]=n,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:i,newValue:n}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))},t.prototype.removeKey=function(t){if(em(this._dictionary,t)){var e=this._dictionary[t];delete this._dictionary[t],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e})}},t.prototype.insertKeyIfEmpty=function(t,e){return this.hasKey(t)||this.insertKey(t,e()),this.getKey(t)},t.prototype.clear=function(){var t=this;this.events.isEnabled("removed")&&nm(this._dictionary,(function(e,i){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:i})})),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},t.prototype.copyFrom=function(t){var e=this;cm(t.iterator(),(function(t){e.setKey(t[0],t[1])}))},t.prototype.iterator=function(){return t=this._dictionary,function(e){for(var i in t)if(em(t,i)&&!e([i,t[i]]))break};var t},t.prototype[Symbol.iterator]=function(){var t,e,i,n;return Od(this,(function(r){switch(r.label){case 0:for(e in t=[],this._dictionary)t.push(e);i=0,r.label=1;case 1:return i<t.length?(n=t[i],em(this._dictionary,n)?[4,[n,this._dictionary[n]]]:[3,3]):[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){cm(this.iterator(),(function(e){var i=Td(e,2),n=i[0],r=i[1];return t(n,r)}))},t.prototype.sortedIterator=function(){return dm(this.iterator(),(function(t,e){return bm(t[0],e[0])}))},t}(),Sm=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Sd(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;cm(t.iterator(),(function(t){e.setKey(t[0],t[1].clone())}))},e.prototype.create=function(t){var e=this;return this.insertKeyIfEmpty(t,(function(){return e.template.clone()}))},e}(wm),xm=new(function(){function t(){this._storage=new wm,this.ttl=1e3}return t.prototype.set=function(t,e,i,n){var r=this._storage.insertKeyIfEmpty(t,(function(){return new wm})),s={touched:(new Date).getTime(),ttl:Gd(n)?n:this.ttl,value:i};r.setKey(e,s)},t.prototype.get=function(t,e,i){if(void 0===i&&(i=void 0),this._storage.hasKey(t)){var n=this._storage.getKey(t);if(n.hasKey(e)){var r=n.getKey(e);return r.ttl&&r.touched+r.ttl<(new Date).getTime()&&(r.expired=!0),r.expired?(n.removeKey(e),i):r.value}return i}return i},t.prototype.clear=function(t){t?this._storage.removeKey(t):this._storage.clear()},t}()),Cm=function(){function t(){var t=this;this.events=new Xf,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],"undefined"!=typeof addEventListener&&(addEventListener("beforeprint",(function(){kf(t.baseSprites,(function(t){var e=t.paper.svg;e.setAttribute("viewBox","0 0 "+e.clientWidth+" "+e.clientHeight)}))})),addEventListener("afterprint",(function(){kf(t.baseSprites,(function(t){t.paper.svg.removeAttribute("viewBox")}))})))}return t.prototype.getUniqueId=function(){var t=this._uidCount;return this._uidCount+=1,"id-"+t},Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new wm),this._map},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,i){xm.set(this.uid,t,e,i)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),xm.get(this.uid,t,e)},t.prototype.dispatch=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},t.prototype.dispatchImmediately=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},t.prototype.getPlaceholder=function(t){return Rd(this._placeholders[t])||(this._placeholders[t]="__amcharts_"+t+"_"+function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}(8)+"__"),this._placeholders[t]},t.prototype.addToInvalidComponents=function(t){t.baseId?jf(this.invalidDatas[t.baseId],t):jf(this.invalidDatas.noBase,t)},t.prototype.removeFromInvalidComponents=function(t){t.baseId&&Af(this.invalidDatas[t.baseId],t),Af(this.invalidDatas.noBase,t)},t.prototype.addToInvalidSprites=function(t){t.baseId?Ff(this.invalidSprites[t.baseId],t):Ff(this.invalidSprites.noBase,t)},t.prototype.removeFromInvalidSprites=function(t){t.baseId&&Af(this.invalidSprites[t.baseId],t),Af(this.invalidSprites.noBase,t)},t.prototype.addToInvalidPositions=function(t){t.baseId?Ff(this.invalidPositions[t.baseId],t):Ff(this.invalidPositions.noBase,t)},t.prototype.removeFromInvalidPositions=function(t){t.baseId&&Af(this.invalidPositions[t.baseId],t),Af(this.invalidPositions.noBase,t)},t.prototype.addToInvalidLayouts=function(t){t.baseId?Ff(this.invalidLayouts[t.baseId],t):Ff(this.invalidLayouts.noBase,t)},t.prototype.removeFromInvalidLayouts=function(t){t.baseId&&Af(this.invalidLayouts[t.baseId],t),Af(this.invalidLayouts.noBase,t)},t}(),Om=new Cm;function Mm(t,e){var i=Om.registeredClasses[e];return null!=i&&t instanceof i}var Tm=function(){function t(t,e,i){this._array=t,this._start=e,this._end=i}return t.prototype.iterator=function(){var t=this;return function(e){if(t._start!==t._end)if(t._start<t._end)for(var i=t._start;i<t._end&&e(t._array[i]);++i);else for(i=t._start-1;i>=t._end&&e(t._array[i]);--i);}},t.prototype.backwards=function(){return new t(this._array,this._end,this._start)},t.prototype.range=function(e,i){if(e<=i){if(this._start===this._end)return this;if(this._start<this._end){var n=i-e;return e=Math.max(this._start+e,this._start),i=Math.min(e+n,this._end),new t(this._array,e,i)}n=i-e;return e=Math.max(this._start-e,this._end),i=Math.max(e-n,this._end),new t(this._array,e,i)}throw new Error("Start index must be lower than end index")},t}();!function(t){function e(e,i,n){var r=t.call(this,[e.events.on("inserted",(function(t){var i=t.newValue,n=r._getKey(i),s=0;hm(e.iterator(),(function(t){return t!==i&&(r._getKey(t)===n&&++s,!0)})),r._insert(i,n,s)}),void 0,!1),e.events.on("removed",(function(t){r._remove(t.oldValue)}),void 0,!1)])||this;return r._keys=[],r._groups={},r._getKey=i,r._sort=n,cm(e.iterator(),(function(t){r._insert(t,i(t))})),r}Sd(e,t),e.prototype._insert=function(t,e,i){if(null==this._groups[e]){this._groups[e]=[];var n=Nf(this._keys,this._sort,e),r=n.found,s=n.index;if(r)throw new Error("Key already exists: "+e);Lf(this._keys,s,e)}null==i?this._groups[e].push(t):Lf(this._groups[e],i,t)},e.prototype._remove=function(t){var e=this._getKey(t),i=this._groups[e];if(null!=i&&(Af(i,t),0===i.length)){delete this._groups[e];var n=Nf(this._keys,this._sort,e),r=n.found,s=n.index;if(!r)throw new Error("Key doesn't exist: "+e);Ef(this._keys,s)}},e.prototype.iterator=function(){var t,e=this;return t=fm(um(this._keys),(function(t){return um(e._groups[t])})),function(e){var i=!0,n=function(t){return i=e(t)};t((function(t){return t(n),i}))}}}(zf);var km=function(t){function e(e,i){void 0===i&&(i=!0);var n=this;if(i){var r=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);n=t.call(this,(function(){r.dispose(),cm(e.iterator(),(function(t){t.dispose()}))}))||this}else n=t.call(this,(function(){cm(e.iterator(),(function(t){t.dispose()}))}))||this;return n}return Sd(e,t),e}(_f);function Im(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}var Am=function(){function t(t){void 0===t&&(t=[]),this.events=new Xf,this._values=t}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){return-1!==this._values.indexOf(t)},t.prototype.removeValue=function(t){for(var e=0,i=this._values.length;e<i;)this._values[e]===t?(this.removeIndex(e),--i):++e},t.prototype.indexOf=function(t){return Of(this._values,t)},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.hasIndex=function(t){return t>=0&&t<this._values.length},t.prototype.getIndex=function(t){return this._values[t]},t.prototype.setIndex=function(t,e){Im(t,this._values.length);var i=this._values[t];return i!==e&&(this._values[t]=e,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:i,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})),i},t.prototype.insertIndex=function(t,e){Im(t,this._values.length+1),Lf(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},t.prototype._sortQuicksort=function(t,e,i){if(t<e){var n=this._sortPartition(t,e,i);this._sortQuicksort(t,n,i),this._sortQuicksort(n+1,e,i)}},t.prototype._sortPartition=function(t,e,i){for(var n=this._values,r=n[t],s=t-1,a=e+1;;){do{++s}while(i(n[s],r)<0);do{--a}while(i(n[a],r)>0);if(s>=a)return a;this.swap(s,a)}},t.prototype.sort=function(t){this._sortQuicksort(0,this._values.length-1,t)},t.prototype.swap=function(t,e){var i=this._values.length;if(Im(t,i),Im(e,i),t!==e){var n=this._values[t],r=this._values[e];this._values[t]=r,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:n,newValue:r}),this._values[e]=n,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:r,newValue:n})}},t.prototype.removeIndex=function(t){Im(t,this._values.length);var e=this._values[t];return Ef(this._values,t),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e}),e},t.prototype.moveValue=function(t,e){var i=this.indexOf(t);if(-1!==i){var n=this._values[i];Ef(this._values,i),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:i,oldValue:n})}null==e?(e=this._values.length,this._values.push(t)):Lf(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),-1===i&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},t.prototype.push=function(t){var e=this._values.push(t)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t}),t},t.prototype.unshift=function(t){this.insertIndex(0,t)},t.prototype.pushAll=function(t){var e=this;kf(t,(function(t){e.push(t)}))},t.prototype.copyFrom=function(t){this.pushAll(t._values)},t.prototype.pop=function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)},t.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},t.prototype.setAll=function(t){var e=this,i=Pf(this._values);this._values.length=0,kf(t,(function(t){e._values.push(t)})),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:i,newArray:this._values}),this.events.isEnabled("removed")&&kf(i,(function(t){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:t})})),this.events.isEnabled("inserted")&&kf(this._values,(function(t){e.events.dispatchImmediately("inserted",{type:"inserted",target:e,newValue:t})}))},t.prototype.clear=function(){this.setAll([])},t.prototype.iterator=function(){return um(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Od(this,(function(i){switch(i.label){case 0:t=this._values.length,e=0,i.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){kf(this._values,t)},t.prototype.range=function(t,e){if(t<=e){var i=e-t;return t=Math.max(t,0),e=Math.min(t+i,this._values.length),new Tm(this._values,t,e)}throw new Error("Start index must be lower than end index")},t.prototype.backwards=function(){return new Tm(this._values,this._values.length,0)},t}(),jm=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Sd(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;cm(t.iterator(),(function(t){e.push(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.push(e),e},e.prototype.clone=function(){for(var t=new e(this.template),i=this.values,n=i.length,r=0;r<n;++r)t.push(i[r].clone());return t},e}(Am),Fm=function(){function t(t){this._values=[],this.events=new Xf,null!=t&&this.setAll(t)}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype._insert=function(t){return this._values.push(t),this._values.length-1},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return Of(this._values,t)},t.prototype.contains=function(t){return-1!==this.indexOf(t)},t.prototype.getIndex=function(t){return this._values[t]},Object.defineProperty(t.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),t.prototype.insert=function(t){var e=this._insert(t);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:e,newValue:t})},t.prototype.remove=function(t){var e=this.indexOf(t);if(-1!==e){var i=this._values[e];Ef(this._values,e),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:e,oldValue:i})}},t.prototype.setAll=function(t){var e=this;!function(t,e){for(var i=t.length;i--;)e(t[i],i)}(this._values,(function(t,i){e._values.pop(),e.events.isEnabled("removed")&&e.events.dispatchImmediately("removed",{type:"removed",target:e,index:i,oldValue:t})})),kf(t,(function(t){e.insert(t)}))},t.prototype.clear=function(){this.setAll([])},t.prototype.slice=function(e,i){var n=new t;return n._values=this._values.slice(e,i),n},t.prototype.findClosestIndex=function(t,e,i){void 0===i&&(i="any");var n,r,s=-1,a=0;return hm(this.iterator(),(function(o){var u=e(o);if("any"===i){if(u===t)return s=a,!1;var l=Math.abs(t-u);(!Rd(r)||r>l)&&(s=a,n=u,r=l)}else"left"===i&&u<t?(!Rd(n)||n<u)&&(s=a,n=u):"right"===i&&u>=t&&(!Rd(n)||n>=u)&&(s=a,n=u);return++a,!0})),-1===s&&("left"===i?s=0:"right"===i&&(s=this.length-1)),s},t.prototype.iterator=function(){return um(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Od(this,(function(i){switch(i.label){case 0:t=this._values.length,e=0,i.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){kf(this._values,t)},t}(),Dm=function(t){function e(e){var i=t.call(this)||this;return i._ordering=e,i}return Sd(e,t),e.prototype._insert=function(t){var e=Nf(this._values,this._ordering,t).index;return Lf(this._values,e,t),e},e.prototype.indexOf=function(t){var e=Nf(this._values,this._ordering,t),i=e.found,n=e.index;return i?n:-1},e.prototype.update=function(t){var e=Of(this._values,t);if(-1!==e){var i=this._values.length-1;(0===e||this._ordering(this._values[e-1],t)<0)&&(e===i||this._ordering(t,this._values[e+1])<0)||(Ef(this._values,e),this._insert(t))}},e}(Fm),Pm=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Sd(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;cm(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.slice=function(t,i){var n=new e(this.template);return n._values=this._values.slice(t,i),n},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(Fm),Lm=function(t){function e(e,i){var n=t.call(this,i)||this;return n.template=e,n}return Sd(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;cm(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(Dm);function Em(t,e){return t===e?0:t<e?-1:1}function Nm(t){switch(t){case 0:return 0;case-1:return 1;case 1:return-1}}function Rm(t,e){return 0===t?e:t}var Bm=function(){function t(){this._callbackId=0,this._callbacks=new Dm((function(t,e){return Rm(Em(t.priority,e.priority),Em(t.id,e.id))}))}return t.prototype.addAll=function(t,e,i,n,r){void 0===n&&(n=0),this._callbacks.insert({id:++this._callbackId,key:e,callback:i,priority:n,scope:r,type:t})},t.prototype.isEnabled=function(t,e){return Mf(this._callbacks.values,(function(i){return i.key===e&&t instanceof i.type}))},t.prototype.applyAll=function(t,e,i){var n=this._callbacks.values,r=n.length;if(0==r)return i;for(var s=0;s<r;++s){var a=n[s];a.key===e&&t instanceof a.type&&(i=a.callback.call(a.scope,i,t,e))}return i},t}(),_m=new Bm,zm=function(){function t(t){this._callbackId=0,this._callbacks=new Dm((function(t,e){return Rm(Em(t.priority,e.priority),Em(t.id,e.id))})),this._disabled={},this.object=t,this.events=this._callbacks.events}return t.prototype.add=function(t,e,i,n){void 0===i&&(i=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:e,priority:i,scope:n})},t.prototype.has=function(t,e,i,n){return void 0===i&&(i=0),vm(this._callbacks.iterator(),(function(r){return r.key===t&&r.callback===e&&r.priority===i&&r.scope===n}))},t.prototype.remove=function(t,e){var i=this;kf(lm(this._callbacks.iterator()),(function(n){n.key!==t||Gd(e)&&e!==n.priority||i._callbacks.remove(n)}))},t.prototype.enableKey=function(t){delete this._disabled[t]},t.prototype.disableKey=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._hasListenersByType=function(t){return Mf(this._callbacks.values,(function(e){return e.key===t}))},t.prototype.isEnabled=function(t){return null==this._disabled[t]&&(this._hasListenersByType(t)||_m.isEnabled(this.object,t))},t.prototype._shouldDispatch=function(t){var e=this._disabled[t];return!Gd(e)||(e<=1?delete this._disabled[t]:--this._disabled[t],!1)},t.prototype.apply=function(t,e){if(this._shouldDispatch(t)){var i=this._callbacks.values,n=i.length;if(n>0)for(var r=0;r<n;++r){var s=i[r];s.key===t&&(e=s.callback.call(s.scope,e,this.object,t))}return e=_m.applyAll(this.object,t,e)}return e},t.prototype.keys=function(){return lm(fm(this._callbacks.iterator(),(function(t){return t.key})))},t.prototype.copyFrom=function(t){var e=this;cm(t._callbacks.iterator(),(function(t){e.add(t.key,t.callback,t.priority,t.scope)})),nm(t._disabled,(function(t,i){e._disabled[t]=i}))},t.prototype.clear=function(){this._callbacks.clear()},t}(),Vm={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function Gm(t,e){var i;return Vm[t]?i=Vm[t]:"#"===t.charAt(0)?i=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,(function(t,e,i,n){return e+e+i+i+n+n}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,(function(t,e,i,n,r){return e+e+i+i+n+n+r+r}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:parseInt(i[4],16)/256}:void 0}(t)}(t):t.match(/^rgba?\(/)&&(i=function(t){var e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(!(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return;return{r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3]),a:parseFloat(e[4])}}(t)),i||(i={r:0,g:0,b:0,a:1}),Rd(e)&&(i.a=e),i}function $m(t){return 1==t.length?"0"+t:""+t}function Wm(t,e,i){return i=Xd(i,0,1),t?e?{r:t.r+Math.round((e.r-t.r)*i),g:t.g+Math.round((e.g-t.g)*i),b:t.b+Math.round((e.b-t.b)*i),a:(t.a||1)+Math.round(((e.a||1)-(t.a||1))*i)}:t:e||t}function qm(t,e){var i=e>0?255-t:t;return Math.round(i*e)}function Hm(t){var e,i,n,r=t.h,s=t.s,a=t.l;if(0==s)e=i=n=a;else{var o=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},u=a<.5?a*(1+s):a+s-a*s,l=2*a-u;e=o(l,u,r+1/3),i=o(l,u,r),n=o(l,u,r-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*n)}}function Um(t){var e=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(e,i,n),s=Math.min(e,i,n),a=0,o=0,u=(r+s)/2;if(r===s)a=o=0;else{var l=r-s;switch(o=u>.5?l/(2-r-s):l/(r+s),r){case e:a=(i-n)/l+(i<n?6:0);break;case i:a=(n-e)/l+2;break;case n:a=(e-i)/l+4}a/=6}return{h:a,s:o,l:u}}function Km(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}var Jm=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){return this._value?function(t){return"#"+$m(t.r.toString(16))+$m(t.g.toString(16))+$m(t.b.toString(16))}(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rgba",{get:function(){return this._value?function(t){return Rd(t.a)&&1!==t.a?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":"rgb("+t.r+","+t.g+","+t.b+")"}(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return null!=this._value&&null!=this._value.a?this._value.a:1},set:function(t){this._value&&(this._value.a=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new t({r:255,g:255,b:255})),this._lightColor},set:function(t){this._lightColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new t({r:0,g:0,b:0})),this._darkColor},set:function(t){this._darkColor=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},t.prototype.lighten=function(e){return new t(function(t,e){return t?{r:Math.max(0,Math.min(255,t.r+qm(t.r,e))),g:Math.max(0,Math.min(255,t.g+qm(t.g,e))),b:Math.max(0,Math.min(255,t.b+qm(t.b,e))),a:t.a}:t}(this.rgb,e))},t.prototype.brighten=function(e){return new t(function(t,e){if(t){var i=qm(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}(this.rgb,e))},t.prototype.saturate=function(e){return new t(function(t,e){if(null==t||1==e)return t;var i=Um(t);return i.s=e,Hm(i)}(this.rgb,e))},Object.defineProperty(t.prototype,"alternative",{get:function(){if(null!=this.rgb)return Km(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),t}();function Ym(t,e){if(!Rd(t))return new Jm(void 0);if("string"==typeof t){var i="_color_"+t+"_"+(e||"1"),n=Om.getCache(i);if(n)return new Jm({r:n.r,g:n.g,b:n.b,a:n.a});var r=Gm(t,e);return Om.setCache(i,r),new Jm(r)}return t instanceof Jm?(Rd(e)&&(t.alpha=e),t):new Jm(t)}function Zm(t){return Rd(t)&&!function(t){return t instanceof Jm}(t)?function(t){return Ym(t)}(t):t}var Xm=function(){function t(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return t.prototype.debug=function(){},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid||(this._uid=Om.getUniqueId(),Om.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new wm),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new wm),this._delayedMap},enumerable:!0,configurable:!0}),t.prototype.addDelayedMap=function(t,e){var i=this.delayedMap;i.hasKey(e)||i.setKey(e,[]),i.getKey(e).push({property:t,target:this})},t.prototype.processDelayedMap=function(){var t=this;this.delayedMap.each((function(e,i){if(t.map.hasKey(e)){var n=t.map.getKey(e);kf(i,(function(t){t.target[t.property]=n})),t.delayedMap.removeKey(e)}}))},t.prototype.applyTheme=function(){var t=this;if(Om){var e=this.getCurrentThemes();e&&kf(e,(function(e,i){e(t)}))}},Object.defineProperty(t.prototype,"themes",{get:function(){return this._themes},set:function(t){this._themes=t},enumerable:!0,configurable:!0}),t.prototype.getCurrentThemes=function(){return this.themes||Om.themes},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;0!==t.length;){t.shift().dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var e=this._uid;null!=e&&Om.map.removeKey(e)}},t.prototype.addDisposer=function(t){this._disposers.push(t)},t.prototype.removeDispose=function(t){if(!this._disposed){var e=Of(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()},t.prototype.clone=function(t){t||(t="clone-"+Om.getUniqueId());var e=new this.constructor;return e.cloneId=t,e.copyFrom(this),e},Object.defineProperty(t.prototype,"clones",{get:function(){return this._clones||(this._clones=new Am),this._clones},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){t.clones.push(this),this.clonedFrom=t},Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,i){xm.set(this.uid,t,e,i)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),xm.get(this.uid,t,e)},t.prototype.clearCache=function(){xm.clear(this.uid)},t.prototype.setTimeout=function(t,e){var i=this,n=setTimeout((function(){i.removeDispose(r),t()}),e),r=new _f((function(){clearTimeout(n)}));return this._disposers.push(r),r},t.prototype.setInterval=function(t,e){var i=this,n=setInterval((function(){i.removeDispose(r),t()}),e),r=new _f((function(){clearTimeout(n)}));return this._disposers.push(r),r},Object.defineProperty(t.prototype,"config",{set:function(t){try{this.processConfig(t)}catch(t){this.raiseCriticalError(t)}},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){var i=this;if(e){var n=this;if(rm(e,(function(e,r){var s,a=r;if("callback"==e&&"function"==typeof r&&r.call(n),i.hasProperty(e))if(!$d(a)||!Rd(a.type)||$d(n[e])&&Rd(n[e].className)&&!a.forceCreate&&n[e].className==a.type||i.asIs(e)?s=n[e]:(s=i.createClassInstance(a.type))?n[e]=s:s=n[e],s instanceof zm)i.processAdapters(s,a);else if(s instanceof Xf)i.processEvents(s,a);else if("locale"==e&&Vd(a))window["am4lang_"+a]&&(n[e]=window["am4lang_"+a]);else if("parent"==e&&Vd(a)){var o=i.map.getKey(a);o?n[e]=o:i.addDelayedMap("parent",a)}else if(i.asIs(e))n[e]=a;else if(i.asFunction(e)&&Vd(a)){if(!Rd(Om.registeredClasses[a]))throw Error("Invalid easing function: "+a);n[e]=Om.registeredClasses[a]}else if(a instanceof t)n[e]=a;else if(s instanceof t)s.config=a;else if(s instanceof jm||s instanceof Pm||s instanceof Lm){if(Wd(a))s instanceof jm?i.processListTemplate(a,s):i.processOrderedTemplate(a,s);else if($d(a))if(a instanceof t)s.template=a;else{var u=void 0;u=Rd(a.template)?a.template:a,s.template instanceof t?s.template.config=u:nm(u,(function(e,n){var r=s.template[e];r instanceof zm?i.processAdapters(r,n):r instanceof Xf?i.processEvents(r,n):r instanceof Sm?i.processDictionaryTemplate(r,n):s.template[e]instanceof t?s.template[e].config=n:$d(n)&&Rd(n.type)?(r=i.createClassInstance(n.type))?(r instanceof t&&(r.config=n),s.template[e]=r):s.template[e]=n:r instanceof Am?i.processList(n,r):s.template[e]=i.maybeColorOrPercent(n)})),Rd(a.values)&&(s instanceof jm?i.processListTemplate(a.values,s):i.processOrderedTemplate(a.values,s))}}else s instanceof Am?"children"==e?i.processList(a,s,i):i.processList(a,s):s instanceof Sm?i.processDictionaryTemplate(s,a):s instanceof wm?i.processDictionary(s,a):s instanceof Jm||s instanceof Id?n[e]=i.maybeColorOrPercent(a):$d(s)&&$d(a)?om(a,s):(a=i.maybeColorOrPercent(a),n[e]=a);else i.isReserved(e)||(n[e]=a)}),this.configOrder),this.processingErrors.length){var r=this.processingErrors.join("\n");throw this._processingErrors=[],Error(r)}}},t.prototype.maybeColorOrPercent=function(t){if(Vd(t)){if(t.match(/^[\-]?[0-9.]+\%$/))return Ad(Ld(t));if(t.match(/^\#[0-9abcdef]{3,}$/i))return Ym(t)}return t},t.prototype.processAdapters=function(t,e){var i=this;Wd(e)?kf(e,(function(e,n){t.add(e.key,e.callback,e.priority||0,i)})):$d(e)&&nm(e,(function(e,i){t.has(e,i)||t.add(e,i)}))},t.prototype.processEvents=function(t,e){var i=this;Wd(e)?kf(e,(function(e,n){t.on(e.type,e.callback,i)})):$d(e)&&nm(e,(function(e,i){t.has(e,i)||t.on(e,i)}))},t.prototype.processDictionaryTemplate=function(e,i){$d(i)&&nm(i,(function(i,n){var r;(r="template"==i?e.template:e.hasKey(i)?e.getKey(i):e.create(i))instanceof t?r.config=n:$d(r)&&$d(n)?om(n,r):r.setKey(i,n)}))},t.prototype.processDictionary=function(t,e){$d(e)&&nm(e,(function(e,i){t.setKey(e,i)}))},t.prototype.processListTemplate=function(e,i){var n=this;for(kf(e,(function(e,r){var s,a=n.getConfigEntryType(e);if(i.hasIndex(r)&&!e.forceCreate)s=i.getIndex(r);else{if(e instanceof t)return void i.push(e);s=a?i.create(a):i.create()}e===s||$d(e)&&(s instanceof t?s.config=e:$d(s)&&$d(e)?om(e,s):i.setIndex(i.indexOf(s),e))}));e.length>i.length;)i.pop()},t.prototype.processOrderedTemplate=function(e,i){var n=this;kf(e,(function(e,r){var s,a=n.getConfigEntryType(e);s=a?i.create(a):i.create(),$d(e)&&(s instanceof t?s.config=e:$d(s)&&$d(e)?om(e,s):i.insert(e))}))},t.prototype.processList=function(e,i,n){var r=this;Wd(e)||(e=[e]);var s=i.length,a=0;for(kf(e,(function(e,o){if($d(e)){var u=void 0;if(o<s&&!e.forceCreate)u=i.getIndex(o);else{if(e instanceof t)return void i.push(e);a++,u=r.createEntryInstance(e),n?u.parent=n:i.push(u)}u instanceof t?u.config=e:$d(u)&&$d(e)&&om(e,u)}else i.hasIndex(o)?i.setIndex(o,e):i.push(e)}));!n&&e.length+a<i.length;)i.pop()},t.prototype.configOrder=function(t,e){return t==e?0:"language"==t?-1:"language"==e?1:0},t.prototype.asIs=function(t){return-1!=Of(["locale"],t)},t.prototype.asFunction=function(t){return!1},t.prototype.createClassInstance=function(t){if(Rd(Om.registeredClasses[t]))return new Om.registeredClasses[t];throw Error('Invalid type: "'+t+'".')},t.prototype.createEntryInstance=function(t){var e;return Rd(t.type)&&(e=this.createClassInstance(t.type)),e||t},t.prototype.getConfigEntryType=function(t){if(Rd(t.type)){if(Rd(Om.registeredClasses[t.type]))return Om.registeredClasses[t.type];throw Error('Invalid type: "'+t.type+'".')}},t.prototype.hasProperty=function(t){return t in this},t.prototype.isReserved=function(t){return-1!==["type","forceCreate"].indexOf(t)},Object.defineProperty(t.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),t}(),Qm=function(t){function e(){var e=t.call(this)||this;return e.className="BaseObjectEvents",e}return Sd(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new Xf,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},e.prototype.dispatchImmediately=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e._eventDispatcher&&this.events.copyFrom(e._eventDispatcher)},e}(Xm);function tv(t,e){return nm(t,(function(t,i){Rd(i)&&(e[t]=i)})),e}function ev(t){return/^[^#]*/.exec(t)[0]}function iv(){var t="#";if(/apple/i.test(navigator.vendor)){var e=document.baseURI;if(e){e=ev(e);var i=ev(location.href);e!==i&&(t=i+t)}}return t}function nv(t){return Rd(t)&&""!==t.toString()}function rv(t,e){return Gd(t)?t:null!=t&&Gd(t.value)&&Gd(e)?e*t.value:0}function sv(t,e,i){var n;return Gd(t)?(n=t)<0&&(n=i?e+n:e-n):null!=t&&Gd(t.value)&&(n=e*t.value),n}function av(t){var e=t.split("");return e[0]=e[0].toUpperCase(),e.join("")}function ov(t){return JSON.stringify(t)}function uv(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function lv(t,e,i,n,r){if(t.length<=e)return[t];var s=[];if(i){for(var a=-1,o=t.replace(/([,;:!?\\\/]+|[\s])/g,"____$1____").split("____"),u=1;u<o.length;u++){"."!=(l=o[u])&&","!=l||!o[u-1].match(/[\w]+$/)||(o[u-1]+=l,o[u]="")}for(u=0;u<o.length;u++){var l,h=(l=o[u]).length;if(0!==h){if(h>e&&(!0!==i||0!=r)){if(n&&(l=fv(l)),d=l.match(new RegExp(".{1,"+e+"}","g"))){if(n)for(var c=0;c<d.length;c++)d[c]=fv(d[c]);s=s.concat(d)}}else-1===a&&(s.push(""),a=0),s[a].length+h+1>e&&""!==s[a]&&(s.push(""),a++),s[a]+=l;a=s.length-1}}}else{var d;if(d=t.match(new RegExp(".{1,"+e+"}","g"))){if(n)for(c=0;c<d.length;c++)d[c]=fv(d[c]);s=d}}return 1==s.length&&i&&r&&s[0].length>e&&(s=[]),s}function hv(t,e,i,n,r){return t.length<=e?t:((e-=i.length)<1&&(e=1),(lv(t,e,n,r)[0]||"")+i)}function cv(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function dv(t){return t.replace(/[\s\uFEFF\xA0]+$/g,"")}function fv(t){return t.split("").reverse().join("")}function mv(t,e,i){return void 0===e&&(e=0),void 0===i&&(i="0"),"string"!=typeof t&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function vv(t){return t.replace(/\/(date|number|duration)$/i,"")}function pv(t){return t?t.replace(/<[^>]*>/g,""):t}function bv(t){return t?pv((""+t).replace(/[\n\r]+/g,". ")):t}function gv(t){if(zd(t)){var e=new Date(t);return e.setMilliseconds(t.getMilliseconds()),e}if(Gd(t))return new Date(t);var i=Number(t);return Gd(i)?new Date(i):new Date(t)}function yv(t){if(zd(t))return t.getTime();if(Gd(t))return t;if(Vd(t)){var e=Number(t);return Gd(e)?e:void 0}}function wv(t,e){var i=new Date(t.getFullYear(),0,0),n=t.getTime()-i.getTime()+60*(i.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(n/864e5)}function Sv(t,e){var i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),n=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-n);var r=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-r.getTime())/864e5+1)/7)}function xv(t,e){var i=Sv(new Date(t.getFullYear(),t.getMonth(),1)),n=Sv(t);return 1==n&&(n=53),n-i+1}function Cv(t,e){return t>12?t-=12:0===t&&(t=12),Rd(e)?t+(e-1):t}function Ov(t,e,i,n){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),n)return e?"Coordinated Universal Time":"UTC";var r=t.toLocaleString("UTC"),s=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(r.length);return!1===i&&(s=s.replace(/ (standard|daylight|summer|winter) /i," ")),s}function Mv(t,e,i){return t>i?i:t<e?e:t}function Tv(t,e,i){var n=i-e;return(t>i||t<e)&&(t=e+(t-n*Math.floor(t/n))),t}function kv(t,e){var i=t.x,n=t.y,r=[];if(e){for(;Rd(e.parent);)r.push(e),e=e.parent;r.reverse();for(var s=0;s<r.length;s++){var a=r[s],o=a.rotation,u=i-a.pixelX-a.ex,l=n-a.pixelY-a.ey;a.dx&&(i-=a.dx),a.dy&&(n-=a.dy);var h=a.scale;a.group&&(h=a.group.scale),i=(ef(-o)*u-Qd(-o)*l)/h-a.pixelPaddingLeft,n=(ef(-o)*l+Qd(-o)*u)/h-a.pixelPaddingTop}}return{x:i,y:n}}function Iv(t,e){var i=t.x,n=t.y;if(e)for(;Rd(e.parent);){var r=e.rotation;i+=e.pixelPaddingLeft+e.ex,n+=e.pixelPaddingTop+e.ey;var s=e.scale;e.group&&(s=e.group.scale);var a=e.pixelX+(i*ef(r)-n*Qd(r))*s,o=e.pixelY+(i*Qd(r)+n*ef(r))*s;e.dx&&(a+=e.dx),e.dy&&(o+=e.dy),i=a,n=o,e=e.parent}return{x:i,y:n}}function Av(t,e,i){return kv(Iv(t,e),i)}function jv(t,e){var i=Iv(t,e),n=Iv({x:t.x+t.width,y:t.y+t.height},e);return{x:i.x,y:i.y,width:n.x-i.x,height:n.y-i.y}}function Fv(t,e,i){try{var n=e.getBoundingClientRect();return Gd(i)||(i=1),{x:(t.x-n.left)/i,y:(t.y-n.top)/i}}catch(e){return t}}function Dv(t,e){try{var i=e.getBoundingClientRect();return{x:t.x+i.left,y:t.y+i.top}}catch(e){return t}}function Pv(t,e){return e&&e.htmlContainer?kv(Fv(t,Bd(e.htmlContainer),e.svgContainer.cssScale),e):t}function Lv(t,e){return e&&e.htmlContainer?Dv(Iv(t,e),Bd(e.htmlContainer)):t}var Ev=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function Nv(t){var e=Ev.exec(t);return{protocol:e&&e[1]||"",separator:e&&e[2]||"",authority:e&&e[3]||"",domain:e&&e[4]||"",port:e&&e[5]||"",path:e&&e[6]||"",query:e&&e[7]||"",hash:e&&e[8]||""}}function Rv(t){return t.protocol+t.separator+t.authority+t.domain+t.port+t.path+t.query+t.hash}function Bv(t){return""===t.protocol&&""===t.separator&&""===t.authority&&""===t.domain&&""===t.port}function _v(t,e){var i=Nv(t),n=Nv(e);if(Bv(i))throw new Error("Left URL is not absolute");if(Bv(n)){if(""!==n.path)if("/"===n.path[0])i.path=n.path;else{var r=i.path.split(/\//),s=n.path.split(/\//);if(0===r.length?0!==s.length&&r.push(""):r.length>1&&r.pop(),function(t,e){for(var i=e.length,n=0;n<i;++n)t.push(e[n])}(r,s),i.path=r.join("/"),""!==i.path&&"/"!==i.path[0])throw new Error("URL path must start with /")}return i.query=n.query,i.hash=n.hash,Rv(i)}return Rv(n)}function zv(){return!!window.MSInputMethodContext&&!!document.documentMode}function Vv(t){return+t}function Gv(t,e){return Math.pow(t,e)}function $v(t,e){return 1-Math.pow(1-t,e)}function Wv(t,e){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}function qv(t){return $v(t,3)}function Hv(t){return Math.sin(t*Hd)}function Uv(t){return t*t*t}function Kv(t){return--t*t*t+1}Om.registeredClasses["ease.linear"]=Vv,Om.registeredClasses["ease.quadIn"]=function(t){return t*t},Om.registeredClasses["ease.quadOut"]=function(t){return t*(2-t)},Om.registeredClasses["ease.quadInOut"]=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2},Om.registeredClasses["ease.polyIn"]=Gv,Om.registeredClasses["ease.polyOut"]=$v,Om.registeredClasses["ease.polyInOut"]=Wv,Om.registeredClasses["ease.polyIn3"]=function(t){return Gv(t,3)},Om.registeredClasses["ease.polyOut3"]=qv,Om.registeredClasses["ease.polyInOut3"]=function(t){return Wv(t,3)},Om.registeredClasses["ease.expIn"]=function(t){return Math.pow(2,10*t-10)},Om.registeredClasses["ease.expOut"]=function(t){return 1-Math.pow(2,-10*t)},Om.registeredClasses["ease.expInOut"]=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2},Om.registeredClasses["ease.sinIn"]=function(t){return 1-Math.cos(t*Hd)},Om.registeredClasses["ease.sinOut"]=Hv,Om.registeredClasses["ease.sinInOut"]=function(t){return(1-Math.cos(qd*t))/2},Om.registeredClasses["ease.cubicIn"]=Uv,Om.registeredClasses["ease.cubicOut"]=Kv,Om.registeredClasses["ease.cubicInOut"]=function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2},Om.registeredClasses["ease.circleIn"]=function(t){return 1-Math.sqrt(1-t*t)},Om.registeredClasses["ease.circleOut"]=function(t){return Math.sqrt(1- --t*t)},Om.registeredClasses["ease.circleInOut"]=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2};var Jv=4/11,Yv=7.5625;function Zv(t){return(t=+t)<Jv?Yv*t*t:t<.7272727272727273?Yv*(t-=.5454545454545454)*t+.75:t<.9090909090909091?Yv*(t-=.8181818181818182)*t+.9375:Yv*(t-=.9545454545454546)*t+.984375}Om.registeredClasses["ease.bounceIn"]=function(t){return 1-Zv(1-t)},Om.registeredClasses["ease.bounceOut"]=Zv,Om.registeredClasses["ease.bounceInOut"]=function(t){return((t*=2)<=1?1-Zv(1-t):Zv(t-1)+1)/2};var Xv=2*Math.PI,Qv=.3/Xv,tp=Math.asin(1)*Qv;Om.registeredClasses["ease.elasticIn"]=function(t){return 1*Math.pow(2,10*--t)*Math.sin((tp-t)/Qv)},Om.registeredClasses["ease.elasticOut"]=function(t){return 1-1*Math.pow(2,-10*(t=+t))*Math.sin((t+tp)/Qv)},Om.registeredClasses["ease.elasticInOut"]=function(t){return((t=2*t-1)<0?1*Math.pow(2,10*t)*Math.sin((tp-t)/Qv):2-1*Math.pow(2,-10*t)*Math.sin((tp+t)/Qv))/2};var ep=function(t){function e(){var e=t.call(this)||this;return e.transitionDuration=0,e.transitionEasing=Kv,e.properties={},e.propertyFields={},e.filters=new Am,e.isTemplate=!1,e.className="SpriteState",e._disposers.push(new km(e.filters)),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){var t=this;return this._adapterO||(this._adapterO=new zm(this),this._adapterO.events.on("inserted",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1),this._adapterO.events.on("removed",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.getPropertyValue=function(t){var e=this.properties[t],i=this.sprite;if(i){var n=this.propertyFields[t];if(Rd(n)&&(i.dataItem&&(e=i.dataItem.dataContext[n]),null==e&&(e="__unset")),Rd(e))this._adapterO&&(e=this._adapterO.apply(t,e));else{var r=i.getPropertyValue(t);(e=this._adapterO?this._adapterO.apply(t,r):r)==r&&(e=void 0)}}return e},e.prototype.copyFrom=function(t){t&&t!=this&&(this.transitionDuration=t.transitionDuration,this.transitionEasing=t.transitionEasing,tv(t.properties,this.properties),tv(t.propertyFields,this.propertyFields),this.filters.copyFrom(t.filters),t._adapterO&&this.adapter.copyFrom(t._adapterO))},Object.defineProperty(e.prototype,"allValues",{get:function(){var t=this,e={};(nm(this.properties,(function(i,n){e[i]=t.getPropertyValue(i)})),this._adapterO)&&nm(this._adapterO.keys(),(function(i,n){var r=t.getPropertyValue(n);e[n]=r}));return nm(this.propertyFields,(function(i){var n=t.getPropertyValue(i);e[i]=n})),e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.properties={},this.filters.clear()},e.prototype.processConfig=function(e){Rd(e)&&Rd(e.properties)&&nm(e.properties,(function(t,i){Vd(i)&&(i.match(/^[0-9.\-]+\%$/)?e.properties[t]=Ad(Ld(i)):i.match(/^\#[0-9abcdef]{3,}$/i)&&(e.properties[t]=Zm(i)))})),t.prototype.processConfig.call(this,e)},e.prototype.asFunction=function(e){return"transitionEasing"==e||t.prototype.asIs.call(this,e)},e}(Xm);Om.registeredClasses.SpriteState=ep;var ip=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._interactionEvents=new wm,e}return Sd(e,t),e.prototype._dispatchSpriteEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=sm(t,{target:this.target});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._dispatchSpritePointEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=sm(t,{target:this.target,spritePoint:t.point?Pv(t.point,this.target):void 0,svgPoint:this.target.getSvgPoint(t.point)});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._addInteractionObjectEvent=function(t,e,i,n){var r=this,s=n+"-"+t;return this._interactionEvents.insertKeyIfEmpty(s,(function(){var a=r.target.interactions.events.on(t,e,i,n);return new Gf((function(){r._interactionEvents.removeKey(s),a.dispose()}))})).increment()},e.prototype._on=function(e,i,n,r,s,a){var o=t.prototype._on.call(this,e,i,n,r,s,a),u=[o.disposer];switch(i){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":u.push(this._addInteractionObjectEvent(i,this._dispatchSpritePointEvent,this,s));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":u.push(this._addInteractionObjectEvent(i,this._dispatchSpriteEvent,this,s))}switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0}return o.disposer=new zf(u),o},e}(Qf),np=function(){function t(){}return t.opacity=1,t.strokeOpacity=1,t.strokeWidth=1,t.fillOpacity=1,t.fill=Ym("#000000"),t.stroke=Ym("#000000"),t.focusable=void 0,t.tabindex=0,t}(),rp={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};function sp(t,e,i){return e+(i-e)*t}function ap(t,e,i){return new Id(sp(t,e.percent,i.percent))}function op(t,e,i){var n=new Jm(Wm(e.rgb,i.rgb,t));return e.alpha!=i.alpha&&(n.alpha=e.alpha+(i.alpha-e.alpha)*t),n}function up(t,e){return e+t.charAt(0).toUpperCase()+t.substr(1)}var lp,hp=function(){function t(t){this._disposer=new _f((function(){for(;0!==t.length;)t[0].dispose()}))}return t.prototype.isDisposed=function(){return this._disposer.isDisposed()},t.prototype.dispose=function(){this._disposer.dispose()},t}(),cp=function(t){function e(e,i,n,r){var s=t.call(this)||this;return s.duration=0,s.easing=Vv,s.progress=0,s._loop=0,s._pause=!1,s._delayTimeout=null,s._time=0,s._isFinished=!1,s.className="Animation",s.object=e,s.animationOptions=Df(i),s.duration=n,r&&(s.easing=r),s.applyTheme(),s}return Sd(e,t),e.prototype.debug=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.pause()},e.prototype.delay=function(t){var e=this;if(t>0){this.pause(),jf(this.object.animations,this);var i=setTimeout((function(){e._delayTimeout=null,e.start()}),t);this._delayTimeout=new _f((function(){clearTimeout(i)}))}return this},e.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,jf(Rb.animations,this),jf(this.object.animations,this),Rb.requestFrame()},e.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var t=this.animationOptions.length-1;t>=0;t--){var e=this.animationOptions[t];if(Rd(e.from)||(e.childObject?e.from=e.childObject[e.property]:(e.from=this.object[e.property],Rd(e.from)||(e.from=np[e.property]))),e.from==e.to)Af(this.animationOptions,e);else if(!Rd(e.from)||!(e.from instanceof Id)&&e.to instanceof Id||e.from instanceof Id&&!(e.to instanceof Id))this.staticOptions.push(e),Af(this.animationOptions,e);else if(Gd(e.to))if(e.updateMethod=sp,e.from instanceof Id){var i=this.object[up(e.property,"pixel")];isNaN(i)?(this.staticOptions.push(e),Af(this.animationOptions,e)):e.from=i}else isNaN(e.from)&&(this.staticOptions.push(e),Af(this.animationOptions,e));else if(e.to instanceof Jm)e.from?e.updateMethod=op:(this.staticOptions.push(e),Af(this.animationOptions,e));else if(e.to instanceof Id){if(e.updateMethod=ap,!isNaN(e.from)){i=this.object[up(e.property,"relative")];isNaN(i)||(e.from=Ad(100*i))}}else this.staticOptions.push(e),Af(this.animationOptions,e)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var n={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",n)}return this.update(),0===this.duration&&this.end(),this},e.prototype.loop=function(t){return Gd(t)||(t=1/0),this._loop=t,this},e.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),Af(Rb.animations,this),Af(this.object.animations,this),this},e.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},e.prototype.end=function(){if(0==this._loop&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var t={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",t)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},e.prototype.kill=function(){this.pause(),this._isFinished=!0},e.prototype.isFinished=function(){return this._isFinished},e.prototype.applyStaticOptions=function(){var t=this;kf(this.staticOptions,(function(e){e.childObject?e.childObject[e.property]=1==t.progress?e.to:e.from:t.object[e.property]=1==t.progress?e.to:e.from}))},e.prototype.stop=function(t){if(this.pause(),!t&&this.events.isEnabled("animationstopped")){var e={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",e)}return this},e.prototype.setProgress=function(t){var e=this;if(this._time=this.duration*t,kf(this.animationOptions,(function(i){if(i.updateMethod&&Rd(i.from)){var n=i.updateMethod(t,i.from,i.to);i.childObject?i.childObject[i.property]=n:e.object[i.property]=n}})),this.progress=t,this.events.isEnabled("animationprogress")){var i={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",i)}Rb.requestFrame()},e.prototype.update=function(){if(!this._pause){var t=void 0;this._time=Xd(Date.now()-this._startTime,0,this.duration);var e=this._time/this.duration;t=this.easing(e),(0==this.duration||!Gd(t)||e>=1)&&(t=1),this.setProgress(t),1==Yd(this._time/this.duration,6)&&this.end()}return this},Object.defineProperty(e.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),e.prototype.stopSameAnimations=function(){var t=this;kf(Pf(this.object.animations),(function(e){if(e!==t&&!e.delayed){var i=[];kf(t.animationOptions,(function(t){kf(e.animationOptions,(function(n){t.property==n.property&&t.childObject==n.childObject&&(i.push(n),0==e.animationOptions.length&&e.kill())}))})),kf(i,(function(t){Af(e.animationOptions,t)}))}}))},e.prototype.asFunction=function(e){return"easing"==e||t.prototype.asIs.call(this,e)},e}(Qm),dp="http://www.w3.org/2000/svg",fp="http://www.w3.org/2000/xmlns/",mp="http://www.w3.org/1999/xlink";function vp(t,e,i,n){return t.addEventListener(e,i,n||!1),new _f((function(){t.removeEventListener(e,i,n||!1)}))}function pp(t){if(Vd(t)){var e=document.getElementById(t);if(null==e&&(e=document.getElementsByClassName(t)[0]),e instanceof HTMLElement)return e}else if(t instanceof HTMLElement)return t}function bp(t,e){if(t)if(t.classList){kf(e.split(" "),(function(e){t.classList.add(e)}))}else{var i=t.getAttribute("class");i?t.setAttribute("class",i.split(" ").filter((function(t){return t!==e})).join(" ")+" "+e):t.setAttribute("class",e)}}function gp(t,e){if(t)if(t.classList)t.classList.remove(e);else{var i=t.getAttribute("class");i&&t.setAttribute("class",i.split(" ").filter((function(t){return t!==e})).join(" "))}}function yp(t,e,i){t.style[e]=i}function wp(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function Sp(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function xp(t,e){for(var i=e;;){if(t===i)return!0;if(null==i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}function Cp(t){for(var e=t;;){if(null==e.parentNode)return null!=e.host?e:null;e=e.parentNode}}function Op(t){for(var e=t.ownerDocument,i=t;;){if(null==i.parentNode)return i===e||null!=i.host?i:null;i=i.parentNode}}function Mp(t){!function(t){qf.push(t),Yf()}((function(){try{var e=t.getBoundingClientRect(),i=e.left-Math.round(e.left),n=e.top-Math.round(e.top);0!==i&&Zf((function(){t.style.left=i+"px"})),0!==n&&Zf((function(){t.style.top=n+"px"}))}catch(t){}}))}var Tp=function(t){function e(e,i,n){var r=this,s=function(t){if(null==t)return Rd(lp)||((e=document.createElement("style")).type="text/css",document.head.appendChild(e),lp=e.sheet),lp;var e;return(e=document.createElement("style")).type="text/css",t.appendChild(e),e.sheet}(e);return(r=t.call(this,(function(){var t=Of(s.cssRules,r._rule);if(-1===t)throw new Error("Could not dispose StyleRule");s.deleteRule(t)}))||this)._rule=function(t,e){var i=t.cssRules.length;return t.insertRule(e+"{}",i),t.cssRules[i]}(s,i),nm(n,(function(t,e){r.setStyle(t,e)})),r}return Sd(e,t),Object.defineProperty(e.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(t){this._rule.selectorText=t},enumerable:!0,configurable:!0}),e.prototype._setVendorPrefixName=function(t,e){var i=this._rule.style;i.setProperty("-webkit-"+t,e,""),i.setProperty("-moz-"+t,e,""),i.setProperty("-ms-"+t,e,""),i.setProperty("-o-"+t,e,""),i.setProperty(t,e,"")},e.prototype.setStyle=function(t,e){"transition"===t?this._setVendorPrefixName(t,e):this._rule.style.setProperty(t,e,"")},e}(_f),kp=0;function Ip(t){var e=wp(t,"font-family");if(e)return e;var i=t.parentElement||t.parentNode;return i?Ip(i):void 0}function Ap(t){var e=wp(t,"font-size");if(e)return e;var i=t.parentElement||t.parentNode;return i?Ap(i):void 0}!function(t){function e(e,i,n){var r=this,s=Rd(n)?n:"__style_"+ ++kp+"__";return(r=t.call(this,e,"."+s,i)||this)._className=s,r}Sd(e,t),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t,this.selector="."+t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._className}}(Tp);var jp=function(){function t(t){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,this.node="string"==typeof t?document.createElementNS(dp,t):t}return t.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(t.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),t.prototype.transform=function(){var t="translate("+this._x+","+this._y+")";if(1!=this._scale&&(t+=(t?" ":"")+"scale("+this._scale+")"),0!=this._rotation){var e="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(e="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),t+=(t?" ":"")+e}this._transformString=t,this.node.setAttribute("transform",t)},t.prototype.getBBox=function(){var t={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var e=this.node.getBBox();t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}catch(t){}return t},t.prototype.moveTo=function(t){if(t){var e=t.x,i=t.y;this._x==e&&this._y==i||(this._x=e,this._y=i,this.transform())}},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(t){this.node.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX!=t&&(this._rotationX=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY!=t&&(this._rotationY=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this.transform())},enumerable:!0,configurable:!0}),t.prototype.removeAttr=function(t){this.node.removeAttribute(t)},t.prototype.attr=function(t){var e=this;return nm(t,(function(t,i){Rd(i)?e.node.setAttribute(t,i):e.node.removeAttribute(t)})),this},t.prototype.getAttr=function(t){return this.node.getAttribute(t)},t.prototype.attrNS=function(t,e,i){return this.node.setAttributeNS(t,e,i),this},t.prototype.getAttrNS=function(t,e){return this.node.getAttributeNS(t,e)},t.prototype.removeStyle=function(t){this.node.style[t]=null,delete this.node.style[t]},t.prototype.getStyle=function(t){return this.node.style[t]},t.prototype.addStyle=function(t){var e=this;return nm(t,(function(t,i){Rd(i)?e.node.style[t]=i:e.removeStyle(t)})),this},t.prototype.addClass=function(t){bp(this.node,t)},t.prototype.removeClass=function(t){gp(this.node,t)},t.prototype.setClass=function(t){this.node.setAttribute("class",t)},t.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.removeNode()},t}(),Fp=function(t){function e(e){return t.call(this,e)||this}return Sd(e,t),e.prototype.add=function(t){t&&this.node.appendChild(t.node)},e.prototype.addToBack=function(t){if(t){var e=this.node.childNodes[0];e?e!=t.node&&this.node.insertBefore(t.node,e):this.node.appendChild(t.node)}},e.prototype.removeElement=function(t){if(t)try{t.node&&t.node.parentNode==this.node&&this.node.removeChild(t.node)}catch(t){}},e.prototype.hasChild=function(t){for(var e=0;e<this.node.childNodes.length;e++)if(this.node.childNodes[e]==t.node)return!0;return!1},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),e.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var t=this.node.firstChild;t&&t.parentNode&&t.parentNode.removeChild(t)}},e.prototype.removeChildrenByTag=function(t){if(this.node.childNodes)for(var e=this.node.getElementsByTagName(t),i=0;i<e.length;i++)this.node.removeChild(e[i])},e}(jp),Dp=function(t){function e(){var e=t.call(this)||this;return e._purposes={stroke:Ym("#e5e5e5"),fill:Ym("#f3f3f3"),primaryButton:Ym("#6794dc"),primaryButtonHover:Ym("#6771dc"),primaryButtonDown:Ym("#68dc75"),primaryButtonActive:Ym("#68dc75"),primaryButtonText:Ym("#FFFFFF"),primaryButtonStroke:Ym("#FFFFFF"),secondaryButton:Ym("#d9d9d9"),secondaryButtonHover:Ym("#d9d9d9").brighten(-.25),secondaryButtonDown:Ym("#d9d9d9").brighten(-.35),secondaryButtonActive:Ym("#d9d9d9").brighten(.35),secondaryButtonText:Ym("#000000"),secondaryButtonStroke:Ym("#FFFFFF"),grid:Ym("#000000"),background:Ym("#ffffff"),alternativeBackground:Ym("#000000"),text:Ym("#000000"),alternativeText:Ym("#FFFFFF"),disabledBackground:Ym("#999999"),positive:Ym("#67dc75"),negative:Ym("#dc6788")},e.className="InterfaceColorSet",e.applyTheme(),e}return Sd(e,t),e.prototype.debug=function(){},e.prototype.getFor=function(t){return this._purposes[t]},e.prototype.setFor=function(t,e){this._purposes[t]=e},e}(Xm);Om.registeredClasses.InterfaceColorSet=Dp;var Pp=new wm;var Lp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._domEvents={},e}return Sd(e,t),e.prototype._addDOMEvent=function(t,e,i,n){var r=this;if(!this._domEvents[t]){var s=function(t){i.call(n,e,t)};this.target.element.addEventListener(t,s,!1),this._domEvents[t]=new Gf((function(){delete r._domEvents[t],r.target.element.removeEventListener(t,s,!1)}))}return this._domEvents[t].increment()},e.prototype._dispatchKeyboardEvent=function(t,e){this.target.events.isEnabled(t)&&this.target.events.dispatchImmediately(t,{type:t,target:this.target,event:e})},e.prototype._on=function(e,i,n,r,s,a){var o=t.prototype._on.call(this,e,i,n,r,s,a),u=[o.disposer];switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":case"keyup":case"keypress":case"input":u.push(this._addDOMEvent(i,i,this._dispatchKeyboardEvent,this))}return o.disposer=new zf(u),o},e}(Qf),Ep=function(t){function e(e){var i=t.call(this)||this;return i._eventDispatcher=new Lp(i),i.eventDisposers=new wm,i.replacedStyles=new wm,i._clickable=!1,i._contextMenuDisabled=!1,i._hoverable=!1,i._trackable=!1,i._draggable=!1,i._swipeable=!1,i._resizable=!1,i._wheelable=!1,i._inert=!1,i._isHover=!1,i.isRealHover=!1,i._isHoverByTouch=!1,i._isDown=!1,i._isFocused=!1,i._isTouchProtected=!1,i._inertiaOptions=new wm,i.inertias=new wm,i._hitOptions={},i._hoverOptions={},i._swipeOptions={},i._keyboardOptions={},i._mouseOptions={},i._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},i._disposers.push(i._eventDispatcher),i._element=e,i.className="InteractionObject",i._disposers.push(new ym(i.inertias)),i._disposers.push(new ym(i.eventDisposers)),i.applyTheme(),i}return Sd(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHover",{get:function(){return this._isHover},set:function(t){this.isHover!=t&&(this._isHover=t,t?Yp().overObjects.moveValue(this):(this.isRealHover=!1,Yp().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(t){this.isHoverByTouch!=t&&(this._isHoverByTouch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new Am),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return this._isDown},set:function(t){this.isDown!=t&&(this._isDown=t,t?Yp().downObjects.moveValue(this):Yp().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new Am),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},set:function(t){this.isFocused!=t&&(this._isFocused=t,Yp().focusedObject=t?this:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(t){this._isTouchProtected!=t&&(this._isTouchProtected=t,t?Yp().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&Yp().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){this._clickable!==t&&(this._clickable=t,Yp().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(t){this._contextMenuDisabled!==t&&(this._contextMenuDisabled=t,Yp().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this._hoverable},set:function(t){this._hoverable!==t&&(this._hoverable=t,Yp().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this._trackable},set:function(t){this._trackable!==t&&(this._trackable=t,Yp().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!==t&&(this._draggable=t,Yp().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this._swipeable},set:function(t){this._swipeable!==t&&(this._swipeable=t,Yp().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable!==t&&(this._resizable=t,Yp().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this._wheelable},set:function(t){this._wheelable!==t&&(this._wheelable=t,Yp().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inert",{get:function(){return this._inert},set:function(t){this._inert!==t&&(this._inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable!==t&&(this._focusable=t,this._focusable&&-1==this.tabindex&&(this._tabindex=1),Yp().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return _d(this._tabindex,-1)},set:function(t){this._tabindex!==t&&(this._tabindex=t,t>-1&&(this.focusable=!0),Yp().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(t){this._originalPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalScale",{get:function(){return _d(this._originalScale,1)},set:function(t){this._originalScale!==t&&(this._originalScale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalAngle",{get:function(){return _d(this._originalAngle,0)},set:function(t){this._originalAngle!==t&&(this._originalAngle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(t){this._inertiaOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(t){this._hitOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(t){this._hoverOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(t){this._swipeOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(t){this._keyboardOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(t){this._mouseOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(t){this._cursorOptions=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.inertiaOptions=e.inertiaOptions,this.hitOptions=e.hitOptions,this.hoverOptions=e.hoverOptions,this.swipeOptions=e.swipeOptions,this.keyboardOptions=e.keyboardOptions,this.cursorOptions=e.cursorOptions,this.contextMenuDisabled=e.contextMenuDisabled,Yp().applyCursorOverStyle(this)},e.prototype.setEventDisposer=function(t,e,i){var n=this.eventDisposers.getKey(t);e?null==n&&this.eventDisposers.setKey(t,i()):null!=n&&(n.dispose(),this.eventDisposers.removeKey(t))},e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=Yp();e.overObjects.removeValue(this),e.downObjects.removeValue(this),e.trackedObjects.removeValue(this),e.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&e.unlockWheel(),e.focusedObject===this&&(e.focusedObject=void 0)},e}(Qm),Np=function(){function t(t,e){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=t,this.keyboardEvent=e,this._startedOn=(new Date).getTime(),Yp().processDragStart(t),Rb.animations.push(this),this.update()}return t.prototype.update=function(){var t=this.interaction,e=Yp().getKeyboardOption(t,"speed"),i=Yp().getKeyboardOption(t,"accelleration"),n=Yp().getKeyboardOption(t,"accellerationDelay"),r={x:0,y:0};this.keyboardEvent.shiftKey?(e*=.5,i=1):this.keyboardEvent.ctrlKey&&(e*=2);var s=(new Date).getTime()-this._startedOn,a=s-n;if(i>0&&a>0){var o=s/n;s=n,r.x+=this.directionX*(e*i*o*a),r.y+=this.directionY*(e*i*o*a)}r.x+=this.directionX*(e*s),r.y+=this.directionY*(e*s),Yp().handleTransformMove(t,r,{x:0,y:0},this.keyboardEvent,!0,!1)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(Yp().processDragStop(this.interaction),Af(Rb.animations,this))},t}(),Rp=function(t){function e(e,i,n,r){var s=t.call(this)||this;return s.animations=[],s.className="Inertia",s.interaction=e,s.type=i,s.point=n,s.startPoint=r,s._disposers.push(new hp(s.animations)),s}return Sd(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},set:function(t){Gd(t)&&(this.point.x=t,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},set:function(t){Gd(t)&&(this.point.y=t,this.handleMove())},enumerable:!0,configurable:!0}),e.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var t={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",t)}},e.prototype.done=function(){this.interaction.inertias.removeKey(this.type),"move"===this.type&&Yp().processDragStop(this.interaction),this.dispose()},e}(Xm),Bp=new(function(){function t(){}return t.prototype.getEventKey=function(t){var e;switch(t.keyCode||t.which){case 38:e="up";break;case 40:e="down";break;case 37:e="left";break;case 39:e="right";break;case 13:e="enter";break;case 27:e="esc";break;case 36:case 36:e="home";break;case 35:case 35:e="end";break;case 9:e="tab";break;case 17:e="ctrl";break;case 18:e="alt";break;case 16:e="shift";break;case 32:e="space";break;case 33:e="pgup";break;case 34:e="pgdn";break;case 45:e="ins";break;case 46:e="del";break;case 107:e="plus";break;case 109:e="minus";break;default:e="other"}return e},t.prototype.isKey=function(t,e){var i=this.getEventKey(t);return Vd(e)&&(e=[e]),-1!==e.indexOf(i)},t.prototype.shiftKey=function(t){return t.shiftKey},t.prototype.ctrlKey=function(t){return t.ctrlKey},t.prototype.altKey=function(t){return t.altKey},t.prototype.metaKey=function(t){return t.metaKey},t}()),_p={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function zp(t){switch(t){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function Vp(t,e){return Rd(e)||(e=1),_p[t]*e}function Gp(){return(new Date).getTime()}function $p(t){return new Date(t.getTime())}function Wp(t,e,i,n){t=new Date(t.getTime()),e=new Date(e.getTime());var r=0,s=0;n||"millisecond"==i||(r=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-r),s=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-s));var a=!1;switch(i){case"year":t.getUTCFullYear()!=e.getUTCFullYear()&&(a=!0);break;case"month":(t.getUTCFullYear()!=e.getUTCFullYear()||t.getUTCMonth()!=e.getUTCMonth())&&(a=!0);break;case"day":(t.getUTCMonth()!=e.getUTCMonth()||t.getUTCDate()!=e.getUTCDate())&&(a=!0);break;case"hour":t.getUTCHours()!=e.getUTCHours()&&(a=!0);break;case"minute":t.getUTCMinutes()!=e.getUTCMinutes()&&(a=!0);break;case"second":t.getUTCSeconds()!=e.getUTCSeconds()&&(a=!0);break;case"millisecond":t.getTime()!=e.getTime()&&(a=!0)}if(a)return!0;var o=zp(i);return!!o&&(t.setUTCMinutes(t.getUTCMinutes()+r),e.setUTCMinutes(e.getUTCMinutes()+s),Wp(t,e,o,n))}function qp(t,e,i,n){var r=0;switch(n||"millisecond"==e||(r=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-r)),e){case"day":var s=t.getUTCDate();t.setUTCDate(s+i);break;case"second":var a=t.getUTCSeconds();t.setUTCSeconds(a+i);break;case"millisecond":var o=t.getUTCMilliseconds();t.setUTCMilliseconds(o+i);break;case"hour":var u=t.getUTCHours();t.setUTCHours(u+i);break;case"minute":var l=t.getUTCMinutes();t.setUTCMinutes(l+i);break;case"year":var h=t.getUTCFullYear();t.setUTCFullYear(h+i);break;case"month":var c=t.getUTCMonth();t.setUTCMonth(c+i);break;case"week":var d=t.getUTCDate();t.setUTCDate(d+7*i)}if(!n&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+r),"day"==e||"week"==e||"month"==e||"year"==e)){var f=t.getTimezoneOffset();if(f!=r){var m=f-r;t.setUTCMinutes(t.getUTCMinutes()+m),t.getTimezoneOffset()!=f&&t.setUTCMinutes(t.getUTCMinutes()-m)}}return t}function Hp(t,e,i,n,r,s,a,o){void 0===a&&(a=0),Gd(i)||(i=1);var u=0;switch(o&&-1!=["day","month","week","year"].indexOf(e)&&(t=Up(t,o)),r||"millisecond"==e||(u=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-u)),e){case"day":var l=t.getUTCDate();if(i>1){if(s){s=Hp(s,"day",1);var h=t.getTime()-s.getTime(),c=Math.floor(h/Vp("day")/i),d=Vp("day",c*i);t.setTime(s.getTime()+d-u*Vp("minute"))}}else t.setUTCDate(l);t.setUTCHours(0,0,0,0);break;case"second":var f=t.getUTCSeconds();i>1&&(f=Math.floor(f/i)*i),t.setUTCSeconds(f,0);break;case"millisecond":if(1==i)return t;var m=t.getUTCMilliseconds();m=Math.floor(m/i)*i,t.setUTCMilliseconds(m);break;case"hour":var v=t.getUTCHours();i>1&&(v=Math.floor(v/i)*i),t.setUTCHours(v,a,0,0);break;case"minute":var p=t.getUTCMinutes();m=t.getUTCMilliseconds(),i>1&&(p=Math.floor(p/i)*i),t.setUTCMinutes(p,0,0);break;case"month":var b=t.getUTCMonth();i>1&&(b=Math.floor(b/i)*i),t.setUTCMonth(b,1),t.setUTCHours(0,a,0,0);break;case"year":var g=t.getUTCFullYear();i>1&&(g=Math.floor(g/i)*i),t.setUTCFullYear(g,0,1),t.setUTCHours(0,a,0,0);break;case"week":var y=t.getUTCDate(),w=t.getUTCDay();Gd(n)||(n=1),y=w>=n?y-w+n:y-(7+w)+n,t.setUTCDate(y),t.setUTCHours(0,a,0,0)}if(!r&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+u),"day"==e||"week"==e||"month"==e||"year"==e)){var S=t.getTimezoneOffset();if(S!=u){var x=S-u;t.setUTCMinutes(t.getUTCMinutes()+x)}}return t}function Up(t,e){return new Date(t.toLocaleString("en-US",{timeZone:e}))}var Kp=function(t){function e(){var i=t.call(this)||this;return i._globalEventsAdded=!1,i._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},i._usePointerEventsOnly=!1,i._useTouchEventsOnly=!1,i._addHoverEvents=!0,i._passiveSupported=!1,i._delayedEvents={out:[]},i.overObjects=new Am,i.downObjects=new Am,i.trackedObjects=new Am,i.transformedObjects=new Am,i.pointers=new wm,i.inertiaOptions=new wm,i.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},i.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},i.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},i.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},i.mouseOptions={sensitivity:1},i.className="Interaction",i.body=i.getInteraction(document.body),i._disposers.push(i.body),window.hasOwnProperty("PointerEvent")?(i._pointerEvents.pointerdown="pointerdown",i._pointerEvents.pointerup="pointerup",i._pointerEvents.pointermove="pointermove",i._pointerEvents.pointercancel="pointercancel",i._pointerEvents.pointerover="pointerover",i._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(i._pointerEvents.pointerdown="MSPointerDown",i._pointerEvents.pointerup="MSPointerUp",i._pointerEvents.pointermove="MSPointerMove",i._pointerEvents.pointercancel="MSPointerUp",i._pointerEvents.pointerover="MSPointerOver",i._pointerEvents.pointerout="MSPointerOut"):"undefined"!=typeof matchMedia&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(i._addHoverEvents=!1,i._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||i.fullFF()?i._usePointerEventsOnly=!0:i._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?i._pointerEvents.wheel="wheel":Rd(document.onmousewheel)&&(i._pointerEvents.wheel="mousewheel"),i.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:qv}),i.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:qv}),i._passiveSupported=e.passiveSupported,i.applyTheme(),i}return Sd(e,t),e.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},e.prototype.debug=function(){},e.prototype.addGlobalEvents=function(){var t=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(vp(document,this._pointerEvents.pointerdown,(function(e){t.handleGlobalPointerDown(e)}))),this._disposers.push(vp(document,this._pointerEvents.pointermove,(function(e){t.handleGlobalPointerMove(e)}))),this._disposers.push(vp(document,this._pointerEvents.pointerup,(function(e){t.handleGlobalPointerUp(e)}))),this._disposers.push(vp(document,this._pointerEvents.pointercancel,(function(e){t.handleGlobalPointerUp(e,!0)}))),this._disposers.push(vp(document,"mouseenter",(function(e){Rd(e.relatedTarget)||0!=e.buttons&&0!=e.which||t.handleDocumentLeave(e)})))),this._usePointerEventsOnly||(this._disposers.push(vp(document,"touchstart",(function(e){t.handleGlobalTouchStart(e)}))),this._disposers.push(vp(document,"touchmove",(function(e){t.handleGlobalTouchMove(e)}))),this._disposers.push(vp(document,"touchend",(function(e){t.handleGlobalTouchEnd(e)})))),this._disposers.push(vp(document,"keydown",(function(e){t.handleGlobalKeyDown(e)}))),this._disposers.push(vp(document,"keyup",(function(e){t.handleGlobalKeyUp(e)}))),this._globalEventsAdded=!0)},e.prototype.processClickable=function(t){this.processTouchable(t)},e.prototype.processContextMenu=function(t){t.contextMenuDisabled?t.eventDisposers.hasKey("contextMenuDisabled")||t.eventDisposers.setKey("contextMenuDisabled",vp(t.element,"contextmenu",(function(t){t.preventDefault()}))):t.eventDisposers.hasKey("contextMenuDisabled")&&t.eventDisposers.getKey("contextMenuDisabled").dispose()},e.prototype.processHoverable=function(t){var e=this;if(t.hoverable||t.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(t),!t.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&t.eventDisposers.setKey("hoverable",new zf([vp(t.element,this._pointerEvents.pointerout,(function(i){return e.handlePointerOut(t,i)})),vp(t.element,this._pointerEvents.pointerover,(function(i){return e.handlePointerOver(t,i)}))])),t.trackable;else{var i=t.eventDisposers.getKey("hoverable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("hoverable"))}this.processTouchable(t)},e.prototype.processMovable=function(t){(t.draggable||t.swipeable||t.trackable||t.resizable)&&(this.isGlobalElement(t)||t.isTouchProtected||this.prepElement(t),this.applyCursorOverStyle(t)),this.processTouchable(t)},e.prototype.processTrackable=function(t){this.processHoverable(t),this.processMovable(t),t.trackable?this.trackedObjects.moveValue(t):this.trackedObjects.removeValue(t)},e.prototype.processDraggable=function(t){this.processMovable(t)},e.prototype.processSwipeable=function(t){this.processMovable(t)},e.prototype.processResizable=function(t){this.processMovable(t)},e.prototype.processWheelable=function(t){var e=this;if(t.wheelable)t.eventDisposers.hasKey("wheelable")||t.eventDisposers.setKey("wheelable",new zf([vp(t.element,this._pointerEvents.wheel,(function(i){return e.handleMouseWheel(t,i)}),!!this._passiveSupported&&{passive:!1}),t.events.on("out",(function(i){t.wheelable&&e.unlockWheel()})),t.events.on("over",(function(i){t.wheelable&&e.lockWheel()}))]));else{var i=t.eventDisposers.getKey("wheelable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("wheelable"))}},e.prototype.processFocusable=function(t){var e=this;if(!0===t.focusable&&t.tabindex>-1&&!this._useTouchEventsOnly)t.eventDisposers.hasKey("focusable")||t.eventDisposers.setKey("focusable",new zf([vp(t.element,"focus",(function(i){return e.handleFocus(t,i)})),vp(t.element,"blur",(function(i){return e.handleBlur(t,i)})),vp(t.element,this._pointerEvents.pointerdown,(function(i){return e.handleFocusBlur(t,i)})),vp(t.element,"touchstart",(function(i){return e.handleFocusBlur(t,i)}),!!this._passiveSupported&&{passive:!1})]));else{var i=t.eventDisposers.getKey("focusable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("focusable"))}},e.prototype.processTouchable=function(t){var e=this;if(t.clickable||t.hoverable||t.trackable||t.draggable||t.swipeable||t.resizable)this.addGlobalEvents(),t.eventDisposers.hasKey("touchable")||(this._useTouchEventsOnly||this._usePointerEventsOnly?this._useTouchEventsOnly?this._usePointerEventsOnly||t.eventDisposers.setKey("touchable",vp(t.element,"touchstart",(function(i){return e.handleTouchDown(t,i)}),!!this._passiveSupported&&{passive:!1})):t.eventDisposers.setKey("touchable",vp(t.element,this._pointerEvents.pointerdown,(function(i){return e.handlePointerDown(t,i)}))):t.eventDisposers.setKey("touchable",new zf([vp(t.element,this._pointerEvents.pointerdown,(function(i){return e.handlePointerDown(t,i)})),vp(t.element,"touchstart",(function(i){return e.handleTouchDown(t,i)}),!!this._passiveSupported&&{passive:!1})])));else{var i=t.eventDisposers.getKey("touchable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("touchable"))}},e.prototype.handleFocus=function(t,e){if(t.focusable){if(t.isFocused=!0,t.events.isEnabled("focus")&&!Rb.isPaused){var i={type:"focus",target:t,event:e};t.events.dispatchImmediately("focus",i)}}else e.preventDefault()},e.prototype.handleFocusBlur=function(t,e){!1!==t.focusable&&this.getHitOption(t,"noFocus")&&t.events.once("focus",(function(){t.events.disableType("blur"),Sp(),t.sprite&&t.sprite.handleBlur(),t.events.enableType("blur")}))},e.prototype.handleBlur=function(t,e){if(t.focusable){if(t.isFocused=!1,t.events.isEnabled("blur")&&!Rb.isPaused){var i={type:"blur",target:t,event:e};t.events.dispatchImmediately("blur",i)}}else e.preventDefault()},e.prototype.handleGlobalKeyDown=function(t){if(this.focusedObject)if(Bp.isKey(t,"esc"))Sp();else if(this.focusedObject.draggable&&Bp.isKey(t,["up","down","left","right"])){t.preventDefault();var e=this.focusedObject,i="interactionKeyboardObject";if(e.eventDisposers.hasKey(i))return;var n=new Np(e,t);switch(e.eventDisposers.setKey(i,n),Bp.getEventKey(t)){case"up":n.directionY=-1;break;case"down":n.directionY=1;break;case"left":n.directionX=-1;break;case"right":n.directionX=1}}},e.prototype.handleGlobalKeyUp=function(t){var e="interactionKeyboardObject";if(this.focusedObject){var i=this.focusedObject.eventDisposers.getKey(e);null!=i&&(t.preventDefault(),i.dispose(),this.focusedObject.eventDisposers.removeKey(e));var n=this.focusedObject.sprite;Bp.isKey(t,"enter")&&n&&(n.events.isEnabled("hit")||n.events.isEnabled("toggled")?this.focusedObject.dispatchImmediately("hit"):"hit"==n.showTooltipOn&&this.focusedObject.dispatchImmediately("up"))}},e.prototype.handleGlobalPointerMove=function(t){var e=this.getPointer(t);if(e.point=this.getPointerPoint(t),this.events.isEnabled("track")&&!Rb.isPaused){var i={type:"track",target:this,event:t,pointer:e,touch:e.touch};this.events.dispatchImmediately("track",i)}this.addBreadCrumb(e,e.point),this.handleGlobalMove(e,t)},e.prototype.handleGlobalPointerDown=function(t){this.processDelayed();var e=this.getPointer(t);if(this.events.isEnabled("down")&&!Rb.isPaused){var i={type:"down",target:this,event:t,pointer:e,touch:e.touch};this.events.dispatchImmediately("down",i)}},e.prototype.preventTouchAction=function(t){t.defaultPrevented||t.preventDefault()},e.prototype.handleGlobalPointerUp=function(t,e){void 0===e&&(e=!1);var i=this.getPointer(t);if(this.events.isEnabled("up")&&!Rb.isPaused){var n={type:"up",target:this,event:t,pointer:i,touch:i.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(i,t,e)},e.prototype.handleGlobalTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);if(i.point=this.getPointerPoint(t.changedTouches[e]),this.events.isEnabled("track")&&!Rb.isPaused){var n={type:"track",target:this,event:t,pointer:i,touch:i.touch};this.events.dispatchImmediately("track",n)}this.addBreadCrumb(i,i.point),this.handleGlobalMove(i,t)}},e.prototype.handleGlobalTouchStart=function(t){this.processDelayed();for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!Rb.isPaused){var n={type:"down",target:this,event:t,pointer:i,touch:i.touch};this.events.dispatchImmediately("down",n)}}},e.prototype.handleGlobalTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);if(this.events.isEnabled("up")&&!Rb.isPaused){var n={type:"up",target:this,event:t,pointer:i,touch:i.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(i,t)}},e.prototype.handlePointerDown=function(t,e){var i=this.getPointer(e);(i.touch||1==e.which||3==e.which)&&(i.button=e.which,this.resetPointer(i,e),this.handleDown(t,i,e))},e.prototype.handlePointerOver=function(t,e){var i=this.getPointer(e);this.handleOver(t,i,e)},e.prototype.handlePointerOut=function(t,e){var i=this.getPointer(e);this.handleOut(t,i,e)},e.prototype.handleMouseWheel=function(t,e){var i=this.getPointer(e);i.point=this.getPointerPoint(e);var n=0,r=0,s=1;if(1==e.deltaMode&&(s=50),s*=this.getMouseOption(t,"sensitivity"),!(e instanceof WheelEvent))throw new Error("Invalid event type");n=Math.round(-1*e.wheelDeltaX||e.deltaX*s),r=Math.round(-1*e.wheelDeltaY||e.deltaY*s),this.handleWheel(t,i,n,r,e)},e.prototype.handleTouchDown=function(t,e){for(var i=0;i<e.changedTouches.length;i++){var n=this.getPointer(e.changedTouches[i]);this.maybePreventDefault(t,e,n),this.resetPointer(n,e.changedTouches[i]),this.handleDown(t,n,e)}},e.prototype.handleHit=function(t,e,i){var n=Gp();if(t.lastHit&&t.lastHit>=n-this.getHitOption(t,"doubleHitTime")){if(n-t.lastHit<100)return;if(t.lastHit=void 0,t.lastHitPointer=void 0,t.events.isEnabled("doublehit")&&!Rb.isPaused){var r={type:"doublehit",target:t,point:e.point,event:i,touch:e.touch};t.events.dispatchImmediately("doublehit",r)}}else if(t.lastHit=n,t.lastHitPointer=e,3===e.button){if(t.events.isEnabled("rightclick")&&!Rb.isPaused){r={type:"rightclick",target:t,event:i};t.events.dispatchImmediately("rightclick",r)}}else if(t.events.isEnabled("hit")&&!Rb.isPaused){r={type:"hit",target:t,event:i,point:e.point,touch:e.touch};t.events.dispatchImmediately("hit",r)}},e.prototype.handleOver=function(t,e,i,n){if(t.hoverable){var r=!1;if(this.shouldCancelHovers(e)&&this.areTransformed()&&this.moved(e,this.getHitOption(t,"hitTolerance"))&&(r=!0,this.cancelAllHovers(i)),this.processDelayed(),t.overPointers.moveValue(e),!t.isRealHover&&(r||(t.isHover=!0,t.isRealHover=!0,this.overObjects.moveValue(t)),this.handleTrack(this.body,e,i,!0),t.events.isEnabled("over")&&!Rb.isPaused&&!r)){var s={type:"over",target:t,event:i,pointer:e,touch:e.touch};t.events.dispatchImmediately("over",s)}}},e.prototype.handleOut=function(t,e,i,n,r){var s=this;if(void 0===n&&(n=!1),void 0===r&&(r=!1),t.hoverable&&(t.overPointers.removeValue(e),t.isHover&&(!t.hasDelayedOut||r))){if(n&&t.overPointers.length)return;if(e&&e.touch&&!r&&!this.old(e)){var a=this.getHoverOption(t,"touchOutBehavior");if("leave"==a)return this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:i,keepUntil:Gp()+500}),void(t.hasDelayedOut=!0);if("delay"==a&&this.getHoverOption(t,"touchOutDelay"))return void this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:i,keepUntil:Gp()+500,timeout:this.setTimeout((function(){s.handleOut(t,e,i,!0)}),this.getHoverOption(t,"touchOutDelay"))})}if(t.isHover=!1,this.overObjects.removeValue(t),!t.isDisposed()&&t.events.isEnabled("out")&&!Rb.isPaused){var o={type:"out",target:t,event:i,pointer:e,touch:e.touch};t.events.dispatchImmediately("out",o)}t.overPointers.clear(),t.hasDelayedOut=!1}},e.prototype.processDelayed=function(){for(var t;t=this._delayedEvents.out.pop();)t.timeout&&t.timeout.dispose(),this.handleOut(t.io,t.pointer,t.event,!1,!0)},e.prototype.handleDown=function(t,e,i){if(this.maybePreventDefault(t,i,e),t.inert&&this.stopInertia(t),this.handleOver(t,e,i,!0),t.downPointers.moveValue(e),this.applyCursorDownStyle(t,e),t.isDown||(!1!==t.focusable&&this.getHitOption(t,"noFocus")&&this.focusedObject&&Sp(),t.isDown=!0,this.downObjects.moveValue(t),t.draggable&&this.processDragStart(t,e,i),t.resizable&&this.processResizeStart(t,e,i)),t.events.isEnabled("down")&&!Rb.isPaused){var n={type:"down",target:t,event:i,pointer:e,touch:e.touch};t.events.dispatchImmediately("down",n)}},e.prototype.handleGlobalUp=function(t,e,i){var n=this;void 0===i&&(i=!1);var r=this.downObjects.values.slice();r.sort((function(t,e){if(t&&e){var i=t.element.compareDocumentPosition(e.element);return i&Node.DOCUMENT_POSITION_CONTAINED_BY?1:i&Node.DOCUMENT_POSITION_CONTAINS?-1:0}return 0})),kf(r,(function(r){r&&r.downPointers.contains(t)&&n.handleUp(r,t,e,i)}))},e.prototype.handleDocumentLeave=function(t){var e=this;cm(this.downObjects.backwards().iterator(),(function(i){i.downPointers.each((function(n){e.handleUp(i,n,t)}))}))},e.prototype.handleUp=function(t,e,i,n){if(void 0===n&&(n=!1),this.restoreCursorDownStyle(t,e),t.downPointers.removeValue(e),(e.touch||this._useTouchEventsOnly)&&this.handleOut(t,e,i,!0),t.isDown){if(0==t.downPointers.length&&(t.isDown=!1,this.downObjects.removeValue(t)),t.events.isEnabled("up")&&!Rb.isPaused){var r={type:"up",target:t,event:i,pointer:e,touch:e.touch};t.events.dispatchImmediately("up",r)}n||(t.swipeable&&this.swiped(t,e)?this.handleSwipe(t,e,i):(t.clickable&&!this.moved(e,this.getHitOption(t,"hitTolerance"))&&this.handleHit(t,e,i),t.inert&&this.moved(e,this.getHitOption(t,"hitTolerance"))?this.handleInertia(t,e):t.draggable&&this.processDragStop(t,e,i),t.resizable&&this.processResizeStop(t,e,i)))}},e.prototype.maybePreventDefault=function(t,e,i){!Rd(e)||!(t.draggable||t.swipeable||t.trackable||t.resizable)||this.isGlobalElement(t)||!1===e.cancelable||t.isTouchProtected&&i&&i.touch||e.preventDefault()},e.prototype.cancelAllHovers=function(t){var e=this;cm(this.overObjects.backwards().iterator(),(function(i){if(i){var n=i.overPointers.getIndex(0);e.handleOut(i,n,t,!0,!0)}}))},e.prototype.shouldCancelHovers=function(t){return"touch"==rp.disableHoverOnTransform},e.prototype.handleGlobalMove=function(t,e){var i,n=this;if(!t.touch){var r="function"==typeof(i=t.lastEvent).composedPath?i.composedPath()[0]:i.target;cm(this.overObjects.backwards().iterator(),(function(i){if(i&&i.overPointers.contains(t)&&i.hoverable){var s=!1;i.element&&t.lastEvent&&xp(i.element,r)||(s=!0),s&&n.handleOut(i,t,e,!0)}}))}cm(this.transformedObjects.backwards().iterator(),(function(i){!i.downPointers.contains(t)||i.swipeable&&n.swiping(i,t)||!i.draggable&&!i.resizable||n.handleTransform(i,e)})),cm(this.trackedObjects.backwards().iterator(),(function(i){i.overPointers.contains(t)||n.handleTrack(i,t,e)}))},e.prototype.handleTrack=function(t,e,i,n){if(void 0===n&&(n=!1),(n||this.moved(e,0))&&t.events.isEnabled("track")&&!Rb.isPaused){var r={type:"track",target:t,event:i,point:e.point,pointer:e,touch:e.touch};t.events.dispatchImmediately("track",r)}},e.prototype.handleSwipe=function(t,e,i){if(t.events.isEnabled("swipe")&&!Rb.isPaused){var n={type:"swipe",target:t,event:i,touch:e.touch};t.events.dispatchImmediately("swipe",n)}if(e.startPoint.x<e.point.x){if(t.events.isEnabled("swiperight")&&!Rb.isPaused){n={type:"swiperight",target:t,event:i,touch:e.touch};t.events.dispatchImmediately("swiperight",n)}}else if(t.events.isEnabled("swipeleft")&&!Rb.isPaused){n={type:"swipeleft",target:t,event:i,touch:e.touch};t.events.dispatchImmediately("swipeleft",n)}},e.prototype.handleWheel=function(t,e,i,n,r){var s={x:i,y:n};t.events.isEnabled("wheel")&&!Rb.isPaused&&t.events.dispatchImmediately("wheel",{type:"wheel",target:t,event:r,point:e.point,shift:s}),i<0?t.events.isEnabled("wheelleft")&&!Rb.isPaused&&t.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:t,event:r,point:e.point,shift:s}):i>0?t.events.isEnabled("swiperight")&&!Rb.isPaused&&t.events.dispatchImmediately("wheelright",{type:"wheelright",target:t,event:r,point:e.point,shift:s}):n<0?t.events.isEnabled("wheelup")&&!Rb.isPaused&&t.events.dispatchImmediately("wheelup",{type:"wheelup",target:t,event:r,point:e.point,shift:s}):n>0&&t.events.isEnabled("wheeldown")&&!Rb.isPaused&&t.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:t,event:r,point:e.point,shift:s})},e.prototype.handleInertia=function(t,e){t.draggable&&0===t.downPointers.length&&this.handleMoveInertia(t,e),t.resizable&&t.downPointers.length>1&&this.handleResizeInertia(t,e)},e.prototype.handleMoveInertia=function(t,e){var i=t,n={x:e.point.x,y:e.point.y},r={x:e.startPoint.x,y:e.startPoint.y},s=new Rp(i,"move",n,r),a=this.getTrailPoint(e,Gp()-this.getInertiaOption(t,"move","time"));if(void 0!==a){var o=this.getInertiaOption(t,"move","factor"),u=[{to:e.point.x+(e.point.x-a.point.x)*o,property:"x"},{to:e.point.y+(e.point.y-a.point.y)*o,property:"y"}],l=new cp(s,u,this.getInertiaOption(t,"move","duration"),this.getInertiaOption(t,"move","easing")).start();this._disposers.push(l.events.on("animationended",(function(t){s.done()}))),t.inertias.setKey("move",s)}else this.processDragStop(t,e,e.lastUpEvent)},e.prototype.handleResizeInertia=function(t,e){},e.prototype.handleTransform=function(t,e){var i,n,r,s=t.downPointers.getIndex(0),a=null,o=null;s&&(a=s.point,o=s.startPoint),r=n={x:t.originalPosition.x,y:t.originalPosition.y};for(var u=!0,l=1;l<t.downPointers.length;l++){var h=t.downPointers.getIndex(l);if(o.x!=h.startPoint.x&&o.y!=h.startPoint.y){u=!1,n=(i=h).point,r=i.startPoint;break}}var c=s&&this.moved(s,0);if(t.draggable&&s&&s.dragStartEvents&&s.dragStartEvents.length&&c&&t.events.isEnabled("dragstart")&&!Rb.isPaused&&t.events.dispatchImmediately("dragstart",s.dragStartEvents.shift()),u&&t.draggable)this.handleTransformMove(t,a,o,e,c,s.touch),this.shouldCancelHovers(s)&&this.moved(s,this.getHitOption(t,"hitTolerance"))&&this.cancelAllHovers(e);else{var d=i&&this.moved(i,0);(this.shouldCancelHovers(s)&&this.moved(s,this.getHitOption(t,"hitTolerance"))||this.shouldCancelHovers(i)&&this.moved(i,this.getHitOption(t,"hitTolerance")))&&this.cancelAllHovers(e),t.draggable&&t.resizable?(this.handleTransformMove(t,a,o,e,c&&d,s.touch),this.handleTransformResize(t,a,o,n,r,e,c&&d,s.touch)):(t.draggable&&this.handleTransformMove(t,a,o,e,c,s.touch),!t.resizable||u&&!e.ctrlKey||this.handleTransformResize(t,a,o,n,r,e,c&&d,s.touch))}},e.prototype.handleTransformMove=function(t,e,i,n,r,s){if(r&&t.events.isEnabled("drag")&&!Rb.isPaused&&(!t.isTouchProtected||!s)){var a={type:"drag",target:t,event:n,shift:{x:e.x-i.x,y:e.y-i.y},startPoint:i,point:e,touch:s};t.events.dispatchImmediately("drag",a)}},e.prototype.handleTransformResize=function(t,e,i,n,r,s,a,o){if(t.events.isEnabled("resize")&&!Rb.isPaused&&(!t.isTouchProtected||!o)){var u={type:"resize",target:t,event:s,scale:lf(e,i,n,r),startPoint1:i,point1:e,startPoint2:r,point2:n,touch:o};t.events.dispatchImmediately("resize",u)}},e.prototype.processDragStart=function(t,e,i){this.transformedObjects.moveValue(t),this.shouldCancelHovers(e)&&this.cancelAllHovers(i);var n={type:"dragstart",target:t,event:i,touch:!!e&&e.touch};e&&(e.dragTarget=t),e&&e.dragStartEvents?e.dragStartEvents.push(n):Rb.isPaused||t.dispatchImmediately("dragstart",n)},e.prototype.processDragStop=function(t,e,i){if(e||(e=this.getDragPointer(t)),e&&(e.dragTarget=void 0),this.transformedObjects.removeValue(t),(!e||this.moved(e,0))&&t.events.isEnabled("dragstop")&&!Rb.isPaused){var n={type:"dragstop",target:t,touch:!!e&&e.touch};t.events.dispatchImmediately("dragstop",n)}},e.prototype.processResizeStart=function(t,e,i){this.transformedObjects.moveValue(t)},e.prototype.processResizeStop=function(t,e,i){this.transformedObjects.removeValue(t)},e.prototype.dragStart=function(t,e){e||(e=this.getDragPointer(t)),e&&this.handleDown(t,e,e.lastDownEvent)},e.prototype.dragStop=function(t,e,i){e||(e=this.getDragPointer(t)),e&&!i&&this.handleGlobalUp(e,e.lastUpEvent,i)},e.prototype.getDragPointer=function(t){return t?t.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},e.prototype.getPointerId=function(t){return(Rd(t.identifier)?""+t.identifier:Rd(t.pointerId)?""+t.pointerId:"m").replace("-","")},e.prototype.getPointerPoint=function(t){return{x:t.clientX,y:t.clientY}},e.prototype.getPointer=function(t){var e,i=this.getPointerId(t),n=this.getPointerPoint(t);return this.pointers.hasKey(i)?(e=this.pointers.getKey(i)).touch=this.isPointerTouch(t):(e={id:i,touch:this.isPointerTouch(t),startPoint:n,startTime:Gp(),point:n,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(e,n),this.pointers.setKey(i,e)),e.lastEvent=t,this.lastPointer=e,e},e.prototype.isPointerTouch=function(t){if("undefined"!=typeof Touch&&t instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&t instanceof PointerEvent&&Rd(t.pointerType))switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(Rd(t.type)&&t.type.match(/^mouse/))return!1;return!0},e.prototype.resetPointer=function(t,e){var i=this.getPointerPoint(e);t.startTime=Gp(),t.startPoint={x:i.x,y:i.y},t.point={x:i.x,y:i.y},t.track=[],t.swipeCanceled=!1},e.prototype.addBreadCrumb=function(t,e){t.track.push({timestamp:Gp(),point:e})},e.prototype.lockDocument=function(){this.prepElement(this.body)},e.prototype.unlockDocument=function(){0==this.transformedObjects.length&&this.restoreAllStyles(this.body)},e.prototype.lockElement=function(t){this.prepElement(t)},e.prototype.unlockElement=function(t){this.restoreAllStyles(t)},e.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,!!this._passiveSupported&&{passive:!1})},e.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},e.prototype.isLocalElement=function(t,e,i){var n=this.getCache("local_pointer_"+t.id);if(Rd(n))return n;var r=Op(e)||document;if(r.elementFromPoint){var s=r.elementFromPoint(t.point.x,t.point.y),a=s&&xp(e,s);return this.setCache("local_pointer_"+t.id+"_"+i,a,100),a}return!1},e.prototype.wheelLockEvent=function(t){return t.preventDefault(),!1},e.prototype.prepElement=function(t){var e=t.element;if(e){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<i.length;n++)i[n]in e.style&&this.setTemporaryStyle(t,i[n],"none");this.setTemporaryStyle(t,"tapHighlightColor","rgba(0, 0, 0, 0)")}},e.prototype.unprepElement=function(t){var e=t.element;if(e){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<i.length;n++)i[n]in e.style&&this.restoreStyle(t,i[n]);this.restoreStyle(t,"tapHighlightColor")}},e.prototype.getHitOption=function(t,e){var i=t.hitOptions[e];return void 0===i&&(i=this.hitOptions[e]),i},e.prototype.getHoverOption=function(t,e){var i=t.hoverOptions[e];return void 0===i&&(i=this.hoverOptions[e]),i},e.prototype.getSwipeOption=function(t,e){var i=t.swipeOptions[e];return void 0===i&&(i=this.swipeOptions[e]),i},e.prototype.getKeyboardOption=function(t,e){var i=t.keyboardOptions[e];return void 0===i&&(i=this.keyboardOptions[e]),i},e.prototype.getMouseOption=function(t,e){var i=t.mouseOptions[e];return void 0===i&&(i=this.mouseOptions[e]),i},e.prototype.getInertiaOption=function(t,e,i){var n=t.inertiaOptions.getKey(e);return n&&Rd(n[i])?n[i]:this.inertiaOptions.getKey(e)[i]},e.prototype.stopInertia=function(t){for(var e,i=["move","resize"],n=0;n<i.length;n++)if(e=i[n],t.inertias.hasKey(e)){var r=t.inertias.getKey(e);if(r){r.dispose();continue}}},e.prototype.swiping=function(t,e){var i=Gp();return!(e.swipeCanceled||!t.swipeable)&&(Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>i-this.getSwipeOption(t,"time"))},e.prototype.swiped=function(t,e){var i=Gp();return!e.swipeCanceled&&(Math.abs(e.startPoint.x-e.point.x)>this.getSwipeOption(t,"horizontalThreshold")&&Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>i-this.getSwipeOption(t,"time"))},e.prototype.applyCursorOverStyle=function(t){var e=t.cursorOptions;if(Rd(e.overStyle))for(var i=0;i<e.overStyle.length;i++)yp(t.element,e.overStyle[i].property,e.overStyle[i].value)},e.prototype.applyCursorDownStyle=function(t,e){if(!e||!e.touch){var i=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&Rd(i))for(var n=0;n<i.length;n++)this.setTemporaryStyle(this.body,i[n].property,i[n].value),this.setTemporaryStyle(t,i[n].property,i[n].value)}},e.prototype.restoreCursorDownStyle=function(t,e){if(!e||!e.touch){var i=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&Rd(i))for(var n=0;n<i.length;n++)this.restoreStyle(this.body,i[n].property),this.restoreStyle(t,i[n].property)}},e.prototype.setGlobalStyle=function(t){for(var e=Yp().body,i=Wd(t)?t:[t],n=0;n<i.length;n++)this.setTemporaryStyle(e,i[n].property,i[n].value)},e.prototype.restoreGlobalStyle=function(t){for(var e=Yp().body,i=Wd(t)?t:[t],n=0;n<i.length;n++)this.restoreStyle(e,i[n].property)},e.prototype.isGlobalElement=function(t){return document.body===t.element},e.prototype.moved=function(t,e,i){var n=this.getShift(t);return Math.abs(n.x)>e||Math.abs(n.y)>e},e.prototype.old=function(t,e){return void 0===e&&(e=300),Gp()-t.startTime>e},e.prototype.getShift=function(t){return{x:t.startPoint.x-t.point.x,y:t.startPoint.y-t.point.y}},e.prototype.getTrailPoint=function(t,e){for(var i,n=0;n<t.track.length;n++)if(t.track[n].timestamp>=e){i=t.track[n];break}return i},e.prototype.pointerExists=function(t,e){var i=!1;return t.each((function(t){t!=e&&(i=t.point.x==e.point.x&&t.point.y==e.point.y)})),i},e.prototype.getInteraction=function(t){return new Ep(t)},e.prototype.setTemporaryStyle=function(t,e,i){var n=t.element;Rd(n.style[e])&&!t.replacedStyles.hasKey(e)&&t.replacedStyles.setKey(e,n.style[e]),yp(n,e,i)},e.prototype.restoreStyle=function(t,e){t.replacedStyles.hasKey(e)?(t.element.style[e]=t.replacedStyles.getKey(e),t.replacedStyles.removeKey(e)):delete t.element.style[e]},e.prototype.restoreAllStyles=function(t){cm(t.replacedStyles.iterator(),(function(e){var i=e[0],n=e[1];t.element.style[i]=n,t.replacedStyles.removeKey(i)}))},e.prototype.dispose=function(){this.isDisposed()||(t.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},e.prototype.log=function(t,e,i){if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)this.logTouch(t,e.type,e.changedTouches[n]);else{var r="";if(e.pointerType)switch(e.pointerType){case 2:r="touch";break;case 4:r="mouse";break;default:r=e.pointerType}else r="undefined"!=typeof TouchEvent&&e instanceof TouchEvent?"touch":e.type.match(/^mouse/)?"mouse":"???";var s="";s=Rd(e.identifier)?e.identifier:Rd(e.pointerId)?e.pointerId:"???",i?console.log(t+" ("+i.uid+")  "+e.type+"  "+r+"  "+s):console.log(t+"  "+e.type+"  "+r+"  "+s)}},e.prototype.areTransformed=function(t){var e=this.transformedObjects.length;if(t)for(var i=Wd(t)?t:[t],n=0;n<i.length;n++)this.transformedObjects.contains(i[n])&&e--;return e>0},e.prototype.logTouch=function(t,e,i){console.log(t+"  "+e+"  touch  "+i.identifier)},Object.defineProperty(e,"passiveSupported",{get:function(){var t=this;if(null==this._passiveSupported)try{var e=Object.defineProperty({},"passive",{get:function(){t._passiveSupported=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(t){this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),e}(Qm),Jp=null;function Yp(){return null==Jp&&(Jp=new Kp),Jp}var Zp=function(t){function e(){var e=t.call(this)||this;return e.adapter=new zm(e),e._elements={},e._IOs={},e._content="",e._title="",e._classPrefix="ampopup",e._defaultStyles=!0,e._showCurtain=!1,e._draggable=!0,e._align="center",e._dynamicResize=!0,e._verticalAlign="middle",e._shift={x:0,y:0},e._tempShift={x:0,y:0},e._readerTitle="",e._closable=!0,e._cssLoaded=!1,e._fitTo="window",e.isTemplate=!1,e._sized=!1,e.className="Popup",e}return Sd(e,t),e.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},e.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e.prototype.positionElement=function(t){var e=this;void 0===t&&(t=!0),this._elements.wrapper&&setTimeout((function(){if(e._elements.wrapper){if(t||!e._sized){e._elements.wrapper.style.opacity="0.01",e._elements.wrapper.style.left="0",e._elements.wrapper.style.top="0",e._elements.wrapper.style.margin="0 0 0 0",e._elements.wrapper.style.width="",e._elements.wrapper.style.height="";var i=e._elements.wrapper.getBoundingClientRect();e._elements.wrapper.style.width=i.width+"px",e._elements.wrapper.style.height=i.height+"px",e._sized=!0}if(e.dynamicResize)for(var n=e._elements.wrapper.getElementsByTagName("img"),r=0;r<n.length;r++){var s=n[r];if(!s.complete){s.addEventListener("load",(function(){e.positionElement(!0)}));break}}setTimeout((function(){if(e._elements.wrapper){var i;switch(!t&&e._sized||!e._bbox?(i=e._elements.wrapper.getBoundingClientRect(),e._elements.wrapper.style.opacity=""):i=e._bbox,e.align){case"left":e._elements.wrapper.style.left="0",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;case"center":e._elements.wrapper.style.left="50%",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(Math.round(-i.width/2)+(e._shift.x+e._tempShift.x));break;case"right":e._elements.wrapper.style.left="auto",e._elements.wrapper.style.right="0",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;default:e._elements.wrapper.style.left=e.toStyle(e.left)||"auto",e._elements.wrapper.style.right=e.toStyle(e.right)||"auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x)}switch(e.verticalAlign){case"top":e._elements.wrapper.style.top="0",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;case"middle":e._elements.wrapper.style.top="50%",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(Math.round(-i.height/2)+(e._shift.y+e._tempShift.y));break;case"bottom":e._elements.wrapper.style.top="auto",e._elements.wrapper.style.bottom="0",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;default:e._elements.wrapper.style.top=e.toStyle(e.top)||"auto",e._elements.wrapper.style.bottom=e.toStyle(e.bottom)||"auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y)}}}),1)}}),1)},e.prototype.setupDragging=function(){var t=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",(function(e){t._tempShift.x=e.shift.x,t._tempShift.y=e.shift.y,t.positionElement(!1)})),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",(function(e){t._shift.x+=t._tempShift.x,t._shift.y+=t._tempShift.y,t._tempShift.x=0,t._tempShift.y=0,t.positionElement(!1)}))):this._IOs.header&&(Yp().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},e.prototype.toStyle=function(t){return Rd(t)?Gd(t)?t+"px":t.toString():null},Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(t){this._classPrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(t){this._content!=t&&(this._content=t,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=t,this.positionElement())},enumerable:!0,configurable:!0}),e.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},e.prototype.createContentElement=function(){if(!this._elements.wrapper){var t=this.getClassNames(),e=document.createElement("div");e.className=t.contentClass,e.style.opacity="0.01";var i=document.createElement("a");i.className=t.closeClass;var n=document.createElement("div");n.className=t.headerClass;var r=document.createElement("div");r.innerHTML=this.title,r.className=t.titleClass,this.title||(r.style.display="none");var s=document.createElement("div");s.className=t.insideClass,s.innerHTML=this.content,this._IOs.wrapper=Yp().getInteraction(e),this._IOs.header=Yp().getInteraction(n),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=Yp().getInteraction(i),this._disposers.push(this._IOs.close),i.style.visibility="hidden",e.setAttribute("role","dialog"),n.appendChild(i),n.appendChild(r),e.appendChild(n),e.appendChild(s),this.container.appendChild(e),this._elements.wrapper=e,this._elements.header=n,this._elements.content=s,this._elements.title=r,this._elements.close=i,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(t){this._title!=t&&(this._title=t,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=t,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",""!=this._readerTitle?this._readerTitle:this.title)},set:function(t){this._readerTitle!=t&&(this._readerTitle=t,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(t){t!==this._closable&&(this._closable=t,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(t){t!=this._fitTo&&(this._fitTo=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(t){this._showCurtain!=t&&(this._showCurtain=t,this._elements.curtain&&(this._elements.curtain.style.display=t?"block":"none"))},enumerable:!0,configurable:!0}),e.prototype.createCurtainElement=function(){var t=this.getClassNames(),e=document.createElement("div");e.className=t.curtainClass,this.container.appendChild(e),this._IOs.curtain=Yp().getInteraction(e),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),e.style.display=this.showCurtain?"block":"none",this._elements.curtain=e},Object.defineProperty(e.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(t){this._draggable!=t&&(this._draggable=t,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(t){this._dynamicResize!=t&&(this._dynamicResize=t,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(t){this._align!=t&&(this._align=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(t){this.left!=t&&(this._left=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(t){this.right!=t&&(this._right=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(t){this.top!=t&&(this._top=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(t){this.bottom!=t&&(this._bottom=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(function(t,e){e||(e="ampopup");var i=new Dp,n=i.getFor("text"),r=i.getFor("background");r.alpha=.8;var s=i.getFor("alternativeBackground");return s.alpha=.05,Pp.insertKeyIfEmpty(e,(function(){var i=new zf([new Tp(t,"."+e,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new Tp(t,"."+e+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":r.hex,opacity:"0.5"}),new Tp(t,"."+e+"-header",{display:"block",width:"100%","min-height":"1.8em",background:s.rgba}),new Tp(t,"."+e+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new Tp(t,"."+e+"-content",{background:r.hex,"background-color":r.rgba,color:n.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new Tp(t,"."+e+"-inside",{padding:"1em"}),new Tp(t,"."+e+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new Gf((function(){Pp.removeKey(e),i.dispose()}))})).increment()}(Cp(this.container),this.classPrefix)),nm(this._elements,(function(t,e){e.style.display=""})),this._cssLoaded=!0)},e.prototype.applyEvents=function(){var t=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var e=[Yp().body.events.on("keyup",(function(e){Bp.isKey(e.event,"esc")&&t.closable&&t.close()})),this._IOs.close.events.on("hit",(function(e){t.close()}))];e.push(this._IOs.curtain.events.on("hit",(function(e){t.showCurtain&&t.closable&&t.close()}))),this._disposers.push(new zf(e))}else this._IOs.close.element.style.visibility="hidden"},e.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},e.prototype.releasePointers=function(){Rd(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},e.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.container=e.container,this.sprite=e.sprite,this.classPrefix=e.classPrefixRaw,this.content=e.content,this.title=e.title,this.readerTitle=e.readerTitle,this.defaultStyles=e.defaultStyles,this.showCurtain=e.showCurtain,this.align=e.align,this.verticalAlign=e.verticalAlign,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.adapter.copyFrom(e.adapter)},e}(Qm),Xp=function(t){function e(){var e=t.call(this)||this;return e.adapter=new zm(e),e.className="Modal",e.showCurtain=!0,e.draggable=!1,e}return Sd(e,t),e}(Zp);function Qp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console&&console.warn.apply(console,kd(t))}var tb=function(){function t(){var t=this;this._targets=[],this._observer=new ResizeObserver((function(e){kf(e,(function(e){kf(t._targets,(function(t){t.target===e.target&&t.callback()}))}))}))}return t.prototype.addTarget=function(t,e){this._observer.observe(t,{box:"content-box"}),this._targets.push({target:t,callback:e})},t.prototype.removeTarget=function(t){this._observer.unobserve(t),Bf(this._targets,(function(e){return e.target!==t}))},t}(),eb=function(){function t(){this._targets=[]}return t.prototype.addTarget=function(e,i){var n=this;if(0===this._targets.length){var r=null,s=function(){var e=Date.now();(null===r||e>r+t.delay)&&(r=e,kf(n._targets,(function(t){var e=t.target.getBoundingClientRect();e.width===t.size.width&&e.height===t.size.height||(t.size=e,t.callback())}))),n._timer=requestAnimationFrame(s)};this._timer=requestAnimationFrame(s)}var a=e.getBoundingClientRect();this._targets.push({target:e,callback:i,size:a})},t.prototype.removeTarget=function(t){Bf(this._targets,(function(e){return e.target!==t})),0===this._targets.length&&cancelAnimationFrame(this._timer)},t.delay=200,t}(),ib=null;var nb=function(){function t(t,e){this._disposed=!1,this._sensor=(null===ib&&(ib="undefined"!=typeof ResizeObserver?new tb:new eb),ib),this._element=t,this._sensor.addTarget(t,e)}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(t.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),t.prototype.reset=function(){Qp("resizeSensor.reset() is no longer needed and can be removed")},t}(),rb=[],sb=function(){function t(t,e){var i=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=t,e||(this._printing=!1,this.initSensor(),this._disposers.push(vp(window,"beforeprint",(function(){i._printing=!0}))),this._disposers.push(vp(window,"afterprint",(function(){i._printing=!1})))),rb.push(this);var n=document.createElement("div"),r=n.style;r.width="100%",r.height="100%",r.position="relative",t.appendChild(n),this.SVGContainer=n}return t.prototype.initSensor=function(){var t=this;this.resizeSensor&&this.resizeSensor.dispose();this.resizeSensor=new nb(this.htmlElement,(function(){t.autoResize&&!t._printing&&t.measure()})),this._disposers.push(this.resizeSensor)},t.prototype.measure=function(){var t=function(t){var e=getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),n=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth);return t.clientWidth-i-n}(this.htmlElement),e=function(t){var e=getComputedStyle(t),i=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),n=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth);return t.clientHeight-i-n}(this.htmlElement),i=this.container;i&&(this.width==t&&this.height==e||(this.width=t,this.height=e,t>0&&(i.maxWidth=t),e>0&&(i.maxHeight=e),Mp(this.SVGContainer)),i.maxWidth||(i.maxWidth=0),i.maxHeight||(i.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.measure()},enumerable:!0,configurable:!0}),t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||Af(rb,this),kf(this._disposers,(function(t){t.dispose()}))},Object.defineProperty(t.prototype,"hideOverflow",{set:function(t){this.SVGContainer.style.overflow=t?"hidden":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return Rd(this._modal)||(this._modal=new Xp,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),t.prototype.openModal=function(t,e){this.closeModal();var i=this.modal;return i.content=t,i.readerTitle=e||"",i.title=e||"",i.open(),i},t.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(t.prototype,"popups",{get:function(){if(!Rd(this._popups)){var t=new Zp;t.container=this.SVGContainer,this._popups=new jm(t),this._disposers.push(new km(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),t.prototype.openPopup=function(t,e){var i=this.popups.create();return i.content=t,Rd(e)&&(i.title=e),i.open(),i},t.prototype.closeAllPopups=function(){this.popups.each((function(t){t.close()}))},Object.defineProperty(t.prototype,"readerAlertElement",{get:function(){if(!Rd(this._readerAlertElement)){var t=document.createElement("div");t.setAttribute("role","alert"),t.style.zIndex="-100000",t.style.opacity="0",t.style.position="absolute",t.style.top="0",this.SVGContainer.appendChild(t),this._readerAlertElement=t}return this._readerAlertElement},enumerable:!0,configurable:!0}),t.prototype.readerAlert=function(t){this.readerAlertElement.innerHTML=t},t.prototype.checkTransform=function(t){if(window.getComputedStyle){if(t&&t.style){var e=window.getComputedStyle(t,null);if(e){var i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");if(i&&"none"!==i){var n=i.split("(")[1].split(")")[0].split(","),r=Number(n[0]),s=Number(n[1]),a=Math.sqrt(r*r+s*s);isNaN(a)||(this.cssScale*=a)}}}t.parentNode&&t.parentNode instanceof HTMLElement&&this.checkTransform(t.parentNode)}},t}(),ab=function(){function t(t,e){this.container=t,this.id=e;var i=document.createElementNS(dp,"svg");i.setAttribute("version","1.1"),i.setAttributeNS(fp,"xmlns",dp),i.setAttributeNS(fp,"xmlns:xlink",mp),i.setAttribute("role","group"),this.container.appendChild(i),this.defs=document.createElementNS(dp,"defs"),i.appendChild(this.defs),i.style.width="100%",i.style.height="100%",i.style.overflow="visible",this.svg=i}return t.prototype.add=function(t){return new jp(t)},t.prototype.addGroup=function(t){return new Fp(t)},t.prototype.append=function(t){t&&this.svg.appendChild(t.node)},t.prototype.appendDef=function(t){t&&this.defs.appendChild(t.node)},t.prototype.foreignObject=function(){return new jp("foreignObject")},t.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},t}(),ob=null;function ub(){if(null===ob){var t=document.createElement("div");t.hidden=!0,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.zIndex="-1000000",document.body.appendChild(t);var e=new sb(t,!0);ob=new ab(e.SVGContainer,"ghost")}return ob}var lb=function(t){function e(){var e=t.call(this)||this;e._elements=new Am,e.properties={},e.className="Pattern",e.width=10,e.height=10,e.x=0,e.y=0,e.patternUnits="userSpaceOnUse";var i=new Dp;return e.backgroundFill=i.getFor("background"),e.backgroundOpacity=0,e.fillOpacity=1,e.fill=i.getFor("alternativeBackground"),e.stroke=i.getFor("alternativeBackground"),e.strokeOpacity=1,e.strokeWidth=1,e.shapeRendering="crispEdges",e.rotation=0,e.element=e.paper.addGroup("pattern"),e.id="pattern-"+Om.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e._disposers.push(new km(e._elements)),e.patternUnits=e.patternUnits,e.width=e.width,e.height=e.height,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){var t=this,e=this.element;if(e){e.removeChildNodes();var i=this.paper.add("rect");i.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),e.add(i),e.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),cm(this._elements.iterator(),(function(e){e.rotation=t.rotation,e.rotationX=t.properties.rotationX,e.rotationY=t.properties.rotationY,t.element.add(e)}))}},e.prototype.animate=function(t,e,i){return new cp(this,t,e,i).start()},e.prototype.addElement=function(t){this._elements.push(t),this._disposers.push(t)},e.prototype.removeElement=function(t){this._elements.removeValue(t),this.removeDispose(t)},Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(t){this.properties.fillOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.properties.fill},set:function(t){this.properties.fill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(t){this.properties.backgroundFill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(t){this.properties.backgroundOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(t){this.properties.strokeOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(t){this.properties.shapeRendering=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(t){this.properties.rotation=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(t){this.properties.patternUnits=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.properties.x},set:function(t){this.properties.x=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.properties.y},set:function(t){this.properties.y=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:ub()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),nm(e.properties,(function(t,e){i[t]=e}))},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new hp(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(t){this.properties.strokeDashArray=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e&&Rd(e.elements)&&Wd(e.elements))for(var i=0,n=e.elements.length;i<n;i++){var r=e.elements[i];if(Rd(r.type)){var s=this.createEntryInstance(r);s instanceof Xm&&(s.config=r),this.addElement(Rd(r.typeProperty)?s[r.typeProperty]:s.element)}}t.prototype.processConfig.call(this,e)},e}(Xm);Om.registeredClasses.Pattern=lb;var hb=function(t){function e(){var e=t.call(this)||this;return e._stops=new Am,e._rotation=0,e.className="LinearGradient",e._stops.events.on("setIndex",e.validate,e),e._stops.events.on("inserted",e.validate,e),e.element=e.paper.addGroup("linearGradient"),e.id="gradient-"+Om.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){var t=this,e=(this._rotation+90)*Ud,i=Math.round(50+50*Math.sin(e+Math.PI))+"%",n=Math.round(50+50*Math.cos(e))+"%",r=Math.round(50+50*Math.sin(e))+"%",s=Math.round(50+50*Math.cos(e+Math.PI))+"%",a=this.element;a.removeChildNodes(),a.attr({x1:i,x2:r,y1:n,y2:s}),cm(mm(this._stops.iterator()),(function(e){var i=e[0],n=e[1],r=n.offset;Gd(r)||(r=i/(t._stops.length-1));var s=t.paper.add("stop");Rd(n.color)&&s.attr({"stop-color":n.color.toString()}),Gd(n.opacity)&&s.attr({"stop-opacity":n.opacity}),Gd(r)&&s.attr({offset:r}),a.add(s)}))},e.prototype.clear=function(){this._stops.clear()},e.prototype.addColor=function(t,e,i){this._stops.push({color:t,opacity:e,offset:i})},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:ub()},set:function(t){this._paper!=t&&(this._paper=t,this.validate(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.validate()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this._rotation=e.rotation},Object.defineProperty(e.prototype,"gradientUnits",{set:function(t){this.element.attr({gradientUnits:t})},enumerable:!0,configurable:!0}),e}(Xm);Om.registeredClasses.LinearGradient=hb;var cb=function(t){function e(){var e=t.call(this)||this;return e._stops=new Am,e.element=e.paper.addGroup("radialGradient"),e.id="gradient-"+Om.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){var t,e=this,i=this.element;Gd(this.cx)&&((t=this.cx)instanceof Id&&(t=t.percent+"%"),i.attr({cx:t}));Gd(this.cy)&&((t=this.cy)instanceof Id&&(t=t.percent+"%"),i.attr({cy:t}));this.fx&&((t=this.fx)instanceof Id&&(t=t.percent+"%"),i.attr({fx:t}));this.fy&&((t=this.fy)instanceof Id&&(t=t.percent+"%"),i.attr({fy:t}));i.removeChildNodes(),cm(mm(this._stops.iterator()),(function(t){var n=t[0],r=t[1],s=r.offset;Gd(s)||(s=n/(e._stops.length-1));var a=e.paper.add("stop");Rd(r.color)&&a.attr({"stop-color":r.color.toString()}),Gd(r.opacity)&&a.attr({"stop-opacity":r.opacity}),Gd(s)&&a.attr({offset:s}),i.add(a)}))},e.prototype.addColor=function(t,e,i){this._stops.push({color:t,opacity:e,offset:i}),this.draw()},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:ub()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this._cx},set:function(t){this._cx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this._cy},set:function(t){this._cy=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fx",{get:function(){return this._fx},set:function(t){this._fx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fy",{get:function(){return this._fy},set:function(t){this._fy=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this.cx=e.cx,this.cy=e.cy,this.fx=e.fx,this.fy=e.fy},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._stops.clear()},e}(Xm);Om.registeredClasses.RadialGradient=cb;var db,fb=function(){function t(){}return t.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],t.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],t.pointer=[{property:"cursor",value:"pointer"}],t.default=[{property:"cursor",value:"default"}],t.horizontalResize=[{property:"cursor",value:"ew-resize"}],t.verticalResize=[{property:"cursor",value:"ns-resize"}],t.notAllowed=[{property:"cursor",value:"not-allowed"}],t.text=[{property:"cursor",value:"text"}],t}(),mb={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){var e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},vb=function(t){function e(){var e=t.call(this)||this;return e.adapter=new zm(e),e._locale=mb,e._defaultLocale=mb,e.className="Language",Rd(rp.defaultLocale)&&(e.locale=rp.defaultLocale),e.applyTheme(),e}return Sd(e,t),e.prototype.getLocale=function(t){return null==t&&(t=this._locale),this.adapter.apply("locale",{locale:t}).locale},e.prototype.translate=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];e=this.getLocale(e);var r=t,s=this.getTranslations(e),a=s[t];if(null===a)r="";else if(Rd(a))a&&(r=a);else if(e!==this._defaultLocale)return this.translate.apply(this,kd([t,this._defaultLocale],i));if(i.length)for(var o=i.length,u=0;u<o;++u)r=r.split("%"+(u+1)).join(i[u]);return this.adapter.apply("translate",{translation:r,locale:e}).translation},e.prototype.translateAny=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return this.translate.apply(this,kd([t,e],i))},e.prototype.setTranslationAny=function(t,e,i){(i||this.locale)[t]=e},e.prototype.translateEmpty=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=this.translate.apply(this,kd([t,e],i));return r==t?"":r},e.prototype.translateFunc=function(t,e){e=this.getLocale(e);var i=this.getTranslations(e)[t];return null!=i?i:e!==this._defaultLocale?this.translateFunc(t,this._defaultLocale):function(){return""}},e.prototype.translateAll=function(t,e){var i=this;return this.isDefault()?t:Tf(t,(function(t){return i.translate(t,e)}))},e.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){if(this._locale!=t&&(this._locale=t,this.events.isEnabled("localechanged"))){var e={type:"localechanged",locale:t,target:this};this.events.dispatchImmediately("localechanged",e)}},enumerable:!0,configurable:!0}),e.prototype.getTranslations=function(t){return this.adapter.apply("translations",{translations:t,locale:t}).translations},e}(Qm),pb=function(t){function e(){var e=t.call(this)||this;return e.adapter=new zm(e),e.className="TextFormatter",e.applyTheme(),e}return Sd(e,t),e.prototype.debug=function(){},e.prototype.format=function(t,e){Rd(e)||(e="svg");var i="",n=(t=this.escape(t)).match(/\[([^\]]*?)\]/gm);if(!n)return this.wrap(t,"",e);for(var r=t.split(/\[[^\[\]]*\]/),s=0,a=r.length;s<a;s++){var o=r[s];if(""!==o){o=this.adapter.apply("chunk",o);var u="";s>0&&(u=n[s-1].replace("[","").replace("]","")),i+=this.wrap(o,u,e)}}return i=this.unescape(i),this.cleanUp(i)},e.prototype.escape=function(t){return t.replace(/\[\[/g,Om.getPlaceholder("1")).replace(/([^\/\]]{1})\]\]/g,"$1"+Om.getPlaceholder("2")).replace(/\]\]/g,Om.getPlaceholder("2")).replace(/\{\{/g,Om.getPlaceholder("3")).replace(/\}\}/g,Om.getPlaceholder("4")).replace(/\'\'/g,Om.getPlaceholder("5"))},e.prototype.unescape=function(t){return t.replace(new RegExp(Om.getPlaceholder("1"),"g"),"[[").replace(new RegExp(Om.getPlaceholder("2"),"g"),"]]").replace(new RegExp(Om.getPlaceholder("3"),"g"),"{{").replace(new RegExp(Om.getPlaceholder("4"),"g"),"}}").replace(new RegExp(Om.getPlaceholder("5"),"g"),"''")},e.prototype.cleanUp=function(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},e.prototype.wrap=function(t,e,i){return""!==e&&"/"!==e||(e=""),"html"===i?this.wrapHtml(t,this.translateStyleShortcuts(e)):this.wrapSvg(t,this.translateStyleShortcuts(e))},e.prototype.wrapSvg=function(t,e){return""===e?"<tspan>"+t+"</tspan>":"<tspan style='"+e+"'>"+t+"</tspan>"},e.prototype.getSvgElement=function(t,e){var i=new jp("tspan");return i.textContent=t,e&&i.node.setAttribute("style",e),i},e.prototype.wrapHtml=function(t,e){return""===e?"<span>"+t+"</span>":"<span style='"+this.styleSvgToHtml(e)+"'>"+t+"</span>"},e.prototype.getHtmlElement=function(t,e){var i=document.createElement("span");return i.innerHTML=t,e&&i.setAttribute("style",e),i},e.prototype.styleSvgToHtml=function(t){return t=t.replace(/fill:/,"color:")},e.prototype.translateStyleShortcuts=function(t){if(""==t||"[ ]"==t)return"";var e=Om.getCache("translateStyleShortcuts_"+t);if(e)return e;var i=t.match(/('[^']*')|("[^"]*")/gi);if(i)for(var n=0;n<i.length;n++)t=t.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!r)return t;for(n=0;n<r.length;n++)r[n].match(/^bold$/i)?r[n]="font-weight:"+r[n]:"/"==r[n]?r[n]="":r[n].match(/:/)?r[n]=r[n].replace(/\+/g," "):r[n]="fill:"+r[n];var s=r.join(";");return Om.setCache("translateStyleShortcuts_"+t,s),s},e.prototype.chunk=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=[];t=this.escape(t);for(var r=e?t.split("'"):[t],s=0;s<r.length;s++){var a=r[s];if(""!==a)if(s%2==0)for(var o=(a=(a=a.replace(/\]\[/g,"]____[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),u=0;u<o.length;u++){"____"!==(l=this.cleanUp(this.unescape(o[u])))&&(""!==l&&(u%2==0?n.push({type:"value",text:this.adapter.apply("chunk",l)}):n.push({type:i?"value":"format",text:"["+l+"]"})))}else for(o=a.split(/[\[\]]+/),u=0;u<o.length;u++){var l;""!==(l=this.cleanUp(this.unescape(o[u])))&&(u%2==0?n.push({type:"text",text:l}):this.isImage(l)?n.push({type:"image",text:"["+l+"]"}):n.push({type:"format",text:"["+l+"]"}))}}return n},e.prototype.isImage=function(t){return!!t.match(/img[ ]?:/)},e}(Xm);function bb(){return null==db&&(db=new pb),db}Om.registeredClasses.TextFormatter=pb;var gb=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._numberFormat="#,###.#####",e._outputFormat="svg",e._smallNumberThreshold=1,e._forceLTR=!1,e.className="NumberFormatter",e.applyTheme(),e}return Sd(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new vb),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e,i){var n;(void 0===e||Vd(e)&&"number"===e.toLowerCase())&&(e=this._numberFormat);var r,s=Number(t);if($d(e))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,e).format(s):new Intl.NumberFormat(void 0,e).format(s)}catch(t){return"Invalid"}else{e=vv(e);var a=this.parseFormat(e,this.language),o=void 0;o=s>this._negativeBase?a.positive:s<this._negativeBase?a.negative:a.zero,Rd(i)&&!o.mod&&(r=o,(o=JSON.parse(JSON.stringify(r))).decimals.active=0==s?0:i),n=o.template.split("____").join(this.applyFormat(s,o))}return this.forceLTR&&(n=""+n),n},e.prototype.parseFormat=function(t,e){var i=this,n=this.getCache(t);if(Rd(n))return n;var r={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}},s=(t=t.replace("||","____")).split("|");return r.positive.source=s[0],void 0===s[2]?r.zero=r.positive:r.zero.source=s[2],void 0===s[1]?r.negative=r.positive:r.negative.source=s[1],nm(r,(function(t,e){if(!e.parsed)if(void 0===i.getCache(e.source)){var n=e.source;"number"===n.toLowerCase()&&(n=Vd(i._numberFormat)?i._numberFormat:"#,###.#####");for(var s=bb().chunk(n,!0),a=0;a<s.length;a++){var o=s[a];if(o.text=o.text.replace("____","|"),"value"===o.type){var u=o.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);if(u)if(null===u||""===u[0])e.template+=o.text;else{var l=u[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);l&&(e.mod=l[0].toLowerCase(),e.modSpacing=!!u[0].match(/[ ]{1}[abespABESP%!]{1}$/));var h=u[0].split(".");if(""===h[0]);else{e.thousands.active=(h[0].match(/0/g)||[]).length,e.thousands.passive=(h[0].match(/\#/g)||[]).length+e.thousands.active;var c=h[0].split(",");1===c.length||(e.thousands.interval=Bd(c.pop()).length,0===e.thousands.interval&&(e.thousands.interval=-1))}void 0===h[1]||(e.decimals.active=(h[1].match(/0/g)||[]).length,e.decimals.passive=(h[1].match(/\#/g)||[]).length+e.decimals.active),e.template+=o.text.split(u[0]).join("____")}}else e.template+=o.text}i.setCache(e.source,e),e.parsed=!0}else r[t]=i.getCache(e.source)})),this.setCache(t,r),r},e.prototype.applyFormat=function(t,e){var i=t<0;t=Math.abs(t);var n="",r="",s=e.mod?e.mod.split(""):[];if(-1!==s.indexOf("b")){var a=this.applyPrefix(t,this.bytePrefixes,-1!==s.indexOf("!"));t=a[0],n=a[1],r=a[2],e.modSpacing&&(r=" "+r)}else if(-1!==s.indexOf("a")){var o=this.applyPrefix(t,t<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,-1!==s.indexOf("!"));t=o[0],n=o[1],r=o[2],e.modSpacing&&(r=" "+r)}else if(-1!==s.indexOf("p")){var u=Math.min(t.toString().length+2,21);t=parseFloat(t.toPrecision(u)),n=this.language.translate("_percentPrefix")||"",r=this.language.translate("_percentSuffix")||"",""==n&&""==r&&(r="%")}else if(-1!==s.indexOf("%")){u=rf(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(u)),r="%"}else if(-1!==s.indexOf("")){u=rf(t.toString().length+3,21);t*=1e3,t=parseFloat(t.toPrecision(u)),r=""}if(-1!==s.indexOf("e")){var l=void 0;l=e.decimals.passive>=0?t.toExponential(e.decimals.passive).split("e"):t.toExponential().split("e"),t=Number(l[0]),r="e"+l[1],e.modSpacing&&(r=" "+r)}else if(0===e.decimals.passive)t=Math.round(t);else if(e.decimals.passive>0){var h=Math.pow(10,e.decimals.passive);t=Math.round(t*h)/h}var c="",d=function(t){if(jd(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(0===t&&1/t==-1/0)return"-0";var e=t<0;t=Math.abs(t);var i,n=Bd(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t)),r=n[1],s=n[2]||"";if(null==n[3])i=""===s?r:r+"."+s;else{var a,o=+n[3];i=t<1?"0."+gm("0",a=o-1)+r+s:0==(a=o-s.length)?r+s:a<0?r+s.slice(0,a)+"."+s.slice(a):r+s+gm("0",a)}return e?"-"+i:i}(t).split("."),f=d[0];if(f.length<e.thousands.active&&(f=Array(e.thousands.active-f.length+1).join("0")+f),e.thousands.interval>0){for(var m=[],v=f.split("").reverse().join(""),p=0,b=f.length;p<=b;p+=e.thousands.interval){var g=v.substr(p,e.thousands.interval).split("").reverse().join("");""!==g&&m.unshift(g)}f=m.join(e.thousands.separator)}c+=f,1===d.length&&d.push("");var y=d[1];return y.length<e.decimals.active&&(y+=Array(e.decimals.active-y.length+1).join("0")),""!==y&&(c+=e.decimals.separator+y),""===c&&(c="0"),0!==t&&i&&-1===s.indexOf("s")&&(c="-"+c),n&&(c=n+c),r&&(c+=r),c},e.prototype.applyPrefix=function(t,e,i){void 0===i&&(i=!1);for(var n=t,r="",s="",a=!1,o=1,u=0,l=e.length;u<l;u++)e[u].number<=t&&(0===e[u].number?n=0:(n=t/e[u].number,o=e[u].number),r=e[u].prefix,s=e[u].suffix,a=!0);return!a&&i&&e.length&&0!=t&&(n=t/e[0].number,r=e[0].prefix,s=e[0].suffix,a=!0),a&&(n=parseFloat(n.toPrecision(rf(o.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,r,s]},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(t){this._negativeBase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigNumberPrefixes",{get:function(){return Rd(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(t){this._bigNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberPrefixes",{get:function(){return Rd(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(t){this._smallNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(t){this._smallNumberThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytePrefixes",{get:function(){return Rd(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(t){this._bytePrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(t){this._forceLTR=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.escape=function(t){return t.replace("||","____")},e.prototype.unescape=function(t){return t.replace("____","|")},e}(Xm);Om.registeredClasses.NumberFormatter=gb;var yb=function(t){function e(){var e=t.call(this)||this;return e._dateFormat="yyyy-MM-dd",e._inputDateFormat="yyyy-MM-dd",e._utc=!1,e.timezoneMinutes=0,e._firstDayOfWeek=1,e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e._outputFormat="svg",e.capitalize=!0,e.className="DateFormatter",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(t){this._language=t,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e,i){var n,r;if(this.language||(this.sprite?this.language=this.sprite.language:this.language=new vb),void 0!==e&&""!==e||(e=this._dateFormat),r=Vd(t)?this.parse(t):gv(t),$d(e))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,e).format(r):new Intl.DateTimeFormat(void 0,e).format(r)}catch(t){return"Invalid"}else{e=vv(e);var s=this.parseFormat(e);if(Rd(this.timezoneOffset)?r.setMinutes(r.getMinutes()+r.getTimezoneOffset()-this.timezoneOffset):Rd(this.timezone)&&!1!==i&&(r=Up(r,this.timezone)),!Gd(r.getTime()))return this.language.translate("Invalid date");n=this.applyFormat(r,s,this.language),this.capitalize&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase()))}return n},e.prototype.parseFormat=function(t){var e=this.getCache(t);if(Rd(e))return e;for(var i={template:"",parts:[]},n=bb().chunk(t,!0),r=0;r<n.length;r++){var s=n[r];if("value"===s.type){s.text.match(/^date$/i)&&Vd(this._dateFormat)&&(s.text=this._dateFormat);var a=s.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(a)for(var o=0;o<a.length;o++)i.parts.push(a[o]),s.text=s.text.replace(a[o],"____")}i.template+=s.text}return this.setCache(t,i),i},e.prototype.applyFormat=function(t,e,i){var n,r,s,a,o,u,l,h,c=e.template,d=t.getTimezoneOffset(),f=t.getTime();this.utc?(n=t.getUTCFullYear(),r=t.getUTCMonth(),s=t.getUTCDay(),a=t.getUTCDate(),o=t.getUTCHours(),u=t.getUTCMinutes(),l=t.getUTCSeconds(),h=t.getUTCMilliseconds()):(n=t.getFullYear(),r=t.getMonth(),s=t.getDay(),a=t.getDate(),o=t.getHours(),u=t.getMinutes(),l=t.getSeconds(),h=t.getMilliseconds());for(var m=0,v=e.parts.length;m<v;m++){var p="";switch(e.parts[m]){case"G":p=i.translate(n<0?"_era_bc":"_era_ad");break;case"yyyy":p=Math.abs(n).toString(),n<0&&(p+=i.translate("_era_bc"));break;case"yyy":case"yy":case"y":p=Math.abs(n).toString().substr(-e.parts[m].length),n<0&&(p+=i.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var b=n;1==Sv(t)&&s>4&&b--,p="YYYY"==e.parts[m]?Math.abs(b).toString():Math.abs(b).toString().substr(-e.parts[m].length),b<0&&(p+=i.translate("_era_bc"));break;case"u":case"F":case"g":break;case"q":p=""+Math.ceil((t.getMonth()+1)/3);break;case"MMMMM":p=i.translate(this.months[r]).substr(0,1);break;case"MMMM":p=i.translate(this.months[r]);break;case"MMM":p=i.translate(this.monthsShort[r]);break;case"MM":p=mv(r+1,2,"0");break;case"M":p=(r+1).toString();break;case"ww":p=mv(Sv(t),2,"0");break;case"w":p=Sv(t).toString();break;case"W":p=xv(t).toString();break;case"dd":p=mv(a,2,"0");break;case"d":p=a.toString();break;case"DD":case"DDD":p=mv(wv(t).toString(),e.parts[m].length,"0");break;case"D":p=wv(t).toString();break;case"t":p=i.translateFunc("_dateOrd").call(this,a);break;case"E":p=(s||7).toString();break;case"EE":p=mv((s||7).toString(),2,"0");break;case"EEE":case"eee":p=i.translate(this.weekdaysShort[s]);break;case"EEEE":case"eeee":p=i.translate(this.weekdays[s]);break;case"EEEEE":case"eeeee":p=i.translate(this.weekdays[s]).substr(0,1);break;case"e":case"ee":p=(s-this.firstDayOfWeek+1).toString(),"ee"==e.parts[m]&&(p=mv(p,2,"0"));break;case"a":p=o>=12?i.translate("PM"):i.translate("AM");break;case"aa":p=o>=12?i.translate("P.M."):i.translate("A.M.");break;case"aaa":p=o>=12?i.translate("P"):i.translate("A");break;case"h":p=Cv(o).toString();break;case"hh":p=mv(Cv(o),2,"0");break;case"H":p=o.toString();break;case"HH":p=mv(o,2,"0");break;case"K":p=Cv(o,0).toString();break;case"KK":p=mv(Cv(o,0),2,"0");break;case"k":p=(o+1).toString();break;case"kk":p=mv(o+1,2,"0");break;case"m":p=u.toString();break;case"mm":p=mv(u,2,"0");break;case"s":p=l.toString();break;case"ss":p=mv(l,2,"0");break;case"S":case"SS":case"SSS":p=Math.round(h/1e3*Math.pow(10,e.parts[m].length)).toString();break;case"x":p=f.toString();break;case"n":case"nn":case"nnn":p=mv(h,e.parts[m].length,"0");break;case"z":p=Ov(t,!1,!1,this.utc);break;case"zz":p=Ov(t,!0,!1,this.utc);break;case"zzz":p=Ov(t,!1,!0,this.utc);break;case"zzzz":p=Ov(t,!0,!0,this.utc);break;case"Z":case"ZZ":var g=Math.abs(d)/60,y=Math.floor(g),w=60*g-60*y;this.utc&&(y=0,w=0),"Z"==e.parts[m]?(p="GMT",p+=d>0?"-":"+",p+=mv(y,2)+":"+mv(w,2)):(p=d>0?"-":"+",p+=mv(y,2)+mv(w,2));break;case"i":p=t.toISOString();break;case"I":p=t.toUTCString()}c=c.replace("____",p)}return c},e.prototype.parse=function(t,e){if(Rd(e)||(e=this.inputDateFormat),t instanceof Date)return t;if("number"==typeof t)return new Date(t);var i;"string"!=typeof t&&(t=t.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new vb);var n="";e=(e=vv(e)).substr(0,t.length);for(var r=this.parseFormat(e),s={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},a={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},o=0,u=0,l=0;l<r.parts.length;l++){switch(u=l+o+1,r.parts[l]){case"yyyy":case"YYYY":n+="([0-9]{4})",s.year=u;break;case"yyy":case"YYY":n+="([0-9]{3})",s.year3=u;break;case"yy":case"YY":n+="([0-9]{2})",s.year2=u;break;case"y":case"Y":n+="([0-9]{1})",s.year1=u;break;case"MMMM":n+="("+this.getStringList(this.months).join("|")+")",s.monthLong=u;break;case"MMM":n+="("+this.getStringList(this.monthsShort).join("|")+")",s.monthShort=u;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",s.month=u;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",s.week=u;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",s.day=u;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.yearDay=u;break;case"dddd":n+="("+this.getStringList(this.weekdays).join("|")+")",s.weekdayLong=u;break;case"ddd":n+="("+this.getStringList(this.weekdaysShort).join("|")+")",s.weekdayShort=u;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",s.am=u;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",s.hour12Base1=u;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",s.hourBase0=u;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",s.hour12Base0=u;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",s.hourBase1=u;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",s.minute=u;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",s.second=u;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.millisecond=u,s.millisecondDigits=r.parts[l].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.millisecond=u;break;case"x":n+="([0-9]{1,})",s.timestamp=u;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",s.zone=u;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",s.zone=u;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",s.iso=u,o+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":o--}n+="[^0-9]*"}var h=new RegExp(n),c=t.match(h);if(c){if(s.year>-1&&(a.year=parseInt(c[s.year])),s.year3>-1){var d=parseInt(c[s.year3]);d+=1e3,a.year=d}if(s.year2>-1){d=parseInt(c[s.year2]);d+=d>50?1e3:2e3,a.year=d}if(s.year1>-1){d=parseInt(c[s.year1]);d=10*Math.floor((new Date).getFullYear()/10)+d,a.year=d}if(s.monthLong>-1&&(a.month=this.resolveMonth(c[s.monthLong])),s.monthShort>-1&&(a.month=this.resolveShortMonth(c[s.monthShort])),s.month>-1&&(a.month=parseInt(c[s.month])-1),s.week>-1&&-1===s.day&&(a.month=0,a.day=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=new Date(e,0,4,0,0,0,0);return n&&r.setUTCFullYear(e),7*t+i-((r.getDay()||7)+3)}(parseInt(c[s.week]),a.year,1,this.utc)),s.day>-1&&(a.day=parseInt(c[s.day])),s.yearDay>-1&&(a.month=0,a.day=parseInt(c[s.yearDay])),s.hourBase0>-1&&(a.hour=parseInt(c[s.hourBase0])),s.hourBase1>-1&&(a.hour=parseInt(c[s.hourBase1])-1),s.hour12Base0>-1)11==(d=parseInt(c[s.hour12Base0]))&&(d=0),s.am>-1&&!this.isAm(c[s.am])&&(d+=12),a.hour=d;if(s.hour12Base1>-1)12==(d=parseInt(c[s.hour12Base1]))&&(d=0),s.am>-1&&!this.isAm(c[s.am])&&(d+=12),a.hour=d;if(s.minute>-1&&(a.minute=parseInt(c[s.minute])),s.second>-1&&(a.second=parseInt(c[s.second])),s.millisecond>-1){d=parseInt(c[s.millisecond]);2==s.millisecondDigits?d*=10:1==s.millisecondDigits&&(d*=100),a.millisecond=d}if(s.timestamp>-1){a.timestamp=parseInt(c[s.timestamp]);var f=new Date(a.timestamp);a.year=f.getUTCFullYear(),a.month=f.getUTCMonth(),a.day=f.getUTCDate(),a.hour=f.getUTCHours(),a.minute=f.getUTCMinutes(),a.second=f.getUTCSeconds(),a.millisecond=f.getUTCMilliseconds()}s.zone>-1&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),c[s.zone])),s.iso>-1&&(a.year=Ld(c[s.iso+0]),a.month=Ld(c[s.iso+1])-1,a.day=Ld(c[s.iso+2]),a.hour=Ld(c[s.iso+3]),a.minute=Ld(c[s.iso+4]),a.second=Ld(c[s.iso+5]),a.millisecond=Ld(c[s.iso+6]),"Z"==c[s.iso+7]||"z"==c[s.iso+7]?a.utc=!0:""!=c[s.iso+7]&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),c[s.iso+7]))),i=a.utc?new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)):new Date(a.year,a.month,a.day,a.hour,a.minute+a.offset,a.second,a.millisecond)}else i=new Date(t);return i},e.prototype.resolveTimezoneOffset=function(t,e){if(e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var i=Bd(e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),n=i[1],r=i[2],s=i[3],a=60*parseInt(r)+parseInt(s);return"+"==n&&(a*=-1),a-(t||new Date).getTimezoneOffset()}return 0},e.prototype.resolveMonth=function(t){var e=this.months.indexOf(t);return e>-1||this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.months).indexOf(t))>-1?e:0},e.prototype.resolveShortMonth=function(t){var e=this.monthsShort.indexOf(t);return e>-1||(e=this.months.indexOf(t))>-1||this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.monthsShort).indexOf(t))>-1?e:0},e.prototype.isAm=function(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},e.prototype.getStringList=function(t){for(var e=[],i=0;i<t.length;i++)this.language?e.push(uv(this.language.translate(t[i]))):e.push(uv(t[i]));return e},Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(t){this._dateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(t){this._inputDateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utc",{get:function(){return this._utc},set:function(t){this._utc=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(t){this._timezoneOffset!=t&&(this._timezoneOffset=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezone",{get:function(){return this._timezone},set:function(t){this._timezone!=t&&(this._timezone=t,this.timezoneMinutes=function(t){var e=new Date;return e.setHours(0,0,0,0),Up(e,t).getMinutes()}(t),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(t){this._firstDayOfWeek=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(Xm);Om.registeredClasses.DateFormatter=yb;var wb=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._baseUnit="second",e._outputFormat="svg",e._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},e._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},e.className="DurationFormatter",e.applyTheme(),e}return Sd(e,t),e.prototype.format=function(t,e,i){this.language||(this.sprite?this.language=this.sprite.language:this.language=new vb);var n=i||this._baseUnit;void 0!==e&&""!==e||(e=Rd(this.durationFormat)?this.durationFormat:this.getFormat(Ld(t),null,n)),e=vv(e);var r,s=this.parseFormat(e,n),a=Number(t);r=a>this._negativeBase?s.positive:a<this._negativeBase?s.negative:s.zero;var o=this.applyFormat(a,r);return""!==r.color&&("svg"===this._outputFormat?o="<tspan fill='"+r.color+"'>"+o+"</tspan>":"html"===this._outputFormat&&(o="<span style='color: "+r.color+";'>"+o+"</span>")),o},e.prototype.parseFormat=function(t,e){var i=this,n=this.getCache(t);if(Rd(n))return n;var r=e||this._baseUnit,s={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},a=(t=t.replace("||","____")).split("|");return s.positive.source=a[0],void 0===a[2]?s.zero=s.positive:s.zero.source=a[2],void 0===a[1]?s.negative=s.positive:s.negative.source=a[1],nm(s,(function(t,e){if(!e.parsed)if(void 0===i.getCache(e.source)){var n,r=e.source;(n=e.source.match(/^\[([^\]]*)\]/))&&n.length&&""!==n[0]&&(r=e.source.substr(n[0].length),e.color=n[1]);for(var a=bb().chunk(r,!0),o=0;o<a.length;o++){var u=a[o];if(u.text=u.text.replace("____","|"),"value"===u.type){u.text.match(/[yYMdDwhHKkmsSn]+a/)&&(e.absolute=!0,u.text=u.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var l=u.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(l)for(var h=0;h<l.length;h++)Rd(l[h])||(l[h]=i._unitAliases[l[h]]),e.parts.push(l[h]),u.text=u.text.replace(l[h],"____")}e.template+=u.text}i.setCache(e.source,e),e.parsed=!0}else s[t]=i.getCache(e.source)})),this.setCache(t,s),s},e.prototype.applyFormat=function(t,e){var i=!e.absolute&&t<this._negativeBase;t=Math.abs(t);for(var n=this.toTimeStamp(t,e.baseUnit),r=e.template,s=0,a=e.parts.length;s<a;s++){var o=e.parts[s],u=this.toTimeUnit(o.substr(0,1)),l=o.length,h=Math.floor(n/this._unitValues[u]);r=r.replace("____",mv(h,l,"0")),n-=h*this._unitValues[u]}return i&&(r="-"+r),r},e.prototype.toTimeStamp=function(t,e){return t*this._unitValues[e]},e.prototype.toTimeUnit=function(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.getFormat=function(t,e,i){if(Rd(this.durationFormat))return this.durationFormat;if(i||(i=this.baseUnit),Rd(e)&&t!=e){t=Math.abs(t),e=Math.abs(e);var n=this.getValueUnit(nf(t,e),i);return this.durationFormats[i][n]}var r=this.getValueUnit(t,i);return this.durationFormats[i][r]},e.prototype.getValueUnit=function(t,e){var i;e||(e=this.baseUnit);var n=this.getMilliseconds(t,e);return im(this._unitValues,(function(t,r){if(t==e||i){if(n/r<=1)return i||(i=t),!1;i=t}return!0})),i},e.prototype.getMilliseconds=function(t,e){return e||(e=this.baseUnit),t*this._unitValues[e]},Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(t){this._durationFormat!=t&&(this._durationFormat=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(t){this._durationFormats=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(Xm);Om.registeredClasses.DurationFormatter=wb;var Sb=new wm;var xb,Cb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._validateDisposer=null,e}return Sd(e,t),e.prototype.invalidate=function(){null===this._validateDisposer&&(this._validateDisposer=Om.events.on("exitframe",this.validate,this))},e.prototype.validate=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null)},e.prototype.dispose=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null),t.prototype.dispose.call(this)},e}(Qm),Ob=function(t){function e(){var e=t.call(this)||this;return e.adapter=new zm(e),e.closeDelay=1e3,e.closeOnClick=!0,e._language=new Vf,e._menuTag="ul",e._itemTag="li",e._labelTag="a",e._iconTag="img",e._classPrefix="amexport",e._defaultStyles=!0,e._align="right",e._verticalAlign="top",e._tabindex=0,e._ignoreNextClose=!1,e._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],e.className="ExportMenu",e._disposers.push(e._language),e.invalidate(),e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){this.draw(),t.prototype.validate.call(this)},e.prototype.draw=function(){var t=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),Bd(this._container).appendChild(this._element);for(var e=this.adapter.apply("items",{items:this._items}).items,i=e.length,n=0;n<i;n++)this.drawBranch(this._element,e[n],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(Yp().body.events.on("down",(function(e){e.pointer.touch||(t._ignoreNextClose=!1),t.close()}))),this._disposers.push(Yp().body.events.on("keydown",(function(e){var i=Bp.getEventKey(e.event);switch(i){case"esc":t.close();break;case"up":case"down":case"left":case"right":t._currentSelection&&e.event.preventDefault(),t.moveSelection(i)}}))),this.defaultStyles&&this.loadDefaultCSS()},e.prototype.drawBranch=function(t,e,i){var n=this;if(!0!==(e=this.adapter.apply("branch",{branch:e,level:i}).branch).unsupported){e.ascendants||(e.ascendants=new Am);var r,s=e.type,a=this.createItemElement(i,s);e.icon?((r=this.createIconElement(i,s)).src=e.icon,(e.label||e.title)&&(r.title=e.title||e.label)):e.svg?(r=this.createSvgElement(i,s,e.svg),(e.label||e.title)&&(r.title=e.title||e.label)):((r=this.createLabelElement(i,s)).innerHTML=e.label?this.language.translate(e.label):"",e.title&&(r.title=e.title));var o=this.getReaderLabel(e,r.innerHTML);r.setAttribute("aria-label",o),a.appendChild(r),e.interactions=Yp().getInteraction(a),e.element=a,this.typeClickable(s)&&(e.interactions.events.on("hit",(function(t){if(n.events.isEnabled("hit")&&!n.isDisposed()){var i={type:"hit",event:t.event,target:n,branch:e};n.events.dispatchImmediately("hit",i)}})),e.interactions.events.on("keyup",(function(t){if(Bp.isKey(t.event,"enter")&&n.events.isEnabled("enter")){var i={type:"enter",event:t.event,target:n,branch:e};n.events.dispatchImmediately("enter",i)}})));var u=this.getSubMenu(e);null!=u&&(e.interactions.events.on("keyup",(function(t){Bp.isKey(t.event,"enter")&&(n.selectBranch(u[0]),n.setFocus(u[0]))})),e.interactions.events.on("hit",(function(t){n.selectBranch(e)}))),e.interactions.events.on("over",(function(t){if(t.pointer.touch&&(n._ignoreNextClose=!0),n.selectBranch(e),n.events.isEnabled("over")){var i={type:"over",event:t.event,target:n,branch:e};n.events.dispatchImmediately("over",i)}})),e.interactions.events.on("out",(function(t){if(!n.isDisposed()&&(t.pointer.touch||n.delayUnselectBranch(e),n.events.isEnabled("out"))){var i={type:"out",event:t.event,target:n,branch:e};n.events.dispatchImmediately("out",i)}})),e.interactions.events.on("focus",(function(t){n.selectBranch(e)})),e.interactions.events.on("blur",(function(t){n.delayUnselectBranch(e)}));var l=i+1;if(e.menu){var h=this.createMenuElement(l);e.submenuElement=h;for(var c=e.menu.length,d=0;d<c;d++){var f=new Am;e.menu[d].ascendants=f,e.ascendants.length&&f.copyFrom(e.ascendants),f.push(e),this.drawBranch(h,e.menu[d],l)}if(""==h.innerHTML)return;a.appendChild(h)}e.hidden&&this.hideBranch(e),e.id&&a.setAttribute("id",e.id),e.color&&(a.style.backgroundColor=e.color.hex),t.appendChild(a)}},e.prototype.createMenuElement=function(t){var e=document.createElement(this.menuTag);return e.className=this.getMenuItemClass(t),0===t?e.setAttribute("role","menubar"):e.setAttribute("role","menu"),e},e.prototype.getMenuItemClass=function(t){var e=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+t;return 0===t&&(e+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:e,level:t}).className},e.prototype.createItemElement=function(t,e){var i=document.createElement(this.itemTag),n=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return i.className=this.adapter.apply("itemClass",{className:n,level:t,type:e}).className,i.setAttribute("role","menuitem"),i.setAttribute("tabindex",this.tabindex.toString()),i},e.prototype.createLabelElement=function(t,e){var i=document.createElement(this.labelTag),n=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(n+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:n,level:t,type:e}).className,i},e.prototype.createIconElement=function(t,e){var i=document.createElement(this.iconTag),n=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(n+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:n,level:t,type:e}).className,i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},e.prototype.createSvgElement=function(t,e,i){var n=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement,r=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(r+=" "+this.classPrefix+"-clickable"),n.setAttribute("class",this.adapter.apply("labelClass",{className:r,level:t,type:e}).className),n.setAttribute("tabindex",this.tabindex.toString()),n.setAttribute("role","menuitem"),n},e.prototype.dispose=function(){this._disposed||(t.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},e.prototype.typeClickable=function(t){return Rd(t)},e.prototype.hasSubMenu=function(t){return!(!t.menu||!t.menu.length)},e.prototype.getSubMenu=function(t){if(t.menu&&t.menu.length)return t.menu},e.prototype.getReaderLabel=function(t,e){return e=pv(e),0==t.ascendants.length?(e="..."==e?this.language.translate("Export"):e,e+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(t)?e+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":"print"==t.type?e=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(t.type)&&(e=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,e)),this.adapter.apply("rederLabel",{label:e,branch:t}).label},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{set:function(t){this._menuTag=t,this._itemTag="ul"==t?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(t){this._align=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(t){this._verticalAlign=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(t){this._classPrefix=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t,t&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){var t,e,i,n;this._disposers.push((t=Cp(this.container),e=this.classPrefix,i=e||"amexport",n=new Dp,Sb.insertKeyIfEmpty(i,(function(){var e=new zf([new Tp(t,"."+i+"-menu *",{"box-sizing":"border-box"}),new Tp(t,"."+i+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new Tp(t,"."+i+"-menu-level-0."+i+"-left",{right:"auto",left:"5px"}),new Tp(t,"."+i+"-menu-level-0."+i+"-right",{right:"5px",left:"auto"}),new Tp(t,"."+i+"-menu-level-0."+i+"-top",{top:"5px",bottom:"auto"}),new Tp(t,"."+i+"-menu-level-0."+i+"-bottom",{top:"auto",bottom:"5px"}),new Tp(t,"."+i+"-item."+i+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new Tp(t,"div:hover > div > ."+i+"-menu ."+i+"-item."+i+"-item-level-0, ."+i+"-item."+i+"-item-level-0.active",{opacity:"0.9"}),new Tp(t,"."+i+"-item."+i+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new Tp(t,"."+i+"-item."+i+"-item-level-0:before",{display:"block"}),new Tp(t,"."+i+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":n.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:n.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new Tp(t,"."+i+"-left ."+i+"-item",{margin:"1px 0 0 1px"}),new Tp(t,"."+i+"-item:hover, ."+i+"-item.active",{background:n.getFor("secondaryButtonHover").hex,color:n.getFor("secondaryButtonText").hex}),new Tp(t,"."+i+"-item > ."+i+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new Tp(t,"."+i+"-left ."+i+"-item > ."+i+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new Tp(t,"."+i+"-right ."+i+"-item > ."+i+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new Tp(t,"."+i+"-top ."+i+"-item > ."+i+"-menu",{top:"-1px",bottom:"auto"}),new Tp(t,"."+i+"-bottom ."+i+"-item > ."+i+"-menu",{top:"auto",bottom:"0"}),new Tp(t,"."+i+"-item > ."+i+"-menu",{display:"none"}),new Tp(t,"."+i+"-item:hover > ."+i+"-menu, ."+i+"-item.active > ."+i+"-menu",{display:"block"}),new Tp(t,"."+i+"-item:hover > ."+i+"-menu > ."+i+"-item, ."+i+"-item.active > ."+i+"-menu > ."+i+"-item",{opacity:"1"}),new Tp(t,"."+i+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new Tp(t,"."+i+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new Tp(t,"."+i+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new Tp(t,"."+i+"-item-level-0 > ."+i+"-icon",{padding:"0.1em 0.2em"}),new Tp(t,"."+i+"-clickable",{cursor:"pointer"})]);return new Gf((function(){Sb.removeKey(i),e.dispose()}))})).increment())),this._element&&(this._element.style.display="")},Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(t){this._tabindex=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this,e=this._language.get();return null==e&&(e=new vb,this._language.set(e,e.events.on("localechanged",(function(e){t.invalidate()})))),e},set:function(t){var e=this;this._language.set(t,t.events.on("localechanged",(function(t){e.invalidate()}))),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.close=function(){var t=this;if(!this.isDisposed())if(this._ignoreNextClose)this._ignoreNextClose=!1;else{if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout((function(){t._element.style.pointerEvents="auto"}),100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var e=this._element.getElementsByClassName("active"),i=e.length-1;i>=0;i--)e[i]&&gp(e[i],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},e.prototype.selectBranch=function(t){var e=this;if(!this.isDisposed()&&(t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),bp(t.element,"active"),t.submenuElement&&t.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==t&&this._currentSelection.ascendants&&cm(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var i=!0,n=function(t){return i=e(t)},r=t.length,s=0;s<r&&(t[s](n),i);++s);}}(um([this._currentSelection]),this._currentSelection.ascendants.iterator()),(function(i){t.ascendants.contains(i)||t===i||e.unselectBranch(i,!0)})),cm(t.ascendants.iterator(),(function(t){t.closeTimeout&&(e.removeDispose(t.closeTimeout),t.closeTimeout=void 0),bp(t.element,"active")})),this._currentSelection=t,this.events.isEnabled("branchselected"))){var i={type:"branchselected",target:this,branch:t};this.events.dispatchImmediately("branchselected",i)}},e.prototype.unselectBranch=function(t,e){if(!this.isDisposed()&&(gp(t.element,"active"),t.submenuElement&&t.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==t&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected"))){var i={type:"branchunselected",target:this,branch:t};this.events.dispatchImmediately("branchunselected",i)}},e.prototype.delayUnselectBranch=function(t,e){var i=this;this.isDisposed()||(t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),t.closeTimeout=this.setTimeout((function(){i.unselectBranch(t,e)}),this.closeDelay),!0!==e&&t.ascendants&&cm(t.ascendants.iterator(),(function(t){i.delayUnselectBranch(t,!0)})))},e.prototype.moveSelection=function(t){if(!this.isDisposed()&&this._currentSelection){var e;if("up"==t)e=this.getPrevSibling(this._currentSelection);else if("down"==t)e=this.getNextSibling(this._currentSelection);else if("left"==t&&"right"==this.align||"right"==t&&"left"==this.align){var i=this.getSubMenu(this._currentSelection);null!=i&&(e=i[0])}else("right"==t&&"right"==this.align||"left"==t&&"left"==this.align)&&(e=this.getParentItem(this._currentSelection));e&&e!==this._currentSelection&&(this.selectBranch(e),this.setFocus(e),this._currentSelection=e)}},e.prototype.getSiblings=function(t){var e=this.getParentItem(t);return e&&e.menu?e.menu:[]},e.prototype.getParentItem=function(t){return t.ascendants&&t.ascendants.length?t.ascendants.getIndex(t.ascendants.length-1):void 0},e.prototype.getNextSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var i=e.indexOf(t)+1;return e[i=e.length==i?0:i].unsupported?this.getNextSibling(e[i]):e[i]}return t},e.prototype.getPrevSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var i=e.indexOf(t)-1;return e[i=-1==i?e.length-1:i].unsupported?this.getPrevSibling(e[i]):e[i]}return t},e.prototype.setFocus=function(t){if(t.interactions)try{t.interactions.element.focus()}catch(t){}},e.prototype.setBlur=function(t){if(t.interactions)try{t.interactions.element.blur()}catch(t){}},e.prototype.hideBranch=function(t){t.element.style.display="none"},e.prototype.showBranch=function(t){t.element.style.display=""},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e}(Cb);function Mb(t,e,i){return new Promise((function(n,r){var s=Rd(i)&&"blob"==i.responseType,a=new XMLHttpRequest;if(a.onload=function(){if(200===a.status){var t,i=void 0;if(s)return t=a.response,void(u=t,new Promise((function(t,e){var i=new FileReader;i.onload=function(e){t(i.result)},i.onerror=function(t){e(t)},i.readAsText(u)}))).then((function(i){var r={xhr:a,error:!1,response:i,blob:t,type:a.getResponseHeader("Content-Type"),target:e};n(r)}));i=a.responseText||a.response;var o={xhr:a,error:!1,response:i,blob:t,type:a.getResponseHeader("Content-Type"),target:e};n(o)}else r({xhr:a,error:!0,type:a.getResponseHeader("Content-Type"),target:e});var u},a.onerror=function(){r({xhr:a,error:!0,type:a.getResponseHeader("Content-Type"),target:e})},a.open("GET",t,!0),i&&i.withCredentials&&(a.withCredentials=!0),Rd(i)){if(Rd(i.requestHeaders))for(var o=0;o<i.requestHeaders.length;o++){var u=i.requestHeaders[o];a.setRequestHeader(u.key,u.value)}Rd(i.responseType)&&(a.responseType=i.responseType)}a.send()}))}var Tb=/src: ([^;]+);/;function kb(t){return Cd(this,void 0,void 0,(function(){var e;return Od(this,(function(i){switch(i.label){case 0:e=t.sheet,i.label=1;case 1:return i.trys.push([1,2,,4]),[2,e.cssRules];case 2:return i.sent(),[4,new Promise((function(i,n){t.addEventListener("load",(function(){i(e.cssRules)}),!0),t.addEventListener("error",(function(t){n(t)}),!0),setTimeout((function(){n(new Error("Timeout while waiting for <style> to load"))}),1e4)}))];case 3:return[2,i.sent()];case 4:return[2]}}))}))}function Ib(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a;return Od(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Mb(e)];case 1:return n=o.sent(),[3,3];case 2:return r=o.sent(),console.error("Failed to load stylesheet",e,r),[2];case 3:(s=t.createElement("style")).textContent=n.response,t.head.appendChild(s),o.label=4;case 4:return o.trys.push([4,,7,8]),[4,kb(s)];case 5:return a=o.sent(),[4,Ab(t,e,a,i)];case 6:return o.sent(),[3,8];case 7:return t.head.removeChild(s),[7];case 8:return[2]}}))}))}function Ab(t,e,i,n){return Cd(this,void 0,void 0,(function(){var r,s,a,o,u;return Od(this,(function(l){switch(l.label){case 0:for(r=[],s=i.length,a=0;a<s;a++)(o=i[a]).type===CSSRule.IMPORT_RULE?(u=o.href)&&(u=_v(e,u),r.push(Ib(t,u,n))):n(e,o);return r.length?[4,Promise.all(r)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}))}function jb(t){return Cd(this,void 0,void 0,(function(){var e,i;return Od(this,(function(n){switch(n.label){case 0:(e=document.createElement("iframe")).src="about:blank",e.setAttribute("title",""),document.head.appendChild(e),n.label=1;case 1:return n.trys.push([1,,3,4]),i=e.contentDocument,[4,Promise.all(Tf(document.styleSheets,(function(e){var n=e.href;return null==n?Ab(i,location.href,e.cssRules,t):(n=_v(location.href,n),Ib(i,n,t))})))];case 2:return n.sent(),[3,4];case 3:return document.head.removeChild(e),[7];case 4:return[2]}}))}))}var Fb=function(t){function e(e){var i=t.call(this)||this;return i.adapter=new zm(i),i._formatOptions=new wm,i._extraSprites=[],i._validateSprites=[],i.dataFieldsOrder=[],i._dynamicDataFields=!0,i._removedObjects=new Am,i._hiddenObjects=[],i._objectsAlreadyHidden=!1,i._filePrefix="amCharts",i.useWebFonts=!0,i.useRetina=!0,i.useSimplifiedExport=!0,i.timeoutDelay=2e3,i._exportRunning=!1,i._prevHasData=!1,i._container=e,i.className="Export",i._formatOptions.setKey("png",{}),i._formatOptions.setKey("jpg",{quality:.8}),i._formatOptions.setKey("gif",{}),i._formatOptions.setKey("svg",{}),i._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),i._formatOptions.setKey("json",{indent:2,useLocale:!0}),i._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:"",addBOM:!0}),i._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),i._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),i.adapter.add("options",(function(t){var e=i._formatOptions.getKey(t.type);return t.options?t.options=sm(e,t.options):t.options=e,t})),i.applyTheme(),i.dispatchImmediately("inited"),i}return Sd(e,t),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menu},set:function(t){var e=this;this._menu&&this.removeDispose(this._menu),this._menu=t,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",(function(t){return t.branch.unsupported=!e.typeSupported(t.branch.type),t})),this._menu.events.on("hit",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("enter",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("over",(function(t){e._disablePointers()})),this._menu.events.on("out",(function(t){setTimeout((function(){e._releasePointers()}),10)})),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",(function(t){return t.classPrefix=rp.classNamePrefix+t.classPrefix,t})),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),e.prototype.typeSupported=function(t){var e=!0,i=this.getFormatOptions(t);return Rd(i)&&i.disabled?e=!1:"pdf"===t||("xlsx"===t?e=!!this._hasData():("print"!=t||window.print)&&(-1===["json","csv","html","pdfdata"].indexOf(t)||this._hasData())||(e=!1)),this.adapter.apply("supported",{supported:e,type:t}).supported},e.prototype._hasData=function(){return this.data&&this.data.length},e.prototype._getFunction=function(t){switch(t){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},e.prototype.export=function(t,e){return Cd(this,void 0,void 0,(function(){var i,n,r,s,a,o=this;return Od(this,(function(u){switch(u.label){case 0:return"custom"==t?(this.handleCustom(e),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(i={type:"exportstarted",target:this,format:t,options:e},this.events.dispatchImmediately("exportstarted",i)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout((function(){if(o.events.isEnabled("exporttimedout")){var i={type:"exporttimedout",target:o,format:t,options:e};o.events.dispatchImmediately("exporttimedout",i)}o.showTimeout()}),this.timeoutDelay)),this.hideNonExportableSprites(),n=this._getFunction(t),e=this.adapter.apply("options",{options:e,type:t}).options,[4,(n=this.adapter.apply("exportFunction",{func:n,type:t,options:e}).func).call(this,t,e)]);case 1:return r=u.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),r?(this.events.isEnabled("exportfinished")&&(s={type:"exportfinished",target:this,format:t,options:e},this.events.dispatchImmediately("exportfinished",s)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),"print"===t?[2,this.print(r,e,this.adapter.apply("title",{title:this.title,options:e}).title)]:"pdfdata"==t?[2,this.download(r,this.filePrefix+".pdf")]:[2,this.download(r,this.filePrefix+"."+t,e&&e.addBOM)]):(this.events.isEnabled("error")&&(a={type:"error",target:this,format:t,options:e},this.events.dispatchImmediately("error",a)),[2,!1])}}))}))},e.prototype.unsupported=function(t,e){return Cd(this,void 0,void 0,(function(){return Od(this,(function(t){return[2,""]}))}))},e.prototype.handleCustom=function(t){Rd(t)&&Rd(t.callback)&&t.callback.call(t.callbackTarget||this,t)},e.prototype.getPrint=function(t,e){return Cd(this,void 0,void 0,(function(){return Od(this,(function(t){return[2,this.getImage("png",e)]}))}))},e.prototype.getFontFamilies=function(){return Cd(this,void 0,void 0,(function(){var t,e,i,n,r=this;return Od(this,(function(s){switch(s.label){case 0:return t=this.getDOMURL(),e=[],i=[],[4,jb((function(n,s){if(s.type===CSSRule.FONT_FACE_RULE){var a=s.cssText,o=Tb.exec(a);if(null!==o){var u=o[1].split(/ *, */).map((function(i){return Cd(r,void 0,void 0,(function(){var r,s,a,o,u,l;return Od(this,(function(h){switch(h.label){case 0:return null!==(r=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(i))?[3,1]:[2,i];case 1:if(s=r[2],a=_v(n,r[1]),this.webFontFilter&&!a.match(this.webFontFilter))return[2,null];h.label=2;case 2:return h.trys.push([2,7,,8]),[4,Mb(a,void 0,{responseType:"blob"})];case 3:return o=h.sent(),null==window.navigator.msSaveOrOpenBlob?[3,4]:(u=t.createObjectURL(o.blob),e.push(u),[3,6]);case 4:return[4,(c=o.blob,new Promise((function(t,e){var i=new FileReader;i.onload=function(e){t(i.result)},i.onerror=function(t){e(t)},i.readAsDataURL(c)})))];case 5:u=h.sent(),h.label=6;case 6:return[2,'url("'+u+'")'+s];case 7:return l=h.sent(),console.error("Failed to load font",a,l),[2,null];case 8:return[2]}var c}))}))}));i.push(Promise.all(u).then((function(t){return t=t.filter((function(t){return null!=t})),0===t.length?"":a.replace(Tb,"src: "+t.join(", ")+";")})))}}}))];case 1:return s.sent(),[4,Promise.all(i)];case 2:return n=s.sent(),[2,{blobs:e,cssText:n.filter((function(t){return!!t})).join("\n")}]}}))}))},e.prototype.getImage=function(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u;return Od(this,(function(l){switch(l.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),Rd(e)||(e=this.getFormatOptions(t)),[4,this.awaitValidSprites()];case 1:return l.sent(),[4,this.simplifiedImageExport()];case 2:if(!l.sent())return[3,10];r=void 0,l.label=3;case 3:return l.trys.push([3,7,,9]),[4,this.getCanvas(e)];case 4:return r=l.sent(),!1===i?[3,6]:[4,this.addExtras(r,e)];case 5:s=l.sent(),this.disposeCanvas(r),r=s,l.label=6;case 6:return a=r.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(r),n||this.restoreNonExportableSprites(),[2,a];case 7:return o=l.sent(),console.error(o.message+"\n"+o.stack),Qp("Simple export failed, falling back to advanced export"),r&&this.disposeCanvas(r),[4,this.getImageAdvanced(t,e,i)];case 8:return u=l.sent(),n||this.restoreNonExportableSprites(),[2,u];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(t,e,i)];case 11:return u=l.sent(),n||this.restoreNonExportableSprites(),[2,u];case 12:return[2]}}))}))},e.prototype.addExtras=function(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h,c,d,f,m,v,p,b=this;return Od(this,(function(g){switch(g.label){case 0:return this.extraSprites.length?(n=0,r=0,s=t.width,a=t.height,o=0,u=0,[4,Promise.all(Tf(this.extraSprites,(function(t){return Cd(b,void 0,void 0,(function(){var l,h,c,d;return Od(this,(function(f){switch(f.label){case 0:return(l=t instanceof Pb?{sprite:t,position:"bottom"}:t).position=l.position||"bottom",l.marginTop=l.marginTop||0,l.marginRight=l.marginRight||0,l.marginBottom=l.marginBottom||0,l.marginLeft=l.marginLeft||0,i?[4,l.sprite.exporting.getCanvasAdvanced(e)]:[3,2];case 1:return h=f.sent(),[3,4];case 2:return[4,l.sprite.exporting.getCanvas(e)];case 3:h=f.sent(),f.label=4;case 4:return c=h.width+l.marginLeft+l.marginRight,d=h.height+l.marginTop+l.marginBottom,"top"==l.position?(s=l.crop?a:nf(s,c),r+=d):"right"==l.position?(a=l.crop?a:nf(a,d),o+=c):"left"==l.position?(a=l.crop?a:nf(a,d),n+=c):"bottom"===l.position&&(s=l.crop?a:nf(s,c),u+=d),[2,{canvas:h,position:l.position,left:l.marginLeft,top:l.marginTop,width:c,height:d}]}}))}))})))]):[3,2];case 1:return l=g.sent(),(h=this.getDisposableCanvas()).width=n+s+o,h.height=r+a+u,c=h.getContext("2d"),(d=this.backgroundColor||this.findBackgroundColor(this.sprite.dom))&&(c.fillStyle=d.toString(),c.fillRect(0,0,h.width,h.height)),v=(f=n)+s,p=(m=r)+a,kf(l,(function(t){"top"==t.position?(m-=t.height,c.drawImage(t.canvas,n+t.left,m+t.top)):"right"==t.position?(c.drawImage(t.canvas,v+t.left,r+t.top),v+=t.width):"left"==t.position?(f-=t.width,c.drawImage(t.canvas,f+t.left,r+t.top)):"bottom"===t.position&&(c.drawImage(t.canvas,n+t.left,p+t.top),p+=t.height),b.disposeCanvas(t.canvas)})),c.drawImage(t,n,r),[2,h];case 2:return[2,t]}}))}))},e.prototype.getCanvas=function(t){return Cd(this,void 0,void 0,(function(){var e,i,n,r,s,a,o,u,l,h,c,d,f,m,v,p,b;return Od(this,(function(g){switch(g.label){case 0:Rd(t)||(t={}),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),i=this.getDOMURL(),n=null,r=null,g.label=1;case 1:return g.trys.push([1,,4,5]),a=this.sprite.pixelWidth,o=this.sprite.pixelHeight,u=Ip(this.sprite.dom),l=Ap(this.sprite.dom),h=t.scale||1,c=this.getPixelRatio(t),h=this.getAdjustedScale(a*c,o*c,h,t),(s=this.getDisposableCanvas()).style.width=a*h+"px",s.style.height=o*h+"px",s.width=a*h,s.height=o*h,d=s.getContext("2d"),e&&(d.fillStyle=e.toString(),d.fillRect(0,0,a*h,o*h)),f=[],this.useWebFonts&&f.push(this.getFontFamilies().then((function(t){return r=t.blobs,t.cssText}))),f.push(this.imagesToDataURI(this.sprite.dom,t)),f.push(this.prepForeignObjects(this.sprite.dom,t)),[4,Promise.all(f)];case 2:return m=g.sent(),v=this.normalizeSVG("<style>"+m[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,a,o,h,u,l),p=new Blob([v],{type:"image/svg+xml"}),n=i.createObjectURL(p),[4,this.loadNewImage(n,a*h*c,o*h*c,"anonymous")];case 3:return b=g.sent(),d.drawImage(b,0,0),[3,5];case 4:return null!==n&&i.revokeObjectURL(n),null!==r&&kf(r,(function(t){i.revokeObjectURL(t)})),this.restoreRemovedObjects(),[7];case 5:return[2,s]}}))}))},e.prototype.getCanvasAdvanced=function(t){return Cd(this,void 0,void 0,(function(){var e,i,n,r,s,a,o,u,l,h,c;return Od(this,(function(d){switch(d.label){case 0:return Rd(t)||(t={}),[4,this.imagesToDataURI(this.sprite.dom,t)];case 1:return d.sent(),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return i=d.sent(),n=this.sprite.pixelWidth,r=this.sprite.pixelHeight,s=Ip(this.sprite.dom),a=Ap(this.sprite.dom),o=t.scale||1,u=this.getPixelRatio(t),o=this.getAdjustedScale(n*u,r*u,o,t),l=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,n,r,o,s,a,e),(h=this.getDisposableCanvas()).style.width=n*u*o+"px",h.style.height=r*u*o+"px",h.width=n*u*o,h.height=r*u*o,c={useCORS:!0},1!=u&&(c.ignoreDimensions=!0,c.scaleWidth=n*u*o,c.scaleHeight=r*u*o),[4,i.fromString(h.getContext("2d"),l,c).render()];case 3:return d.sent(),[2,h]}}))}))},e.prototype.getImageAdvanced=function(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r,s;return Od(this,(function(a){switch(a.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),Rd(e)||(e=this.getFormatOptions(t)),[4,this.getCanvasAdvanced(e)];case 1:return r=a.sent(),!1===i?[3,3]:[4,this.addExtras(r,e,!0)];case 2:r=a.sent(),a.label=3;case 3:return s=r.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(r),n||this.restoreNonExportableSprites(),[2,s]}}))}))},e.prototype.getDisposableCanvas=function(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="-10000px",document.body.appendChild(t),t},e.prototype.disposeCanvas=function(t){document.body.contains(t)&&document.body.removeChild(t)},e.prototype.getPixelRatio=function(t){return this.useRetina&&window.devicePixelRatio||1},e.prototype.getAdjustedScale=function(t,e,i,n){if(!n)return i;var r,s,a=t*i,o=t*i;return n.maxWidth&&a>n.maxWidth&&(r=n.maxWidth/t),n.maxHeight&&o>n.maxHeight&&(s=n.maxHeight/e),r||s?rf(r,s):(n.minWidth&&a<n.minWidth&&(r=n.minWidth/t),n.minHeight&&o<n.minHeight&&(s=n.minHeight/e),r||s?nf(r,s):i)},e.prototype.imagesToDataURI=function(t,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u;return Od(this,(function(l){switch(l.label){case 0:if(!(n=t.querySelectorAll("image")).length)return[3,2];for(r=[],s=n.length,a=0;a<s;a++)o=n[a],(u=o.getAttributeNS(e.XLINK,"href"))&&(-1!==u.indexOf("data:image")||(-1!==u.indexOf(".svg")?r.push(this.svgToDataURI(o,i)):r.push(this.imageToDataURI(o,i))));return[4,Promise.all(r)];case 1:return l.sent(),[2];case 2:return[2]}}))}))},e.prototype.prepForeignObjects=function(t,e){return Cd(this,void 0,void 0,(function(){var e,i,n;return Od(this,(function(r){if((e=t.querySelectorAll("foreignObject")).length)for(i=e.length,n=0;n<i;n++)this.temporarilyRemoveObject(e[n]);return[2]}))}))},e.prototype.imageToDataURI=function(t,i){return Cd(this,void 0,void 0,(function(){var n,r,s;return Od(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.loadNewImage(t.getAttributeNS(e.XLINK,"href"),null,null,"anonymous")];case 1:n=a.sent(),(r=document.createElement("canvas")).width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0);try{return s=r.toDataURL(),t.setAttribute("href",s),[2,s]}catch(e){return!1!==i.keepTainted&&this.temporarilyRemoveObject(t),[2,void 0]}return[3,3];case 2:return a.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 3:return[2]}}))}))},e.prototype.svgToDataURI=function(t,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a;return Od(this,(function(o){switch(o.label){case 0:n=t.getAttributeNS(e.XLINK,"href"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Mb(n)];case 2:return r=o.sent(),s=this.adapter.apply("charset",{charset:"base64",type:"svg",options:i}).charset,a=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+s+","+btoa(r.response),options:i}).data,t.setAttributeNS(e.XLINK,"href",a),[2,a];case 3:return o.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 4:return[2]}}))}))},e.prototype.temporarilyRemoveObject=function(t,e){var i=t.parentElement||t.parentNode;e||(e=this.sprite.paper.add("g").node),i.insertBefore(e,t),i.removeChild(t),this._removedObjects.push({element:t,placeholder:e})},e.prototype.restoreRemovedObjects=function(){for(var t;t=this._removedObjects.pop();){(t.placeholder.parentElement||t.placeholder.parentNode).insertBefore(t.element,t.placeholder)}},e.prototype.simplifiedImageExport=function(){return Cd(this,void 0,void 0,(function(){var t,e,i,n,r,s,a;return Od(this,(function(o){switch(o.label){case 0:if(!1===this.useSimplifiedExport)return[2,!1];if(!1===(t=Om.getCache("simplifiedImageExport"))||!0===t)return[2,t];o.label=1;case 1:o.trys.push([1,6,,7]),(e=document.createElement("canvas")).width=1,e.height=1,i=e.getContext("2d"),n=this.getDOMURL(),r=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),s=n.createObjectURL(r),a=void 0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.loadNewImage(s,1,1)];case 3:return a=o.sent(),[3,5];case 4:return o.sent(),[2,!1];case 5:i.drawImage(a,0,0),n.revokeObjectURL(s);try{return Om.setCache("simplifiedImageExport",!0),[2,!0]}catch(t){return Om.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return o.sent(),Om.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}}))}))},e.prototype.loadNewImage=function(t,e,i,n){return new Promise((function(r,s){var a;function o(){if(n){var e=a.src;a.onerror=function(){s(new Error('Loading image "'+t+'" failed'))},a.removeAttribute("crossorigin"),a.src="",a.src=e}else s(new Error('Loading image "'+t+'" failed'))}a=e&&i?new Image(e,i):new Image,n&&a.setAttribute("crossOrigin",n),a.onload=function(){r(a)},a.onabort=o,a.onerror=o,a.src=t}))},e.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},e.prototype.getSVG=function(t,e,i){return void 0===i&&(i=!0),Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h,c,d;return Od(this,(function(f){switch(f.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),Rd(e)||(e=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return f.sent(),r=this.sprite.pixelWidth,s=this.sprite.pixelHeight,a=Ip(this.sprite.dom),o=Ap(this.sprite.dom),u=e.scale||1,l=this.getPixelRatio(e),u=this.getAdjustedScale(r*l,s*l,u,e),h=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,r,s,u,a,o),c=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:e}).charset,d=this.adapter.apply("getSVG",{data:i?"data:"+this.getContentType(t)+";"+c+","+encodeURIComponent(h):h,options:e}).data,n||this.restoreNonExportableSprites(),[2,d]}}))}))},e.prototype.normalizeSVG=function(t,e,i,n,r,s,a,o){var u="";i&&(u+='width="'+Math.round(i*(r||1))+'px" '),n&&(u+='height="'+Math.round(n*(r||1))+'px" ');var l="";s&&(l+="font-family: "+s.replace(/"/g,"")+";"),a&&(l+="font-size: "+a+";"),r&&(u+='viewBox="0 0 '+i+" "+n+'" ');var h=[],c=t.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(c)for(var d=0;d<c.length;d++)t=t.replace(c[d],"____"),h.push(c[d]);t.match(/<svg/)?""!==u&&(t=(t=(t=t.replace(/(<svg[^>]*)width="[^"]*"/,"$1")).replace(/(<svg[^>]*)height="[^"]*"/,"$1")).replace(/(<svg)/,"$1"+u)):t='<?xml version="1.0" encoding="utf-8"?><svg '+u+' style="'+l+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t+"</svg>",o&&(t=t.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+o.rgba+'"/>')),/MSIE |Trident\//.test(navigator.userAgent)&&(t=t.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var f=new RegExp("url\\("+uv(iv()),"g");if(t=(t=t.replace(f,"url(#")).replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),h.length)for(d=0;d<h.length;d++)t=t.replace("____",h[d]);return t=this.adapter.apply("normalizeSVG",{data:t,options:e}).data},e.prototype.serializeElement=function(t){return(new XMLSerializer).serializeToString(t)},e.prototype.getPDF=function(t,e){return Cd(this,void 0,void 0,(function(){function i(t){var e={};e.normal=t.normal.path,f[t.normal.path]=t.normal.bytes,t.bold?(e.bold=t.bold.path,f[t.bold.path]=t.bold.bytes):e.bold=t.normal.path,t.italics?(e.italics=t.italics.path,f[t.italics.path]=t.italics.bytes):e.italics=t.normal.path,t.bolditalics?(e.bolditalics=t.bolditalics.path,f[t.bolditalics.path]=t.bolditalics.bytes):e.bolditalics=t.normal.path,d[t.name]=e}var n,r,s,a,o,u,l,h,c,d,f;return Od(this,(function(m){switch(m.label){case 0:return[4,this.getImage(e.imageFormat||"png",e)];case 1:return n=m.sent(),[4,this.pdfmake];case 2:return r=m.sent(),s=[30,30,30,30],a={pageSize:e.pageSize||"A4",pageOrientation:e.pageOrientation||"portrait",pageMargins:e.pageMargins||s,defaultStyle:{font:e.font?e.font.name:void 0},content:[]},o=this.adapter.apply("title",{title:this.title,options:e}).title,u=0,o&&(a.content.push({text:o,fontSize:e.fontSize||14,bold:!0,margin:[0,0,0,15]}),u+=50),e.addURL&&(a.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:e.fontSize,margin:[0,0,0,15]}),u+=50),"pdfdata"!=t&&a.content.push({image:n,alignment:e.align||"left",fit:this.getPageSizeFit(a.pageSize,a.pageMargins,u)}),"pdfdata"==t||e.addData?(h=(l=a.content).push,c={},[4,this.getPDFData("pdf",e)]):[3,4];case 3:h.apply(l,[(c.table=m.sent(),c.fontSize=e.fontSize||14,c)]),m.label=4;case 4:return a=this.adapter.apply("pdfmakeDocument",{doc:a,options:e}).doc,d=null,f=null,e.font&&(d={},f={},i(e.font),e.extraFonts&&kf(e.extraFonts,i)),[4,new Promise((function(t,e){r.createPdf(a,null,d,f).getDataUrl((function(e){t(e)}))}))];case 5:return[2,m.sent()]}}))}))},e.prototype.getPDFData=function(t,e){return Cd(this,void 0,void 0,(function(){var t,i,n,r,s,a,o=this;return Od(this,(function(u){if(t={body:[]},i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,n=this.data,e.pivot)r=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,rm(i,(function(i,r){var s=[];e.addColumnNames&&s.push(r);for(var a=n.length,u=0;u<a;u++){var l=n[u][i];s.push(o.convertToSpecialFormat(i,l,e,!0))}t.body.push(o.getPDFDataRow(s,e,void 0,!0))}),(function(t,e){var i=r.indexOf(t),n=r.indexOf(e);return i>n?1:i<n?-1:0}));else for(e.addColumnNames&&(t.body.push(this.getPDFDataRow(i,e,void 0,!0)),t.headerRows=1),s=n.length,a=0;a<s;a++)t.body.push(this.getPDFDataRow(n[a],e,i));return[2,this.adapter.apply("pdfmakeTable",{table:t,options:e}).table]}))}))},e.prototype.getPDFDataRow=function(t,e,i,n){var r=this;void 0===n&&(n=!1);var s=[];i||(i=t);var a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return rm(i,(function(i,a){var o=r.convertEmptyValue(i,t[i],e),u=n?o:r.convertToSpecialFormat(i,o,e);u=""+u,s.push(u)}),(function(t,e){var i=a.indexOf(t),n=a.indexOf(e);return i>n?1:i<n?-1:0})),s},e.prototype.getPageSizeFit=function(t,e,i){void 0===i&&(i=0);var n=[0,0,0,0];"number"==typeof e?n=[e,e,e,e]:2==e.length?n=[e[0],e[1],e[0],e[1]]:4==e.length&&(n=e);var r={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}[t];return r[0]-=n[0]+n[2],r[1]-=n[1]+n[3]+i,r},e.prototype.getExcel=function(t,e){return Cd(this,void 0,void 0,(function(){var i,n,r,s,a,o,u,l,h,c=this;return Od(this,(function(d){switch(d.label){case 0:return Rd(e)||(e=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(i=d.sent(),n=this.adapter.apply("xlsxWorkbookOptions",{xlsx:i,options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,r=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:i,name:this.title||this.language.translate("Data")}).name),s={SheetNames:[r],Sheets:{}},a=[],o=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,e.pivot)u=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,rm(o,(function(t,i){var n=[];e.addColumnNames&&n.push(i);for(var r=c.data.length,s=0;s<r;s++){var o=c.data[s][t];n.push(c.convertToSpecialFormat(t,o,e,!0))}a.push(c.getExcelRow(n,e,void 0,!0))}),(function(t,e){var i=u.indexOf(t),n=u.indexOf(e);return i>n?1:i<n?-1:0}));else for(e.addColumnNames&&a.push(this.getExcelRow(o,e,void 0,!0)),l=this.data.length,h=0;h<l;h++)a.push(this.getExcelRow(this.data[h],e,o));return s.Sheets[r]=i.utils.aoa_to_sheet(a),s=this.adapter.apply("xlsxWorkbook",{xlsx:i,workbook:s,options:e}).workbook,[2,this.adapter.apply("getExcel",{data:"data:"+this.getContentType(t)+";base64,"+i.write(s,n),options:e}).data]}}))}))},e.prototype.normalizeExcelSheetName=function(t){return hv(t=t.replace(/([:\\\/?*\[\]]+)/g," "),31,"...",!0)},e.prototype.getExcelRow=function(t,e,i,n){var r=this;void 0===n&&(n=!1);var s=[];i||(i=t);var a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return rm(i,(function(i,a){var o=r.convertEmptyValue(i,t[i],e),u=n?o:r.convertToSpecialFormat(i,o,e,!0);s.push(u)}),(function(t,e){var i=a.indexOf(t),n=a.indexOf(e);return i>n?1:i<n?-1:0})),s},e.prototype.getCSV=function(t,e,i){return void 0===i&&(i=!0),Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h,c,d=this;return Od(this,(function(f){if(Rd(e)||(e=this.getFormatOptions("csv")),n="",r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,s="",a=this.data,e.pivot)o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,rm(r,(function(t,i){var r=[];e.addColumnNames&&r.push(i);for(var o=a.length,u=0;u<o;u++){var l=a[u][t];r.push(d.convertToSpecialFormat(t,l,e,!0))}n+=s+d.getCSVRow(r,e,void 0,!0),s="\n"}),(function(t,e){var i=o.indexOf(t),n=o.indexOf(e);return i>n?-1:i<n?1:0}));else{for(u=a.length,l=0;l<u;l++)h=this.getCSVRow(a[l],e,r),e.reverse?n=h+s+n:n+=s+h,s="\n";e.addColumnNames&&(n=this.getCSVRow(r,e,void 0,!0)+s+n)}return c=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getCSV",{data:i?"data:"+this.getContentType(t)+";"+c+","+encodeURIComponent(n):n,options:e}).data]}))}))},e.prototype.getCSVRow=function(t,e,i,n){var r=this;void 0===n&&(n=!1);var s=e.separator||",",a=[];i||(i=t);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return rm(i,(function(i,o){var u=r.convertEmptyValue(i,t[i],e),l=n?u:r.convertToSpecialFormat(i,u,e);l=(l=""+l).replace(/"/g,'""'),(e.forceQuotes||l.search(new RegExp('"|\n|'+s,"g"))>=0)&&(l='"'+l+'"'),a.push(l)}),(function(t,e){var i=o.indexOf(t),n=o.indexOf(e);return i>n?1:i<n?-1:0})),a.join(s)},e.prototype.getHTML=function(t,e,i){return void 0===i&&(i=!0),Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h=this;return Od(this,(function(c){if(Rd(e)||(e=this.getFormatOptions("html")),n="<table>",e.tableClass&&(n='<table class="'+e.tableClass+'">'),r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,s=this.data,e.pivot)a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,n+="\n<tbody>",rm(r,(function(t,i){var r=[];e.addColumnNames&&r.push(i);for(var a=s.length,o=0;o<a;o++){var u=s[o][t];r.push(h.convertToSpecialFormat(t,u,e,!0))}n+="\n"+h.getHTMLRow(r,e,void 0,!0)}),(function(t,e){var i=a.indexOf(t),n=a.indexOf(e);return i>n?-1:i<n?1:0})),n+="\n</tbody>";else{for(e.addColumnNames&&(n+="\n<thead>\n"+this.getHTMLRow(r,e,void 0,!0,!0)+"\n</thead>"),n+="\n<tbody>",o=s.length,u=0;u<o;u++)n+="\n"+this.getHTMLRow(s[u],e,r);n+="\n</tbody>"}return n+="\n</table>",l=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getHTML",{data:i?"data:"+this.getContentType(t)+";"+l+","+encodeURIComponent(n):n,options:e}).data]}))}))},e.prototype.getHTMLRow=function(t,e,i,n,r){var s=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var a="\t<tr>";e.rowClass&&(a='\t<tr class="'+e.rowClass+'">'),i||(i=t);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,u=r?"th":"td",l=!0;return rm(i,(function(i,r){var o=s.convertEmptyValue(i,t[i],e),h=n?o:s.convertToSpecialFormat(i,o,e);h=(h=""+h).replace(/[\u00A0-\u9999<>\&]/gim,(function(t){return"&#"+t.charCodeAt(0)+";"}));var c=u;e.pivot&&l&&(c="th"),e.cellClass?a+="\n\t\t<"+c+' class="'+e.cellClass+'">'+h+"</"+c+">":a+="\n\t\t<"+c+">"+h+"</"+c+">",l=!1}),(function(t,e){var i=o.indexOf(t),n=o.indexOf(e);return i>n?1:i<n?-1:0})),a+="\n\t</tr>"},e.prototype.getJSON=function(t,e,i){return void 0===i&&(i=!0),Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h,c=this;return Od(this,(function(d){if(Rd(e)||(e=this.getFormatOptions("json")),r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields,this._dynamicDataFields)n=this.data;else for(n=[],s=this.data,a=function(t,i){var a=s[i];if("object"==typeof a){var o={};nm(a,(function(t,i){Rd(r[t])&&(o[r[t]]=c.convertToSpecialFormat(t,i,e))})),n.push(o)}},o=s.length,u=0;u<o;u++)a(0,u);return l=JSON.stringify(n,(function(t,i){return"object"==typeof i&&nm(i,(function(t,n){i[t]=c.convertToSpecialFormat(t,n,e)})),i}),e.indent),h=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getJSON",{data:i?"data:"+this.getContentType(t)+";"+h+","+encodeURIComponent(l):l,options:e}).data]}))}))},e.prototype.convertToSpecialFormat=function(t,e,i,n){if("number"==typeof e)if(this.isDateField(t))e=new Date(e);else{if(this.isDurationField(t))return this.durationFormatter.format(e,this.durationFormat);if(this.isNumberField(t)&&this.numberFormat)return this.numberFormatter.format(e,this.numberFormat)}return e instanceof Date?i.useTimestamps?e=e.getTime():i.useLocale?n||(e=e.toLocaleString()):e=this.dateFormatter.format(e,this.dateFormat):Vd(e)&&this.isDateField(t)&&this.dateFormat&&(e=this.dateFormatter.format(this.dateFormatter.parse(e),this.dateFormat)),e},e.prototype.convertEmptyValue=function(t,e,i){return Rd(e)?e:i.emptyAs},e.prototype.download=function(t,e,i){return void 0===i&&(i=!1),Cd(this,void 0,void 0,(function(){var n,r,s,a,o,u,l,h,c,d,f,m,v,p,b;return Od(this,(function(g){if(this.msBlobDownloadSupport()){if(m=t.split(";"),v=m.shift().replace(/data:/,""),t=decodeURIComponent(m.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv"].indexOf(v))return n=new Blob([t],{type:v}),window.navigator.msSaveBlob(n,e),[2,!0];try{s=atob(t),t=s}catch(t){return[2,!1]}for(u=new Array(t.length),l=0;l<t.length;++l)h=t.charCodeAt(l),u[l]=h;c=new Blob([new Uint8Array(u)],{type:v}),window.navigator.msSaveBlob(c,e)}else if(this.blobDownloadSupport()){if((r=document.createElement("a")).download=e,document.body.appendChild(r),m=t.split(";"),v=m.shift().replace(/data:/,""),t=decodeURIComponent(m.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv","text/html"].indexOf(v))return i&&(t="\ufeff"+t),a=new Blob([t],{type:v}),o=window.URL.createObjectURL(a),r.href=o,r.download=e,r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(o)}),100),[2,!0];try{s=atob(t),t=s}catch(t){return[2,!1]}for(u=new Array(t.length),l=0;l<t.length;++l)h=t.charCodeAt(l),u[l]=h;i&&(u=[239,187,191].concat(u)),c=new Blob([new Uint8Array(u)],{type:v}),d=window.URL.createObjectURL(c),r.href=d,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){window.URL.revokeObjectURL(d)}),100)}else this.linkDownloadSupport()?((f=document.createElement("a")).download=e,f.href=t,document.body.appendChild(f),f.click(),document.body.removeChild(f)):this.legacyIE()?4===(m=t.match(/^data:(.*);[ ]*([^,]*),(.*)$/)).length&&("base64"==m[2]?m[1].match(/^image\//)&&this.showModal('<img src="'+t+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(v=void 0,e.match(/\.svg$/)?v="image/svg+xml":(v="text/plain",e+=".txt"),(p=document.createElement("iframe")).width="1px",p.height="1px",p.style.display="none",document.body.appendChild(p),(b=p.contentDocument).open(v,"replace"),b.write(decodeURIComponent(m[3])),b.close(),b.execCommand("SaveAs",!0,e),document.body.removeChild(p))):window.location.href=t;return[2,!0]}))}))},e.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},e.prototype.linkDownloadSupport=function(){var t=Om.getCache("linkDownloadSupport");if(!1===t||!0===t)return t;var e=void 0!==document.createElement("a").download;return Om.setCache("linkDownloadSupport",e),e},e.prototype.blobDownloadSupport=function(){return Rd(window.Blob)},e.prototype.msBlobDownloadSupport=function(){return Rd(window.navigator.msSaveOrOpenBlob)},e.prototype.legacyIE=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length},e.prototype.print=function(t,e,i){return Cd(this,void 0,void 0,(function(){return Od(this,(function(n){return"css"==e.printMethod?[2,this.printViaCSS(t,e,i)]:[2,this.printViaIframe(t,e,i)]}))}))},e.prototype.printViaCSS=function(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r,s,a;return Od(this,(function(o){return n=document.documentElement.scrollTop||document.body.scrollTop,r=new Tp(Cp(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),i&&document&&document.title&&(s=document.title,document.title=i),(a=new Image).src=t,a.style.maxWidth="100%",a.style.display="block",a.style.position="relative",a.style.visibility="visible",a.style.opacity="1",a.style.clipPath="none",document.body.appendChild(a),this.setTimeout((function(){window.print()}),50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(a),r.dispose(),s&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=n}),e.delay||500),[2,!0]}))}))},e.prototype.printViaIframe=function(t,e,i){return Cd(this,void 0,void 0,(function(){var n,r;return Od(this,(function(s){return(n=document.createElement("iframe")).style.visibility="hidden",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),(r=new Image).src=t,r.style.maxWidth="100%",r.style.height="auto",i&&(n.contentWindow.document.title=i),n.contentWindow.document.body.appendChild(r),n.load=function(){n.contentWindow.document.body.appendChild(r)},this.setTimeout((function(){try{n.contentWindow.document.execCommand("print",!1,null)||n.contentWindow.print()}catch(t){n.contentWindow.print()}}),e.delay||50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(n)}),e.delay+50||100),[2,!0]}))}))},e.prototype.findBackgroundColor=function(t){var e=1,i=wp(t,"background-color");if((i.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||"transparent"==i)&&(e=0),0==e){var n=t.parentElement;return n?this.findBackgroundColor(n):Ym("#fff")}return Ym(i,e)},Object.defineProperty(e.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(t){this._container=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(t){this._sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(t){this._extraSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(t){this._validateSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(t){this._dataFields=t,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),e.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var t=this.data.length>0;this._prevHasData!=t&&(this._prevHasData=t,this.menu&&this.menu.invalidate())},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new yb,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(t){this._dateFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new Am),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(t){this._dateFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new gb,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(t){this._numberFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new Am),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(t){this._numberFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new wb,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(t){this._durationFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(t){this._durationFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new Am),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(t){this._durationFields=t},enumerable:!0,configurable:!0}),e.prototype.generateDataFields=function(){var t=this;this._dataFields={},this.data.length&&kf(this.data,(function(e){nm(e,(function(e,i){Rd(t._dataFields[e])||(t._dataFields[e]=t.adapter.apply("dataFieldName",{name:e,field:e}).name)}))}))},e.prototype.isDateField=function(t){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(t),field:t}).isDateField},e.prototype.isNumberField=function(t){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(t),field:t}).isNumberField},e.prototype.isDurationField=function(t){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(t),field:t}).isDurationField},e.prototype.getContentType=function(t){var e="";switch(t){case"png":case"gif":e="image/"+t;break;case"jpg":e="image/jpeg";break;case"svg":e="image/svg+xml";break;case"csv":e="text/csv";break;case"json":e="application/json";break;case"html":e="text/html";break;case"pdf":case"pdfdata":e="application/pdf";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}return this.adapter.apply("contentType",{contentType:e,type:t}).contentType},Object.defineProperty(e.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(t){this._filePrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),e.prototype.showPreloader=function(){var t=this.preloader;t&&(t.progress=.5,t.label.text="...")},e.prototype.hidePreloader=function(){var t=this.preloader;t&&(t.progress=1)},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),e.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},e.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=new vb),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal||(this._modal=new Xp,this._modal.adapter.add("classPrefix",(function(t){return t=rp.classNamePrefix+t}))),this._modal},enumerable:!0,configurable:!0}),e.prototype.showModal=function(t,e){this.hideModal(),this.hidePreloader();var i=this.modal;i.container=this.sprite.svgContainer.SVGContainer,i.content=t,i.readerTitle=e,i.open()},e.prototype.hideModal=function(){this._modal&&this.modal.close()},e.prototype._canvg=function(){return Cd(this,void 0,void 0,(function(){var t;return Od(this,(function(e){switch(e.label){case 0:return[4,import("./p-c4d8d04f.js")];case 1:return null!=(t=e.sent()).default?[2,t.default]:[2,t]}}))}))},Object.defineProperty(e.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfmake",{get:function(){return null==xb&&(xb=function(){return Cd(this,void 0,void 0,(function(){var t,e,i,n;return Od(this,(function(r){switch(r.label){case 0:return[4,Promise.all([import("./p-3d32ad46.js").then((function(t){return t.p})),import("./p-dbe34b4b.js")])];case 1:return t=r.sent(),e=t[0],i=t[1],(n=window).pdfMake=n.pdfMake||{},n.pdfMake.vfs=i.default,e.vfs=i.default,[2,e]}}))}))}()),xb},enumerable:!0,configurable:!0}),e.prototype._xlsx=function(){return Cd(this,void 0,void 0,(function(){return Od(this,(function(t){switch(t.label){case 0:return[4,import("./p-f5d606ce.js").then((function(t){return t.x}))];case 1:return[2,t.sent()]}}))}))},Object.defineProperty(e.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),e.prototype.setFormatOptions=function(t,e){this._formatOptions.setKey(t,e)},e.prototype.getFormatOptions=function(t){return this._formatOptions.getKey(t)},Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),e.prototype._disablePointers=function(){Rd(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},e.prototype._releasePointers=function(){Rd(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},e.prototype.hideNonExportableSprites=function(){var t=this;if(!this._objectsAlreadyHidden){var e=this.sprite.svgContainer;e&&kf(e.nonExportableSprites,(function(e){e.isHidden||e.isHiding||!e.visible||t._hiddenObjects.push(e),e.hide(0)})),this._objectsAlreadyHidden=!0}},e.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(kf(this._hiddenObjects,(function(t){t.show(0)})),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},e.prototype.awaitValidSprites=function(){return Cd(this,void 0,void 0,(function(){var t;return Od(this,(function(e){switch(e.label){case 0:return t=[],this.validateSprites.length&&kf(this.validateSprites,(function(e,i){e.invalid&&t.push(new Promise((function(t,i){e.events.once("validated",(function(e){t()}))})))})),t.length?[4,Promise.all(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.processConfig=function(e){Om.registeredClasses.ExportMenu=Ob,e&&(Rd(e.menu)&&!Rd(e.menu.type)&&(e.menu.type="ExportMenu"),Rd(e.dataFields)&&$d(e.dataFields)&&(this.dataFields=e.dataFields,delete e.dataFields)),t.prototype.processConfig.call(this,e)},e.XLINK="http://www.w3.org/1999/xlink",e}(Cb),Db=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],Pb=function(t){function e(){var e=t.call(this)||this;return e.properties={},e._eventDispatcher=new ip(e),e._bindings={},e._isTemplate=!1,e._isPath=!1,e._inited=!1,e._ready=!1,e.isHiding=!1,e._isHidden=!1,e.isShowing=!1,e.isStandaloneInstance=!1,e._isActive=!1,e._mask=new Vf,e._positionPrecision=3,e._language=new Vf,e._exporting=new Vf,e._exportable=!0,e._bbox={x:0,y:0,width:0,height:0},e.invalid=!1,e.positionInvalid=!1,e.propertyFields={},e.applyOnClones=!1,e._measuredWidthSelf=0,e._measuredHeightSelf=0,e.maxLeft=0,e.maxRight=0,e.maxTop=0,e.maxBottom=0,e.maxLeftSelf=0,e.maxRightSelf=0,e.maxTopSelf=0,e.maxBottomSelf=0,e._isDragged=!1,e._isResized=!1,e._disabled=!1,e._internalDisabled=!1,e._updateDisabled=!1,e._internalDefaultsApplied=!1,e.rollOutDelay=0,e.isBaseSprite=!1,e.shouldClone=!0,e.appeared=!1,e.ex=0,e.ey=0,e.dragWhileResize=!1,e.measureFailed=!1,e.preventShow=!1,e.cloneTooltip=!0,e.className="Sprite",e._disposers.push(e._eventDispatcher),e.group=e.paper.addGroup("g"),e.setPropertyValue("scale",1),e.setPropertyValue("rotation",0),e.setPropertyValue("align","none"),e.setPropertyValue("valign","none"),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("visible",!0),e.setPropertyValue("tooltipPosition","fixed"),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e.setPropertyValue("tooltipX",Ad(50)),e.setPropertyValue("tooltipX",Ad(50)),e.setPropertyValue("marginTop",0),e.setPropertyValue("marginBottom",0),e.setPropertyValue("marginLeft",0),e.setPropertyValue("marginRight",0),e.setPropertyValue("dx",0),e.setPropertyValue("dy",0),e.setPropertyValue("paddingTop",0),e.setPropertyValue("paddingBottom",0),e.setPropertyValue("paddingRight",0),e.setPropertyValue("paddingLeft",0),e.setPropertyValue("togglable",!1),e.setPropertyValue("hidden",!1),e.setPropertyValue("urlTarget","_self"),e.setPropertyValue("alwaysShowTooltip",!1),e.setPropertyValue("showTooltipOn","hover"),e._prevMeasuredWidth=0,e._prevMeasuredHeight=0,e._measuredWidth=0,e._measuredHeight=0,e._isMeasured=!0,e.invalidate(),e.applyTheme(),e._disposers.push(e.events),e._disposers.push(e.group),e._disposers.push(e._mask),e._disposers.push(e._language),e._disposers.push(e._exporting),e._disposers.push(new _f((function(){nm(e._bindings,(function(t,e){e.dispose()}))}))),e.setPropertyValue("interactionsEnabled",!0),e}return Sd(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new zm(this)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this)},e.prototype.getCurrentThemes=function(){var t=this._themes;if(t)return t;var e=this._parent;return e?e.getCurrentThemes():Om.themes},e.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},e.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,Om.addToInvalidSprites(this),Rb.requestFrame())},e.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,Om.removeFromInvalidSprites(this),this.afterDraw()},e.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,Om.addToInvalidPositions(this),Rb.requestFrame())},e.prototype.validatePosition=function(){var t=this.pixelX,e=this.pixelY,i=this.dx,n=this.dy,r=t+i,s=e+n;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var a=this.measure(),o=this.group.transformString;this.group.moveTo({x:r,y:s}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,(o!=this.group.transformString||a)&&(null==o?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),"hit"!=this.showTooltipOn&&"always"!=this.showTooltipOn||this.updateTooltipPosition()),t+i==r&&e+n==s&&(Om.removeFromInvalidPositions(this),this.positionInvalid=!1);var u=this._maskRectangle;u&&this._clipElement.moveTo({x:u.x-t,y:u.y-e})},e.prototype.beforeDraw=function(){},e.prototype.draw=function(){},e.prototype.afterDraw=function(){var t,e;if((this.isMeasured||"none"!==this.horizontalCenter||"none"!==this.verticalCenter)&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var i=Md(this._adapterO.keys()),n=i.next();!n.done;n=i.next()){var r=n.value;switch(r){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[r]=this[r]}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}"always"==this.showTooltipOn&&(!this.visible||this.disabled||this.__disabled?this.hideTooltip(0):this.showTooltip())},e.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},e.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},e.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},e.prototype.updateFilterScale=function(){var t=this;cm(this.filters.iterator(),(function(e){e.scale=t.globalScale}))},e.prototype.removeFromInvalids=function(){Om.removeFromInvalidSprites(this),Om.removeFromInvalidPositions(this)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.isMeasured=e.isMeasured,this.states.copyFrom(e.states),e.filters.length>0&&e.filters.each((function(t){i.filters.push(t.clone())})),e._adapterO&&this.adapter.copyFrom(e._adapterO),e._interaction&&this.interactions.copyFrom(e.interactions),e._plugins&&this.plugins.copyFrom(e.plugins),this.configField=e.configField,this.applyOnClones=e.applyOnClones,this.disabled=e.disabled,this.virtualParent=e.virtualParent,this.exportable=e.exportable,e._tooltip&&(this._tooltip?this._tooltip.copyFrom(e.tooltip):e.cloneTooltip?this.tooltip=e.tooltip.clone():this._tooltip=e.tooltip),this._showSystemTooltip=e.showSystemTooltip,tv(e.propertyFields,this.propertyFields),tv(e.properties,this),e.fillModifier&&(this.fillModifier=e.fillModifier.clone()),e.strokeModifier&&(this.strokeModifier=e.strokeModifier.clone()),e.focusFilter&&(this.focusFilter=e.focusFilter.clone())},e.prototype.dispose=function(){if(!this.isDisposed()){if("always"==this.showTooltipOn&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(t.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var e=this._clones.length-1;e>=0;e--){this._clones.getIndex(e).dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var i=this.stroke;!i||i instanceof Jm||!i.dispose||this.clonedFrom&&this.clonedFrom.stroke==i||i.dispose();var n=this.fill;if(!n||n instanceof Jm||!n.dispose||this.clonedFrom&&this.clonedFrom.fill==n||n.dispose(),Rd(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var r=this._filters.getIndex(0);r.dispose(),this._filters.removeValue(r)}this._alwaysShowDisposers=void 0}},Object.defineProperty(e.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(t){t=Pd(t),this._isTemplate!=t&&(this._isTemplate=t,this instanceof Eb&&cm(this.children.iterator(),(function(e){e.isTemplate=t})),t?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSystemTooltip",{get:function(){return Rd(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:!!this._parent&&this._parent.showSystemTooltip},set:function(t){t=Pd(t),this._showSystemTooltip!=t&&(this._showSystemTooltip=t,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topParent",{get:function(){return this._topParent?this._topParent:this._parent?this._parent.topParent:void 0},set:function(t){this._topParent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){if(!this._isTemplate){var e=this._parent;e!=t&&(e&&e.children.removeValue(this),this._parent=t,t?(this.topParent=t.topParent,t.isTemplate&&(this.isTemplate=!0),this.baseId=t.baseId,t.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=t.tooltipContainer),this._dataItem||(this.dataItem=t.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),e.prototype.handleAlwaysShow=function(){this.showTooltip()},e.prototype.handleAlwaysShowTooltip=function(){var t=this,e=this._alwaysShowDisposers;if(e&&kf(e,(function(t){t.dispose()})),this._alwaysShowDisposers=[],"always"==this.showTooltipOn)for(;null!=t;){var i=t.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(i),this._alwaysShowDisposers.push(i),t=t.parent}},Object.defineProperty(e.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(t){this._virtualParent=t,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var t=this.fill;t&&t.element&&this.paper.appendDef(t.element);var e=this.stroke;if(e&&e.element&&this.paper.appendDef(e.element),this.fillModifier&&this.fill instanceof Jm){var i=this.fillModifier.modify(this.fill);i&&i.element&&this.paper.appendDef(i.element)}if(this.strokeModifier&&this.stroke instanceof Jm){var n=this.strokeModifier.modify(this.stroke);n&&n.element&&this.paper.appendDef(n.element)}this._clipPath&&this.paper.appendDef(this._clipPath),!1===this._exportable&&(this.exportable=!1)},Object.defineProperty(e.prototype,"map",{get:function(){var t=this.topParent;return t?t.map:(this._map||(this._map=new wm),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){var t=this.topParent;return t?t.delayedMap:(this._delayedMap||(this._delayedMap=new wm),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){if(this._id!=t){if(this._id=t,this.map.hasKey(t))throw Error("Duplicate id ("+t+") used on multiple objects.");this.map.setKey(t,this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){if(this._paper)return this._paper;var t=this._parent;return t?t.paper:ub()},set:function(t){this.setPaper(t)},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(t){return this._paper!=t&&(this._paper=t,this.appendDefs(),!0)},Object.defineProperty(e.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var t=this._parent;return t?t.htmlContainer:void 0},set:function(t){this._htmlContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters||(this._filters=new Am,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new km(this._filters))),this._filters},enumerable:!0,configurable:!0}),e.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},e.prototype.setSVGAttribute=function(t){this.group.attr(t)},e.prototype.removeSVGAttribute=function(t){this.group.removeAttr(t)},e.prototype.setClassName=function(){var t=this.className,e=rp.classNamePrefix;this.element&&this.element.addClass(e+t),this.group.addClass(e+t+"-group"),Rd(this.id)&&this.group.addClass(e+this.id),this.userClassName&&this.group.addClass(this.userClassName)},e.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},e.prototype.updateClipPath=function(){var t=this._clipElement;t&&t.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},e.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var t=Om.getUniqueId();this._clipPath.attr({id:t}),this.group.attr({"clip-path":'url("'+iv()+t+'")'})}},e.prototype.applyMask=function(){var t=this.mask;if(this._clipPath&&t)if(t instanceof Eb){this._clipElement.attr({width:nf(0,t.pixelWidth),height:nf(0,t.pixelHeight)});var e=Av({x:t.pixelX,y:t.pixelY},t.parent,this);this._clipPath.x=e.x,this._clipPath.y=e.y}else t.element&&t.element!=this._clipElement&&(this._clipElement=t.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=t.scale,this._clipPath.x=t.pixelX,this._clipPath.y=t.pixelY,this._clipPath.rotation=t.rotation},e.prototype.applyFilters=function(){var t=this;if(this._filters&&this._filters.length>0){var e=100,i=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var n="filter-"+this.uid;this.filterElement.attr({id:n}),cm(this.filters.iterator(),(function(n){n.sprite=t,n.paper=t.paper,t.filterElement.attr({filterUnits:n.filterUnits}),n.appendPrimitives(t.filterElement),n.width>e&&(e=n.width),n.height>i&&(i=n.height),n.scale=t.globalScale}));var r=e+"%",s=i+"%";this.filterElement.attr({width:r,height:s,x:-(e-100)/2+"%",y:-(i-100)/2+"%"}),this.group.attr({filter:'url("'+iv()+n+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},e.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},e.prototype.setElement=function(t){this.element=t,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this.removeElement(),this._element=t,this.group.add(t),t.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgContainer",{get:function(){return this._svgContainer?this._svgContainer:this._parent?this._parent.svgContainer:void 0},set:function(t){this._svgContainer=t},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var t=this.element.getBBox();this._bbox={x:t.x,y:t.y,width:t.width,height:t.height}}},e.prototype.updateCenter=function(){if(this.element){var t=this.element.transformString,e=this.bbox,i=0,n=0,r=e.x,s=e.y,a=e.width,o=e.height,u=this.pixelPaddingLeft,l=this.pixelPaddingRight,h=this.pixelPaddingTop,c=this.pixelPaddingBottom,d=nf(a+u+l,this.pixelWidth),f=nf(o+h+c,this.pixelHeight),m=e.x,v=e.x+d,p=e.y,b=e.y+f,g=this.horizontalCenter,y=this.verticalCenter;switch(g){case"none":i=r+u;break;case"left":i=u;break;case"middle":i=u-(a+l+u)/2;break;case"right":i=-l-a}switch(y){case"none":n=s+h;break;case"top":n=h;break;case"middle":n=h-(o+c+h)/2;break;case"bottom":n=-c-o}this._measuredHeight=f,this._measuredWidth=d;var w=Yd(i-r,this._positionPrecision,!0),S=Yd(n-s,this._positionPrecision,!0);this.ex=w-u,this.ey=S-h,this.maxLeft=m+w-u,this.maxRight=v+w-u,this.maxTop=p+S-h,this.maxBottom=b+S-h,this.pixelPerfect&&0==rp.pixelPerfectPrecision&&(w-=.5,S-=.5),this.element.moveTo({x:w,y:S}),t!=this.element.transformString&&this.dispatchImmediately("transformed")}},e.prototype.measure=function(){this.updateCenter();var t=this._measuredWidth,e=this._measuredHeight,i=this.maxLeft,n=this.maxRight,r=this.maxTop,s=this.maxBottom;this._measuredWidthSelf=t,this._measuredHeightSelf=e;var a=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,0!==this.rotation||1!==this.scale||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var o=this.paper.svg,u=o.createSVGMatrix(),l=this.rotation,h=this.scale;this.nonScaling&&(h=this.scale/this.globalScale),u.a=ef(l)*h,u.c=-Qd(l)*h,u.e=0,u.b=Qd(l)*h,u.d=ef(l)*h,u.f=0;var c=o.createSVGPoint();c.x=i,c.y=r;var d=o.createSVGPoint();d.x=n,d.y=r;var f=o.createSVGPoint();f.x=n,f.y=s;var m=o.createSVGPoint();m.x=i,m.y=s;var v=c.matrixTransform(u),p=d.matrixTransform(u),b=f.matrixTransform(u),g=m.matrixTransform(u);i=Math.min(v.x,p.x,b.x,g.x),n=Math.max(v.x,p.x,b.x,g.x),r=Math.min(v.y,p.y,b.y,g.y),t=n-i,e=(s=Math.max(v.y,p.y,b.y,g.y))-r,this.maxLeft=Yd(i,a,!0),this.maxRight=Yd(n,a,!0),this.maxTop=Yd(r,a,!0),this.maxBottom=Yd(s,a,!0)}return this._measuredWidth=Yd(t,a,!0),this._measuredHeight=Yd(e,a,!0),(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight)&&(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||"hit"==this.showTooltipOn||"always"==this.showTooltipOn)&&this.tooltip&&this.tooltip.visible&&(Rd(this.tooltipText)||Rd(this.tooltipHTML))&&this.updateTooltipPosition(),!0)},e.prototype.insertBefore=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i),e.sortChildren())}return this},e.prototype.insertAfter=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i+1),e.sortChildren())}return this},e.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},e.prototype.getRelativeX=function(t){return t instanceof Id?t.value:this._parent?t/this._parent.innerWidth:0},e.prototype.getRelativeY=function(t){return t instanceof Id?t.value:this._parent?t/this._parent.innerHeight:0},e.prototype.getPixelX=function(t){var e=0;if(Gd(t))e=t;else if(t instanceof Id){var i=t.value;this._parent&&(e=Yd(this._parent.innerWidth*i,this._positionPrecision,!0))}return e},e.prototype.getPixelY=function(t){var e=0;if(Gd(t))e=t;else if(t instanceof Id){var i=t.value;this._parent&&(e=Yd(this._parent.innerHeight*i,this._positionPrecision,!0))}return e},e.prototype.moveTo=function(t,e,i,n){this.isDragged&&!n||(t&&(Gd(t.x)&&this.setPropertyValue("x",Yd(t.x,this._positionPrecision,!0)),Gd(t.y)&&this.setPropertyValue("y",Yd(t.y,this._positionPrecision,!0))),Gd(e)&&(this.rotation=e),Gd(i)&&(this.scale=i),this.invalidatePosition())},Object.defineProperty(e.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(t){var e=this;this._mask.get()!==t&&(t?(this.createClipPath(),t instanceof Eb?this._clipElement=this.paper.add("rect"):(t.isMeasured=!1,t.element&&(this._clipElement=t.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(t,new zf([t.events.on("maxsizechanged",(function(){e.inited&&e.applyMask()}),void 0,!1),t.events.on("validated",this.applyMask,this,!1),t.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(t){t?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:t.width,height:t.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(t){(t=Pd(t))||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=t&&(this._isMeasured=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(t){this.invalid&&this.validate(),t.invalid&&t.validate();var e=this.pixelX+this.maxLeft,i=this.pixelY+this.maxTop,n=e+this.maxRight,r=i+this.maxBottom,s=t.pixelX+t.maxLeft,a=t.pixelY+t.maxTop,o=s+t.maxRight,u=a+t.maxBottom;return!(s>n||o<e||a>r||u<i)},Object.defineProperty(e.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},Object.defineProperty(e.prototype,"states",{get:function(){if(!this._states){var t=new ep;this._states=new Sm(t),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new ym(this._states)),this._disposers.push(t)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var t=this.states.create("hidden");t.properties.opacity=0,t.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultState",{get:function(){this.states.getKey("default")||(this.states.create("default").properties.opacity=1);return this.states.getKey("default")},enumerable:!0,configurable:!0}),e.prototype.processState=function(t){var e=t.newValue;if(e.sprite=this,e.name=t.key,(this.states.hasKey("hover")||"hover"==this.showTooltipOn&&(Rd(this.tooltipHTML)||Rd(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||"hover"==this.showTooltipOn&&(Rd(this.tooltipHTML)||Rd(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var i=this.clones.values,n=i.length,r=0;r<n;++r){var s=i[r];s.isDisposed()||s.states.setKey(e.name,e)}},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new hp(this._animations))),this._animations},enumerable:!0,configurable:!0}),e.prototype.getSvgPoint=function(t){try{var e=this.htmlContainer.getBoundingClientRect();return{x:t.x-e.left,y:t.y-e.top}}catch(e){return t}},e.prototype.animate=function(t,e,i){return new cp(this,t,e,i).start()},e.prototype.setState=function(t,e,i){var n;if(t instanceof ep)this.states.setKey(t.name,t),n=t;else if(!(n=this.states.getKey(t)))return;if("hover"==n.name){if(this.isHidden)return;this.isHover=!0}return"hidden"==n.name?this.isHiding=!0:this.visible||this.setVisibility(n.properties.visible||this.defaultState.properties.visible),"active"==n.name&&(this.isActive=!0),Gd(e)||(e=n.transitionDuration),Rd(i)||(i=n.transitionEasing),this.transitTo(n,e,i)},e.prototype.applyCurrentState=function(t){var e=this.setState(this.defaultState,t);return this.isHover&&(e=this.setState("hover",t)),this.isDown&&this.interactions.downPointers.length&&(e=this.setState("down",t)),this.isFocused=this.isFocused,this.isActive&&(e=this.setState("active",t),this.isHover&&this.states.hasKey("hoverActive")&&(e=this.setState("hoverActive",t))),e},e.prototype.transitTo=function(t,e,i){var n,r=this,s=[];if(nm(t.allValues,(function(t,e){var i=r[t];if(e!=i&&null==r.defaultState.properties[t]&&(r.defaultState.properties[t]=i),"__unset"!=e){var n={from:i,to:e,property:t};s.push(n)}})),s.length>0&&((n=this.animate(s,e,i))&&!n.isFinished()?this._disposers.push(n.events.on("animationended",(function(){r.dispatchImmediately("transitionended")}))):this.dispatchImmediately("transitionended")),t.filters.length>0){var a=[];cm(t.filters.iterator(),(function(t){var n=t.clone();a.push(n);var s=[];cm(r.filters.iterator(),(function(t){t.className==n.className&&(vm(r.defaultState.filters.iterator(),(function(t){return t.className===n.className}))||r.defaultState.filters.push(t),nm(n.properties,(function(e,i){var n=t.properties[e];n!=i&&s.push({property:e,from:n,to:i})})))})),n.animate(s,e,i)})),this.filters.clear(),this.filters.pushAll(a)}return n},e.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(e.prototype,"isHover",{get:function(){return!!this.isInteractive()&&this.interactions.isHover},set:function(t){(t=Pd(t))!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=t,t?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return!!this.isInteractive()&&this.interactions.isDown},set:function(t){t=Pd(t),this.isInteractive()&&this.isDown!=t&&(this.interactions.isDown=t,t?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return!!this.isInteractive()&&this.interactions.isFocused},set:function(t){t=Pd(t),this.focusable&&this.isFocused!=t&&this.isInteractive()&&(this.interactions.isFocused=t,!0===t?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this.setActive(t)},enumerable:!0,configurable:!0}),e.prototype.setActive=function(t){t=Pd(t),this._isActive!==t&&(this._isActive=t,t&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(e.prototype,"disabled",{get:function(){var t=this.getPropertyValue("disabled");return Rd(t)?t:this.virtualParent?this.virtualParent.disabled:!!this._parent&&this._parent.disabled},set:function(t){this.setDisabled(t)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(t){if(t=Pd(t),this.getPropertyValue("disabled")!=t){if(this.setPropertyValue("disabled",t,!0),t)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var e=this._parent.element;e.hasChild(this.group)||e.add(this.group)}this instanceof Eb?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),Rb.requestFrame(),!0}return!1},Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(t){this._internalDisabled!=t&&(this._internalDisabled=t,this._updateDisabled=!0,this.invalidatePosition(),t||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new gb,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(t){this._numberFormatter=t,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new yb,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(t){this._dateFormatter=t,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new wb,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(t){this._durationFormatter=t,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this._language.get();return t||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(t=new vb,this.language=t,t))},set:function(t){var e=this;this._language.get()!==t&&this._language.set(t,t.events.on("localechanged",(function(t){if(e._numberFormatter&&(e._numberFormatter.language=e.language),e._dateFormatter&&(e._dateFormatter.language=e.language),e._durationFormatter&&(e._durationFormatter.language=e.language),e._exporting.get()){var i=e._exporting.get();i.numberFormatter.language=e.language,i.dateFormatter.language=e.language,i.durationFormatter.language=e.language,i.language=e.language}e instanceof Eb&&e.deepInvalidate()})))},enumerable:!0,configurable:!0}),e.prototype.populateString=function(t,e){if(Rd(t)){t=Dd(t);var i=(t=bb().escape(t)).match(/\{([^}]+)\}/g),n=void 0;if(i)for(n=0;n<i.length;n++){var r=i[n].replace(/\{([^}]+)\}/,"$1"),s=this.getTagValue(r,"",e);Rd(s)||(s=""),t=t.split(i[n]).join(s)}t=bb().unescape(t)}else t="";return this._adapterO?this._adapterO.apply("populateString",t):t},e.prototype.getTagValue=function(t,e,i){var n;Rd(i)||(i=this.dataItem);for(var r,s=[],a=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(r=a.exec(t));)if(r[3])s.push({prop:r[3]});else{var o=[];if(""!=cv(r[2]))for(var u=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,l=void 0;null!==(l=u.exec(r[2]));)o.push(l[1]||l[2]||l[3]);s.push({method:r[1],params:o})}if(i){Rd(n=this.getTagValueFromObject(s,i.values))&&!$d(n)||(n=this.getTagValueFromObject(s,i));var h=i.dataContext;!Rd(n)&&h&&(Rd(n=this.getTagValueFromObject(s,i.dataContext))||(n=this.getTagValueFromObject([{prop:t}],h)),!Rd(n)&&h.dataContext&&(n=this.getTagValueFromObject(s,h.dataContext))),!Rd(n)&&i.component&&i.component.dataItem!==i&&(n=i.component.getTagValue(t,e))}return Rd(n)||(n=this.getTagValueFromObject(s,this.populateStringFrom||this)),!Rd(n)&&this._parent&&(n=this._parent.getTagValue(t,e)),n},e.prototype.getTagValueFromObject=function(t,e,i){for(var n=e,r=!1,s=0,a=t.length;s<a;s++){var o=t[s];if(o.prop){if(!Rd(n=n[o.prop]))return}else switch(o.method){case"formatNumber":var u=yv(n);Rd(u)&&(n=this.numberFormatter.format(u,i||o.params[0]||void 0),r=!0);break;case"formatDate":var l=void 0;if(!zd(l=Vd(n)?this.dateFormatter.parse(n):gv(n))||jd(l.getTime()))return;Rd(l)&&(n=this.dateFormatter.format(l,i||o.params[0]||void 0),r=!0);break;case"formatDuration":var h=yv(n);Rd(h)&&(n=this.durationFormatter.format(h,i||o.params[0]||void 0,o.params[1]||void 0),r=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[o.method]&&n[o.method].apply(this,o.params)}}if(!r){var c=[{method:"",params:i}];if(Rd(i)){var d=function(t){if(void 0===t)return"string";var e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:"number"===t?"number":"date"===t?"date":"duration"===t?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(i);"number"===d?c[0].method="formatNumber":"date"===d?c[0].method="formatDate":"duration"===d&&(c[0].method="formatDuration")}else Gd(n)?(c[0].method="formatNumber",c[0].params=""):zd(n)&&(c[0].method="formatDate",c[0].params="");c[0].method&&(n=this.getTagValueFromObject(c,n))}return n},Object.defineProperty(e.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(t){this.setDataItem(t)},enumerable:!0,configurable:!0}),e.prototype.setDataItem=function(t){var e=this;if(this._dataItem!=t){if(this._dataItem=t,t){if(this.configField){var i=t.dataContext;i&&(this.config=i[this.configField],!this.config&&i.dataContext&&(this.config=i.dataContext[this.configField]))}var n=t.dataContext;if(n){var r=n.dataContext;nm(this.propertyFields,(function(t,i){if(Rd(n[i]))e[t]=n[i];else if(r){var s=r[i];if(Rd(s))e[t]=s}}))}}this.invalidate()}},e.prototype.getPropertyValue=function(t){var e=this.properties[t];return this._isTemplate||(this._adapterO&&(e=this._adapterO.apply(t,e)),e=_m.applyAll(this,t,e)),e},e.prototype.setColorProperty=function(t,e,i){var n=this.properties[t];return!(e instanceof Jm&&n instanceof Jm&&e.toString()==n.toString())&&this.setPropertyValue(t,e,i)},e.prototype.setPercentProperty=function(t,e,i,n,r,s){if(Gd(e=Nd(e)))return Gd(r)&&(e=Yd(e,r,s)),this.setPropertyValue(t,e,i,n);var a=this.properties[t];return!(e instanceof Id&&a instanceof Id&&e.value==a.value)&&this.setPropertyValue(t,e,i,n)},e.prototype.setPropertyValue=function(t,e,i,n){if(this.properties[t]!==e&&!this.isDisposed()){if(this.properties[t]=e,this.events.isEnabled("propertychanged")){var r={type:"propertychanged",target:this,property:t};this.events.dispatchImmediately("propertychanged",r)}if(i&&this.invalidate(),n&&this.invalidatePosition(),this.applyOnClones)for(var s=this.clones.values,a=s.length,o=0;o<a;++o){var u=s[o];u.isDisposed()||(u[t]=e)}return!0}return!1},e.prototype.bind=function(t,e,i,n){var r=this;void 0===i&&(i=t),Rd(this._bindings[t])&&this._bindings[t].dispose(),this[t]=e[i],this._bindings[t]=e.events.on("propertychanged",(function(s){if(s.property===i){var a=e[i];n&&(a=n(a)),r[t]=a}}))},e.prototype.observe=function(t,e,i,n){var r=this;return new zf(Tf(Df(t),(function(t){return r.events.on("propertychanged",(function(n){n.property===t&&e.call(i,n)}),i,n)})))},e.prototype.applyAccessibility=function(){var t=this.readerTitle,e=this.readerDescription,i=this.role,n=this.readerHidden,r=this.readerChecked,s=this.readerControls,a=this.readerLive,o=this.readerOrientation,u=this.readerValueNow,l=this.readerValueText,h=[],c=[],d=this.readerLabelledBy;d&&h.push(d);var f=this.readerDescribedBy;if(f&&c.push(f),t)if(h.length||this.showSystemTooltip){var m=this.titleElement,v=this.uid+"-title";m.node.textContent!=t&&(m.node.textContent=t,m.attr({id:v})),h.push(v)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":t});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(e){var p=this.descriptionElement,b=this.uid+"-description";p.node.textContent!=e&&(p.node.textContent=e,p.attr({id:b})),c.push(b)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);h.length?this.setSVGAttribute({"aria-labelledby":h.join(" ")}):this.removeSVGAttribute("aria-labelledby"),c.length?this.setSVGAttribute({"aria-describedby":c.join(" ")}):this.removeSVGAttribute("aria-describedby"),i?this.setSVGAttribute({role:i}):this.removeSVGAttribute("role"),n?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),r?this.setSVGAttribute({"aria-checked":"true"}):!1===r?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),s?this.setSVGAttribute({"aria-controls":s}):this.removeSVGAttribute("aria-controls"),a?this.setSVGAttribute({"aria-live":a}):this.removeSVGAttribute("aria-live"),o?this.setSVGAttribute({"aria-orientation":o}):this.removeSVGAttribute("aria-orientation"),u?this.setSVGAttribute({"aria-valuenow":u}):this.removeSVGAttribute("aria-valuenow"),l?this.setSVGAttribute({"aria-valuetext":l}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return Rd(t)&&this.dataItem?this.populateString(t):t},set:function(t){t=Ed(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescription",{get:function(){var t=this.getPropertyValue("readerDescription");return Rd(t)&&this.dataItem?this.populateString(t):this.getPropertyValue("readerDescription")},set:function(t){t=Ed(t),this.setPropertyValue("readerDescription",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(t){t=Ed(t),this.setPropertyValue("role",t)&&(this.applyAccessibility(),"slider"==t&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(t){t=Pd(t),this.setPropertyValue("readerHidden",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(t){t=Pd(t),this.setPropertyValue("readerChecked",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(t){t=Ed(t),this.setPropertyValue("readerControls",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(t){t=Ed(t),this.setPropertyValue("readerLive",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(t){t=Ed(t),this.setPropertyValue("readerLabelledBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(t){t=Ed(t),this.setPropertyValue("readerDescribedBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(t){t=Ed(t),this.setPropertyValue("readerOrientation",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(t){t=Ed(t),this.setPropertyValue("readerValueNow",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(t){t=Ed(t),this.setPropertyValue("readerValueText",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactions",{get:function(){if(!this._interaction){var t=Yp().getInteraction(this.dom);this._interaction=t,this._interaction.clickable=this.clickable,this._interaction.hoverable=this.hoverable,this._interaction.trackable=this.trackable,this._interaction.draggable=this.draggable,this._interaction.swipeable=this.swipeable,this._interaction.resizable=this.resizable,this._interaction.wheelable=this.wheelable,this._interaction.contextMenuDisabled=this.contextMenuDisabled,this._interaction.inert=this.inert,this._interaction.sprite=this,this._disposers.push(this._interaction)}return this._interaction},enumerable:!0,configurable:!0}),e.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(e.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("focusable",t)&&(t||this.isInteractive())&&(this.interactions.focusable=t,t?(this.setSVGAttribute({focusable:t}),Rd(this._tabindex)||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",t,(function(){return new zf([e.events.on("blur",e.handleBlur,e,!1),e.events.on("focus",e.handleFocus,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleFocus=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},e.prototype.handleBlur=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(e.prototype,"focusFilter",{get:function(){var t=this._focusFilter;return t||(this.virtualParent?this.virtualParent.focusFilter:this._parent?this._parent.focusFilter:void 0)},set:function(t){this._focusFilter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(t){t!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){var t=this._tabindex;return null!=t?t:this.virtualParent?this.virtualParent.tabindex:this._parent?this._parent.tabindex:void 0},set:function(t){t=Ld(t),this.setPropertyValue("tabindex",t)&&Gd(t)&&(this.interactions.tabindex=t,this.setSVGAttribute({tabindex:t}),this._tabindex=t,this.focusable=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("draggable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.draggable=t,this.interactions.setEventDisposer("sprite-draggable",t,(function(){return new zf([e.events.on("down",e.handleDown,e,!1),e.events.on("dragstart",e.handleDragStart,e,!1),e.events.on("drag",e.handleDragMove,e,!1),e.events.on("dragstop",e.handleDragStop,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleDragStart=function(t){this.interactions.isTouchProtected&&t.touch||(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},e.prototype.dragStart=function(t){this._isDragged=!0,Yp().dragStart(this.interactions,t)},e.prototype.handleDragStop=function(t){this.interactions.isTouchProtected&&t.touch||(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},e.prototype.dragStop=function(t,e){this._isDragged=!1,Yp().dragStop(this.interactions,t,e)},e.prototype.handleDragMove=function(t){if(!this.interactions.isTouchProtected||!t.touch){var e=this.interactions.originalPosition;if(e&&this._isDragged){var i=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:e.x+t.shift.x/i,y:e.y+t.shift.y/i},void 0,void 0,!0)}this.dispatchImmediately("dragged",t)}},Object.defineProperty(e.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(t){t=Pd(t),this.setPropertyValue("inert",t)&&(t||this.isInteractive())&&(this.interactions.inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("hoverable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.hoverable=t,this.interactions.setEventDisposer("sprite-hoverable",t,(function(){return new zf([e.events.on("over",e.handleOver,e,!1),e.events.on("out",e.handleOut,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleOver=function(t){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var e=void 0;t&&t.pointer&&(e=Fv(t.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),"hover"==this.showTooltipOn&&this.showTooltip(e)}else"hover"==this.showTooltipOn&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},e.prototype.handleOut=function(t){var e=this;this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover?this._outTimeout=this.setTimeout((function(){e.tooltip.isHover||(e.tooltip.targetSprite==e&&e.hideTooltip(),e._outTimeout=e.setTimeout(e.handleOutReal.bind(e),e.rollOutDelay))}),10):("hover"==this.showTooltipOn&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay))},e.prototype.handleOutReal=function(){this.isHidden||this.isHiding||!this.states.hasKey("hover")||this.applyCurrentState()},Object.defineProperty(e.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),e.prototype.handleDown=function(t){1===this.interactions.downPointers.length&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},e.prototype.handleUp=function(t){var e=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),"hit"==this.showTooltipOn&&(this.updateTooltipPosition(t.pointer?t.pointer.point:void 0),this._disposers.push(Om.events.once("exitframe",(function(){e.showTooltip()}))),this._disposers.push(Yp().body.events.once("down",(function(t){e.hideTooltip()}))))},Object.defineProperty(e.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("clickable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.clickable=t,this.interactions.setEventDisposer("sprite-clickable",t,(function(){return new zf([e.events.on("down",e.handleDown,e,!1),e.events.on("up",e.handleUp,e,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("togglable",t)&&(t||this.isInteractive())&&this.interactions.setEventDisposer("sprite-togglable",t,(function(){return e.events.on("hit",e.handleToggle,e,!1)}))},enumerable:!0,configurable:!0}),e.prototype.handleToggle=function(t){this.isActive=!this.isActive},Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(t){t=Pd(t),this.setPropertyValue("contextMenuDisabled",t)&&(this.interactions.contextMenuDisabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(t){this.setPropertyValue("url",t)&&(this._urlDisposer&&this._urlDisposer.dispose(),nv(t)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=fb.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(t){this.setBaseId(t)},enumerable:!0,configurable:!0}),e.prototype.setBaseId=function(t){t!=this._baseId&&(this.invalid&&(this.invalid=!1,Om.removeFromInvalidSprites(this),this.invalidate()),this._baseId=t)},Object.defineProperty(e.prototype,"baseSprite",{get:function(){return this.isBaseSprite?this:this._parent?this._parent.baseSprite:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(t){this.setPropertyValue("urlTarget",t)},enumerable:!0,configurable:!0}),e.prototype.urlHandler=function(t){if(nv(this.url)){var e=this.populateString(this.url);"_self"===this.urlTarget?window.location.href=e:window.open(e,this.urlTarget)}},Object.defineProperty(e.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(t){t=Pd(t),this.setPropertyValue("swipeable",t)&&(this.applyCursorStyle(),(t||this.isInteractive())&&(this.interactions.swipeable=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(t){t=Pd(t),this.setPropertyValue("trackable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.trackable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(t){this.setPropertyValue("wheelable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.wheelable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(t){var e=this;t=Pd(t),this.setPropertyValue("resizable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.resizable=t,this.interactions.setEventDisposer("sprite-resizable",t,(function(){return new zf([e.events.on("down",e.handleDown,e,!1),e.events.on("resize",e.handleResize,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleResize=function(t){if((!this.interactions.isTouchProtected||!t.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*t.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var e=hf(Fv(t.point1,this.htmlContainer,this.svgContainer.cssScale),Fv(t.point2,this.htmlContainer,this.svgContainer.cssScale)),i=Pv(t.startPoint1,this._parent),n=Pv(t.startPoint2,this._parent),r=this.interactions.originalPosition,s=this.interactions.originalScale;if(r){var a=hf({x:(i.x-r.x)/s,y:(i.y-r.y)/s},{x:(n.x-r.x)/s,y:(n.y-r.y)/s}),o=kv(e,this._parent);this.moveTo({x:o.x-a.x*this.scale,y:o.y-a.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(e.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOverStyle",{set:function(t){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=t,Yp().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorDownStyle",{set:function(t){this.cursorOptions.downStyle=t},enumerable:!0,configurable:!0}),e.prototype.applyCursorStyle=function(){},Object.defineProperty(e.prototype,"interactionsEnabled",{get:function(){return!1!==this.getPropertyValue("interactionsEnabled")&&(this.virtualParent?this.virtualParent.interactionsEnabled:!this._parent||this._parent.interactionsEnabled)},set:function(t){if(t=Pd(t),this.setPropertyValue("interactionsEnabled",t)){var e=null;t?this.group.node.style.pointerEvents="":e="none",this.group.node.style.pointerEvents=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exporting",{get:function(){return this.getExporting()},set:function(t){this._exporting.set(t,t)},enumerable:!0,configurable:!0}),e.prototype.getExporting=function(){var t=this._exporting.get();return t||(!this.isStandaloneInstance&&this._parent?this._parent.exporting:((t=new Fb(this.svgContainer.SVGContainer)).sprite=this,t.language=this.language,t.numberFormatter=this.numberFormatter,t.dateFormatter=this.dateFormatter,t.durationFormatter=this.durationFormatter,this._exporting.set(t,t),t))},Object.defineProperty(e.prototype,"exportable",{get:function(){return this._exportable},set:function(t){var e=this.svgContainer;this._exportable=t,e&&(t?Af(e.nonExportableSprites,this):-1==Of(e.nonExportableSprites,this)&&e.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),e.prototype.modalPrefix=function(t){return t=rp.classNamePrefix+t},Object.defineProperty(e.prototype,"modal",{get:function(){var t=this.svgContainer;if(t){var e=t.modal;return e.adapter.has("classPrefix",this.modalPrefix)||e.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openModal=function(t,e){var i=this.svgContainer;if(i)return i.openModal(t,e)},e.prototype.closeModal=function(){var t=this.svgContainer;t&&t.closeModal()},Object.defineProperty(e.prototype,"popups",{get:function(){var t=this.svgContainer;if(t){var e=t.popups;return e.template.sprite=this,e.template.adapter.has("classPrefix",this.modalPrefix)||e.template.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(t,e){var i=this.svgContainer;if(i)return i.openPopup(t,e)},e.prototype.closeAllPopups=function(){var t=this.svgContainer;t&&t.closeAllPopups()},Object.defineProperty(e.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(t){this.isDragged||this.setPercentProperty("x",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelX",{get:function(){var t=Xd(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("minX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("maxX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(t){this.isDragged||this.setPercentProperty("y",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelY",{get:function(){var t=Xd(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("minY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("maxY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("dx",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(t){Gd(t)&&(t=Yd(t,this._positionPrecision,!0),this.setPropertyValue("dy",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(t){Gd(t=Ld(t))||(t=0),this.setPropertyValue("rotation",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(t){t=Ed(t),this.setPropertyValue("align",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(t){t=Ed(t),this.setPropertyValue("valign",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(t){t=Ed(t),this.setPropertyValue("horizontalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(t){t=Ed(t),this.setPropertyValue("verticalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var t=this.getPropertyValue("maxWidth");if(!Gd(t)&&this._parent){var e=this._parent.maxWidth;return"absolute"!=this._parent.layout&&"none"!=this.align&&null!=this.align&&(e=e-this.pixelMarginLeft-this.pixelMarginRight),e}return t},set:function(t){this.setMaxWidth(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxWidth=function(t){var e=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxWidth",t)){Gd(this.relativeWidth)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.getPropertyValue("maxHeight");if(!Gd(t)&&this._parent){var e=this._parent.maxHeight;return"absolute"!=this._parent.layout&&"none"!=this.valign&&null!=this.valign&&(e=e-this.pixelMarginTop-this.pixelMarginBottom),e}return t},set:function(t){this.setMaxHeight(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxHeight=function(t){var e=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxHeight",t)){Gd(this.relativeHeight)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(t){this.setPercentProperty("width",t,!0,!1,this._positionPrecision,!0)&&(this.percentWidth=void 0,this.relativeWidth=void 0,t instanceof Id?(this.percentWidth=t.percent,Gd(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(t),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(t){this.setPercentProperty("height",t,!0,!1,this._positionPrecision,!0)&&(this.percentHeight=void 0,this._relativeHeight=void 0,t instanceof Id?(this.percentHeight=t.percent,Gd(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(t),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){var t;t=Gd(this.percentWidth)?this.maxWidth:Gd(this._pixelWidth)?this._pixelWidth:0;var e=this.minWidth;null!=e&&t<e&&(t=e);var i=Yd(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){var t;t=Gd(this.percentHeight)?this.maxHeight:Gd(this._pixelHeight)?this._pixelHeight:0;var e=this.minHeight;null!=e&&t<e&&(t=e);var i=Yd(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeWidth",{get:function(){var t=this._relativeWidth;if(Gd(t))return this._adapterO?this._adapterO.apply("relativeWidth",t):t},set:function(t){this._relativeWidth!=t&&(this._relativeWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeHeight",{get:function(){var t=this._relativeHeight;if(Gd(t))return this._adapterO?this._adapterO.apply("relativeHeight",t):t},set:function(t){this._relativeHeight!=t&&(this._relativeHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerWidth",{get:function(){var t=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerHeight",{get:function(){var t=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerWidth",{get:function(){var t=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerHeight",{get:function(){var t=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalScale",{get:function(){var t=this.scale;return this._parent&&(t*=this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(t){(t=Ld(t))<0&&(t=0),t!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",t,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),e.prototype.margin=function(t,e,i,n){return this.marginTop=t,this.marginRight=e,this.marginBottom=i,this.marginLeft=n,this},Object.defineProperty(e.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(t){this.setPercentProperty("marginLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(t){this.setPercentProperty("marginRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(t){this.setPercentProperty("marginTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(t){this.setPercentProperty("marginBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginRight",{get:function(){var t=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginRight",{get:function(){var t=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginLeft",{get:function(){var t=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginLeft",{get:function(){var t=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginTop",{get:function(){var t=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginTop",{get:function(){var t=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginBottom",{get:function(){var t=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginBottom",{get:function(){var t=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",t):t},enumerable:!0,configurable:!0}),e.prototype.padding=function(t,e,i,n){return this.paddingTop=t,this.paddingRight=e,this.paddingBottom=i,this.paddingLeft=n,this},Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(t){this.setPercentProperty("paddingLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(t){this.setPercentProperty("paddingRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(t){this.setPercentProperty("paddingTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(t){this.setPercentProperty("paddingBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPath(t)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this._adapterO&&(t=this._adapterO.apply("path",t)),this._isPath||(this.element&&(!this.element.node||this.element.node instanceof SVGPathElement)||(this.element=this.paper.add("path")),this._isPath=!0),Rd(t)?this.element.attr({d:t}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0)},Object.defineProperty(e.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(t){this.setPropertyValue("fillModifier",t)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(t){this.setPropertyValue("strokeModifier",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(t){t=Jd(t,0,1),this.setPropertyValue("fillOpacity",t)&&this.setSVGAttribute({"fill-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(t){this.setFill(t)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(t){if($d(t)&&!("r"in t)||(t=Zm(t)),this.setColorProperty("fill",t)||this.fillModifier)if(t instanceof Jm&&this.fillModifier&&(t=this.fillModifier.modify(t)),this.realFill=t,t instanceof Jm)this.setSVGAttribute({fill:t.toString()});else if(Rd(t)){if(t instanceof lb||t instanceof hb||t instanceof cb){var e=t;e.paper=this.paper,this.setSVGAttribute({fill:'url("'+iv()+e.id+'")'})}}else this.removeSVGAttribute("fill")},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(t){t=Jd(t,0,1),this.setPropertyValue("opacity",t)&&this.setSVGAttribute({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(t){this.setStroke(t)},enumerable:!0,configurable:!0}),e.prototype.setStroke=function(t){if($d(t)&&!("r"in t)||(t=Zm(t)),this.setColorProperty("stroke",t)||this.strokeModifier)if(t instanceof Jm&&this.strokeModifier&&(t=this.strokeModifier.modify(t)),this.realStroke=t,t instanceof Jm)"none"==t.hex?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:t.toString()});else if(Rd(t)){if(t instanceof lb||t instanceof hb||t instanceof cb){var e=t;e.paper=this.paper,this.setSVGAttribute({stroke:'url("'+iv()+e.id+'")'})}}else this.removeSVGAttribute("stroke")},Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(t){t=Jd(t,0,1),this.setPropertyValue("strokeOpacity",t)&&this.setSVGAttribute({"stroke-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(t){t=Pd(t),this.setPropertyValue("nonScalingStroke",t)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(t){t=Pd(t),this.setPropertyValue("nonScaling",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(t){t=Ld(t),this.setPropertyValue("strokeWidth",t,!0),this.nonScalingStroke&&(Gd(t)||(t=1),t/=this.globalScale),this.setSVGAttribute({"stroke-width":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(t){t=Ed(t),this.setPropertyValue("strokeDasharray",t)&&this.setSVGAttribute({"stroke-dasharray":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(t){t=Ld(t),this.setPropertyValue("strokeDashoffset",t)&&this.setSVGAttribute({"stroke-dashoffset":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(t){this.setPropertyValue("strokeLinecap",t)&&this.setSVGAttribute({"stroke-linecap":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(t){this.setPropertyValue("strokeLinejoin",t)&&this.setSVGAttribute({"stroke-linejoin":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(t){t=Ed(t),this.setPropertyValue("shapeRendering",t)&&this.setSVGAttribute({"shape-rendering":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(t){t=Pd(t),this._positionPrecision=t?rp.pixelPerfectPrecision:3,this.setPropertyValue("pixelPerfect",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rtl",{get:function(){return Rd(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=Pd(t),this.isBaseSprite&&(this.topParent.rtl=t),this._rtl=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){return this.showReal(t)},e.prototype.showReal=function(t){var e=this;if(!this.preventShow){var i,n=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||null!=n.opacity&&this.opacity<n.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),Gd(t)||(t=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,(i=this.applyCurrentState(t))&&!i.isFinished()?(this._showHideDisposer=i.events.on("animationended",(function(){e.isShowing=!1})),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var r=this.defaultState.properties.visible;Rd(r)||(r=!0),this.visible=r,this.readerHidden=!1,this.dispatchImmediately("shown")}return i}},e.prototype.hide=function(t){return this.hideReal(t)},e.prototype.hideReal=function(t){var e,i=this;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var n=this.hiddenState;n?(e=this.setState(n,t,void 0))&&!e.isFinished()?(this._hideAnimation=e,this._showHideDisposer=e.events.on("animationended",(function(){i.isHiding=!1,i._isHidden=!0,0==n.properties.visible&&(i.visible=!1)}),this),this._disposers.push(this._showHideDisposer),this._disposers.push(e)):(this.isHiding=!1,this._isHidden=!0):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return Gd(t)||(t=this.hiddenState.transitionDuration),e},Object.defineProperty(e.prototype,"visible",{get:function(){return this.getVisibility()},set:function(t){t=Pd(t),this.setVisibility(t)},enumerable:!0,configurable:!0}),e.prototype.getVisibility=function(){var t=this.getPropertyValue("visible");return Rd(t)||(t=!0),t},e.prototype.setVisibility=function(t){if(this.setPropertyValue("visible",t)&&(t?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var e={type:"visibilitychanged",target:this,visible:t};this.events.dispatchImmediately("visibilitychanged",e)}},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(t){t=Ld(t),this.setPropertyValue("zIndex",t)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),e.prototype.toFront=function(){var t=this._parent;t&&t.children.indexOf(this)!=t.children.length-1&&(t.children.moveValue(this,t.children.length-1),this.dispatch("zIndexChanged"))},e.prototype.toBack=function(){var t=this._parent;t&&0!=t.children.indexOf(this)&&(t.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(e.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(t){this.setPropertyValue("userClassName",t)&&(!t&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip?this._tooltip:this.virtualParent?this.virtualParent.tooltip:this._parent?this._parent.tooltip:void 0},set:function(t){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=t,t&&(t.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDataItem",{get:function(){var t=this._tooltipDataItem;return t||this.dataItem},set:function(t){this._tooltipDataItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(t){this._tooltipColorSource=t},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(t){"always"==this.showTooltipOn&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!t&&"pointer"==this.tooltipPosition&&this.isHover&&(t=Fv(Yp().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var e=this;null!=e;){if(!e.visible||e.disabled||e.__disabled)return void(this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0));e=e.parent}if(Rd(this.tooltipText)||Rd(this.tooltipHTML)){var i=this.tooltip,n=this.tooltipDataItem;if(i){i.targetSprite=this;var r=this,s=this.tooltipColorSource;if((i.getStrokeFromObject||i.getFillFromObject)&&s&&(s.isTemplate?n&&If(n.sprites,(function(t){return t.clonedFrom!=s||(r=t,!1)})):r=s),i.getStrokeFromObject){for(var a=this.stroke,o=r;null!=o.parent&&(null==(a=o.stroke)&&(o=o.parent),null==a););a instanceof Jm?i.background.animate({property:"stroke",to:a},i.animationDuration):i.background.stroke=a}if(i.dataItem=n,i.label.populateStringFrom=this,i.getFillFromObject){var u=this.fill;for(o=r;null!=o.parent;)if(null==(u=o.fill)||u instanceof Jm&&null==u.rgb)o=o.parent;else if(null!=u)break;null==u&&(u=Ym("#000000")),u instanceof Jm&&i.visible?i.background.animate({property:"fill",to:u},i.animationDuration):i.background.fill=u,i.autoTextColor&&u instanceof Jm&&(i.label.fill=u.alternative)}var l="";if(this.tooltipHTML&&(i.html=this.tooltipHTML,l=this.tooltipHTML),this.tooltipText&&(i.text=this.tooltipText,l=this.tooltipText),this.updateTooltipPosition(t)){if(i.readerDescribedBy=this.uidAttr(),i.label.invalid&&i.label.validate(),null!=l&&""!=l&&""!=i.label.currentText){i&&!i.parent&&(i.parent=this.tooltipContainer);var h=i.defaultState.transitionDuration;return h<=0&&(h=1),i.show(h),i.currentSprite=this,!0}this.hideTooltip(0)}else this.hideTooltip(0)}}return!1},e.prototype.updateTooltipPosition=function(t){var e=this;if("pointer"!=this.tooltipPosition){var i=Iv({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(i)}if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=Yp().body.events.on("track",(function(t){return e.pointTooltipTo(Fv(t.point,e.svgContainer.SVGContainer,e.svgContainer.cssScale),!0)})),t)return this.pointTooltipTo(t,!0)},e.prototype.pointTooltipTo=function(t,e){var i=this.tooltip;if(i&&this.topParent){if(i.showInViewport)return i.pointTo(t,e),!0;if(Cf(t,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))return i.pointTo(t,e),!0}return!1},e.prototype.hideTooltip=function(t){if("always"!=this.showTooltipOn){var e=this.tooltip;e&&(e.targetSprite==this&&(e.targetSprite=void 0),e.hide(t),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(e.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(t){t=Ed(t),this.hoverable=!0,this.setPropertyValue("tooltipHTML",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(t){(t=Ed(t))&&(this.hoverable=!0),this.setPropertyValue("tooltipText",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipContainer",{get:function(){return this._tooltipContainer?this._tooltipContainer:this._parent?this._parent.tooltipContainer:void 0},set:function(t){this._tooltipContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(t){this.setPercentProperty("tooltipX",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysShowTooltip",{get:function(){return"always"==this.getPropertyValue("showTooltipOn")},set:function(t){(t=Pd(t))&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(t){this.setPropertyValue("showTooltipOn",t)&&("hit"==t&&(this.clickable=!0),this.tooltip&&("always"==t?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(t){this.setPropertyValue("tooltipPosition",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(t){this.setPercentProperty("tooltipY",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t,e=this.getPropertyValue("tooltipX");return Rd(e)||(e=Ad(50)),Gd(e)&&(t=e),e instanceof Id&&(t=this.maxLeftSelf+this._measuredWidthSelf*e.value-this.pixelPaddingLeft-this.ex),Gd(t)||(t=0),t},e.prototype.getTooltipY=function(){var t,e=this.getPropertyValue("tooltipY");return Rd(e)||(e=Ad(50)),Gd(e)&&(t=e),e instanceof Id&&(t=this.maxTopSelf+this._measuredHeightSelf*e.value-this.pixelPaddingTop-this.ey),Gd(t)||(t=0),t},e.prototype.raiseCriticalError=function(t,e){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",t).message:this.modal.content=t.message,e?this.modal.closable=!0:this.disabled=!0,this.modal.open()),console.log(t)},e.prototype.processConfig=function(e){e&&(Rd(e.tooltipColorSource)&&Vd(e.tooltipColorSource)&&this.map.hasKey(e.tooltipColorSource)&&(e.tooltipColorSource=this.map.getKey(e.tooltipColorSource)),Rd(e.cursorOverStyle)&&Vd(e.cursorOverStyle)&&(e.cursorOverStyle=this.getCursorStyle(e.cursorOverStyle)),Rd(e.cursorDowntyle)&&Vd(e.cursorDowntyle)&&(e.cursorDowntyle=this.getCursorStyle(e.cursorDowntyle)),Rd(e.cursorOptions)&&(Rd(e.cursorOptions.overStyle)&&Vd(e.cursorOptions.overStyle)&&(e.cursorOptions.overStyle=this.getCursorStyle(e.cursorOptions.overStyle)),Rd(e.cursorOptions.downStyle)&&Vd(e.cursorOptions.downStyle)&&(e.cursorOptions.downStyle=this.getCursorStyle(e.cursorOptions.downStyle)))),t.prototype.processConfig.call(this,e),this.processDelayedMap()},e.prototype.getCursorStyle=function(t){switch(t){case"grab":return fb.grab;case"grabbing":return fb.grabbing;case"pointer":return fb.pointer;case"horizontalResize":return fb.horizontalResize;case"verticalResize":return fb.verticalResize;default:return fb.default}},e.prototype.configOrder=function(e,i){return e==i?0:"tooltipColorSource"==e?1:"tooltipColorSource"==i?-1:t.prototype.configOrder.call(this,e,i)},Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:!!this._parent&&this._parent.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(t){t=Pd(t),this.setShowOnInit(t)},enumerable:!0,configurable:!0}),e.prototype.setShowOnInit=function(t){this.setPropertyValue("showOnInit",t)&&(this.isTemplate||(!t||this.inited||this.hidden?this._showOnInitDisposer&&this._showOnInitDisposer.dispose():(this._showOnInitDisposer=new zf([Om.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer))))},e.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},e.prototype.appear=function(){var t=this;if(this.appeared=!1,this.hidden||this.isHidden||this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var e=this.show();e&&!e.isFinished()?this.addDisposer(e.events.on("animationended",(function(){t.appeared=!0,t.dispatch("appeared")}))):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(e.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(t){t=Pd(t),this.setPropertyValue("hidden",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){var t=this;return this._plugins||(this._plugins=new Am,this._disposers.push(this._plugins.events.on("inserted",(function(e){e.newValue.target=t,e.newValue.init()}))),this._disposers.push(new km(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),e.prototype._systemUpdate=function(t){this.validate()},e.prototype._systemCheckIfValidate=function(){return!0},e.prototype._systemValidatePositions=function(){this.validatePosition()},e.prototype._systemValidateLayouts=function(){},e}(Qm);Om.registeredClasses.Sprite=Pb;var Lb=function(t){function e(){var e=t.call(this)||this;return e.className="Rectangle",e.element=e.paper.add("rect"),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this._positionPrecision;this.pixelPerfect&&(e=0);var i=Yd(this.innerWidth,e),n=Yd(this.innerHeight,e);this.element.attr({width:i,height:n})},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Rectangle=Lb;var Eb=function(t){function e(){var e=t.call(this)||this;return e._childrenByLayout=[],e._childrenDisposers=new wm,e.hasFocused=!1,e.setStateOnSprites=[],e.layoutInvalid=!1,e._absoluteWidth=0,e._absoluteHeight=0,e._shouldBeReady=[],e._tapToActivate=!1,e.tapTimeout=3e3,e.className="Container",e._element=e.paper.addGroup("g"),e.group.add(e.element),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("layout","absolute"),e.setPropertyValue("fixedWidthGrid",!1),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e._positionPrecision=4,e._disposers.push(new ym(e._childrenDisposers)),e.children.events.on("inserted",e.handleChildAdded,e),e.children.events.on("removed",e.handleChildRemoved,e),e.applyTheme(),e}return Sd(e,t),e.prototype.handleChildAdded=function(t){this.processChild(t.newValue)},e.prototype.processChild=function(t){try{this._childrenDisposers.insertKey(t.uid,new zf([t.events.on("transformed",this.handleChildTransform,this),t.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(t){}this.element&&this.element.add(t.group);t.parent=this,t.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:t}),this.invalidate()},e.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},e.prototype.handleChildRemoved=function(t){var e=t.oldValue;(this._childrenDisposers.removeKey(e.uid),this.element)&&this.element.removeElement(e.group);e.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:e})},e.prototype.handleChildTransform=function(t){t.target.isMeasured&&this.invalidateLayout()},e.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||(this.layoutInvalid=!0,Om.addToInvalidLayouts(this),Rb.requestFrame())},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.invalidateLayout()},e.prototype.deepInvalidate=function(){t.prototype.invalidate.call(this),kf(this._childrenByLayout,(function(t){t instanceof e?t.deepInvalidate():t.invalidate()})),this.invalidateLayout()},Object.defineProperty(e.prototype,"children",{get:function(){return this._children||(this._children=new Am),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.removeElement=function(){},e.prototype.sortChildren=function(){var t=this;if(this._childrenByLayout=[],"none"!=this.layout&&"absolute"!=this.layout&&this.layout){var e=[],i=[];cm(this.children.iterator(),(function(n){"horizontal"==t.layout||"grid"==t.layout?Gd(n.percentWidth)?i.push(n):e.push(n):"vertical"==t.layout&&Gd(n.percentHeight)?i.push(n):e.push(n)})),this._childrenByLayout=e.concat(i)}else this._childrenByLayout=this.children.values;this.calculateRelativeSize()},e.prototype.calculateRelativeSize=function(){var t=this,e=0,i=0;kf(this._childrenByLayout,(function(t){t.isMeasured&&(Gd(t.percentWidth)&&(e+=t.percentWidth),Gd(t.percentHeight)&&(i+=t.percentHeight))})),kf(this._childrenByLayout,(function(n){n.isMeasured&&("horizontal"==t.layout&&(Gd(n.percentWidth)&&(n.relativeWidth=n.percentWidth/e),Gd(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100)),"vertical"==t.layout&&(Gd(n.percentHeight)&&(n.relativeHeight=n.percentHeight/i),Gd(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100)),"grid"==t.layout&&(Gd(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100),Gd(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100))),"absolute"!=t.layout&&n.isMeasured||(Gd(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100),Gd(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100))}))},e.prototype.addChildren=function(){if(this.element){var t=Pf(this.children.values),e=t.map((function(t,e){return{idx:e,data:t}}));e.sort((function(t,e){var i=t.data.zIndex||0,n=e.data.zIndex||0;return i<n?-1:i>n?1:t.idx-e.idx})),t=e.map((function(t){return t.data}));var i=this.element,n=!0;if(i.node&&i.node.childNodes)for(var r=0,s=i.node.childNodes.length;r<s;r++)if(i.node.childNodes[r]!=t[r].group.node){n=!1;break}n||(kf(t,(function(t){t.group&&i.add(t.group)})),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},e.prototype.createChild=function(t){var e=new t;return e.parent=this,e},e.prototype.removeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.parent=void 0,this.children.removeValue(t)}},e.prototype.disposeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.dispose(),this.children.removeValue(t)}},Object.defineProperty(e.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(t){this._background&&this.background!=t&&this.removeDispose(this._background),t&&(this._background=t,this._disposers.push(t),this.processBackground())},enumerable:!0,configurable:!0}),e.prototype.handleGlobalScale=function(){t.prototype.handleGlobalScale.call(this),this.children.each((function(t){t.handleGlobalScale()}))},e.prototype.createBackground=function(){return new Lb},e.prototype.processBackground=function(){var t=this._background;t&&(t.isMeasured=!1,this._background.fill=(new Dp).getFor("background"),t.parent=this,t.isMeasured=!1,this.children.removeValue(t),this._disposers.push(t),this.group.addToBack(this._background.group))},e.prototype.validateLayout=function(){var t=this;Om.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var e=0,i=0,n=!0;this.children&&(this.sortChildren(),kf(this._childrenByLayout,(function(r){var s,a;if(Gd(r.relativeWidth)?(s=Yd(t._availableWidth*r.relativeWidth,2),"horizontal"==t.layout&&(s-=r.pixelMarginRight+r.pixelMarginLeft)):"horizontal"==t.layout&&r.invalid&&r.validate(),Gd(r.relativeHeight)?(a=Yd(t._availableHeight*r.relativeHeight,2),"vertical"==t.layout&&(a-=r.pixelMarginTop+r.pixelMarginBottom)):"vertical"==t.layout&&r.invalid&&r.validate(),0==r.invalid){if(Gd(r.relativeWidth)&&(r.maxWidth=s),Gd(r.relativeHeight)&&(r.maxHeight=a),r.isMeasured){"horizontal"==t.layout&&(Gd(r.percentWidth)||r.measuredWidth>0&&(t._availableWidth-=r.measuredWidth+r.pixelMarginLeft+r.pixelMarginRight)),"vertical"==t.layout&&(Gd(r.percentHeight)||r.measuredHeight>0&&(t._availableHeight-=r.measuredHeight+r.pixelMarginTop+r.pixelMarginBottom));var o=r.measuredWidth,u=r.measuredHeight;"none"!=r.align&&(o+=r.pixelMarginLeft+r.pixelMarginRight),"none"!=r.valign&&(u+=r.pixelMarginTop+r.pixelMarginBottom),e=Math.max(e,o),i=Math.max(i,u)}}else r.isMeasured&&(Gd(r.relativeWidth)&&r.maxWidth!=s&&(r.maxWidth=s,n=!1),Gd(r.relativeHeight)&&r.maxHeight!=a&&(r.maxHeight=a,n=!1))}))),this._absoluteWidth=e,this._absoluteHeight=i,n&&this.arrange()},e.prototype.arrange=function(){var t,e,i,n,r,s,a,o,u,l,h,c=this,d=this.children,f=0,m=0,v=nf(this.innerWidth,this._absoluteWidth),p=nf(this.innerHeight,this._absoluteHeight),b=this.pixelPaddingLeft,g=this.pixelPaddingRight,y=this.pixelPaddingTop,w=this.pixelPaddingBottom,S=0,x=0,C=0,O=0,M=[],T=[],k=this.maxWidth,I=this.maxHeight,A=this.minWidth,j=this.minHeight,F=Pf(d.values);if(this.reverseOrder&&F.reverse(),"grid"==this.layout){s=k,r=1;for(var D=0,P=F.length;D<P;D++){if((E=F[D]).isMeasured&&!E.disabled&&!E.__disabled){var L=E.measuredWidth;L<s&&(s=L),L>r&&(r=L)}}s=Xd(s,1,k),r=Xd(r,1,k),a=this.fixedWidthGrid?k/r:k/s,a=nf(1,Math.floor(a)),a=rf(this.maxColumns,a),M=this.getColumnWidth(F,a,r)}for(D=0,P=F.length;D<P;D++){var E;if(!(E=F[D]).isMeasured||E.disabled||E.__disabled)E.validatePosition();else{var N=void 0,R=void 0,B=E.pixelMarginLeft,_=E.pixelMarginRight,z=E.pixelMarginTop,V=E.pixelMarginBottom,G=E.measuredWidth,$=E.measuredHeight,W=void 0,q=void 0,H=void 0,U=void 0;switch(this.layout){case"none":break;case"absolute":switch(E.align){case"left":N=B-E.maxLeft;break;case"center":N=(v-G)/2-E.maxLeft;break;case"right":N=v-_-E.maxRight;break;default:E.x instanceof Id||(N=E.pixelX)}switch(E.valign){case"top":R=z-E.maxTop;break;case"middle":R=(p-$)/2-E.maxTop;break;case"bottom":R=p-V-E.maxBottom;break;default:E.y instanceof Id||(R=E.pixelY)}break;case"vertical":switch(E.align){case"left":N=B-E.maxLeft;break;case"center":N=(v-G)/2-E.maxLeft;break;case"right":N=v-_-E.maxRight;break;default:N=E.pixelX}x=(R=x+z-E.maxTop)+E.maxBottom+V;break;case"horizontal":switch(E.valign){case"top":R=z-E.maxTop;break;case"middle":R=(p-$)/2-E.maxTop;break;case"bottom":R=p-V-E.maxBottom;break;default:R=E.pixelY}S=(N=S+B-E.maxLeft)+E.maxRight+_;break;case"grid":switch(N=S+B-E.maxLeft,E.valign){case"top":R=x+z-E.maxTop;break;case"middle":R=x+(p-$)/2-E.maxTop;break;case"bottom":R=x+p-V-E.maxBottom;break;default:R=x-E.maxTop}S+=M[O],T[C]=nf(T[C],$);var K=M[++O];if(Gd(K)||(K=r),S>rf(this.innerWidth,k)-K+1&&O<a){a=O,S=0,x=0,C=0,O=0,M=this.getColumnWidth(F,a,r),T=[],D=-1;continue}O>=a&&(O=0,x+=T[C],C++,S=0)}"none"!==this.layout&&(E.moveTo({x:N,y:R}),W=N+E.maxLeft-B,q=N+E.maxRight+_,H=R+E.maxTop-z,U=R+E.maxBottom+V,(q>e||!Gd(e))&&(e=q),(W<t||!Gd(t))&&(t=W),(H<i||!Gd(i))&&(i=H),(U>n||!Gd(n))&&(n=U),(q>u||!Gd(u))&&(u=q),(W<o||!Gd(o))&&(o=W),(H<l||!Gd(l))&&(l=H),(U>h||!Gd(h))&&(h=h))}}if("none"==this.layout){var J=this.bbox;t=J.x,e=J.x+J.width,i=J.y,n=J.y+J.height}Gd(t)||(t=0,o=0),Gd(e)||(u=e=this._availableWidth),Gd(i)||(i=0,l=0),Gd(n)||(h=n=this._availableHeight),Gd(l)||(l=0),Gd(h)||(h=l),Gd(o)||(o=0),Gd(u)||(u=o),f=e-t,m=n-i,Gd(this.relativeWidth)&&(t=0,e=f=k-b-g),Gd(this.relativeHeight)&&(i=0,n=m=I-y-w),Gd(this._pixelWidth)&&(t=0,f=this._pixelWidth-b-g),Gd(A)&&f<A&&(t=0,f=this.minWidth-b-g),Gd(this._pixelHeight)&&(i=0,m=this._pixelHeight-y-w),Gd(j)&&m<j&&(i=0,m=j-y-w);var Y=u-o,Z=h-l;if("none"!=this.layout&&(this.contentAlign||this.contentValign)&&d.length>0){var X,Q,tt=f,et=m;tt<Y&&(tt=Y),et<Z&&(et=Z),"center"==this.contentAlign&&(X=(tt-Y)/2),"right"==this.contentAlign&&(X=tt-Y),"middle"==this.contentValign&&(Q=(et-Z)/2),"bottom"==this.contentValign&&(Q=et-Z),Gd(X)&&cm(d.iterator(),(function(t){var e=t.maxLeft,i=X;"horizontal"==c.layout&&(t.x=t.pixelX+i),"grid"==c.layout&&(t.x=t.pixelX+i),"vertical"==c.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e)),"absolute"==c.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e))})),Gd(Q)&&cm(d.iterator(),(function(t){var e=t.maxTop,i=Q;"horizontal"==c.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e)),"grid"==c.layout&&(i+=t.pixelMarginTop,t.y=i-e),"vertical"==c.layout&&(t.y=t.pixelY+i),"absolute"==c.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e))}))}var it=this.bbox;f=nf(f,A),m=nf(m,j),this.contentWidth=f,this.contentHeight=m,f=rf(f,k),m=rf(m,I),this._bbox={x:t,y:i,width:f,height:m};var nt=this.maxLeft,rt=this.maxTop,st=this.maxBottom,at=this.maxRight;if(this.measure(),(nt!=this.maxLeft||at!=this.maxRight||rt!=this.maxTop||st!=this.maxBottom)&&this.events.isEnabled("transformed")){var ot={type:"transformed",target:this};it&&(ot.dummyData=it.width+" "+f+"  "+it.height+" "+m),this.events.dispatchImmediately("transformed",ot)}this.dispatchImmediately("layoutvalidated")},e.prototype.updateCenter=function(){t.prototype.updateCenter.call(this),this.updateBackground()},e.prototype.updateBackground=function(){var t=this._background;t&&(t.x=this.maxLeft,t.y=this.maxTop,t.width=this.maxRight-this.maxLeft,t.height=this.maxBottom-this.maxTop)},e.prototype.getColumnWidth=function(t,e,i){var n=this,r=[],s=0;return kf(t,(function(t){!t.isMeasured||t.disabled||t.__disabled||(n.fixedWidthGrid?r[s]=i:r[s]=nf(r[s],t.measuredWidth+t.pixelMarginRight+t.pixelMarginLeft),++s==e&&(s=0))})),r},Object.defineProperty(e.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(t){this.setPropertyValue("layout",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(t){this.setPropertyValue("contentValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(t){this.setPropertyValue("contentAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(t){this.setPropertyValue("fixedWidthGrid",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(t){this.setPropertyValue("maxColumns",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(t){this.setPropertyValue("reverseOrder",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(t){this.setPropertyValue("setStateOnChildren",t,!0)},enumerable:!0,configurable:!0}),e.prototype.fitsToBounds=function(t){var e=t.x,i=t.y,n=.5;return e>=-.5&&e<=this.pixelWidth+n&&i>=-.5&&i<=this.pixelHeight+n},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.layout=e.layout,this.setStateOnChildren=e.setStateOnChildren,e._background&&(this.background=e._background.clone(),this.background.copyFrom(e._background)),cm(e.children.iterator(),(function(t){t.shouldClone&&(t.clone().parent=i)}))},Object.defineProperty(e.prototype,"preloader",{get:function(){var t=this._preloader;return t||(this.parent?this.parent.preloader:void 0)},set:function(t){this._preloader&&this.removeDispose(this._preloader),this._preloader=t,t&&(t.parent=this.tooltipContainer,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(e){var i=this,n=t.prototype.setPaper.call(this,e);return n&&(this._background&&(this._background.paper=e,this._background.topParent=this.topParent),this.children.each((function(t){t.setPaper(e),t.topParent=i.topParent}))),n},e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),Om.removeFromInvalidLayouts(this)},e.prototype.setDataItem=function(e){this._dataItem!=e&&(cm(this.children.iterator(),(function(t){t.dataItem=e})),this._background&&(this._background.dataItem=e)),t.prototype.setDataItem.call(this,e)},e.prototype.measureElement=function(){this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||this.validateLayout()},Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(t){this.setPropertyValue("fontFamily",t,!0)&&(this.setSVGAttribute({"font-family":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(t){this.setPropertyValue("fontSize",t,!0)&&(this.setSVGAttribute({"font-size":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),e.prototype.invalidateLabels=function(){this.children.each((function(t){t.hardInvalidate?(t.hardInvalidate(),t.events.once("validated",t.handleValidate,t,!1)):t instanceof e&&t.invalidateLabels()}))},Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(t){this.setPropertyValue("fontWeight",t),this.setSVGAttribute({"font-weight":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(t){this.setPropertyValue("textDecoration",t),this.setSVGAttribute({"text-decoration":t})},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),t.prototype.dispose.call(this)},e.prototype.setState=function(e,i,n){var r=e;return e instanceof ep&&(r=e.name),this.setStateOnChildren&&cm(this.children.iterator(),(function(t){t.setState(r,i,n),"active"!=r&&(t.isActive=!1)})),this._background&&this._background.setState(r),this.setStateOnSprites.length&&kf(this.setStateOnSprites,(function(t){t.setState(r,i,n)})),t.prototype.setState.call(this,e,i,n)},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),this._background&&(this._background.isActive=e)},e.prototype.dispatchReady=function(){var e=this;if(!this.isReady()&&!this.isDisposed()){var i=!0;hm(this.children.iterator(),(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)})),If(this._shouldBeReady,(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)})),i?t.prototype.dispatchReady.call(this):Om.events.once("exitframe",(function(){e.dispatchReady(),Rb.requestFrame()}),void 0,!1)}},e.prototype._systemUpdate=function(e){this.children.each((function(t){t.invalid&&(t._systemCheckIfValidate()?t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid?e.push(t):t.validate():e.push(t))})),t.prototype._systemUpdate.call(this,e)},e.prototype._systemValidatePositions=function(){this.children.each((function(t){t.positionInvalid&&t.validatePosition()})),t.prototype._systemValidatePositions.call(this)},e.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(e.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(t){this._tapToActivate!=t&&this.setTapToActivate(t)},enumerable:!0,configurable:!0}),e.prototype.setTapToActivate=function(t){var e=this;this._tapToActivate=t,this.interactions.isTouchProtected=t,t&&this.interactions.setEventDisposer("container-tapToActivate",t,(function(){return new zf([e.events.on("hit",e.handleTapToActivate,e,!1),e.events.on("down",e.initTapTimeout,e,!1),e.events.on("track",e.initTapTimeout,e,!1),Yp().body.events.on("down",(function(t){Yp().isLocalElement(t.pointer,e.paper.svg,e.uid)||e.handleTapToActivateDeactivation()}),e,!1)])})),Yp()},e.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},e.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},e.prototype.initTapTimeout=function(){var t=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout((function(){t.handleTapToActivateDeactivation()}),this.tapTimeout))},e.prototype.moveHtmlContainer=function(t){var e=pp(t);if(e){this.htmlContainer=e;var i=this.svgContainer;i.htmlElement=e,i.htmlElement.appendChild(i.SVGContainer),i.initSensor(),i.measure()}else Vd(t)&&""!=t&&Rb.log("html container '"+t+"' not found")},e.prototype.hasLicense=function(){if(rp.commercialLicense)return!0;for(var t=0;t<rp.licenses.length;t++)if(rp.licenses[t].match(/^CH.{5,}/i))return!0;return!1},e}(Pb);Om.registeredClasses.Container=Eb;var Nb=function(){function t(){this._isPaused=!1,this.animations=[],this.uid=Om.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return t.prototype.reportTime=function(t,e){e&&(this.time=Date.now())},t.prototype.update=function(){var t=this;if(!this._isPaused){this._frameRequested=!1;var e=Date.now();Om.dispatchImmediately("enterframe");for(var i in Om.invalidDatas)if(em(Om.invalidDatas,i)){for(var n=Om.invalidDatas[i];n.length>0;){var r=(s=n[0]).dataProvider;if(s.isDisposed())Af(n,s);else if(r&&r.dataInvalid)try{if(r.validateData(),r.dataValidationProgress<1)break}catch(t){Af(n,r),r.raiseCriticalError(t)}else try{if(s.validateData(),s.dataValidationProgress<1)break}catch(t){Af(n,s),s.raiseCriticalError(t)}}if(Date.now()-e>this.updateStepDuration)break}for(;Om.invalidRawDatas.length>0;){if((s=Om.invalidRawDatas[0]).isDisposed())Af(Om.invalidRawDatas,s);else try{s.validateRawData()}catch(t){Af(Om.invalidRawDatas,s),s.raiseCriticalError(t)}}for(;Om.invalidDataItems.length>0;){r=(s=Om.invalidDataItems[0]).dataProvider;if(s.isDisposed()||s.dataInvalid||r&&r.dataInvalid);else try{s.validateDataItems()}catch(t){Af(Om.invalidDataItems,s),s.raiseCriticalError(t)}Af(Om.invalidDataItems,s)}for(;Om.invalidDataRange.length>0;){var s;r=(s=Om.invalidDataRange[0]).dataProvider;if(s.isDisposed()||s.dataInvalid||r&&r.dataInvalid);else try{s.validateDataRange(),s.skipRangeEvent||s.dispatchImmediately("datarangechanged"),s.skipRangeEvent=!1}catch(t){Af(Om.invalidDataRange,s),s.raiseCriticalError(t)}Af(Om.invalidDataRange,s)}var a=[];nm(Om.invalidLayouts,(function(e){t.validateLayouts(e)})),nm(Om.invalidPositions,(function(e){t.validatePositions(e)}));var o=!1;if(e=Date.now(),nm(Om.invalidSprites,(function(i,n){for(var r=0;n.length>0;){if(t.validateLayouts(i),t.validatePositions(i),5==++r){if(Date.now()-e>t.updateStepDuration)break;r=0}var s=n[n.length-1];if(s&&!s.isDisposed()){if(s._systemCheckIfValidate())if(t.checkIfValidate2(s))try{s._systemUpdate(a)}catch(t){s.invalid=!1,Af(n,s),s.raiseCriticalError(t)}else a.push(s);else a.push(s);s.invalid=!1}Af(n,s)}Om.invalidSprites[i]=Om.invalidSprites[i].concat(a)})),nm(Om.invalidSprites,(function(t,e){e.length>0&&(o=!0)})),nm(Om.invalidDatas,(function(t,e){e.length>0&&(o=!0)})),kf(Pf(this.animations),(function(t){t.update()})),nm(Om.invalidLayouts,(function(e){t.validateLayouts(e)})),nm(Om.invalidPositions,(function(e){t.validatePositions(e)})),function(){for(var t=Date.now(),e=Uf.length,i=0;i<e;++i)Uf.shift()(t)}(),nm(Om.invalidLayouts,(function(e){t.validateLayouts(e)})),nm(Om.invalidPositions,(function(e){t.validatePositions(e)})),Om.dispatchImmediately("exitframe"),(o||this.animations.length>0||[].length>0)&&this.requestFrame(),this.updateStepDuration<200){var u=!0;nm(Om.invalidDatas,(function(t,e){e.length>0&&(u=!1)})),nm(Om.invalidSprites,(function(t,e){e.length>0&&(u=!1)})),u&&(this.updateStepDuration=200)}}},t.prototype.checkIfValidate2=function(t){return!(t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid&&!t.dataItem.component.isTemplate)},t.prototype.requestFrame=function(){var t=this;this._frameRequested||(Kf((function(){t.update()})),this._frameRequested=!0)},t.prototype.softInvalidate=function(t){var e=this;t.children.each((function(t){t instanceof Eb&&e.softInvalidate(t),t.measureFailed&&(Mm(t,"Label")?t.hardInvalidate():t.invalidate(),t.measureFailed=!1)}))},t.prototype.validatePositions=function(t){for(var e=Om.invalidPositions[t];e.length>0;){var i=e[e.length-1];if(i.isDisposed())Af(e,i);else try{i._systemValidatePositions()}catch(t){i.positionInvalid=!1,Af(e,i),i.raiseCriticalError(t)}}},t.prototype.validateLayouts=function(t){for(var e=Om.invalidLayouts[t];e.length>0;){var i=e[e.length-1];if(i.isDisposed())Af(e,i);else try{i.children.each((function(t){t._systemValidateLayouts()})),i.validateLayout()}catch(t){i.layoutInvalid=!1,Af(e,i),i.raiseCriticalError(t)}}},t.prototype.log=function(t){!function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console&&console.log.apply(console,kd(t))}(t)},Object.defineProperty(t.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t,t||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),t.VERSION="4.10.33",t}(),Rb=new Nb,Bb=function(){function t(){}return t.prototype.parse=function(t){return[]},Object.defineProperty(t.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToNumber=function(t,e){return-1!==this.options.numberFields.indexOf(t)?yv(e):e},Object.defineProperty(t.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToDate=function(t,e){return-1!==this.options.dateFields.indexOf(t)?this.options.dateFormatter.parse(e,this.dateFormat):e},t.prototype.maybeToEmpty=function(t){return Rd(t)&&""!=t||!Rd(this.options.emptyAs)?t:this.options.emptyAs},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new yb,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),t}(),_b=[",",";","\t"],zb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="text/csv",e.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},e}return Sd(e,t),e.isCSV=function(t){return!!e.getDelimiterFromData(t)},e.getDelimiterFromData=function(t){var e,i=t.split("\n"),n=i.length;return kf(_b,(function(t){for(var r=0,s=0,a=0;a<n;++a){if(!((r=i[a].split(t).length)>1)){s=0;break}if(0===s)s=r;else if(r!=s){s=0;break}}s&&(e=t)})),e},e.prototype.parse=function(t){this.options.delimiter||(this.options.delimiter=e.getDelimiterFromData(t));var i,n,r,s=this.CSVToArray(t,this.options.delimiter),a=Rd(this.options.emptyAs),o=this.parsableNumbers,u=this.parsableDates,l=[],h=[];for(n=0;n<this.options.skipRows;n++)s.shift();if(this.options.useColumnNames){h=s.shift();for(var c=0;c<h.length;c++)""===(i=Rd(h[c])?h[c].replace(/^\s+|\s+$/gm,""):"")&&(i="col"+c),h[c]=i}for(;r=this.options.reverse?s.pop():s.shift();)if(!this.options.skipEmpty||1!==r.length||""!==r[0]){var d={};for(n=0;n<r.length;n++)d[i=void 0===h[n]?"col"+n:h[n]]=""===r[n]?this.options.emptyAs:r[n],a&&(d[i]=this.maybeToEmpty(d[i])),o&&(d[i]=this.maybeToNumber(i,d[i])),u&&(d[i]=this.maybeToDate(i,d[i]));l.push(d)}return l},e.prototype.CSVToArray=function(t,e){e=e||",";for(var i=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),n=[[]],r=null;r=i.exec(t);){var s=r[1];s.length&&s!==e&&n.push([]);var a=void 0;a=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],n[n.length-1].push(a)}return n},e}(Bb),Vb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="application/json",e.options={},e}return Sd(e,t),e.isJSON=function(t){try{return JSON.parse(t),!0}catch(t){return!1}},e.prototype.parse=function(t){var e,i=this;try{Rd(JSON)&&(e=JSON.parse(t))}catch(t){return}var n=Rd(this.options.emptyAs),r=this.parsableNumbers,s=this.parsableDates;if(Array.isArray(e)&&(r||s||n))for(var a=function(t,a){var o=e[t];nm(o,(function(t,e){n&&(o[t]=i.maybeToEmpty(o[t])),r&&(o[t]=i.maybeToNumber(t,o[t])),s&&(o[t]=i.maybeToDate(t,o[t]))}))},o=0,u=e.length;o<u;o++)a(o);return e},e}(Bb),Gb=function(){function t(){this.adapter=new zm(this)}return t.prototype.load=function(t){var e=Tf(Array.isArray(t)?t:[t],(function(t){return t.dispatchImmediately("started"),t.dispatchImmediately("loadstarted"),Mb(t.url,t,t.requestOptions)}));Promise.all(e).then((function(t){kf(t,(function(t){var e=t.target;e.dispatchImmediately("loadended"),t.error?e.events.isEnabled("error")&&e.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:e.language.translate("Unable to load file: %1",null,e.url),target:e}):e.processData(t.response,t.type),e.dispatchImmediately("ended")}))})).catch((function(t){t.target&&(t.target.dispatchImmediately("loadended"),t.target.events.isEnabled("error")&&t.target.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:t.target.language.translate("Unable to load file: %1",null,t.target.url),target:t.target}),t.target.dispatchImmediately("ended"))}))},t.prototype.getParserByType=function(t){var e=this.adapter.apply("getParserByType",{parser:null,type:t}).parser;return e||("csv"==t||"text/csv"==t||"application/vnd.ms-excel"==t?new zb:"json"==t||"application/json"==t?new Vb:void 0)},t.prototype.getParserByData=function(t,e){var i=this.adapter.apply("getParserByData",{parser:null,data:t,type:e}).parser;if(!i){if(i=this.getParserByType(e))return i;if(Vb.isJSON(t))return this.getParserByType("json");if(zb.isCSV(t))return this.getParserByType("csv")}return i},t}(),$b=new Gb,Wb=function(t){function e(e,i){var n=t.call(this)||this;return n.adapter=new zm(n),n._requestOptions={},n._incremental=!1,n._incrementalParams={},n._keepCount=!1,n._updateCurrentData=!1,n.showPreloader=!0,n.className="DataSource",e&&(n.url=e),i&&(n.parser="string"==typeof i?$b.getParserByType(i):i),n}return Sd(e,t),e.prototype.processData=function(t,e){if(this.dispatchImmediately("parsestarted"),this.parser||(this.parser=$b.getParserByData(t,e),this.parser)){if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",t))),!Rd(this.data)&&this.events.isEnabled("parseerror")){var i={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",i)}this.dispatchImmediately("parseended"),Rd(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date}else{if(this.events.isEnabled("parseerror")){var n={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",n)}this.dispatchImmediately("parseended")}},Object.defineProperty(e.prototype,"url",{get:function(){var t=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(t=this.addUrlParams(t,this.incrementalParams)),this.adapter.apply("url",t)},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(t){this._requestOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new Vb),this.adapter.apply("parser",this._parser)},set:function(t){this._parser=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(t){var e=this;this._reloadFrequency!=t&&(this._reloadFrequency=t,t?Rd(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",(function(t){e._reloadTimeout=setTimeout((function(){e.load()}),e.reloadFrequency)}))):Rd(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(t){this._incremental=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(t){this._incrementalParams=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(t){this._keepCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(t){this._updateCurrentData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new vb,this.language)},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new yb,this.dateFormatter)},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),e.prototype.timestampUrl=function(t){var e={};return e[(new Date).getTime().toString()]="",this.addUrlParams(t,e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),Rd(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},e.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),$b.load(this))},e.prototype.addUrlParams=function(t,e){var i=t.match(/\?/)?"&":"?",n=[];return nm(e,(function(t,e){""!=e?n.push(t+"="+encodeURIComponent(e)):n.push(t)})),n.length?t+i+n.join("&"):t},e.prototype.processConfig=function(e){Om.registeredClasses.json=Vb,Om.registeredClasses.JSONParser=Vb,Om.registeredClasses.csv=zb,Om.registeredClasses.CSVParser=zb,t.prototype.processConfig.call(this,e)},e}(Qm),qb=function(t){function e(){var e=t.call(this)||this;return e._rules=new Am,e._appliedRules={},e._appliedTargets=[],e._useDefault=!0,e.adapter=new zm(e),e._enabled=!1,e._responsiveDisposers=[],e._noStates=[],e.className="Responsive",e.rules.events.on("inserted",(function(){e.checkRules()}),!0),e.rules.events.on("removed",(function(){e.checkRules()}),!0),e._disposers.push(e.rules.events),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"component",{get:function(){return this._component},set:function(t){var e=this;t!=this._component&&(this.disposeResponsiveHandlers(),this._component=t,this._responsiveDisposers.push(Bd(this.component).events.on("sizechanged",(function(){e.checkRules()}),this)),this._responsiveDisposers.push(Bd(this.component).events.once("datavalidated",(function(){e._component.isReady()&&e.checkRules(!0)}),this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(t){this._enabled!=t&&(this._enabled=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(t){this._useDefault!=t&&(this._useDefault=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(t){this._rules=t,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",Hb)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allRules",{get:function(){var t=new Am;return this.useDefault&&t.copyFrom(this.defaultRules),t.copyFrom(this.rules),this.adapter.apply("allRules",t)},enumerable:!0,configurable:!0}),e.prototype.isApplied=function(t){var e=this._appliedRules[t];return!!Rd(e)&&e},e.prototype.checkRules=function(t){var e=this;void 0===t&&(t=!1);var i=this.allRules;if(i&&0!=i.length){var n=!1,r=Bd(this.component);if(0!=r.pixelWidth&&0!=r.pixelHeight&&(cm(i.iterator(),(function(t){t.id||(t.id=Om.getUniqueId());var i=t.relevant(r);(i&&!e.isApplied(t.id)||!i&&e.isApplied(t.id))&&(n=!0),e._appliedRules[t.id]=i})),t&&(n=!0),n)){if(!this.component.isReady())return r.hidden=!0,void r.events.once("ready",(function(t){t.target.show(0),e._applyRules()}));this.dispatchImmediately("ruleschanged"),this._applyRules()}}},e.prototype._applyRules=function(){var t=this;this._timeout&&this._timeout.dispose(),this._timeout=this.setTimeout((function(){t.applyRules()}),10)},e.prototype.applyRules=function(t){var e,i,n,r,s=this,a=Rd(t)?t:Bd(this.component),o=!1;if(this.enabled){var u=!1;cm(this.allRules.iterator(),(function(t){var e=s.getState(t,a);e&&(o||(-1!==Of(s._appliedTargets,a.uid)&&a.setState(s.getDefaultState(a),0),o=!0),s.isApplied(Bd(t.id))&&(e.transitionDuration=0,s.setTargetState(a,e),s.dispatchImmediately("ruleapplied",{rule:t}),u=!0))})),u?(e=this._appliedTargets,i=a.uid,-1!==(r=e.indexOf(i))&&e.splice(r,1),Gd(n)?e.splice(n,0,i):e.push(i)):Af(this._appliedTargets,a.uid)}a.children&&cm(a.children.iterator(),(function(t){s.applyRules(t)}))},e.prototype.getState=function(t,e){var i="responsive-"+t.id,n=e.uid+"_"+i;if(-1===Of(this._noStates,n)){if(e.states.hasKey(i))return e.states.getKey(i);var r=t.state(e,i);return r||this._noStates.push(n),r}},e.prototype.getDefaultState=function(t){return t.states.hasKey("responsive-default")?t.states.getKey("responsive-default"):t.states.create("responsive-default")},e.prototype.setTargetState=function(t,e){var i=this,n=this.getDefaultState(t);nm(e.properties,(function(e,r){Rd(n.properties[e])||(n.properties[e]=i.getValue(t,e))})),t.setState(e)},e.prototype.getValue=function(t,e){var i=t.getPropertyValue(e);return!Rd(i)&&Rd(t[e])&&(i=t[e]),i},e.prototype.dispose=function(){this.disposeResponsiveHandlers(),t.prototype.dispose.call(this)},e.prototype.disposeResponsiveHandlers=function(){for(var t=this._responsiveDisposers.pop();t;)t.dispose(),t=this._responsiveDisposers.pop()},e}(Qm),Hb=new Am;Hb.events.on("inserted",(function(t){t.newValue.id=Om.getUniqueId()}));var Ub=function(){function t(){}return t.widthXXS=function(e){return e.pixelWidth<=t.XXS},t.widthXS=function(e){return e.pixelWidth<=t.XS},t.widthS=function(e){return e.pixelWidth<=t.S},t.widthM=function(e){return e.pixelWidth<=t.M},t.widthL=function(e){return e.pixelWidth<=t.L},t.widthXL=function(e){return e.pixelWidth<=t.XL},t.widthXXL=function(e){return e.pixelWidth<=t.XXL},t.heightXXS=function(e){return e.pixelHeight<=t.XXS},t.heightXS=function(e){return e.pixelHeight<=t.XS},t.heightS=function(e){return e.pixelHeight<=t.S},t.heightM=function(e){return e.pixelHeight<=t.M},t.heightL=function(e){return e.pixelHeight<=t.L},t.heightXL=function(e){return e.pixelHeight<=t.XL},t.heightXXL=function(e){return e.pixelHeight<=t.XXL},t.isXXS=function(e){return e.pixelWidth<=t.XXS&&e.pixelHeight<=t.XXS},t.isXS=function(e){return e.pixelWidth<=t.XS&&e.pixelHeight<=t.XS},t.isS=function(e){return e.pixelWidth<=t.S&&e.pixelHeight<=t.S},t.isM=function(e){return e.pixelWidth<=t.M&&e.pixelHeight<=t.M},t.isL=function(e){return e.pixelWidth<=t.L&&e.pixelHeight<=t.L},t.isXL=function(e){return e.pixelWidth<=t.XL&&e.pixelHeight<=t.XL},t.isXXL=function(e){return e.pixelWidth<=t.XXL&&e.pixelHeight<=t.XXL},t.maybeXXS=function(e){return e.pixelWidth<=t.XXS||e.pixelHeight<=t.XXS},t.maybeXS=function(e){return e.pixelWidth<=t.XS||e.pixelHeight<=t.XS},t.maybeS=function(e){return e.pixelWidth<=t.S||e.pixelHeight<=t.S},t.maybeM=function(e){return e.pixelWidth<=t.M||e.pixelHeight<=t.M},t.maybeL=function(e){return e.pixelWidth<=t.L||e.pixelHeight<=t.L},t.maybeXL=function(e){return e.pixelWidth<=t.XL||e.pixelHeight<=t.XL},t.maybeXXL=function(e){return e.pixelWidth<=t.XXL||e.pixelHeight<=t.XXL},t.XXS=100,t.XS=200,t.S=300,t.M=400,t.L=600,t.XL=800,t.XXL=1e3,t}(),Kb=function(t){function e(){var e=t.call(this)||this;return e._disabled=!1,e.hasProperties=!1,e.values={},e.categories={},e.dates={},e.locations={},e.workingLocations={},e.properties={},e.sprites=[],e.isTemplate=!1,e._index=null,e._visible=!0,e._hidden=!1,e._ignoreMinMax=!1,e.hasChildren={},e.isHiding=!1,e._valueAnimations={},e._locationAnimations={},e.className="DataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new zm(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.component&&null!=this._index?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new hp(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!this._hidden&&this._visible},set:function(t){t&&(this.hidden=!1),this._visible!=t&&this.setVisibility(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden!=t&&(this._hidden=t,t?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,kf(this.sprites,(function(e){e.__disabled=t}))},enumerable:!0,configurable:!0}),e.prototype.setVisibility=function(t,e){if(kf(this.sprites,(function(e){t?e.visible=e.defaultState.properties.visible:e.hiddenState?e.visible=e.hiddenState.properties.visible:e.visible=!1})),this._visible=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var i={type:"visibilitychanged",target:this,visible:t};this.events.dispatchImmediately("visibilitychanged",i)}},e.prototype.show=function(t,e,i){var n,r=this;if(!this.hidden)return this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer),i&&kf(i,(function(i){n=r.setWorkingValue(i,r.values[i].value,t,e)})),kf(this.sprites,(function(i){var n=i.show(t);null==n||n.isFinished()||(r._disposers.push(n),null!=e&&e>0&&n.delay(e))})),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),kf(this.sprites,(function(t){t.dispose()})),this.sprites=[]},e.prototype.hide=function(t,e,i,n){var r=this;if(this.isHiding=!0,kf(this.sprites,(function(i){var n=i.hide(t);null==n||n.isFinished()||(r._disposers.push(n),null!=e&&e>0&&n.delay(e))})),Gd(i)&&n){var s;if(kf(n,(function(n){var a=r.setWorkingValue(n,i,t,e);a&&(s=a)})),s&&!s.isFinished())return this._hideDisposer=s.events.on("animationended",(function(){r.setVisibility(!1,!0),r.isHiding=!1})),this._disposers.push(this._hideDisposer),s;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},e.prototype.getDuration=function(t){if(!Gd(t)){var e=this.component;e&&(t=e.interpolationDuration)}if(null!=t)return this._adapterO?this._adapterO.apply("duration",t):t},e.prototype.getValue=function(t,e){if(t&&this.component){e||(e=this.component.dataFields[t+"Show"])||(e="value");var i=this.values[t][e];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:i,field:t}).value:i}},e.prototype.getWorkingValue=function(t){if(t&&this.component){var e=this.component.dataFields[t+"Show"];return e||(e="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[t][e],field:t}).workingValue:this.values[t][e]}},e.prototype.getActualWorkingValue=function(t){return this.values[t].workingValue},e.prototype.setValue=function(t,e,i,n){var r=this.values[t].value,s=this.getDuration(i);if(r!==(e=Ld(e))){if(this.values[t].value=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var a={type:"valuechanged",target:this,property:t};this.events.dispatchImmediately("valuechanged",a)}this.component&&this.component.handleDataItemValueChange(this,t)}this.setWorkingValue(t,e,s,n)},e.prototype.setCalculatedValue=function(t,e,i){if(this.values[t][i]!==e&&Gd(e)){if(this.values[t][i]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var n={type:"calculatedvaluechanged",target:this,property:t};this.events.dispatchImmediately("calculatedvaluechanged",n)}this.component&&this.component.handleDataItemCalculatedValueChange(this,t)}},e.prototype.setWorkingValue=function(t,e,i,n){if(Gd(this.values[t].value)){var r=this.getDuration(i),s=this.values[t].workingValue;if(null!=r&&r>0&&Gd(s)&&this.component){if(s!=e){var a=this.animate({childObject:this.values[t],property:"workingValue",from:s,to:e,dummyData:t},r,this.component.interpolationEasing);return null!=n&&a.delay(n),a.events.on("animationstarted",this.handleInterpolationProgress,this),a.events.on("animationprogress",this.handleInterpolationProgress,this),a.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[t]=a,a}(o=this._valueAnimations[t])&&o.stop(),this.values[t].workingValue=e}else{var o;if((o=this._valueAnimations[t])&&o.stop(),this.values[t].workingValue=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var u={type:"workingvaluechanged",target:this,property:t};this.events.dispatchImmediately("workingvaluechanged",u)}this.component&&this.component.handleDataItemWorkingValueChange(this,t)}}},e.prototype.setLocation=function(t,e,i,n){if(this.locations[t]!==e){if(this.locations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var r={type:"locationchanged",target:this,property:t};this.events.dispatchImmediately("locationchanged",r)}this.component&&this.component.handleDataItemValueChange(this,t),this.setWorkingLocation(t,e,i,n)}},e.prototype.setWorkingLocation=function(t,e,i,n){var r=this.getDuration(i),s=this.workingLocations[t];if(null!=r&&r>0&&Gd(s)&&this.component){if(s!=e){var a=this.animate({childObject:this.workingLocations,property:t,from:s,to:e,dummyData:t},r,this.component.interpolationEasing);return null!=n&&a.delay(n),a.events.on("animationstarted",this.handleInterpolationProgress,this),a.events.on("animationprogress",this.handleInterpolationProgress,this),a.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[t]=a,a}(o=this._locationAnimations[t])&&o.stop(),this.workingLocations[t]=e}else{var o;if((o=this._locationAnimations[t])&&o.stop(),this.workingLocations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var u={type:"workinglocationchanged",target:this,property:t};this.events.dispatchImmediately("workinglocationchanged",u)}this.component&&this.component.handleDataItemWorkingLocationChange(this,t)}},e.prototype.setDate=function(t,e,i){!zd(e)&&this.component&&(e=this.component.dateFormatter.parse(e)),this.dates[t]!==e&&(this.dates[t]=e,this.setValue(t,e.getTime(),i))},e.prototype.getDate=function(t){return this._adapterO?this._adapterO.apply("date",{date:this.dates[t],field:t}).date:this.dates[t]},e.prototype.setProperty=function(t,e){if(this.properties[t]!==e){if(this.hasProperties=!0,this.properties[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var i={type:"propertychanged",target:this,property:t,value:e};this.events.dispatchImmediately("propertychanged",i)}this.component&&this.component.handleDataItemPropertyChange(this,t)}},e.prototype.setCategory=function(t,e){Vd(e)||(e=Dd(e)),this.categories[t]!==e&&(this.categories[t]=e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.dataContext&&(this.dataContext=function(t,e){return nm(t,(function(t,i){e[t]=i})),e}(e.dataContext,{})),tv(e.locations,this.locations),e._adapterO&&this.adapter.copyFrom(e._adapterO),this.component=e.component},Object.defineProperty(e.prototype,"opacity",{set:function(t){kf(this.sprites,(function(e){e.opacity=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){if(this._ignoreMinMax=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var e={type:"propertychanged",target:this,property:"ignoreMinMax",value:t};this.events.dispatchImmediately("propertychanged",e)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),e.prototype.animate=function(t,e,i){return new cp(this,t,e,i).start()},e.prototype.handleInterpolationProgress=function(t){var e=t.target.animationOptions[0];if(e){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var i={type:"workingvaluechanged",target:this,property:e.dummyData};this.events.dispatchImmediately("workingvaluechanged",i)}this.component&&this.component.handleDataItemWorkingValueChange(this,e.dummyData)}},e.prototype.hasValue=function(t){for(var e=0,i=t.length;e<i;e++){var n=this.values[t[e]];if(!n||!Rd(n.value))return!1}return!0},Object.defineProperty(e.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataContext",{get:function(){return this._dataContext},set:function(t){this._dataContext=t},enumerable:!0,configurable:!0}),e.prototype.addSprite=function(t){t.dataItem&&t.dataItem!=this&&Af(t.dataItem.sprites,t),this.visible||t.hide(0),this.isHiding&&t.hide(),this.sprites.push(t),t.dataItem=this},e}(Qm),Jb=function(t){function e(){var e=t.call(this)||this;return e.dataFields={},e._dataSources={},e._parseDataFrom=0,e._dataDisposers=[],e._currentDataSetId="",e._start=0,e._end=1,e.skipRangeEvent=!1,e.rangeChangeDuration=0,e.rangeChangeEasing=Kv,e.parsingStepDuration=50,e.dataInvalid=!1,e.rawDataInvalid=!1,e.dataRangeInvalid=!1,e.dataItemsInvalid=!1,e.interpolationDuration=0,e.interpolationEasing=Kv,e.sequencedInterpolation=!0,e.sequencedInterpolationDelay=0,e.dataValidationProgress=0,e._addAllDataItems=!0,e._usesData=!0,e.className="Component",e.minZoomCount=1,e.maxZoomCount=0,e._dataItems=new Pm(e.createDataItem()),e._dataItems.events.on("inserted",e.handleDataItemAdded,e,!1),e._dataItems.events.on("removed",e.handleDataItemRemoved,e,!1),e._disposers.push(new km(e._dataItems)),e._disposers.push(e._dataItems.template),e.invalidateData(),e.dataUsers.events.on("inserted",e.handleDataUserAdded,e,!1),e._disposers.push(new zf(e._dataDisposers)),e._start=0,e._end=1,e.maxZoomDeclination=1,e.applyTheme(),e}return Sd(e,t),e.prototype.createDataItem=function(){return new Kb},e.prototype.handleDataUserAdded=function(t){t.newValue.dataProvider=this},e.prototype.handleDataItemValueChange=function(t,e){this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){},e.prototype.handleDataItemWorkingLocationChange=function(t,e){},e.prototype.handleDataItemCalculatedValueChange=function(t,e){},e.prototype.handleDataItemPropertyChange=function(t,e){},e.prototype.processDataItem=function(t,e){var i=this;if(t){e||(e={}),t.dataContext=e;var n=!1;nm(this.dataFields,(function(r,s){var a=r,o=e[s];if(i._adapterO&&i._adapterO.isEnabled("dataContextValue")&&(o=i._adapterO.apply("dataContextValue",{field:a,value:o,dataItem:t}).value),Rd(o))if(n=!0,t.hasChildren[a]){var u=i.createDataItem();u.copyFrom(i.mainDataSet.template);var l=new Pm(u);l.events.on("inserted",i.handleDataItemAdded,i,!1),l.events.on("removed",i.handleDataItemRemoved,i,!1),i._dataDisposers.push(new km(l));for(var h=o.length,c=0;c<h;c++){var d=o[c],f=l.create();f.parent=t,i.processDataItem(f,d)}t[a]=l}else t[a]=o})),nm(this.propertyFields,(function(i,r){var s=i,a=e[r];Rd(a)&&(n=!0,t.setProperty(s,a))})),this._addAllDataItems||n||this.mainDataSet.remove(t)}},e.prototype.updateDataItem=function(t){var e=this;if(t){var i=t.dataContext;nm(this.dataFields,(function(n,r){var s=n,a=i[r];(e._adapterO&&(a=e._adapterO.apply("dataContextValue",{field:s,value:a,dataItem:t}).value),Rd(a))&&(t.hasChildren[s]?t[s].each((function(t){e.updateDataItem(t)})):t[s]=a)})),nm(this.propertyFields,(function(e,n){var r=e,s=i[n];Rd(s)&&t.setProperty(r,s)}))}},e.prototype.validateDataElements=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){var i=this.dataItems.getIndex(e);i&&this.validateDataElement(i)}},e.prototype.validate=function(){this.validateDataElements(),t.prototype.validate.call(this)},e.prototype.validateDataElement=function(t){},e.prototype.addData=function(t,e,i){var n=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),i||(t instanceof Array?kf(t,(function(t){n.data.push(t)})):this.data.push(t)),this.inited)this.removeData(e,i);else if(Gd(e))for(;e>0;)this.data.shift(),e--;this.invalidateData()},e.prototype.removeData=function(t,e){if(Gd(t)&&t>0){for(;t>0;){var i=this.mainDataSet.getIndex(0);i&&this.mainDataSet.remove(i),this.dataUsers.each((function(t){if(!t.data||0==t.data.length){var e=t.mainDataSet.getIndex(0);e&&t.mainDataSet.remove(e)}})),e||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,t--}this.invalidateDataItems()}},e.prototype.invalidateData=function(){this.disabled||this.isTemplate||(Om.addToInvalidComponents(this),Rb.requestFrame(),this.dataInvalid=!0,cm(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataUsers=function(){cm(this.dataUsers.iterator(),(function(t){t.invalidate()}))},e.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(jf(Om.invalidDataItems,this),Rb.requestFrame(),this.dataItemsInvalid=!0,cm(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,jf(Om.invalidDataRange,this),Rb.requestFrame())},e.prototype.validateDataRange=function(){Af(Om.invalidDataRange,this),this.dataRangeInvalid=!1,this.startIndex==this._prevStartIndex&&this.endIndex==this._prevEndIndex||(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},e.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},e.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},e.prototype.appendDataItems=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){(i=this.dataItems.getIndex(e))&&(i.__disabled=!1)}for(e=0;e<this.startIndex;e++){(i=this.dataItems.getIndex(e))&&(i.__disabled=!0)}for(e=this.endIndex;e<this.dataItems.length;e++){var i;(i=this.dataItems.getIndex(e))&&(i.__disabled=!0)}},e.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(jf(Om.invalidRawDatas,this),Rb.requestFrame(),this.rawDataInvalid=!0,cm(this.dataUsers.iterator(),(function(t){t.invalidateRawData()})))},e.prototype.validateRawData=function(){var t=this;Af(Om.invalidRawDatas,this),cm(this.mainDataSet.iterator(),(function(e){e&&t.updateDataItem(e)}))},e.prototype.dispose=function(){var e=this;this.mainDataSet.template.clones.clear(),nm(this._dataSources,(function(t,i){e.removeDispose(i)})),this.disposeData(),t.prototype.dispose.call(this)},e.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),kf(this._dataDisposers,(function(t){t.dispose()})),cm(this.dataUsers.iterator(),(function(t){t.disposeData()})),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},e.prototype.getDataItem=function(t){return this.mainDataSet.create()},e.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,Om.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var t=this.dataItem.dataContext;this._data=t[this.dataFields.data]}if(0===this._parseDataFrom&&this.data.length>0&&this.disposeData(),this.data.length>0){var e=this.preloader;cm(this.dataUsers.iterator(),(function(t){t._startIndex=void 0,t._endIndex=void 0}));for(var i=0,n=Date.now(),r=this._parseDataFrom,s=this.data.length,a=function(){var t=o.data[r];if(o._usesData){var s=o.getDataItem(t);o.processDataItem(s,t)}if((o.dataUsers.each((function(e){if(0==e.data.length){var i=e.getDataItem(t);e.processDataItem(i,t)}})),100==++i)&&(i=0,Date.now()-n>o.parsingStepDuration&&r<o.data.length-10))return o._parseDataFrom=r+1,e&&(r/o.data.length>.5&&!e.visible||(e.progress=r/o.data.length)),o.dataValidationProgress=r/o.data.length,r=o.data.length,o.invalidateData(),{value:void 0}},o=this;r<s;r++){var u=a();if("object"==typeof u)return u.value}e&&(e.progress=1),this.dataUsers.each((function(t){(t.hidden||t.appeared&&!t.visible&&t.stacked)&&t.hide(0)}))}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},e.prototype.validateDataItems=function(){Af(Om.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(e.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this.isDisposed()||(this._parseDataFrom=0,this.disposeData(),this._data=t,t&&t.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated")))},e.prototype.getDataSource=function(t){var e=this;return Rd(this._dataSources[t])||(this._dataSources[t]=new Wb,this._dataSources[t].component=this,this.setDataSourceEvents(this._dataSources[t],t),this._dataSources[t].adapter.add("dateFields",(function(t){return e.dataSourceDateFields(t)})),this._dataSources[t].adapter.add("numberFields",(function(t){return e.dataSourceNumberFields(t)})),this.events.on("inited",(function(){e.loadData(t)}),this,!1)),this._dataSources[t]},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(t){var e=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=t,this._dataSources.data.component=this,this.events.on("inited",(function(){e.loadData("data")}),this,!1),this.setDataSourceEvents(t,"data")},enumerable:!0,configurable:!0}),e.prototype.loadData=function(t){this._dataSources[t].load()},e.prototype.dataSourceDateFields=function(t){return t},e.prototype.dataSourceNumberFields=function(t){return t},e.prototype.populateDataSourceFields=function(t,e,i){return kf(i,(function(i){e[i]&&-1===Of(t,e[i])&&t.push(e[i])})),t},e.prototype.setDataSourceEvents=function(t,e){var i=this;t.events.on("started",(function(t){var e=i.preloader;e&&(e.progress=0)}),void 0,!1),t.events.on("loadstarted",(function(t){var e=i.preloader;e&&(e.progress=.25)}),void 0,!1),t.events.on("loadended",(function(t){var e=i.preloader;e&&(e.progress=.5)}),void 0,!1),t.events.on("parseended",(function(t){var e=i.preloader;e&&(e.progress=.75)}),void 0,!1),t.events.on("ended",(function(t){var e=i.preloader;e&&(e.progress=1)}),void 0,!1),t.events.on("error",(function(t){var e=i.preloader;e&&(e.progress=1),i.openModal(t.message)}),void 0,!1),e&&t.events.on("done",(function(n){var r=i.preloader;r&&(r.progress=1),"data"!=e||Wd(n.data)||(n.data=[n.data]),t.incremental&&"data"==e&&i.data.length?i.addData(n.data,t.keepCount?n.data.length:0):t.updateCurrentData&&"data"==e&&i.data.length?(kf(i.data,(function(t,e){Rd(n.data[e])&&nm(t,(function(i,r){Rd(n.data[e][i])&&(t[i]=n.data[e][i])}))})),i.invalidateRawData()):i[e]=n.data}))},Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new qb,this._responsive.component=this),this._responsive},set:function(t){this._responsive=t,this._responsive.component=this},enumerable:!0,configurable:!0}),e.prototype.zoom=function(t,e,i,n){var r=this;void 0===e&&(e=!1),void 0===i&&(i=!1);var s=t.start,a=t.end,o=t.priority;if(t.start==t.end&&(t.start=t.start-.5/this.maxZoomFactor,t.end=t.end+.5/this.maxZoomFactor),"end"==o&&1==a&&0!=s&&s<this.start&&(o="start"),"start"==o&&0==s&&a>this.end&&(o="end"),Gd(n)||(n=this.maxZoomDeclination),!Gd(s)||!Gd(a))return{start:this.start,end:this.end};if(this._finalStart!=s||this._finalEnd!=a){var u=this.maxZoomFactor/this.minZoomCount,l=this.maxZoomFactor/this.maxZoomCount;if("start"==o?(this.maxZoomCount>0&&1/(a-s)<l&&(a=s+1/l),1/(a-s)>u&&(a=s+1/u),a>1&&a-s<1/u&&(s=a-1/u)):(this.maxZoomCount>0&&1/(a-s)<l&&(s=a-1/l),1/(a-s)>u&&(s<=0?a=s+1/u:s=a-1/u),s<0&&a-s<1/u&&(a=s+1/u)),s<-n&&(s=-n),1/(a-s)>u&&(a=s+1/u),a>1+n&&(a=1+n),1/(a-s)>u&&(s=a-1/u),this._finalEnd=a,this._finalStart=s,this.skipRangeEvent=e,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!i){var h=this.rangeChangeAnimation;if(h&&h.progress<1){var c=h.animationOptions;if(c.length>1){if(c[0].to==s&&c[1].to==a)return{start:s,end:a};h.isDisposed()||h.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),h=this.animate([{property:"start",to:s},{property:"end",to:a}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=h,h&&!h.isFinished()?h.events.on("animationended",(function(){r.dispatchImmediately("rangechangeended")})):this.dispatchImmediately("rangechangeended")}else this.start=s,this.end=a,this.dispatch("rangechangeended")}return{start:s,end:a}},e.prototype.zoomToIndexes=function(t,e,i,n){if(Gd(t)&&Gd(e)){var r=t/this.dataItems.length,s=e/this.dataItems.length;this.zoom({start:r,end:s},i,n)}},Object.defineProperty(e.prototype,"zoomFactor",{get:function(){return Xd(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(t){this.setPropertyValue("maxZoomFactor",t)&&(1==t&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(t){this.setPropertyValue("maxZoomDeclination",t)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return Gd(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(t){this._startIndex=Xd(Math.round(t),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),e.prototype.indexToPosition=function(t){return t/this.dataItems.length},Object.defineProperty(e.prototype,"endIndex",{get:function(){var t=this.dataItems.length;return(!Gd(this._endIndex)||this._endIndex>t)&&(this._endIndex=t),this._endIndex},set:function(t){this._endIndex=Xd(Math.round(t),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(t){if(this._start!=t){this._start=t;var e=Math.max(0,Math.floor(this.dataItems.length*t)||0);this._startIndex=Math.min(e,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(t){this._end!=t&&(this._end=t,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*t)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),Om.removeFromInvalidComponents(this),Af(Om.invalidDataItems,this),Af(Om.invalidDataRange,this),Af(Om.invalidRawDatas,this)},Object.defineProperty(e.prototype,"dataItems",{get:function(){if(""!=this._currentDataSetId){var t=this.dataSets.getKey(this._currentDataSetId);if(t)return t}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new wm),this._dataSets},enumerable:!0,configurable:!0}),e.prototype.setDataSet=function(t){if(this._currentDataSetId!=t){if(this.dataSets.getKey(t))return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId=t,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0;if(""!=this._currentDataSetId)return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0}return!1},Object.defineProperty(e.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),e.prototype._updateDataItemIndexes=function(t){for(var e=this.mainDataSet.values,i=e.length,n=t;n<i;++n)e[n]._index=n},e.prototype.handleDataItemAdded=function(t){t.newValue.component=this,this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemRemoved=function(t){this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.bindDataField=function(t,e){this.dataFields[t]=e,this.invalidateDataRange()},e.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},e.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(e.prototype,"dataUsers",{get:function(){var t=this;return this._dataUsers||(this._dataUsers=new Am,this._disposers.push(new _f((function(){cm(t._dataUsers.iterator(),(function(t){t.dispose()}))})))),this._dataUsers},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.dataFields=tv(this.dataFields,{}),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.data=e.data,this.sequencedInterpolation=e.sequencedInterpolation,this.sequencedInterpolationDelay=e.sequencedInterpolationDelay,this.interpolationDuration=e.interpolationDuration,this.interpolationEasing=e.interpolationEasing},e.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},e.prototype.getExporting=function(){var e=t.prototype.getExporting.call(this);return e.adapter.has("data",this._exportData,-1,this)||(e.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",(function(t){e.handleDataUpdated()}))),e},e.prototype._exportData=function(t){return t.data=this.data,t},e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return i&&this.invalidateData(),i},e.prototype.setShowOnInit=function(e){e!=this.getPropertyValue("showOnInit")&&(!e||this.inited||this.hidden?this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2):(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2))),t.prototype.setShowOnInit.call(this,e)},e.prototype.setBaseId=function(e){e!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,Om.removeFromInvalidComponents(this),this._baseId=e,this.invalidateData()),t.prototype.setBaseId.call(this,e)},Object.defineProperty(e.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(t){this.setPropertyValue("minZoomCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(t){this.setPropertyValue("maxZoomCount",t)},enumerable:!0,configurable:!0}),e.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},e.prototype.asFunction=function(e){return"interpolationEasing"==e||"rangeChangeEasing"==e||t.prototype.asIs.call(this,e)},e}(Eb);Om.registeredClasses.Component=Jb;var Yb=function(t){function e(){var e=t.call(this)||this;return e.isOversized=!1,e.className="Label",e.fill=(new Dp).getFor("text"),e.wrap=!1,e.truncate=!1,e.fullWords=!0,e.ellipsis="",e.textAlign="start",e.textValign="top",e.layout="absolute",e.baseLineRatio=-.27,e._positionPrecision=1,e.events.on("maxsizechanged",(function(){e.inited&&e.handleMaxSize()}),e,!1),e.events.once("validated",e.handleValidate,e,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.validatePosition()},e.prototype.setPaper=function(e){var i=t.prototype.setPaper.call(this,e);return i&&this.hardInvalidate(),i},e.prototype.handleValidate=function(){!this.currentText&&!this.text||0!=this.bbox.width&&0!=this.bbox.height||Om.events.once("exitframe",this.hardInvalidate,this)},e.prototype.handleMaxSize=function(){(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized)&&this.invalidate()},e.prototype.arrange=function(){},e.prototype.updateCurrentText=function(){var t,e;nv(this.html)&&this.paper.supportsForeignObject()?(t="html",e=this.html):(t="svg",e=this.text),$d(e)&&(e=e.toString()),Rd(e)&&""!==e&&(e=this.populateString(e,this.dataItem)),"html"==t?this._adapterO&&(e=this._adapterO.apply("htmlOutput",e)):this._adapterO&&(e=this._adapterO.apply("textOutput",e));var i=e!=this.currentText||t!=this._currentFormat;return this.currentText=e,this._currentFormat=t,i},e.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},e.prototype.getLineBBox=function(t){var e=t&&t.element,i=e&&e.node;i&&i.parentNode&&(t.bbox=e.getBBox())},e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.bbox.width,i=this.bbox.height,n=this.topParent;if(!n||n.maxWidth&&n.maxHeight){var r=nf(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),s=nf(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),a=s+","+r+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(this.updateCurrentText()||!this.inited||this._prevStatus!=a){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var o=this._currentFormat,u=this.currentText;if(Rd(u)&&""!=u){var l=u.split("\n");this._prevStatus=a,this.textAlign=this.textAlign;var h=this.group.getAttr("display");if("none"==h&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),"svg"===o){this.element.removeAttr("display");var c=this.element;this.resetBBox();for(var d=0,f="",m=0;m<l.length;m++){var v=l[m];if(""!=v){var p=bb().chunk(v,null,this.ignoreFormatting),b=0,g=!0,y=!1,w=this.getLineInfo(m);w?(w.text="",w.element.textContent=""):(w={text:"",element:this.getSVGLineElement("",0),complex:!1},c.add(w.element)),w.element.removeAttr("display"),w.element.removeChildren(),this.textPathElement&&w.element.add(this.textPathElement);for(var S=0;S<p.length;S++){S&&(w.complex=!0);var x=p[S];if("format"===x.type)f=x.text;else{if(y)continue;if(w.text=x.text,w.style=bb().translateStyleShortcuts(f),this.textPathElement?this.getSvgElement(w.text,w.style,this.textPathElement):this.getSvgElement(w.text,w.style,w.element),this.getLineBBox(w),w.bbox.width=Math.ceil(w.bbox.width),b<w.bbox.height&&(b=w.bbox.height),(this.wrap||this.truncate)&&w.bbox.width>r){this.isOversized=!0;var C=w.element.textContent,O=w.bbox.width/C.length,M=rf(Math.ceil((w.bbox.width-r)/O),C.length);if(this.truncate){var T=!1,k=w.element.node;if(k&&k.childNodes)for(var I=w.element.node.childNodes.length-1;I>=0;I--){var A=w.element.node.childNodes[I];if(T&&w.bbox.width<=r&&(A.textContent+=" "+this.ellipsis,w.bbox=w.element.getBBox(),w.bbox.width=Math.floor(w.bbox.width),w.bbox.width<=r))break;T=!1;var j=A.textContent;for(C=w.element.textContent,M=rf(Math.ceil((w.bbox.width-r)/O),C.length);w.bbox.width>r&&M<=C.length&&M>0;){(P=nf(C.length-M-this.ellipsis.length,1))<=1&&(M=0,I>0&&(T=!0,w.element.node.removeChild(A))),(j=hv(j,P,this.ellipsis,this.fullWords,this.rtl)).length>P&&this.fullWords&&(j=hv(j,P,this.ellipsis,!1,this.rtl)),A.textContent=j,w.bbox=w.element.getBBox(),w.bbox.width=Math.floor(w.bbox.width),M=Math.ceil(1.1*M)}y=!0}}else{if(w.element.node){for(var F=w.element.node.lastChild,D=void 0;w.bbox.width>r&&M<=C.length&&M>0;){var P=nf(x.text.length-M,1);if(g?D=lv(x.text,P,!0,this.rtl):((D=lv(x.text,P,!0,this.rtl,!1))[0].length>P||1===P)&&(w.element.node.removeChild(F),M=0),M>0){var L=D.shift();g&&(L=cv(L)),F.textContent=bb().cleanUp(L)}w.bbox=w.element.getBBox(),w.bbox.width=Math.floor(w.bbox.width),M++}if(D.length>0){var E="";Rd(D)&&(this.rtl?E+=D.join("")+f:E+=f+D.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var N=S+1;N<p.length;N++)"value"==p[N].type?E+=p[N].text.replace(/([\[\]]{1})/g,"$1$1"):E+=p[N].text;l.splice(m+1,0,E)}y=!0}}}this.bbox.width<w.bbox.width&&(this.bbox.width=w.bbox.width),this.bbox.height=d+b,this.textPathElement?w.element.attr({dy:-this.paddingBottom.toString()}):w.element.attr({x:"0",y:d+b,dy:Yd(this.baseLineRatio*b,3).toString()}),g=!1}}var R=w.element.node;if(R)(F=R.lastChild)&&(F.textContent=this.rtl?F.textContent.replace(/^[\s\uFEFF\xA0]+/g,""):dv(F.textContent));d+=b,this.addLineInfo(w,m)}else{var B=this.getSVGLineElement("",0);B.add(this.getSvgElement(".",bb().translateStyleShortcuts(f))),c.add(B);var _=Math.ceil(B.getBBox().height);_>0&&(d+=_),c.removeElement(B);var z=this.getLineInfo(m);z&&(z.text="",z.element.textContent="")}}this.maybeHideOversized(),this.measureFailed=!1,0!=this.bbox.width&&0!=this.bbox.height||(this.measureFailed=!0),this._measuredWidth=Yd(nf(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=Yd(nf(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,i==this._measuredHeight&&e==this._measuredWidth||this.dispatch("transformed"),this.hideUnused(l.length)}else{this.element.removeAttr("display"),this.resetBBox(),(c=this.element).removeChildren(),this.setCache("lineInfo",[],0);var V=this.paper.foreignObject();c.add(V),this.maxWidth&&V.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight}),this.maxHeight&&V.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom});var G=this.getHTMLLineElement(u);V.node.appendChild(G),G.style.display="inline-block";var $=G.clientWidth,W=G.clientHeight;G.style.display="block",this._bbox={x:0,y:0,width:$,height:W},V.attr({width:$+1,height:W}),this.maybeHideOversized(),this._measuredWidth=nf(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=nf(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(G.style.overflow="hidden"),($>r||W>s)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),"none"==h&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}else this.element.attr({display:"none"})}}else n.events.once("maxsizechanged",this.hardInvalidate,this,!1)},e.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},e.prototype.alignSVGText=function(){var t=this.element,e=t.node.children||t.node.childNodes;if(e&&(!e||0!=e.length)){var i=this._measuredWidth,n=this._measuredHeight;this.rtl?t.attr({direction:"rtl"}):t.removeAttr("direction");for(var r=e.length-1;r>=0;r--){var s=e[r];if(s.setAttribute("text-anchor",this.textAlign),this.textPathElement)s.removeAttribute("x"),s.removeAttribute("y");else{switch(this.textAlign){case"middle":s.setAttribute("x",(i/2).toString()+"px");break;case"end":this.rtl||s.setAttribute("x",i.toString());break;default:this.rtl?s.setAttribute("x",i.toString()):s.removeAttribute("text-anchor")}var a=Ld(s.getAttribute("y"));switch(this.textValign){case"middle":s.setAttribute("y",((a||0)+(n-this.bbox.height)/2).toString());break;case"bottom":s.setAttribute("y",((a||0)+n-this.bbox.height).toString());break;default:s.setAttribute("y",(a||0).toString())}}}}},e.prototype.getSVGLineElement=function(t,e){var i=this.paper.addGroup("text");return i.textContent=t,i.attr({x:"0"}),Rd(e)&&i.attr({y:e.toString()}),(this.truncate||this.wrap)&&i.attr({overflow:"hidden"}),i},Object.defineProperty(e.prototype,"rtl",{get:function(){return Rd(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=Pd(t),this._rtl=t,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),e.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},e.prototype.getHTMLLineElement=function(t){var e=document.createElement("div");switch(e.innerHTML=t,this.textAlign){case"middle":e.style.textAlign="center";break;case"end":e.style.textAlign="right"}return this.wrap?e.style.wordWrap="break-word":e.style.whiteSpace="nowrap",this.rtl&&(e.style.direction="rtl"),Rd(this.fill)&&(e.style.color=this.fill.toString()),e},e.prototype.setStyles=function(){var t=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?t.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(t.removeStyle("webkitUserSelect"),t.removeStyle("msUserSelect"))},e.prototype.hideUnused=function(t){this.initLineCache();var e=this.getCache("lineInfo");if(e.length>=t)for(var i=t;i<e.length;i++){var n=e[i];n&&n.element&&n.element.attr({display:"none"})}},Object.defineProperty(e.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(t){this.setPropertyValue("text",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPropertyValue("path",t,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:t}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(mp,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:t}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(t){this.setPropertyValue("locationOnPath",t),this.textPathElement&&this.textPathElement.attr({startOffset:100*t+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(t){this.setPropertyValue("baseLineRatio",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(t){this.resetBBox(),this.setPropertyValue("wrap",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(t){this.resetBBox(),this.setPropertyValue("truncate",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(t){this.setPropertyValue("fullWords",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(t){this.setPropertyValue("ellipsis",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(t){this.setPropertyValue("selectable",t,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(t){this.setPropertyValue("textAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(t){this.setPropertyValue("textValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(t){(this.setPropertyValue("html",t,!0),Rd(t))||this.element.removeChildrenByTag("foreignObject")},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){if(t.prototype.setFill.call(this,e),this.html)for(var i=this.element.node.getElementsByTagName("div"),n=0;n<i.length;n++){var r=i[n];Rd(this.fill)&&(r.style.color=this.fill.toString())}},Object.defineProperty(e.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(t){this.setPropertyValue("hideOversized",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(t){this.setPropertyValue("ignoreFormatting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},e.prototype.getLineInfo=function(t){this.initLineCache();var e=this.getCache("lineInfo");return e.length>t?e[t]:void 0},e.prototype.addLineInfo=function(t,e){this.initLineCache(),this.getCache("lineInfo")[e]=t},e.prototype.initLineCache=function(){Rd(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},e.prototype.setDataItem=function(e){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),e&&(this._sourceDataItemEvents=new zf([e.events.on("valuechanged",this.invalidate,this,!1),e.events.on("workingvaluechanged",this.invalidate,this,!1),e.events.on("calculatedvaluechanged",this.invalidate,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),t.prototype.setDataItem.call(this,e)},Object.defineProperty(e.prototype,"availableWidth",{get:function(){return Rd(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableHeight",{get:function(){return Rd(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.getSvgElement=function(t,e,i){var n=this.paper.add("tspan");return n.textContent=t,e&&n.node.setAttribute("style",e),i&&i.add(n),n},e.prototype.deepInvalidate=function(){t.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return t?this.dataItem&&(t=this.populateString(t)):t=this.populateString(bv(nv(this.html)?this.html:this.text)),t},set:function(t){t=Ed(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.Label=Yb,Hb.push({relevant:Ub.heightXS,state:function(t,e){if(t instanceof Yb&&t.parent&&t.parent.isBaseSprite){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var Zb=function(t){function e(){var e=t.call(this)||this;return e.className="RoundedRectangle",e.element=e.paper.add("path"),e.cornerRadius(3,3,3,3),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,i=this.innerHeight;if(Gd(e)&&Gd(i)){var n=rf(e,i)/2,r=rv(this.cornerRadiusTopLeft,n),s=rv(this.cornerRadiusTopRight,n),a=rv(this.cornerRadiusBottomRight,n),o=rv(this.cornerRadiusBottomLeft,n),u=rf(Math.abs(e/2),Math.abs(i/2)),l=Xd(r,0,u),h=Xd(s,0,u),c=Xd(a,0,u),d=Xd(o,0,u),f="M"+l+",0 L"+(e-h)+",0"+(" a"+h+","+h+" 0 0 1 "+h+","+h)+(" L"+e+","+(i-c))+(" a"+c+","+c+" 0 0 1 -"+c+","+c)+(" L"+d+","+i)+(" a"+d+","+d+" 0 0 1 -"+d+",-"+d)+(" L0,"+l)+(" a"+l+","+l+" 0 0 1 "+l+",-"+l)+" Z";this.path=f}},e.prototype.cornerRadius=function(t,e,i,n){this.cornerRadiusTopLeft=t,this.cornerRadiusTopRight=e,this.cornerRadiusBottomLeft=i,this.cornerRadiusBottomRight=n},Object.defineProperty(e.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(t){this.setPercentProperty("cornerRadiusTopLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(t){this.setPercentProperty("cornerRadiusTopRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(t){this.setPercentProperty("cornerRadiusBottomRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(t){this.setPercentProperty("cornerRadiusBottomLeft",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.RoundedRectangle=Zb;var Xb=function(t){function e(){var e=t.call(this)||this;e.className="Button",e.tooltipY=0,e.iconPosition="left",e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0;var i=new Dp,n=e.background;n.fill=i.getFor("secondaryButton"),n.stroke=i.getFor("secondaryButtonStroke"),n.fillOpacity=1,n.strokeOpacity=1,n.cornerRadius(3,3,3,3),e.label=new Yb,e.label.fill=i.getFor("secondaryButtonText"),e.label.shouldClone=!1;var r=n.states.create("hover");r.properties.fillOpacity=1,r.properties.fill=i.getFor("secondaryButtonHover");var s=n.states.create("down");return s.transitionDuration=100,s.properties.fill=i.getFor("secondaryButtonDown"),s.properties.fillOpacity=1,e.role="button",e.focusable=!0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){var e=this._icon;e&&(e.parent=void 0),t&&(this._icon=t,t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(t){this.setPropertyValue("iconPosition",t),this.icon&&("left"==t?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label&&this.removeDispose(this._label),this._label=t,t&&(t.parent=this,t.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Zb},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.label&&this.label.copyFrom(e.label),e.icon&&(this.icon=e.icon.clone())},e}(Eb);Om.registeredClasses.Button=Xb;var Qb=function(t){function e(){var e=t.call(this)||this;return e.className="Circle",e.element=e.paper.add("circle"),e.setPercentProperty("radius",Ad(100)),e.setPropertyValue("horizontalCenter","middle"),e.setPropertyValue("verticalCenter","middle"),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return rv(this.radius,rf(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){var t=this.pixelRadius;this._bbox={x:-t,y:-t,width:2*t,height:2*t}},e}(Pb);Om.registeredClasses.Circle=Qb;var tg=function(t){function e(){var e=t.call(this)||this;return e.className="Ellipse",e.element=e.paper.add("ellipse"),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(e.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(t){this.height=2*t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(t){this.width=2*t,this.invalidate()},enumerable:!0,configurable:!0}),e}(Qb);Om.registeredClasses.Ellipse=tg;var eg=function(t){function e(){var e=t.call(this)||this;return e.className="Image",e.element=e.paper.add("image"),e.applyTheme(),e.width=50,e.height=50,e}return Sd(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),this.href){var e=this.innerWidth,i=this.innerHeight;Gd(this.widthRatio)&&(e=i*this.widthRatio,this.width=e),Gd(this.heightRatio)&&(i=e*this.heightRatio,this.height=i),this.element.attr({width:e,height:i}),this.element.attrNS(mp,"xlink:href",this.href)}},Object.defineProperty(e.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(t){this.setPropertyValue("href",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(t){this.setPropertyValue("widthRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(t){this.setPropertyValue("heightRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Image=eg;var ig=function(t){function e(){var e=t.call(this)||this;return e.className="Line",e.element=e.paper.add("line"),e.fill=Ym(),e.x1=0,e.y1=0,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(e.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(t){Gd(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof hb&&(e=1e-5),this.setPropertyValue("x1",t,!0),this.element.attr({x1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){var t=this.getPropertyValue("x2");return Gd(t)||(t=this.pixelWidth),t},set:function(t){Gd(t)||(t=0),this.setPropertyValue("x2",t,!0),this.element.attr({x2:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(t){Gd(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof hb&&(e=1e-5),this.setPropertyValue("y1",t,!0),this.element.attr({y1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){var t=this.getPropertyValue("y2");return Gd(t)||(t=this.pixelHeight),t},set:function(t){Gd(t)||(t=0),this.setPropertyValue("y2",t,!0),this.element.attr({y2:t})},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},i={x:this.x2,y:this.y2},n=hf(e,i,t),r=cf(e,i);return{x:n.x,y:n.y,angle:r}},e}(Pb);Om.registeredClasses.Line=ig;var ng=function(t){function e(){var e=t.call(this)||this;return e.className="PointedRectangle",e.element=e.paper.add("path"),e.cornerRadius=6,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.cornerRadius,i=this.innerWidth,n=this.innerHeight;if(i>0&&n>0){var r,s,a=this.pointerX,o=this.pointerY,u=this.pointerBaseWidth/2,l=rf(i/2,n/2),h=Xd(e,0,l),c=Xd(e,0,l),d=Xd(e,0,l),f=Xd(e,0,l),m=void 0,v=void 0,p=void 0,b=void 0,g=(a-0)*(n-0)-(o-0)*(i-0),y=(a-0)*(0-n)-(o-n)*(i-0);if(g>0&&y>0)m="M"+h+",0 L"+((r=Xd(a,h+u,i-u-c))-u)+",0 L"+a+","+(o=Xd(o,-1/0,0))+" L"+(r+u)+",0 L"+(i-c)+",0";else m="M"+h+",0 L"+(i-c)+",0";if(g<0&&y<0)p=" L"+(i-d)+","+n+" L"+((r=Xd(a,f+u,i-u-d))+u)+","+n+" L"+a+","+(o=Xd(o,n,1/0))+" L"+(r-u)+","+n+" L"+f+","+n;else p=" L"+f+","+n;if(g<0&&y>0)b=" L0,"+(n-f)+" L0,"+((s=Xd(o,h+u,n-f-u))+u)+" L"+(a=Xd(a,-1/0,0))+","+o+" L0,"+(s-u)+" L0,"+h;else b=" L0,"+h;if(g>0&&y<0)v=" L"+i+","+c+" L"+i+","+((s=Xd(o,c+u,n-u-d))-u)+" L"+(a=Xd(a,i,1/0))+","+o+" L"+i+","+(s+u)+" L"+i+","+(n-d);else v=" L"+i+","+(n-d);var w=" a"+c+","+c+" 0 0 1 "+c+","+c,S=" a"+d+","+d+" 0 0 1 -"+d+","+d,x=" a"+f+","+f+" 0 0 1 -"+f+",-"+f,C=" a"+h+","+h+" 0 0 1 "+h+",-"+h;this.path=m+w+v+S+p+x+b+C}},Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(function(t){function e(){var e=t.call(this)||this;return e.className="PointedShape",e.pointerBaseWidth=15,e.pointerLength=10,e.pointerY=0,e.pointerX=0,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),Gd(this.pointerX)||(this.pointerX=this.pixelWidth/2),Gd(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(e.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(t){this.setPropertyValue("pointerBaseWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(t){this.setPropertyValue("pointerLength",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(t){this.setPropertyValue("pointerX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(t){this.setPropertyValue("pointerY",t,!0)},enumerable:!0,configurable:!0}),e}(Pb));function rg(t){var e=ag(t[0]),i={x:0,y:0},n=rp.minPolylineStep;Gd(n)||(n=.5);for(var r=0,s=t.length;r<s;r++){var a=t[r];of(a,i)>n&&(e+=ag(a),i=a)}return e}function sg(t){return" M"+Yd(t.x,4)+","+Yd(t.y,4)+" "}function ag(t){return" L"+Yd(t.x,4)+","+Yd(t.y,4)+" "}function og(t,e){return" Q"+Yd(e.x,4)+","+Yd(e.y,4)+" "+Yd(t.x,4)+","+Yd(t.y,4)}function ug(t,e,i){return" C"+Yd(e.x,4)+","+Yd(e.y,4)+" "+Yd(i.x,4)+","+Yd(i.y,4)+" "+Yd(t.x,4)+","+Yd(t.y,4)}function lg(t,e,i,n){if(0==e)return"";Gd(n)||(n=i);var r="",s=",",a=Math.ceil(Math.abs(e)/180),o=1;e<0&&(o=0);var u=0,l=0,h=-ef(t)*i,c=-Qd(t)*n;if(e<.5&&i>3e3)return ag({x:m=Yd(ef(f=t+e)*i,4),y:v=Yd(Qd(f)*n,4)});for(var d=0;d<a;d++){var f,m,v;r+=" a"+i+s+n+s+0+s+0+s+o+s+(m=Yd(ef(f=t+e/a*(d+1))*i+h-u,4))+s+(v=Yd(Qd(f)*n+c-l,4)),u=m,l=v}return r}function hg(t,e,i,n,r,s,a){if(0==e)return"";if(Gd(n)||(n=0),0==i&&n<=0)return"";if(i<n){var o=i;i=n,n=o,Gd(r)&&(r=r/n*i)}360==(e=rf(e,360))&&(s=0,a=0);var u=t+e,l=Qd(rf(e,45)/2),h=(r=Gd(r)?r:i)/i*n,c=r/i*(s=s||0),d=r/i*(a=Gd(a)?a:s);s=Xd(s,0,(i-n)/2),c=Xd(c,0,(r-h)/2),a=Xd(a,0,(i-n)/2),d=Xd(d,0,(r-h)/2),s=Yd(Xd(s,0,i*l),4),c=Yd(Xd(c,0,r*l),4),a=Yd(Xd(a,0,n*l),4),d=Yd(Xd(d,0,h*l),4);var f=Math.asin(s/i/2)*Kd*2,m=Math.asin(c/r/2)*Kd*2;n<a&&(n=a),h<d&&(h=d);var v=Math.asin(a/n/2)*Kd*2,p=Math.asin(d/h/2)*Kd*2;Gd(v)||(v=0),Gd(p)||(p=0);var b=t+e/2,g={x:Yd(ef(b)*n,4),y:Qd(b)*h},y={x:ef(t)*(n+a),y:Qd(t)*(h+d)},w={x:ef(t)*(i-s),y:Qd(t)*(r-c)},S={x:ef(u)*(i-s),y:Qd(u)*(r-c)},x={x:ef(u)*(n+a),y:Qd(u)*(h+d)},C={x:ef(t+f)*i,y:Qd(t+m)*r},O={x:ef(u-v)*n,y:Qd(u-p)*h};a+=a*Qd(v/2),d+=d*Qd(p/2),v>(u-t)/2&&(O=g);var M="";return 360==e?M=sg(w):(M=sg(y),M+=ag(w),M+=cg(C,s,c,!0)),M+=lg(t+f,e-2*f,i,r),Gd(n)&&0!=n?(360==e&&0==s?M+=sg(x):(M+=cg(S,s,c,!0),M+=ag(x),M+=cg(O,a,d,!0)),M+=lg(u-v,-(e-2*v),n,h),(e<360||s>0)&&(M+=cg(y,a,d,!0)),M+=ag(y)):(M+=cg(S,s,c,!0),e<360&&(M+=ag(y))),M}function cg(t,e,i,n,r,s){if(0==e)return"";var a=",";return" A"+e+a+i+a+(s=s||0)+a+ +(r=Boolean(r))+a+ +(n=Boolean(n))+a+Yd(t.x,4)+a+Yd(t.y,4)}function dg(t,e,i,n){return Gd(i)||(i=0),Gd(n)||(n=0),sg({x:i,y:n})+ag({x:i+t,y:n})+ag({x:i+t,y:n+e})+ag({x:i,y:n+e})+" Z"}function fg(t,e){var i=",",n=" L";return e?"M"+t.x+i+t.y+n+t.x+i+(t.y+t.height)+n+(t.x+t.width)+i+(t.y+t.height)+n+(t.x+t.width)+i+t.y+n+t.x+i+t.y:"M"+t.x+i+t.y+n+(t.x+t.width)+i+t.y+n+(t.x+t.width)+i+(t.y+t.height)+n+t.x+i+(t.y+t.height)+n+t.x+i+t.y}var mg=function(t){function e(){var e=t.call(this)||this;return e._distance=0,e.className="Polyline",e.element=e.paper.add("path"),e.shapeRendering="auto",e.fill=Ym(),e.strokeOpacity=1,e.applyTheme(),e}return Sd(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){for(var e="",i=0,n=t.length;i<n;i++){var r=t[i];if(r.length>0){e+=sg(r[0]);for(var s=1;s<r.length;s++){var a=r[s];e+=ag(a),this._distance+=of(r[s-1],a)}}}this.path=e}this._realSegments=t},Object.defineProperty(e.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(t){this.setPropertyValue("segments",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e=0;t<0&&(t=Math.abs(t),e=180);var i=this._realSegments;if(i){for(var n=this.distance,r=0,s=0,a=0,o=void 0,u=void 0,l=0;l<i.length;l++){var h=i[l];if(h.length>1){for(var c=1;c<h.length;c++)if(s=r/n,a=(r+=of(o=h[c-1],u=h[c]))/n,s<=t&&a>t){l=i.length;break}}else 1==h.length&&(o=h[0],u=h[0],s=0,a=1)}if(o&&u){var d=hf(o,u,(t-s)/(a-s));return{x:d.x,y:d.y,angle:e+cf(o,u)}}}return{x:0,y:0,angle:0}},Object.defineProperty(e.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Polyline=mg;var vg=function(t){function e(){var e=t.call(this)||this;return e.className="Polyarc",e.controlPointDistance=.5,e.controlPointPosition=.5,e.applyTheme(),e}return Sd(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){var e="";this._realSegments=[];for(var i=0,n=t.length;i<n;i++){var r=t[i],s=[];if(this._realSegments.push(s),r.length>0){e+=sg(r[0]);for(var a=1;a<r.length;a++){var o=r[a-1],u=r[a],l=of(u,o),h=l*this.controlPointDistance,c=this.controlPointPosition,d=-cf(o,u),f={x:o.x+(u.x-o.x)*c*.5-h*Qd(d),y:o.y+(u.y-o.y)*c*.5-h*ef(d)},m={x:o.x+(u.x-o.x)*c*1.5-h*Qd(d),y:o.y+(u.y-o.y)*c*1.5-h*ef(d)};e+=ug(u,f,m);var v=Math.ceil(l),p=o;if(v>0)for(var b=0;b<=v;b++){var g=vf(o,u,f,m,b/v);s.push(g),this._distance+=of(p,g),p=g}else s.push(o)}}}this.path=e}},Object.defineProperty(e.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(t){this.setPropertyValue("controlPointPosition",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t),this.makePath()},enumerable:!0,configurable:!0}),e}(mg);Om.registeredClasses.Polyarc=vg;var pg=function(t){function e(e){var i=t.call(this)||this;return i._bboxes=[],i.morphDuration=800,i.morphEasing=Kv,i.morphToSingle=!0,i.scaleRatio=1,i.className="Morpher",i.morphable=e,i.applyTheme(),i}return Sd(e,t),e.prototype.morphToPolygon=function(t,e,i){var n=this.morphable.currentPoints;if(n&&t){this.sortPoints(n),this.sortPoints(t),this._morphFromPointsReal=[],this._morphToPointsReal=[],Rd(e)||(e=this.morphDuration),Rd(i)||(i=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(t,n),this._morphToPointsReal=this.normalizePoints(n,t),this.morphable.currentPoints=this._morphFromPointsReal;var r=new cp(this,{property:"morphProgress",from:0,to:1},e,i);return this._disposers.push(r),r.start(),r}},e.prototype.normalizePoints=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i][0],s=t[i][1],a=Bd(df(r)),o=a.x+a.width,u=a.y+a.height;if(e[i]||(e[i]=[]),r&&!e[i][0]&&(e[i][0]=[{x:o,y:u},{x:o,y:u}]),e[i][0]){e[i][0]=this.addPoints(e[i][0],r.length);for(var l=1/0,h=0,c=0;c<e[i][0].length;c++){var d=of(e[i][0][c],r[0]);d<l&&(h=c,l=d)}var f=e[i][0].slice(0,h),m=e[i][0].slice(h);e[i][0]=m.concat(f)}s&&(e[i][1]||(e[i][1]=[{x:o,y:u},{x:o,y:u}]),e[i][1]=this.addPoints(e[i][1],s.length))}return e},e.prototype.sortPoints=function(t){t.sort((function(t,e){var i=Bd(df(t[0])),n=Bd(df(e[0]));return i.width*i.height>n.width*n.height?-1:1}));for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i][0];r&&e.push(Bd(df(r)))}return ff(e)},e.prototype.morphToCircle=function(t,e,i){var n=this.morphable.points,r=this.sortPoints(n);this._morphFromPointsReal=[],this._morphToPointsReal=[],Rd(e)||(e=this.morphDuration),Rd(i)||(i=this.morphEasing);for(var s=0,a=n.length;s<a;s++){var o=n[s][0],u=n[s][1];if(this._morphFromPointsReal[s]=[],this._morphToPointsReal[s]=[],o){var l=o,h=o,c=Bd(df(h));this.morphToSingle&&(c=Bd(r));var d=c.x+c.width/2,f=c.y+c.height/2,m=t;Gd(m)||(m=Math.min(c.width/2,c.height/2)),l=[];var v=cf({x:d,y:f},o[0]),p=100;o.length>p&&(p=o.length);for(var b=360/((p=(h=this.addPoints(o,p)).length)-1),g=0;g<p;g++){var y=b*g+v,w={x:d+m*ef(y),y:f+m*Qd(y)};l[g]=w}if(u&&u.length>0)for(var S=0,x=u.length;S<x;S++)l.push({x:d,y:f});this._morphFromPointsReal[s][0]=h,this._morphToPointsReal[s][0]=l}}this.morphable.currentPoints=this._morphFromPointsReal;var C=new cp(this,{property:"morphProgress",from:0,to:1},e,i);return this._disposers.push(C),C.start(),C},e.prototype.addPoints=function(t,e){for(var i=Math.round(e/t.length),n=[],r=0,s=t.length;r<s;r++){var a=t[r],o=void 0;o=r==t.length-1?t[0]:t[r+1],n.push(a);for(var u=1;u<i;u++){var l=u/i,h={x:a.x+(o.x-a.x)*l,y:a.y+(o.y-a.y)*l};n.push(h)}n.length+t.length-r==e&&(i=0)}if(n.length<e&&t.length>0){var c=t[t.length-1];for(u=n.length;u<e;u++)n.push({x:c.x,y:c.y})}return n},e.prototype.morphToRectangle=function(t,e,i,n){var r=this.morphable.points;this.sortPoints(r),this._morphFromPointsReal=[],this._morphToPointsReal=[],Rd(i)||(i=this.morphDuration),Rd(n)||(n=this.morphEasing);for(var s=0,a=r.length;s<a;s++){var o=r[s][0],u=r[s][1];if(this._morphFromPointsReal[s]=[],this._morphToPointsReal[s]=[],o){var l=o,h=o,c=this._bboxes[s];var d=c.x,f=c.y,m=t,v=e;if(Gd(m)||(m=c.width),Gd(v)||(v=c.height),l=[{x:d,y:f},{x:d+m,y:f},{x:d+m,y:f+v},{x:d,y:f+v}],l=this.addPoints(l,o.length),o.length<4)for(var p=o.length;p<4;p++)l.push({x:o[p].x,y:o[p].y});if(u&&u.length>0)for(var b=c.x+c.width/2,g=c.y+c.height/2,y=0,w=u.length;y<w;y++)l.push({x:b,y:g});this._morphFromPointsReal[s][0]=h,this._morphToPointsReal[s][0]=l}}this.morphable.currentPoints=this._morphFromPointsReal;var S=new cp(this,{property:"morphProgress",from:0,to:1},i,n);return this._disposers.push(S),S.start(),S},Object.defineProperty(e.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(t){this._morphProgress=t;var e=[];if(null!=t){var i=this._morphFromPointsReal,n=this._morphToPointsReal;if(null!=i&&null!=n)for(var r=0,s=i.length;r<s;r++){var a=[];e.push(a);var o=i[r][0],u=i[r][1],l=n[r][0],h=n[r][1];if(o&&o.length>0&&l&&l.length>0){for(var c=[],d=0,f=o.length;d<f;d++){var m=o[d],v=l[d],p={x:m.x+(v.x*this.scaleRatio-m.x)*t,y:m.y+(v.y*this.scaleRatio-m.y)*t};c.push(p)}a[0]=c}if(u&&u.length>0&&h&&h.length>0){for(var b=[],g=0,y=u.length;g<y;g++){m=u[g],v=h[g],p={x:m.x+(v.x*this.scaleRatio-m.x)*t,y:m.y+(v.y*this.scaleRatio-m.y)*t};b.push(p)}a[1]=b}}}this.morphable.currentPoints=e},enumerable:!0,configurable:!0}),e.prototype.morphBack=function(t,e){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,Rd(t)||(t=this.morphDuration),Rd(e)||(e=this.morphEasing);var i=new cp(this,{property:"morphProgress",from:0,to:1},t,e);return this._disposers.push(i),i.start(),i},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new hp(this._animations))),this._animations},enumerable:!0,configurable:!0}),e}(Xm),bg=function(t){function e(){var e=t.call(this)||this;return e.className="Polygon",e.element=e.paper.add("path"),e.shapeRendering="auto",e._currentPoints=[],e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"points",{get:function(){var t=this.getPropertyValue("points"),e=this.path;if(e&&(!t||0==t.length)){for(var i=e.slice(1,e.length-1).split("ZM"),n=0;n<i.length;n++){var r=i[n];if(r.length>0){var s=r.split("M"),a=s[0],o=s[1];if(a&&a.length>0){var u=a.split("L");if(u.length>0){var l=[],h=[l];t.push(h);for(var c=0;c<u.length;c++){var d=u[c].split(",");l.push({x:+d[0],y:+d[1]})}if(o&&o.length>0){var f=o.split("L");if(f.length>0){var m=[];h.push(m);for(c=f.length-1;c>=0;c--){d=f[c].split(",");m.push({x:+d[0],y:+d[1]})}}}}}}}this.setPropertyValue("points",t),this._currentPoints=t}return t},set:function(t){this.setPropertyValue("points",t,!0),this._currentPoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPoints",{get:function(){return this._currentPoints&&0!=this._currentPoints.length||!this.path||(this._currentPoints=this.points),this._currentPoints},set:function(t){this._currentPoints!=t&&(this._currentPoints=t,this.draw())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){var e,i,n,r,s="",a=this._currentPoints;if(a.length>0){for(var o=0,u=a.length;o<u;o++){var l=a[o][0],h=a[o][1];if(l&&l.length>0){s+=sg(d=l[0]);for(var c=0;c<l.length;c++)s+=ag(d=l[c]),(!Gd(i)||i<d.x)&&(i=d.x),(!Gd(e)||e>d.x)&&(e=d.x),(!Gd(n)||n>d.y)&&(n=d.y),(!Gd(r)||r<d.y)&&(r=d.y)}if(h&&h.length>0){var d;s+=sg(d=h[0]);for(var f=0,m=h.length;f<m;f++)s+=ag(d=h[f])}}s&&(s+=" Z"),this.bbox.x=e,this.bbox.y=n,this.bbox.width=i-e,this.bbox.height=r-n,t.prototype.setPath.call(this,s)}},e.prototype.setPath=function(e){return!!t.prototype.setPath.call(this,e)&&(this.points=[],this._bbox=this.group.getBBox(),!0)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new pg(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Polygon=bg;var gg=function(t){function e(){var e=t.call(this)||this;return e.className="Polyspline",e.tensionX=.5,e.tensionY=.5,e.applyTheme(),e}return Sd(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments,e=this.tensionX,i=this.tensionY;if(this.allPoints=[],t&&t.length>0){var n="";this._realSegments=[];for(var r=0,s=t.length;r<s;r++){var a=t[r],o=[];if(this._realSegments.push(o),a.length>0){var u=a[0],l=a[a.length-1],h=!1;Yd(u.x,3)==Yd(l.x)&&Yd(u.y)==Yd(l.y)&&(h=!0),n+=sg(a[0]);for(var c=0;c<a.length-1;c++){var d=a[c-1],f=a[c],m=a[c+1],v=a[c+2];0===c?d=a[c]:c==a.length-2&&(v=a[c+1]),v||(v=m),0===c?d=h?a[a.length-2]:a[r]:c==a.length-2&&(v=h?a[1]:a[c+1]);var p=pf(d,f,m,0,e,i),b=bf(0,f,m,v,e,i);n+=ug(m,p,b);var g=1.2*Math.ceil(uf(f,m,p,b,20)),y=f;if(g>0)for(var w=0;w<=g;w++){var S=vf(f,m,p,b,w/g);if(S.x!=y.x||S.y!=y.y){o.push(S);var x=Yd(cf(y,S),5);this._distance+=of(y,S),this.allPoints[Math.floor(this._distance)]={x:S.x,y:S.y,angle:x},y=S}}else o.push(d)}}var C=this.allPoints;if(C.length>1)for(var O=0;O<C.length;O++)if(!C[O])if(O>1)C[O]=C[O-1];else for(var M=1;M<C.length;M++)if(C[M]){C[O]=C[M];break}}this.path=n}},e.prototype.getClosestPointIndex=function(t){var e,i=this.allPoints,n=1/0;if(i.length>1)for(var r=1;r<i.length;r++){var s=of(t,i[r]);s<n&&(e=r,n=s)}return e},Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0),this.makePath()},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var i=0,n=this.allPoints,r=n.length;if(Gd(t)||(t=0),r>1){if(e&&r>3){if(t<0){t<-.01&&(t=-.01);var s=n[0],a=n[1];return{x:o=s.x-(s.x-a.x)*r*t,y:u=s.y-(s.y-a.y)*r*t,angle:cf(s,a)}}if(t>1){t>1.01&&(t=1.01);var o,u;s=n[n.length-2],a=n[n.length-3];return{x:o=s.x+(s.x-a.x)*r*(t-1),y:u=s.y+(s.y-a.y)*r*(t-1),angle:cf(s,{x:o,y:u})}}if(1==t){var l=n[n.length-1];return{x:l.x,y:l.y,angle:l.angle}}}else t<0&&(t=Math.abs(t),i=180),t>=1&&(t=.9999999999999);var h;return{x:(h=n[Math.floor(t*r)]).x,y:h.y,angle:h.angle+i}}return 1==r?{x:(h=n[0]).x,y:h.y,angle:h.angle}:{x:0,y:0,angle:0}},e}(mg);Om.registeredClasses.Polyspline=gg;var yg=function(t){function e(){var e=t.call(this)||this;return e.className="Slice",e.setPropertyValue("cornerRadius",0),e.setPropertyValue("startAngle",0),e.setPercentProperty("innerRadius",0),e.setPercentProperty("radius",0),e.setPropertyValue("arc",0),e.setPropertyValue("shiftRadius",0),e.strokeOpacity=1,e.setPropertyValue("layout","none"),e.slice=e.createChild(Pb),e.slice.isMeasured=!1,e._disposers.push(e.slice),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.radiusY;this.radius>0&&0==e&&(e=.01),this.slice.path=hg(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,e,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof cb&&this.updateGradient(this.realFill),this.realStroke instanceof cb&&this.updateGradient(this.realStroke)},e.prototype.updateGradient=function(t){t.element.attr({gradientUnits:"userSpaceOnUse"}),t.element.attr({r:this.radius}),t.cx=0,t.cy=0,t.element.attr({radius:this.radius})},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?ff([Sf(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),Sf(this.startAngle,this.startAngle+this.arc,this.radius)]):{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",yf(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){Gd(t)||(t=0),this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){var t=this.getPropertyValue("radius");return Gd(t)||(t=0),t},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return Gd(t)||(t=this.radius),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return rv(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(t){this.setPropertyValue("innerCornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(t){this.setPropertyValue("shiftRadius",t),t=this.getPropertyValue("shiftRadius"),this.dx=t*this.radius*this.ix,this.dy=t*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ix",{get:function(){return ef(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iy",{get:function(){return Qd(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");if(Gd(t))return t;var e=.5;t instanceof Id&&(e=t.value);var i=rv(this.innerRadius,this.radius);return this.ix*(i+(this.radius-i)*e)},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipY");if(Gd(t))return t;var e=.5;t instanceof Id&&(e=t.value);var i=rv(this.innerRadius,this.radius);return this.iy*(i+(this.radius-i)*e)+this.slice.dy},e}(Eb);Om.registeredClasses.Slice=yg;var wg=function(t){function e(){var e=t.call(this)||this;e.className="Preloader",e.width=Ad(100),e.height=Ad(100);var i=new Dp,n=e.createChild(Eb);n.shouldClone=!1;var r=n.createChild(yg);r.shouldClone=!1,r.radius=53,r.arc=360,r.fill=i.getFor("fill"),r.fillOpacity=.8,r.innerRadius=42,r.isMeasured=!1,e.backgroundSlice=r;var s=n.createChild(yg);s.shouldClone=!1,s.radius=50,s.innerRadius=45,s.fill=i.getFor("alternativeBackground"),s.fillOpacity=.2,s.isMeasured=!1,e.progressSlice=s;var a=n.createChild(Yb);return a.shouldClone=!1,a.horizontalCenter="middle",a.verticalCenter="middle",a.isMeasured=!1,a.fill=i.getFor("text"),a.align="center",a.valign="middle",a.textAlign="middle",a.fillOpacity=.4,e.label=a,e.background.opacity=1,e.background.fill=i.getFor("background"),e.contentAlign="center",e.contentValign="middle",e.delay=300,e.states.create("hidden").properties.opacity=0,e.visible=!1,e.hide(0),e.__disabled=!0,e._disposers.push(e.backgroundSlice),e._disposers.push(e.progressSlice),e._disposers.push(e.label),e._disposers.push(n),e}return Sd(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(t){var e=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",t),this.progressSlice.arc=360*t,this.label&&(this.label.text=Math.round(100*t)+"%"),t>=1?(this._started&&(this._started=void 0),Om.events.once("enterframe",(function(){var t=e.hide();t&&!t.isFinished()?t.events.once("animationended",(function(){e.__disabled=!0})):e.__disabled=!0})),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):t>0&&(this.delay?this._started?this._started+this.delay<=(new Date).getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=(new Date).getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(t){this.setPropertyValue("delay",t)},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.Preloader=wg;var Sg=function(t){function e(){var e=t.call(this)||this;e.className="ResizeButton",e.orientation="horizontal",e.layout="absolute",e.horizontalCenter="middle",e.verticalCenter="middle",e.draggable=!0,e.padding(8,8,8,8),e.background.cornerRadius(20,20,20,20);var i=new Pb;i.element=e.paper.add("path");var n=sg({x:-2,y:-6});return n+=ag({x:-2,y:6}),n+=sg({x:2,y:-6}),n+=ag({x:2,y:6}),i.path=n,i.pixelPerfect=!0,i.padding(0,4,0,4),i.stroke=(new Dp).getFor("alternativeText"),i.strokeOpacity=.7,e.icon=i,e.label.dispose(),e.label=void 0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"orientation",{set:function(t){var e=this.icon;e&&(e.rotation="horizontal"==t?0:-90)},enumerable:!0,configurable:!0}),e}(Xb);Om.registeredClasses.ResizeButton=Sg;var xg=function(t){function e(){var e=t.call(this)||this;e.className="CloseButton",e.padding(8,8,8,8),e.showSystemTooltip=!0,e.width=30,e.height=30;var i=new Dp;e.cursorOverStyle=fb.pointer;var n=e.background;n.cornerRadius(20,20,20,20);var r=i.getFor("background");n.fill=r,n.stroke=i.getFor("primaryButton"),n.strokeOpacity=1,n.strokeWidth=1;var s=i.getFor("primaryButtonActive"),a=n.states.getKey("hover");a.properties.strokeWidth=3,a.properties.fill=r;var o=n.states.getKey("down");o.properties.stroke=s,o.properties.fill=r;var u=new Pb;return u.element=e.paper.add("path"),u.stroke=n.stroke,e.icon=u,e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.pixelWidth/3,i=this.pixelHeight/3,n=sg({x:-e/2,y:-i/2});n+=ag({x:e/2,y:i/2}),n+=sg({x:e/2,y:-i/2}),n+=ag({x:-e/2,y:i/2}),this.icon.path=n,this.invalidateLayout()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},e}(Xb);Om.registeredClasses.CloseButton=xg;var Cg=function(t){function e(){var e=t.call(this)||this;e.className="SwitchButton",e.tooltipY=0,e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0,e.states.create("active");var i=new Dp,n=new Yb;n.fillOpacity=.3,n.states.create("active").properties.fillOpacity=1,n.isActive=!0,e.leftLabel=n;var r=new Xb,s=new Qb;r.contentValign="none",r.padding(0,0,0,0),s.radius=10,r.icon=s,r.icon.valign="middle",r.label=void 0;var a=Ad(100);r.background.cornerRadius(a,a,a,a),r.width=3.5*s.radius,r.height=2.1*s.radius,r.marginLeft=8,r.marginRight=8,r.togglable=!0,s.dx=.7*-s.radius,s.fill=i.getFor("primaryButton"),s.states.create("hover").properties.fill=i.getFor("primaryButtonHover");var o=s.states.create("active");o.properties.fill=i.getFor("primaryButtonActive"),o.properties.dx=.7*s.radius,e.switchButton=r,e.events.on("toggled",(function(){e.leftLabel.isActive=!e.isActive,e.rightLabel.isActive=e.isActive}));var u=new Yb;return u.fillOpacity=.3,u.states.create("active").properties.fillOpacity=1,e.rightLabel=u,e.role="button",e.focusable=!0,u.valign="middle",n.valign="middle",r.valign="middle",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(t){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(t){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switchButton",{get:function(){return this._switchButton},set:function(t){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=t,t&&(t.parent=this,t.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.leftLabel&&this.leftLabel.copyFrom(e.leftLabel),e.rightLabel&&this.rightLabel.copyFrom(e.rightLabel),e.switchButton&&this.switchButton.copyFrom(e.switchButton)},e}(Eb);Om.registeredClasses.SwitchButton=Cg;var Og=function(t){function e(){var e=t.call(this)||this;e._previousStart=0,e._previousEnd=1,e._prevStart=0,e._prevEnd=1,e._isBusy=!1,e._skipRangeEvents=!1,e.updateWhileMoving=!0,e.className="Scrollbar",e.minHeight=12,e.minWidth=12,e.animationDuration=0,e.animationEasing=Kv,e.margin(10,10,10,10);var i=new Dp,n=e.background;return n.cornerRadius(10,10,10,10),n.fill=i.getFor("fill"),n.fillOpacity=.5,e.showSystemTooltip=!0,e.startGrip=new Sg,e.endGrip=new Sg,e.events.on("transformed",(function(){e.updateThumb()}),e,!1),e.start=0,e.end=1,e.role="scrollbar",e.thumb.role="slider",e.thumb.readerLive="polite",e.startGrip.role="slider",e.endGrip.role="slider",e.events.once("inited",(function(){e._previousStart=void 0,e.dispatchRangeChange()}),void 0,!1),e.hideGrips=!1,e.orientation="horizontal",e.setSVGAttribute({"aria-valuemin":"0"}),e.setSVGAttribute({"aria-valuemax":"100"}),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),"horizontal"===this.orientation?(Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),Rd(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),Rd(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),Rd(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),Rd(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),Rd(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),Rd(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},e.prototype.validateLayout=function(){this.updateSize(),t.prototype.validateLayout.call(this),this.updateExtremes()},e.prototype.processBackground=function(){t.prototype.processBackground.call(this);var e=this.background;e.clickable=!0,e.events.on("hit",this.handleBgHit,this,void 0)},e.prototype.handleBgHit=function(t){this.makeBusy();var e=t.spritePoint;e=Av(e,this.background,this);var i=this.thumb;if("horizontal"==this.orientation){var n=e.x-i.pixelWidth/2;n=Xd(n,0,this.innerWidth-i.pixelWidth),this._thumbAnimation=i.animate({property:"x",to:n},this.animationDuration,this.animationEasing)}else{var r=e.y-i.pixelHeight/2;r=Xd(r,0,this.innerHeight-i.pixelHeight),this._thumbAnimation=i.animate({property:"y",to:r},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},e.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},e.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},e.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),1.1*this.animationDuration)},e.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},e.prototype.dispatchRangeChange=function(){this._previousEnd==this.end&&this._previousStart==this.start||(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},e.prototype.updateThumb=function(t){if(void 0===t&&(t=!0),this.parent){var e=this.thumb,i=this.start,n=this.end,r=this.startGrip,s=this.endGrip;if("horizontal"==this.orientation){var a=this.innerWidth;e.width=a*(n-i),e.maxX=a-e.pixelWidth,e.x=i*a,r.moveTo({x:e.pixelX,y:0},void 0,void 0,!0),s.moveTo({x:e.pixelX+e.pixelWidth,y:0},void 0,void 0,!0),r.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),r.readerValueNow=""+Math.round(100*i),r.readerValueText=r.readerTitle,s.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),s.readerValueNow=""+Math.round(100*n),s.readerValueText=s.readerTitle}else{var o=this.innerHeight;e.height=o*(n-i),e.maxY=o-e.pixelHeight,e.y=(1-n)*o,r.moveTo({x:0,y:e.pixelY+e.pixelHeight},void 0,void 0,!0),s.moveTo({x:0,y:e.pixelY},void 0,void 0,!0),r.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-i))+"%",position:1-i}).value),r.readerValueNow=""+Math.round(100*i),r.readerValueText=r.readerTitle,s.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-n))+"%",position:1-n}).value),s.readerValueNow=""+Math.round(100*n),s.readerValueText=s.readerTitle}e.readerTitle=this.language.translate("From %1 to %2",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),e.readerValueNow=""+Math.round(100*i),e.readerValueText=e.readerTitle,this.readerValueNow=""+Math.round(100*i),this.readerValueText=e.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&t&&this.dispatchRangeChange()}},e.prototype.updateExtremes=function(){var t=0,e=0,i=0,n=0;"horizontal"==this.orientation?(i=this.innerWidth,e=n=this.innerHeight/2):(n=this.innerHeight,t=i=this.innerWidth/2);var r=this.startGrip;r.minX=t,r.maxX=i,r.minY=e,r.maxY=n;var s=this.endGrip;s.minX=t,s.maxX=i,s.minY=e,s.maxY=n;var a=this.thumb;a.minX=t,a.maxX=i,a.minY=e,a.maxY=n},e.prototype.updateSize=function(){var t=this.orientation,e=this.startGrip;e&&(e.orientation=t),this.endGrip&&(this.endGrip.orientation=t);var i=this.thumb;i&&("horizontal"==t?(Gd(this._pixelWidth)||this.width instanceof Id||(this.width=Ad(100)),Rd(this.percentHeight)&&(this.height=this.minHeight),i.height=this.innerHeight,i.verticalCenter="middle",i.horizontalCenter="left"):(Gd(this._pixelHeight)||this.height instanceof Id||(this.height=Ad(100)),Rd(this.percentWidth)&&(this.width=this.minWidth),i.width=this.innerWidth,i.verticalCenter="top",i.horizontalCenter="middle"))},Object.defineProperty(e.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__start",{get:function(){return this._start},set:function(t){this._start=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__end=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__end",{get:function(){return this._end},set:function(t){this._end=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),e.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},e.prototype.fixRange=function(t){t.start==Yd(this._start,2)&&t.end==Yd(this._end,2)||(this._start=t.start,this._end=t.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},e.prototype.getPosition=function(t){return Xd(Yd(t,4),0,1)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&("horizontal"===t?(this.startGrip.cursorOverStyle=fb.horizontalResize,this.endGrip.cursorOverStyle=fb.horizontalResize):(this.startGrip.cursorOverStyle=fb.verticalResize,this.endGrip.cursorOverStyle=fb.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.updateByOrientation=function(){},Object.defineProperty(e.prototype,"startGrip",{get:function(){return this._startGrip},set:function(t){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endGrip",{get:function(){return this._endGrip},set:function(t){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),e.prototype.processGrip=function(t){t.parent=this,t.isMeasured=!1,t.focusable=!0,t.shouldClone=!1,t.zIndex=100,t.events.on("drag",this.handleGripDrag,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("down",this.makeBusy,this,!1),t.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(t)},e.prototype.handleGripDrag=function(t){this.makeBusy(),t.target===this._startGrip?this._usingGrip="start":this._usingGrip="end","horizontal"==this.orientation?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(e.prototype,"thumb",{get:function(){if(!this._thumb){var t=new Xb;t.background.cornerRadius(10,10,10,10),t.padding(0,0,0,0),this.thumb=t}return this._thumb},set:function(t){var e=this;t&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=t,t.parent=this,t.isMeasured=!1,t.inert=!0,t.draggable=!0,t.clickable=!0,t.hoverable=!0,t.focusable=!0,t.shouldClone=!1,t.zIndex=0,t.cursorOverStyle=fb.grab,t.cursorDownStyle=fb.grabbing,t.events.on("dragstart",this.makeBusy,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("positionchanged",this.handleThumbPosition,this,!1),t.events.on("sizechanged",this.handleThumbPosition,this,!1),t.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(Yp().body.events.on("keyup",(function(t){Bp.isKey(t.event,["space","enter"])&&e.thumb.isFocused&&(t.event.preventDefault(),e.handleDoubleClick())}))),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),e.prototype.handleDoubleClick=function(){this.makeBusy();var t=0,e=1;0!=this.start||1!=this.end?(this._prevStart=this.start,this._prevEnd=this.end):(t=this._prevStart,e=this._prevEnd);var i=this.animate([{property:"__start",to:t},{property:"__end",to:e}],this.animationDuration,this.animationEasing);i&&!i.isFinished()?(i.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=i):this.makeUnbusy()},e.prototype.handleThumbPosition=function(){var t=this.thumb;if("horizontal"==this.orientation){var e=this.innerWidth,i=t.innerWidth,n=t.pixelX;this._start=n/e,this._end=(n+i)/e,this.updateThumb()}else{var r=this.innerHeight,s=t.innerHeight,a=t.pixelY;a+s>r&&(a=r-s,t.y=a),this._start=1-(a+s)/r,this._end=1-a/r,this.updateThumb()}},e.prototype.createBackground=function(){return new Zb},Object.defineProperty(e.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(t){var e=this;this._hideGrips=t,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),t?(this._overDisposer=this.events.on("over",(function(){e.startGrip.show(),e.endGrip.show()}),void 0,!1),this._outDisposer=this.events.on("out",(function(){e.startGrip.hide(),e.endGrip.hide()}),void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(Eb);Om.registeredClasses.Scrollbar=Og;var Mg=function(t){function e(){var e=t.call(this)||this;return e.className="Slider",e.thumb.opacity=0,e.thumb.interactionsEnabled=!1,e.endGrip.opacity=0,e.endGrip.interactionsEnabled=!1,e.startGrip.events.on("drag",(function(){e.endGrip.x=e.startGrip.x,e.endGrip.y=e.startGrip.y})),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"__end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),e}(Og);Om.registeredClasses.Slider=Mg;var Tg=function(t){function e(){var e=t.call(this)||this;e.className="TextLink",e.selectable=!0;var i=new Dp;return e.fill=i.getFor("primaryButton").brighten(.3),e.states.create("hover").properties.fill=i.getFor("primaryButtonHover").brighten(.3),e.states.create("down").properties.fill=i.getFor("primaryButtonDown").brighten(.3),e.cursorOverStyle=fb.pointer,e.applyTheme(),e}return Sd(e,t),e}(Yb);Om.registeredClasses.TextLink=Tg;var kg=function(t){function e(){var e=t.call(this)||this;return e.properties={},e.isTemplate=!1,e._scale=1,e._nonScaling=!0,e.className="Filter",e.filterPrimitives=new Am,e.properties.filterUnits="objectBoundingBox",e.filterPrimitives.events.on("inserted",(function(t){e._disposers.push(t.newValue)})),e.width=120,e.height=120,e.applyTheme(),e}return Sd(e,t),e.prototype.appendPrimitives=function(t){cm(this.filterPrimitives.iterator(),(function(e){t.add(e)}))},e.prototype.animate=function(t,e,i){return new cp(this,t,e,i).start()},Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),nm(e.properties,(function(t,e){i[t]=e}))},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:ub()},set:function(t){this._paper!=t&&(this._paper=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new hp(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.updateScale()},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){},Object.defineProperty(e.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(t){this.properties.filterUnits=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(t){this._nonScaling=t,t||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{set:function(t){this.setSprite(t)},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(t){this._sprite&&this._sprite!=t&&this._sprite.filters.removeValue(this),this._sprite=t},e}(Xm),Ig=function(t){function e(){var e=t.call(this)||this;return e.className="DropShadowFilter",e.color=Ym("#000"),e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.feOffset=e.paper.add("feOffset"),e.feOffset.attr({result:"offsetBlur"}),e.filterPrimitives.push(e.feOffset),e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":e.color}),e.filterPrimitives.push(e.feFlood),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({in2:"offsetBlur",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feMerge=e.paper.addGroup("feMerge"),e.feMerge.add(e.paper.add("feMergeNode")),e.feMerge.add(e.paper.add("feMergeNode").attr({in:"SourceGraphic"})),e.filterPrimitives.push(e.feMerge),e.width=200,e.height=200,e.blur=1.5,e.dx=3,e.dy=3,e.opacity=.5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.feFlood&&this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feFlood.attr({"flood-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.properties.dx},set:function(t){this.properties.dx=t,this.feOffset.attr({dx:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.properties.dy},set:function(t){this.properties.dy=t,this.feOffset.attr({dy:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},e}(kg);Om.registeredClasses.DropShadowFilter=Ig;var Ag=function(t){function e(){var e=t.call(this)||this;e._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},e._pointTo={x:0,y:0},e.fitPointerToBounds=!1,e._verticalOrientation="up",e.fixDoc=!0,e.className="Tooltip",e.isMeasured=!1,e.getFillFromObject=!0,e.margin(5,5,5,5),e.defaultState.transitionDuration=1,e.hiddenState.transitionDuration=1;var i=e.background;i.interactionsEnabled=!1,i.fillOpacity=.9,i.strokeWidth=1,i.strokeOpacity=1,i.stroke=Ym("#ffffff"),i.cornerRadius=3,i.pointerLength=6,i.pointerBaseWidth=10;var n=new Ig;n.dy=1,n.dx=1,n.opacity=.5,i.filters.push(n),e.autoTextColor=!0;var r=e.createChild(Yb);return r.shouldClone=!1,e.label=r,r.padding(7,12,4,12),r.interactionsEnabled=!1,r.horizontalCenter="middle",r.fill=Ym("#ffffff"),e._disposers.push(r),e.label.events.on("sizechanged",e.drawBackground,e),e.label.zIndex=1,e.pointerOrientation="vertical",e.animationDuration=0,e.animationEasing=Kv,e.setPropertyValue("showInViewport",!1),e.role="tooltip",e.visible=!1,e.opacity=0,e.x=0,e.y=0,e.events.on("visibilitychanged",e.handleVisibility,e),e.applyTheme(),e}return Sd(e,t),e.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(e.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(t){this.setPropertyValue("getStrokeFromObject",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(t){this.setPropertyValue("autoTextColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(t){var e=this;this.setPropertyValue("keepTargetHover",t,!0)&&t&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!0)}))),this._disposers.push(this.events.on("out",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!1)}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(t){this.setPropertyValue("showInViewport",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(t){this.setPropertyValue("getFillFromObject",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new ng},Object.defineProperty(e.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(t){this.setPropertyValue("pointerOrientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.label.html},set:function(t){this.label.html!=t&&(this.label.html=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text!=t&&(this.label.text=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.label;e.invalid&&e.validate();var i,n,r=this._pointTo.x,s=this._pointTo.y,a=this._boundingRect,o=e.measuredWidth,u=e.measuredHeight,l=this.background.pointerLength;if(this.ignoreBounds&&(a=void 0),a&&this.fixDoc&&o>a.width){Lv({x:a.x,y:a.y},this.parent);var h=Lv({x:a.x+a.width,y:a.y+a.height},this.parent),c=document.body.offsetWidth;h.x>c/2?a.x=a.width-o:a.width=a.x+o}var d=this.pointerOrientation;"horizontal"==d||"left"==d||"right"==d?(n=-u/2,i="horizontal"==d?a&&r>a.x+a.width/2?-o/2-l:o/2+l:"left"==d?o/2+l:-o/2-l):(a&&(i=Xd(0,a.x-r+o/2,a.x-r+a.width-o/2)),"vertical"==d?a&&s>a.y+u+l?(n=-u-l,this._verticalOrientation="up"):(n=l,this._verticalOrientation="down"):"down"==d?(n=-u-l,this._verticalOrientation="up"):(n=l,this._verticalOrientation="down")),a&&(n=Xd(n,a.y-s,a.y+a.height-u-s)),e.x=i,e.y=n,this.drawBackground()},e.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},e.prototype.drawBackground=function(){var t=this.label,e=this.background,i=t.measuredWidth,n=t.measuredHeight,r=this._boundingRect,s=i,a=t.pixelX-i/2,o=n,u=t.pixelY,l=this._pointTo.x,h=this._pointTo.y,c=r.x-l,d=c+r.width,f=r.y-h,m=f+r.height;e.x=a,e.y=u,e.width=s,e.height=o,this.fitPointerToBounds?(e.pointerX=Xd(-e.x,c-e.x,d-e.x),e.pointerY=Xd(-e.y,f-e.y,m-e.y)):(e.pointerX=-e.x,e.pointerY=-e.y),e.validate()},e.prototype.delayedPointTo=function(t,e){var i=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=Om.events.once("exitframe",(function(){i.pointTo(t,e)})),this.addDisposer(this._pointToDisposer)},e.prototype.pointTo=function(t,e){this._pointTo.x==t.x&&this._pointTo.y==t.y||(this._pointTo=t,this.invalidate(),!this.visible||e?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):0==this.pixelX&&0==this.pixelY?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new cp(this,[{property:"x",to:t.x,from:this.pixelX},{property:"y",to:t.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},e.prototype.setBounds=function(t){var e=this._boundingRect;e.x==t.x&&e.y==t.y&&e.width==t.width&&e.height==t.height||(this._boundingRect=t,this.invalidate())},Object.defineProperty(e.prototype,"boundingContainer",{set:function(t){this._boundingContainer=t,t.events.on("sizechanged",this.updateBounds,this),t.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),e.prototype.updateBounds=function(){var t=this._boundingContainer,e=jv({x:t.pixelX,y:t.pixelY,width:t.maxWidth,height:t.maxHeight},t);this.setBounds(e)},Object.defineProperty(e.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(t){this.setPropertyValue("ignoreBounds",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),e._boundingRect&&(this._boundingRect=e._boundingRect)},e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(Eb);Om.registeredClasses.Tooltip=Ag;var jg=function(t){function e(){var e=t.call(this)||this;return e.className="Trapezoid",e.element=e.paper.add("path"),e.topSide=Ad(100),e.bottomSide=Ad(100),e.leftSide=Ad(100),e.rightSide=Ad(100),e.isMeasured=!1,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,i=this.pixelHeight,n=rv(this.topSide,e),r=rv(this.bottomSide,e),s=rv(this.leftSide,i),a=rv(this.rightSide,i),o=(e-n)/2,u=(i-s)/2,l=e-(e-n)/2,h=(i-a)/2,c=e-(e-r)/2,d=i-(i-a)/2,f=(e-r)/2,m=i-(i-s)/2,v="",p="",b="",g="";if(Rd(this.horizontalNeck)){var y=this.horizontalNeck.value;v=ag({x:e*y,y:Math.max(u,h)}),b=ag({x:e*y,y:Math.min(d,m)})}if(Rd(this.verticalNeck)){var w=this.verticalNeck.value;p=ag({x:Math.min(l,c),y:i*w}),g=ag({x:Math.max(o,f),y:i*w})}var S=sg({x:o,y:u})+v+ag({x:l,y:h})+p+ag({x:c,y:d})+b+ag({x:f,y:m})+g;this.path=S},Object.defineProperty(e.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(t){this.setPercentProperty("topSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(t){this.setPercentProperty("bottomSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(t){this.setPercentProperty("leftSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(t){this.setPercentProperty("rightSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(t){this.setPropertyValue("horizontalNeck",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(t){this.setPropertyValue("verticalNeck",t,!0)},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Trapezoid=jg;var Fg=function(t){function e(){var e=t.call(this)||this;return e.className="Triangle",e.element=e.paper.add("path"),e.direction="top",e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e,i=this.pixelWidth,n=this.pixelHeight;switch(this.direction){case"right":e=sg({x:0,y:0})+ag({x:i,y:n/2})+ag({x:0,y:n})+" Z";break;case"left":e=sg({x:i,y:0})+ag({x:0,y:n/2})+ag({x:i,y:n})+" Z";break;case"bottom":e=sg({x:0,y:0})+ag({x:i,y:0})+ag({x:i/2,y:n})+" Z";break;case"top":e=sg({x:i/2,y:0})+ag({x:i,y:n})+ag({x:0,y:n})+" Z"}this.path=e},Object.defineProperty(e.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(t){this.setPropertyValue("direction",t,!0)},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Triangle=Fg;var Dg=function(){function t(t,e){this._tensionX=t,this._tensionY=e}return t.prototype.smooth=function(t){for(var e=t.length-1;e>0;e--){var i=t[e],n=t[e-1];Math.abs(i.x-n.x)<.1&&Math.abs(i.y-n.y)<.1&&t.splice(e-1,1)}var r=this._tensionX,s=this._tensionY;if(t.length<3||r>=1&&s>=1)return rg(t);var a=t[0],o=t[t.length-1],u=!1;Yd(a.x,3)==Yd(o.x)&&Yd(a.y)==Yd(o.y)&&(u=!0);for(var l="",h=(e=0,t.length-1);e<h;e++){i=t[e-1],n=t[e];var c=t[e+1],d=t[e+2];0===e?i=u?t[t.length-2]:t[e]:e==t.length-2&&(d=u?t[1]:t[e+1]),l+=ug(c,pf(i,n,c,0,r,s),bf(0,n,c,d,r,s))}return l},t}();function Pg(t,e,i,n,r,s){var a=t.x,o=t.y,u=e.x,l=e.y,h=of(t,e);s&&(i=h/Math.round(h/i));var c=Om.getCache(ov(["wavedLine",t.x,e.x,t.y,e.y,i,n]));if(!c){if(h>0){var d=Math.atan2(l-o,u-a),f=Math.cos(d),m=Math.sin(d),v=i*f,p=i*m;if(i<=1||n<=1)c=ag(e);else{var b=Math.round(2*h/i),g=[],y=1;u<a&&(y*=-1),l<o&&(y*=-1);for(var w=0;w<=b;w++){var S=a+w*v/2+(y*=-1)*n/2*m,x=o+w*p/2-y*n/2*f;g.push({x:S,y:x})}c=new Dg(r,r).smooth(g)}}else c="";Om.setCache(ov(["wavedLine",t.x,e.x,t.y,e.y,i,n]),c)}return c}var Lg=function(){function t(t,e){this._reversed=t,this._closed=e.closed}return t.prototype._curve=function(t,e,i,n,r,s){var a=(e-t)/3;return this._reversed?ug({x:n,y:e},{x:i+a*r,y:t+a},{x:n-a*s,y:e-a}):ug({x:e,y:n},{x:t+a,y:i+a*r},{x:e-a,y:n-a*s})},t.prototype.smooth=function(t){var e=this,i=NaN,n=NaN,r=NaN,s=NaN,a=NaN,o=0,u="";switch(kf(t,(function(t){var l=t.x,h=t.y;if(e._reversed){var c=l;l=h,h=c}var d=NaN;if(l!==n||h!==s){switch(o){case 0:o=1,e._reversed?u+=ag({x:h,y:l}):u+=ag({x:l,y:h});break;case 1:o=2;break;case 2:o=3,u+=e._curve(i,n,r,s,Ng(i,n,r,s,d=Rg(i,n,r,s,l,h)),d);break;default:u+=e._curve(i,n,r,s,a,d=Rg(i,n,r,s,l,h))}i=n,n=l,r=s,s=h,a=d}})),o){case 2:this._reversed?u+=ag({x:s,y:n}):u+=ag({x:n,y:s});break;case 3:u+=this._curve(i,n,r,s,a,Ng(i,n,r,s,a))}return this._closed&&(u+=" Z"),u},t}();function Eg(t){return t<0?-1:1}function Ng(t,e,i,n,r){var s=e-t;return s?(3*(n-i)/s-r)/2:r}function Rg(t,e,i,n,r,s){var a=e-t,o=r-e,u=(n-i)/(a||o<0&&-0),l=(s-n)/(o||a<0&&-0),h=(u*o+l*a)/(a+o);return(Eg(u)+Eg(l))*Math.min(Math.abs(u),Math.abs(l),.5*Math.abs(h))||0}var Bg=function(t){function e(e){return t.call(this,!1,e)||this}return Sd(e,t),e}(Lg),_g=function(t){function e(e){return t.call(this,!0,e)||this}return Sd(e,t),e}(Lg),zg=function(t){function e(){var e=t.call(this)||this;return e.className="WavedCircle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.fill=void 0,e.fillOpacity=0,e.tension=.8,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){var t="",e=this.pixelRadius;e>0&&(t=sg((i=this.getPoints(e))[0])+new Dg(this.tension,this.tension).smooth(i));var i,n=this.pixelInnerRadius;n>0&&((i=this.getPoints(n)).reverse(),t+=sg(i[0])+new Dg(this.tension,this.tension).smooth(i));this.path=t},e.prototype.getPoints=function(t){for(var e=t*Math.PI*2,i=this.waveHeight/2,n=e/Math.round(e/this.waveLength),r=n/2,s=[],a=e/n,o=0;o<=a;o++){var u=o*n/e*360,l=(o*n+r)/e*360;s.push({x:(t-i)*ef(u),y:(t-i)*Qd(u)}),s.push({x:(t+i)*ef(l),y:(t+i)*Qd(l)})}return s.pop(),s},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return rv(this.innerRadius,rf(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(Qb);Om.registeredClasses.WavedCircle=zg;var Vg=function(t){function e(){var e=t.call(this)||this;return e.className="WavedLine",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.pixelPerfect=!1,e.fill=Ym(),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2};this.path=sg(t)+Pg(t,e,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(ig),Gg=function(t){function e(){var e=t.call(this)||this;return e.className="WavedRectangle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.setPropertyValue("wavedLeft",!0),e.setPropertyValue("wavedRight",!0),e.setPropertyValue("wavedTop",!0),e.setPropertyValue("wavedBottom",!0),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,i=this.pixelHeight;if(e>0&&i>0){var n={x:0,y:0},r={x:e,y:0},s={x:e,y:i},a={x:0,y:i},o=Math.min(e,this.waveLength),u=Math.min(i,this.waveHeight),l=Math.min(i,this.waveLength),h=Math.min(e,this.waveHeight),c="",d="",f="",m="";this.wavedTop&&(c=Pg(n,r,o,u,this.tension,!0)),this.wavedRight&&(d=Pg(r,s,l,h,this.tension,!0)),this.wavedBottom&&(f=Pg(s,a,o,u,this.tension,!0)),this.wavedLeft&&(m=Pg(a,n,l,h,this.tension,!0)),this.path=sg(n)+c+ag(r)+d+ag(s)+f+ag(a)+m+"z"}},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.setWavedSides=function(t,e,i,n){this.wavedTop=t,this.wavedRight=e,this.wavedBottom=i,this.wavedLeft=n},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(t){this.setPropertyValue("wavedRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(t){this.setPropertyValue("wavedLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(t){this.setPropertyValue("wavedTop",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(t){this.setPropertyValue("wavedBottom",t,!0)},enumerable:!0,configurable:!0}),e}(Lb),$g=function(t){function e(){var e=t.call(this)||this;e.className="ZoomOutButton",e.padding(9,9,9,9),e.showSystemTooltip=!0;var i=new Dp,n=e.background;n.cornerRadius(20,20,20,20),n.fill=i.getFor("primaryButton"),n.stroke=i.getFor("primaryButtonStroke"),n.strokeOpacity=0,n.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),n.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var r=new Pb;r.element=e.paper.add("path");var s=sg({x:0,y:0});return s+=ag({x:11,y:0}),r.path=s,r.pixelPerfect=!0,r.padding(8,3,8,3),r.stroke=i.getFor("primaryButtonText"),e.icon=r,e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},e}(Xb);Om.registeredClasses.ZoomOutButton=$g;var Wg=function(t){function e(){var e=t.call(this)||this;e.className="PlayButton",e.padding(12,12,12,12),e.showSystemTooltip=!0;var i=new Dp,n=e.background;n.cornerRadius(25,25,25,25),n.fill=i.getFor("primaryButton"),n.stroke=i.getFor("primaryButtonStroke"),n.strokeOpacity=0,n.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),n.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var r=new Fg;r.direction="right",r.width=9,r.height=11,r.marginLeft=1,r.marginRight=1,r.horizontalCenter="middle",r.verticalCenter="middle",r.stroke=i.getFor("primaryButtonText"),r.fill=r.stroke,e.icon=r;var s=new Zb;s.width=11,s.height=11,s.horizontalCenter="middle",s.verticalCenter="middle",s.cornerRadius(0,0,0,0),s.stroke=i.getFor("primaryButtonText"),s.fill=r.stroke,e.togglable=!0;var a=e.states.create("active");return a.transitionDuration=0,a.properties.icon=s,e.defaultState.transitionDuration=0,e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},e}(Xb);Om.registeredClasses.PlayButton=Wg;var qg=function(t){function e(){var e=t.call(this)||this;return e.className="ColorModifier",e.applyTheme(),e}return Sd(e,t),e.prototype.modify=function(t){return t},e}(Xm);Om.registeredClasses.ColorModifier=qg;var Hg=function(t){function e(){var e=t.call(this)||this;return e.lightnesses=[],e.brightnesses=[],e.opacities=[],e.offsets=[],e.className="GradientModifier",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(t){this._lightnesses=t,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(t){this._brightnesses=t,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacities",{get:function(){return this._opacities},set:function(t){this._opacities=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},set:function(t){this._offsets=t},enumerable:!0,configurable:!0}),e.prototype.modify=function(t){this.gradient.clear();var e=0;this.opacities&&(e=nf(e,this.opacities.length)),this.lightnesses&&(e=nf(e,this.lightnesses.length)),this.brightnesses&&(e=nf(e,this.brightnesses.length));for(var i,n,r=1,s=0;s<e;s++){var a=t;this.opacities&&Gd(this.opacities[s])&&(r=this.opacities[s]),this.lightnesses&&Gd(this.lightnesses[s])&&(i=this.lightnesses[s],n=void 0),this.brightnesses&&Gd(this.brightnesses[s])&&(n=this.brightnesses[s],i=void 0),Gd(n)?a=t.brighten(this.brightnesses[s]):Gd(i)&&(a=t.lighten(this.lightnesses[s]));var o=this.offsets[s];this.gradient.addColor(a,r,o)}return this.gradient},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this._offsets=e.offsets,this._brightnesses=e.brightnesses,this._lightnesses=e.lightnesses,this._opacities=e.opacities},e}(qg);Om.registeredClasses.GradientModifier=Hg;var Ug=function(t){function e(){var e=t.call(this)||this;return e.className="LinearGradientModifier",e.gradient=new hb,e.applyTheme(),e}return Sd(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(Hg);Om.registeredClasses.LinearGradientModifier=Ug;var Kg=function(t){function e(){var e=t.call(this)||this;return e.className="Cone",e.angle=30,e.radius=Ad(100),e.topRadius=Ad(100),e.top=e.createChild(tg),e.top.shouldClone=!1,e.bottom=e.createChild(tg),e.bottom.shouldClone=!1,e.body=e.createChild(Pb),e.body.shouldClone=!1,e.body.setElement(e.paper.add("path")),e.layout="none",e.bodyFillModifier=new Ug,e.bodyFillModifier.lightnesses=[0,-.25,0],e.body.fillModifier=e.bodyFillModifier,e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),am(this,this.top,Db),am(this,this.bottom,Db),am(this,this.body,Db);var e,i,n,r=this.innerWidth,s=this.innerHeight,a=this.bottom,o=this.top,u=this.angle;"horizontal"==this.orientation?(e=s/2,a.y=s/2,o.y=s/2,o.x=r,i=(90-u)/90,n=0,this.bodyFillModifier.gradient.rotation=90):(i=0,n=(90-u)/90,e=r/2,a.y=s,a.x=r/2,o.x=r/2,this.bodyFillModifier.gradient.rotation=0);var l,h=this.radius.value*e,c=this.topRadius.value*e;a.radius=h-h*i,a.radiusY=h-h*n,o.radius=c-c*i,o.radiusY=c-c*n,l="horizontal"==this.orientation?sg({x:0,y:s/2-a.radiusY})+lg(-90,-180,a.radius,a.radiusY)+ag({x:r,y:s/2+o.radiusY})+lg(90,180,o.radius,o.radiusY)+" Z":sg({x:r/2-o.radius,y:0})+lg(180,-180,o.radius,o.radiusY)+ag({x:r/2+a.radius,y:s})+lg(0,180,a.radius,a.radiusY)+" Z",this.body.path=l},Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(t){this.setPropertyValue("topRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(Eb),Jg=function(t){function e(){var e=t.call(this)||this;return e.className="LightenFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.lightness=0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(t){this.properties.lightness=t;var e=t+1;this.feColorMatrix.attr({values:e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),e}(kg);Om.registeredClasses.LightenFilter=Jg;var Yg=function(t){function e(){var e=t.call(this)||this;e.angle=30,e.depth=30,e.className="Rectangle3D",e.layout="none";var i=e.createChild(Pb);i.shouldClone=!1,i.setElement(e.paper.add("path")),i.isMeasured=!1,e.sideBack=i,e._disposers.push(e.sideBack);var n=e.createChild(Pb);n.shouldClone=!1,n.setElement(e.paper.add("path")),n.isMeasured=!1,e.sideBottom=n,e._disposers.push(e.sideBottom);var r=e.createChild(Pb);r.shouldClone=!1,r.setElement(e.paper.add("path")),r.isMeasured=!1,e.sideLeft=r,e._disposers.push(e.sideLeft);var s=e.createChild(Pb);s.shouldClone=!1,s.setElement(e.paper.add("path")),s.isMeasured=!1,e.sideRight=s,e._disposers.push(e.sideRight);var a=e.createChild(Pb);a.shouldClone=!1,a.setElement(e.paper.add("path")),a.isMeasured=!1,e.sideTop=a,e._disposers.push(e.sideTop);var o=e.createChild(Pb);return o.shouldClone=!1,o.setElement(e.paper.add("path")),o.isMeasured=!1,e.sideFront=o,e._disposers.push(e.sideFront),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,i=this.innerHeight,n=this.depth,r=this.angle,s=Qd(r),a=ef(r),o={x:0,y:0},u={x:e,y:0},l={x:e,y:i},h={x:0,y:i},c={x:n*a,y:-n*s},d={x:n*a+e,y:-n*s},f={x:n*a+e,y:-n*s+i},m={x:n*a,y:-n*s+i};this.sideFront.path=sg(o)+ag(u)+ag(l)+ag(h)+" Z",this.sideBack.path=sg(c)+ag(d)+ag(f)+ag(m)+" Z",this.sideLeft.path=sg(o)+ag(c)+ag(m)+ag(h)+" Z",this.sideRight.path=sg(u)+ag(d)+ag(f)+ag(l)+" Z",this.sideBottom.path=sg(h)+ag(m)+ag(f)+ag(l)+" Z",this.sideTop.path=sg(o)+ag(c)+ag(d)+ag(u)+" Z"},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){var i;if(t.prototype.setFill.call(this,e),$d(e)&&!("r"in e)||(e=Zm(e)),e instanceof Jm)i=e.hex;else if(e instanceof hb||e instanceof cb)i=e.stops.getIndex(0).color.hex;else{var n=new Jg;n.lightness=-.2,this.sideBack.filters.push(n);var r=n.clone();r.lightness=-.4,this.sideLeft.filters.push(r);var s=n.clone();s.lightness=-.2,this.sideRight.filters.push(s);var a=n.clone();a.lightness=-.1,this.sideTop.filters.push(a);var o=n.clone();o.lightness=-.5,this.sideBottom.filters.push(o)}i&&(this.sideBack.fill=Ym(i).lighten(-.2),this.sideLeft.fill=Ym(i).lighten(-.4),this.sideRight.fill=Ym(i).lighten(-.2),this.sideTop.fill=Ym(i).lighten(-.1),this.sideBottom.fill=Ym(i).lighten(-.5))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.sideBack.copyFrom(e.sideBack),this.sideLeft.copyFrom(e.sideLeft),this.sideRight.copyFrom(e.sideRight),this.sideTop.copyFrom(e.sideTop),this.sideBottom.copyFrom(e.sideBottom)},e}(Eb),Zg=function(t){function e(){var e=t.call(this)||this;e.className="Slice3D",e.layout="none";var i=e.createChild(Pb);e.edge=i,i.shouldClone=!1,i.isMeasured=!1,i.toBack(),e.angle=30,e.depth=20;var n=e.createChild(Pb);e.sideA=n,n.shouldClone=!1,n.isMeasured=!1;var r=e.createChild(Pb);return e.sideB=r,r.shouldClone=!1,r.isMeasured=!1,e.applyTheme(),e}return Sd(e,t),e.prototype.setFill=function(e){var i;if(t.prototype.setFill.call(this,e),e instanceof Jm)i=e.hex;else if(e instanceof hb||e instanceof cb)i=e.stops.getIndex(0).color.hex;else{var n=new Jg;n.lightness=-.25,this.edge.filters.push(n),this.sideA.filters.push(n.clone()),this.sideB.filters.push(n.clone())}if(i){var r=Ym(i).lighten(-.25);this.edge.fill=r,this.sideA.fill=r,this.sideB.fill=r,this.edge.stroke=r,this.sideA.stroke=r,this.sideB.stroke=r}},e.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,t.prototype.draw.call(this),0!==this.arc&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var e=this.startAngle,i=this.arc,n=this.pixelInnerRadius||0,r=this.radiusY||0,s=this.radius,a=e+i,o=r/s*n,u={x:ef(e)*n,y:Qd(e)*o},l={x:ef(e)*s,y:Qd(e)*r},h={x:ef(a)*s,y:Qd(a)*r},c={x:ef(a)*n,y:Qd(a)*o},d=this.depth,f={x:u.x,y:u.y-d},m={x:l.x,y:l.y-d},v={x:h.x,y:h.y-d},p={x:c.x,y:c.y-d},b="",g=Math.ceil(i/5),y=i/g,w=e,S=m,x=0;x<g;x++)if((w+=y)>0&&w<180){b+=sg(S);var C={x:ef(w)*s,y:Qd(w)*r-d};b+=ag({x:S.x,y:S.y+d}),b+=cg({x:C.x,y:C.y+d},s,r,!0),b+=ag(C),b+=cg(S,s,r),b+="z",S=C}else{b+=sg(S),b+=cg(C={x:ef(w)*s,y:Qd(w)*r-d},s,r,!0),b+=ag({x:C.x,y:C.y+d}),b+=cg({x:S.x,y:S.y+d},s,r),b+=ag(S),b+="z",S=C}S=f,w=e;for(x=0;x<g;x++)if((w+=y)>0&&w<180){b+=sg(S);C={x:ef(w)*n,y:Qd(w)*o-d};b+=ag({x:S.x,y:S.y+d}),b+=cg({x:C.x,y:C.y+d},n,o,!0),b+=ag(C),b+=cg(S,n,o),b+="z",S=C}else{b+=sg(S),b+=cg(C={x:ef(w)*n,y:Qd(w)*o-d},n,o,!0),b+=ag({x:C.x,y:C.y+d}),b+=cg({x:S.x,y:S.y+d},n,o),b+=ag(S),b+="z",S=C}this.edge.path=b,this.sideA.path=sg(u)+ag(l)+ag(m)+ag(f)+" Z",this.sideB.path=sg(h)+ag(c)+ag(p)+ag(v)+" Z",this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-d}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){var t=this.getPropertyValue("angle");return Gd(t)||(t=0),t},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return Gd(t)||(t=this.radius-this.radius*this.angle/90),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.edge.copyFrom(e.edge),this.sideA.copyFrom(e.sideA),this.sideB.copyFrom(e.sideB)},e}(yg),Xg=function(t){function e(){var e=t.call(this)||this;return e.className="RadialGradientModifier",e.gradient=new cb,e.applyTheme(),e}return Sd(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(Hg);Om.registeredClasses.RadialGradientModifier=Xg;var Qg=function(t){function e(){var e=t.call(this)||this;return e.properties.gap=0,e._line=e.paper.add("path"),e.addElement(e._line),e}return Sd(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var e=this.width,i=this.height,n="";if(this.gap)for(var r=this.gap+this.strokeWidth,s=this.height/r,a=-s/2;a<1.5*s;a++)Math.round(this.rotation/90)!=this.rotation/90?(n+=sg({x:-e,y:(a+.5)*r})+ag({x:2*e,y:(a+.5)*r}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):n+=sg({x:-e,y:a*r})+ag({x:2*e,y:a*r});else Math.round(this.rotation/90)!=this.rotation/90?(n=sg({x:-e,y:i/2})+ag({x:2*e,y:i/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):n=sg({x:0,y:0})+ag({x:e,y:0});this._line.attr({d:n})}},Object.defineProperty(e.prototype,"gap",{get:function(){return this.properties.gap},set:function(t){this.properties.gap=t,this.draw()},enumerable:!0,configurable:!0}),e}(lb);Om.registeredClasses.LinePattern=Qg;var ty=function(t){function e(){var e=t.call(this)||this;return e.properties.radius=2,e._circle=e.paper.add("circle"),e.addElement(e._circle),e.shapeRendering="auto",e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.properties.radius},set:function(t){this.properties.radius=t,this.draw()},enumerable:!0,configurable:!0}),e}(lb);Om.registeredClasses.CirclePattern=ty;var ey=function(t){function e(){var e=t.call(this)||this;return e.rectHeight=1,e.rectWidth=1,e._rect=e.paper.add("rect"),e.addElement(e._rect),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(e.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(t){this.properties.rectWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(t){this.properties.rectHeight=t,this.draw()},enumerable:!0,configurable:!0}),e}(lb);Om.registeredClasses.RectPattern=ey;var iy=function(t){function e(){var e=t.call(this)||this;return e.className="ColorizeFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.intensity=1,e.applyTheme(),e}return Sd(e,t),e.prototype.applyFilter=function(){var t,e,i,n=this.intensity,r=1-n,s=this.color;s&&s.rgb?(t=s.rgb.r/255*n,e=s.rgb.g/255*n,i=s.rgb.b/255*n):(t=0,e=0,i=0),this.feColorMatrix.attr({values:r+" 0 0 0 "+t+" 0 "+r+" 0 0 "+e+" 0 0 "+r+" 0 "+i+" 0 0 0 1 0"})},Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(t){this.properties.intensity=t,this.applyFilter()},enumerable:!0,configurable:!0}),e}(kg);Om.registeredClasses.ColorizeFilter=iy;var ny=function(t){function e(){var e=t.call(this)||this;return e.className="DesaturateFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"saturate"}),e.filterPrimitives.push(e.feColorMatrix),e.width=120,e.height=120,e.saturation=0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(t){this.properties.saturation=t,this.feColorMatrix.attr({values:t.toString()})},enumerable:!0,configurable:!0}),e}(kg);Om.registeredClasses.DesaturateFilter=ny;var ry=function(t){function e(){var e=t.call(this)||this;return e.className="BlurFilter",e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.width=200,e.height=200,e.blur=1.5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e}(kg);Om.registeredClasses.BlurFilter=ry;var sy=function(t){function e(){var e=t.call(this)||this;return e.className="FocusFilter",e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":(new Dp).getFor("primaryButtonHover"),result:"base"}),e.filterPrimitives.push(e.feFlood),e.feMorphology=e.paper.add("feMorphology"),e.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),e.filterPrimitives.push(e.feMorphology),e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),e.filterPrimitives.push(e.feColorMatrix),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feBlend=e.paper.add("feBlend"),e.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),e.filterPrimitives.push(e.feBlend),e.width=130,e.height=130,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.feMorphology.attr({radius:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+t+" 0"})},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.group.removeStyle("outline"),e.group.addStyle({outline:"none"}),t.prototype.setSprite.call(this,e)},e}(kg),ay=function(t){function e(){var e=t.call(this)||this;return e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Jm({r:103,g:183,b:220}),e.stepOptions={},e.passOptions={brighten:-.2},e.step=1,e.minColors=20,e.minLightness=.2,e.maxLightness=.9,e.shuffle=!1,e.wrap=!0,e.reuse=!1,e.saturation=1,e.className="ColorSet",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.getReusableColor=function(t){if(0==this._list.length)return this.generate(1),this.list[0];var e=t-Math.floor(t/this._list.length)*this.list.length;return this.list[e]},e.prototype.next=function(){var t;return this.list.length<=this._currentStep?this.reuse?t=this.getReusableColor(this._currentStep):(this.generate(nf(this.minColors,this._currentStep+1)),t=this.list[this._currentStep]):t=this.list[this._currentStep],this._currentStep+=this.step,t.saturate(this.saturation)},e.prototype.getIndex=function(t){var e;return this.list.length<=t?this.reuse?e=this.getReusableColor(t):(this.generate(this.minColors),e=this.getIndex(t)):e=this.list[t],e.saturate(this.saturation)},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.generate=function(t){var e=Um(Bd(this.currentColor.rgb)),i=Rd(this.stepOptions.hue)?this.stepOptions.hue:1/t,n={brighten:0,lighten:0,hue:e.h,lightness:e.l,saturation:e.s},r=[],s=0==this.list.length?0:1;if(this.reuse)for(var a=s;a<=t;a++)r.push(Um(Bd(this._list[a].rgb)).h);else for(a=s;a<=t;a++){var o=e.h+i*a;this.wrap&&o>1&&(o-=1),r.push(o)}this.shuffle&&r.sort((function(t,e){return Math.random()-.5}));for(a=0;a<t;a++){this.reuse?e=Um(Bd(this._list[a].rgb)):e.h=r.shift(),this.applyStepOptions(e,n,a,this._currentPass);var u=Ym(Hm(e)),l=(this.stepOptions.brighten||0)*a+(this.passOptions.brighten||0)*this._currentPass;0!=l&&(l=this.wrap?Tv(l,this.minLightness,this.maxLightness):Mv(l,this.minLightness,this.maxLightness),u=u.brighten(l));var h=(this.stepOptions.lighten||0)*a+(this.passOptions.lighten||0)*this._currentPass;0!=h&&(h=this.wrap?Tv(h,this.minLightness,this.maxLightness):Mv(h,this.minLightness,this.maxLightness),u=u.lighten(h)),this._list.push(u)}this._currentPass++},Object.defineProperty(e.prototype,"currentColor",{get:function(){return 0==this._list.length?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),e.prototype.applyStepOptions=function(t,e,i,n){t.l=e.lightness+(this.stepOptions.lightness||0)*i+(this.passOptions.lightness||0)*n,this.wrap?(t.l>1?t.l=t.l-Math.floor(t.l):t.l<0&&(t.l=-(t.l-Math.floor(t.l))),t.l=Tv(t.l,this.minLightness,this.maxLightness)):(t.l>1?t.l=1:t.l<0&&(t.l=0),t.l=Mv(t.l,this.minLightness,this.maxLightness))},e.prototype.processConfig=function(e){if(e){if(Rd(e.list)&&Wd(e.list))for(var i=0,n=e.list.length;i<n;i++)e.list[i]instanceof Jm||(e.list[i]=Ym(e.list[i]));!Rd(e.baseColor)||e.baseColor instanceof Jm||(e.baseColor=Ym(e.baseColor))}t.prototype.processConfig.call(this,e)},e}(Xm);Om.registeredClasses.ColorSet=ay;var oy=function(t){function e(){var e=t.call(this)||this;e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Jm({r:103,g:183,b:220}),e.className="PatternSet";var i=new Dp;return e.list=[e.getLinePattern(1e3,45,1,6),e.getRectPattern(10,0,4),e.getLinePattern(1e3,-45,1,6),e.getCirclePattern(11,2,!0),e.getLinePattern(6,90,1),e.getRectPattern(12,45,6,!0),e.getLinePattern(6,0,1),e.getRectPattern(7,0,4),e.getLinePattern(1e3,45,2,3,"4,2"),e.getCirclePattern(9,3,!1),e.getLinePattern(1e3,-45,2,3,"4,2"),e.getRectPattern(10,45,Math.sqrt(50)),e.getLinePattern(1e3,-45,2,1),e.getRectPattern(10,0,9),e.getLinePattern(1e3,45,2,1),e.getLinePattern(1e3,0,3,1),e.getRectPattern(10,45,10),e.getLinePattern(1e3,90,3,1)],e.baseColor=i.getFor("stroke"),e.applyTheme(),e}return Sd(e,t),e.prototype.getLinePattern=function(t,e,i,n,r){var s=new Qg;return s.width=t,s.height=t,s.stroke=this.baseColor,s.gap=n,s.strokeDasharray=r,s.strokeWidth=i,s.rotation=e,s},e.prototype.getRectPattern=function(t,e,i,n){var r=new ey;return r.width=t,r.height=t,r.rectWidth=i,r.rectHeight=i,n?(r.stroke=this.baseColor,r.strokeWidth=1,r.fillOpacity=0):(r.fill=this.baseColor,r.strokeWidth=0),0!=e&&(r.shapeRendering="auto"),r.rotation=e,r},e.prototype.getCirclePattern=function(t,e,i){var n=new ty;return n.width=t,n.height=t,n.shapeRendering="auto",n.radius=e,i?(n.stroke=this.baseColor,n.strokeWidth=1,n.fillOpacity=0):(n.fill=this.baseColor,n.strokeWidth=0),n},Object.defineProperty(e.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.next=function(){var t=this.getIndex(this.currentStep);return this._currentStep++,t},e.prototype.getIndex=function(t){for(;this.list.length<=t;)this.generatePatterns();return this.list[t].clone()},e.prototype.generatePatterns=function(){var t=this.list.length/(this._currentPass+1);this._currentPass++;for(var e=0;e<t;e++)this.list.push(this.list[e].clone())},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){t.prototype.processConfig.call(this,e)},e}(Xm);Om.registeredClasses.PatternSet=oy;var uy=function(t){function e(){var e=t.call(this)||this;e.className="AmChartsLogo",e.valign="bottom";var i=.3;e.opacity=.3,e.defaultState.properties.opacity=.4,e.url="https://www.amcharts.com/",e.urlTarget="_blank",e.showSystemTooltip=!0,e.readerTitle="Chart created using amCharts library",e.width=66,e.height=21,e.background.opacity=0;var n=Ym("#474758");"#ffffff"==(new Dp).getFor("background").alternative.hex&&(n=Ym("#ffffff"));var r=new hb;r.addColor(n),r.addColor(n,1,.75),r.addColor(Ym("#3cabff"),1,.755),r.rotation=-10;var s=r,a=e.createChild(gg);a.shouldClone=!1,a.isMeasured=!1,a.segments=[[{x:15,y:15},{x:27,y:15},{x:36,y:6},{x:40.5,y:10.5},{x:45,y:6},{x:54,y:15},{x:60,y:15}]],a.strokeWidth=6*i,a.tensionX=.8,a.tensionY=1,a.stroke=Ym("#3cabff");var o=e.createChild(gg);o.shouldClone=!1,o.isMeasured=!1,o.segments=[[{x:6,y:15},{x:15,y:15},{x:27,y:12*i},{x:39.9,y:15},{x:51,y:15},{x:60,y:15}]],o.strokeWidth=6*i,o.tensionX=.75,o.tensionY=1,o.stroke=s,e._disposers.push(o);var u=new ny;e.filters.push(u);var l=new ny;l.saturation=1;var h=e.states.create("hover");return h.properties.opacity=1,h.filters.push(l),e.applyTheme(),e}return Sd(e,t),e}(Eb);function ly(t,e){var i,n=pp(t),r=!1;if(n||((n=document.createElement("div")).style.width="200px",n.style.height="200px",n.style.top="0",n.style.left="0",n.style.visibility="hidden",n.style.position="absolute",document.body.appendChild(n),r=!0),n){n.innerHTML="";var s=new sb(n),a=new ab(s.SVGContainer,"svg-"+(rb.length-1)),o=new Eb;o.htmlContainer=n,o.svgContainer=s,o.width=Ad(100),o.height=Ad(100),o.background.fillOpacity=0,o.paper=a,a.append(o.group),r&&function(t){if("loading"!==document.readyState)t();else{var e=function(){"loading"!==document.readyState&&(document.removeEventListener("readystatechange",e),t())};document.addEventListener("readystatechange",e)}}((function(){o.moveHtmlContainer(t)})),o.relativeWidth=1,o.relativeHeight=1,s.container=o;var u=o.createChild(e);u.topParent=o;var l=u.uid;Om.invalidSprites[l]=[],Om.invalidDatas[l]=[],Om.invalidPositions[l]=[],Om.invalidLayouts[l]=[],o.baseId=l,u.isBaseSprite=!0,u.focusFilter=new sy,Om.baseSprites.push(u),Om.baseSpritesByUid[l]=u,u.maskRectangle={x:0,y:0,width:Math.max(s.width||0,0),height:Math.max(s.height||0,0)},o.events.on("maxsizechanged",(function(t){0!=t.previousWidth&&0!=t.previousHeight||o.deepInvalidate(),u.maskRectangle&&(u.maskRectangle={x:0,y:0,width:Math.max(s.width||0,0),height:Math.max(s.height||0,0)})}));var h=null,c=function(){u.isDisposed()?h=null:null==Op(u.dom)?(rp.autoDispose?(o.htmlContainer=void 0,s.htmlElement=void 0,u.dispose()):Qp("Chart was not disposed",u.uid),h=null):h=window.setTimeout(c,1e3)};c(),u.addDisposer(new _f((function(){null!==h&&clearTimeout(h),Af(Om.baseSprites,u),Om.baseSpritesByUid[u.uid]=void 0}))),u.addDisposer(o);var d=o.createChild(Eb);d.topParent=o,d.width=Ad(100),d.height=Ad(100),d.isMeasured=!1,o.tooltipContainer=d,u.tooltip=new Ag,u.tooltip.hide(0),u.tooltip.setBounds({x:0,y:0,width:d.maxWidth,height:d.maxHeight}),d.events.on("maxsizechanged",(function(){Bd(u.tooltip).setBounds({x:0,y:0,width:d.maxWidth,height:d.maxHeight})}),void 0,!1);var f=new wg;if(f.events.on("inited",(function(){f.__disabled=!0}),void 0,!1),o.preloader=f,u instanceof Eb&&!u.hasLicense()){var m=d.createChild(uy);d.events.on("maxsizechanged",(function(t){d.maxWidth<=100||d.maxHeight<=50?m.hide():(m.isHidden||m.isHiding)&&m.show()}),void 0,!1),u.logo=m,m.align="left",m.valign="bottom"}return o.isStandaloneInstance=!0,rp.queue&&(i=u,-1==Om.queue.indexOf(i)&&(i.__disabled=!0,i.tooltipContainer.__disabled=!0,i.events.disableType("appeared"),0==Om.queue.length&&(Om.events.once("exitframe",(function(){cy(i)})),Rb.requestFrame()),i.addDisposer(new _f((function(){hy(i)}))),Om.queue.push(i))),u}throw Rb.log("html container not found"),new Error("html container not found")}function hy(t){var e=Om.queue.indexOf(t);if(e>=0){Om.queue.splice(Om.queue.indexOf(t),1);var i=Om.queue[e];i&&cy(i)}}function cy(t){t&&t.tooltipContainer&&(t.__disabled=!1,t.tooltipContainer.__disabled=!1,t.events.enableType("appeared"),t.dispatch("removedfromqueue"),t.showOnInit&&t.events.on("appeared",(function(){hy(t)})),t.vpDisposer&&t.vpDisposer.dispose(),t instanceof Eb&&t.invalidateLabels(),t.tooltipContainer&&t.tooltipContainer.invalidateLayout(),t instanceof Jb?(t.invalidateData(),t.reinit(),t.events.once("datavalidated",(function(){t.showOnInit?t.appear():hy(t)}))):(t.reinit(),t.events.once("inited",(function(){hy(t)})),t.showOnInit&&t.appear()))}function dy(t,e){var i;Vd(e)&&(Rd(Om.registeredClasses[e])?e=Om.registeredClasses[e]:(e=Om.registeredClasses.Container,i=new Error("Class ["+e+"] is not loaded.")));var n=ly(t,e);return i&&n.raiseCriticalError(i),n}const fy="esriFieldTypeDouble",my="esriFieldTypeInteger",vy="esriFieldTypeSingle",py="esriFieldTypeSmallInteger",by="count",gy="esriSLS",yy="esriSMS",wy="esriSFS",Sy="class-breaks",xy="number",Cy="scatterSeries",Oy="pieSeries",My="gaugeSeries",Ty="lineSeries",ky="barSeries",Iy="histogramSeries",Ay="comboLineAndBarSeries",jy="none",Fy="logarithmic",Dy="squareRoot",Py="layer",Ly=by,Ey="newer",Ny="unrecognized";function Ry(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function By(t){let e=t,i=t,n=t;function r(t,e,r=0,s=t.length){if(r<s){if(0!==i(e,e))return s;do{const i=r+s>>>1;n(t[i],e)<0?r=i+1:s=i}while(r<s)}return r}return 2!==t.length&&(e=(e,i)=>t(e)-i,i=Ry,n=(e,i)=>Ry(t(e),i)),{left:r,center:function(t,i,n=0,s=t.length){const a=r(t,i,n,s-1);return a>n&&e(t[a-1],i)>-e(t[a],i)?a-1:a},right:function(t,e,r=0,s=t.length){if(r<s){if(0!==i(e,e))return s;do{const i=r+s>>>1;n(t[i],e)<=0?r=i+1:s=i}while(r<s)}return r}}}const _y=By(Ry).right;By((function(t){return null===t?NaN:+t})).center;var zy=_y;function Vy(t,e){let i,n;if(void 0===e)for(const e of t)null!=e&&(void 0===i?e>=e&&(i=n=e):(i>e&&(i=e),n<e&&(n=e)));else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(void 0===i?s>=s&&(i=n=s):(i>s&&(i=s),n<s&&(n=s)))}return[i,n]}function Gy(t){return t}function $y(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var Wy=Array.prototype.slice;function qy(t){return()=>t}var Hy=Math.sqrt(50),Uy=Math.sqrt(10),Ky=Math.sqrt(2);function Jy(t,e,i){var n=(e-t)/Math.max(0,i),r=Math.floor(Math.log(n)/Math.LN10),s=n/Math.pow(10,r);return r>=0?(s>=Hy?10:s>=Uy?5:s>=Ky?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=Hy?10:s>=Uy?5:s>=Ky?2:1)}function Yy(t){return Math.ceil(Math.log(function(t,e){let i=0;for(let e of t)null!=e&&(e=+e)>=e&&++i;return i}(t))/Math.LN2)+1}function Zy(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i<e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(i<r||void 0===i&&r>=r)&&(i=r)}return i}function Xy(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i>e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(i>r||void 0===i&&r>=r)&&(i=r)}return i}function Qy(t,e,i=0,n=t.length-1,r){for(r=void 0===r?$y:function(t=Ry){if(t===Ry)return $y;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,i)=>{const n=t(e,i);return n||0===n?n:(0===t(i,i))-(0===t(e,e))}}(r);n>i;){if(n-i>600){const s=n-i+1,a=e-i+1,o=Math.log(s),u=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*u*(s-u)/s)*(a-s/2<0?-1:1);Qy(t,e,Math.max(i,Math.floor(e-a*u/s+l)),Math.min(n,Math.floor(e+(s-a)*u/s+l)),r)}const s=t[e];let a=i,o=n;for(tw(t,i,e),r(t[n],s)>0&&tw(t,i,n);a<o;){for(tw(t,a,o),++a,--o;r(t[a],s)<0;)++a;for(;r(t[o],s)>0;)--o}0===r(t[i],s)?tw(t,i,o):(++o,tw(t,o,n)),o<=e&&(i=o+1),e<=o&&(n=o-1)}return t}function tw(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function ew(t,e){return function(t,e,i){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(n=+n)>=n&&(yield n)}}(t,i)),n=t.length){if((e=+e)<=0||n<2)return Xy(t);if(e>=1)return Zy(t);var n,r=(n-1)*e,s=Math.floor(r),a=Zy(Qy(t,s).subarray(0,s+1));return a+(Xy(t.subarray(s+1))-a)*(r-s)}}(t,.5,e)}function iw(t,e){let i=0;if(void 0===e)for(let e of t)(e=+e)&&(i+=e);else{let n=-1;for(let r of t)(r=+e(r,++n,t))&&(i+=r)}return i}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nw(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}u((n=n.apply(t,e||[])).next())}))}var rw="object"==typeof global&&global&&global.Object===Object&&global,sw="object"==typeof self&&self&&self.Object===Object&&self,aw=rw||sw||Function("return this")(),ow=aw.Symbol,uw=Object.prototype,lw=uw.hasOwnProperty,hw=uw.toString,cw=ow?ow.toStringTag:void 0,dw=Object.prototype.toString,fw=ow?ow.toStringTag:void 0;function mw(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":fw&&fw in Object(t)?function(t){var e=lw.call(t,cw),i=t[cw];try{t[cw]=void 0;var n=!0}catch(t){}var r=hw.call(t);return n&&(e?t[cw]=i:delete t[cw]),r}(t):function(t){return dw.call(t)}(t)}function vw(t){return null!=t&&"object"==typeof t}function pw(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}var bw=Array.isArray,gw=ow?ow.prototype:void 0,yw=gw?gw.toString:void 0;function ww(t){if("string"==typeof t)return t;if(bw(t))return pw(t,ww)+"";if(function(t){return"symbol"==typeof t||vw(t)&&"[object Symbol]"==mw(t)}(t))return yw?yw.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Sw(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function xw(t){return t}function Cw(t){if(!Sw(t))return!1;var e=mw(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Ow,Mw=aw["__core-js_shared__"],Tw=(Ow=/[^.]+$/.exec(Mw&&Mw.keys&&Mw.keys.IE_PROTO||""))?"Symbol(src)_1."+Ow:"",kw=Function.prototype.toString;function Iw(t){if(null!=t){try{return kw.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Aw=/^\[object .+?Constructor\]$/,jw=Function.prototype,Fw=Object.prototype,Dw=jw.toString,Pw=Fw.hasOwnProperty,Lw=RegExp("^"+Dw.call(Pw).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ew(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Sw(t)||(e=t,Tw&&Tw in e))&&(Cw(t)?Lw:Aw).test(Iw(t));var e}(i)?i:void 0}var Nw=Ew(aw,"WeakMap"),Rw=Object.create,Bw=function(){function t(){}return function(e){if(!Sw(e))return{};if(Rw)return Rw(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),_w=Bw;function zw(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var Vw=Date.now,Gw=function(){try{var t=Ew(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$w=Gw,Ww=$w?function(t,e){return $w(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:xw,qw=function(t){var e=0,i=0;return function(){var n=Vw(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ww),Hw=qw,Uw=/^(?:0|[1-9]\d*)$/;function Kw(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&Uw.test(t))&&t>-1&&t%1==0&&t<e}function Jw(t,e,i){"__proto__"==e&&$w?$w(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Yw(t,e){return t===e||t!=t&&e!=e}var Zw=Object.prototype.hasOwnProperty;function Xw(t,e,i){var n=t[e];Zw.call(t,e)&&Yw(n,i)&&(void 0!==i||e in t)||Jw(t,e,i)}function Qw(t,e,i,n){var r=!i;i||(i={});for(var s=-1,a=e.length;++s<a;){var o=e[s],u=n?n(i[o],t[o],o,i,t):void 0;void 0===u&&(u=t[o]),r?Jw(i,o,u):Xw(i,o,u)}return i}var tS=Math.max;function eS(t,e){return Hw(function(t,e,i){return e=tS(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=tS(n.length-e,0),a=Array(s);++r<s;)a[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=i(a),zw(t,this,o)}}(t,e,xw),t+"")}function iS(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function nS(t){return null!=t&&iS(t.length)&&!Cw(t)}function rS(t,e,i){if(!Sw(i))return!1;var n=typeof e;return!!("number"==n?nS(i)&&Kw(e,i.length):"string"==n&&e in i)&&Yw(i[e],t)}var sS=Object.prototype;function aS(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||sS)}function oS(t){return vw(t)&&"[object Arguments]"==mw(t)}var uS=Object.prototype,lS=uS.hasOwnProperty,hS=uS.propertyIsEnumerable,cS=oS(function(){return arguments}())?oS:function(t){return vw(t)&&lS.call(t,"callee")&&!hS.call(t,"callee")},dS="object"==typeof exports&&exports&&!exports.nodeType&&exports,fS=dS&&"object"==typeof module&&module&&!module.nodeType&&module,mS=fS&&fS.exports===dS?aw.Buffer:void 0,vS=(mS?mS.isBuffer:void 0)||function(){return!1},pS={};function bS(t){return function(e){return t(e)}}pS["[object Float32Array]"]=pS["[object Float64Array]"]=pS["[object Int8Array]"]=pS["[object Int16Array]"]=pS["[object Int32Array]"]=pS["[object Uint8Array]"]=pS["[object Uint8ClampedArray]"]=pS["[object Uint16Array]"]=pS["[object Uint32Array]"]=!0,pS["[object Arguments]"]=pS["[object Array]"]=pS["[object ArrayBuffer]"]=pS["[object Boolean]"]=pS["[object DataView]"]=pS["[object Date]"]=pS["[object Error]"]=pS["[object Function]"]=pS["[object Map]"]=pS["[object Number]"]=pS["[object Object]"]=pS["[object RegExp]"]=pS["[object Set]"]=pS["[object String]"]=pS["[object WeakMap]"]=!1;var gS="object"==typeof exports&&exports&&!exports.nodeType&&exports,yS=gS&&"object"==typeof module&&module&&!module.nodeType&&module,wS=yS&&yS.exports===gS&&rw.process,SS=function(){try{return yS&&yS.require&&yS.require("util").types||wS&&wS.binding&&wS.binding("util")}catch(t){}}(),xS=SS&&SS.isTypedArray,CS=xS?bS(xS):function(t){return vw(t)&&iS(t.length)&&!!pS[mw(t)]},OS=Object.prototype.hasOwnProperty;function MS(t,e){var i=bw(t),n=!i&&cS(t),r=!i&&!n&&vS(t),s=!i&&!n&&!r&&CS(t),a=i||n||r||s,o=a?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],u=o.length;for(var l in t)!e&&!OS.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Kw(l,u))||o.push(l);return o}function TS(t,e){return function(i){return t(e(i))}}var kS=TS(Object.keys,Object),IS=Object.prototype.hasOwnProperty;function AS(t){if(!aS(t))return kS(t);var e=[];for(var i in Object(t))IS.call(t,i)&&"constructor"!=i&&e.push(i);return e}function jS(t){return nS(t)?MS(t):AS(t)}var FS=Object.prototype.hasOwnProperty;function DS(t){return nS(t)?MS(t,!0):function(t){if(!Sw(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=aS(t),i=[];for(var n in t)("constructor"!=n||!e&&FS.call(t,n))&&i.push(n);return i}(t)}var PS,LS=(PS=function(t,e,i,n){Qw(e,DS(e),t,n)},eS((function(t,e){var i=-1,n=e.length,r=n>1?e[n-1]:void 0,s=n>2?e[2]:void 0;for(r=PS.length>3&&"function"==typeof r?(n--,r):void 0,s&&rS(e[0],e[1],s)&&(r=n<3?void 0:r,n=1),t=Object(t);++i<n;){var a=e[i];a&&PS(t,a,0,r)}return t}))),ES=LS,NS=Ew(Object,"create"),RS=Object.prototype.hasOwnProperty,BS=Object.prototype.hasOwnProperty;function _S(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function zS(t,e){for(var i=t.length;i--;)if(Yw(t[i][0],e))return i;return-1}_S.prototype.clear=function(){this.__data__=NS?NS(null):{},this.size=0},_S.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_S.prototype.get=function(t){var e=this.__data__;if(NS){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return RS.call(e,t)?e[t]:void 0},_S.prototype.has=function(t){var e=this.__data__;return NS?void 0!==e[t]:BS.call(e,t)},_S.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=NS&&void 0===e?"__lodash_hash_undefined__":e,this};var VS=Array.prototype.splice;function GS(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}GS.prototype.clear=function(){this.__data__=[],this.size=0},GS.prototype.delete=function(t){var e=this.__data__,i=zS(e,t);return!(i<0||(i==e.length-1?e.pop():VS.call(e,i,1),--this.size,0))},GS.prototype.get=function(t){var e=this.__data__,i=zS(e,t);return i<0?void 0:e[i][1]},GS.prototype.has=function(t){return zS(this.__data__,t)>-1},GS.prototype.set=function(t,e){var i=this.__data__,n=zS(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};var $S=Ew(aw,"Map");function WS(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function qS(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function HS(t){return null==t?"":ww(t)}function US(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}qS.prototype.clear=function(){this.size=0,this.__data__={hash:new _S,map:new($S||GS),string:new _S}},qS.prototype.delete=function(t){var e=WS(this,t).delete(t);return this.size-=e?1:0,e},qS.prototype.get=function(t){return WS(this,t).get(t)},qS.prototype.has=function(t){return WS(this,t).has(t)},qS.prototype.set=function(t,e){var i=WS(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};var KS=TS(Object.getPrototypeOf,Object),JS=Function.prototype,YS=Object.prototype,ZS=JS.toString,XS=YS.hasOwnProperty,QS=ZS.call(Object);function tx(t){if(!vw(t))return!1;var e=mw(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!function(t){if(!vw(t)||"[object Object]"!=mw(t))return!1;var e=KS(t);if(null===e)return!0;var i=XS.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ZS.call(i)==QS}(t)}var ex=eS((function(t,e){try{return zw(t,void 0,e)}catch(t){return tx(t)?t:new Error(t)}})),ix=ex;function nx(t){var e=this.__data__=new GS(t);this.size=e.size}nx.prototype.clear=function(){this.__data__=new GS,this.size=0},nx.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},nx.prototype.get=function(t){return this.__data__.get(t)},nx.prototype.has=function(t){return this.__data__.has(t)},nx.prototype.set=function(t,e){var i=this.__data__;if(i instanceof GS){var n=i.__data__;if(!$S||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new qS(n)}return i.set(t,e),this.size=i.size,this};var rx="object"==typeof exports&&exports&&!exports.nodeType&&exports,sx=rx&&"object"==typeof module&&module&&!module.nodeType&&module,ax=sx&&sx.exports===rx?aw.Buffer:void 0,ox=ax?ax.allocUnsafe:void 0;function ux(){return[]}var lx=Object.prototype.propertyIsEnumerable,hx=Object.getOwnPropertySymbols,cx=hx?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var a=t[i];e(a)&&(s[r++]=a)}return s}(hx(t),(function(e){return lx.call(t,e)})))}:ux,dx=cx,fx=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)US(e,dx(t)),t=KS(t);return e}:ux,mx=fx;function vx(t,e,i){var n=e(t);return bw(t)?n:US(n,i(t))}function px(t){return vx(t,jS,dx)}function bx(t){return vx(t,DS,mx)}var gx=Ew(aw,"DataView"),yx=Ew(aw,"Promise"),wx=Ew(aw,"Set"),Sx=Iw(gx),xx=Iw($S),Cx=Iw(yx),Ox=Iw(wx),Mx=Iw(Nw),Tx=mw;(gx&&"[object DataView]"!=Tx(new gx(new ArrayBuffer(1)))||$S&&"[object Map]"!=Tx(new $S)||yx&&"[object Promise]"!=Tx(yx.resolve())||wx&&"[object Set]"!=Tx(new wx)||Nw&&"[object WeakMap]"!=Tx(new Nw))&&(Tx=function(t){var e=mw(t),i="[object Object]"==e?t.constructor:void 0,n=i?Iw(i):"";if(n)switch(n){case Sx:return"[object DataView]";case xx:return"[object Map]";case Cx:return"[object Promise]";case Ox:return"[object Set]";case Mx:return"[object WeakMap]"}return e});var kx=Tx,Ix=Object.prototype.hasOwnProperty,Ax=aw.Uint8Array;function jx(t){var e=new t.constructor(t.byteLength);return new Ax(e).set(new Ax(t)),e}var Fx=/\w*$/,Dx=ow?ow.prototype:void 0,Px=Dx?Dx.valueOf:void 0;var Lx=SS&&SS.isMap,Ex=Lx?bS(Lx):function(t){return vw(t)&&"[object Map]"==kx(t)},Nx=SS&&SS.isSet,Rx=Nx?bS(Nx):function(t){return vw(t)&&"[object Set]"==kx(t)},Bx={};function _x(t,e,i,n,r,s){var a,o=1&e,u=2&e,l=4&e;if(i&&(a=r?i(t,n,r,s):i(t)),void 0!==a)return a;if(!Sw(t))return t;var h=bw(t);if(h){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Ix.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!o)return function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(t,a)}else{var c=kx(t),d="[object Function]"==c||"[object GeneratorFunction]"==c;if(vS(t))return function(t,e){if(e)return t.slice();var i=t.length,n=ox?ox(i):new t.constructor(i);return t.copy(n),n}(t,o);if("[object Object]"==c||"[object Arguments]"==c||d&&!r){if(a=u||d?{}:function(t){return"function"!=typeof t.constructor||aS(t)?{}:_w(KS(t))}(t),!o)return u?function(t,e){return Qw(t,mx(t),e)}(t,function(t,e){return t&&Qw(e,DS(e),t)}(a,t)):function(t,e){return Qw(t,dx(t),e)}(t,function(t,e){return t&&Qw(e,jS(e),t)}(a,t))}else{if(!Bx[c])return r?t:{};a=function(t,e,i){var n,r,s,a=t.constructor;switch(e){case"[object ArrayBuffer]":return jx(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var i=e?jx(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var i=e?jx(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,i);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(s=new(r=t).constructor(r.source,Fx.exec(r))).lastIndex=r.lastIndex,s;case"[object Symbol]":return n=t,Px?Object(Px.call(n)):{}}}(t,c,o)}}s||(s=new nx);var f=s.get(t);if(f)return f;s.set(t,a),Rx(t)?t.forEach((function(n){a.add(_x(n,e,i,n,t,s))})):Ex(t)&&t.forEach((function(n,r){a.set(r,_x(n,e,i,r,t,s))}));var m=h?void 0:(l?u?bx:px:u?DS:jS)(t);return function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i););}(m||t,(function(n,r){m&&(n=t[r=n]),Xw(a,r,_x(n,e,i,r,t,s))})),a}function zx(t){return _x(t,5)}Bx["[object Arguments]"]=Bx["[object Array]"]=Bx["[object ArrayBuffer]"]=Bx["[object DataView]"]=Bx["[object Boolean]"]=Bx["[object Date]"]=Bx["[object Float32Array]"]=Bx["[object Float64Array]"]=Bx["[object Int8Array]"]=Bx["[object Int16Array]"]=Bx["[object Int32Array]"]=Bx["[object Map]"]=Bx["[object Number]"]=Bx["[object Object]"]=Bx["[object RegExp]"]=Bx["[object Set]"]=Bx["[object String]"]=Bx["[object Symbol]"]=Bx["[object Uint8Array]"]=Bx["[object Uint8ClampedArray]"]=Bx["[object Uint16Array]"]=Bx["[object Uint32Array]"]=!0,Bx["[object Error]"]=Bx["[object Function]"]=Bx["[object WeakMap]"]=!1;var Vx,Gx=(Vx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==Vx?void 0:Vx[t]}),$x=/[&<>"']/g,Wx=RegExp($x.source),qx=Object.prototype.hasOwnProperty;function Hx(t){if(null==t)return!0;if(nS(t)&&(bw(t)||"string"==typeof t||"function"==typeof t.splice||vS(t)||CS(t)||cS(t)))return!t.length;var e=kx(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(aS(t))return!AS(t).length;for(var i in t)if(qx.call(t,i))return!1;return!0}var Ux=Object.prototype,Kx=Ux.hasOwnProperty;function Jx(t,e,i,n){return void 0===t||Yw(t,Ux[i])&&!Kx.call(n,i)?e:t}var Yx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Zx(t){return"\\"+Yx[t]}var Xx=/<%=([\s\S]+?)%>/g,Qx={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Xx,variable:"",imports:{_:{escape:function(t){return(t=HS(t))&&Wx.test(t)?t.replace($x,Gx):t}}}},tC=/\b__p \+= '';/g,eC=/\b(__p \+=) '' \+/g,iC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nC=/[()=,{}\[\]\/\s]/,rC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sC=/($^)/,aC=/['\n\r\u2028\u2029\\]/g,oC=Object.prototype.hasOwnProperty;const uC="reject",lC="renderUpToTheLimit",hC={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},cC=[...Object.values(hC),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","it-CH","it-IT"],dC=[hC.Arabic,hC.Hebrew];function fC(t,e){return function(t,e,i){var n=Qx.imports._.templateSettings||Qx;i&&rS(t,e,i)&&(e=void 0),t=HS(t),e=ES({},e,n,Jx);var r,s,a=ES({},e.imports,n.imports,Jx),o=jS(a),u=function(t,e){return pw(e,(function(e){return t[e]}))}(a,o),l=0,h=e.interpolate||sC,c="__p += '",d=RegExp((e.escape||sC).source+"|"+h.source+"|"+(h===Xx?rC:sC).source+"|"+(e.evaluate||sC).source+"|$","g"),f=oC.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(d,(function(e,i,n,a,o,u){return n||(n=a),c+=t.slice(l,u).replace(aC,Zx),i&&(r=!0,c+="' +\n__e("+i+") +\n'"),o&&(s=!0,c+="';\n"+o+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),c+="';\n";var m=oC.call(e,"variable")&&e.variable;if(m){if(nC.test(m))throw new Error("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(s?c.replace(tC,""):c).replace(eC,"$1").replace(iC,"$1;"),c="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var v=ix((function(){return Function(o,f+"return "+c).apply(void 0,u)}));if(v.source=c,tx(v))throw v;return v}(t)(e)}function mC(t,e){let i=hC.English;const n=function(t){let e=t;if(void 0!==t&&-1!==t.indexOf("-")){const[i,n]=t.split("-");e=`${i}-${n.toUpperCase()}`}return e}(t);if(void 0!==n)if(!0===e.includes(n))i=n;else{const t=function(t){const e=null==t?void 0:t.match(/^([a-z]{2})-([A-Z]{2})$/);let i=hC.English;return null!=e&&(null==e?void 0:e.length)>1?i=e[1]:2===(null==t?void 0:t.length)&&t.toLowerCase()===t&&(i=t),i}(n);!0===e.includes(t)&&(i=t)}return i}function vC(t=document.documentElement){var e;const i=function t(e){let i;return i=void 0===e||e===document||e===window?null:e.closest("[lang]")||t(e.getRootNode().host),i}(t);const n=null!==(e=null==i?void 0:i.lang)&&void 0!==e?e:window.navigator.language,r=Object.values(hC),s=Object.values(cC),a=mC(n,r);let o=mC(n,s);return o="ar"===o?"ar-u-nu-latn":o,{locale:a,rtl:dC.includes(a),formatLocale:o}}const pC="arcgis_charts_features_extent",bC={maxRecordCountFactor:5,maxParallelRequests:4,maxRecords:2e3,orderByJSAPIDelimiter:" ",outStatistics:{statisticType:Ly,onStatisticField:"OBJECTID",outStatisticFieldName:"arcgis_charts_outStatisticFieldName_default_key"},uniqueIdsName:"arcgisChartsUniqueIds"},gC=[156,156,156,255],yC="arcgis_charts_group_of_slices",wC="arcgis-charts-slice-id",SC="arcgis-charts-slice-id-undefined",xC="arcgis-charts-slice-id-null",CC="arcgis-charts-slice-id-empty",OC=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]],MC=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function TC(t){const{colorIndex:e,opacity:i,histogramOverlays:n}=t,r=Math.max(0,null!=e?e:0),s=[...!0===n?MC:OC],[a,o,u,l]=s[r%s.length];return[a,o,u,void 0!==i?255*i:l]}function kC(t=1){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255*t]}function IC(t){var e,i,n;const r=null!==(e=null==t?void 0:t.useRandomColor)&&void 0!==e&&e,s=null==t?void 0:t.useRampColor,a=null!==(i=null==t?void 0:t.width)&&void 0!==i?i:1,o=null==t?void 0:t.isHistogramOverlay;let u=null!==(n=null==t?void 0:t.color)&&void 0!==n?n:function(t){return[0,0,0,255*(null!=t?t:.7)]}(1);return!0===r?u=kC():void 0!==s&&(u=TC(!0===o?{colorIndex:s.colorIndex,histogramOverlays:o}:{colorIndex:s.colorIndex})),void 0!==(null==t?void 0:t.opacity)&&(u[3]=t.opacity),{type:gy,style:"esriSLSSolid",color:u,width:a}}function AC(){return{type:xy,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}}}function jC(t=!1){return{type:yy,style:"esriSMSCircle",color:!0===t?kC(.7):TC({colorIndex:0,opacity:.7}),size:4}}const FC={behaviorAfterLimit:uC,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxLineChartMarkersCountTotal:1e4,maxLineChartSeriesCount:100,maxPieChartSliceCountTotal:300,maxGaugeByFeaturesLimit:50};function DC(t){const e=Object.assign({},FC);return void 0!==t&&Object.keys(FC).forEach((i=>{var n,r;e[i]="behaviorAfterLimit"===i?null!==(n=t[i])&&void 0!==n?n:FC[i]:null!==(r=t[i])&&void 0!==r?r:FC[i]})),e}var PC={exports:{}};function LC(t,e,i,n){var r,s=null==(r=n)||"number"==typeof r||"boolean"==typeof r?n:i(n),a=e.get(s);return void 0===a&&(a=t.call(this,n),e.set(s,a)),a}function EC(t,e,i){var n=Array.prototype.slice.call(arguments,3),r=i(n),s=e.get(r);return void 0===s&&(s=t.apply(this,n),e.set(r,s)),s}function NC(t,e,i,n,r){return i.bind(e,t,n,r)}function RC(t,e){return NC(t,this,1===t.length?LC:EC,e.cache.create(),e.serializer)}function BC(){return JSON.stringify(arguments)}function _C(){this.cache=Object.create(null)}_C.prototype.has=function(t){return t in this.cache},_C.prototype.get=function(t){return this.cache[t]},_C.prototype.set=function(t,e){this.cache[t]=e};var zC={create:function(){return new _C}};PC.exports=function(t,e){var i=e&&e.cache?e.cache:zC,n=e&&e.serializer?e.serializer:BC;return(e&&e.strategy?e.strategy:RC)(t,{cache:i,serializer:n})},PC.exports.strategies={variadic:function(t,e){return NC(t,this,EC,e.cache.create(),e.serializer)},monadic:function(t,e){return NC(t,this,LC,e.cache.create(),e.serializer)}};var VC=PC.exports;const GC="simple",$C="noAggregation",WC="splitByFieldValues",qC="multipleNumericalFields",HC="pieFromFields";
/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var UC,KC,JC=Function.prototype,YC=Object.prototype,ZC=JC.toString,XC=YC.hasOwnProperty,QC=ZC.call(Object),tO=YC.toString,eO=(UC=Object.getPrototypeOf,KC=Object,function(t){return UC(KC(t))}),iO={exports:{}},nO={},rO={exports:{}},sO={};function aO(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var oO=/javascript\s*\:/gim;sO.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},sO.getDefaultWhiteList=aO,sO.onAttr=function(t,e,i){},sO.onIgnoreAttr=function(t,e,i){},sO.safeAttrValue=function(t,e){return oO.test(e)?"":e};var uO=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},lO=function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")},hO=sO,cO=function(t,e){";"!==(t=lO(t))[t.length-1]&&(t+=";");var i=t.length,n=!1,r=0,s=0,a="";function o(){if(!n){var i=uO(t.slice(r,s)),o=i.indexOf(":");if(-1!==o){var u=uO(i.slice(0,o)),l=uO(i.slice(o+1));if(u){var h=e(r,a.length,u,l,i);h&&(a+=h+"; ")}}}r=s+1}for(;s<i;s++){var u=t[s];if("/"===u&&"*"===t[s+1]){var l=t.indexOf("*/",s+2);if(-1===l)break;r=(s=l+1)+1,n=!1}else"("===u?n=!0:")"===u?n=!1:";"===u?n||o():"\n"===u&&o()}return uO(a)};function dO(t){return null==t}function fO(t){(t=function(t){var e={};for(var i in t)e[i]=t[i];return e}(t||{})).whiteList=t.whiteList||hO.whiteList,t.onAttr=t.onAttr||hO.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||hO.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||hO.safeAttrValue,this.options=t}fO.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,i=e.whiteList,n=e.onAttr,r=e.onIgnoreAttr,s=e.safeAttrValue;return cO(t,(function(t,e,a,o,u){var l=i[a],h=!1;if(!0===l?h=l:"function"==typeof l?h=l(o):l instanceof RegExp&&(h=l.test(o)),!0!==h&&(h=!1),o=s(a,o)){var c,d={position:e,sourcePosition:t,source:u,isWhite:h};return h?dO(c=n(a,o,d))?a+":"+o:c:dO(c=r(a,o,d))?void 0:c}}))};var mO=fO;!function(t,e){var i=sO,n=mO;for(var r in(e=t.exports=function(t,e){return new n(e).process(t)}).FilterCSS=n,i)e[r]=i[r]}(rO,rO.exports);var vO={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}},pO=rO.exports.FilterCSS,bO=rO.exports.getDefaultWhiteList,gO=vO;var yO=new pO;function wO(t){return t.replace(SO,"&lt;").replace(xO,"&gt;")}var SO=/</g,xO=/>/g,CO=/"/g,OO=/&quot;/g,MO=/&#([a-zA-Z0-9]*);?/gim,TO=/&colon;?/gim,kO=/&newline;?/gim,IO=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,AO=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,jO=/u\s*r\s*l\s*\(.*/gi;function FO(t){return t.replace(CO,"&quot;")}function DO(t){return t.replace(OO,'"')}function PO(t){return t.replace(MO,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function LO(t){return t.replace(TO,":").replace(kO," ")}function EO(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return gO.trim(e)}function NO(t){return EO(t=LO(t=PO(t=DO(t))))}function RO(t){return wO(t=FO(t))}nO.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},nO.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},nO.onTag=function(t,e,i){},nO.onIgnoreTag=function(t,e,i){},nO.onTagAttr=function(t,e,i){},nO.onIgnoreTagAttr=function(t,e,i){},nO.safeAttrValue=function(t,e,i,n){if(i=NO(i),"href"===e||"src"===e){if("#"===(i=gO.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===e){if(IO.lastIndex=0,IO.test(i))return""}else if("style"===e){if(AO.lastIndex=0,AO.test(i))return"";if(jO.lastIndex=0,jO.test(i)&&(IO.lastIndex=0,IO.test(i)))return"";!1!==n&&(i=(n=n||yO).process(i))}return RO(i)},nO.escapeHtml=wO,nO.escapeQuote=FO,nO.unescapeQuote=DO,nO.escapeHtmlEntities=PO,nO.escapeDangerHtml5Entities=LO,nO.clearNonPrintableCharacter=EO,nO.friendlyAttrValue=NO,nO.escapeAttrValue=RO,nO.onIgnoreTagStripAll=function(){return""},nO.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var i=!Array.isArray(t),n=[],r=!1;return{onIgnoreTag:function(s,a,o){if(function(e){return!!i||-1!==gO.indexOf(t,e)}(s)){if(o.isClosing){var u="[/removed]",l=o.position+u.length;return n.push([!1!==r?r:o.position,l]),r=!1,u}return r||(r=o.position),"[removed]"}return e(s,a,o)},remove:function(t){var e="",i=0;return gO.forEach(n,(function(n){e+=t.slice(i,n[0]),i=n[1]})),e+=t.slice(i)}}},nO.stripCommentTag=function(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("\x3c!--",i);if(-1===n){e+=t.slice(i);break}e+=t.slice(i,n);var r=t.indexOf("--\x3e",n);if(-1===r)break;i=r+3}return e},nO.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)}))).join("")},nO.cssFilter=yO,nO.getDefaultCSSWhiteList=bO;var BO={},_O=vO;function zO(t){var e=_O.spaceIndex(t);if(-1===e)var i=t.slice(1,-1);else i=t.slice(1,e+1);return"/"===(i=_O.trim(i).toLowerCase()).slice(0,1)&&(i=i.slice(1)),"/"===i.slice(-1)&&(i=i.slice(0,-1)),i}function VO(t){return"</"===t.slice(0,2)}var GO=/[^a-zA-Z0-9_:\.\-]/gim;function $O(t,e){for(;e<t.length;e++){var i=t[e];if(" "!==i)return"="===i?e:-1}}function WO(t,e){for(;e>0;e--){var i=t[e];if(" "!==i)return"="===i?e:-1}}function qO(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}BO.parseTag=function(t,e,i){var n="",r=0,s=!1,a=!1,o=0,u=t.length,l="",h="";t:for(o=0;o<u;o++){var c=t.charAt(o);if(!1===s){if("<"===c){s=o;continue}}else if(!1===a){if("<"===c){n+=i(t.slice(r,o)),s=o,r=o;continue}if(">"===c){n+=i(t.slice(r,s)),l=zO(h=t.slice(s,o+1)),n+=e(s,n.length,l,h,VO(h)),r=o+1,s=!1;continue}if('"'===c||"'"===c)for(var d=1,f=t.charAt(o-d);""===f.trim()||"="===f;){if("="===f){a=c;continue t}f=t.charAt(o-++d)}}else if(c===a){a=!1;continue}}return r<t.length&&(n+=i(t.substr(r))),n},BO.parseAttr=function(t,e){var i=0,n=[],r=!1,s=t.length;function a(t,i){if(!((t=(t=_O.trim(t)).replace(GO,"").toLowerCase()).length<1)){var r=e(t,i||"");r&&n.push(r)}}for(var o=0;o<s;o++){var u,l=t.charAt(o);if(!1!==r||"="!==l)if(!1===r||o!==i||'"'!==l&&"'"!==l||"="!==t.charAt(o-1)){if(/\s|\n|\t/.test(l)){if(t=t.replace(/\s|\n|\t/g," "),!1===r){if(-1===(u=$O(t,o))){a(_O.trim(t.slice(i,o))),r=!1,i=o+1;continue}o=u-1;continue}if(-1===(u=WO(t,o-1))){a(r,qO(_O.trim(t.slice(i,o)))),r=!1,i=o+1;continue}}}else{if(-1===(u=t.indexOf(l,o+1)))break;a(r,_O.trim(t.slice(i+1,u))),r=!1,i=(o=u)+1}else r=t.slice(i,o),i=o+1}return i<t.length&&(!1===r?a(t.slice(i)):a(r,qO(_O.trim(t.slice(i))))),_O.trim(n.join(" "))};var HO=rO.exports.FilterCSS,UO=nO,KO=BO,JO=KO.parseTag,YO=KO.parseAttr,ZO=vO;function XO(t){return null==t}function QO(t){(t=function(t){var e={};for(var i in t)e[i]=t[i];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=UO.onIgnoreTagStripAll),t.whiteList=t.whiteList||t.allowList||UO.whiteList,t.onTag=t.onTag||UO.onTag,t.onTagAttr=t.onTagAttr||UO.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||UO.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||UO.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||UO.safeAttrValue,t.escapeHtml=t.escapeHtml||UO.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new HO(t.css))}QO.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,i=e.whiteList,n=e.onTag,r=e.onIgnoreTag,s=e.onTagAttr,a=e.onIgnoreTagAttr,o=e.safeAttrValue,u=e.escapeHtml,l=this.cssFilter;e.stripBlankChar&&(t=UO.stripBlankChar(t)),e.allowCommentTag||(t=UO.stripCommentTag(t));var h=!1;e.stripIgnoreTagBody&&(h=UO.StripTagBody(e.stripIgnoreTagBody,r),r=h.onIgnoreTag);var c=JO(t,(function(t,e,h,c,d){var f,m={sourcePosition:t,position:e,isClosing:d,isWhite:i.hasOwnProperty(h)};if(!XO(f=n(h,c,m)))return f;if(m.isWhite){if(m.isClosing)return"</"+h+">";var v=function(t){var e=ZO.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var i="/"===(t=ZO.trim(t.slice(e+1,-1)))[t.length-1];return i&&(t=ZO.trim(t.slice(0,-1))),{html:t,closing:i}}(c),p=i[h],b=YO(v.html,(function(t,e){var i,n=-1!==ZO.indexOf(p,t);return XO(i=s(h,t,e,n))?n?(e=o(h,t,e,l))?t+'="'+e+'"':t:XO(i=a(h,t,e,n))?void 0:i:i}));return c="<"+h,b&&(c+=" "+b),v.closing&&(c+=" /"),c+">"}return XO(f=r(h,c,m))?u(c):f}),u);return h&&(c=h.remove(c)),c};var tM=QO;!function(t,e){var i=nO,n=BO,r=tM;function s(t,e){return new r(e).process(t)}for(var a in(e=t.exports=s).filterXSS=s,e.FilterXSS=r,i)e[a]=i[a];for(var a in n)e[a]=n[a];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}(iO,iO.exports);var eM=function(){function t(t,e){var i,n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(t,e,i,r){return"a"===t&&"href"===e||("img"===t||"source"===t)&&"src"===e?n.sanitizeUrl(i):iO.exports.safeAttrValue(t,e,i,r)}},t&&!e?i=t:t&&e?(i=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach((function(e){"whiteList"===e?i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,t.whiteList||{}]):i[e]=t[e]}))):(i=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=i,this._xssFilter=new iO.exports.FilterXSS(i)}return t.prototype.sanitize=function(t,e){switch(void 0===e&&(e={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,e);default:if(e.allowUndefined&&void 0===t)return;return null}},t.prototype.sanitizeUrl=function(t,e){var i=(null!=e?e:{}).isProtocolRequired,n=void 0===i||i,r=this._trim(t.substring(0,t.indexOf(":"))),s="/"===t,a=/^#/.test(t),o=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return s||a||o?iO.exports.escapeAttrValue(t):r||n?"":iO.exports.escapeAttrValue("https://".concat(t))},t.prototype.sanitizeHTMLAttribute=function(t,e,i,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(t,e,i,n):iO.exports.safeAttrValue(t,e,i,n)},t.prototype.validate=function(t,e){void 0===e&&(e={});var i=this.sanitize(t,e);return{isValid:t===i,sanitized:i}},t.prototype._extendObjectOfArrays=function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(i){Array.isArray(t[i])&&Array.isArray(e[i])?e[i]=e[i].concat(t[i]):e[i]=t[i]}))})),e},t.prototype._iterateOverObject=function(t,e){var i=this;void 0===e&&(e={});try{var n=!1,r=void 0;if(Array.isArray(t))r=t.reduce((function(t,r){var s=i.validate(r,e);return s.isValid?t.concat([r]):(n=!0,t.concat([s.sanitized]))}),[]);else{if(!function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=tO.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=eO(t);if(null===e)return!0;var i=XC.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ZC.call(i)==QC}(t)){if(e.allowUndefined&&void 0===t)return;return null}r=Object.keys(t).reduce((function(r,s){var a=t[s],o=i.validate(a,e);return o.isValid?r[s]=a:(n=!0,r[s]=o.sanitized),r}),{})}return n?r:t}catch(t){return null}},t.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},t}();function iM(t,e){let i;if(void 0!==t&&t.length>0)if(void 0!==e&&e<t.length)i=t[e].type;else{const e=function(t){let e;if(0!==t.length){const i=t[0].type;!0===t.every((t=>t.type===i))&&(e=!1),!1===t.some((t=>t.type!==Ty&&t.type!==ky))&&void 0===e&&(e=!0)}return e}(t);!1===e?i=t[0].type:!0===e&&(i=Ay)}return i}function nM(t){var e;let i;return t.type!==ky&&t.type!==Ty||(i=null!==(e=t.stackedType)&&void 0!==e?e:"sideBySide"),i}function rM(t){const{value:e,keepSurroundingQuotes:i,escape:n}=t;let r=e.trim(),s="";return"'"===r.charAt(0)&&"'"===r.charAt(r.length-1)&&(r=r.slice(1,-1),!0===i&&(s="'")),!1!==n&&(r=function(t){let e=t;return e=e.replace(/'/g,"''"),e=e.replace(/[/\\"|[\]\\]/g,"\\$&"),e}(r)),r=`${s}${r}${s}`,r}function sM(t){const{count:e,seriesCount:i,seriesType:n,chartLimits:r}=t,{behaviorAfterLimit:s}=null!=r?r:{};let a=!0;if(s!==lC){const{maxBarUniqueSeriesCountTotal:t,maxBarTwoSeriesCountPerSeries:s,maxBarTwoSeriesCountTotal:o,maxBarThreePlusSeriesCountPerSeries:u,maxBarThreePlusSeriesCountTotal:l,maxLineChartMarkersCountTotal:h,maxLineChartSeriesCount:c,maxPieChartSliceCountTotal:d,maxGaugeByFeaturesLimit:f}=DC(r);switch(n){case ky:case Ay:{const n=e/i;0===i?a=!0:1===i?a=e<=t:2===i?a=e<=o&&n<=s:i>2&&(a=e<=l&&n<=u)}break;case Ty:a=e<=h&&i<=c;break;case Oy:a=e<=d;break;case My:a=e<=f}}return a}function aM(t=[],e){var i,n;return null!==(n=null===(i=t.find((t=>t.name===e)))||void 0===i?void 0:i.alias)&&void 0!==n?n:e}function oM(t){return null==t||""===`${t}`.trim()}function uM(t,e){const i=e.find((e=>e in t));return{isInItem:void 0!==i,expr:i}}function lM(t){let e;switch(t){case"Mean":e=1;break;case"Median":e=2;break;case"Standard Deviation":e=3;break;default:e=0}return e}function hM(t){return(new eM).sanitize(t)}function cM(t){return t.type===wy}function dM(t){return t.type===yy}function fM(t){return void 0!==t&&"dataSource"in t&&void 0!==t.dataSource}function mM(t){let e,i,n;return void 0!==t&&(e=t.type,"unique-value"!==e&&e!==Sy||(i=t.field,e===Sy&&(n=t.normalizationField))),{rendererType:e,rendererField:i,rendererNormalizationField:n}}const vM=VC((t=>{var e;const i=t.featureCollection;let n,r;if(void 0!==i&&void 0!==(null===(e=i.layers)||void 0===e?void 0:e[0])){const t=i.layers[0];n=t.featureSet,r=t.layerDefinition}else r=t.layerDefinition;const s={};if(void 0!==n){if(s.source=_.fromJSON(n).features,void 0!==(null==r?void 0:r.fields)&&(s.fields=r.fields.map((t=>O.fromJSON(t)))),void 0!==(null==r?void 0:r.objectIdField)&&(s.objectIdField=r.objectIdField),void 0!==(null==r?void 0:r.geometryType)){const t=ut({geometryType:r.geometryType});void 0!==(null==t?void 0:t.type)&&"extent"!==(null==t?void 0:t.type)&&(s.geometryType=t.type)}void 0!==(null==r?void 0:r.spatialReference)&&(s.spatialReference=r.spatialReference)}else s.id=t.id,void 0!==(null==r?void 0:r.id)&&(s.layerId=r.id),void 0!==t.url&&(s.url=t.url),void 0!==t.itemId&&void 0!==(null==r?void 0:r.id)&&(s.portalItem={id:t.itemId});if(void 0!==r){const t=r.drawingInfo;void 0!==(null==t?void 0:t.renderer)&&(s.renderer=p(t.renderer))}return new Ie(s)}));function pM(t){var e;return nw(this,void 0,void 0,(function*(){const{layer:i,view:n,chartConfig:r}=t;let s;if(void 0!==i){const t=gM(i);void 0!==n&&!1===t.isTable?(t.outFields=["*"],s=yield n.whenLayerView(t)):s=i}else(null===(e=null==r?void 0:r.dataSource)||void 0===e?void 0:e.type)===Py&&void 0!==r.dataSource.layer&&(s=vM(r.dataSource.layer));return s}))}function bM(t){return t instanceof Ie||!1===function(t){return void 0!==t&&"layer"in t}(t)}function gM(t){return!0===bM(t)?t:t.layer}function yM(t,e){var i;return nw(this,void 0,void 0,(function*(){const n=gM(t);let r=[];if(void 0!==n){yield n.load();const t=!0===e&&void 0!==(null===(i=null==n?void 0:n.popupTemplate)||void 0===i?void 0:i.fieldInfos);r=n.fields.map((e=>{var i;const r=e.toJSON();if(!0===t){const t=null===(i=n.popupTemplate.fieldInfos.find((t=>t.fieldName.toLowerCase()===e.name.toLowerCase())))||void 0===i?void 0:i.label;void 0!==t&&t!==e.name&&(r.alias=t)}return r}))}return r}))}function wM(t,e=[]){return e.find((e=>e.name===t))}function SM(t){var e;const i=t.find((t=>"esriFieldTypeOID"===t.type));return null!==(e=null==i?void 0:i.name)&&void 0!==e?e:""}function xM(t){return[vy,fy,py,my].includes(t.type)}function CM(t,e){let i="";return void 0!==t&&!0===t.includes("=")&&(i=!1!==e?rM({value:t.split("=")[0]}):t.split("=")[0].trim()),i}function OM(t){const{where:e,normalize:i,keepSurroundingQuotes:n,escape:r}=t;let s="";return void 0!==e&&!0===e.includes("=")&&(s=e.split("=")[1].trim(),s=!1===i?function(t){let e=t,i="";"'"===t.charAt(0)&&"'"===t.charAt(t.length-1)&&(e=t.slice(1,-1),i="'"),e=e.replace(/'/g,"''");let n="";return!0===function(t){let e=!1;return"number"!=typeof t&&(e=[...t].some((t=>t.charCodeAt(0)>255))),e}(e)&&(n="N"),`${n}${i}${e}${i}`}(s):rM({value:s,keepSurroundingQuotes:n,escape:r})),s}function MM(t,e){const i=void 0===e||e,n=CM(t),r=OM({where:t,normalize:i,keepSurroundingQuotes:!0});let s=t;return""!==n&&""!==r&&(s=`${n}=${r}`),s}function TM(t){let e=!1;return void 0===t||""===t?e=!0:!0===t.includes("=")&&(e=CM(t,!1)===OM({where:t,normalize:!1})),e}function kM(t){const e=iM(t);let i=GC;return void 0!==(null==t?void 0:t[0])&&(e===Oy?i=function(t){var e,i;let n=GC;return void 0===(null===(e=t[0].query)||void 0===e?void 0:e.outStatistics)?n=$C:void 0===(null===(i=t[0].query)||void 0===i?void 0:i.groupByFieldsForStatistics)&&(n=HC),n}(t):e!==ky&&e!==Ty&&e!==Ay||(i=function(t){var e,i;let n=GC;return!1===TM(null===(e=t[0].query)||void 0===e?void 0:e.where)?n=WC:void 0===(null===(i=t[0].query)||void 0===i?void 0:i.outStatistics)?n=$C:t.length>1&&(n=qC),n}(t))),i}function IM(t){const{types:e}=t;let i=[];if(void 0!==(null==e?void 0:e[0]))for(const{id:t,name:n,domains:r}of e){const e=Object.entries(null!=r?r:{}),s=null==e?void 0:e.filter((([t,e])=>"coded-value"===e.type)),a=null==s?void 0:s.map((([t,e])=>{const i=e.codedValues.map((({code:t,name:e})=>({name:e,code:t})));return{fieldName:t,name:e.name,codedValues:i}}));i.push({id:t,name:n,domains:a})}return i}function AM(t){let e;if(void 0!==t){const i=gM(t);void 0!==(null==i?void 0:i.typeIdField)&&(e={typeIdField:i.typeIdField,types:IM(i)})}return e}function jM(t){var e,i,n,r,s,a,o;const{fieldName:u,fieldValueToMatch:l,subtypeInfo:h,fieldList:c}=t;let d=l;if(void 0!==l&&""!==l&&void 0!==u&&""!==u&&(void 0!==h&&(d=function(t){var e,i,n;const{subtypeInfo:r,fieldName:s,fieldValueToMatch:a}=t;let o=a;return(null==r?void 0:r.typeIdField)===s&&(o=null!==(n=null===(i=null===(e=r.types)||void 0===e?void 0:e.find((t=>`${t.id}`==`${a}`)))||void 0===i?void 0:i.name)&&void 0!==n?n:a),o}({subtypeInfo:h,fieldName:u,fieldValueToMatch:l})),d===l)){const t=wM(u,c);if(void 0!==(null==h?void 0:h.types))for(const s of null==h?void 0:h.types){const a=null!==(i=null===(e=s.domains)||void 0===e?void 0:e.filter((e=>e.fieldName===(null==t?void 0:t.name))))&&void 0!==i?i:[];for(const t of a)if(d=null===(r=null===(n=null==t?void 0:t.codedValues)||void 0===n?void 0:n.find((t=>`${t.code}`==`${l}`)))||void 0===r?void 0:r.name,void 0!==d)break;if(void 0!==d)break}void 0!==d&&d!==l||void 0!==(null==t?void 0:t.domain)&&"codedValue"===t.domain.type&&(d=null!==(o=null===(a=null===(s=t.domain.codedValues)||void 0===s?void 0:s.find((t=>`${t.code}`==`${l}`)))||void 0===a?void 0:a.name)&&void 0!==o?o:l)}return d}function FM(t){const{seriesConfig:e,xAxisValueFormatType:i,setTimeBinningInfoWhenNotProvided:n}=t;let r=!1;if(iM([e])===Ty&&"date"===i&&kM([e])!==$C){const{timeIntervalUnits:t,timeIntervalSize:i}=e;r=!0===n||void 0!==i&&i>0&&void 0!==t}return r}function DM(t,e){var i;return nw(this,void 0,void 0,(function*(){const n=(yield yM(t)).find((t=>e.toUpperCase()===t.name.toUpperCase()));return null!==(i=null==n?void 0:n.name)&&void 0!==i?i:e}))}function PM(t){var e,i,n,r;return!0===(null===(i=null===(e=t.capabilities)||void 0===e?void 0:e.query)||void 0===i?void 0:i.supportsDistance)||!0===(null===(r=null===(n=t.sourceJSON)||void 0===n?void 0:n.advancedQueryCapabilities)||void 0===r?void 0:r.supportsQueryWithDistance)}function LM(t){let e=!1;return e=kM(t)===HC,e}function EM(t){return"featureGauge"===t.subType}function NM(t){const{seriesType:e,fetchedData:i}=t;let n;if(void 0!==i)switch(e){case Iy:n=i.bins;break;case ky:case Ty:case Ay:case Cy:case Oy:case My:n=i.dataItems}return n}function RM(t){return t.map((t=>`${t.id}`)).filter((t=>"undefined"!==t))}function BM(t,e){let i=[];const n=null!=e?e:RM(t);return i=t.filter((t=>n.includes(t.id))).map((t=>"y"in t?t.y:void 0)).filter((t=>void 0!==t)),Array.from(new Set(i))}function _M(t){var e,i,n;let r,s,a=NaN,o=NaN;const{chartConfig:u,chartData:l,visibleSeriesId:h}=t,{series:c}=u;if((null==c?void 0:c.length)>0){const t=null!==(e=nM(c[0]))&&void 0!==e?e:"sideBySide",{x:d}=c[0],f=l.filter((t=>null!==t[d]));switch([r,s]=Vy(f,(t=>t[d])),!0==("date"===(null===(n=null===(i=u.axes)||void 0===i?void 0:i[1])||void 0===n?void 0:n.valueFormat.type))&&void 0!==r&&void 0!==s&&([r,s]=[new Date(r).valueOf(),new Date(s).valueOf()]),t){case"stacked100":a=NaN,o=NaN;break;case"stacked":{const{stackedMinY:t,stackedMaxY:e}=function(t){var e,i;const{seriesConfig:n,visibleSeriesId:r,filteredData:s}=t,a=function(t,e){const i=new Map,n=null!=e?e:RM(t);return t.forEach((t=>{var e;if(n.includes(t.id)&&"y"in t){const n=null!==(e=i.get(t.type))&&void 0!==e?e:[];n.push(t.y),i.set(t.type,n)}})),i}(n,r),o=null===(i=null===(e=n.find((t=>t.type===Ty)))||void 0===e?void 0:e.stackNegativeValuesToBaseline)||void 0===i||i;let u=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER;return s.forEach(((t,e)=>{a.forEach((i=>{var n,r;if(!1===o){let e=0;for(let n=0;n<i.length;n+=1)e+=t[i[n]],u=Math.max(u,e),l=Math.min(l,e)}else{let s=[],a=[];for(let o=0;o<i.length;o+=1){const u=t[i[o]];u<0?a[e]=(null!==(n=a[e])&&void 0!==n?n:0)+u:s[e]=(null!==(r=s[e])&&void 0!==r?r:0)+u}s=s.filter((t=>Number.isFinite(t))).sort(((t,e)=>t-e)),a=a.filter((t=>Number.isFinite(t))).sort(((t,e)=>t-e)),u=Math.max(u,s.length>0?s[s.length-1]:a[a.length-1]),l=Math.min(l,a.length>0?a[0]:s[0])}}))})),{stackedMinY:l,stackedMaxY:u}}({seriesConfig:c,filteredData:f,visibleSeriesId:h});a=t,o=e;break}default:{a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;const t=BM(c,h);for(let e=0;e<t.length;e+=1){const i=t[e],[n,r]=Vy(f,(t=>t[i]));void 0!==n&&n<a&&(a=n),void 0!==r&&r>o&&(o=r)}break}}}return{minY:a,maxY:o,minX:r,maxX:s}}function zM(t){var e,i,n,r,s;let a=null!==(i=null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.maxRecordCount)&&void 0!==i?i:bC.maxRecords;return(null===(r=null===(n=null==t?void 0:t.sourceJSON)||void 0===n?void 0:n.advancedQueryCapabilities)||void 0===r?void 0:r.supportsMaxRecordCountFactor)&&(a=(null===(s=null==t?void 0:t.sourceJSON)||void 0===s?void 0:s.maxRecordCount)*bC.maxRecordCountFactor),a}function VM(t,e){let i;const n=Array.from(new Set(t)).filter((t=>null!=t&&""!==t&&!1===TM(t)));return n.sort(((t,e)=>e.length-t.length)),1===n.length?[i]=n:null==n||n.forEach((t=>{void 0!==t&&(!0===oM(i)?i=`(${t})`:!1===(null==i?void 0:i.includes(t))&&(i=`${i} ${null!=e?e:"AND"} (${t})`))})),null!=i?i:"1=1"}function GM(t){let e;return void 0!==t&&(e=new te({start:new Date(t[0]),end:new Date(t[1])})),e}function $M(t){let e;return void 0!==t&&(e=ut(t)),e}function WM(t){var e,i;const{queryObject:n,queryConfig:r,outFields:s,maxRecordCountFactor:a,cacheHint:o}=t,{where:u,groupByFieldsForStatistics:l,orderByFields:h,outStatistics:c,gdbVersion:d,geometry:f,distance:p,units:b,timeExtent:g,start:y,num:w,returnDistinctValues:S}=null!=r?r:{},x=new v;x.returnGeometry=!1;const C=gM(n);if(x.where=VM([u,C.definitionExpression]),x.outFields=null!==(e=function(t){return void 0===t?void 0:Array.from(new Set(t))}(s))&&void 0!==e?e:["*"],x.groupByFieldsForStatistics=null!=l?l:x.groupByFieldsForStatistics,x.orderByFields=null!=h?h:[],x.returnDistinctValues=null!=S&&S,void 0!==c){const{compatibleWithEnvelopeAggregate:t}=function(t){var e,i,n,r,s;let a=!1;const o=null!==(n=null===(i=null===(e=t.sourceJSON)||void 0===e?void 0:e.advancedQueryCapabilities)||void 0===i?void 0:i.supportedSpatialAggregationStatistics)&&void 0!==n?n:[],u=null===(s=null===(r=t.capabilities)||void 0===r?void 0:r.query)||void 0===s?void 0:s.supportedSpatialStatisticAggregations;return a=o.includes("EnvelopeAggregate")||!0===(null==u?void 0:u.envelope),{compatibleWithEnvelopeAggregate:a}}(C);x.outStatistics=c.filter((e=>"envelope-aggregate"!==e.statisticType||!0===t)).map((t=>m.fromJSON(t)))}void 0!==a&&(x.maxRecordCountFactor=a),void 0!==d&&""!==d?x.gdbVersion=d:void 0!==C.gdbVersion&&""!==C.gdbVersion&&(x.gdbVersion=C.gdbVersion);const O=$M(f);void 0!==O&&(x.geometry=O,!0===PM(C)&&(void 0!==p&&(x.distance=p),void 0!==b&&(x.units=b)));const M=GM(g);return void 0!==M?x.timeExtent=M:void 0!==C.timeExtent&&(x.timeExtent=C.timeExtent),x.cacheHint=!1!==o,void 0!==w&&(x.num=w),void 0!==y&&(x.start=y,x.num=null!==(i=x.num)&&void 0!==i?i:zM(C)),x}function qM(t){var e,i;return!0===(null===(i=null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.advancedQueryCapabilities)||void 0===i?void 0:i.supportsMaxRecordCountFactor)?bC.maxRecordCountFactor:void 0}const HM=new Map,UM="layerLoadFailure",KM="queryFeaturesError",JM="ChartDisposeError";class YM extends Error{constructor(t,e,i){super(e),this.name=t,this.details=i}}function ZM(t=vC().locale){return nw(this,void 0,void 0,(function*(){let e=yield import("./p-acc23326.js");switch(t){case hC.Arabic:e=yield import("./p-e06a5ae0.js");break;case hC.Bosnian:e=yield import("./p-cb14b059.js");break;case hC.Bulgarian:e=yield import("./p-0fe1da33.js");break;case hC.Catalan:e=yield import("./p-7bde9787.js");break;case hC.Czech:e=yield import("./p-bbbe5253.js");break;case hC.Danish:e=yield import("./p-5c61e8c6.js");break;case hC.German:e=yield import("./p-554c0935.js");break;case hC.Greek:e=yield import("./p-cfd1e4cd.js");break;case hC.EnglishUSA:e=yield import("./p-a1e2eeb6.js");break;case hC.Spanish:e=yield import("./p-683f68a5.js");break;case hC.Estonian:e=yield import("./p-20a08325.js");break;case hC.Finnish:e=yield import("./p-9bb74187.js");break;case hC.French:e=yield import("./p-b541323a.js");break;case hC.Hebrew:e=yield import("./p-8251481e.js");break;case hC.Croatian:e=yield import("./p-bf3122e5.js");break;case hC.Hungarian:e=yield import("./p-fe73738f.js");break;case hC.Indonesian:e=yield import("./p-5b19b140.js");break;case hC.Italian:e=yield import("./p-f9a7322e.js");break;case hC.Japanese:e=yield import("./p-bce29e69.js");break;case hC.Korean:e=yield import("./p-491e943e.js");break;case hC.Lithuanian:e=yield import("./p-75dad0fe.js");break;case hC.Latvian:e=yield import("./p-ba8f88bb.js");break;case hC.NorwegianBokml:e=yield import("./p-8245d8af.js");break;case hC.Dutch:e=yield import("./p-66434e96.js");break;case hC.Polish:e=yield import("./p-39faebbd.js");break;case hC.PortugueseBrazil:e=yield import("./p-9d73540c.js");break;case hC.PortuguesePortugal:e=yield import("./p-844aaacc.js");break;case hC.Romanian:e=yield import("./p-15a023c0.js");break;case hC.Russian:e=yield import("./p-26227196.js");break;case hC.Serbian:e=yield import("./p-6bc1fb0b.js");break;case hC.Slovak:e=yield import("./p-219ab549.js");break;case hC.Slovenian:e=yield import("./p-3d292ed0.js");break;case hC.Swedish:e=yield import("./p-ea5defe6.js");break;case hC.Thai:e=yield import("./p-3a221379.js");break;case hC.Turkish:e=yield import("./p-5e7c9489.js");break;case hC.Ukrainian:e=yield import("./p-913c186b.js");break;case hC.Vietnamese:e=yield import("./p-fec363ea.js");break;case hC.ChineseChina:e=yield import("./p-cb4af7b5.js");break;case hC.ChineseHongKong:e=yield import("./p-6b97a699.js");break;case hC.ChineseTaiwan:e=yield import("./p-54d20dd8.js")}return e}))}function XM(t){var e,i,n;return nw(this,void 0,void 0,(function*(){const{queryObject:r,queryConfig:s,abortKey:a}=t,{outStatistics:o}=s,u=new Map;if(void 0!==r&&void 0!==o&&o.length>0){const t=o.map((t=>{const{statisticType:e,onStatisticField:i,outStatisticFieldName:n}=t;return{statisticType:e,onStatisticField:i,outStatisticFieldName:null==n?void 0:n.toUpperCase()}}));s.outStatistics=t,delete s.num,delete s.orderByFields;const l=WM({queryObject:r,queryConfig:s});let h;try{h=yield r.queryFeatures(l,{signal:void 0!==a?null===(e=HM.get(a))||void 0===e?void 0:e.signal:void 0})}catch(t){if(!1===$(t)){const e=yield ZM();throw new YM(KM,e.queryError,t)}}const c=null===(n=null===(i=null==h?void 0:h.features)||void 0===i?void 0:i[0])||void 0===n?void 0:n.attributes;void 0!==c&&o.forEach((t=>{var e,i;const{outStatisticFieldName:n}=t;if(void 0!==n){let t=null!==(i=null!==(e=c[n.toLowerCase()])&&void 0!==e?e:c[n.toUpperCase()])&&void 0!==i?i:c[n];void 0!==t&&u.set(n,t)}}))}return u}))}function QM(t){var e;return nw(this,void 0,void 0,(function*(){const{queryObject:i,queryConfig:n,outFields:r,returnUniqueIdsOnly:s,abortKey:a}=t;let o=[];if(void 0!==i){const t=WM({queryObject:i,queryConfig:n,outFields:r,maxRecordCountFactor:qM(gM(i))});try{o=!0===s?yield i.queryObjectIds(t):(yield i.queryFeatures(t,{signal:void 0!==a?null===(e=HM.get(a))||void 0===e?void 0:e.signal:void 0})).features}catch(t){if(!1===$(t)){const e=yield ZM();throw new YM(KM,e.queryError,t)}}}return o}))}function tT(t){var e;return nw(this,void 0,void 0,(function*(){const i=[],{featureCount:n,maxRecords:r,queryConfig:s}=t;let a=[],o=0,u=null!==(e=null==s?void 0:s.start)&&void 0!==e?e:0;for(;o<bC.maxParallelRequests&&u<n;){const e=Object.assign({},t);e.queryConfig=Object.assign(Object.assign({},s),{start:u,num:Math.min(r,n-u)}),i.push(QM(e)),u+=r,o+=1}return a=(yield Promise.all(i)).flat(),a}))}function eT(t){var e;return nw(this,void 0,void 0,(function*(){const{queryObject:i,queryConfig:n,outFields:r,returnUniqueIdsOnly:s,featureCount:a,noBatch:o,abortKey:u}=t;let l=[];if(void 0!==i){const t=gM(i),h=SM(yield yM(i)),c=null!==(e=null!=a?a:(yield XM({queryObject:i,queryConfig:Object.assign(Object.assign({},n),{outStatistics:[{statisticType:by,onStatisticField:h,outStatisticFieldName:by}]}),abortKey:u})).get(by))&&void 0!==e?e:NaN,d=zM(t);if(!0!==o&&c>d&&!0===t.capabilities.query.supportsPagination){let t=0,e=0;const a=Math.ceil(c/d),o=Math.ceil(a/bC.maxParallelRequests),h=[];for(;e<o;){t=e*bC.maxParallelRequests*d;const a=tT({queryConfig:Object.assign(Object.assign({},n),{start:t}),outFields:r,queryObject:i,maxRecords:d,featureCount:c,returnUniqueIdsOnly:s,abortKey:u});h.push(a),e+=1}l=(yield Promise.all(h)).flat()}else(Number.isNaN(c)||c>0)&&(l=yield QM({queryObject:i,queryConfig:n,outFields:r,returnUniqueIdsOnly:s,abortKey:u}))}return l}))}function iT(t){return nw(this,void 0,void 0,(function*(){const{queryObject:e,queryConfig:i,uniqueFeature:n,abortKey:r}=t,s=Object.assign(Object.assign({},i),{returnDistinctValues:!0});return yield eT({queryObject:e,abortKey:r,queryConfig:s,returnUniqueIdsOnly:!0,featureCount:!0===n?1:void 0})}))}function nT(t){if(void 0!==t){const e=HM.get(t);void 0!==e&&e.abort(),HM.set(t,new AbortController)}}const rT="nonNumericAggregation",sT="duplicateSeriesId",aT="required",oT="minLength",uT="minItems",lT="maxItems",hT="pattern",cT="additionalProperties",dT="enum",fT="anyOf",mT="badData",vT="emptyDataSet",pT="histogramEmptyField",bT="barElementExceedsLimit",gT="lineChartExceedsLimit",yT="pieChartExceedsLimit",wT="gaugeExceedsLimit",ST="PieChartMixOfNegativePositiveSlices",xT="negativeValueInSqrtCalculation",CT="negativeValueInLogCalculation";function OT(t,e){return t===jy||t===Fy&&e>0||t===Dy&&e>=0}function MT(t,e){const i={valid:!1};return!0===e?i.invalidType=pT:t===Fy?i.invalidType=CT:t===Dy&&(i.invalidType=xT),i}function TT(t){return function(){var t=Gy,e=Vy,i=Yy;function n(n){Array.isArray(n)||(n=Array.from(n));var r,s,a=n.length,o=new Array(a);for(r=0;r<a;++r)o[r]=t(n[r],r,n);var u=e(o),l=u[0],h=u[1],c=i(o,l,h);if(!Array.isArray(c)){const t=h,i=+c;if(e===Vy&&([l,h]=function(t,e,i){let n;for(;;){const r=Jy(t,e,i);if(r===n||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),n=r}}(l,h,i)),c=function(t,e,i){var n,r,s,a,o=-1;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if((n=e<t)&&(r=t,t=e,e=r),0===(a=Jy(t,e,i))||!isFinite(a))return[];if(a>0){let i=Math.round(t/a),n=Math.round(e/a);for(i*a<t&&++i,n*a>e&&--n,s=new Array(r=n-i+1);++o<r;)s[o]=(i+o)*a}else{a=-a;let i=Math.round(t*a),n=Math.round(e*a);for(i/a<t&&++i,n/a>e&&--n,s=new Array(r=n-i+1);++o<r;)s[o]=(i+o)/a}return n&&s.reverse(),s}(l,h,i),c[c.length-1]>=h)if(t>=h&&e===Vy){const t=Jy(l,h,i);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else c.pop()}for(var d=c.length;c[0]<=l;)c.shift(),--d;for(;c[d-1]>h;)c.pop(),--d;var f,m=new Array(d+1);for(r=0;r<=d;++r)(f=m[r]=[]).x0=r>0?c[r-1]:l,f.x1=r<d?c[r]:h;for(r=0;r<a;++r)null!=(s=o[r])&&l<=s&&s<=h&&m[zy(c,s,0,d)].push(n[r]);return m}return n.value=function(e){return arguments.length?(t="function"==typeof e?e:qy(e),n):t},n.domain=function(t){return arguments.length?(e="function"==typeof t?t:qy([t[0],t[1]]),n):e},n.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?qy(Wy.call(t)):qy(t),n):i},n}().thresholds(((e,i,n)=>function(t,e,i){t=+t,e=+e,i=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+i;for(var n=-1,r=0|Math.max(0,Math.ceil((e-t)/i)),s=new Array(r);++n<r;)s[n]=t+n*i;return s}(t).map((e=>i+e/t*(n-i)))))}function kT(t,e){let i=t;switch(e){case Fy:i=Math.log(t);break;case Dy:i=Math.sqrt(t)}return i}const IT=[{unit:"esriTimeUnitsSeconds",threshold:6e4,unitMs:1e3,preferredIntervalSize:[1,2,3,5,6,10,12,15,20,30,60]},{unit:"esriTimeUnitsMinutes",threshold:36e5,unitMs:6e4,preferredIntervalSize:[1,2,3,5,6,10,12,15,20,30,60]},{unit:"esriTimeUnitsHours",threshold:864e5,unitMs:36e5,preferredIntervalSize:[1,2,3,4,6,8,12,24]},{unit:"esriTimeUnitsDays",threshold:6048e5,unitMs:864e5,preferredIntervalSize:[1,2,3,4,5,6,7]},{unit:"esriTimeUnitsWeeks",threshold:24192e5,unitMs:6048e5,preferredIntervalSize:[1,2,3,4]},{unit:"esriTimeUnitsMonths",threshold:290304e5,unitMs:24192e5,preferredIntervalSize:[1,2,3,4,6,12]},{unit:"esriTimeUnitsYears",threshold:Number.MAX_SAFE_INTEGER,unitMs:290304e5,preferredIntervalSize:[1,2,4,5,10,25,50,100]}],AT=["1.0.0","1.0.1","2.0.0","3.0.0","3.1.0","3.2.0","3.3.0","3.4.0","3.5.0","3.6.0","3.7.0","3.8.0","3.9.0","3.9.1","3.9.2","3.10.0","3.11.0","4.0.0","4.0.1","5.0.0","6.0.0","6.1.0","6.2.0","6.2.1"],jT={$schema:"http://json-schema.org/draft-07/schema#",definitions:{RESTFieldType:{enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"RESTFieldType"},RESTStatisticType:{enum:["avg","centroid-aggregate","convex-hull-aggregate","count","envelope-aggregate","max","min","no_aggregation","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"RESTStatisticType"},RESTSimpleLineSymbolStyle:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"RESTSimpleLineSymbolStyle"},RESTSimpleMarkerSymbolStyle:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"RESTSimpleMarkerSymbolStyle"},RESTSimpleFillSymbolStyle:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"RESTSimpleFillSymbolStyle"},RESTHorizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"RESTHorizontalAlignment"},RESTVerticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"RESTVerticalAlignment"},RESTSymbolType:{enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string",title:"RESTSymbolType"},RESTFontStyle:{enum:["italic","normal","oblique"],type:"string",title:"RESTFontStyle"},RESTFontWeight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"RESTFontWeight"},RESTFontDecoration:{enum:["line-through","none","underline"],type:"string",title:"RESTFontDecoration"},RESTRendererType:{enum:["class-breaks","dictionary","dot-density","heatmap","pie-chart","simple","unique-value"],type:"string",title:"RESTRendererType"},RESTUnits:{enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"RESTUnits"},WebChartTypes:{enum:["barSeries","boxPlotSeries","buffer","category","chart","chartAxis","chartGuide","chartLegend","chartOverlay","chartOverlays","chartText","comboLineAndBarSeries","cursorCrosshair","date","gaugeAxisTick","gaugeNeedle","gaugeSeries","histogramSeries","lineSeries","number","pieSeries","pieTick","probabilityPlotSeries","profileGraphSeries","scatterSeries","sizeScale"],type:"string",title:"WebChartTypes"},WebChartDataTransformations:{title:"WebChartDataTransformations",enum:["logarithmic","none","squareRoot"],type:"string"},WebChartColoringPatterns:{title:"WebChartColoringPatterns",enum:["colorMatch","singleColor"],type:"string"},WebChartLegendPositions:{title:"WebChartLegendPositions",enum:["bottom","left","right","top"],type:"string"},WebChartStackedKinds:{enum:["sideBySide","stacked","stacked100"],type:"string",title:"WebChartStackedKinds"},WebChartProbabilityPlotKinds:{title:"WebChartProbabilityPlotKinds",enum:["normalQQPlot","qqPlot"],type:"string"},WebChartSortOrderKinds:{enum:["ASC","DESC"],type:"string",title:"WebChartSortOrderKinds"},WebChartDataSourceTypes:{enum:["inline","layer"],type:"string",title:"WebChartDataSourceTypes"},WebChartLineSmoothedKinds:{enum:["bezier","monotoneX","monotoneY"],type:"string",title:"WebChartLineSmoothedKinds"},WebChartTimeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"WebChartTimeIntervalUnits"},WebChartNullPolicyTypes:{enum:["interpolate","null","zero"],type:"string",title:"WebChartNullPolicyTypes"},WebChartTimeAggregationTypes:{enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"WebChartTimeAggregationTypes"},WebChartLabelBehavior:{enum:["none","rotate","stagger","wrap"],type:"string",title:"WebChartLabelBehavior"},WebChartVersionStatus:{enum:["newer","older","same","unrecognized"],type:"string",title:"WebChartVersionStatus"},WebChartAxisTypes:{enum:["category","date","value"],type:"string",title:"WebChartAxisTypes"},GaugeChartSubTypes:{enum:["featureGauge","statisticGauge"],type:"string",title:"GaugeChartSubTypes"},SizePolicyScaleTypes:{enum:["linear","logarithmic"],type:"string",title:"SizePolicyScaleTypes"},LabelValueTypes:{enum:["modifiedValue","originalValue"],type:"string",title:"LabelValueTypes"},RGBObject:{description:"JSON representation of the color object",title:"RGBObject",type:"object",properties:{r:{type:"number",title:"r"},g:{type:"number",title:"g"},b:{type:"number",title:"b"},a:{default:1,type:"number",title:"a"}},required:["b","g","r"]},RGBArray:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3,title:"RGBArray"},WebChartConfigFields:{description:"Is an object which dictate which data-item field should be used for defining a property of the rendered element (line, point, bars, etc). Used in inline data source mode only.",title:"WebChartConfigFields",type:"object",properties:{fillColor:{type:"string",title:"fillColor"},fillOpacity:{type:"string",title:"fillOpacity"},fillStyle:{type:"string",title:"fillStyle"},lineColor:{type:"string",title:"lineColor"},lineOpacity:{type:"string",title:"lineOpacity"},lineWidth:{type:"string",title:"lineWidth"},lineStyle:{type:"string",title:"lineStyle"},markerSize:{type:"string",title:"markerSize"},outlineColor:{type:"string",title:"outlineColor"},outlineOpacity:{type:"string",title:"outlineOpacity"},outlineWidth:{type:"string",title:"outlineWidth"},outlineStyle:{type:"string",title:"outlineStyle"},displayLabel:{type:"string",title:"displayLabel"}}},WebChartDataItemColor:{anyOf:[{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string"}],title:"WebChartDataItemColor"},WebChartDataItemValue:{title:"WebChartDataItemValue",anyOf:[{type:"array",items:{type:"string"}},{type:"array",items:{type:"number"}},{type:"string",format:"date-time"},{$ref:"#/definitions/IExtent"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:{$ref:"#/definitions/WebChartDataItem"}},{type:["null","string","number","boolean"]}]},WebChartDataItem:{description:"JSON representation of a typical data item",title:"WebChartDataItem",type:"object",additionalProperties:{$ref:"#/definitions/WebChartDataItemValue"}},WebChartScatterPlotDataItem:{description:"JSON representation of the processed data for a Scatter plot",title:"WebChartScatterPlotDataItem",type:"object",properties:{r2:{type:"number",title:"r2"},trendLinePoints:{type:"array",items:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartDataItem"}],minItems:2,maxItems:2,title:"trendLinePoints"},dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"}},required:["dataItems"]},TimeIntervalInfo:{title:"TimeIntervalInfo",type:"object",properties:{timeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{type:"number",title:"timeIntervalSize"}}},WebChartGenericDataItem:{description:"JSON representation of the generic data structure for bar, line bar-line, gauge and pie chart",title:"WebChartGenericDataItem",type:"object",properties:{dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"},timeIntervalInfo:{description:"Time interval information, only for line charts",$ref:"#/definitions/TimeIntervalInfo",title:"timeIntervalInfo"}},required:["dataItems"]},WebChartBin:{description:"JSON representation of a Histogram bin",title:"WebChartBin",type:"object",properties:{count:{type:"number",title:"count"},minValue:{description:"Min value in the bin",type:"number",title:"minValue"},maxValue:{description:"Max value in the bin",type:"number",title:"maxValue"},symbol:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"symbol"}},required:["count","maxValue","minValue"]},WebChartHistogramDataItem:{description:"JSON representation of the processed data for a Histogram",title:"WebChartHistogramDataItem",type:"object",properties:{mean:{type:"number",title:"mean"},median:{type:"number",title:"median"},stddev:{type:"number",title:"stddev"},max:{type:"number",title:"max"},min:{type:"number",title:"min"},sum:{description:"Sum of the values of all the points",type:"number",title:"sum"},count:{description:"Number of all the points/features in un-binned data (including only non-null entries)",type:"number",title:"count"},nulls:{description:"Number of null entries in the pool of points",type:"number",title:"nulls"},bins:{type:"array",items:{$ref:"#/definitions/WebChartBin"},title:"bins"}},required:["bins","max","mean","median","min","stddev"]},WebChartDataTypes:{title:"WebChartDataTypes",anyOf:[{$ref:"#/definitions/WebChartScatterPlotDataItem"},{$ref:"#/definitions/WebChartGenericDataItem"},{$ref:"#/definitions/WebChartHistogramDataItem"}]},WebChartInlineDataSource:{description:"JSON representation of the inline data source",title:"WebChartInlineDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source. It is **inline** for inline data (arrays of POJOs).",type:"string",enum:["inline"],title:"type"},processed:{description:"Indicates whether the data is already processed and be used right away. If it is `false`, then the data needs to go through some transformation before being assigned to chart/series.",type:"boolean",title:"processed"},configFields:{description:"An object that is used to pass custom configuration like selecting the fill color based on a dataSource field.",$ref:"#/definitions/WebChartConfigFields",title:"configFields"},data:{$ref:"#/definitions/WebChartDataTypes",description:"Structure containing all the data for the chart.",title:"data"}},required:["data","processed","type"]},WebChartLayerDataSource:{description:"JSON representation of the feature layer data source",title:"WebChartLayerDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source.",type:"string",enum:["layer"],title:"type"},layer:{$ref:"#/definitions/IFeatureLayer",description:"Carries the properties necessary to build a JSAPI Feature Layer in order to fetch the chart data.",title:"layer"}},required:["layer","type"]},WebChartDataSources:{title:"WebChartDataSources",anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartLayerDataSource"}]},ValueConversion:{description:"Stores information regarding a numeric conversion",title:"ValueConversion",type:"object",properties:{factor:{description:"A numeric value multiplying the value to convert",type:"number",title:"factor"},offset:{description:"A numeric offset to apply to the value to convert",type:"number",title:"offset"}}},WebChartText:{description:"Stores info on how some text is rendered on the chart and whether it is visible or not.",title:"WebChartText",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartText object. For ChartText object, it is "chartText".',type:"string",enum:["chartText"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},content:{$ref:"#/definitions/ITextSymbol",description:"Contains the styling info and text content. Details on **esriTS** are [here](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm).",title:"content"}},required:["content","type"]},WebChartCursorCrosshair:{description:"JSON representation of the cursor's crosshair for a chart.",title:"WebChartCursorCrosshair",type:"object",properties:{type:{description:"Represents a unique string identifier for the chart cursor's crosshair.",type:"string",enum:["cursorCrosshair"],title:"type"},style:{description:"Contains styling info on how the chart cursor's crosshair should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"style"},verticalLineVisible:{description:"Indicates whether the vertical crosshair line should be displayed",default:!1,type:"boolean",title:"verticalLineVisible"},horizontalLineVisible:{description:"Indicates whether the horizontal crosshair line should be displayed",default:!1,type:"boolean",title:"horizontalLineVisible"}},required:["type"]},WebChartLegend:{description:"JSON representation of the Chart's legend box",title:"WebChartLegend",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/ITextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:!1,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartPieChartLegend:{description:"Specific legend for the Pie chart",title:"WebChartPieChartLegend",type:"object",properties:{displayNumericValue:{description:"Indicates whether the numeric value associated to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:!1,type:"boolean",title:"displayNumericValue"},displayPercentage:{description:"Indicates whether the percentage to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:!1,type:"boolean",title:"displayPercentage"},labelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"labelMaxWidth"},valueLabelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"valueLabelMaxWidth"},type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/ITextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:!1,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartOverlay:{description:"JSON representation of the chart's overlays like trendline scatter plot, and median in histogram",title:"WebChartOverlay",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartOverlay object. For ChartOverlay object, it is "chartOverlay".',type:"string",enum:["chartOverlay"],title:"type"},created:{description:"Determines whether the overlay is created under the hood. It may or may not be visible.",default:!1,type:"boolean",title:"created"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},symbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the overlay should be rendered",title:"symbol"}},required:["symbol","type"]},NumberFormatOptions:{description:"Defines how the numerical(value) axis data should be formatted.",title:"NumberFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "number". It can help us to differentiate numerical (value) axis from other types of axes viz., date-time axis and category axis.',type:"string",enum:["number"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.NumberFormatOptions",description:"Represents the JS native [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat), which is based on [CLDR](http://cldr.unicode.org/translation/numbers-currency/number-patterns) specifications.",title:"intlOptions"}},required:["intlOptions","type"]},CategoryFormatOptions:{description:"Defines how the category axis data (Categories) should be formatted.",title:"CategoryFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the CategoryFormatOptions object. For CategoryFormatOptions object, it is "category". It can help us to differentiate category axis from other types of axes, viz., date-time axis and numeric (value) axis.',type:"string",enum:["category"],title:"type"},characterLimit:{description:"Represents a positive integer which represents the limit on the number of characters to be displayed for all the category strings. The truncated string are appended with `...`. If property is not present or `null`, no truncation is done.",minimum:1,multipleOf:1,type:["null","number"],title:"characterLimit"}},required:["type"]},WebChartGuide:{description:"JSON representation of the chart's guide object. Can be used to represent both line and fill guides.",title:"WebChartGuide",type:"object",properties:{type:{description:'Represents a unique string identifier for the Guide object. For Guide class, it is "chartGuide".',type:"string",enum:["chartGuide"],title:"type"},start:{description:"Determines the value where the guide should begin.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"start"},end:{description:"Determines the value where the guide should end. If it is not specified, we get a line guide, otherwise we get a fill/rectangular guide.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"end"},style:{description:"Determines how the guide should be rendered. Line guide requires [esriSLS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format, and fill guide requires [esriSFS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format.",anyOf:[{$ref:"#/definitions/ISimpleLineSymbol"},{$ref:"#/definitions/ISimpleFillSymbol"}],title:"style"},name:{description:"A unique string identifier which is used to refer to a particular guide. It is displayed in the Chart Authoring UI to differentiate between different guides.",type:"string",title:"name"},label:{description:"Defines a text label for the given guide. It is displayed on the chart next to the concerned guide and is styled using **esriTS** format.",$ref:"#/definitions/ITextSymbol",title:"label"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},above:{description:"Determines whether the guide should be rendered on top of (overlapping) the series or under the series.",default:!1,type:"boolean",title:"above"}},required:["name","start","style","type"]},WebChartAxis:{description:"JSON representation of the chart's axis object",title:"WebChartAxis",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:!1,type:"boolean",title:"isLogarithmic"},title:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the title of the axis should be rendered",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:!1,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:!1,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:!1,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:!1,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:!1,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","title","type","valueFormat"]},WebChartGaugeAxisTick:{description:"JSON representation of the gauge axis ticks.",title:"WebChartGaugeAxisTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeAxisTick object. For WebChartGaugeAxisTick object, it is "gaugeAxisTick".',type:"string",enum:["gaugeAxisTick"],title:"type"},visible:{description:"Determines the visibility of the axis ticks.",default:!0,type:"boolean",title:"visible"}},required:["type"]},WebChartNeedle:{title:"WebChartNeedle",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartNeedle object. For WebChartNeedle object, it is "gaugeNeedle".',type:"string",enum:["gaugeNeedle"],title:"type"},visible:{description:"Hides or shows the needle.",default:!0,type:"boolean",title:"visible"},symbol:{description:"Contains styling info on how the needle should be rendered",$ref:"#/definitions/ISimpleFillSymbol",title:"symbol"},startWidth:{description:"Represents the needle's thickness at the bottom (chart's center), in px",minimum:1,default:10,type:["null","number"],title:"startWidth"},endWidth:{description:"Represents the needle's thickness at the top, in px",minimum:1,default:1,type:["null","number"],title:"endWidth"},innerRadius:{description:"Represents the size of the hole in the middle of the chart. Can be visualized when guides are displayed.",minimum:0,maximum:100,default:25,type:["null","number"],title:"innerRadius"},displayPin:{description:"Hides or shows the needle's pin (centroid circle)",default:!1,type:"boolean",title:"displayPin"}},required:["type"]},WebChartGaugeAxis:{description:"JSON representation of the gauge chart's axis object. Inherits from the WebChartAxis properties.",title:"WebChartGaugeAxis",type:"object",properties:{innerLabel:{description:"Specifies how the axis' inner label needs to be displayed",$ref:"#/definitions/WebChartText",title:"innerLabel"},needle:{description:"Specifies how the axis' needle needs to be displayed",$ref:"#/definitions/WebChartNeedle",title:"needle"},ticks:{description:"Specifies how the axis' ticks need to be displayed",$ref:"#/definitions/WebChartGaugeAxisTick",title:"ticks"},labelsIncrement:{description:"If a label has a value being a multiple of that property, it will be displayed. Otherwise it will be hidden.\n\nIf the property is `undefined` or 0, the chart will be displayed with 6 axis labels distributed evenly along\nthe axis min and max.\n\nIf the property has a value that results in more than a set limit of axis labels (25 as defined in `ChartDefaults.gauge.maximumNumberOfLabelIntervals`)\nthis property value will be ignored and the chart will be displayed with only axis min/max with 4 ticks in between.",default:"undefined",type:"number",title:"labelsIncrement"},onlyShowFirstAndLastLabels:{description:"Specifies if only the first and last labels need to be displayed. If set to `true` all the other labels\nwill be hidden.\nTheir visibility still depends on the axis labels visibility (WebChartAxis.labels.visible).",default:!1,type:"boolean",title:"onlyShowFirstAndLastLabels"},minimumValueConversion:{description:"Defines how to convert the axis minimum",$ref:"#/definitions/ValueConversion",title:"minimumValueConversion"},maximumValueConversion:{description:"Defines how to convert the axis maximum",$ref:"#/definitions/ValueConversion",title:"maximumValueConversion"},minimumFromField:{description:"Specifies the field name of which numeric value is to be mapped to the axis minimum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `minimum` value\nfrom the axis config, if provided, or the default value of 0, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"minimumFromField"},maximumFromField:{description:"Specifies the field name of which value is to be mapped to the axis maximum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `maximum` value\nfrom the axis config, if provided, or the default value of 100, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"maximumFromField"},type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:!0,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:!1,type:"boolean",title:"isLogarithmic"},title:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the title of the axis should be rendered",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:!1,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:!1,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:!1,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:!1,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:!1,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","title","type","valueFormat"]},IStatisticDefinitionExtended:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"],title:"IStatisticDefinitionExtended"},WebChartQuery:{description:"Chart query object inspired by [JSAPI Query](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html) class.",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"},{$ref:"#/definitions/IExtent"}],title:"geometry"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},start:{description:"The zero-based index indicating where to begin retrieving features.",type:"number",title:"start"},num:{description:"The number of features to retrieve.",type:"number",title:"num"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:!1,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:!1,type:"boolean",title:"fetchNullValues"}},title:"WebChartQuery"},WebChartSeriesQuery:{description:"Subset of the WebChartQuery, use the series level",title:"WebChartSeriesQuery",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:!1,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:!1,type:"boolean",title:"fetchNullValues"}}},WebChartDataFilters:{description:"JSON representation of filters applied to the data",title:"WebChartDataFilters",type:"object",properties:{gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"},{$ref:"#/definitions/IExtent"}],title:"geometry"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"}}},WebChartSeries:{description:"JSON representation of the chart's series object. All other series extends this interface.",type:"object",properties:{type:{type:"string",title:"type"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"],title:"WebChartSeries"},WebChartBarChartSeries:{description:"[Bar chart](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/bar-chart.htm) shows the categorical distribution of String/DateTime data.",title:"WebChartBarChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the BarChartSeries object. For BarSeries object, it is "barSeries".',type:"string",enum:["barSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},stackedType:{description:'Specifies how the bars/columns should be placed when multiple bar series are rendered in the same chart, say when "split by" operation is executed on any field or when multiple attributes/fields corresponding to the same set of classes are to be visualized.',enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},dataLabels:{$ref:"#/definitions/WebChartText",description:"Specifies how the data labels should be rendered.",title:"dataLabels"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:!1,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"}},required:["colorType","dataLabels","fillSymbol","id","name","type","x","y"]},HistogramOverlays:{description:"Object containing Histogram overlays",title:"HistogramOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramOverlays object. For HistogramOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},mean:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the mean overlay for histogram.",title:"mean"},median:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the median overlay for histogram.",title:"median"},standardDeviation:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the standard deviation overlay for histogram.",title:"standardDeviation"},comparisonDistribution:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the comparison distribution overlay for histogram.",title:"comparisonDistribution"}},required:["comparisonDistribution","mean","median","standardDeviation","type"]},WebChartHistogramSeries:{description:"[Histogram](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/histogram.htm) shows the numerical(frequency) distribution of a numerical field.",title:"WebChartHistogramSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramSeries object. For BarSeries object, it is "histogramSeries".',type:"string",enum:["histogramSeries"],title:"type"},binCount:{description:"Bin count must be a positive integer.",minimum:1,multipleOf:1,default:32,type:["null","number"],title:"binCount"},overlays:{$ref:"#/definitions/HistogramOverlays",description:"Specifies the chart overlays. Histogram supports 4 overlays: **mean**, **median**, **standardDeviation** and **comparisonDistribution**.",title:"overlays"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",description:"Specifies how the data should be transformed (e.g. square root, log, etc.) before binning.",title:"dataTransformationType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:!1,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","fillSymbol","id","name","overlays","type","x"]},ScatterPlotOverlays:{description:"Object containing Scatter Plot overlays",title:"ScatterPlotOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterPlotOverlays object. For ScatterPlotOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},trendLine:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the trendline overlay for scatter plot.",title:"trendLine"}},required:["trendLine","type"]},SizePolicy:{title:"SizePolicy",type:"object",properties:{type:{description:'Represents a unique string identifier for the sizePolicy object. For sizePolicy object, it is "sizeScale".',type:"string",enum:["sizeScale"],title:"type"},scaleType:{description:"The type of scale to apply to the markers (linear or logarithmic)",default:"SizePolicyScaleTypes.Linear",enum:["linear","logarithmic"],type:"string",title:"scaleType"},field:{description:"The field which determines the markers size",type:"string",title:"field"},minSize:{description:"The minimum marker size",default:5,multipleOf:1,type:"number",title:"minSize"},maxSize:{description:"The maximum marker size",default:30,multipleOf:1,type:"number",title:"maxSize"}},required:["field","type"]},WebChartScatterPlotSeries:{description:"[Scatter plot](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/scatter-plot.htm) shows the relationship between two numerical fields.",title:"WebChartScatterPlotSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterSeries object. For ScatterSeries object, it is "scatterSeries".',type:"string",enum:["scatterSeries"],title:"type"},y:{description:"Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",description:'Specifies how each data point in the scatter plot should be rendered. The type is `"esriSMS"` and it is adopted from the [REST API Types](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm#GUID-C8D40B32-5F4B-45EB-8048-6D5A8763E13B).',title:"markerSymbol"},overlays:{$ref:"#/definitions/ScatterPlotOverlays",description:"Specifies all the chart overlays. The scatter plot implements only 1 overlay, **trendLine**.",title:"overlays"},sizePolicy:{description:"Specifies rules to use the scatter plot as bubble plot, by changing dynamically the markers size according to a specific field value",$ref:"#/definitions/SizePolicy",title:"sizePolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","markerSymbol","name","overlays","type","x","y"]},WebChartPieChartTick:{description:"JSON representation of the pie ticks.",title:"WebChartPieChartTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartPieChartTick object. For PieTick object, it is "pieTick".',type:"string",enum:["pieTick"],title:"type"},visible:{description:"Determines the visibility of the tick.\nAssigning the `true` value will only be considered when the data labels are visible (`series.dataLabels.visible`) and\nwhen the data label associated to the tick is outside of the chart (`series.dataLabelsOffset` > 0).",type:"boolean",title:"visible"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the pie chart ticks should be rendered",title:"lineSymbol"}},required:["lineSymbol","type"]},WebChartPieChartSlice:{description:"JSON representation of the pie slices",title:"WebChartPieChartSlice",type:"object",properties:{sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["sliceId"]},WebChartPieChartGroupSlice:{description:"JSON representation of the pie grouped slice",title:"WebChartPieChartGroupSlice",type:"object",properties:{percentageThreshold:{description:"Slices that have a percent value equal or lesser to this threshold are grouped into a unique slice",type:"number",title:"percentageThreshold"},dataLabels:{description:"Specifies how the grouped slice data labels should be rendered.\nIf the property is not set the `series.dataLabels` will be used instead.",$ref:"#/definitions/WebChartText",title:"dataLabels"},sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["percentageThreshold","sliceId"]},WebChartPieChartSeries:{description:"JSON representation of the Pie Chart series",title:"WebChartPieChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the PieSeries object. For PieSeries object, it is "pieSeries".',type:"string",enum:["pieSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",minimum:0,maximum:100,default:50,type:["null","number"],title:"innerRadius"},startAngle:{default:-90,type:["null","number"],title:"startAngle"},endAngle:{default:270,type:["null","number"],title:"endAngle"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the slices should be rendered",title:"fillSymbol"},displayNumericValueOnDataLabel:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`.\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:!0,type:"boolean",title:"displayNumericValueOnDataLabel"},displayPercentageOnDataLabel:{description:"Indicates whether the percentage associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:!1,type:"boolean",title:"displayPercentageOnDataLabel"},displayNumericValueOnTooltip:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:!0,type:"boolean",title:"displayNumericValueOnTooltip"},displayPercentageOnTooltip:{description:"Indicates whether the percentage associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:!0,type:"boolean",title:"displayPercentageOnTooltip"},numericValueFormat:{description:"Specifies how the numerical values should be formatted (applied to label, tooltip and legend).\nCan be overridden for the tooltips by series.dataTooltipValueFormat.",$ref:"#/definitions/NumberFormatOptions",title:"numericValueFormat"},percentValueFormat:{description:"Specifies how the percent values should be formatted (applied to label, tooltip and legend)\nCan be overridden for the tooltips by series.dataTooltipPercentFormat.",$ref:"#/definitions/NumberFormatOptions",title:"percentValueFormat"},valuePrefix:{description:"Adds a prefix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valuePrefix"},valueSuffix:{description:"Adds a suffix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valueSuffix"},percentagePrefix:{description:"Adds a prefix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentagePrefix"},percentageSuffix:{description:"Adds a suffix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentageSuffix"},dataLabelsCharacterLimit:{description:'If set, the category on the data label is truncated to display only `characterLimit` characters, and an ellipsis ("...")\nis added to the end of the label.\nThis does not affect the value and percentage part of the labels.\nDoes not apply to tooltips and legend labels.',default:"undefined",minimum:1,multipleOf:1,type:["null","number"],title:"dataLabelsCharacterLimit"},ticks:{description:"Specifies how to render the ticks shown on each slide.\nTicks will be displayed with default values if not provided.",$ref:"#/definitions/WebChartPieChartTick",title:"ticks"},dataLabelsOffset:{description:"Determines in pixel how far the data labels should be placed from their slice.\nIf a negative value is provided the label will be placed inside of the chart.",default:10,type:"number",title:"dataLabelsOffset"},alignDataLabels:{description:"Aligns labels into columns to make them more readable and avoid them to overlap each other.",default:!1,type:"boolean",title:"alignDataLabels"},optimizeDataLabelsOverlapping:{description:"Optimizes the data labels rendering to avoid them to be cut off on the edges or to overlap the legend by wrapping them and adding padding to the chart.",default:!1,type:"boolean",title:"optimizeDataLabelsOverlapping"},sliceGrouping:{description:"Specifies if and how the slices under a given percentage threshold are grouped into a unique slice",$ref:"#/definitions/WebChartPieChartGroupSlice",title:"sliceGrouping"},slices:{description:"An array of WebChartPieChartSlice representing the ids, labels and styles of the pie slices.\n\nWhen this property is not defined, or when a pie slice does not have a matching slice in this array,\nthe series' fillSymbol will be used. If the series' fillSymbol does not contain color information, colors from the\ncolor ramps will be utilized.",type:"array",items:{$ref:"#/definitions/WebChartPieChartSlice"},title:"slices"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the pie slices.\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object, and\nfor order based on category or field value (not for order by y value).",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","type","x","y"]},WebChartGaugeSeries:{description:"JSON representation of the `Gauge` series",title:"WebChartGaugeSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeSeries object. For GaugeSeries object, it is "gaugeSeries".',type:"string",enum:["gaugeSeries"],title:"type"},valueConversion:{description:"Defines the conversion to apply to the gauge value",$ref:"#/definitions/ValueConversion",title:"valueConversion"},featureIndex:{description:"Specifies the index of the feature to be rendered.\nThis property will be ignored for a statistic gauge (indicated via `WebGaugeChart.subType` property).\nFor feature-based gauge, if this property is not present, the first feature will be used (featureIndex = 0)",type:"number",title:"featureIndex"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"]},WebChartLineChartSeries:{description:"JSON representation of the Line Chart series",title:"WebChartLineChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the LineSeries object. For LineSeries object, it is "lineSeries".',type:"string",enum:["lineSeries"],title:"type"},y:{type:"string",title:"y"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the line/line segments should be rendered",title:"lineSymbol"},lineSmoothed:{description:"Specifies whether line segments should be smoothed.",default:!1,type:"boolean",title:"lineSmoothed"},showArea:{description:"Indicates whether line series show area.",default:!1,type:"boolean",title:"showArea"},markerVisible:{description:"Indicates whether to show or hide the markers/bullets of the line series.",default:!0,type:"boolean",title:"markerVisible"},markerSymbol:{description:"Contains styling info on how the marker should be rendered",$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},areaColor:{description:"Specifies the color of the filled area for line chart.\nareaColor will be applied only if showArea is true, and is defaulted to the line color if not provided.",type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"areaColor"},rotated:{description:"Specifies whether the series should be rotated.",default:!1,type:"boolean",title:"rotated"},stackedType:{description:'Specifies how the lines should be placed when multiple line series are rendered in the same chart, say when "split by" operation is executed on any field or\nwhen multiple attributes/fields corresponding to the same set of classes are to be visualized.',default:"sideBySide",enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},stackNegativeValuesToBaseline:{description:"Specifies how negative values are treated in stacked series.\nIf true, negative values will be stacked on the base line.\nIf false, negative values will be stacked in relation to their previous values in the stack.",default:!0,type:"boolean",title:"stackNegativeValuesToBaseline"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.",enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"The span of time that will be binned or aggregated together. This property must be used in conjunction with `timeIntervalUnits`.",minimum:0,type:"number",title:"timeIntervalSize"},timeAggregationType:{description:"The time interval alignment type. Valid options include `equalIntervalsFromStartTime` and `equalIntervalsFromEndTime`.",default:"equalIntervalsFromStartTime",enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"timeAggregationType"},trimIncompleteTimeInterval:{description:"Determines whether incomplete time intervals at the start or end of the data span (depending on the `timeAggregationType`) will be removed from the chart.\nIncomplete intervals on a chart can cause misleading results in which the period in question is under- or overreported due to a different amount of time in the interval.\nSetting `true` indicates to trim these incomplete intervals. Setting `false` does not trim incomplete intervals.",default:!0,type:"boolean",title:"trimIncompleteTimeInterval"},nullPolicy:{description:"How summarized bins returning a null value are displayed. Supported options are `null`, `zero`, and `interpolate`.",default:"null",enum:["interpolate","null","zero"],type:"string",title:"nullPolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","lineSymbol","name","type","x","y"]},WebChartBoxPlotSeries:{description:"JSON representation of the Box plot series",title:"WebChartBoxPlotSeries",type:"object",properties:{type:{type:"string",enum:["boxPlotSeries"],title:"type"},y:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}],title:"y"},showOutliers:{type:"boolean",title:"showOutliers"},showInnerPoints:{type:"boolean",title:"showInnerPoints"},showMean:{type:"boolean",title:"showMean"},standardizeValues:{type:"boolean",title:"standardizeValues"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","showInnerPoints","showMean","showOutliers","standardizeValues","type","x","y"]},WebChartProbabilityPlotSeries:{description:"JSON representation of the Probability plot series",title:"WebChartProbabilityPlotSeries",type:"object",properties:{type:{type:"string",enum:["probabilityPlotSeries"],title:"type"},y:{type:"string",title:"y"},probabilityPlotType:{$ref:"#/definitions/WebChartProbabilityPlotKinds",title:"probabilityPlotType"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",title:"dataTransformationType"},showReferenceLine:{type:"boolean",title:"showReferenceLine"},standardizeValues:{type:"boolean",title:"standardizeValues"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},referenceLineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"referenceLineSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","id","markerSymbol","name","probabilityPlotType","referenceLineSymbol","showReferenceLine","standardizeValues","type","x","y"]},WebChartProfileGraphSeries:{description:"JSON representation of the Profile graph series",title:"WebChartProfileGraphSeries",type:"object",properties:{type:{type:"string",enum:["profileGraphSeries"],title:"type"},y:{type:"string",title:"y"},horizontalUnits:{type:"string",title:"horizontalUnits"},verticalUnits:{type:"string",title:"verticalUnits"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"lineSymbol"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:!0,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:!0,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:!1,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","horizontalUnits","id","lineSymbol","markerSymbol","name","type","verticalUnits","x","y"]},WebChartSeriesType:{description:"Type containing all the series types available",title:"WebChartSeriesType",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},WebMapWebChart:{description:"Gives a JSON representation of the Chart object without the dataSource Object. Used in the Webmap Viewer workflows.",type:"object",properties:{version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["6.2.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:!1,type:"boolean",title:"rotated"}},required:["series","type","version"],title:"WebMapWebChart"},WebMapWebGaugeChart:{description:"JSON representation of Gauge",type:"object",properties:{innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["6.2.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:!1,type:"boolean",title:"rotated"}},required:["axes","series","type","version"],title:"WebMapWebGaugeChart"},WebChart:{description:"Gives a JSON representation of the Chart object. Used by ArcGIS Charts packages.",type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["6.2.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:!1,type:"boolean",title:"rotated"}},required:["dataSource","series","type","version"],title:"WebChart"},WebGaugeChart:{type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["6.2.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:!1,type:"boolean",title:"rotated"}},required:["axes","dataSource","series","type","version"],title:"WebGaugeChart"},OverlayTerms:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"OverlayTerms"},CalculatedMinMaxBoundsPayload:{type:"object",properties:{isXAxis:{type:"boolean",title:"isXAxis"},minimum:{type:["null","number"],title:"minimum"},maximum:{type:["null","number"],title:"maximum"}},required:["isXAxis"],title:"CalculatedMinMaxBoundsPayload"},ChartDeletePayload:{type:"object",properties:{chartId:{type:"string",title:"chartId"}},required:["chartId"],title:"ChartDeletePayload"},LegendItemVisibility:{type:"object",properties:{visible:{type:"boolean",title:"visible"},seriesId:{type:"string",title:"seriesId"},overlayType:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"overlayType"},sliceId:{type:"string",title:"sliceId"},sliceData:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"sliceData"}},required:["visible"],title:"LegendItemVisibility"},IExtent:{description:'Extents are used to define rectangles and bounding boxes.\n\n`IExtent` can also be imported from the following packages:\n\n```js\nimport { IExtent } from "@esri/arcgis-rest-geocoding";\nimport { IExtent } from "@esri/arcgis-rest-service-admin";\nimport { IExtent } from "@esri/arcgis-rest-feature-layer";\n```',title:"IExtent",type:"object",properties:{xmin:{type:"number",title:"xmin"},ymin:{type:"number",title:"ymin"},zmin:{type:"number",title:"zmin"},xmax:{type:"number",title:"xmax"},ymax:{type:"number",title:"ymax"},zmax:{type:"number",title:"zmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISpatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',title:"ISpatialReference",type:"object",properties:{wkid:{type:"number",title:"wkid"},latestWkid:{type:"number",title:"latestWkid"},vcsWkid:{type:"number",title:"vcsWkid"},latestVcsWkid:{type:"number",title:"latestVcsWkid"},wkt:{type:"string",title:"wkt"},latestWkt:{type:"string",title:"latestWkt"}}},IFeatureLayer:{description:"Feature layers can be created by referencing a layer from either a map service or a feature service or by specifying a feature collection object.\nUse a map service if you just want to retrieve geometries and attributes from the server and symbolize them yourself. Use a feature service if\nyou want to take advantage of symbols from the service's source map document. Also, use a feature service if you plan on doing editing with the\nfeature layer. Feature layers honor any feature templates configured in the source map document. Feature collection objects are used to create\na feature layer based on the supplied definition.",title:"IFeatureLayer",type:"object",properties:{capabilities:{description:"A comma-separated string listing which editing operations are allowed on an editable feature service.",type:"string",title:"capabilities"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},disablePopup:{description:"Indicates whether to allow a client to ignore popups defined by the service item.",enum:[!0],type:"boolean",title:"disablePopup"},featureCollection:{description:"A featureCollection object defining a layer of features whose geometry and attributes are either stored directly within the web map or with an item. Feature Collections can be created from CSVs, shapefiles, GPX, or map notes.",title:"featureCollection"},featureCollectionType:{description:"Indicates the type of features in the feature collection. If featureCollectionType is missing, it means the feature collection is a regular single-layer or multi-layer feature collection.",enum:["markup","notes","route"],type:"string",title:"featureCollectionType"},layerDefinition:{description:"A layerDefinition object defining the attribute schema and drawing information for the layer.",$ref:"#/definitions/ILayerDefinition",title:"layerDefinition"},layerType:{description:"String indicating the layer type.",type:"string",enum:["ArcGISFeatureLayer"],title:"layerType"},mode:{description:"0 is snapshot mode. 1 is on-demand mode. 2 is selection-only mode. Used with ArcGIS feature services and individual layers in ArcGIS map services.",enum:[0,1,2],type:"number",title:"mode"},popupInfo:{description:"A popupInfo object defining the content of popup windows when you click or query a feature.",$ref:"#/definitions/IPopupInfo",title:"popupInfo"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled.",type:"number",title:"refreshInterval"},showLabels:{description:"Labels will display if this property is set to true and the layer also has a labelingInfo property associated with it. This property can get stored in the web map config and in the item/data.",enum:[!0],type:"boolean",title:"showLabels"},visibleLayers:{description:"An array of sublayer ids that should appear visible. Used with feature layers that are based on feature collections.",type:"array",items:{type:"number"},title:"visibleLayers"},id:{description:"A unique identifying string for the layer.",title:"id"},name:{description:"Layer name",type:"string",title:"name"},itemId:{description:"Optional string containing the item ID of the service if it's registered on ArcGIS Online or your organization's portal.",type:"string",title:"itemId"},maxScale:{description:"Integer property used to determine the maximum scale at which the layer is displayed.",type:"number",title:"maxScale"},minScale:{description:"Integer property used to determine the minimum scale at which the layer is displayed.",type:"number",title:"minScale"},opacity:{description:"The degree of transparency applied to the layer on the client side, where 0 is full transparency and 1 is no transparency.",type:"number",title:"opacity"},showLegend:{description:"Boolean property indicating whether to display in the legend.",type:"boolean",title:"showLegend"},title:{description:"A user-friendly string title for the layer that can be used in a table of contents.",type:"string",title:"title"},type:{description:"Deprecated, use layerType instead.",type:"string",title:"type"},visibility:{description:"Boolean property determining whether the layer is initially visible in the web map.",type:"boolean",title:"visibility"},url:{description:"The URL to the layer. Not applicable to all layer types.",type:"string",title:"url"},timeAnimation:{description:"This property is applicable to layers that support time. If 'true', timeAnimation is enabled.",type:"boolean",title:"timeAnimation"}},required:["id","layerType"]},IDefinitionEditor:{description:"The definitionEditor stores interactive filters at the same level as layerDefinition.",title:"IDefinitionEditor",type:"object",properties:{inputs:{description:"An array of input objects.",type:"array",items:{$ref:"#/definitions/IDefinitionInput"},title:"inputs"},parameterizedExpression:{description:"A string value representing the where clause for the interactive filter.",type:"string",title:"parameterizedExpression"}}},IDefinitionInput:{title:"IDefinitionInput",type:"object",properties:{hint:{description:"A string value representing a hint for the input.",type:"string",title:"hint"},parameters:{description:"An array of parameter objects.",type:"array",items:{$ref:"#/definitions/IDefinitionParameter"},title:"parameters"},prompt:{description:"A string value representing the prompt for the input.",type:"string",title:"prompt"}}},IDefinitionParameter:{title:"IDefinitionParameter",type:"object",properties:{defaultValue:{description:"The default value that is automatically given if nothing is provided.",type:["string","number"],title:"defaultValue"},fieldName:{description:"A string value representing the name of the field to query.",type:"string",title:"fieldName"},parameterId:{description:"Number given to uniquely identify the specified parameter.",title:"parameterId"},type:{description:"The field type for the specified field parameter.",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"type"},utcValue:{description:"An integer value representing exact UNIX time used when defaultValue is a date string.",type:"number",title:"utcValue"}}},ILayerDefinition:{description:'`ILayerDefinition` can also be imported from the following packages:\n\n```js\nimport { ILayerDefinition } from "@esri/arcgis-rest-service-admin";\nimport { ILayerDefinition } from "@esri/arcgis-rest-feature-layer";\n```',title:"ILayerDefinition",type:"object",properties:{allowGeometryUpdates:{description:"Boolean value indicating whether the geometry of the features in the layer can be edited.",type:"boolean",title:"allowGeometryUpdates"},capabilities:{description:"A comma separated list of supported capabilities, e.g. Query,Editing.",type:"string",title:"capabilities"},copyrightText:{description:"String value for the copyright text information for the layer.",type:"string",title:"copyrightText"},currentVersion:{description:"Numeric value indicating the server version of the layer.",type:"number",title:"currentVersion"},defaultVisibility:{description:"Boolean value indicating whether the layer's visibility is turned on.",type:"boolean",title:"defaultVisibility"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},definitionExpression:{description:"SQL-based definition expression string that narrows the data to be displayed in the layer.",type:"string",title:"definitionExpression"},description:{description:"String value of the layer as defined in the map service.",type:"string",title:"description"},displayField:{description:"A string value that summarizes the feature.",type:"string",title:"displayField"},drawingInfo:{description:"Contains drawing, labeling, and transparency information.",title:"drawingInfo"},extent:{description:"An object defining the rectangular area.",anyOf:[{$ref:"#/definitions/IExtent"},{type:"null"}],title:"extent"},editingInfo:{description:"An object defining the editing info (last edit date).",$ref:"#/definitions/IEditingInfo",title:"editingInfo"},featureReduction:{description:"Feature reductions declutter the screen by hiding features that would otherwise intersect with other features on screen.",title:"featureReduction"},fields:{description:"An array of field objects containing information about the attribute fields for the feature collection or layer.",type:"array",items:{$ref:"#/definitions/IField"},title:"fields"},geometryType:{description:"A string defining the type of geometry. Possible geometry types are: esriGeometryPoint, esriGeometryMultipoint, esriGeometryPolyline, esriGeometryPolygon, and esriGeometryEnvelope.",enum:["esriGeometryEnvelope","esriGeometryMultipoint","esriGeometryPoint","esriGeometryPolygon","esriGeometryPolyline"],type:"string",title:"geometryType"},globalIdField:{description:"The unique identifier for a feature or table row within a geodatabase.",type:"string",title:"globalIdField"},hasAttachments:{description:"Indicates whether attachments should be loaded for the layer.",type:"boolean",title:"hasAttachments"},hasStaticData:{description:"Boolean value indicating whether data changes. True if it does not.",type:"boolean",title:"hasStaticData"},htmlPopupType:{description:"String value indicating the HTML popup type.",enum:["esriServerHTMLPopupTypeAsHTMLText","esriServerHTMLPopupTypeAsURL","esriServerHTMLPopupTypeNone"],type:"string",title:"htmlPopupType"},id:{description:"The identifier assigned to the layer.",type:"number",title:"id"},isDataVersioned:{description:"Boolean value indicating whether the data is versioned.",type:"boolean",title:"isDataVersioned"},maxRecordCount:{description:"Numeric value indicating tbe maximum number of records that will be returned at once for a query.",type:"number",title:"maxRecordCount"},maxScale:{description:"Represents the maximum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"maxScale"},minScale:{description:"Represents the minimum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"minScale"},name:{description:"Contains a unique name for the layer that can be displayed in a legend.",type:"string",title:"name"},objectIdField:{description:"Indicates the name of the object ID field in the dataset.",type:"string",title:"objectIdField"},overrideSymbols:{description:"Dictates whether a client can support having an end user modify symbols on individual features.",type:"boolean",title:"overrideSymbols"},rangeInfos:{description:"Indicates range information",title:"rangeInfos"},source:{description:"An object indicating the layerDefinition's layer source.",title:"source"},spatialReference:{description:"An object containing the WKID or WKT identifying the spatial reference of the layer's geometry.",$ref:"#/definitions/ISpatialReference",title:"spatialReference"},supportedQueryFormats:{description:"String value indicating the output formats that are supported in a query.",type:"string",title:"supportedQueryFormats"},supportsAdvancedQueries:{description:"Boolean value indicating whether the layer supports orderByFields in a query operation.",type:"boolean",title:"supportsAdvancedQueries"},supportsAttachmentsByUploadId:{description:"Boolean value indicating whether the layer supports uploading attachments with the Uploads operation. This can then be used in the Add Attachment and Update Attachment operations.",type:"boolean",title:"supportsAttachmentsByUploadId"},supportsCalculate:{description:"Boolean value indicating whether the layer supports the Calculate REST operation when updating features.",type:"boolean",title:"supportsCalculate"},supportsRollbackOnFailureParameter:{description:"Boolean value indicating whether the layer supports rolling back edits made on a feature layer if some of the edits fail.",type:"boolean",title:"supportsRollbackOnFailureParameter"},supportsStatistics:{description:"Boolean value indicating whether feature layer query operations support statistical functions.",type:"boolean",title:"supportsStatistics"},supportsValidateSql:{description:"Boolean value indicating whether the validateSQL operation is supported across a feature service layer.",type:"boolean",title:"supportsValidateSql"},templates:{description:"A property of the layer definition when there are no types defined; otherwise, templates are defined as properties of the types.",type:"array",items:{$ref:"#/definitions/ITemplate"},title:"templates"},timeInfo:{description:"The time info metadata of the layer. May be set for feature layers inside a feature collection item.",title:"timeInfo"},type:{description:"Indicates whether the layerDefinition applies to a Feature Layer or a Table.",enum:["Feature Layer","Table"],type:"string",title:"type"},typeIdField:{description:"Contains the name of the field holding the type ID for the features.",type:"string",title:"typeIdField"},types:{description:"Contains information about an attribute field.",title:"types"},visibilityField:{description:"String value indicating the attribute field that is used to control the visibility of a feature.\nIf applicable, when rendering a feature the client should use this field to control visibility.\nThe field's values are 0 = do not display, 1 = display.",type:"string",title:"visibilityField"},relationships:{type:"array",items:{},title:"relationships"},editFieldsInfo:{type:"object",properties:{creationDateField:{type:"string",title:"creationDateField"},creatorField:{type:"string",title:"creatorField"},editDateField:{type:"string",title:"editDateField"},editorField:{type:"string",title:"editorField"}},title:"editFieldsInfo"},parentLayerId:{type:"number",title:"parentLayerId"},ownershipBasedAccessControlForFeatures:{type:"boolean",title:"ownershipBasedAccessControlForFeatures"},syncCanReturnChanges:{type:"boolean",title:"syncCanReturnChanges"},archivingInfo:{type:"object",properties:{supportsQueryWithHistoricMoment:{type:"boolean",title:"supportsQueryWithHistoricMoment"},startArchivingMoment:{type:"number",title:"startArchivingMoment"}},title:"archivingInfo"},supportsValidateSQL:{type:"boolean",title:"supportsValidateSQL"},advancedQueryCapabilities:{type:"object",properties:{supportsPagination:{type:"boolean",title:"supportsPagination"},supportsTrueCurve:{type:"boolean",title:"supportsTrueCurve"},supportsQueryWithDistance:{type:"boolean",title:"supportsQueryWithDistance"},supportsReturningQueryExtent:{type:"boolean",title:"supportsReturningQueryExtent"},supportsStatistics:{type:"boolean",title:"supportsStatistics"},supportsOrderBy:{type:"boolean",title:"supportsOrderBy"},supportsDistinct:{type:"boolean",title:"supportsDistinct"},supportsSqlExpression:{type:"boolean",title:"supportsSqlExpression"},supportsPercentileStatistics:{type:"boolean",title:"supportsPercentileStatistics"}},title:"advancedQueryCapabilities"},allowTrueCurvesUpdates:{type:"boolean",title:"allowTrueCurvesUpdates"},onlyAllowTrueCurveUpdatesByTrueCurveClients:{type:"boolean",title:"onlyAllowTrueCurveUpdatesByTrueCurveClients"},supportsApplyEditsWithGlobalIds:{type:"boolean",title:"supportsApplyEditsWithGlobalIds"},subtypeField:{type:"string",title:"subtypeField"},indexes:{type:"array",items:{},title:"indexes"},dateFieldsTimeReference:{type:"object",properties:{timeZone:{type:"string",title:"timeZone"},respectsDaylightSaving:{type:"boolean",title:"respectsDaylightSaving"}},title:"dateFieldsTimeReference"},useStandardizedQueries:{type:"boolean",title:"useStandardizedQueries"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"}}},IEditingInfo:{title:"IEditingInfo",type:"object",properties:{lastEditDate:{description:"date of last edit to the layer",type:"number",title:"lastEditDate"}}},IField:{description:'Contains information about an attribute field.\n\n`IField` can also be imported from the following packages:\n\n```js\nimport { IField } from "@esri/arcgis-rest-feature-layer";\n```',title:"IField",type:"object",properties:{name:{description:"A string defining the field name.",type:"string",title:"name"},type:{$ref:"#/definitions/FieldType",description:"A string defining the field type.",title:"type"},alias:{description:"A string defining the field alias.",type:"string",title:"alias"},domain:{description:"Information for a field with a domain",type:"object",properties:{type:{$ref:"#/definitions/DomainType",description:"A string defining the domain type.",title:"type"},name:{description:"A string defining the field name.",type:"string",title:"name"},range:{description:"A 2 element array defining the range of possible values.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"range"},codedValues:{description:"An array of CodedValues for domains of type codedValue.",type:"array",items:{description:"CodedValue type",type:"object",properties:{name:{description:"User-friendly name for what the code means.",type:"string",title:"name"},code:{description:"The value stored in the feature attribute.",type:["string","number"],title:"code"}},required:["code","name"]},title:"codedValues"},description:{description:"Description of the domain",type:"string",title:"description"},mergePolicy:{description:"Merge policy",type:"string",title:"mergePolicy"},splitPolicy:{description:"Split Policy",type:"string",title:"splitPolicy"}},required:["type"],title:"domain"},editable:{description:"A Boolean defining whether this field is editable.",type:"boolean",title:"editable"},exactMatch:{description:"A Boolean defining whether or not the field is an exact match.",type:"boolean",title:"exactMatch"},length:{description:"A number defining how many characters are allowed in a string. field.",type:"number",title:"length"},nullable:{description:"A Boolean defining whether this field can have a null value.",type:"boolean",title:"nullable"},defaultValue:{description:"The value written in for new records by default.",title:"defaultValue"}},required:["name","type"]},FieldType:{description:"Field type.",title:"FieldType",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string"},DomainType:{description:"Domain types",title:"DomainType",enum:["codedValue","inherited","range"],type:"string"},ITemplate:{description:"Templates describe features that can be created in a layer. They are generally used with feature collections and editable web-based CSV layers.\nTemplates are not used with ArcGIS feature services as these already have templates defined in the service. They are also defined as properties\nof the layer definition when there are no defined types. Otherwise, templates are defined as properties of the types.",title:"ITemplate",type:"object",properties:{description:{description:"A string value containing a detailed description of the template.",title:"description"},drawingTool:{description:"An optional string that can define a client-side drawing tool to be used with this feature. For example, map notes used by the Online Map Viewer use this to represent the viewer's different drawing tools.",enum:["esriFeatureEditToolAutoCompletePolygon","esriFeatureEditToolCircle","esriFeatureEditToolDownArrow","esriFeatureEditToolEllipse","esriFeatureEditToolFreehand","esriFeatureEditToolLeftArrow","esriFeatureEditToolLine","esriFeatureEditToolNone","esriFeatureEditToolPoint","esriFeatureEditToolPolygon","esriFeatureEditToolRectangle","esriFeatureEditToolRightArrow","esriFeatureEditToolText","esriFeatureEditToolTriangle","esriFeatureEditToolUpArrow"],type:"string",title:"drawingTool"},name:{description:"A string containing a user-friendly name for the template.",type:"string",title:"name"},prototype:{description:"A feature object representing a prototypical feature for the template.",$ref:"#/definitions/IFeature",title:"prototype"}}},IFeature:{description:'a spatial entity and its corresponding properties\n\n`IFeature` can also be imported from the following packages:\n\n```js\nimport { IFeature } from "@esri/arcgis-rest-feature-layer";\nimport { IFeature } from "@esri/arcgis-rest-routing";\n```',title:"IFeature",type:"object",properties:{geometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/IGeometry",title:"geometry"},attributes:{type:"object",additionalProperties:{},title:"attributes"},symbol:{$ref:"#/definitions/ISymbol",title:"symbol"}},required:["attributes"]},IGeometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',title:"IGeometry",type:"object",properties:{spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}}},ISymbol:{title:"ISymbol",type:"object",properties:{type:{$ref:"#/definitions/SymbolType",title:"type"},style:{type:"string",title:"style"}},required:["type"]},SymbolType:{title:"SymbolType",enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string"},IPopupInfo:{description:"Defines the look and feel of popup windows when a user clicks or queries a feature.",title:"IPopupInfo",type:"object",properties:{description:{description:"A string that appears in the body of the popup window as a description. It is also possible to specify the description as HTML-formatted content.",type:["null","string"],title:"description"},expressionInfos:{description:"List of Arcade expressions added to the pop-up.",type:"array",items:{$ref:"#/definitions/IPopupExpressionInfo"},title:"expressionInfos"},fieldInfos:{description:"Array of fieldInfo information properties. This information is provided by the service layer definition. When the description uses name/value pairs, the order of the array is how the fields display in the editable Map Viewer popup and the resulting popup. It is also possible to specify HTML-formatted content.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},layerOptions:{description:"Additional options that can be defined for the popup layer.",type:"object",properties:{showNoDataRecords:{description:"Indicates whether or not the NoData records should be displayed.",type:"boolean",title:"showNoDataRecords"}},required:["showNoDataRecords"],title:"layerOptions"},mediaInfos:{description:"Array of various mediaInfo to display. Can be of type image, piechart, barchart, columnchart, or linechart. The order given is the order in which is displays.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},popupElements:{description:"An array of popupElement objects that represent an ordered list of popup elements.",type:"array",items:{$ref:"#/definitions/IPopupElement"},title:"popupElements"},relatedRecordsInfo:{description:"Indicates whether to enable related records if they exist on a layer.",$ref:"#/definitions/IRelatedRecordsInfo",title:"relatedRecordsInfo"},showAttachments:{description:"Indicates whether attachments will be loaded for feature layers that have attachments.",type:"boolean",title:"showAttachments"},title:{description:"A string that appears at the top of the popup window as a title.",type:"string",title:"title"}}},IPopupExpressionInfo:{description:"Arcade expression added to the pop-up.",title:"IPopupExpressionInfo",type:"object",properties:{expression:{description:"The Arcade expression.",type:"string",title:"expression"},name:{description:"Unique identifier for the expression.",type:"string",title:"name"},returnType:{description:"Return type of the Arcade expression, can be number or string. Defaults to string value. Number values are assumed to be double. This can be determined by the authoring client by executing the expression using a sample feature(s), although it can be corrected by the user. Knowing the returnType allows the authoring client to present fields in relevant contexts. For example, numeric fields in numeric contexts such as charts.",enum:["number","string"],type:"string",title:"returnType"},title:{description:"Title of the expression.",type:"string",title:"title"}}},IFieldInfo:{description:"Defines how a field in the dataset participates (or does not participate) in a popup window.",title:"IFieldInfo",type:"object",properties:{fieldName:{description:"A string containing the field name as defined by the service. Anywhere that a fieldname is referenced as {field-name} in popupInfo, an Arcade expression can also be referenced as{expression/}`.",title:"fieldName"},format:{description:"A format object used with numerical or date fields to provide more detail about how the value should be displayed in a web map popup window.",$ref:"#/definitions/IFieldFormat",title:"format"},isEditable:{description:"A Boolean determining whether users can edit this field. Not applicable to Arcade expressions.",type:"boolean",title:"isEditable"},label:{description:"A string containing the field alias. This can be overridden by the web map author. Not applicable to Arcade expressions as title is used instead.",type:"string",title:"label"},stringFieldOption:{description:"A string determining what type of input box editors see when editing the field. Applies only to string fields. Not applicable to Arcade expressions.",enum:["richtext","textarea","textbox"],type:"string",title:"stringFieldOption"},tooltip:{description:"A string providing an editing hint for editors of the field. Not applicable to Arcade expressions.",type:"string",title:"tooltip"},visible:{description:"A Boolean determining whether the field is visible in the popup window.",type:"boolean",title:"visible"}}},IFieldFormat:{description:"The format object can be used with numerical or date fields to provide more detail about how values should be displayed in popup windows.",title:"IFieldFormat",type:"object",properties:{dateFormat:{description:"A string used with date fields to specify how the date should appear in popup windows.",enum:["dayShortMonthYear","longDate","longMonthDayYear","longMonthYear","shortDate","shortDateLE","shortDateLELongTime","shortDateLELongTime24","shortDateLEShortTime","shortDateLEShortTime24","shortDateLongTime","shortDateLongTime24","shortDateShortTime","shortDateShortTime24","shortMonthYear","year"],type:"string",title:"dateFormat"},digitSeparator:{description:"A Boolean used with numerical fields. A value of true allows the number to have a digit (or thousands) separator when the value appears in popup windows.\nDepending on the locale, this separator is a decimal point or a comma. A value of false means that no separator will be used.",type:"boolean",title:"digitSeparator"},places:{description:"An integer used with numerical fields to specify the number of supported decimal places that should appear in popup windows. Any places beyond this value are rounded.",type:"number",title:"places"}}},IMediaInfo:{description:"Defines an image or a chart to be displayed in a popup window.",title:"IMediaInfo",type:"object",properties:{caption:{description:"A string caption describing the media.",title:"caption"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled. If the property does not exist, it's equivalent to having a value of 0. Only applicable when type is set to image.",title:"refreshInterval"},title:{description:"A string title for the media.",type:["null","string"],title:"title"},type:{description:"A string defining the type of media.",enum:["barchart","columnchart","image","linechart","piechart"],type:"string",title:"type"},value:{description:"A value object containing information about how the image should be retrieved or how the chart should be constructed.",anyOf:[{$ref:"#/definitions/IMediaInfoValue"},{type:"null"}],title:"value"}}},IMediaInfoValue:{description:"The value object contains information for popup windows about how images should be retrieved or charts constructed.",title:"IMediaInfoValue",type:"object",properties:{fields:{description:"Used with charts. An array of strings, with each string containing the name of a field to display in the chart.",type:"array",items:{type:"string"},title:"fields"},linkURL:{description:"Used with images. A string containing a URL to be launched in a browser when a user clicks the image.",type:"string",title:"linkURL"},normalizeField:{description:"Used with charts. An optional string containing the name of a field. The values of all fields in the chart will be normalized (divided) by the value of this field.",type:"string",title:"normalizeField"},sourceURL:{description:"Used with images. A string containing the URL to the image.",type:"string",title:"sourceURL"},tooltipField:{description:"String value indicating the tooltip for a chart specified from another field. This field is needed when related records are not sued. It is used for showing tooltips from another field in the same layer or related layer/table.",type:"string",title:"tooltipField"}}},IPopupElement:{description:"Popup elements allow users to author popups, using multiple elements such as tabular views, string description, media (charts and images), and attachments of the attributes\nand control the order in which they appear. Specifically, popupElements do the following:\n1) provide the ability to explicitly add a field/ value table in addition to a description,\n2) allow adding multiple description elements, and\n3) allow a user to author and consume elements of a popup in the order of their choosing.",title:"IPopupElement",type:"object",properties:{displayType:{description:"This property applies to elements of type attachments. A string value indicating how to display the attachment.\nPossible values are, preview, and list. If list is specified, attachments show as links.",enum:["list","preview"],type:"string",title:"displayType"},fieldInfos:{description:"This property applies to elements of type fields. It is an array of popupInfo.fieldInfo objects representing a field/value pair displayed as a table within the popupElement.\nIf the fieldInfos property is not provided, the popupElement will display whatever is specified directly in the popupInfo.fieldInfos property.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},mediaInfos:{description:"This property applies to elements of type media. An array of popupInfo.mediaInfo objects representing an image or chart for display.\nIf no mediaInfos property is provided, the popupElement will display whatever is specified in the popupInfo.mediaInfo property.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},text:{description:"This property applies to elements of type text. This is string value indicating the text to be displayed within the popupElement.\nIf no text property is provided, the popupElement will display whatever is specified in the popupInfo.description property.",type:"string",title:"text"},type:{description:"String value indicating which elements to use.",enum:["attachments","fields","media","text"],type:"string",title:"type"}}},IRelatedRecordsInfo:{description:"The sort in the popupInfo for the parent feature. This impacts the sorting order for the returned child records.",title:"IRelatedRecordsInfo",type:"object",properties:{orderByFields:{description:"Array of orderByFields objects indicating the field display order for the related records and whether they should be sorted in ascending 'asc' or descending 'desc' order.",type:"array",items:{$ref:"#/definitions/IOrderByField"},title:"orderByFields"},showRelatedRecords:{description:"Required boolean value indicating whether to display related records. If true, client should let the user navigate to the related records. Defaults to true if the layer participates in a relationship AND the related layer/table has already been added to the map (either as an operationalLayer or as a table).",type:"boolean",title:"showRelatedRecords"}},required:["showRelatedRecords"]},IOrderByField:{description:"Object indicating the field display order for the related records and whether they should be sorted in ascending or descending order.",title:"IOrderByField",type:"object",properties:{field:{description:"The attribute value of the field selected that will drive the sorting of related records.",type:"string",title:"field"},order:{description:"Set the ascending or descending sort order of the returned related records.",enum:["asc","desc"],type:"string",title:"order"}}},ITextSymbol:{title:"ITextSymbol",type:"object",properties:{type:{type:"string",enum:["esriTS"],title:"type"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},backgroundColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"backgroundColor"},borderLineSize:{type:"number",title:"borderLineSize"},borderLineColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"borderLineColor"},haloSize:{type:"number",title:"haloSize"},haloColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"haloColor"},verticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"verticalAlignment"},horizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"horizontalAlignment"},rightToLeft:{type:"boolean",title:"rightToLeft"},kerning:{type:"boolean",title:"kerning"},font:{$ref:"#/definitions/IFont",title:"font"},text:{type:"string",title:"text"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"},style:{type:"string",title:"style"}},required:["type"]},IFont:{title:"IFont",type:"object",properties:{family:{type:"string",title:"family"},size:{type:"number",title:"size"},style:{enum:["italic","normal","oblique"],type:"string",title:"style"},weight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"weight"},decoration:{enum:["line-through","none","underline"],type:"string",title:"decoration"}}},ISimpleLineSymbol:{title:"ISimpleLineSymbol",type:"object",properties:{type:{type:"string",enum:["esriSLS"],title:"type"},style:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},width:{type:"number",title:"width"}},required:["type"]},"Intl.NumberFormatOptions":{title:"Intl.NumberFormatOptions",type:"object",properties:{localeMatcher:{type:"string",title:"localeMatcher"},style:{type:"string",title:"style"},currency:{type:"string",title:"currency"},currencySign:{type:"string",title:"currencySign"},useGrouping:{type:"boolean",title:"useGrouping"},minimumIntegerDigits:{type:"number",title:"minimumIntegerDigits"},minimumFractionDigits:{type:"number",title:"minimumFractionDigits"},maximumFractionDigits:{type:"number",title:"maximumFractionDigits"},minimumSignificantDigits:{type:"number",title:"minimumSignificantDigits"},maximumSignificantDigits:{type:"number",title:"maximumSignificantDigits"},compactDisplay:{enum:["long","short"],type:"string",title:"compactDisplay"},notation:{enum:["compact","engineering","scientific","standard"],type:"string",title:"notation"},signDisplay:{enum:["always","auto","exceptZero","never"],type:"string",title:"signDisplay"},unit:{type:"string",title:"unit"},unitDisplay:{enum:["long","narrow","short"],type:"string",title:"unitDisplay"},currencyDisplay:{type:"string",title:"currencyDisplay"}}},ISimpleFillSymbol:{title:"ISimpleFillSymbol",type:"object",properties:{type:{type:"string",enum:["esriSFS"],title:"type"},style:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"}},required:["type"]},DateTimeFormatOptions:{description:"Defines how the DateTime axis data should be formatted.",title:"DateTimeFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "date". It can help us to differentiate date-time axis from other types of axes viz., numeric (value) axis and category axis.',type:"string",enum:["date"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.DateTimeFormatOptions",description:"Represent the JS native [Intl.DateTimeFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormatt), which is based on [CLDR](http://cldr.unicode.org/translation/date-time-1/date-time-patterns) specifications.",title:"intlOptions"}},required:["intlOptions","type"]},"Intl.DateTimeFormatOptions":{title:"Intl.DateTimeFormatOptions",type:"object",properties:{localeMatcher:{enum:["best fit","lookup"],type:"string",title:"localeMatcher"},weekday:{enum:["long","narrow","short"],type:"string",title:"weekday"},era:{enum:["long","narrow","short"],type:"string",title:"era"},year:{enum:["2-digit","numeric"],type:"string",title:"year"},month:{enum:["2-digit","long","narrow","numeric","short"],type:"string",title:"month"},day:{enum:["2-digit","numeric"],type:"string",title:"day"},hour:{enum:["2-digit","numeric"],type:"string",title:"hour"},minute:{enum:["2-digit","numeric"],type:"string",title:"minute"},second:{enum:["2-digit","numeric"],type:"string",title:"second"},timeZoneName:{enum:["long","longGeneric","longOffset","short","shortGeneric","shortOffset"],type:"string",title:"timeZoneName"},formatMatcher:{enum:["basic","best fit"],type:"string",title:"formatMatcher"},hour12:{type:"boolean",title:"hour12"},timeZone:{type:"string",title:"timeZone"},calendar:{type:"string",title:"calendar"},dayPeriod:{enum:["long","narrow","short"],type:"string",title:"dayPeriod"},numberingSystem:{type:"string",title:"numberingSystem"},dateStyle:{enum:["full","long","medium","short"],type:"string",title:"dateStyle"},timeStyle:{enum:["full","long","medium","short"],type:"string",title:"timeStyle"},hourCycle:{enum:["h11","h12","h23","h24"],type:"string",title:"hourCycle"}}},IPoint:{description:'A simple point geometry, with spatial reference defined.\n\n`IPoint` can also be imported from the following packages:\n\n```js\nimport { IPoint } from "@esri/arcgis-rest-routing";\nimport { IPoint } from "@esri/arcgis-rest-geocoding";\n```',title:"IPoint",type:"object",properties:{x:{type:"number",title:"x"},y:{type:"number",title:"y"},z:{type:"number",title:"z"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["x","y"]},IPolyline:{title:"IPolyline",type:"object",properties:{paths:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"paths"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["paths"]},Position:{title:"Position",anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4}]},IPolygon:{title:"IPolygon",type:"object",properties:{rings:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"rings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["rings"]},IPolygonWithCurves:{title:"IPolygonWithCurves",type:"object",properties:{curveRings:{type:"array",items:{type:"array",items:{anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/ICircularArc"},{$ref:"#/definitions/IArc"},{$ref:"#/definitions/IOldCircularArc"},{$ref:"#/definitions/IBezierCurve"}]}},title:"curveRings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["curveRings"]},ICircularArc:{description:"a circular arc can be represented as a JSON curve object",title:"ICircularArc",type:"object",properties:{c:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:2,maxItems:2,title:"c"}},required:["c"]},IArc:{description:"an arc can be represented as a JSON curve object",title:"IArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:7,maxItems:7,title:"a"}},required:["a"]},IOldCircularArc:{title:"IOldCircularArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"a"}},required:["a"]},IBezierCurve:{description:"a bezier curve can be represented as a JSON curve object",title:"IBezierCurve",type:"object",properties:{b:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:3,maxItems:3,title:"b"}},required:["b"]},IEnvelope:{description:"An envelope is a rectangle defined by a range of values for each coordinate and attribute.",title:"IEnvelope",type:"object",properties:{xmin:{type:"number",title:"xmin"},xmax:{type:"number",title:"xmax"},ymin:{type:"number",title:"ymin"},ymax:{type:"number",title:"ymax"},zmin:{type:"number",title:"zmin"},zmax:{type:"number",title:"zmax"},mmin:{type:"number",title:"mmin"},mmax:{type:"number",title:"mmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISimpleMarkerSymbol:{title:"ISimpleMarkerSymbol",type:"object",properties:{type:{type:"string",enum:["esriSMS"],title:"type"},style:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},size:{type:"number",title:"size"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"}},required:["type"]}},$ref:"#/definitions/WebChart"};var FT={};
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */!function(t){function e(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length>1){e[0]=e[0].slice(0,-1);for(var n=e.length-1,r=1;r<n;++r)e[r]=e[r].slice(1,-1);return e[n]=e[n].slice(1),e.join("")}return e[0]}function i(t){return"(?:"+t+")"}function n(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function r(t){return t.toUpperCase()}function s(t){var n="[A-Za-z]",r="[0-9]",s=e(r,"[A-Fa-f]"),a=i(i("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+i("%[89A-Fa-f]"+s+"%"+s+s)+"|"+i("%"+s+s)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=e("[\\:\\/\\?\\#\\[\\]\\@]",o),l=t?"[\\uE000-\\uF8FF]":"[]",h=e(n,r,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");i(n+e(n,r,"[\\+\\-\\.]")+"*"),i(i(a+"|"+e(h,o,"[\\:]"))+"*");var c=i(i("25[0-5]")+"|"+i("2[0-4]"+r)+"|"+i("1"+r+r)+"|"+i("0?[1-9]"+r)+"|0?0?"+r),d=i(c+"\\."+c+"\\."+c+"\\."+c),f=i(s+"{1,4}"),m=i(i(f+"\\:"+f)+"|"+d),v=i(i(f+"\\:")+"{6}"+m),p=i("\\:\\:"+i(f+"\\:")+"{5}"+m),b=i(i(f)+"?\\:\\:"+i(f+"\\:")+"{4}"+m),g=i(i(i(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+i(f+"\\:")+"{3}"+m),y=i(i(i(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+i(f+"\\:")+"{2}"+m),w=i(i(i(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+m),S=i(i(i(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+m),x=i(i(i(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),C=i(i(i(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),O=i([v,p,b,g,y,w,S,x,C].join("|")),M=i(i(h+"|"+a)+"+");i("[vV]"+s+"+\\."+e(h,o,"[\\:]")+"+"),i(i(a+"|"+e(h,o))+"*");var T=i(a+"|"+e(h,o,"[\\:\\@]"));return i(i(a+"|"+e(h,o,"[\\@]"))+"+"),i(i(T+"|"+e("[\\/\\?]",l))+"*"),{NOT_SCHEME:new RegExp(e("[^]",n,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",h,o),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",h,o),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",h,o),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",h,o),"g"),NOT_QUERY:new RegExp(e("[^\\%]",h,o,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",h,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",h,o),"g"),UNRESERVED:new RegExp(h,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",h,u),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+O+")"+i(i("\\%25|\\%(?!"+s+"{2})")+"("+M+")")+"?\\]?$")}}var a=s(!1),o=s(!0),u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,h=36,c=/^xn--/,d=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,p=String.fromCharCode;function b(t){throw new RangeError(m[t])}function g(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+function(t,e){for(var i=[],n=t.length;n--;)i[n]=e(t[n]);return i}((t=t.replace(f,".")).split("."),e).join(".")}function y(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),i--)}else e.push(r)}return e}var w=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:h},S=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},x=function(t,e,i){var n=0;for(t=i?v(t/700):t>>1,t+=v(t/e);t>455;n+=h)t=v(t/35);return v(n+36*t/(t+38))},C=function(t){var e=[],i=t.length,n=0,r=128,s=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var o=0;o<a;++o)t.charCodeAt(o)>=128&&b("not-basic"),e.push(t.charCodeAt(o));for(var u=a>0?a+1:0;u<i;){for(var c=n,d=1,f=h;;f+=h){u>=i&&b("invalid-input");var m=w(t.charCodeAt(u++));(m>=h||m>v((l-n)/d))&&b("overflow"),n+=m*d;var p=f<=s?1:f>=s+26?26:f-s;if(m<p)break;var g=h-p;d>v(l/g)&&b("overflow"),d*=g}var y=e.length+1;s=x(n-c,y,0==c),v(n/y)>l-r&&b("overflow"),r+=v(n/y),n%=y,e.splice(n++,0,r)}return String.fromCodePoint.apply(String,e)},O=function(t){var e=[],i=(t=y(t)).length,n=128,r=0,s=72,a=!0,o=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;f<128&&e.push(p(f))}}catch(t){o=!0,u=t}finally{try{!a&&d.return&&d.return()}finally{if(o)throw u}}var m=e.length,g=m;for(m&&e.push("-");g<i;){var w=l,C=!0,O=!1,M=void 0;try{for(var T,k=t[Symbol.iterator]();!(C=(T=k.next()).done);C=!0){var I=T.value;I>=n&&I<w&&(w=I)}}catch(t){O=!0,M=t}finally{try{!C&&k.return&&k.return()}finally{if(O)throw M}}var A=g+1;w-n>v((l-r)/A)&&b("overflow"),r+=(w-n)*A,n=w;var j=!0,F=!1,D=void 0;try{for(var P,L=t[Symbol.iterator]();!(j=(P=L.next()).done);j=!0){var E=P.value;if(E<n&&++r>l&&b("overflow"),E==n){for(var N=r,R=h;;R+=h){var B=R<=s?1:R>=s+26?26:R-s;if(N<B)break;var _=N-B,z=h-B;e.push(p(S(B+_%z,0))),N=v(_/z)}e.push(p(S(N,0))),s=x(r,A,g==m),r=0,++g}}}catch(t){F=!0,D=t}finally{try{!j&&L.return&&L.return()}finally{if(F)throw D}}++r,++n}return e.join("")},M=function(t){return g(t,(function(t){return d.test(t)?"xn--"+O(t):t}))},T=function(t){return g(t,(function(t){return c.test(t)?C(t.slice(4).toLowerCase()):t}))},k={};function I(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function A(t){for(var e="",i=0,n=t.length;i<n;){var r=parseInt(t.substr(i+1,2),16);if(r<128)e+=String.fromCharCode(r),i+=3;else if(r>=194&&r<224){if(n-i>=6){var s=parseInt(t.substr(i+4,2),16);e+=String.fromCharCode((31&r)<<6|63&s)}else e+=t.substr(i,6);i+=6}else if(r>=224){if(n-i>=9){var a=parseInt(t.substr(i+4,2),16),o=parseInt(t.substr(i+7,2),16);e+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&o)}else e+=t.substr(i,9);i+=9}else e+=t.substr(i,3),i+=3}return e}function j(t,e){function i(t){var i=A(t);return i.match(e.UNRESERVED)?i:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,i).replace(e.NOT_USERINFO,I).replace(e.PCT_ENCODED,r)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_HOST,I).replace(e.PCT_ENCODED,r)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,i).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,I).replace(e.PCT_ENCODED,r)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,i).replace(e.NOT_QUERY,I).replace(e.PCT_ENCODED,r)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,i).replace(e.NOT_FRAGMENT,I).replace(e.PCT_ENCODED,r)),t}function F(t){return t.replace(/^0*(.*)/,"$1")||"0"}function D(t,e){var i=t.match(e.IPV4ADDRESS)||[],n=u(i,2)[1];return n?n.split(".").map(F).join("."):t}function P(t,e){var i=t.match(e.IPV6ADDRESS)||[],n=u(i,3),r=n[1],s=n[2];if(r){for(var a=r.toLowerCase().split("::").reverse(),o=u(a,2),l=o[0],h=o[1],c=h?h.split(":").map(F):[],d=l.split(":").map(F),f=e.IPV4ADDRESS.test(d[d.length-1]),m=f?7:8,v=d.length-m,p=Array(m),b=0;b<m;++b)p[b]=c[b]||d[v+b]||"";f&&(p[m-1]=D(p[m-1],e));var g=p.reduce((function(t,e,i){if(!e||"0"===e){var n=t[t.length-1];n&&n.index+n.length===i?n.length++:t.push({index:i,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],y=void 0;if(g&&g.length>1){var w=p.slice(0,g.index),S=p.slice(g.index+g.length);y=w.join(":")+"::"+S.join(":")}else y=p.join(":");return s&&(y+="%"+s),y}return t}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,E=void 0==="".match(/(){0}/)[1];function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},n=!1!==e.iri?o:a;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var r=t.match(L);if(r){E?(i.scheme=r[1],i.userinfo=r[3],i.host=r[4],i.port=parseInt(r[5],10),i.path=r[6]||"",i.query=r[7],i.fragment=r[8],isNaN(i.port)&&(i.port=r[5])):(i.scheme=r[1]||void 0,i.userinfo=-1!==t.indexOf("@")?r[3]:void 0,i.host=-1!==t.indexOf("//")?r[4]:void 0,i.port=parseInt(r[5],10),i.path=r[6]||"",i.query=-1!==t.indexOf("?")?r[7]:void 0,i.fragment=-1!==t.indexOf("#")?r[8]:void 0,isNaN(i.port)&&(i.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),i.host&&(i.host=P(D(i.host,n),n)),void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||i.path||void 0!==i.query?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==i.reference&&(i.error=i.error||"URI is not a "+e.reference+" reference.");var s=k[(e.scheme||i.scheme||"").toLowerCase()];if(e.unicodeSupport||s&&s.unicodeSupport)j(i,n);else{if(i.host&&(e.domainHost||s&&s.domainHost))try{i.host=M(i.host.replace(n.PCT_ENCODED,A).toLowerCase())}catch(t){i.error=i.error||"Host's domain name can not be converted to ASCII via punycode: "+t}j(i,a)}s&&s.parse&&s.parse(i,e)}else i.error=i.error||"URI can not be parsed.";return i}function R(t,e){var i=!1!==e.iri?o:a,n=[];return void 0!==t.userinfo&&(n.push(t.userinfo),n.push("@")),void 0!==t.host&&n.push(P(D(String(t.host),i),i).replace(i.IPV6ADDRESS,(function(t,e,i){return"["+e+(i?"%25"+i:"")+"]"}))),"number"!=typeof t.port&&"string"!=typeof t.port||(n.push(":"),n.push(String(t.port))),n.length?n.join(""):void 0}var B=/^\.\.?\//,_=/^\/\.(\/|$)/,z=/^\/\.\.(\/|$)/,V=/^\/?(?:.|\n)*?(?=\/|$)/;function G(t){for(var e=[];t.length;)if(t.match(B))t=t.replace(B,"");else if(t.match(_))t=t.replace(_,"/");else if(t.match(z))t=t.replace(z,"/"),e.pop();else if("."===t||".."===t)t="";else{var i=t.match(V);if(!i)throw new Error("Unexpected dot segment condition");var n=i[0];t=t.slice(n.length),e.push(n)}return e.join("")}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.iri?o:a,n=[],r=k[(e.scheme||t.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(t,e),t.host)if(i.IPV6ADDRESS.test(t.host));else if(e.domainHost||r&&r.domainHost)try{t.host=e.iri?T(t.host):M(t.host.replace(i.PCT_ENCODED,A).toLowerCase())}catch(i){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+i}j(t,i),"suffix"!==e.reference&&t.scheme&&(n.push(t.scheme),n.push(":"));var s=R(t,e);if(void 0!==s&&("suffix"!==e.reference&&n.push("//"),n.push(s),t.path&&"/"!==t.path.charAt(0)&&n.push("/")),void 0!==t.path){var u=t.path;e.absolutePath||r&&r.absolutePath||(u=G(u)),void 0===s&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==t.query&&(n.push("?"),n.push(t.query)),void 0!==t.fragment&&(n.push("#"),n.push(t.fragment)),n.join("")}function W(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(t=N($(t,i),i),e=N($(e,i),i)),!(i=i||{}).tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=G(e.path||""),n.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=G(e.path||""),n.query=e.query):(e.path?("/"===e.path.charAt(0)?n.path=G(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?n.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:n.path=e.path:n.path="/"+e.path,n.path=G(n.path)),n.query=e.query):(n.path=t.path,void 0!==e.query?n.query=e.query:n.query=t.query),n.userinfo=t.userinfo,n.host=t.host,n.port=t.port),n.scheme=t.scheme),n.fragment=e.fragment,n}function q(t,e){return t&&t.toString().replace(e&&e.iri?o.PCT_ENCODED:a.PCT_ENCODED,A)}var H={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){var i="https"===String(t.scheme).toLowerCase();return t.port!==(i?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},U={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function K(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var J={scheme:"ws",domainHost:!0,parse:function(t,e){var i=t;return i.secure=K(i),i.resourceName=(i.path||"/")+(i.query?"?"+i.query:""),i.path=void 0,i.query=void 0,i},serialize:function(t,e){if(t.port!==(K(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var i=t.resourceName.split("?"),n=u(i,2),r=n[0],s=n[1];t.path=r&&"/"!==r?r:void 0,t.query=s,t.resourceName=void 0}return t.fragment=void 0,t}},Y={scheme:"wss",domainHost:J.domainHost,parse:J.parse,serialize:J.serialize},Z={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",tt=i(i("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+i("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+i("%"+Q+Q)),et=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),it=new RegExp(X,"g"),nt=new RegExp(tt,"g"),rt=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',et),"g"),st=new RegExp(e("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),at=st;function ot(t){var e=A(t);return e.match(it)?e:t}var ut={scheme:"mailto",parse:function(t,e){var i=t,n=i.to=i.path?i.path.split(","):[];if(i.path=void 0,i.query){for(var r=!1,s={},a=i.query.split("&"),o=0,u=a.length;o<u;++o){var l=a[o].split("=");switch(l[0]){case"to":for(var h=l[1].split(","),c=0,d=h.length;c<d;++c)n.push(h[c]);break;case"subject":i.subject=q(l[1],e);break;case"body":i.body=q(l[1],e);break;default:r=!0,s[q(l[0],e)]=q(l[1],e)}}r&&(i.headers=s)}i.query=void 0;for(var f=0,m=n.length;f<m;++f){var v=n[f].split("@");if(v[0]=q(v[0]),e.unicodeSupport)v[1]=q(v[1],e).toLowerCase();else try{v[1]=M(q(v[1],e).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}n[f]=v.join("@")}return i},serialize:function(t,e){var i=t,n=function(t){return null!=t?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[]}(t.to);if(n){for(var s=0,a=n.length;s<a;++s){var o=String(n[s]),u=o.lastIndexOf("@"),l=o.slice(0,u).replace(nt,ot).replace(nt,r).replace(rt,I),h=o.slice(u+1);try{h=e.iri?T(h):M(q(h,e).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}n[s]=l+"@"+h}i.path=n.join(",")}var c=t.headers=t.headers||{};t.subject&&(c.subject=t.subject),t.body&&(c.body=t.body);var d=[];for(var f in c)c[f]!==Z[f]&&d.push(f.replace(nt,ot).replace(nt,r).replace(st,I)+"="+c[f].replace(nt,ot).replace(nt,r).replace(at,I));return d.length&&(i.query=d.join("&")),i}},lt=/^([^\:]+)\:(.*)/,ht={scheme:"urn",parse:function(t,e){var i=t.path&&t.path.match(lt),n=t;if(i){var r=e.scheme||n.scheme||"urn",s=i[1].toLowerCase(),a=i[2],o=r+":"+(e.nid||s),u=k[o];n.nid=s,n.nss=a,n.path=void 0,u&&(n=u.parse(n,e))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(t,e){var i=e.scheme||t.scheme||"urn",n=t.nid,r=i+":"+(e.nid||n),s=k[r];s&&(t=s.serialize(t,e));var a=t,o=t.nss;return a.path=(n||e.nid)+":"+o,a}},ct=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,dt={scheme:"urn:uuid",parse:function(t,e){var i=t;return i.uuid=i.nss,i.nss=void 0,e.tolerant||i.uuid&&i.uuid.match(ct)||(i.error=i.error||"UUID is not valid."),i},serialize:function(t,e){var i=t;return i.nss=(t.uuid||"").toLowerCase(),i}};k[H.scheme]=H,k[U.scheme]=U,k[J.scheme]=J,k[Y.scheme]=Y,k[ut.scheme]=ut,k[ht.scheme]=ht,k[dt.scheme]=dt,t.SCHEMES=k,t.pctEncChar=I,t.pctDecChars=A,t.parse=N,t.removeDotSegments=G,t.serialize=$,t.resolveComponents=W,t.resolve=function(t,e,i){var n=function(t,e){var i=t;if(e)for(var n in e)i[n]=e[n];return i}({scheme:"null"},i);return $(W(N(t,n),N(e,n),n,!0),n)},t.normalize=function(t,e){return"string"==typeof t?t=$(N(t,e),e):"object"===n(t)&&(t=N($(t,e),e)),t},t.equal=function(t,e,i){return"string"==typeof t?t=$(N(t,i),i):"object"===n(t)&&(t=$(t,i)),"string"==typeof e?e=$(N(e,i),i):"object"===n(e)&&(e=$(e,i)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?o.ESCAPE:a.ESCAPE,I)},t.unescapeComponent=q,Object.defineProperty(t,"__esModule",{value:!0})}(FT);var DT=function t(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var n,r,s;if(Array.isArray(e)){if((n=e.length)!=i.length)return!1;for(r=n;0!=r--;)if(!t(e[r],i[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((n=(s=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(i,s[r]))return!1;for(r=n;0!=r--;){var a=s[r];if(!t(e[a],i[a]))return!1}return!0}return e!=e&&i!=i},PT={copy:function(t,e){for(var i in e=e||{},t)e[i]=t[i];return e},checkDataType:LT,checkDataTypes:function(t,e,i){if(1===t.length)return LT(t[0],e,i,!0);var n="",r=NT(t);for(var s in r.array&&r.object&&(n=r.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer,r)n+=(n?" && ":"")+LT(s,e,i,!0);return n},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var i=[],n=0;n<e.length;n++){var r=e[n];(ET[r]||"array"===t&&"array"===r)&&(i[i.length]=r)}if(i.length)return i}else{if(ET[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:NT,getProperty:_T,escapeQuotes:zT,equal:DT,ucs2length:function(t){for(var e,i=0,n=t.length,r=0;r<n;)i++,(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<n&&56320==(64512&(e=t.charCodeAt(r)))&&r++;return i},varOccurences:function(t,e){e+="[^0-9]";var i=t.match(new RegExp(e,"g"));return i?i.length:0},varReplace:function(t,e,i){return e+="([^0-9])",i=i.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),i+"$1")},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var i in t)if(e[i])return!0},schemaHasRulesExcept:function(t,e,i){if("boolean"==typeof t)return!t&&"not"!=i;for(var n in t)if(n!=i&&e[n])return!0},schemaUnknownRules:function(t,e){if("boolean"!=typeof t)for(var i in t)if(!e[i])return i},toQuotedString:VT,getPathExpr:function(t,e,i,n){return WT(t,i?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,i){return WT(t,VT(i?"/"+qT(e):_T(e)))},getData:function(t,e,i){var n,r,s,a;if(""===t)return"rootData";if("/"==t[0]){if(!GT.test(t))throw new Error("Invalid JSON-pointer: "+t);r=t,s="rootData"}else{if(!(a=t.match($T)))throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],"#"==(r=a[2])){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return i[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!r)return s}for(var o=s,u=r.split("/"),l=0;l<u.length;l++){var h=u[l];h&&(o+=" && "+(s+=_T(HT(h))))}return o},unescapeFragment:function(t){return HT(decodeURIComponent(t))},unescapeJsonPointer:HT,escapeFragment:function(t){return encodeURIComponent(qT(t))},escapeJsonPointer:qT};function LT(t,e,i,n){var r=n?" !== ":" === ",s=n?" || ":" && ",a=n?"!":"",o=n?"":"!";switch(t){case"null":return e+r+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+s+"typeof "+e+r+'"object"'+s+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+s+o+"("+e+" % 1)"+s+e+r+e+(i?s+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+t+'"'+(i?s+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+t+'"'}}var ET=NT(["string","number","integer","boolean","null"]);function NT(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e}var RT=/^[a-z$_][a-z$_0-9]*$/i,BT=/'|\\/g;function _T(t){return"number"==typeof t?"["+t+"]":RT.test(t)?"."+t:"['"+zT(t)+"']"}function zT(t){return t.replace(BT,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function VT(t){return"'"+zT(t)+"'"}var GT=/^\/(?:[^~]|~0|~1)*$/,$T=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function WT(t,e){return'""'==t?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function qT(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function HT(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}var UT=PT,KT=function(t){UT.copy(t,this)},JT={exports:{}},YT=JT.exports=function(t,e,i){"function"==typeof e&&(i=e,e={}),ZT(e,"function"==typeof(i=e.cb||i)?i:i.pre||function(){},i.post||function(){},t,"",t)};function ZT(t,e,i,n,r,s,a,o,u,l){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var h in e(n,r,s,a,o,u,l),n){var c=n[h];if(Array.isArray(c)){if(h in YT.arrayKeywords)for(var d=0;d<c.length;d++)ZT(t,e,i,c[d],r+"/"+h+"/"+d,s,r,h,n,d)}else if(h in YT.propsKeywords){if(c&&"object"==typeof c)for(var f in c)ZT(t,e,i,c[f],r+"/"+h+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),s,r,h,n,f)}else(h in YT.keywords||t.allKeys&&!(h in YT.skipKeywords))&&ZT(t,e,i,c,r+"/"+h,s,r,h,n)}i(n,r,s,a,o,u,l)}}YT.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},YT.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},YT.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},YT.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var XT=FT,QT=DT,tk=PT,ek=KT,ik=JT.exports,nk=rk;function rk(t,e,i){var n=this._refs[i];if("string"==typeof n){if(!this._refs[n])return rk.call(this,t,e,n);n=this._refs[n]}if((n=n||this._schemas[i])instanceof ek)return hk(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var r,s,a,o=sk.call(this,e,i);return o&&(r=o.schema,e=o.root,a=o.baseId),r instanceof ek?s=r.validate||t.call(this,r.schema,e,void 0,a):void 0!==r&&(s=hk(r,this._opts.inlineRefs)?r:t.call(this,r,e,void 0,a)),s}function sk(t,e){var i=XT.parse(e),n=mk(i),r=fk(this._getId(t.schema));if(0===Object.keys(t.schema).length||n!==r){var s=pk(n),a=this._refs[s];if("string"==typeof a)return ak.call(this,t,a,i);if(a instanceof ek)a.validate||this._compile(a),t=a;else{if(!((a=this._schemas[s])instanceof ek))return;if(a.validate||this._compile(a),s==pk(e))return{schema:a,root:t,baseId:r};t=a}if(!t.schema)return;r=fk(this._getId(t.schema))}return uk.call(this,i,r,t.schema,t)}function ak(t,e,i){var n=sk.call(this,t,e);if(n){var r=n.schema,s=n.baseId;t=n.root;var a=this._getId(r);return a&&(s=bk(s,a)),uk.call(this,i,s,r,t)}}rk.normalizeId=pk,rk.fullPath=fk,rk.url=bk,rk.ids=function(t){var e=pk(this._getId(t)),i={"":e},n={"":fk(e,!1)},r={},s=this;return ik(t,{allKeys:!0},(function(t,e,a,o,u,l,h){if(""!==e){var c=s._getId(t),d=i[o],f=n[o]+"/"+u;if(void 0!==h&&(f+="/"+("number"==typeof h?h:tk.escapeFragment(h))),"string"==typeof c){c=d=pk(d?XT.resolve(d,c):c);var m=s._refs[c];if("string"==typeof m&&(m=s._refs[m]),m&&m.schema){if(!QT(t,m.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=pk(f))if("#"==c[0]){if(r[c]&&!QT(t,r[c]))throw new Error('id "'+c+'" resolves to more than one schema');r[c]=t}else s._refs[c]=f}i[e]=d,n[e]=f}})),r},rk.inlineRef=hk,rk.schema=sk;var ok=tk.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function uk(t,e,i,n){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var r=t.fragment.split("/"),s=1;s<r.length;s++){var a=r[s];if(a){if(void 0===(i=i[a=tk.unescapeFragment(a)]))break;var o;if(!ok[a]&&((o=this._getId(i))&&(e=bk(e,o)),i.$ref)){var u=bk(e,i.$ref),l=sk.call(this,n,u);l&&(i=l.schema,n=l.root,e=l.baseId)}}}return void 0!==i&&i!==n.schema?{schema:i,root:n,baseId:e}:void 0}}var lk=tk.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function hk(t,e){return!1!==e&&(void 0===e||!0===e?ck(t):e?dk(t)<=e:void 0)}function ck(t){var e;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(e=t[i])&&!ck(e))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(e=t[n])&&!ck(e))return!1}return!0}function dk(t){var e,i=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(e=t[n])&&(i+=dk(e)),i==1/0)return 1/0}else for(var r in t){if("$ref"==r)return 1/0;if(lk[r])i++;else if("object"==typeof(e=t[r])&&(i+=dk(e)+1),i==1/0)return 1/0}return i}function fk(t,e){return!1!==e&&(t=pk(t)),mk(XT.parse(t))}function mk(t){return XT.serialize(t).split("#")[0]+"#"}var vk=/#\/?$/;function pk(t){return t?t.replace(vk,""):""}function bk(t,e){return e=pk(e),XT.resolve(t,e)}var gk=nk,yk={Validation:Sk((function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0})),MissingRef:Sk(wk)};function wk(t,e,i){this.message=i||wk.message(t,e),this.missingRef=gk.url(t,e),this.missingSchema=gk.normalizeId(gk.fullPath(this.missingRef))}function Sk(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}wk.message=function(t,e){return"can't resolve reference "+e+" from id "+t};var xk=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i,n="boolean"==typeof e.cycles&&e.cycles,r=e.cmp&&(i=e.cmp,function(t){return function(e,n){var r={key:e,value:t[e]},s={key:n,value:t[n]};return i(r,s)}}),s=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var i,a;if(Array.isArray(e)){for(a="[",i=0;i<e.length;i++)i&&(a+=","),a+=t(e[i])||"null";return a+"]"}if(null===e)return"null";if(-1!==s.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(e)-1,u=Object.keys(e).sort(r&&r(e));for(a="",i=0;i<u.length;i++){var l=u[i],h=t(e[l]);h&&(a&&(a+=","),a+=JSON.stringify(l)+":"+h)}return s.splice(o,1),"{"+a+"}"}}(t)},Ck=function(t,e,i){var n="",r=!0===t.schema.$async,s=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),a=t.self._getId(t.schema);if(t.opts.strictKeywords){var o=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(o){var u="unknown keyword: "+o;if("log"!==t.opts.strictKeywords)throw new Error(u);t.logger.warn(u)}}if(t.isTop&&(n+=" var validate = ",r&&(t.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(t.opts.sourceCode||t.opts.processCode)&&(n+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof t.schema||!s&&!t.schema.$ref){e="false schema";var l=t.level,h=t.dataLevel,c=t.schema[e],d=t.schemaPath+t.util.getProperty(e),f=t.errSchemaPath+"/"+e,m=!t.opts.allErrors,v="data"+(h||""),p="valid"+l;if(!1===t.schema){t.isTop?m=!0:n+=" var "+p+" = false; ",(q=q||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(f)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'boolean schema is false' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";var b=n;n=q.pop(),!t.compositeRule&&m?t.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?n+=r?" return data; ":" validate.errors = null; return true; ":n+=" var "+p+" = true; ";return t.isTop&&(n+=" }; return validate; "),n}if(t.isTop){var g=t.isTop;if(l=t.level=0,h=t.dataLevel=0,v="data",t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(l=t.level,v="data"+((h=t.dataLevel)||""),a&&(t.baseId=t.resolve.url(t.baseId,a)),r&&!t.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}p="valid"+l,m=!t.opts.allErrors;var w="",S="",x=t.schema.type,C=Array.isArray(x);if(x&&t.opts.nullable&&!0===t.schema.nullable&&(C?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],C=!0)),C&&1==x.length&&(x=x[0],C=!1),t.schema.$ref&&s){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(s=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(n+=" "+t.RULES.all.$comment.code(t,"$comment")),x){if(t.opts.coerceTypes)var O=t.util.coerceToTypes(t.opts.coerceTypes,x);var M=t.RULES.types[x];if(O||C||!0===M||M&&!Z(M)){d=t.schemaPath+".type",f=t.errSchemaPath+"/type",d=t.schemaPath+".type",f=t.errSchemaPath+"/type";var T=C?"checkDataTypes":"checkDataType";if(n+=" if ("+t.util[T](x,v,t.opts.strictNumbers,!0)+") { ",O){var k="dataType"+l,I="coerced"+l;n+=" var "+k+" = typeof "+v+"; var "+I+" = undefined; ","array"==t.opts.coerceTypes&&(n+=" if ("+k+" == 'object' && Array.isArray("+v+") && "+v+".length == 1) { "+v+" = "+v+"[0]; "+k+" = typeof "+v+"; if ("+t.util.checkDataType(t.schema.type,v,t.opts.strictNumbers)+") "+I+" = "+v+"; } "),n+=" if ("+I+" !== undefined) ; ";var A=O;if(A)for(var j,F=-1,D=A.length-1;F<D;)"string"==(j=A[F+=1])?n+=" else if ("+k+" == 'number' || "+k+" == 'boolean') "+I+" = '' + "+v+"; else if ("+v+" === null) "+I+" = ''; ":"number"==j||"integer"==j?(n+=" else if ("+k+" == 'boolean' || "+v+" === null || ("+k+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==j&&(n+=" && !("+v+" % 1)"),n+=")) "+I+" = +"+v+"; "):"boolean"==j?n+=" else if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+I+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+I+" = true; ":"null"==j?n+=" else if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+I+" = null; ":"array"==t.opts.coerceTypes&&"array"==j&&(n+=" else if ("+k+" == 'string' || "+k+" == 'number' || "+k+" == 'boolean' || "+v+" == null) "+I+" = ["+v+"]; ");n+=" else {   ",(q=q||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(f)+" , params: { type: '",n+=C?""+x.join(","):""+x,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=C?""+x.join(","):""+x,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",b=n,n=q.pop(),!t.compositeRule&&m?t.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+I+" !== undefined) {  ";var P=h?"data"+(h-1||""):"parentData";n+=" "+v+" = "+I+"; ",h||(n+="if ("+P+" !== undefined)"),n+=" "+P+"["+(h?t.dataPathArr[h]:"parentDataProperty")+"] = "+I+"; } "}else(q=q||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(f)+" , params: { type: '",n+=C?""+x.join(","):""+x,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=C?""+x.join(","):""+x,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",b=n,n=q.pop(),!t.compositeRule&&m?t.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(t.schema.$ref&&!s)n+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",m&&(n+=" } if (errors === ",n+=g?"0":"errs_"+l,n+=") { ",S+="}");else{var L=t.RULES;if(L)for(var E=-1,N=L.length-1;E<N;)if(Z(M=L[E+=1])){if(M.type&&(n+=" if ("+t.util.checkDataType(M.type,v,t.opts.strictNumbers)+") { "),t.opts.useDefaults)if("object"==M.type&&t.schema.properties){c=t.schema.properties;var R=Object.keys(c);if(R)for(var B,_=-1,z=R.length-1;_<z;)if(void 0!==($=c[B=R[_+=1]]).default){var V=v+t.util.getProperty(B);if(t.compositeRule){if(t.opts.strictDefaults){if(y="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}}else n+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ","shared"==t.opts.useDefaults?n+=" "+t.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}else if("array"==M.type&&Array.isArray(t.schema.items)){var G=t.schema.items;if(G){F=-1;for(var $,W=G.length-1;F<W;)if(void 0!==($=G[F+=1]).default)if(V=v+"["+F+"]",t.compositeRule){if(t.opts.strictDefaults){if(y="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}}else n+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ","shared"==t.opts.useDefaults?n+=" "+t.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}var q,H=M.rules;if(H)for(var U,K=-1,J=H.length-1;K<J;)if(X(U=H[K+=1])){var Y=U.code(t,U.keyword,M.type);Y&&(n+=" "+Y+" ",m&&(w+="}"))}if(m&&(n+=" "+w+" ",w=""),M.type&&(n+=" } ",x&&x===M.type&&!O))n+=" else { ",d=t.schemaPath+".type",f=t.errSchemaPath+"/type",(q=q||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(f)+" , params: { type: '",n+=C?""+x.join(","):""+x,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=C?""+x.join(","):""+x,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",b=n,n=q.pop(),!t.compositeRule&&m?t.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ";m&&(n+=" if (errors === ",n+=g?"0":"errs_"+l,n+=") { ",S+="}")}}function Z(t){for(var e=t.rules,i=0;i<e.length;i++)if(X(e[i]))return!0}function X(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var i=e.implements,n=0;n<i.length;n++)if(void 0!==t.schema[i[n]])return!0}(e)}return m&&(n+=" "+S+" "),g?(r?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+p+" = errors === errs_"+l+";",n},Ok=nk,Mk=PT,Tk=yk,kk=xk,Ik=Ck,Ak=Mk.ucs2length,jk=DT,Fk=Tk.Validation;function Dk(t,e,i){var n=Lk.call(this,t,e,i);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:i},{index:n,compiling:!1})}function Pk(t,e,i){var n=Lk.call(this,t,e,i);n>=0&&this._compilations.splice(n,1)}function Lk(t,e,i){for(var n=0;n<this._compilations.length;n++){var r=this._compilations[n];if(r.schema==t&&r.root==e&&r.baseId==i)return n}return-1}function Ek(t,e){return"var pattern"+t+" = new RegExp("+Mk.toQuotedString(e[t])+");"}function Nk(t){return"var default"+t+" = defaults["+t+"];"}function Rk(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function Bk(t){return"var customRule"+t+" = customRules["+t+"];"}function _k(t,e){if(!t.length)return"";for(var i="",n=0;n<t.length;n++)i+=e(n,t);return i}var zk={exports:{}},Vk=zk.exports=function(){this._cache={}};Vk.prototype.put=function(t,e){this._cache[t]=e},Vk.prototype.get=function(t){return this._cache[t]},Vk.prototype.del=function(t){delete this._cache[t]},Vk.prototype.clear=function(){this._cache={}};var Gk=PT,$k=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Wk=[0,31,28,31,30,31,30,31,31,30,31,30,31],qk=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Hk=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Uk=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Kk=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Jk=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Yk=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Zk=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Xk=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Qk=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,tI=eI;function eI(t){return t="full"==t?"full":"fast",Gk.copy(eI[t])}function iI(t){var e=t.match($k);if(!e)return!1;var i=+e[1],n=+e[2],r=+e[3];return n>=1&&n<=12&&r>=1&&r<=(2==n&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(i)?29:Wk[n])}function nI(t,e){var i=t.match(qk);if(!i)return!1;var n=i[1],r=i[2],s=i[3],a=i[5];return(n<=23&&r<=59&&s<=59||23==n&&59==r&&60==s)&&(!e||a)}eI.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Kk,url:Jk,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Hk,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:oI,uuid:Yk,"json-pointer":Zk,"json-pointer-uri-fragment":Xk,"relative-json-pointer":Qk},eI.full={date:iI,time:nI,"date-time":function(t){var e=t.split(rI);return 2==e.length&&iI(e[0])&&nI(e[1],!0)},uri:function(t){return sI.test(t)&&Uk.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":Kk,url:Jk,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Hk,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:oI,uuid:Yk,"json-pointer":Zk,"json-pointer-uri-fragment":Xk,"relative-json-pointer":Qk};var rI=/t|\s/i,sI=/\/|:/,aI=/[^\\]\\Z/;function oI(t){if(aI.test(t))return!1;try{return!0}catch(t){return!1}}var uI=function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o;var f="maximum"==e,m=f?"exclusiveMaximum":"exclusiveMinimum",v=t.schema[m],p=t.opts.$data&&v&&v.$data,b=f?"<":">",g=f?">":"<",y=void 0;if(!d&&"number"!=typeof o&&void 0!==o)throw new Error(e+" must be number");if(!p&&void 0!==v&&"number"!=typeof v&&"boolean"!=typeof v)throw new Error(m+" must be number or boolean");if(p){var w,S=t.util.getData(v.$data,a,t.dataPathArr),x="exclusive"+s,C="exclType"+s,O="exclIsNumber"+s,M="' + "+(k="op"+s)+" + '";r+=" var schemaExcl"+s+" = "+S+"; ",r+=" var "+x+"; var "+C+" = typeof "+(S="schemaExcl"+s)+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ",y=m,(w=w||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: '"+m+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;r=w.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+C+" == 'number' ? ( ("+x+" = "+n+" === undefined || "+S+" "+b+"= "+n+") ? "+c+" "+g+"= "+S+" : "+c+" "+g+" "+n+" ) : ( ("+x+" = "+S+" === true) ? "+c+" "+g+"= "+n+" : "+c+" "+g+" "+n+" ) || "+c+" !== "+c+") { var op"+s+" = "+x+" ? '"+b+"' : '"+b+"='; ",void 0===o&&(y=m,l=t.errSchemaPath+"/"+m,n=S,d=p)}else if(M=b,(O="number"==typeof v)&&d){var k="'"+M+"'";r+=" if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" ( "+n+" === undefined || "+v+" "+b+"= "+n+" ? "+c+" "+g+"= "+v+" : "+c+" "+g+" "+n+" ) || "+c+" !== "+c+") { "}else O&&void 0===o?(x=!0,y=m,l=t.errSchemaPath+"/"+m,n=v,g+="="):(O&&(n=Math[f?"min":"max"](v,o)),v===(!O||n)?(x=!0,y=m,l=t.errSchemaPath+"/"+m,g+="="):(x=!1,M+="=")),k="'"+M+"'",r+=" if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+c+" "+g+" "+n+" || "+c+" !== "+c+") { ";return y=y||e,(w=w||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { comparison: "+k+", limit: "+n+", exclusive: "+x+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be "+M+" ",r+=d?"' + "+n:n+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",T=r,r=w.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r},lI=function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;if(d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,!d&&"number"!=typeof o)throw new Error(e+" must be number");r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+c+".length "+("maxItems"==e?">":"<")+" "+n+") { ";var f=e,m=m||[];m.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxItems"==e?"more":"fewer",r+=" than ",r+=d?"' + "+n+" + '":""+o,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var v=r;return r=m.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},hI=function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;if(d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,!d&&"number"!=typeof o)throw new Error(e+" must be number");var f="maxLength"==e?">":"<";r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===t.opts.unicode?r+=" "+c+".length ":r+=" ucs2length("+c+") ",r+=" "+f+" "+n+") { ";var m=e,v=v||[];v.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be ",r+="maxLength"==e?"longer":"shorter",r+=" than ",r+=d?"' + "+n+" + '":""+o,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var p=r;return r=v.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},cI=function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;if(d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,!d&&"number"!=typeof o)throw new Error(e+" must be number");r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" Object.keys("+c+").length "+("maxProperties"==e?">":"<")+" "+n+") { ";var f=e,m=m||[];m.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxProperties"==e?"more":"fewer",r+=" than ",r+=d?"' + "+n+" + '":""+o,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var v=r;return r=m.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},dI={$ref:function(t,e,i){var n,r,s=" ",a=t.level,o=t.dataLevel,u=t.schema[e],l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(o||""),d="valid"+a;if("#"==u||"#/"==u)t.isRoot?(n=t.async,r="validate"):(n=!0===t.root.schema.$async,r="root.refVal[0]");else{var f=t.resolveRef(t.baseId,u,t.isRoot);if(void 0===f){var m=t.MissingRefError.message(t.baseId,u);if("fail"==t.opts.missingRefs){t.logger.error(m),(g=g||[]).push(s),s="",!1!==t.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { ref: '"+t.util.escapeQuotes(u)+"' } ",!1!==t.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(u)+"' "),t.opts.verbose&&(s+=" , schema: "+t.util.toQuotedString(u)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var v=s;s=g.pop(),!t.compositeRule&&h?t.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(s+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,u,m);t.logger.warn(m),h&&(s+=" if (true) { ")}}else if(f.inline){var p=t.util.copy(t);p.level++;var b="valid"+p.level;p.schema=f.schema,p.schemaPath="",p.errSchemaPath=u,s+=" "+t.validate(p).replace(/validate\.schema/g,f.code)+" ",h&&(s+=" if ("+b+") { ")}else n=!0===f.$async||t.async&&!1!==f.$async,r=f.code}if(r){var g;(g=g||[]).push(s),s="",t.opts.passContext?s+=" "+r+".call(this, ":s+=" "+r+"( ",s+=" "+c+", (dataPath || '')",'""'!=t.errorPath&&(s+=" + "+t.errorPath);var y=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?t.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=g.pop(),n){if(!t.async)throw new Error("async schema referenced by sync schema");h&&(s+=" var "+d+"; "),s+=" try { await "+y+"; ",h&&(s+=" "+d+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(s+=" "+d+" = false; "),s+=" } ",h&&(s+=" if ("+d+") { ")}else s+=" if (!"+y+") { if (vErrors === null) vErrors = "+r+".errors; else vErrors = vErrors.concat("+r+".errors); errors = vErrors.length; } ",h&&(s+=" else { ")}return s},allOf:function(t,e,i){var n=" ",r=t.schema[e],s=t.schemaPath+t.util.getProperty(e),a=t.errSchemaPath+"/"+e,o=!t.opts.allErrors,u=t.util.copy(t),l="";u.level++;var h="valid"+u.level,c=u.baseId,d=!0,f=r;if(f)for(var m,v=-1,p=f.length-1;v<p;)m=f[v+=1],(t.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:t.util.schemaHasRules(m,t.RULES.all))&&(d=!1,u.schema=m,u.schemaPath=s+"["+v+"]",u.errSchemaPath=a+"/"+v,n+="  "+t.validate(u)+" ",u.baseId=c,o&&(n+=" if ("+h+") { ",l+="}"));return o&&(n+=d?" if (true) { ":" "+l.slice(0,-1)+" "),n},anyOf:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d="errs__"+r,f=t.util.copy(t),m="";f.level++;var v="valid"+f.level,p=a.every((function(e){return t.opts.strictKeywords?"object"==typeof e&&Object.keys(e).length>0||!1===e:t.util.schemaHasRules(e,t.RULES.all)}));if(p){var b=f.baseId;n+=" var "+d+" = errors; var "+c+" = false;  ";var g=t.compositeRule;t.compositeRule=f.compositeRule=!0;var y=a;if(y)for(var w,S=-1,x=y.length-1;S<x;)w=y[S+=1],f.schema=w,f.schemaPath=o+"["+S+"]",f.errSchemaPath=u+"/"+S,n+="  "+t.validate(f)+" ",f.baseId=b,n+=" "+c+" = "+c+" || "+v+"; if (!"+c+") { ",m+="}";t.compositeRule=f.compositeRule=g,n+=" "+m+" if (!"+c+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n},$comment:function(t,e,i){var n=" ",r=t.schema[e],s=t.errSchemaPath+"/"+e;var a=t.util.toQuotedString(r);return!0===t.opts.$comment?n+=" console.log("+a+");":"function"==typeof t.opts.$comment&&(n+=" self._opts.$comment("+a+", "+t.util.toQuotedString(s)+", validate.root.schema);"),n},const:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; "),d||(n+=" var schema"+r+" = validate.schema"+o+";"),n+="var "+c+" = equal("+h+", schema"+r+"); if (!"+c+") {   ";var f=f||[];f.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValue: schema"+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n},contains:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d="errs__"+r,f=t.util.copy(t);f.level++;var m="valid"+f.level,v="i"+r,p=f.dataLevel=t.dataLevel+1,b="data"+p,g=t.baseId,y=t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:t.util.schemaHasRules(a,t.RULES.all);if(n+="var "+d+" = errors;var "+c+";",y){var w=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+=" var "+m+" = false; for (var "+v+" = 0; "+v+" < "+h+".length; "+v+"++) { ",f.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var S=h+"["+v+"]";f.dataPathArr[p]=v;var x=t.validate(f);f.baseId=g,t.util.varOccurences(x,b)<2?n+=" "+t.util.varReplace(x,b,S)+" ":n+=" var "+b+" = "+S+"; "+x+" ",n+=" if ("+m+") break; }  ",t.compositeRule=f.compositeRule=w,n+="  if (!"+m+") {"}else n+=" if ("+h+".length == 0) {";var C=C||[];C.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should contain a valid item' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var O=n;return n=C.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",y&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),t.opts.allErrors&&(n+=" } "),n},dependencies:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="errs__"+r,d=t.util.copy(t),f="";d.level++;var m="valid"+d.level,v={},p={},b=t.opts.ownProperties;for(S in a)if("__proto__"!=S){var g=a[S],y=Array.isArray(g)?p:v;y[S]=g}n+="var "+c+" = errors;";var w=t.errorPath;for(var S in n+="var missing"+r+";",p)if((y=p[S]).length){if(n+=" if ( "+h+t.util.getProperty(S)+" !== undefined ",b&&(n+=" && Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(S)+"') "),l){n+=" && ( ";var x=y;if(x)for(var C=-1,O=x.length-1;C<O;)j=x[C+=1],C&&(n+=" || "),n+=" ( ( "+(L=h+(P=t.util.getProperty(j)))+" === undefined ",b&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(j)+"') "),n+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?j:P)+") ) ";n+=")) {  ";var M="missing"+r,T="' + "+M+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(w,M,!0):w+" + "+M);var k=k||[];k.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+T+"', depsCount: "+y.length+", deps: '"+t.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+t.util.escapeQuotes(y[0]):n+="properties "+t.util.escapeQuotes(y.join(", ")),n+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var I=n;n=k.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+I+"]); ":n+=" validate.errors = ["+I+"]; return false; ":n+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var A=y;if(A)for(var j,F=-1,D=A.length-1;F<D;){j=A[F+=1];var P=t.util.getProperty(j),L=(T=t.util.escapeQuotes(j),h+P);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(w,j,t.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",b&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(j)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+T+"', depsCount: "+y.length+", deps: '"+t.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+t.util.escapeQuotes(y[0]):n+="properties "+t.util.escapeQuotes(y.join(", ")),n+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(f+="}",n+=" else { ")}t.errorPath=w;var E=d.baseId;for(var S in v)g=v[S],(t.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:t.util.schemaHasRules(g,t.RULES.all))&&(n+=" "+m+" = true; if ( "+h+t.util.getProperty(S)+" !== undefined ",b&&(n+=" && Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(S)+"') "),n+=") { ",d.schema=g,d.schemaPath=o+t.util.getProperty(S),d.errSchemaPath=u+"/"+t.util.escapeFragment(S),n+="  "+t.validate(d)+" ",d.baseId=E,n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}"));return l&&(n+="   "+f+" if ("+c+" == errors) {"),n},enum:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ");var f="i"+r,m="schema"+r;d||(n+=" var "+m+" = validate.schema"+o+";"),n+="var "+c+";",d&&(n+=" if (schema"+r+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+r+")) "+c+" = false; else {"),n+=c+" = false;for (var "+f+"=0; "+f+"<"+m+".length; "+f+"++) if (equal("+h+", "+m+"["+f+"])) { "+c+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+c+") {   ";var v=v||[];v.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValues: schema"+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var p=n;return n=v.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n},format:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||"");if(!1===t.opts.format)return l&&(n+=" if (true) { "),n;var c,d=t.opts.$data&&a&&a.$data;d?(n+=" var schema"+r+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",c="schema"+r):c=a;var f=t.opts.unknownFormats,m=Array.isArray(f);if(d)n+=" var "+(v="format"+r)+" = formats["+c+"]; var "+(p="isObject"+r)+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+(b="formatType"+r)+" = "+p+" && "+v+".type || 'string'; if ("+p+") { ",t.async&&(n+=" var async"+r+" = "+v+".async; "),n+=" "+v+" = "+v+".validate; } if (  ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),n+=" (","ignore"!=f&&(n+=" ("+c+" && !"+v+" ",m&&(n+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),n+=") || "),n+=" ("+v+" && "+b+" == '"+i+"' && !(typeof "+v+" == 'function' ? ",t.async?n+=" (async"+r+" ? await "+v+"("+h+") : "+v+"("+h+")) ":n+=" "+v+"("+h+") ",n+=" : "+v+".test("+h+"))))) {";else{var v;if(!(v=t.formats[a])){if("ignore"==f)return t.logger.warn('unknown format "'+a+'" ignored in schema at path "'+t.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(m&&f.indexOf(a)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+a+'" is used in schema at path "'+t.errSchemaPath+'"')}var p,b=(p="object"==typeof v&&!(v instanceof RegExp)&&v.validate)&&v.type||"string";if(p){var g=!0===v.async;v=v.validate}if(b!=i)return l&&(n+=" if (true) { "),n;if(g){if(!t.async)throw new Error("async format in sync schema");n+=" if (!(await "+(y="formats"+t.util.getProperty(a)+".validate")+"("+h+"))) { "}else{n+=" if (! ";var y="formats"+t.util.getProperty(a);p&&(y+=".validate"),n+="function"==typeof v?" "+y+"("+h+") ":" "+y+".test("+h+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { format:  ",n+=d?""+c:""+t.util.toQuotedString(a),n+="  } ",!1!==t.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+c+" + '":""+t.util.escapeQuotes(a),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+o:""+t.util.toQuotedString(a),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var S=n;return n=w.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n},if:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d="errs__"+r,f=t.util.copy(t);f.level++;var m="valid"+f.level,v=t.schema.then,p=t.schema.else,b=void 0!==v&&(t.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:t.util.schemaHasRules(v,t.RULES.all)),g=void 0!==p&&(t.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:t.util.schemaHasRules(p,t.RULES.all)),y=f.baseId;if(b||g){var w;f.createErrors=!1,f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+=" var "+d+" = errors; var "+c+" = true;  ";var S=t.compositeRule;t.compositeRule=f.compositeRule=!0,n+="  "+t.validate(f)+" ",f.baseId=y,f.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",t.compositeRule=f.compositeRule=S,b?(n+=" if ("+m+") {  ",f.schema=t.schema.then,f.schemaPath=t.schemaPath+".then",f.errSchemaPath=t.errSchemaPath+"/then",n+="  "+t.validate(f)+" ",f.baseId=y,n+=" "+c+" = "+m+"; ",b&&g?n+=" var "+(w="ifClause"+r)+" = 'then'; ":w="'then'",n+=" } ",g&&(n+=" else { ")):n+=" if (!"+m+") { ",g&&(f.schema=t.schema.else,f.schemaPath=t.schemaPath+".else",f.errSchemaPath=t.errSchemaPath+"/else",n+="  "+t.validate(f)+" ",f.baseId=y,n+=" "+c+" = "+m+"; ",b&&g?n+=" var "+(w="ifClause"+r)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+c+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { failingKeyword: "+w+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n},items:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d="errs__"+r,f=t.util.copy(t),m="";f.level++;var v="valid"+f.level,p="i"+r,b=f.dataLevel=t.dataLevel+1,g="data"+b,y=t.baseId;if(n+="var "+d+" = errors;var "+c+";",Array.isArray(a)){var w=t.schema.additionalItems;if(!1===w){n+=" "+c+" = "+h+".length <= "+a.length+"; ";var S=u;u=t.errSchemaPath+"/additionalItems",n+="  if (!"+c+") {   ";var x=x||[];x.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have more than "+a.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var C=n;n=x.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=S,l&&(m+="}",n+=" else { ")}var O=a;if(O)for(var M,T=-1,k=O.length-1;T<k;)if(M=O[T+=1],t.opts.strictKeywords?"object"==typeof M&&Object.keys(M).length>0||!1===M:t.util.schemaHasRules(M,t.RULES.all)){n+=" "+v+" = true; if ("+h+".length > "+T+") { ";var I=h+"["+T+"]";f.schema=M,f.schemaPath=o+"["+T+"]",f.errSchemaPath=u+"/"+T,f.errorPath=t.util.getPathExpr(t.errorPath,T,t.opts.jsonPointers,!0),f.dataPathArr[b]=T;var A=t.validate(f);f.baseId=y,t.util.varOccurences(A,g)<2?n+=" "+t.util.varReplace(A,g,I)+" ":n+=" var "+g+" = "+I+"; "+A+" ",n+=" }  ",l&&(n+=" if ("+v+") { ",m+="}")}"object"==typeof w&&(t.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:t.util.schemaHasRules(w,t.RULES.all))&&(f.schema=w,f.schemaPath=t.schemaPath+".additionalItems",f.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" "+v+" = true; if ("+h+".length > "+a.length+") {  for (var "+p+" = "+a.length+"; "+p+" < "+h+".length; "+p+"++) { ",f.errorPath=t.util.getPathExpr(t.errorPath,p,t.opts.jsonPointers,!0),I=h+"["+p+"]",f.dataPathArr[b]=p,A=t.validate(f),f.baseId=y,t.util.varOccurences(A,g)<2?n+=" "+t.util.varReplace(A,g,I)+" ":n+=" var "+g+" = "+I+"; "+A+" ",l&&(n+=" if (!"+v+") break; "),n+=" } }  ",l&&(n+=" if ("+v+") { ",m+="}"))}else(t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:t.util.schemaHasRules(a,t.RULES.all))&&(f.schema=a,f.schemaPath=o,f.errSchemaPath=u,n+="  for (var "+p+" = 0; "+p+" < "+h+".length; "+p+"++) { ",f.errorPath=t.util.getPathExpr(t.errorPath,p,t.opts.jsonPointers,!0),I=h+"["+p+"]",f.dataPathArr[b]=p,A=t.validate(f),f.baseId=y,t.util.varOccurences(A,g)<2?n+=" "+t.util.varReplace(A,g,I)+" ":n+=" var "+g+" = "+I+"; "+A+" ",l&&(n+=" if (!"+v+") break; "),n+=" }");return l&&(n+=" "+m+" if ("+d+" == errors) {"),n},maximum:uI,minimum:uI,maxItems:lI,minItems:lI,maxLength:hI,minLength:hI,maxProperties:cI,minProperties:cI,multipleOf:function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;if(d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,!d&&"number"!=typeof o)throw new Error(e+" must be number");r+="var division"+s+";if (",d&&(r+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),r+=" (division"+s+" = "+c+" / "+n+", ",t.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+t.opts.multipleOfPrecision+" ":r+=" division"+s+" !== parseInt(division"+s+") ",r+=" ) ",d&&(r+="  )  "),r+=" ) {   ";var f=f||[];f.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { multipleOf: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be multiple of ",r+=d?"' + "+n:n+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=f.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},not:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="errs__"+r,d=t.util.copy(t);d.level++;var f="valid"+d.level;if(t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:t.util.schemaHasRules(a,t.RULES.all)){d.schema=a,d.schemaPath=o,d.errSchemaPath=u,n+=" var "+c+" = errors;  ";var m,v=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(m=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+t.validate(d)+" ",d.createErrors=!0,m&&(d.opts.allErrors=m),t.compositeRule=d.compositeRule=v,n+=" if ("+f+") {   ";var p=p||[];p.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var b=n;n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n},oneOf:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d="errs__"+r,f=t.util.copy(t),m="";f.level++;var v="valid"+f.level,p=f.baseId,b="prevValid"+r,g="passingSchemas"+r;n+="var "+d+" = errors , "+b+" = false , "+c+" = false , "+g+" = null; ";var y=t.compositeRule;t.compositeRule=f.compositeRule=!0;var w=a;if(w)for(var S,x=-1,C=w.length-1;x<C;)S=w[x+=1],(t.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:t.util.schemaHasRules(S,t.RULES.all))?(f.schema=S,f.schemaPath=o+"["+x+"]",f.errSchemaPath=u+"/"+x,n+="  "+t.validate(f)+" ",f.baseId=p):n+=" var "+v+" = true; ",x&&(n+=" if ("+v+" && "+b+") { "+c+" = false; "+g+" = ["+g+", "+x+"]; } else { ",m+="}"),n+=" if ("+v+") { "+c+" = "+b+" = true; "+g+" = "+x+"; }";return t.compositeRule=f.compositeRule=y,n+=m+"if (!"+c+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { passingSchemas: "+g+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n},pattern:function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d=t.opts.$data&&o&&o.$data;d?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),r+=" !"+(d?"(new RegExp("+n+"))":t.usePattern(o))+".test("+c+") ) {   ";var f=f||[];f.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { pattern:  ",r+=d?""+n:""+t.util.toQuotedString(o),r+="  } ",!1!==t.opts.messages&&(r+=" , message: 'should match pattern \"",r+=d?"' + "+n+" + '":""+t.util.escapeQuotes(o),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+u:""+t.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;return r=f.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},properties:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="errs__"+r,d=t.util.copy(t),f="";d.level++;var m="valid"+d.level,v="key"+r,p="idx"+r,b=d.dataLevel=t.dataLevel+1,g="data"+b,y="dataProperties"+r,w=Object.keys(a||{}).filter(P),S=t.schema.patternProperties||{},x=Object.keys(S).filter(P),C=t.schema.additionalProperties,O=w.length||x.length,M=!1===C,T="object"==typeof C&&Object.keys(C).length,k=t.opts.removeAdditional,I=M||T||k,A=t.opts.ownProperties,j=t.baseId,F=t.schema.required;if(F&&(!t.opts.$data||!F.$data)&&F.length<t.opts.loopRequired)var D=t.util.toHash(F);function P(t){return"__proto__"!==t}if(n+="var "+c+" = errors;var "+m+" = true;",A&&(n+=" var "+y+" = undefined;"),I){if(n+=A?" "+y+" = "+y+" || Object.keys("+h+"); for (var "+p+"=0; "+p+"<"+y+".length; "+p+"++) { var "+v+" = "+y+"["+p+"]; ":" for (var "+v+" in "+h+") { ",O){if(n+=" var isAdditional"+r+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+o+".hasOwnProperty("+v+") ";else{var L=w;if(L)for(var E=-1,N=L.length-1;E<N;)J=L[E+=1],n+=" || "+v+" == "+t.util.toQuotedString(J)+" "}if(x.length){var R=x;if(R)for(var B=-1,_=R.length-1;B<_;)st=R[B+=1],n+=" || "+t.usePattern(st)+".test("+v+") "}n+=" ); if (isAdditional"+r+") { "}if("all"==k)n+=" delete "+h+"["+v+"]; ";else{var z=t.errorPath,V="' + "+v+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers)),M)if(k)n+=" delete "+h+"["+v+"]; ";else{n+=" "+m+" = false; ";var G=u;u=t.errSchemaPath+"/additionalProperties",(it=it||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { additionalProperty: '"+V+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var $=n;n=it.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+$+"]); ":n+=" validate.errors = ["+$+"]; return false; ":n+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=G,l&&(n+=" break; ")}else if(T)if("failing"==k){n+=" var "+c+" = errors;  ";var W=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=C,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers);var q=h+"["+v+"]";d.dataPathArr[b]=v;var H=t.validate(d);d.baseId=j,t.util.varOccurences(H,g)<2?n+=" "+t.util.varReplace(H,g,q)+" ":n+=" var "+g+" = "+q+"; "+H+" ",n+=" if (!"+m+") { errors = "+c+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+h+"["+v+"]; }  ",t.compositeRule=d.compositeRule=W}else d.schema=C,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers),q=h+"["+v+"]",d.dataPathArr[b]=v,H=t.validate(d),d.baseId=j,t.util.varOccurences(H,g)<2?n+=" "+t.util.varReplace(H,g,q)+" ":n+=" var "+g+" = "+q+"; "+H+" ",l&&(n+=" if (!"+m+") break; ");t.errorPath=z}O&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}")}var U=t.opts.useDefaults&&!t.compositeRule;if(w.length){var K=w;if(K)for(var J,Y=-1,Z=K.length-1;Y<Z;){var X=a[J=K[Y+=1]];if(t.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:t.util.schemaHasRules(X,t.RULES.all)){var Q=t.util.getProperty(J),tt=(q=h+Q,U&&void 0!==X.default);if(d.schema=X,d.schemaPath=o+Q,d.errSchemaPath=u+"/"+t.util.escapeFragment(J),d.errorPath=t.util.getPath(t.errorPath,J,t.opts.jsonPointers),d.dataPathArr[b]=t.util.toQuotedString(J),H=t.validate(d),d.baseId=j,t.util.varOccurences(H,g)<2){H=t.util.varReplace(H,g,q);var et=q}else et=g,n+=" var "+g+" = "+q+"; ";if(tt)n+=" "+H+" ";else{if(D&&D[J]){n+=" if ( "+et+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(J)+"') "),n+=") { "+m+" = false; ",z=t.errorPath,G=u;var it,nt=t.util.escapeQuotes(J);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(z,J,t.opts.jsonPointers)),u=t.errSchemaPath+"/required",(it=it||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+nt+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+nt+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",$=n,n=it.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+$+"]); ":n+=" validate.errors = ["+$+"]; return false; ":n+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=G,t.errorPath=z,n+=" } else { "}else l?(n+=" if ( "+et+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(J)+"') "),n+=") { "+m+" = true; } else { "):(n+=" if ("+et+" !== undefined ",A&&(n+=" &&   Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(J)+"') "),n+=" ) { ");n+=" "+H+" } "}}l&&(n+=" if ("+m+") { ",f+="}")}}if(x.length){var rt=x;if(rt)for(var st,at=-1,ot=rt.length-1;at<ot;)X=S[st=rt[at+=1]],(t.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:t.util.schemaHasRules(X,t.RULES.all))&&(d.schema=X,d.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(st),d.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(st),n+=A?" "+y+" = "+y+" || Object.keys("+h+"); for (var "+p+"=0; "+p+"<"+y+".length; "+p+"++) { var "+v+" = "+y+"["+p+"]; ":" for (var "+v+" in "+h+") { ",n+=" if ("+t.usePattern(st)+".test("+v+")) { ",d.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers),q=h+"["+v+"]",d.dataPathArr[b]=v,H=t.validate(d),d.baseId=j,t.util.varOccurences(H,g)<2?n+=" "+t.util.varReplace(H,g,q)+" ":n+=" var "+g+" = "+q+"; "+H+" ",l&&(n+=" if (!"+m+") break; "),n+=" } ",l&&(n+=" else "+m+" = true; "),n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}"))}return l&&(n+=" "+f+" if ("+c+" == errors) {"),n},propertyNames:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="errs__"+r,d=t.util.copy(t);d.level++;var f="valid"+d.level;if(n+="var "+c+" = errors;",t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:t.util.schemaHasRules(a,t.RULES.all)){d.schema=a,d.schemaPath=o,d.errSchemaPath=u;var m="key"+r,v="idx"+r,p="i"+r,b="' + "+m+" + '",g="data"+(d.dataLevel=t.dataLevel+1),y="dataProperties"+r,w=t.opts.ownProperties,S=t.baseId;w&&(n+=" var "+y+" = undefined; "),n+=w?" "+y+" = "+y+" || Object.keys("+h+"); for (var "+v+"=0; "+v+"<"+y+".length; "+v+"++) { var "+m+" = "+y+"["+v+"]; ":" for (var "+m+" in "+h+") { ",n+=" var startErrs"+r+" = errors; ";var x=m,C=t.compositeRule;t.compositeRule=d.compositeRule=!0;var O=t.validate(d);d.baseId=S,t.util.varOccurences(O,g)<2?n+=" "+t.util.varReplace(O,g,x)+" ":n+=" var "+g+" = "+x+"; "+O+" ",t.compositeRule=d.compositeRule=C,n+=" if (!"+f+") { for (var "+p+"=startErrs"+r+"; "+p+"<errors; "+p+"++) { vErrors["+p+"].propertyName = "+m+"; }   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { propertyName: '"+b+"' } ",!1!==t.opts.messages&&(n+=" , message: 'property name \\'"+b+"\\' is invalid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+="  if ("+c+" == errors) {"),n},required:function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,a=t.schema[e],o=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,h="data"+(s||""),c="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ");var f="schema"+r;if(!d)if(a.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var m=[],v=a;if(v)for(var p,b=-1,g=v.length-1;b<g;){p=v[b+=1];var y=t.schema.properties[p];y&&(t.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:t.util.schemaHasRules(y,t.RULES.all))||(m[m.length]=p)}}else m=a;if(d||m.length){var w=t.errorPath,S=d||m.length>=t.opts.loopRequired,x=t.opts.ownProperties;if(l)if(n+=" var missing"+r+"; ",S){d||(n+=" var "+f+" = validate.schema"+o+"; ");var C="' + "+(A="schema"+r+"["+(k="i"+r)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(w,A,t.opts.jsonPointers)),n+=" var "+c+" = true; ",d&&(n+=" if (schema"+r+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+r+")) "+c+" = false; else {"),n+=" for (var "+k+" = 0; "+k+" < "+f+".length; "+k+"++) { "+c+" = "+h+"["+f+"["+k+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+h+", "+f+"["+k+"]) "),n+="; if (!"+c+") break; } ",d&&(n+="  }  "),n+="  if (!"+c+") {   ",(M=M||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ";var O=n;n=M.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var M,T=m;if(T)for(var k=-1,I=T.length-1;k<I;)F=T[k+=1],k&&(n+=" || "),n+=" ( ( "+(E=h+(L=t.util.getProperty(F)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(F)+"') "),n+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?F:L)+") ) ";n+=") {  ",C="' + "+(A="missing"+r)+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(w,A,!0):w+" + "+A),(M=M||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",O=n,n=M.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(S){var A;d||(n+=" var "+f+" = validate.schema"+o+"; "),C="' + "+(A="schema"+r+"["+(k="i"+r)+"]")+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(w,A,t.opts.jsonPointers)),d&&(n+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),n+=" for (var "+k+" = 0; "+k+" < "+f+".length; "+k+"++) { if ("+h+"["+f+"["+k+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", "+f+"["+k+"]) "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var j=m;if(j)for(var F,D=-1,P=j.length-1;D<P;){F=j[D+=1];var L=t.util.getProperty(F),E=(C=t.util.escapeQuotes(F),h+L);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(w,F,t.opts.jsonPointers)),n+=" if ( "+E+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+t.util.escapeQuotes(F)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=w}else l&&(n+=" if (true) {");return n},uniqueItems:function(t,e,i){var n,r=" ",s=t.level,a=t.dataLevel,o=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,c="data"+(a||""),d="valid"+s,f=t.opts.$data&&o&&o.$data;if(f?(r+=" var schema"+s+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=o,(o||f)&&!1!==t.opts.uniqueItems){f&&(r+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),r+=" var i = "+c+".length , "+d+" = true , j; if (i > 1) { ";var m=t.schema.items&&t.schema.items.type,v=Array.isArray(m);if(!m||"object"==m||"array"==m||v&&(m.indexOf("object")>=0||m.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+d+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+c+"[i]; ";var p="checkDataType"+(v?"s":"");r+=" if ("+t.util[p](m,"item",t.opts.strictNumbers,!0)+") continue; ",v&&(r+=" if (typeof item == 'string') item = '\"' + item; "),r+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",f&&(r+="  }  "),r+=" if (!"+d+") {   ";var b=b||[];b.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",r+=f?"validate.schema"+u:""+o,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var g=r;r=b.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r},validate:Ck},fI=dI,mI=PT.toHash,vI=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],pI=yk.MissingRef,bI={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},gI=bI,yI={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:gI.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:gI.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},wI=/^[a-z_$][a-z0-9_$-]*$/i,SI=function(t,e,i){var n,r,s=" ",a=t.level,o=t.dataLevel,u=t.schema[e],l=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,d="data"+(o||""),f="valid"+a,m="errs__"+a,v=t.opts.$data&&u&&u.$data;v?(s+=" var schema"+a+" = "+t.util.getData(u.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=u;var p,b,g,y,w,S=this,x="definition"+a,C=S.definition,O="";if(v&&C.$data){w="keywordValidate"+a;var M=C.validateSchema;s+=" var "+x+" = RULES.custom['"+e+"'].definition; var "+w+" = "+x+".validate;"}else{if(!(y=t.useCustomRule(S,u,t.schema,t)))return;r="validate.schema"+l,w=y.code,p=C.compile,b=C.inline,g=C.macro}var T=w+".errors",k="i"+a,I="ruleErr"+a,A=C.async;if(A&&!t.async)throw new Error("async keyword in sync schema");if(b||g||(s+=T+" = null;"),s+="var "+m+" = errors;var "+f+";",v&&C.$data&&(O+="}",s+=" if ("+r+" === undefined) { "+f+" = true; } else { ",M&&(O+="}",s+=" "+f+" = "+x+".validateSchema("+r+"); if ("+f+") { ")),b)C.statements?s+=" "+y.validate+" ":s+=" "+f+" = "+y.validate+"; ";else if(g){var j=t.util.copy(t);O="",j.level++;var F="valid"+j.level;j.schema=y.validate,j.schemaPath="";var D=t.compositeRule;t.compositeRule=j.compositeRule=!0;var P=t.validate(j).replace(/validate\.schema/g,w);t.compositeRule=j.compositeRule=D,s+=" "+P}else{(R=R||[]).push(s),s="",s+="  "+w+".call( ",t.opts.passContext?s+="this":s+="self",p||!1===C.schema?s+=" , "+d+" ":s+=" , "+r+" , "+d+" , validate.schema"+t.schemaPath+" ",s+=" , (dataPath || '')",'""'!=t.errorPath&&(s+=" + "+t.errorPath);var L=o?"data"+(o-1||""):"parentData",E=o?t.dataPathArr[o]:"parentDataProperty",N=s+=" , "+L+" , "+E+" , rootData )  ";s=R.pop(),!1===C.errors?(s+=" "+f+" = ",A&&(s+="await "),s+=N+"; "):s+=A?" var "+(T="customErrors"+a)+" = null; try { "+f+" = await "+N+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+T+" = e.errors; else throw e; } ":" "+T+" = null; "+f+" = "+N+"; "}if(C.modifying&&(s+=" if ("+L+") "+d+" = "+L+"["+E+"];"),s+=""+O,C.valid)c&&(s+=" if (true) { ");else{var R;s+=" if ( ",void 0===C.valid?(s+=" !",s+=g?""+F:""+f):s+=" "+!C.valid+" ",s+=") { ",n=S.keyword,(R=R||[]).push(s),s="",(R=R||[]).push(s),s="",!1!==t.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { keyword: '"+S.keyword+"' } ",!1!==t.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),t.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var B=s;s=R.pop(),!t.compositeRule&&c?t.async?s+=" throw new ValidationError(["+B+"]); ":s+=" validate.errors = ["+B+"]; return false; ":s+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var _=s;s=R.pop(),b?C.errors?"full"!=C.errors&&(s+="  for (var "+k+"="+m+"; "+k+"<errors; "+k+"++) { var "+I+" = vErrors["+k+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+h+'"; } ',t.opts.verbose&&(s+=" "+I+".schema = "+r+"; "+I+".data = "+d+"; "),s+=" } "):!1===C.errors?s+=" "+_+" ":(s+=" if ("+m+" == errors) { "+_+" } else {  for (var "+k+"="+m+"; "+k+"<errors; "+k+"++) { var "+I+" = vErrors["+k+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+h+'"; } ',t.opts.verbose&&(s+=" "+I+".schema = "+r+"; "+I+".data = "+d+"; "),s+=" } } "):g?(s+="   var err =   ",!1!==t.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { keyword: '"+S.keyword+"' } ",!1!==t.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),t.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===C.errors?s+=" "+_+" ":(s+=" if (Array.isArray("+T+")) { if (vErrors === null) vErrors = "+T+"; else vErrors = vErrors.concat("+T+"); errors = vErrors.length;  for (var "+k+"="+m+"; "+k+"<errors; "+k+"++) { var "+I+" = vErrors["+k+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+";  "+I+'.schemaPath = "'+h+'";  ',t.opts.verbose&&(s+=" "+I+".schema = "+r+"; "+I+".data = "+d+"; "),s+=" } } else { "+_+" } "),s+=" } ",c&&(s+=" else { ")}return s},xI=yI,CI={add:function(t,e){var i=this.RULES;if(i.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!wI.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var r=0;r<n.length;r++)a(t,n[r],e);else a(t,n,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}function a(t,e,n){for(var r,s=0;s<i.length;s++){var a=i[s];if(a.type==e){r=a;break}}r||(r={type:e,rules:[]},i.push(r));var o={keyword:t,definition:n,custom:!0,code:SI,implements:n.implements};r.rules.push(o),i.custom[t]=o}return i.keywords[t]=i.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var i=0;i<e.length;i++)for(var n=e[i].rules,r=0;r<n.length;r++)if(n[r].keyword==t){n.splice(r,1);break}return this},validate:function t(e,i){t.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(xI,!0);if(n(e))return!0;if(t.errors=n.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}},OI={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},MI=function t(e,i,n,r){var s=this,a=this._opts,o=[void 0],u={},l=[],h={},c=[],d={},f=[];i=i||{schema:e,refVal:o,refs:u};var m=Dk.call(this,e,i,r),v=this._compilations[m.index];if(m.compiling)return v.callValidate=function t(){var e=v.validate,i=e.apply(this,arguments);return t.errors=e.errors,i};var p=this._formats,b=this.RULES;try{var g=w(e,i,n,r);v.validate=g;var y=v.callValidate;return y&&(y.schema=g.schema,y.errors=null,y.refs=g.refs,y.refVal=g.refVal,y.root=g.root,y.$async=g.$async,a.sourceCode&&(y.source=g.source)),g}finally{Pk.call(this,e,i,r)}function w(e,n,r,h){var d=!n||n&&n.schema==e;if(n.schema!=i.schema)return t.call(s,e,n,r,h);var m,v=!0===e.$async,g=Ik({isTop:!0,schema:e,isRoot:d,baseId:h,root:n,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Tk.MissingRef,RULES:b,validate:Ik,util:Mk,resolve:Ok,resolveRef:S,usePattern:O,useDefault:M,useCustomRule:T,opts:a,formats:p,logger:s.logger,self:s});g=_k(o,Rk)+_k(l,Ek)+_k(c,Nk)+_k(f,Bk)+g,a.processCode&&(g=a.processCode(g,e));try{m=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g)(s,b,p,i,o,c,f,jk,Ak,Fk),o[0]=m}catch(t){throw s.logger.error("Error compiling schema, function code:",g),t}return m.schema=e,m.errors=null,m.refs=u,m.refVal=o,m.root=d?m:n,v&&(m.$async=!0),!0===a.sourceCode&&(m.source={code:g,patterns:l,defaults:c}),m}function S(e,r,l){r=Ok.url(e,r);var h,c,d=u[r];if(void 0!==d)return C(h=o[d],c="refVal["+d+"]");if(!l&&i.refs){var f=i.refs[r];if(void 0!==f)return C(h=i.refVal[f],c=x(r,h))}c=x(r);var m=Ok.call(s,w,i,r);if(void 0===m){var v=n&&n[r];v&&(m=Ok.inlineRef(v,a.inlineRefs)?v:t.call(s,v,i,n,e))}if(void 0!==m)return function(t,e){var i=u[t];o[i]=e}(r,m),C(m,c);!function(t){delete u[t]}(r)}function x(t,e){var i=o.length;return o[i]=e,u[t]=i,"refVal"+i}function C(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function O(t){var e=h[t];return void 0===e&&(e=h[t]=l.length,l[e]=t),"pattern"+e}function M(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return Mk.toQuotedString(t);case"object":if(null===t)return"null";var e=kk(t),i=d[e];return void 0===i&&(i=d[e]=c.length,c[i]=t),"default"+i}}function T(t,e,i,n){if(!1!==s._opts.validateSchema){var r=t.definition.dependencies;if(r&&!r.every((function(t){return Object.prototype.hasOwnProperty.call(i,t)})))throw new Error("parent schema must have all required keywords: "+r.join(","));var o=t.definition.validateSchema;if(o&&!o(e)){var u="keyword schema is invalid: "+s.errorsText(o.errors);if("log"!=s._opts.validateSchema)throw new Error(u);s.logger.error(u)}}var l,h=t.definition.compile,c=t.definition.inline,d=t.definition.macro;if(h)l=h.call(s,e,i,n);else if(d)l=d.call(s,e,i,n),!1!==a.validateSchema&&s.validateSchema(l,!0);else if(c)l=c.call(s,n,t.keyword,e,i);else if(!(l=t.definition.validate))return;if(void 0===l)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var m=f.length;return f[m]=l,{code:"customRule"+m,validate:l}}},TI=nk,kI=zk.exports,II=KT,AI=xk,jI=tI,FI=function(t,e){for(var i=0;i<e.length;i++){t=JSON.parse(JSON.stringify(t));var n,r=e[i].split("/"),s=t;for(n=1;n<r.length;n++)s=s[r[n]];for(n=0;n<vI.length;n++){var a=vI[n],o=s[a];o&&(s[a]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t},DI=PT,PI=_I;_I.prototype.validate=function(t,e){var i;if("string"==typeof t){if(!(i=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);i=n.validate||this._compile(n)}var r=i(e);return!0!==i.$async&&(this.errors=i.errors),r},_I.prototype.compile=function(t,e){var i=this._addSchema(t,void 0,e);return i.validate||this._compile(i)},_I.prototype.addSchema=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.addSchema(t[r],void 0,i,n);return this}var s=this._getId(t);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return qI(this,e=TI.normalizeId(e||s)),this._schemas[e]=this._addSchema(t,i,n,!0),this},_I.prototype.addMetaSchema=function(t,e,i){return this.addSchema(t,e,i,!0),this},_I.prototype.validateSchema=function(t,e){var i=t.$schema;if(void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(!(i=i||this._opts.defaultMeta||function(t){var e=t._opts.meta;return t._opts.defaultMeta="object"==typeof e?t._getId(e)||e:t.getSchema(NI)?NI:void 0,t._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(i,t);if(!n&&e){var r="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(r);this.logger.error(r)}return n},_I.prototype.getSchema=function(t){var e=zI(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var i=TI.schema.call(t,{schema:{}},e);if(i){var n=i.schema,r=i.root,s=i.baseId,a=MI.call(t,n,r,void 0,s);return t._fragments[e]=new II({ref:e,fragment:!0,schema:n,root:r,baseId:s,validate:a}),a}}(this,t)}},_I.prototype.removeSchema=function(t){if(t instanceof RegExp)return VI(this,this._schemas,t),VI(this,this._refs,t),this;switch(typeof t){case"undefined":return VI(this,this._schemas),VI(this,this._refs),this._cache.clear(),this;case"string":var e=zI(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var i=this._opts.serialize,n=i?i(t):t;this._cache.del(n);var r=this._getId(t);r&&(r=TI.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this},_I.prototype.addFormat=function(t,e){return"string"==typeof e&&(e=new RegExp(e)),this._formats[t]=e,this},_I.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var i=void 0===(e=e||{}).separator?", ":e.separator,n=void 0===e.dataVar?"data":e.dataVar,r="",s=0;s<t.length;s++){var a=t[s];a&&(r+=n+a.dataPath+" "+a.message+i)}return r.slice(0,-i.length)},_I.prototype._addSchema=function(t,e,i,n){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(t):t,a=this._cache.get(s);if(a)return a;n=n||!1!==this._opts.addUsedSchema;var o=TI.normalizeId(this._getId(t));o&&n&&qI(this,o);var u,l=!1!==this._opts.validateSchema&&!e;l&&!(u=o&&o==TI.normalizeId(t.$schema))&&this.validateSchema(t,!0);var h=TI.ids.call(this,t),c=new II({id:o,schema:t,localRefs:h,cacheKey:s,meta:i});return"#"!=o[0]&&n&&(this._refs[o]=c),this._cache.put(s,c),l&&u&&this.validateSchema(t,!0),c},_I.prototype._compile=function(t,e){if(t.compiling)return t.validate=r,r.schema=t.schema,r.errors=null,r.root=e||r,!0===t.schema.$async&&(r.$async=!0),r;var i,n;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{n=MI.call(this,t.schema,e,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function r(){var e=t.validate,i=e.apply(this,arguments);return r.errors=e.errors,i}},_I.prototype.compileAsync=function t(e,i,n){var r=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(n=i,i=void 0);var s=a(e).then((function(){var t=r._addSchema(e,void 0,i);return t.validate||o(t)}));return n&&s.then((function(t){n(null,t)}),n),s;function a(e){var i=e.$schema;return i&&!r.getSchema(i)?t.call(r,{$ref:i},!0):Promise.resolve()}function o(t){try{return r._compile(t)}catch(e){if(e instanceof pI)return function(e){var n=e.missingSchema;if(l(n))throw new Error("Schema "+n+" is loaded but "+e.missingRef+" cannot be resolved");var s=r._loadingSchemas[n];return s||(s=r._loadingSchemas[n]=r._opts.loadSchema(n)).then(u,u),s.then((function(t){if(!l(n))return a(t).then((function(){l(n)||r.addSchema(t,n,void 0,i)}))})).then((function(){return o(t)}));function u(){delete r._loadingSchemas[n]}function l(t){return r._refs[t]||r._schemas[t]}}(e);throw e}}};var LI=CI;_I.prototype.addKeyword=LI.add,_I.prototype.getKeyword=LI.get,_I.prototype.removeKeyword=LI.remove,_I.prototype.validateKeyword=LI.validate;var EI=yk;_I.ValidationError=EI.Validation,_I.MissingRefError=EI.MissingRef,_I.$dataMetaSchema=FI;var NI="http://json-schema.org/draft-07/schema",RI=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],BI=["/properties"];function _I(t){if(!(this instanceof _I))return new _I(t);t=this._opts=DI.copy(t)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:HI,warn:HI,error:HI};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=jI(t.format),this._cache=t.cache||new kI,this._loadingSchemas={},this._compilations=[],this.RULES=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=mI(e),t.types=mI(["number","integer","string","array","object","boolean","null"]),t.forEach((function(i){i.rules=i.rules.map((function(i){var n;if("object"==typeof i){var r=Object.keys(i)[0];n=i[r],i=r,n.forEach((function(i){e.push(i),t.all[i]=!0}))}return e.push(i),t.all[i]={keyword:i,code:fI[i],implements:n}})),t.all.$comment={keyword:"$comment",code:fI.$comment},i.type&&(t.types[i.type]=i)})),t.keywords=mI(e.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}(),this._getId=function(t){switch(t.schemaId){case"auto":return WI;case"id":return GI;default:return $I}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=AI),this._metaOpts=function(t){for(var e=DI.copy(t._opts),i=0;i<RI.length;i++)delete e[RI[i]];return e}(this),t.formats&&function(t){for(var e in t._opts.formats){var i=t._opts.formats[e];t.addFormat(e,i)}}(this),t.keywords&&function(t){for(var e in t._opts.keywords){var i=t._opts.keywords[e];t.addKeyword(e,i)}}(this),function(t){var e;if(t._opts.$data&&(e=OI,t.addMetaSchema(e,e.$id,!0)),!1!==t._opts.meta){var i=bI;t._opts.$data&&(i=FI(i,BI)),t.addMetaSchema(i,NI,!0),t._refs["http://json-schema.org/schema"]=NI}}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var i in e)t.addSchema(e[i],i)}(this)}function zI(t,e){return e=TI.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function VI(t,e,i){for(var n in e){var r=e[n];r.meta||i&&!i.test(n)||(t._cache.del(r.cacheKey),delete e[n])}}function GI(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function $I(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function WI(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function qI(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function HI(){}function UI(t,e){return nw(this,void 0,void 0,(function*(){let i=t;return void 0!==i&&(i=yield Promise.all(i.map((t=>nw(this,void 0,void 0,(function*(){return DM(e,t)})))))),i}))}function KI(t){var e;const{chartConfig:i,layer:n,inlineData:r}=t;let s;const a=gM(n);if(void 0!==a)s={type:Py,layer:{id:null!==(e=a.id)&&void 0!==e?e:0,layerType:"ArcGISFeatureLayer"}},null!==a.url&&void 0!==a.url&&(s.layer.url=a.url);else if(void 0!==r){const{inputData:t,processed:e,configFields:i}=null!=r?r:{};s={type:"inline",data:t,processed:e,configFields:i}}return Object.assign(Object.assign({},i),{dataSource:s})}function JI(t,e){let i=0;if(t!==e){const n=t.split("."),r=e.split(".");for(let t=0;t<n.length;t+=1){const e=parseInt(n[t],10),s=parseInt(r[t],10);if(e>s||Number.isNaN(s)){i=1;break}if(e<s){i=-1;break}}}return i}function YI(t){let e="same",i=[];var n;if(!0===(void 0!==(n=t)&&/^([1-9]\d*|0)(\.(([1-9]\d*)|0)){2}$/.test(n))&&void 0!==t){AT.sort(JI);const n=JI(t,AT[AT.length-1]);if(1===n?e=Ey:-1===n&&(e="older"),e===Ey||"same"===e)i.push(t);else{for(let e=AT.length-2;e>=0;e-=1)if(JI(t,AT[e])>=0){i=AT.slice(e,AT.length);break}0===i.length&&i.push("1.0.0")}}else e=Ny,i.push("unrecognized.version");return{versionStatus:e,versions:i}}function ZI(t,e){return Object.assign(Object.assign({},t),{$ref:`#/definitions/${e}`})}const XI=function(){const t=new PI({allErrors:!0});return(e,i)=>nw(this,void 0,void 0,(function*(){let n=jT;i===My&&(n=ZI(jT,"WebGaugeChart")),void 0===(null==e?void 0:e.dataSource)&&(n=ZI(jT,"WebMapWebChart"));const r=t.compile(n);r(e);let s=[];return null!==r.errors&&void 0!==r.errors&&(s=yield function(t){return nw(this,void 0,void 0,(function*(){const e=yield ZM();return t.map((t=>{let i=t;const n="."===t.dataPath[0]?t.dataPath.substring(1):t.dataPath;switch(t.keyword){case aT:i=Object.assign(Object.assign({},t),{message:fC(e.requiredProperty,{dataPath:n,missingProperty:t.params.missingProperty})});break;case oT:i=Object.assign(Object.assign({},t),{message:fC(e.minLength,{dataPath:n,limit:t.params.limit.toString()})});break;case uT:i=Object.assign(Object.assign({},t),{message:fC(e.minItems,{dataPath:n,limit:t.params.limit.toString()})});break;case lT:i=Object.assign(Object.assign({},t),{message:fC(e.maxItems,{dataPath:n,limit:t.params.limit.toString()})});break;case hT:"\\w+"===t.params.pattern&&(i=Object.assign(Object.assign({},t),{message:fC(e.whiteSpacePattern,{dataPath:n}),params:{}}));break;case cT:i=Object.assign(Object.assign({},t),{message:fC(e.additionalProperty,{dataPath:n,additionalProperty:t.params.additionalProperty})});break;case dT:i=Object.assign(Object.assign({},t),{message:fC(e.enumValues,{dataPath:n,allowedValues:t.params.allowedValues.join(", ")})});break;case fT:{let r=[];"#/properties/legend/anyOf"===t.schemaPath&&(r=jT.definitions.WebChart.properties.legend.anyOf.map((t=>function(t){const e=t.lastIndexOf("/");return-1!==e?t.slice(e+1):t}(t.$ref)))),i=Object.assign(Object.assign({},t),{params:r,message:fC(e.anyOfValues,{dataPath:n,schemaOptions:r.join(", ")})});break}}return i}))}))}(r.errors)),s}))}();function QI(t){return nw(this,void 0,void 0,(function*(){const{input:e,seriesType:i,queryObject:n}=t;let r;if(YI(null==e?void 0:e.version).versionStatus===Ey)r={valid:!0,schemaErrors:[],customErrors:[],warnings:[]};else{const t=yield XI(e,i);let s=[],a=[];void 0!==e&&0===t.length&&(a=yield function(t){return nw(this,void 0,void 0,(function*(){let e=[];if(void 0!==t){const i=yield function(t){var e,i,n;return nw(this,void 0,void 0,(function*(){let r;const s=yield ZM(),a=gM(t);try{yield a.load()}catch(t){const o=null!==(e=null==a?void 0:a.url)&&void 0!==e?e:"",u=null!==(n=null===(i=null==a?void 0:a.portalItem)||void 0===i?void 0:i.id)&&void 0!==n?n:"";r={keyword:UM,message:fC(s.layerLoadFailure,{url:o,portalItemId:u}),params:{url:o,portalItemId:u}}}return r}))}(t);void 0!==i&&(e=e.concat(i))}return e}))}(n),0===a.length&&(s=yield function(t,e){return nw(this,void 0,void 0,(function*(){let i=[];if(void 0!==e){const n=yield function(t,e){var i;return nw(this,void 0,void 0,(function*(){const n=yield yM(e),r=[],s=yield ZM();for(let e=0;e<t.length;e+=1){const a=null===(i=t[e].query)||void 0===i?void 0:i.outStatistics;if(void 0!==a)for(let t=0;t<a.length;t+=1){const i=a[t],o=wM(i.onStatisticField,n);if(void 0!==o&&!1===xM(o)&&i.statisticType!==by){const n=`series[${e}].query.outStatistics[${t}]`;r.push({keyword:rT,message:fC(s.nonNumericAggregation,{dataPath:n}),dataPath:n,params:{fieldName:i.onStatisticField,fieldType:o.type,aggregationRequested:i.statisticType}})}}}return r}))}(t.series,e);i=i.concat(n)}return i=i.concat(yield function(t){return nw(this,void 0,void 0,(function*(){const e=[],i=yield ZM();if(void 0!==t&&t.series.length>1){const n=new Set;let r=0;t.series.forEach(((t,s)=>{if(n.add(t.id),n.size===r){const n=`series[${s}].id`;e.push({keyword:sT,message:fC(i.duplicateSeriesID,{dataPath:n,seriesID:t.id,seriesName:t.name}),dataPath:n,params:{seriesId:t.id,seriesName:t.name}})}else r+=1}))}return e}))}(t)),i}))}(e,n))),r={valid:0===t.length&&0===s.length&&0===a.length,schemaErrors:t,customErrors:a,warnings:s}}return r}))}function tA(t){return nw(this,void 0,void 0,(function*(){const{invalidType:e,elementCount:i,chartLimits:n,seriesCount:r}=t,s=yield ZM(),a=yield function(t=vC().locale){return nw(this,void 0,void 0,(function*(){let e=yield import("./p-b9474a91.js");switch(t){case hC.Arabic:e=yield import("./p-0fcf0909.js");break;case hC.Bosnian:e=yield import("./p-4bbaf4ce.js");break;case hC.Bulgarian:e=yield import("./p-8d571f8d.js");break;case hC.Catalan:e=yield import("./p-67be3dc5.js");break;case hC.Czech:e=yield import("./p-2efe7a66.js");break;case hC.Danish:e=yield import("./p-0df375d3.js");break;case hC.German:e=yield import("./p-29793abf.js");break;case hC.Greek:e=yield import("./p-725cee8f.js");break;case hC.EnglishUSA:e=yield import("./p-463cb060.js");break;case hC.Spanish:e=yield import("./p-a6dac0bb.js");break;case hC.Estonian:e=yield import("./p-c2f8d82e.js");break;case hC.Finnish:e=yield import("./p-e9982f7b.js");break;case hC.French:e=yield import("./p-a34b2bef.js");break;case hC.Hebrew:e=yield import("./p-a5ad5e13.js");break;case hC.Croatian:e=yield import("./p-0b0d8f65.js");break;case hC.Hungarian:e=yield import("./p-5024d595.js");break;case hC.Indonesian:e=yield import("./p-cf678bc3.js");break;case hC.Italian:e=yield import("./p-edde2016.js");break;case hC.Japanese:e=yield import("./p-a08c16d3.js");break;case hC.Korean:e=yield import("./p-27c2ad0b.js");break;case hC.Lithuanian:e=yield import("./p-8c1fedd8.js");break;case hC.Latvian:e=yield import("./p-90081dcb.js");break;case hC.NorwegianBokml:e=yield import("./p-0059a44c.js");break;case hC.Dutch:e=yield import("./p-12569710.js");break;case hC.Polish:e=yield import("./p-0ffc1358.js");break;case hC.PortugueseBrazil:e=yield import("./p-a8cf318b.js");break;case hC.PortuguesePortugal:e=yield import("./p-27874468.js");break;case hC.Romanian:e=yield import("./p-1e5f8b3d.js");break;case hC.Russian:e=yield import("./p-c882622a.js");break;case hC.Serbian:e=yield import("./p-6f445a38.js");break;case hC.Slovak:e=yield import("./p-a4587aba.js");break;case hC.Slovenian:e=yield import("./p-4bbc5d8c.js");break;case hC.Swedish:e=yield import("./p-dec48d57.js");break;case hC.Thai:e=yield import("./p-d23affd9.js");break;case hC.Turkish:e=yield import("./p-bc85c9ac.js");break;case hC.Ukrainian:e=yield import("./p-2657dae8.js");break;case hC.Vietnamese:e=yield import("./p-066ab47a.js");break;case hC.ChineseChina:e=yield import("./p-f91cc75f.js");break;case hC.ChineseHongKong:e=yield import("./p-2cdf39da.js");break;case hC.ChineseTaiwan:e=yield import("./p-79f6d717.js")}return e}))}();let o,u=s.defaultInvalidChart;const l=vC().formatLocale,h=new Intl.NumberFormat(l),c=DC(n);switch(e){case bT:{let t=NaN,e=NaN,n="";1===r?(n=s.uniqueSeriesBarCountCannotExceedLimit,t=c.maxBarUniqueSeriesCountTotal):2===r?(n=s.twoSeriesBarCountCannotExceedLimit,t=c.maxBarTwoSeriesCountTotal,e=c.maxBarTwoSeriesCountPerSeries):void 0!==r&&r>2&&(n=s.threePlusSeriesBarCountCannotExceedLimit,t=c.maxBarThreePlusSeriesCountTotal,e=c.maxBarThreePlusSeriesCountPerSeries),u=fC(n,{totalLimit:h.format(t),seriesLimit:h.format(e),elementCount:void 0!==i?h.format(i):""}),o={actualCount:null!=i?i:NaN,totalLimit:t,seriesLimit:e};break}case gT:{const t=s.lineChartSeriesAndMarkersCannotExceedLimit,e=c.maxLineChartMarkersCountTotal,n=c.maxLineChartSeriesCount,a=h.format(e),l=h.format(n),d=void 0!==i?h.format(i):"";u=fC(t,{seriesCount:void 0!==r?h.format(r):"",elementCount:d,seriesLimit:l,totalLimit:a}),o={actualCount:null!=i?i:NaN,totalLimit:e,seriesLimit:n}}break;case yT:{const t=s.pieChartSlicesCannotExceedLimit,e=c.maxPieChartSliceCountTotal,n=h.format(e);u=fC(t,{sliceCount:void 0!==i?h.format(i):"",totalLimit:n}),o={actualCount:null!=i?i:NaN,totalLimit:e}}break;case wT:{const t=s.gaugeCannotExceedLimit,e=c.maxGaugeByFeaturesLimit,n=h.format(e);u=fC(t,{featureCount:void 0!==i?h.format(i):"",totalLimit:n}),o={actualCount:null!=i?i:NaN,totalLimit:e}}break;case ST:u=s.pieChartCannotHaveMixtureOfPositiveAndNegativeSlices;break;case xT:u=s.negativeValueInDataForSqrtTransformation;break;case CT:u=s.negativeValueInDataForLogTransformation;break;case pT:u=s.histogramEmptyField;break;case vT:u=a.noDataMessage}return{keyword:null!=e?e:mT,message:u,params:o}}))}function eA(t){let e=zx(t);return void 0!==t&&(e=function(t){var e,i;let n=zx(t);if(void 0!==t&&!1===Hx(t.series)&&iM(t.series)===My&&void 0!==(null===(e=t.axes)||void 0===e?void 0:e[0])){const e=t.axes[0];!0===(null===(i=e.ticks)||void 0===i?void 0:i.hasOwnProperty("spacing"))&&delete e.ticks.spacing,n.axes[0]=e}return n}(e)),e}function iA(t){let e=zx(t);return void 0!==t&&(e=function(t){var e,i;let n=zx(t);const{extent:r}=null!==(i=null===(e=n.series[0])||void 0===e?void 0:e.query)&&void 0!==i?i:{};return void 0!==r&&(n.dataFilters=Object.assign(Object.assign({},n.dataFilters),{geometry:r}),n.series.forEach((t=>{var e;null===(e=t.query)||void 0===e||delete e.extent}))),n}(e)),e}function nA(t){let e=zx(t);return void 0!==t&&(e=function(t){var e;let i=zx(t);if(void 0!==t&&!1===Hx(t.series)){const n=iM(t.series);1==(n===ky||n===Ty||n===Ay)&&void 0===t.rotated&&(i.rotated=null!==(e=t.series[0].rotated)&&void 0!==e&&e),i.series.forEach((t=>{void 0!==t.rotated&&delete t.rotated}))}return i}(e)),e}function rA(t){let e=zx(t);return void 0!==t&&(e=function(t){let e=zx(t);const i=t.dataSource;return void 0!==t&&"dataSource"in e&&!1===Hx(i)&&("featureLayer"===i.type&&(e.dataSource.type="layer"),"featureLayer"in i&&(e.dataSource.layer=i.featureLayer,delete e.dataSource.featureLayer)),e}(e)),e}function sA(t){let e=zx(t);return void 0!==t&&(e=function(t){var e,i;let n=zx(t);if("dataSource"in t){const r=t.dataSource;if(void 0!==(null==r?void 0:r.filter)&&""!==(null===(e=r.filter)||void 0===e?void 0:e.trim())){const t=VM([r.filter,null===(i=n.dataFilters)||void 0===i?void 0:i.where]);n.dataFilters=Object.assign(Object.assign({},n.dataFilters),{where:t}),delete n.dataSource.filter}}return n}(e)),e}function aA(t,e){var i;return nw(this,void 0,void 0,(function*(){const n=null!==(i=null==t?void 0:t.version)&&void 0!==i?i:"1.0.0";let r=t;const{versionStatus:s,versions:a}=YI(n);if(void 0!==r&&("older"===s||s===Ny)){const t=gM(e);r=yield function(t){return nw(this,void 0,void 0,(function*(){const{versionsToConvert:e=[],configToUpdate:i,layer:n}=t;let r=zx(i);return e.length>0&&void 0!==i&&(r=yield function(t,e){return nw(this,void 0,void 0,(function*(){let i=zx(t);return void 0!==i&&(i=function(t){var e,i;const n=zx(t);return void 0===t||void 0!==t.id&&""!==t.id&&t.id!==(null===(i=null===(e=t.title)||void 0===e?void 0:e.content)||void 0===i?void 0:i.text)||(n.id=`Chart_${Date.now()}`),n}(i),i=function(t){var e;const i=zx(t);return void 0!==t&&!1===Hx(t.axes)&&(i.axes=null===(e=t.axes)||void 0===e?void 0:e.map(((e,i)=>{var n,r,s,a,o;const u=e;return delete u.calculateAutomaticMaximum,delete u.calculateAutomaticMinimum,(null===(n=t.series)||void 0===n?void 0:n[0].type)===ky&&0===i&&(null===(r=u.valueFormat)||void 0===r?void 0:r.type)===xy&&(u.valueFormat={type:"category",characterLimit:11}),void 0!==(null===(o=null===(a=null===(s=u.title)||void 0===s?void 0:s.content)||void 0===a?void 0:a.font)||void 0===o?void 0:o.style)&&(u.title.content.font.style=u.title.content.font.style.toLowerCase()),u}))),i}(i),i=function(t){const e=zx(t);return void 0!==t&&!1===Hx(t.series)&&(e.series=t.series.map(((e,i)=>{var n,r,s;const a=e;void 0===e.id&&(a.id=`Series ${Date.now()}-${i}`);const o=iM(t.series,i);return o!==ky&&o!==Ty||"median"!==(null===(s=null===(r=null===(n=a.query)||void 0===n?void 0:n.outStatistics)||void 0===r?void 0:r[0])||void 0===s?void 0:s.statisticType)||(a.query.outStatistics[0].statisticType="percentile_cont"),o===ky&&void 0!==a.multipleBarType&&(a.stackedType=a.multipleBarType,delete a.multipleBarType),o===Oy&&void 0!==a.sliceGrouping&&(a.sliceGrouping.sliceId=yC,void 0!==a.sliceGrouping.groupName&&(a.sliceGrouping=Object.assign(Object.assign({},a.sliceGrouping),{label:a.sliceGrouping.groupName}),delete a.sliceGrouping.groupName),void 0!==a.sliceGrouping.groupSliceSymbol&&(a.sliceGrouping=Object.assign(Object.assign({},a.sliceGrouping),{fillSymbol:a.sliceGrouping.groupSliceSymbol}),delete a.sliceGrouping.groupSliceSymbol)),a}))),e}(i),i=yield function(t,e){var i,n,r;return nw(this,void 0,void 0,(function*(){const s=Object.assign({},t);if(void 0!==t&&(void 0!==e||"dataSource"in t&&(null===(i=t.dataSource)||void 0===i?void 0:i.type)===Py)&&(null===(n=t.series)||void 0===n?void 0:n.length)>0){const i=null!=e?e:vM(t.dataSource.layer),n=kM(s.series),a=iM(s.series),o=a===My&&!1===EM(t)||a===Oy&&!0===LM(t.series),u=a===Cy||n===$C;if(s.series=yield Promise.all(t.series.map((t=>nw(this,void 0,void 0,(function*(){var e;const r=Object.assign({},t);if(!1===o&&(r.x=yield DM(i,t.x)),void 0!==r.y&&!0===u&&(r.y=yield DM(i,t.y)),void 0!==t.query){let{where:s,groupByFieldsForStatistics:a,outStatistics:o,orderByFields:u}=t.query;if(a=yield UI(a,i),void 0!==u){let t=[],e=[];u.forEach((i=>{if(""!==i&&void 0!==i){const n=i.split(" ");t.push(n[0]),e.push(n[1])}})),t.length>0&&(t=yield UI(t,i),u=t.map(((t,i)=>`${t} ${e[i]}`)))}if(void 0!==o&&(o=yield Promise.all(o.map((t=>nw(this,void 0,void 0,(function*(){const e=Object.assign({},t);return e.onStatisticField=yield DM(i,t.onStatisticField),e})))))),void 0!==s&&n===WC){const n=CM(null===(e=t.query)||void 0===e?void 0:e.where),r=s.split("=");s=`${yield DM(i,n)}=${r[1].trim()}`}void 0!==r.query&&(void 0!==s&&(r.query.where=s),void 0!==a&&(r.query.groupByFieldsForStatistics=a),void 0!==o&&(r.query.outStatistics=o),void 0!==u&&(r.query.orderByFields=u))}return r}))))),a===My&&void 0!==(null===(r=null==t?void 0:t.axes)||void 0===r?void 0:r[0])){const{minimumFromField:e,maximumFromField:n}=t.axes[0];void 0!==e&&(t.axes[0].minimumFromField=yield DM(i,e)),void 0!==n&&(t.axes[0].maximumFromField=yield DM(i,n))}}return s}))}(i,e),void 0!==i.legend&&!1===Number.isFinite(i.legend.maxHeight)&&(i.legend.maxHeight=NaN)),i}))}(r,n),e.includes("1.0.0")||e.includes("unrecognized.version")?(r=function(t){let e=zx(t);return void 0!==t&&(e=function(t){let e=zx(t);return void 0!==t&&!1===Hx(t.series)&&!0===LM(t.series)&&(e.series=t.series.map((t=>{var e,i,n,r;const s=zx(t);return void 0!==(null===(i=null===(e=t.query)||void 0===e?void 0:e.orderByFields)||void 0===i?void 0:i[0])&&!0===(null===(r=null===(n=t.query)||void 0===n?void 0:n.orderByFields)||void 0===r?void 0:r[0].includes("arcgis_charts_pie_category_from_fields_name"))&&(s.query.orderByFields[0]=t.query.orderByFields[0].replace("arcgis_charts_pie_category_from_fields_name","arcgis_charts_pie_from_fields_name")),s}))),e}(e)),e}(r),r=eA(r),r=iA(r),r=nA(r),r=rA(r),r=sA(r)):e.forEach((t=>{switch(t){case"1.0.1":r=eA(r);break;case"3.4.0":r=iA(r);break;case"4.0.0":r=nA(r);break;case"4.0.1":r=rA(r);break;case"6.2.0":r=sA(r)}})),r.version="6.2.1"),r}))}({versionsToConvert:a,configToUpdate:r,layer:t})}return r}))}const oA="SelectionByClickOrRange",uA="ProgrammaticSelection",lA="ClearSelection",hA="monoSelection",cA="multiSelection",dA="multiSelectionWithCtrlKey",fA="zoom",mA="none";var vA=function(t){function e(){var e=t.call(this)||this;e.className="Grip";var i=new Dp;e.layout="absolute",e.padding(10,10,10,10),e.margin(3,3,3,3),e.background.fillOpacity=.3,e.background.cornerRadius(10,10,10,10);var n=new Pb;n.element=e.paper.add("path");var r=sg({x:-6,y:0});return r+=ag({x:6,y:0}),r+=sg({x:-8,y:-6}),r+=ag({x:0,y:-12}),r+=ag({x:8,y:-6}),r+=sg({x:-8,y:6}),r+=ag({x:0,y:12}),r+=ag({x:8,y:6}),n.path=r,n.strokeWidth=2,n.fillOpacity=0,n.pixelPerfect=!0,n.padding(0,4,0,4),n.stroke=i.getFor("text"),n.strokeOpacity=.7,n.align="center",n.valign="middle",e.icon=n,e.label.dispose(),e.label=void 0,e.position="right",e.autoHideDelay=3e3,e.events.on("shown",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose(),e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.events.on("down",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose()})),e.events.on("out",(function(t){e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){if(this.setPropertyValue("position",t))switch(t){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=Ad(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=Ad(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=Ad(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=Ad(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=Ad(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(t){this.setPropertyValue("autoHideDelay",t)},enumerable:!0,configurable:!0}),e}(Xb);Om.registeredClasses.Grip=vA;var pA=function(t){function e(){var e=t.call(this)||this;return e.className="ChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(Kb),bA=function(t){function e(){var i=t.call(this)||this;if(i._legend=new Vf,i.constructor===e)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");i.className="Chart";var n=new Yb;i.titles=new jm(n),i._disposers.push(new km(i.titles)),i._disposers.push(n),i.width=Ad(100),i.height=Ad(100),i.layout="vertical";var r=i.createChild(Eb);r.shouldClone=!1,r.layout="vertical",r.width=Ad(100),r.height=Ad(100),i.chartAndLegendContainer=r;var s=r.createChild(Eb);return s.shouldClone=!1,s.width=Ad(100),s.height=Ad(100),i.chartContainer=s,i.showOnInit=!0,i._disposers.push(i._legend),i.titles.events.on("inserted",(function(t){i.processTitle(t),i.updateReaderTitleReferences()}),i,!1),i.titles.events.on("removed",(function(t){i.updateReaderTitleReferences()}),i,!1),i.role="region",i.defaultState.transitionDuration=1,i.applyTheme(),i}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},e.prototype.draw=function(){this.fixLayout(),t.prototype.draw.call(this)},e.prototype.fixLayout=function(){var t=this.legend;if(t){var e=this.chartAndLegendContainer,i=this.chartContainer;switch(i.x=void 0,i.y=void 0,"absolute"!=t.position&&(t.x=void 0,t.y=void 0),t.position){case"left":e.layout="horizontal",t.toBack();break;case"right":e.layout="horizontal",t.toFront();break;case"top":e.layout="vertical",t.toBack();break;case"bottom":e.layout="vertical",t.toFront();break;case"absolute":t.isMeasured=!1}}},e.prototype.feedLegend=function(){},e.prototype.processTitle=function(t){var e=t.newValue;return e.parent=this,e.toBack(),e.shouldClone=!1,e.align="center",e.uidAttr(),e},e.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var t=[];cm(this.titles.iterator(),(function(e){t.push(e.uid)})),this.setSVGAttribute({"aria-labelledby":t.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend.get()},set:function(t){this.setLegend(t)},enumerable:!0,configurable:!0}),e.prototype.setLegend=function(t){var e=this;this._legend.get()!==t&&(t?(t.parent=this.chartAndLegendContainer,this._legend.set(t,t.events.on("propertychanged",(function(t){"position"==t.property&&e.fixLayout()}),void 0,!1)),t.addDisposer(new _f((function(){e.legend=void 0})))):this._legend.reset(),this.feedLegend())},e.prototype.dispose=function(){this.legend&&this.legend.dispose(),t.prototype.dispose.call(this)},e.prototype.processConfig=function(e){e&&Rd(e.legend)&&!Rd(e.legend.type)&&(e.legend.type="Legend"),t.prototype.processConfig.call(this,e)},e.prototype.copyFrom=function(e){this.titles.copyFrom(e.titles),this.chartContainer.copyFrom(e.chartContainer),e.legend&&(this.legend=e.legend.clone(),this.legend.removeChildren()),t.prototype.copyFrom.call(this,e)},Object.defineProperty(e.prototype,"dragGrip",{get:function(){var t=this;if(!this._dragGrip){var e=this.tooltipContainer.createChild(vA);e.align="right",e.valign="middle",e.hide(0),e.events.on("down",(function(e){e.touch&&(t.interactionsEnabled=!1)})),e.events.on("up",(function(e){t.interactionsEnabled=!0})),this.events.on("down",(function(t){t.touch&&e.show()})),this._dragGrip=e}return this._dragGrip},set:function(t){this._dragGrip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(t){this.parent.focusable=t},enumerable:!0,configurable:!0}),e}(Jb);Om.registeredClasses.Chart=bA,Hb.push({relevant:Ub.widthXS,state:function(t,e){if(t instanceof bA){var i=t.states.create(e);return t.pixelPaddingLeft>10&&(i.properties.paddingLeft=10),t.pixelPaddingRight>10&&(i.properties.paddingRight=10),i}return null}}),Hb.push({relevant:Ub.heightXS,state:function(t,e){if(t instanceof bA){var i=t.states.create(e);return t.pixelPaddingTop>10&&(i.properties.paddingTop=10),t.pixelPaddingBottom>10&&(i.properties.paddingBottom=10),i}return null}}),Hb.push({relevant:Ub.widthXXS,state:function(t,e){if(t instanceof bA){var i=t.states.create(e);return i.properties.paddingLeft=0,i.properties.paddingRight=0,i}return null}}),Hb.push({relevant:Ub.heightXXS,state:function(t,e){if(t instanceof bA){var i=t.states.create(e);return i.properties.paddingTop=0,i.properties.paddingBottom=0,i}return null}});var gA=function(t){function e(){var e=t.call(this)||this;return e.className="Bullet",e.isMeasured=!1,e.tooltipX=0,e.tooltipY=0,e.layout="none",e.applyOnClones=!0,e.copyToLegendMarker=!0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){if(this.setPropertyValue("locationX",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){if(this.setPropertyValue("locationY",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(t){this.setPropertyValue("xField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(t){this.setPropertyValue("yField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(t){this.setPropertyValue("isDynamic",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(t){this.setPropertyValue("copyToLegendMarker",t)},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.Bullet=gA,Hb.push({relevant:Ub.isXS,state:function(t,e){if(t instanceof gA){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var yA=function(t){function e(){var e=t.call(this)||this;return e.childrenCreated=!1,e.className="LegendDataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this._label=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new _f((function(){Rd(t.component)&&t.component.labels.removeValue(e)})))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueLabel",{get:function(){var t=this;if(!this._valueLabel){var e=this.component.valueLabels.create();this._valueLabel=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new _f((function(){Rd(t.component)&&t.component.valueLabels.removeValue(e)})))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemContainer",{get:function(){var t=this;if(!this._itemContainer){var e=this.component,i=e.itemContainers.create();i.parent=e,this._itemContainer=i,this.addSprite(i),this._disposers.push(i),i.togglable&&i.events.on("toggled",(function(t){e.toggleDataItem(t.target.dataItem)}),void 0,!1),i.focusable&&(i.events.on("hit",(function(t){e.focusedItem=void 0}),void 0,!1),i.events.on("focus",(function(t){e.focusedItem=t.target.dataItem}),void 0,!1),i.events.on("blur",(function(t){e.focusedItem=void 0}),void 0,!1)),this._disposers.push(new _f((function(){Rd(t.component)&&t.component.itemContainers.removeValue(i)}))),this.dataContext.uidAttr&&(i.readerControls=this.dataContext.uidAttr(),i.readerLabelledBy=this.dataContext.uidAttr());var n=this.dataContext;if((n instanceof Kb||n instanceof Pb)&&!n.isDisposed()){var r=function(t){i.readerChecked=t.visible,i.events.disableType("toggled"),i.isActive=!t.visible,i.events.enableType("toggled")};n.addDisposer(new _f((function(){t.component&&t.component.dataItems.remove(t)}))),n instanceof Pb?(i.addDisposer(n.events.on("visibilitychanged",r,void 0,!1)),i.addDisposer(n.events.on("hidden",(function(t){i.readerChecked=!1,i.events.disableType("toggled"),i.isActive=!0,i.events.enableType("toggled")}),void 0,!1)),i.addDisposer(n.events.on("shown",(function(t){i.readerChecked=!0,i.events.disableType("toggled"),i.isActive=!1,i.events.enableType("toggled")}),void 0,!1))):i.addDisposer(n.events.on("visibilitychanged",r,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marker",{get:function(){var t=this;if(!this._marker){var e=this.component.markers.create();this._marker=e,e.parent=this.itemContainer,this.addSprite(e),this._disposers.push(e),this._disposers.push(new _f((function(){Rd(t.component)&&t.component.markers.removeValue(e)})))}return this._marker},enumerable:!0,configurable:!0}),e}(Kb),wA=function(){this.createMarker=!0},SA=function(t){function e(){var e=t.call(this)||this;e.className="Legend",e.layout="grid",e.setPropertyValue("useDefaultMarker",!1),e.setPropertyValue("scrollable",!1),e.setPropertyValue("contentAlign","center");var i=new Eb;i.applyOnClones=!0,i.padding(8,0,8,0),i.margin(0,10,0,10),i.layout="horizontal",i.clickable=!0,i.focusable=!0,i.role="switch",i.togglable=!0,i.cursorOverStyle=fb.pointer,i.background.fillOpacity=0,e.itemContainers=new jm(i),e._disposers.push(new km(e.itemContainers)),e._disposers.push(e.itemContainers.template),e._disposers.push(Yp().body.events.on("keyup",(function(t){if(Bp.isKey(t.event,"enter")&&e.focusedItem){var i=e.focusedItem,n=i.itemContainer;n.togglable?e.toggleDataItem(i):n.clickable&&n.events.isEnabled("hit")&&(n.dispatchImmediately("hit",{event:t}),e.focusedItem=i)}}),e));var n=new Dp,r=new Eb;r.width=23,r.height=23,r.interactionsEnabled=!1,r.applyOnClones=!0,r.setStateOnChildren=!0,r.background.fillOpacity=0,r.background.strokeOpacity=0,r.propertyFields.fill="fill",r.valign="middle";var s=n.getFor("disabledBackground");r.events.on("childadded",(function(t){var e=t.newValue.states.create("active");e.properties.stroke=s,e.properties.fill=s})),e.markers=new jm(r),e._disposers.push(new km(e.markers)),e._disposers.push(e.markers.template);var a=r.createChild(Zb);a.width=Ad(100),a.height=Ad(100),a.applyOnClones=!0,a.propertyFields.fill="fill",a.strokeOpacity=0;var o=new Yb;o.text="{name}",o.margin(0,5,0,5),o.valign="middle",o.applyOnClones=!0,o.states.create("active").properties.fill=n.getFor("disabledBackground"),e.labels=new jm(o),e._disposers.push(new km(e.labels)),e._disposers.push(e.labels.template),o.interactionsEnabled=!1,o.truncate=!0,o.fullWords=!1;var u=new Yb;return u.margin(0,5,0,0),u.valign="middle",u.width=50,u.align="right",u.textAlign="end",u.applyOnClones=!0,u.states.create("active").properties.fill=n.getFor("disabledBackground"),u.interactionsEnabled=!1,e.valueLabels=new jm(u),e._disposers.push(new km(e.valueLabels)),e._disposers.push(e.valueLabels.template),e.position="bottom",i.states.create("active"),i.setStateOnChildren=!0,e.role="group",e.events.on("layoutvalidated",e.handleScrollbar,e,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},e.prototype.createDataItem=function(){return new yA},e.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),t.prototype.validateDataElements.call(this)},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e);var i=e.itemContainer,n=e.marker;var r=e.valueLabel;i.readerChecked=e.dataContext.visible,e.dataContext.legendDataItem=e;var s=e.label.maxWidth;e.label.width instanceof Id||(e.label.width=void 0),s>0&&(e.label.maxWidth=s),"right"==r.align&&(r.width=void 0);var a=e.dataContext.legendSettings,o=e.dataContext;!o.createLegendMarker||this.useDefaultMarker&&o instanceof Pb?this.markers.template.propertyFields.fill=void 0:e.childrenCreated||(o.createLegendMarker(n),e.childrenCreated=!0),o.updateLegendValue&&o.updateLegendValue(),o.component&&o.component.updateLegendValue&&o.component.updateLegendValue(o),r.invalid&&r.validate(),""==r.text||null==r.text?r.__disabled=!0:r.__disabled=!1,!a||null==a.itemValueText&&null==a.valueText||(r.__disabled=!1);var u=e.dataContext.visible;void 0===u&&(u=!0),u=Pd(u),e.dataContext.visible=u,i.events.disableType("toggled"),i.isActive=!u,i.isActive?i.setState("active",0):i.setState("default",0),i.events.enableType("toggled")},e.prototype.afterDraw=function(){var e=this,i=this.getPropertyValue("maxWidth"),n=0;this.labels.each((function(t){t.invalid&&(t.maxWidth=void 0,t.validate()),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>n&&(n=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var r=0;this.valueLabels.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>r&&(r=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var s=0;this.markers.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>s&&(s=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var a,o=this.itemContainers.template,u=o.pixelMarginRight+o.pixelMarginLeft,l=n+r+s;Gd(i)?((i-=u)>l&&(i=l),a=i-s-r):a=n,this.labels.each((function(t){("right"==e.valueLabels.template.align||t.measuredWidth>a)&&(t.width instanceof Id||(t.width=Math.min(t.maxWidth,a-t.pixelMarginLeft-t.pixelMarginRight),t.maxWidth=t.width))})),"right"==this.valueLabels.template.align&&this.valueLabels.each((function(t){t.width=r-t.pixelMarginRight-t.pixelMarginLeft})),t.prototype.afterDraw.call(this)},e.prototype.handleScrollbar=function(){var t=this.scrollbar;this.scrollable&&t&&(t.height=this.measuredHeight,t.x=this.measuredWidth-t.pixelWidth-t.pixelMarginLeft,this.contentHeight>this.measuredHeight?(t.visible=!0,t.thumb.height=t.height*this.measuredHeight/this.contentHeight,this.paddingRight=t.pixelWidth+t.pixelMarginLeft+ +t.pixelMarginRight):t.visible=!1,t.handleThumbPosition(),this.updateMasks())},Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){this.setPropertyValue("position",t)&&("left"==t||"right"==t?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",Gd(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=Ad(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(t){this.setPropertyValue("useDefaultMarker",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(t){if(this.setPropertyValue("scrollable",t,!0))if(t){var e=this.createChild(Og);this.scrollbar=e,e.isMeasured=!1,e.orientation="vertical",e.endGrip.__disabled=!0,e.startGrip.__disabled=!0,e.visible=!1,e.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(e.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=t.shift.y,i=this.scrollbar;if(i){var n=e/1e3*this.measuredHeight/this.contentHeight,r=i.end-i.start;e>0?(i.start=nf(0,i.start-n),i.end=i.start+r):(i.end=rf(1,i.end-n),i.start=i.end-r)}},e.prototype.updateMasks=function(){var t=this;this.scrollbar&&this.itemContainers.each((function(e){e.dy=-t.scrollbar.thumb.pixelY*t.contentHeight/t.measuredHeight,e.maskRectangle={x:0,y:-e.dy,width:t.measuredWidth,height:t.measuredHeight}}))},e.prototype.toggleDataItem=function(t){var e=t.dataContext;!e.visible||e.isHiding||e instanceof Pb&&e.isHidden?(t.color=t.colorOrig,e.appeared=!0,t.itemContainer.isActive=!1,!0===e.hidden&&(e.hidden=!1),e.show?e.show():e.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,t.label.readerTitle))):(t.itemContainer.isActive=!0,e.appeared=!0,e.hide?e.hide():e.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,t.label.readerTitle)),t.color=(new Dp).getFor("disabledBackground"))},Object.defineProperty(e.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.handleDataItemPropertyChange=function(t,e){t.valueLabel.invalidate(),t.label.invalidate()},e}(Jb);Om.registeredClasses.Legend=SA,Hb.push({relevant:Ub.widthXS,state:function(t,e){if(t instanceof SA&&("left"==t.position||"right"==t.position)){var i=t.states.create(e);return i.properties.position="bottom",i}return null}}),Hb.push({relevant:Ub.heightXS,state:function(t,e){if(t instanceof SA&&("top"==t.position||"bottom"==t.position)){var i=t.states.create(e);return i.properties.position="right",i}return null}}),Hb.push({relevant:Ub.isXS,state:function(t,e){if(t instanceof SA){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var xA=function(t){function e(){var e=t.call(this)||this;return e.className="SeriesDataItem",e.values.value={},e.values.value={},e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new wm,this._disposers.push(new ym(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.bullets.clear(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),e}(Kb),CA=function(t){function e(){var i=t.call(this)||this;if(i._ignoreMinMax=!1,i._showBullets=!0,i.legendSettings=new wA,i._tmin=new wm,i._tmax=new wm,i._smin=new wm,i._smax=new wm,i.dataItemsByAxis=new wm,i.skipFocusThreshold=20,i._itemReaderTextChanged=!1,i.calculatePercent=!1,i.usePercentHack=!0,i.autoDispose=!0,i.simplifiedProcessing=!1,i.constructor===e)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");i.className="Series",i.isMeasured=!1,i.layout="none",i.shouldClone=!1,i.setPropertyValue("hidden",!1),i.axisRanges=new Am,i.axisRanges.events.on("inserted",i.processAxisRange,i,!1),i.minBulletDistance=0,i.mainContainer=i.createChild(Eb),i.mainContainer.shouldClone=!1,i.mainContainer.mask=i.createChild(Pb),i._disposers.push(i.mainContainer);var n=i.mainContainer.createChild(Eb);return i._shouldBeReady.push(n),n.shouldClone=!1,n.layout="none",n.virtualParent=i,i._disposers.push(n),i.bulletsContainer=n,i.tooltip=new Ag,i.tooltip.virtualParent=i,i._disposers.push(i.tooltip),i.hiddenState.transitionEasing=Uv,i.dataItem=i.createDataItem(),i._disposers.push(i.dataItem),i.dataItem.component=i,i.role="group",i.applyTheme(),i}return Sd(e,t),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},e.prototype.createDataItem=function(){return new xA},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){},e.prototype.processBullet=function(t){var e=this,i=t.newValue;i.isTemplate=!0,this.events.once("datavalidated",(function(t){e.itemsFocusable()&&(i.focusable=!0)})),this.invalidate()},e.prototype.removeBullet=function(t){var e=t.oldValue;this.dataItems.each((function(t){var i=t.bullets.getKey(e.uid);i&&i.dispose()})),this.invalidate()},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.processValues(!1)},e.prototype.getFirstValue=function(t,e){for(var i=e;i>=0;i--){var n=this.dataItems.getIndex(i).getActualWorkingValue(t);if(Gd(n))return n}return null},e.prototype.getAbsoluteFirstValue=function(t){for(var e=0;e<this.dataItems.length;e++){var i=this.dataItems.getIndex(e).values[t].value;if(Gd(i))return i}return null},e.prototype.rangeChangeUpdate=function(){t.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},e.prototype.processValues=function(t){var e=this;if(!this.simplifiedProcessing){var i=this.dataItems,n={},r={},s={},a={},o={},u={},l={},h={},c={},d={},f=nf(0,this.startIndex);f=rf(f,this.dataItems.length);var m=rf(this.endIndex,this.dataItems.length);if(Gd(f)||(f=0),Gd(m)||(m=this.dataItems.length),f>0){var v=i.getIndex(f-1);nm(v.values,(function(t,e){var i=v.getActualWorkingValue(t);Gd(i)&&(h[t]=i)}))}for(var p=function(t){var m=i.getIndex(t);nm(m.values,(function(t,i){var v=m.getActualWorkingValue(t);if(Gd(v)){Gd(n[t])||(n[t]=0),n[t]++,Gd(r[t])||(r[t]=0),r[t]+=v,Gd(s[t])||(s[t]=0),s[t]+=Math.abs(v),Gd(u[t])||(u[t]=v),l[t]=v,Gd(a[t])?a[t]>v&&(a[t]=v):a[t]=v,Gd(o[t])?o[t]<v&&(o[t]=v):o[t]=v,Gd(c[t])||(c[t]=e.getFirstValue(t,f)),Gd(d[t])||(d[t]=e.getAbsoluteFirstValue(t)),m.setCalculatedValue(t,v-c[t],"change"),m.setCalculatedValue(t,(v-c[t])/c[t]*100,"changePercent"),m.setCalculatedValue(t,v-d[t],"startChange"),m.setCalculatedValue(t,(v-d[t])/d[t]*100,"startChangePercent");var p=h[t];Gd(p)||(p=v),m.setCalculatedValue(t,v-p,"previousChange"),m.setCalculatedValue(t,(v-p)/p*100,"previousChangePercent"),h[t]=v}}))},b=f;b<m;b++)p(b);if(this.calculatePercent){var g=function(t){var n=i.getIndex(t);nm(n.values,(function(t){var i=s[t],r=n.getActualWorkingValue(t);if(Gd(r))if(i>0){e.usePercentHack&&r==i&&(i=n.values[t].value);var a=r/i*100;n.setCalculatedValue(t,a,"percent")}else n.setCalculatedValue(t,0,"percent")}))};for(b=f;b<m;b++)g(b)}if(f>0){var y=i.getIndex(f-1);nm(y.values,(function(t){var e=y.values[t].value;y.setCalculatedValue(t,e-u[t],"change"),y.setCalculatedValue(t,(e-u[t])/u[t]*100,"changePercent")}))}var w=this.dataItem;nm(w.values,(function(t){w.setCalculatedValue(t,r[t],"sum"),w.setCalculatedValue(t,s[t],"absoluteSum"),w.setCalculatedValue(t,r[t]/n[t],"average"),w.setCalculatedValue(t,u[t],"open"),w.setCalculatedValue(t,l[t],"close"),w.setCalculatedValue(t,a[t],"low"),w.setCalculatedValue(t,o[t],"high"),w.setCalculatedValue(t,n[t],"count")}))}},e.prototype.validate=function(){zv()&&this.filters.clear(),cm(this.axisRanges.iterator(),(function(t){t.validate()})),t.prototype.validate.call(this);var e=this.bulletsContainer;if(e.fill=this.fill,e.stroke=this.stroke,e.x=this.pixelX,e.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var i=0;i<this.startIndex;i++){(n=this.dataItems.getIndex(i))&&n.bullets.each((function(t,e){e.__disabled=!0}))}for(i=this.dataItems.length-1;i>this.endIndex;i--){var n;(n=this.dataItems.getIndex(i))&&n.bullets.each((function(t,e){e.__disabled=!0}))}}else this.bulletsContainer.children.each((function(t){t.__disabled=!0}));this.updateTooltipBounds()},e.prototype.updateTooltipBounds=function(){if(this.topParent){var t={x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight};this.tooltip.setBounds(t)}},e.prototype.shouldCreateBullet=function(t,e){return!0},e.prototype.validateDataElement=function(e){var i=this;t.prototype.validateDataElement.call(this,e),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each((function(t){var n=e.bullets.getKey(t.uid);if(i.shouldCreateBullet(e,t)){if(!n){var r=t.propertyFields.disabled,s=e.dataContext;r&&s&&!1===s[r]?(t.applyOnClones=!1,t.disabled=!1,n=t.clone(),t.disabled=!0,t.applyOnClones=!0):n=t.clone(),n.shouldClone=!1,e.addSprite(n),i.visible&&!i.isHiding||n.hide(0)}var a=n.dataItem;if(a!=e){a&&a.bullets.setKey(t.uid,void 0);var o=i.itemReaderText;n instanceof gA&&(o||(o="{"+n.xField+"}: {"+n.yField+"}"),n.isDynamic&&(e.events.on("workingvaluechanged",n.deepInvalidate,n,!1),i.dataItem.events.on("workingvaluechanged",n.deepInvalidate,n,!1)),n.deepInvalidate()),n.focusable&&(n.events.on("focus",(function(t){n.readerTitle=i.populateString(o,n.dataItem)}),void 0,!1),n.events.on("blur",(function(t){n.readerTitle=""}),void 0,!1)),n.hoverable&&(n.events.on("over",(function(t){n.readerTitle=i.populateString(o,n.dataItem)}),void 0,!1),n.events.on("out",(function(t){n.readerTitle=""}),void 0,!1))}n.parent=i.bulletsContainer,e.bullets.setKey(t.uid,n),n.maxWidth=e.itemWidth,n.maxHeight=e.itemHeight,n.__disabled=!1,i.positionBullet(n)}else n&&(n.__disabled=!0)}))):this.bulletsContainer.visible=!1},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this.invalidateDataItems()},enumerable:!0,configurable:!0}),e.prototype.createMask=function(){},e.prototype.processAxisRange=function(t){this.rangesContainer||(this.rangesContainer=this.createChild(Eb),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var e=t.newValue;e&&(e.contents.parent=this.rangesContainer,e.isRange=!0,e.events.on("valuechanged",this.invalidateDataItems,this,!1))},e.prototype.getAxisField=function(t){},e.prototype.showTooltipAtPosition=function(t,e){},Object.defineProperty(e.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(t){this.setPropertyValue("minBulletDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new jm(new gA),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new km(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){},Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(t){this.setPropertyValue("hiddenInLegend",t)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t);var e=this.legendDataItem;e&&(e.component.invalidate(),e.component.invalidateRawData()),this.readerTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemReaderText",{get:function(){var t=this._itemReaderText;return t||(this.tooltipText?t=bv(this.tooltipText):this.tooltipHTML&&(t=bv(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",t):t},set:function(t){this._itemReaderText=t,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),e.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t,e){if(this.legendDataItem){var i=this.legendSettings,n=this.legendDataItem,r=n.label,s=n.valueLabel;t&&!t.isDisposed()||e?(s&&(i.itemValueText&&(s.text=i.itemValueText),s.dataItem=t),r&&(i.itemLabelText&&(r.text=i.itemLabelText),r.dataItem=t)):(r&&((i.labelText||null!=i.itemLabelText)&&(r.text=i.labelText),r.dataItem=this.dataItem),s&&((i.valueText||null!=i.itemValueText)&&(s.text=i.valueText),s.dataItem=this.dataItem))}},e.prototype.copyFrom=function(e){this.bullets.copyFrom(e.bullets),this.bulletsContainer.copyFrom(e.bulletsContainer),this.calculatePercent=e.calculatePercent,this.usePercentHack=e.usePercentHack,this.simplifiedProcessing=e.simplifiedProcessing,t.prototype.copyFrom.call(this,e)},e.prototype.raiseCriticalError=function(t){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",t).message,this._chart.modal.closable=!1,this._chart.modal.open(),this._chart.disabled=!0),console.log(t)},e.prototype.applyFilters=function(){var e=this;t.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),cm(this.filters.iterator(),(function(t){e.bulletsContainer.filters.push(t.clone())}))},Object.defineProperty(e.prototype,"heatRules",{get:function(){var t=this;return this._heatRules||(this._heatRules=new Am,this._heatRules.events.on("inserted",(function(e){var i=e.newValue,n=i.target;if(n){var r=i.dataField;Rd(r)||(r="value");var s=t.dataItem,a=i.property,o=Ld(i.minValue),u=Ld(i.maxValue);Gd(o)||Gd(u)||t.dataItem.events.on("calculatedvaluechanged",(function(e){e.property==r&&cm(t.dataItems.iterator(),(function(t){var e=!1;kf(t.sprites,(function(t){if(t.clonedFrom==n){var i=t;i[a]=i[a],e=!0}})),e||kf(t.sprites,(function(t){t instanceof Eb&&cm(t.children.iterator(),(function(t){if(t.className==n.className){var e=t;e[a]=e[a]}else t instanceof Eb&&t.deepInvalidate()}))}))}))})),t.dataItems.template.events.on("workingvaluechanged",(function(t){if(t.property==r){var e=t.target,i=!1;kf(e.sprites,(function(t){if(t.clonedFrom==n){var e=t;e[a]=e[a],i=!0}})),i||kf(e.sprites,(function(t){t instanceof Eb&&cm(t.children.iterator(),(function(t){if(t.className==n.className){var e=t;e[a]=e[a]}else t instanceof Eb&&t.deepInvalidate()}))}))}})),n.adapter.add(a,(function(t,e,n){var a=Ld(i.minValue),o=Ld(i.maxValue),u=i.min,l=i.max;if(e instanceof Pb){var h=e.propertyFields[n];if(h&&e.dataItem){var c=e.dataItem.dataContext;if(c&&Rd(c[h]))return t}}var d=e.dataItem;if((Gd(a)||(a=s.values[r].low),Gd(o)||(o=s.values[r].high),d)&&d.values[r]){var f=d.getActualWorkingValue(r);if(Rd(u)&&Rd(l)&&Gd(a)&&Gd(o)&&Gd(f)){var m=void 0;if(m=i.logarithmic?(Math.log(f)*Math.LOG10E-Math.log(a)*Math.LOG10E)/(Math.log(o)*Math.LOG10E-Math.log(a)*Math.LOG10E):(f-a)/(o-a),!Gd(f)||Gd(m)&&Math.abs(m)!=1/0||(m=.5),Gd(u))return u+(l-u)*m;if(u instanceof Jm)return new Jm(Wm(u.rgb,l.rgb,m))}}return t}))}}))),this._heatRules},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var i;if(e){if(Rd(e.bullets)&&Wd(e.bullets))for(var n=0,r=e.bullets.length;n<r;n++){var s=e.bullets[n];Rd(s.type)||(s.type="Bullet")}Rd(e.heatRules)&&Wd(e.heatRules)&&(i=e.heatRules,delete e.heatRules)}if(t.prototype.processConfig.call(this,e),i){for(n=0,r=i.length;n<r;n++){var a=i[n],o=this;if(Rd(a.target)&&Vd(a.target))if(this.map.hasKey(a.target))o=this.map.getKey(a.target);else for(var u=a.target.split("."),l=0;l<u.length;l++)if(o instanceof Am){var h=o.getIndex(Ld(u[l]));o=h||o[u[l]]}else{var c=u[l].match(/^(.*)\[([0-9]+)\]/);o=c?o[c[1]]instanceof Am?o[c[1]].getIndex(Ld(c[2])):o[c[1]][Ld(c[2])]:o[u[l]]}a.target=o,Rd(a.min)&&(a.min=this.maybeColorOrPercent(a.min)),Rd(a.max)&&(a.max=this.maybeColorOrPercent(a.max))}t.prototype.processConfig.call(this,{heatRules:i})}},e.prototype.configOrder=function(e,i){return e==i?0:"heatRules"==e?1:"heatRules"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(Jb);Om.registeredClasses.Series=CA,Om.registeredClasses.SeriesDataItem=xA;var OA=function(t){function e(){var e=t.call(this)||this;return e.className="SerialChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(pA),MA=function(t){function e(){var e=t.call(this)||this;e.className="SerialChart",e.colors=new ay,e._usesData=!1;var i=e.chartContainer.createChild(Eb);i.shouldClone=!1,i.width=Ad(100),i.height=Ad(100),i.isMeasured=!1,i.layout="none",i.zIndex=2,e.seriesContainer=i;var n=e.chartContainer.createChild(Eb);return n.shouldClone=!1,n.width=Ad(100),n.height=Ad(100),n.isMeasured=!1,n.zIndex=3,n.layout="none",e.bulletsContainer=n,e.applyTheme(),e}return Sd(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new jm(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new km(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),this.dataUsers.each((function(t){t.invalidateDataItems()})),e.autoDispose?e.dispose():(e.parent=void 0,e.bulletsContainer.parent=void 0);var i=this.legend;if(i){for(var n=this.legend.dataItems,r=n.length-1;r>=0;r--){var s=n.getIndex(r);s&&s.dataContext==e&&i.dataItems.remove(s)}for(r=i.data.length-1;r>=0;r--){var a=i.data[r];a&&a==e&&Af(i.data,a)}}},e.prototype.handleSeriesAdded=function(t){var e=this,i=t.newValue;i.isDisposed()||(i.chart=this,i.parent=this.seriesContainer,i.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(i),i.addDisposer(new _f((function(){e.dataUsers.removeValue(i)}))),this.handleSeriesAdded2(i),this.handleLegendSeriesAdded(i))},e.prototype.handleLegendSeriesAdded=function(t){t.hiddenInLegend||this.legend&&this.legend.addData(t)},e.prototype.handleSeriesAdded2=function(t){var e=this;this.dataInvalid||this._disposers.push(Om.events.once("exitframe",(function(){t.data&&0!=t.data.length||(t.data=e.data,t.showOnInit&&(t.reinit(),t.setPropertyValue("showOnInit",!1),t.showOnInit=!0),t.isDisposed()||t.events.once("datavalidated",(function(){t.data==e.data&&(t._data=[])})))})))},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];cm(this.series.iterator(),(function(t){t.hiddenInLegend||e.push(t)})),t.dataFields.name="name",t.data=e}},e.prototype.createSeries=function(){return new CA},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.series.copyFrom(e.series)},e.prototype.appear=function(){t.prototype.appear.call(this),this.series.each((function(t){t.showOnInit&&t.inited&&t.appear()}))},e}(bA);Om.registeredClasses.SerialChart=MA;var TA=function(t){function e(){var e=t.call(this)||this;e._axis=new Vf,e.dataItems=new Am,e.className="AxisBreak",e.breakSize=.01,e.marginLeft=-5,e.marginRight=-5,e.marginTop=-5,e.marginBottom=-5;var i=new Dp,n=new Vg;n.fill=i.getFor("background"),n.stroke=Ym(),n.fillOpacity=.9,n.zIndex=0,e._fillShape=n;var r=new Vg;r.fill=Ym(),r.stroke=i.getFor("grid"),r.strokeOpacity=.3,r.zIndex=1,e._startLine=r;var s=new Vg;return s.fill=Ym(),s.stroke=Ym("#000000"),s.strokeOpacity=.3,s.zIndex=2,e._endLine=s,e._disposers.push(e._axis),e.applyTheme(),e}return Sd(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(e.prototype,"startLine",{get:function(){return this._startLine},set:function(t){this._startLine&&this._startLine.dispose(),this._startLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLine",{get:function(){return this._endLine},set:function(t){this._endLine&&this._endLine.dispose(),this._endLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillShape",{get:function(){return this._fillShape},set:function(t){this._fillShape&&this._fillShape.dispose(),this._fillShape=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),e.prototype.addBreakSprite=function(t){t.parent=this,t.isMeasured=!1,this._disposers.push(t)},Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this._axis.get()!==t){this._axis.set(t,t.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),t.renderer.createBreakSprites(this);var e=t.axisBreaks.template;this.startLine.copyFrom(e.startLine),this.endLine.copyFrom(e.endLine),this.fillShape.copyFrom(e.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(t){this.setPropertyValue("breakSize",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.draw=function(){(t.prototype.draw.call(this),this.axis)&&this.axis.renderer.updateBreakElement(this)},Object.defineProperty(e.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.AxisBreak=TA;var kA,IA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisDataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.grid).disabled)return;e=i.clone()}else{if((i=t.renderer.grid.template).disabled)return;e=t.renderer.grid.create(),this._disposers.push(new _f((function(){t.renderer.grid.removeValue(e)})))}this.grid=e,e.shouldClone=!1,this._disposers.push(e),e.axis=this.component}}return this._grid},set:function(t){this._grid&&this._grid!=t&&(Af(this.sprites,this._grid),this._grid.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(Af(t.dataItem.sprites,t),t.dataItem.grid=void 0),this.addSprite(t)),this._grid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){if(!this._tick){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.tick).disabled)return;e=i.clone()}else{if((i=t.renderer.ticks.template).disabled)return;e=t.renderer.ticks.create(),this._disposers.push(new _f((function(){t.renderer.ticks.removeValue(e)})))}this.tick=e,e.axis=this.component,e.shouldClone=!1,this._disposers.push(e)}}return this._tick},set:function(t){this._tick&&this._tick!=t&&(Af(this.sprites,this._tick),this._tick.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(Af(t.dataItem.sprites,t),t.dataItem.tick=void 0),this.addSprite(t)),this._tick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){if(!this._label){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.label).disabled)return;e=i.clone()}else{if((i=t.renderer.labels.template).disabled)return;e=t.renderer.labels.create(),this._disposers.push(new _f((function(){t.renderer.labels.removeValue(e)})))}this._disposers.push(e),this.label=e,e.shouldClone=!1,e.axis=this.component,e.virtualParent=t}}return this._label},set:function(t){this._label&&this._label!=t&&(Af(this.sprites,this._label),this._label.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(Af(t.dataItem.sprites,t),t.dataItem.label=void 0),this.addSprite(t)),this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisFill",{get:function(){if(!this._axisFill){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if(i=t.axisRanges.template.axisFill,!this.isTemplate&&i.disabled)return;e=i.clone()}else{if((i=t.renderer.axisFills.template).disabled)return;e=t.renderer.axisFills.create(),this._disposers.push(new _f((function(){t.renderer.axisFills.removeValue(e)})))}this.axisFill=e,e.shouldClone=!1,this._disposers.push(e)}}return this._axisFill},set:function(t){this._axisFill&&this._axisFill!=t&&(Af(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(Af(t.dataItem.sprites,t),t.dataItem.axisFill=void 0),t.axis=this.component,this.addSprite(t)),this._axisFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._label&&(this._label.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contents",{get:function(){if(!this._contents){var t=new Eb;this.addSprite(t),t.isMeasured=!1,this._contents=t;var e=this.component;if(e){var i=e.renderer.createFill(this.component);i.disabled=!1,i.axis=e,this.addSprite(i),this._mask=i,t.mask=i}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(t){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),t&&t.dataItems.push(this),this._axisBreak=t},enumerable:!0,configurable:!0}),e.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},e.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},e.prototype.hasProperty=function(e){return"component"==e||t.prototype.hasProperty.call(this,e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.text=e.text,e.bullet&&(this.bullet=e.bullet.clone()),this.minPosition=e.minPosition,this.maxPosition=e.maxPosition},e.prototype.setVisibility=function(e,i){t.prototype.setVisibility.call(this,e,i),this._contents&&(this._contents.visible=e)},Object.defineProperty(e.prototype,"bullet",{get:function(){return this._bullet},set:function(t){this._bullet&&this._bullet!=t&&(Af(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=t,t&&this.addSprite(t)},enumerable:!0,configurable:!0}),e}(Kb);!function(t){t[t.Start=0]="Start",t[t.Middle=.5]="Middle",t[t.End=1]="End"}(kA||(kA={}));var AA=function(t){function e(){var i=t.call(this)||this;if(i._gridCount=10,i._series=new Am,i.autoDispose=!0,i._axisItemCount=0,i.constructor===e)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");i.hideTooltipWhileZooming=!0,i.minWidth=1e-4,i.minHeight=1e-4,i.className="Axis",i.shouldClone=!1,i.setPropertyValue("cursorTooltipEnabled",!0),i.toggleZoomOutButton=!0,i.zoomable=!0;var n=new Dp;i.title=new Yb,i.title.shouldClone=!1,i._disposers.push(i.title),i.setPropertyValue("startLocation",0),i.setPropertyValue("endLocation",1),i._dataItemsIterator=new pm(i.dataItems,(function(){return i.dataItems.create()})),i._dataItemsIterator.createNewItems=!0;var r=new Ag;i._disposers.push(r),r.label.padding(5,10,5,10),r.background.pointerLength=5,r.fitPointerToBounds=!0,r.background.filters.clear(),r.virtualParent=i;var s=r.background;return s.cornerRadius=0,s.fill=n.getFor("alternativeBackground"),s.stroke=s.fill,s.strokeWidth=1,s.fillOpacity=1,r.label.fill=n.getFor("alternativeText"),i.tooltip=r,i.readerHidden=!0,i.events.on("rangechangestarted",(function(){i.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!0)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!0)}),void 0,!1),i.events.on("rangechangeended",(function(){i.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!1)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!1)}),void 0,!1),i.applyTheme(),i}return Sd(e,t),e.prototype.fillRule=function(t,e){Gd(e)||(e=t.index),e/2==Math.round(e/2)?(t.axisFill.__disabled=!0,t.axisFill.opacity=0):(t.axisFill.opacity=1,t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new IA},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),cm(this.series.iterator(),(function(t){t.invalidateLayout()}))},e.prototype.invalidateSeries=function(){cm(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},e.prototype.updateGridCount=function(){if(this.renderer){var t=this.axisLength/this.renderer.minGridDistance;t!=this._gridCount&&(this._gridCount=t,this.clearCache())}},e.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),t.prototype.validateLayout.call(this),this.updateGridCount();var e=this.renderer;e&&(e.updateAxisLine(),e.updateTooltip(),e.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},e.prototype.initRenderer=function(){},e.prototype.appendDataItem=function(t){var e=this.renderer,i=t.tick;i&&(i.above?i.parent=e.bulletsContainer:i.parent=e.gridContainer),t.label&&(t.label.parent=e);var n=t.axisFill;n&&(n.above?n.parent=e.bulletsContainer:n.parent=e.gridContainer);var r=t.grid;r&&(r.above?r.parent=e.bulletsContainer:r.parent=e.gridContainer),t.bullet&&(t.bullet.parent=e.bulletsContainer)},e.prototype.validate=function(){t.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},e.prototype.validateAxisRanges=function(){var t=this;cm(this.axisRanges.iterator(),(function(e){t.appendDataItem(e),t.validateDataElement(e),e.grid&&e.grid.validate(),e.tick&&e.tick.validate(),e.axisFill&&e.axisFill.validate(),e.label&&e.label.validate()}))},e.prototype.validateBreaks=function(){this._axisBreaks&&cm(this._axisBreaks.iterator(),(function(t){t.invalidate()}))},e.prototype.processBreak=function(t){var e=t.newValue;e.parent=this.renderer.breakContainer,e.axis=this},e.prototype.registerSeries=function(t){var e=this;return this.series.moveValue(t),new zf([new _f((function(){e.series.removeValue(t)})),this.events.on("lengthchanged",t.invalidate,t,!1),this.events.on("lengthchanged",t.createMask,t,!1),this.events.on("startchanged",t.invalidate,t,!1),this.events.on("endchanged",t.invalidate,t,!1)])},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){if(t!=this._renderer){this._renderer=t,t.chart=this.chart,t.axis=this,t.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(t.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var e=this.renderer.labels.create();this._disposers.push(e),e.dataItem=this.dataItems.template.clone(),e.text="L",e.parent=this.renderer,e.shouldClone=!1,e.fillOpacity=0,e.opacity=0,e.strokeOpacity=0,e.interactionsEnabled=!1,e.validate(),this.ghostLabel=e,this.events.on("beforedatavalidated",(function(){e.text="L"}),void 0,!1)}},enumerable:!0,configurable:!0}),e.prototype.positionToAngle=function(t){return this.renderer.positionToAngle(t)},e.prototype.pointToPosition=function(t){return this.renderer.pointToPosition(t)},e.prototype.positionToCoordinate=function(t){return this.renderer.positionToCoordinate(t)},e.prototype.getAnyRangePath=function(t,e){return this.renderer.getPositionRangePath(t,e)},e.prototype.anyToPosition=function(t){return 0},e.prototype.anyToPoint=function(t){return{x:0,y:0,angle:0}},e.prototype.getPositionRangePath=function(t,e){return this.renderer?this.renderer.getPositionRangePath(t,e):""},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)&&(t&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(t){this.setPropertyValue("toggleZoomOutButton",t)},enumerable:!0,configurable:!0}),e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this._tooltipPosition=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i=this._tooltip;if(!i||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(e||(t=this.toAxisPosition(t)),!Gd(t)||t<this.start||t>this.end)return i.hide(0),void(this._tooltipPosition=void 0);var n=this.renderer;i.parent||(i.parent=this.tooltipContainer);var r=n.tooltipLocation,s=this.getCellStartPosition(t),a=this.getCellEndPosition(t);if("fixed"==this.tooltipPosition&&(t=s+(a-s)*r),t=Xd(t,this.start,this.end),this._tooltipPosition!=t){this._tooltipPosition=t;var o=n.tooltipLocation2,u=n.positionToPoint(s,o),l=n.positionToPoint(a,o);this.currentItemStartPoint=u,this.currentItemEndPoint=l,n.fullWidthTooltip&&(i.width=l.x-u.x,i.height=l.y-u.y);var h=Iv(n.positionToPoint(t,o),this.renderer.line);i.text=this.getTooltipText(t),i.text&&(i.delayedPointTo(h),i.show())}this.cursorTooltipEnabled&&!this.tooltip.disabled||i.hide(0)}},e.prototype.toAxisPosition=function(t){if(null!=(t=this.renderer.toAxisPosition(t)))return t*=this.end-this.start,t=this.renderer.inversed?this.end-t:this.start+t},e.prototype.toGlobalPosition=function(t){return this.renderer.inversed?t=this.end-t:t-=this.start,t/(this.end-this.start)},e.prototype.getTooltipText=function(t){},e.prototype.updateTooltip=function(t,e){var i=this._tooltip;i&&(i.fixDoc=!1,i.pointerOrientation=t,i.setBounds(jv(e,this.renderer.line)))},e.prototype.roundPosition=function(t,e,i){return t},e.prototype.getCellStartPosition=function(t){return t},e.prototype.getCellEndPosition=function(t){return t},Object.defineProperty(e.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var t=this.createDataItem();t.isRange=!0,t.axisFill=this.renderer.axisFills.template.clone(),t.grid=this.renderer.grid.template.clone(),t.tick=this.renderer.ticks.template.clone(),t.label=this.renderer.labels.template.clone(),t.isTemplate=!0,t.component=this,t.axisFill.disabled=!1,t.tick.disabled=!1,t.grid.disabled=!1,t.label.disabled=!1,this._axisRanges=new jm(t),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new km(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),e.prototype.processAxisRange=function(t){var e=t.newValue;e.component=this,e.isRange=!0},Object.defineProperty(e.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new Lm(this.createAxisBreak(),(function(t,e){return Em(t.adjustedStartValue,e.adjustedStartValue)})),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new km(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),e.prototype.createAxisBreak=function(){return new TA},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Am),this._series},enumerable:!0,configurable:!0}),e.prototype.processSeriesDataItems=function(){},e.prototype.processSeriesDataItem=function(t,e){},e.prototype.postProcessSeriesDataItems=function(t){},e.prototype.postProcessSeriesDataItem=function(t){},e.prototype.updateAxisBySeries=function(){},e.prototype.hideUnusedDataItems=function(){var t=this,e=this._dataItemsIterator;e.createNewItems=!1,cm(e.iterator(),(function(e){t.validateDataElement(e),e.__disabled=!0})),e.clear(),e.createNewItems=!0},e.prototype.getSeriesDataItem=function(t,e,i){},e.prototype.getAngle=function(t,e,i,n,r){},e.prototype.getX=function(t,e,i,n,r){},e.prototype.getPositionX=function(t,e,i,n,r){},e.prototype.getY=function(t,e,i,n,r){},e.prototype.getPositionY=function(t,e,i,n,r){},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.dataChangeUpdate=function(){},e.prototype.seriesDataChangeUpdate=function(t){},e.prototype.adjustDifference=function(t,e){var i=e-t;if(Gd(i))return this._axisBreaks&&hm(this._axisBreaks.iterator(),(function(n){var r,s,a,o,u,l,h,c,d=n.adjustedStartValue,f=n.adjustedEndValue;if(Gd(d)&&Gd(f)){if(d>e)return!1;if(f>=t&&Gd(d)&&Gd(f)){var m=n.breakSize,v=(s={start:t,end:e},a=Bd((r={start:d,end:f}).start),o=Bd(s.start),u=Bd(r.end),l=Bd(s.end),h=Math.max(a,o),(c=Math.min(u,l))<h?void 0:{start:h,end:c});v&&(i-=(v.end-v.start)*(1-m))}return!0}})),i},e.prototype.isInBreak=function(t){if(this._axisBreaks)return e=this._axisBreaks.iterator(),i=function(e){return t>=e.adjustedStartValue&&t<=e.adjustedEndValue},e((function(t){return!i(t)||(n=t,!1)})),n;var e,i,n},e.prototype.fixAxisBreaks=function(){var t=this;if(this._axisBreaks){var e=this._axisBreaks;if(e.length>0){kf(lm(e.iterator()),(function(e){var i=rf(e.startValue,e.endValue),n=nf(e.startValue,e.endValue);e.adjustedStartValue=i,e.adjustedEndValue=n,t._axisBreaks.update(e)}));var i=e.first,n=Math.min(i.startValue,i.endValue);cm(e.iterator(),(function(t){var e=t.adjustedStartValue,i=t.adjustedEndValue;e<n&&(e=n,i<n&&(i=n)),t.adjustedStartValue=e,t.adjustedEndValue=i}))}}},Object.defineProperty(e.prototype,"startIndex",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getPositionLabel=function(t){return Math.round(100*t)+"%x"},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.createSeriesRange=function(t){var e=this.axisRanges.create();return e.component=this,e.axisFill=this.renderer.axisFills.template.clone(),e.axisFill.disabled=!1,e.axisFill.fillOpacity=0,e.grid=this.renderer.grid.template.clone(),e.grid.disabled=!0,e.tick=this.renderer.ticks.template.clone(),e.tick.disabled=!0,e.label=this.renderer.labels.template.clone(),e.label.disabled=!0,e.addDisposer(new _f((function(){t.axisRanges.removeValue(e)}))),t.axisRanges.push(e),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.renderer?this.renderer.copyFrom(e.renderer):e.renderer&&(this.renderer=e.renderer.clone(),this._disposers.push(this.renderer)),e.title&&(this.title?this.title.copyFrom(e.title):(this.title=e.title.clone(),this.title.parent=this),this._disposers.push(this.title))},e.prototype.resetIterators=function(){this._dataItemsIterator.reset()},e.prototype.processConfig=function(e){if(e&&Rd(e.axisRanges)&&Wd(e.axisRanges))for(var i=0,n=e.axisRanges.length;i<n;i++){var r=e.axisRanges[i];Rd(r.series)&&Vd(r.series)&&this.map.hasKey(r.series)&&(e.axisRanges[i]=this.createSeriesRange(this.map.getKey(r.series)),delete r.series,e.axisRanges[i].config=r)}t.prototype.processConfig.call(this,e)},e.prototype.configOrder=function(e,i){return e==i?0:"title"==e?1:"title"==i||"component"==e?-1:"component"==i?1:t.prototype.configOrder.call(this,e,i)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.renderer&&(this.renderer.gridContainer.disabled=e),i},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this._title!=t&&this._title.dispose(),t&&(this._title=t,t.parent=this,t.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(t){this.setPropertyValue("zoomable",t)},enumerable:!0,configurable:!0}),e}(Jb);Om.registeredClasses.Axis=AA,Om.registeredClasses.AxisDataItem=IA,Hb.push({relevant:Ub.maybeXS,state:function(t,e){if(t instanceof AA&&t.tooltip){var i=t.states.create(e);return i.properties.cursorTooltipEnabled=!1,i}return null}});var jA=function(t){function e(){var e=t.call(this)||this;e.className="AxisLine",e.element=e.paper.add("path");var i=new Dp;return e.stroke=i.getFor("grid"),e.strokeOpacity=.15,e.pixelPerfect=!0,e.fill=Ym(),e.applyTheme(),e.interactionsEnabled=!1,e}return Sd(e,t),e}(Pb);Om.registeredClasses.AxisLine=jA;var FA=function(t){function e(e){var i=t.call(this)||this;i.axis=e,i.element=i.paper.add("path"),i.className="AxisFill",i.isMeasured=!1,i.location=0,i.above=!1;var n=new Dp;return i.fill=n.getFor("alternativeBackground"),i.fillOpacity=0,i.applyTheme(),i}return Sd(e,t),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e.prototype.draw=function(){t.prototype.draw.call(this),this.__disabled||this.disabled||this.axis&&Gd(this.startPosition)&&Gd(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(e.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(t){this.setPropertyValue("startPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(t){this.setPropertyValue("endPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this.element.attr({d:t}),!0)},Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.AxisFill=FA;var DA=function(t){function e(){var e=t.call(this)||this;e.className="Grid",e.element=e.paper.add("path"),e.location=.5,e.isMeasured=!1,e.above=!1;var i=new Dp;return e.stroke=i.getFor("grid"),e.pixelPerfect=!0,e.strokeOpacity=.15,e.fill=Ym(),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(Pb);Om.registeredClasses.Grid=DA,Hb.push({relevant:Ub.maybeXS,state:function(t,e){if(t instanceof DA){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var PA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisLabel",e.isMeasured=!1,e.padding(10,10,10,10),e.location=.5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(Yb);Om.registeredClasses.AxisLabel=PA;var LA=function(t){function e(){var e=t.call(this)||this;e.className="Tick";var i=new Dp;return e.fillOpacity=0,e.length=6,e.strokeOpacity=.2,e.stroke=i.getFor("grid"),e.isMeasured=!1,e.nonScalingStroke=!0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(t){this.setPropertyValue("length",t,!0)},enumerable:!0,configurable:!0}),e}(Pb);Om.registeredClasses.Tick=LA;var EA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisTick",e.element=e.paper.add("path"),e.location=.5,e.above=!1,e.isMeasured=!1,e.pixelPerfect=!0,e.strokeOpacity=0,e.length=5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(LA);Om.registeredClasses.AxisTick=EA;var NA=function(t){function e(){var e=t.call(this)||this;e._chart=new Vf,e.className="AxisRenderer",e.minGridDistance=50,e.inside=!1,e.inversed=!1,e.tooltipLocation=.5,e.fullWidthTooltip=!1,e.cellStartLocation=0,e.cellEndLocation=1,e.minLabelPosition=0,e.maxLabelPosition=1,e.shouldClone=!1;var i=e.createChild(Eb);i.shouldClone=!1,i.layout="none",i.virtualParent=e,i.width=Ad(100),i.height=Ad(100),e.gridContainer=i,i.events.on("maxsizechanged",(function(){e.inited&&e.invalidateAxisItems()}),e,!1);var n=e.createChild(Eb);n.shouldClone=!1,n.isMeasured=!1,n.layout="none",n.width=Ad(100),n.height=Ad(100),e.breakContainer=n;var r=e.createChild(Eb);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",r.width=Ad(100),r.height=Ad(100),e.bulletsContainer=r,e.line=e.createChild(jA),e.line.shouldClone=!1,e.line.strokeOpacity=0;var s=e.createChild(DA);s.shouldClone=!1,e.baseGrid=s;var a=e._disposers;return a.push(s),a.push(e.line),a.push(i),a.push(n),a.push(r),a.push(e._chart),e.ticks.template.disabled=!0,e.axisFills.template.disabled=!0,e.axisFills.template.interactionsEnabled=!1,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis},set:function(t){this.setAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setAxis=function(t){this._axis=t,this.baseGrid.parent=t,this.line.parent=t,this.gridContainer.bind("opacity",t)},e.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},e.prototype.updateTooltip=function(){},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.positionItem=function(t,e){t&&t.moveTo(e)},e.prototype.positionToPoint=function(t,e){return{x:0,y:0}},e.prototype.positionToAngle=function(t){return 0},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength;return e.renderer.inversed?(e.end-t)*i:(t-e.start)*i},e.prototype.updateGridContainer=function(){},e.prototype.getHeight=function(){var t=this.gridContainer;return t.parent?t.parent.pixelHeight:this.gridContainer.pixelHeight||0},e.prototype.getWidth=function(){var t=this.gridContainer;return t.parent?t.parent.pixelWidth:this.gridContainer.pixelWidth||0},e.prototype.coordinateToPosition=function(t,e){var i=this.axis,n=i.axisFullLength;return Yd(i.renderer.inversed?i.end-t/n:t/n+i.start,5)},e.prototype.pointToPosition=function(t){return 0},e.prototype.getPositionRangePath=function(t,e){return""},e.prototype.invalidateAxisItems=function(){var t=this.axis;t&&t.invalidateDataItems()},e.prototype.updateGridElement=function(t,e,i){},e.prototype.updateTickElement=function(t,e,i){},e.prototype.updateBullet=function(t,e,i){},e.prototype.updateLabelElement=function(t,e,i,n){},e.prototype.updateFillElement=function(t,e,i){t.startPosition=e,t.endPosition=i},e.prototype.updateAxisLine=function(){},e.prototype.updateBaseGridElement=function(){},e.prototype.updateBreakElement=function(t){this.positionItem(t.startLine,t.startPoint),this.toggleVisibility(t.startLine,t.startPosition,0,1),this.positionItem(t.endLine,t.endPoint),this.toggleVisibility(t.endLine,t.endPosition,0,1)},Object.defineProperty(e.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(t){this.setPropertyValue("minGridDistance",t)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e.prototype.toggleVisibility=function(t,e,i,n){var r=this.axis,s=t.dataItem;s&&s instanceof IA&&(Gd(s.minPosition)&&(i=s.minPosition),Gd(s.maxPosition)&&(n=s.maxPosition));var a=r.start+(r.end-r.start)*(i-1e-4),o=r.start+(r.end-r.start)*(n+1e-4);t.disabled||(t.__disabled=e<a||e>o)},e.prototype.createBreakSprites=function(t){},Object.defineProperty(e.prototype,"axisFills",{get:function(){if(!this._axisFills){var t=this.createFill(this.axis);this._axisFills=new jm(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new km(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),e.prototype.createFill=function(t){return new FA(t)},Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.createGrid();this._grid=new jm(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new km(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),e.prototype.createGrid=function(){return new DA},Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,t.isMeasured=!1,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new jm(t),this._disposers.push(new km(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),e.prototype.createTick=function(){return new EA},Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();this._labels=new jm(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new km(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createLabel=function(){return new PA},Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t)&&this.axis&&this.axis.invalidate(),t?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(t){this.setPropertyValue("opposite",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(t){this.setPropertyValue("fullWidthTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(t){this.setPropertyValue("tooltipLocation2",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(t){this.setPropertyValue("cellStartLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(t){this.setPropertyValue("cellEndLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(t){this.setPropertyValue("inversed",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(t){this.setPropertyValue("minLabelPosition",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(t){this.setPropertyValue("maxLabelPosition",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.grid.template.copyFrom(e.grid.template),this.ticks.template.copyFrom(e.ticks.template),this.labels.template.copyFrom(e.labels.template),this.axisFills.template.copyFrom(e.axisFills.template),this.line.copyFrom(e.line),this.baseGrid.copyFrom(e.baseGrid)},e.prototype.toAxisPosition=function(t){return t},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(Eb);Om.registeredClasses.AxisRenderer=NA;var RA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisBullet",e.location=.5,e.isMeasured=!1,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(Eb);Om.registeredClasses.AxisBullet=RA;var BA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererY",e.minGridDistance=40,e.opposite=!1,e.height=Ad(100),e.labels.template.verticalCenter="middle",e.applyTheme(),e}return Sd(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="horizontal"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.y=t.pixelY,e.height=t.axisLength}},e.prototype.toAxisPosition=function(t){var e=this.axis;if(e){var i=1-t,n=e.relativePositionSprite,r=e.pixelY;if(n?r=Av({x:0,y:this.pixelY},this.parent,n).y:n=e.parent,n)return 1-(i-r/n.innerHeight)/(e.axisLength/n.innerHeight)}return t},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){var i=e.title;i.valign="middle",e.height instanceof Id||(e.height=Ad(100)),this.opposite?(i.rotation=90,this.line.toBack(),i.toFront()):(i.rotation=-90,i.toBack(),this.line.toFront())}},e.prototype.updateTooltip=function(){if(this.axis){var t=2e3,e=0,i=t,n=this.axisLength;this.opposite?this.inside&&(e=-2e3,i=t):this.inside||(e=-2e3,i=t),this.axis.updateTooltip("horizontal",{x:e,y:0,width:i,height:n})}},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredHeight-t.pixelPaddingTop-t.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:0,y:this.positionToCoordinate(t)}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.y,t.x)},e.prototype.coordinateToPosition=function(t,e){var i=this.axis,n=i.axisFullLength;return Yd(i.renderer.inversed?1-i.start-t/n:t/n+(1-i.end),5)},e.prototype.getPositionRangePath=function(t,e){var i=Xd(this.positionToCoordinate(t),0,this.axisLength),n=Xd(this.positionToCoordinate(e),0,this.axisLength),r=Math.abs(n-i),s=this.getWidth();return fg({x:0,y:Math.min(i,n),width:s,height:r},!0)},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);t.path=sg({x:0,y:0})+ag({x:this.getWidth(),y:0}),this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e),r=t.length;n.x=Av({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.opposite?r*=t.inside?-1:1:r*=t.inside?1:-1,t.path=sg({x:0,y:0})+ag({x:r,y:0}),this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=sg({x:0,y:0})+ag({x:0,y:this.axisLength})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,i=this.getWidth(),n=this.axisLength,r=e.basePoint.y,s=this.baseGrid;if(r<-.2||r>n+.2)s.hide(0);else{var a=Av({x:0,y:0},this.gridContainer,s.parent).x;s.path=sg({x:0,y:0})+ag({x:i,y:0}),s.moveTo({x:a,y:r}),s.show(0)}},e.prototype.updateLabelElement=function(t,e,i,n){Rd(n)||(n=t.location),e+=(i-e)*n,t.isMeasured=!t.inside;var r,s=this.positionToPoint(e),a=0,o=this.gridContainer.maxWidth;this.opposite?(t.inside?(r="right","left"==t.align&&(a=-o,r="left"),"center"==t.align&&(a=-o/2,r="middle")):r="left",s.x=0+a):(t.inside?(r="left","right"==t.align&&(a=o,r="right"),"center"==t.align&&(a=o/2,r="middle")):r="right",s.x=this.measuredWidth+a),0==t.rotation&&(t.horizontalCenter=r),this.positionItem(t,s),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var i=e.startLine,n=e.endLine,r=e.fillShape,s=e.startPoint,a=e.endPoint,o=e.pixelMarginLeft,u=this.getWidth()-e.pixelMarginLeft-e.pixelMarginRight;s.y=Xd(s.y,-1,this.axisLength+1),a.y=Xd(a.y,-1,this.axisLength+1),s.y==a.y&&(s.y<0||s.y>this.axisLength)?e.fillShape.__disabled=!0:e.fillShape.__disabled=!1;var l=Math.abs(u-o);i.x=o,i.height=0,i.width=l,n.x=o,n.height=0,n.width=l,r.width=l,r.height=Math.abs(a.y-s.y),r.x=o,r.y=a.y},e.prototype.createBreakSprites=function(t){t.startLine=new Vg,t.endLine=new Vg;var e=new Gg;e.setWavedSides(!0,!1,!0,!1),t.fillShape=e},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength;return e.renderer.inversed?(t-e.start)*i:(e.end-t)*i},e.prototype.updateBullet=function(t,e,i){var n=.5;t instanceof RA&&(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e);r.x=Av({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e}(NA);Om.registeredClasses.AxisRendererY=BA,Hb.push({relevant:Ub.widthS,state:function(t,e){if(t instanceof BA){var i=t.states.create(e);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),Hb.push({relevant:Ub.widthXS,state:function(t,e){if(t instanceof BA){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var _A=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisBreak",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),e}(TA);Om.registeredClasses.ValueAxisBreak=_A;var zA=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisDataItem",e.values.value={},e.values.endValue={},e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(t){this.setValue("endValue",t)},enumerable:!0,configurable:!0}),e}(IA),VA=function(t){function e(){var e=t.call(this)||this;return e._stepDecimalPlaces=0,e._prevStepDecimalPlaces=0,e._adjustLabelPrecision=!0,e._baseValue=0,e._adjustedStart=0,e._adjustedEnd=1,e._extremesChanged=!1,e._deltaMinMax=1,e._dsc=!1,e.calculateTotals=!1,e.className="ValueAxis",e.axisFieldName="value",e.setPropertyValue("maxZoomFactor",1e3),e.setPropertyValue("extraMin",0),e.setPropertyValue("extraMax",0),e.setPropertyValue("strictMinMax",!1),e.setPropertyValue("maxPrecision",Number.MAX_VALUE),e.setPropertyValue("adjustLabelPrecision",!0),e.setPropertyValue("extraTooltipPrecision",0),e.keepSelection=!1,e.includeRangesInMinMax=!1,e.applyTheme(),e}return Sd(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component;t.axisFill.disabled||(Yd(e/i.step/2,5)==Math.round(e/i.step/2)?t.axisFill.__disabled=!0:t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new zA},e.prototype.createAxisBreak=function(){return new _A},e.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(0!=this._start&&this.dispatchImmediately("startchanged"),1!=this._end&&this.dispatchImmediately("endchanged"),0==this._start&&1==this._end||this.dispatchImmediately("startendchanged")):0==this._start&&1==this._end||(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},e.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var t=this.series.getIndex(0),e=t.startIndex;if(t.dataItems.length>0){e>0&&e--;var i=t.endIndex;i<t.dataItems.length&&i++;for(var n=function(t){var e={},i={};r.series.each((function(n){if(!n.excludeFromTotal){var r=n.dataItems.getIndex(t);r&&nm(r.values,(function(t){var n=r.values[t].workingValue;Gd(n)&&(Gd(e[t])?e[t]+=Math.abs(n):e[t]=Math.abs(n),Gd(i[t])?i[t]+=n:i[t]=n)}))}})),r.series.each((function(n){if(!n.excludeFromTotal){var r=n.dataItems.getIndex(t);r&&nm(r.values,(function(t){var n=r.values[t].workingValue;Gd(n)&&(r.setCalculatedValue(t,e[t],"total"),r.setCalculatedValue(t,100*n/e[t],"totalPercent"),r.setCalculatedValue(t,i[t],"sum"))}))}}))},r=this,s=e;s<i;++s)n(s)}}},e.prototype.validate=function(){this.axisLength<=0||(t.prototype.validate.call(this),this.getMinMax(),Gd(this._minAdjusted)||this.dataItems.each((function(t){t.value=null})),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},e.prototype.calculateZoom=function(){if(Gd(this.min)&&Gd(this.max)){var t=this.positionToValue(this.start),e=this.positionToValue(this.end),i=this.adjustDifference(t,e),n=this.adjustMinMax(t,e,i,this._gridCount,!0),r=function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(n.step);this._stepDecimalPlaces=r,t=Yd(t,r),e=Yd(e,r);var s=(n=this.adjustMinMax(t,e,i,this._gridCount,!0)).step;if(this.syncWithAxis){var a=this.getCache(t+"-"+e);Gd(a)&&(s=a)}else t=n.min,e=n.max;(this._minZoomed!=t||this._maxZoomed!=e||this._step!=s||this._dsc)&&(this._dsc=!1,this._minZoomed=t,this._maxZoomed=e,this._step=s,this.dispatchImmediately("selectionextremeschanged"))}},e.prototype.fixSmallStep=function(t){return 1+t==1?(t*=2,this.fixSmallStep(t)):t},e.prototype.validateAxisElements=function(){var t=this;if(Gd(this.max)&&Gd(this.min)){var e=this.minZoomed-2*this._step;if(this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E):0==(e=Math.floor(this.minZoomed/this._step)*this._step)&&(e=this.minZoomed);else e=Math.floor(e/this._step)*this._step;var i=this._maxZoomed+this._step;this.resetIterators();var n=this._dataItemsIterator;if(0==this._step)return;this._step=this.fixSmallStep(this._step);var r=0,s=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;e<=i;){if(!this.isInBreak(e)){var a=n.find((function(t){return t.value===e}));a.__disabled&&(a.__disabled=!1),this.appendDataItem(a),a.axisBreak=void 0,(a.value!=e||s)&&(a.value=e,a.text=this.formatLabel(e),a.label&&a.label.invalid&&a.label.validate(),a.value>=this.min&&a.value<=this.max&&a.label&&("Y"==this.axisLetter&&a.label.measuredWidth>this.ghostLabel.measuredWidth||"X"==this.axisLetter&&a.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=a.label.currentText,this.ghostLabel.validate())),this.validateDataElement(a)}r++;var o=e;if(this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E+r):e+=this._step;else e+=this._step;var u=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(u<1){var l=Math.round(Math.abs(Math.log(Math.abs(u))*Math.LOG10E))+2;if(l=Math.min(13,l),o==(e=Yd(e,l))){e=i;break}}}var h=this._axisBreaks;if(h){var c=this.renderer;cm(h.iterator(),(function(e){if(e.breakSize>0&&of(e.startPoint,e.endPoint)>c.minGridDistance)for(var i=e.adjustedMin;i<=e.adjustedMax;){if(i>=e.adjustedStartValue&&i<=e.adjustedEndValue){var r=n.find((function(t){return t.value===i}));r.__disabled&&(r.__disabled=!1),t.appendDataItem(r),r.axisBreak=e,r.value!=i&&(r.value=i,r.text=t.formatLabel(i),r.label&&r.label.invalid&&r.label.validate()),t.validateDataElement(r)}i+=e.adjustedStep}}))}}},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var i=this.renderer,n=e.value,r=e.endValue,s=this.valueToPosition(n);e.position=s;var a=s,o=this.valueToPosition(n+this._step);Gd(r)&&(o=a=this.valueToPosition(r)),e.point=i.positionToPoint(s);var u=e.tick;u&&!u.disabled&&i.updateTickElement(u,s,a);var l=e.grid;l&&!l.disabled&&i.updateGridElement(l,s,a);var h=e.label;h&&!h.disabled&&i.updateLabelElement(h,s,a);var c=e.axisFill;c&&!c.disabled&&(i.updateFillElement(c,s,o),e.isRange||this.fillRule(e)),e.bullet&&i.updateBullet(e.bullet,s,a);var d=e.mask;d&&i.updateFillElement(d,s,o)},e.prototype.formatLabel=function(t){return this.adjustLabelPrecision&&0!=t?this.numberFormatter.format(t,void 0,this._stepDecimalPlaces):this.numberFormatter.format(t)},Object.defineProperty(e.prototype,"basePoint",{get:function(){var t=this.baseValue,e=this.valueToPosition(t);return this.renderer.positionToPoint(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseValue",{get:function(){var t=this._baseValue;return this.logarithmic&&(t=this.min),this._adapterO?this._adapterO.apply("baseValue",t):t},set:function(t){this._baseValue=t,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),e.prototype.anyToPosition=function(t){return this.valueToPosition(t)},e.prototype.valueToPoint=function(t){var e=this.valueToPosition(t),i=this.renderer.positionToPoint(e),n=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:n}},e.prototype.anyToPoint=function(t){return this.valueToPoint(t)},e.prototype.valueToPosition=function(t){if(Gd(t)){var e=this.min,i=this.max;if(Gd(e)&&Gd(i)){var n=this._difference,r=this._axisBreaks;r&&r.length>0&&hm(r.iterator(),(function(n){var r=n.adjustedStartValue,s=n.adjustedEndValue;if(Gd(r)&&Gd(s)){if(t<r)return!1;if(sf({start:r,end:s},{start:e,end:i})){r=Math.max(r,e),s=Math.min(s,i);var a=n.breakSize;t>s?e+=(s-r)*(1-a):t<r||(t=r+(t-r)*a)}}return!0}));var s=void 0;if(this.logarithmic){var a=this.treatZeroAs;Gd(a)&&t<=a&&(t=a),s=(Math.log(t)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}else s=(t-e)/n;return s}}return 0},e.prototype.invalidateLabels=function(){t.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each((function(t){t.value=void 0})),this.invalidate())},e.prototype.positionToValue=function(t){var e=this.min,i=this.max;if(Gd(e)&&Gd(i)){var n=i-e,r=null,s=this._axisBreaks;return s&&s.length>0&&hm(s.iterator(),(function(s){var a=s.startPosition,o=s.endPosition,u=s.adjustedStartValue,l=s.adjustedEndValue;if(Gd(u)&&Gd(l)){if(u>i)return!1;if(sf({start:u,end:l},{start:e,end:i})){u=nf(u,e),l=rf(l,i);var h=s.breakSize;if(n-=(l-u)*(1-h),t>o)e+=(l-u)*(1-h);else if(!(t<a))return r=u+(t-a)/(o-a)*(l-u),!1}return!0}})),Gd(r)||(r=this.logarithmic?Math.pow(Math.E,(t*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):t*n+e),r}},e.prototype.xToValue=function(t){return this.positionToValue(this.pointToPosition({x:t,y:0}))},e.prototype.yToValue=function(t){return this.positionToValue(this.pointToPosition({x:0,y:t}))},e.prototype.pointToPosition=function(t){return this.renderer instanceof BA?1-this.renderer.pointToPosition(t):this.renderer.pointToPosition(t)},e.prototype.animateMinMax=function(t,e){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing)},e.prototype.getMinMax=function(){var t=this;this.updateGridCount();var e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(Gd(this._minDefined)&&Gd(this._maxDefined)||(this.series.each((function(n){if(!n.ignoreMinMax){var r=n.min(t);Gd(r)&&r<e&&(e=r);var s=n.max(t);Gd(s)&&s>i&&(i=s)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(t){if(!t.ignoreMinMax){var n=rf(t.value,t.endValue),r=nf(t.value,t.endValue);(n<e||!Gd(e))&&(e=n),(r>i||!Gd(i))&&(i=r)}}))),this.logarithmic){var n=this.treatZeroAs;Gd(n)&&e<=0&&(e=n),e<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(0==e&&0==i&&(i=.9,e=-.9),Gd(this._minDefined)&&(e=this._minDefined),Gd(this._maxDefined)&&(i=this._maxDefined),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),Gd(e)&&Gd(i)){this._minReal=e,this._maxReal=i,e==Number.POSITIVE_INFINITY&&(e=void 0),i==Number.NEGATIVE_INFINITY&&(i=void 0);var r=this.adjustDifference(e,i);if(e=this.fixMin(e),(i=this.fixMax(i))-e<=1/Math.pow(10,15)){if(i-e!=0)this._deltaMinMax=(i-e)/2;else{var s=Math.log(Math.abs(i))*Math.LOG10E,a=Math.pow(10,Math.floor(s));a/=10,this._deltaMinMax=a}e-=this._deltaMinMax,i+=this._deltaMinMax}e-=(i-e)*this.extraMin,i+=(i-e)*this.extraMax;var o=this.strictMinMax;Gd(this._maxDefined)&&(o=!0);var u=this.adjustMinMax(e,i,r,this._gridCount,o);if(e=u.min,r=(i=u.max)-e,u=this.adjustMinMax(e,i,i-e,this._gridCount,!0),e=u.min,i=u.max,this.strictMinMax&&(e=Gd(this._minDefined)?this._minDefined:this._minReal,(i=Gd(this._maxDefined)?this._maxDefined:this._maxReal)-e<=1e-8&&(e-=this._deltaMinMax,i+=this._deltaMinMax),e-=(i-e)*this.extraMin,i+=(i-e)*this.extraMax),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),this._step=u.step,Gd(e)||Gd(i)||(this.start=0,this.end=1,this.renderer.labels.each((function(t){t.dataItem.text=""}))),(this._minAdjusted!=e||this._maxAdjusted!=i)&&Gd(e)&&Gd(i)){var l=this._minMaxAnimation;if(this._extremesChanged&&Gd(this._minAdjusted)&&Gd(this._maxAdjusted)&&this.inited){if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._finalMin=e,this._finalMax=i,(l=this.animateMinMax(e,i))&&!l.isFinished()?(l.events.on("animationprogress",this.validateDataItems,this),l.events.on("animationended",(function(){t.series.each((function(t){t.validate()})),t.validateDataItems(),t.handleSelectionExtremesChange()})),this._minMaxAnimation=l):this.series.each((function(t){t.invalidate()})),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._minAdjusted=e,this._maxAdjusted=i,this._finalMin=e,this._finalMax=i,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged"),this._saveMinMax(e,i)}}this._extremesChanged=!1,this._difference=this.adjustDifference(e,i)}},e.prototype.fixMin=function(t){return t},e.prototype.fixMax=function(t){return t},e.prototype.adjustMinMax=function(t,e,i,n,r){n<=1&&(n=1),n=Math.round(n);var s=t,a=e;0===i&&(i=Math.abs(e));var o=Math.log(Math.abs(i))*Math.LOG10E,u=Math.pow(10,Math.floor(o)),l=u/=10;r&&(l=0),this.logarithmic?(t<=0&&(t=this.baseValue),t==1/0&&(t=1),e==-1/0&&(e=10),this.strictMinMax?(t=this._minDefined>0?this._minDefined:t,this._maxDefined>0&&(e=e)):(t=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E)),e=Math.pow(10,Math.ceil(Math.log(Math.abs(e))*Math.LOG10E)))):(r?(t=Math.floor(t/u)*u,e=Math.ceil(e/u)*u):(t=Math.ceil(t/u)*u-l,e=Math.floor(e/u)*u+l),t<0&&s>=0&&(t=0),e>0&&a<=0&&(e=0)),o=Math.log(Math.abs(i))*Math.LOG10E,u=Math.pow(10,Math.floor(o)),u/=10;var h=Math.ceil(i/n/u)*u,c=Math.pow(10,Math.floor(Math.log(Math.abs(h))*Math.LOG10E)),d=Math.ceil(h/c);d>5?d=10:d<=5&&d>2&&(d=5),h=Math.ceil(h/(c*d))*c*d,this.maxPrecision<Number.MAX_VALUE&&h!=Zd(h,this.maxPrecision)&&(h=Zd(h,this.maxPrecision));var f=0;if(c<1&&(h=Yd(h,f=Math.round(Math.abs(Math.log(Math.abs(c))*Math.LOG10E))+1)),!this.logarithmic){var m=Math.floor(t/h);t=Yd(h*m,f);var v=void 0;(v=r?Math.floor(e/h):Math.ceil(e/h))==m&&v++,(e=Yd(h*v,f))<a&&(e+=h),t>s&&(t-=h)}return{min:t,max:e,step:h}},Object.defineProperty(e.prototype,"min",{get:function(){var t=this._minAdjusted;return Gd(t)||(t=this._minDefined),t},set:function(t){this._minDefined!=t&&(this._minDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(t){this.setPropertyValue("extraMin",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(t){this.setPropertyValue("extraMax",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){var t=this._maxAdjusted;return Gd(t)||(t=this._maxDefined),t},set:function(t){this._maxDefined!=t&&(this._maxDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(t){this.setPropertyValue("adjustLabelPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.registerSeries=function(e){return new zf([t.prototype.registerSeries.call(this,e),e.events.on("extremeschanged",this.handleExtremesChange,this,!1),e.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",e.invalidate,e,!1)])},e.prototype.handleSelectionExtremesChange=function(){var t,e,i=this,n=!0;if(cm(this.series.iterator(),(function(r){if(!r.ignoreMinMax&&!r.isHidden&&!r.outOfRange){r.visible&&!r.isHiding&&(n=!1);var s=r.selectionMin(i),a=r.selectionMax(i);Gd(s)&&(!Gd(t)||s<t)&&(t=s),Gd(a)&&(!Gd(e)||a>e)&&(e=a)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(i){if(!i.ignoreMinMax){var n=rf(i.value,i.endValue),r=nf(i.value,i.endValue);n<t&&(t=n),r>e&&(e=r)}})),Gd(this._minDefined)?t=this.strictMinMax?this._minDefined:this.min:this.strictMinMax&&(t=this._minReal),Gd(this._maxDefined)?e=this.strictMinMax?this._maxDefined:this.max:this.strictMinMax&&(e=this._maxReal),t==e){t-=this._deltaMinMax,e+=this._deltaMinMax;var r=this.adjustMinMax(t,e,0,this._gridCount,this.strictMinMax);t=r.min,e=r.max}var s=this.adjustDifference(t,e),a=this.adjustMinMax(t,e,s,this._gridCount);t=a.min,e=a.max,t-=(e-t)*this.extraMin,e+=(e-t)*this.extraMax,t=Xd(t,this.min,this.max),e=Xd(e,this.min,this.max),s=this.adjustDifference(t,e),a=this.adjustMinMax(t,e,s,this._gridCount,!0),t=a.min,e=a.max,this.strictMinMax&&(t=nf(t,this._minDefined),e=rf(e,this._maxDefined));var o=a.step;this.syncWithAxis&&(a=this.syncAxes(t,e,o),t=a.min,e=a.max,this.invalidate()),o=a.step,this._difference=this.adjustDifference(this.min,this.max);var u=this.valueToPosition(t),l=this.valueToPosition(e);n&&!this.syncWithAxis&&(u=0,l=1);var h=0;this.syncWithAxis?(h=5,this.setCache(t+"-"+e,o)):(this._step==o&&this._minZoomed==t&&this._maxZoomed==e||(this._dsc=!0),this._step=o,this._minZoomed=t,this._maxZoomed=e),this.keepSelection||this.zoom({start:u,end:l},!1,!1,h)},Object.defineProperty(e.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(t){this.setPropertyValue("strictMinMax",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(t){this.setPropertyValue("logarithmic",t)&&(this.invalidate(),this.series.each((function(t){t.invalidateDataItems()})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(t){this.setPropertyValue("keepSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(t){this.setPropertyValue("includeRangesInMinMax",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(t){this.setPropertyValue("maxPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(t){this.setPropertyValue("extraTooltipPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.handleExtremesChange=function(){var t=this;if(this._extremesChanged=!0,this.getMinMax(),this.ghostLabel){this.dataItems.each((function(e){e.label&&e.label.pixelWidth>0&&(t.ghostLabel.text=e.label.currentText)}))}},e.prototype.getX=function(t,e,i,n,r){return this.renderer.positionToPoint(this.getPositionX(t,e,i,n,r)).x},e.prototype.getPositionX=function(t,e,i,n,r){var s=t.getWorkingValue(e);Rd(n)||(n="valueX");var a=t.getValue(n,"stack");Gd(s)||(s=this.baseValue,this.logarithmic&&a>0&&(s=0));var o=this.valueToPosition(s+a);return r&&(o=Xd(o,r.start,r.end)),o},e.prototype.getY=function(t,e,i,n,r){return this.renderer.positionToPoint(this.getPositionY(t,e,i,n,r)).y},e.prototype.getPositionY=function(t,e,i,n,r){var s=t.getWorkingValue(e);Rd(n)||(n="valueY");var a=t.getValue(n,"stack");Gd(s)||(s=this.baseValue,this.logarithmic&&a>0&&(s=0));var o=this.valueToPosition(s+a);return r&&(o=Xd(o,r.start,r.end)),o},e.prototype.getAngle=function(t,e,i,n,r){var s=t.getWorkingValue(e),a=t.getValue(n,"stack");Gd(s)||(s=this.baseValue);var o=this.valueToPosition(s+a);return r&&(o=Xd(o,r.start,r.end)),this.positionToAngle(o)},e.prototype.getAnyRangePath=function(t,e,i){var n=this.valueToPosition(t),r=this.valueToPosition(e);return this.getPositionRangePath(n,r)},e.prototype.getTooltipText=function(t){var e=Yd(this.positionToValue(t),this._stepDecimalPlaces+this.extraTooltipPrecision),i=this.tooltip.numberFormatter.format(e);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},e.prototype.zoomToValues=function(t,e,i,n){var r=(t-this.min)/(this.max-this.min),s=(e-this.min)/(this.max-this.min);this.zoom({start:r,end:s},i,n)},Object.defineProperty(e.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:nf(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:rf(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(t){var i=t.adjustedStartValue,n=t.adjustedEndValue,r=n-i,s=Math.ceil(r*t.breakSize)*e._gridCount/(e.max-e.min),a=e.adjustMinMax(i,n,r,s,!0);t.adjustedStep=a.step,t.adjustedMin=a.min,t.adjustedMax=a.max})),this._difference=this.adjustDifference(this.min,this.max)},e.prototype.getPositionLabel=function(t){var e=this.positionToValue(t);return this.numberFormatter.format(e)},e.prototype.showTooltipAt=function(t){this.showTooltipAtPosition(this.valueToPosition(t))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.min=e.min,this.max=e.max,this.calculateTotals=e.calculateTotals,this._baseValue=e.baseValue},Object.defineProperty(e.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(t){var e=this;this.setPropertyValue("syncWithAxis",t,!0)&&t&&(this._disposers.push(t.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",(function(){e.clearCache(),e._disposers.push(Om.events.once("exitframe",(function(){e.handleSelectionExtremesChange()})))}),this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(t){this.setPropertyValue("treatZeroAs",t,!0)},enumerable:!0,configurable:!0}),e.prototype.syncAxes=function(t,e,i){var n=this.syncWithAxis;if(n){Gd(t)||(t=this.min),Gd(e)||(e=this.max),Gd(i)||(i=this._step);var r=Math.round((n.maxZoomed-n.minZoomed)/n.step),s=Math.round((e-t)/i);if(Gd(r)&&Gd(s))for(var a=!1,o=0,u=.01*(e-t),l=t,h=e,c=i;1!=a;)if(a=this.checkSync(l,h,c,r),++o>1e3&&(a=!0),a)t=l,e=h,i=c;else{o/3==Math.round(o/3)?(l=t-u*o,t>=0&&l<0&&(l=0)):(h=e+u*o)<=0&&h>0&&(h=0);var d=this.adjustMinMax(l,h,h-l,this._gridCount,!0);l=d.min,h=d.max,c=d.step}}return{min:t,max:e,step:i}},e.prototype.checkSync=function(t,e,i,n){for(var r=(e-t)/i,s=1;s<n;s++)if(Yd(r/s,1)==n||r*s==n)return!0;return!1},e.prototype.processConfig=function(e){e&&Rd(e.syncWithAxis)&&Vd(e.syncWithAxis)&&(this.map.hasKey(e.syncWithAxis)?e.syncWithAxis=this.map.getKey(e.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+e.syncWithAxis+'" found for `syncWithAxis`'),delete e.xAxis)),t.prototype.processConfig.call(this,e)},e.prototype._saveMinMax=function(t,e){},e}(AA);Om.registeredClasses.ValueAxis=VA,Om.registeredClasses.ValueAxisDataItem=zA;var GA=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisBreak",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(t){this.setPropertyValue("startDate",t)&&(this.startValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(t){this.setPropertyValue("endDate",t)&&(this.endValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(_A);Om.registeredClasses.DateAxisBreak=GA;var $A=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisDataItem",e.applyTheme(),e.values.date={},e.values.endDate={},e}return Sd(e,t),Object.defineProperty(e.prototype,"date",{get:function(){return this.dates.date},set:function(t){this.setDate("date",t),this.value=t.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(t){this.setDate("endDate",t),this.endValue=t.getTime()},enumerable:!0,configurable:!0}),e}(zA),WA=function(t){function e(){var e=t.call(this)||this;return e._gapBreaks=!1,e.gridIntervals=new Am,e.groupIntervals=new Am,e.dateFormats=new wm,e.periodChangeDateFormats=new wm,e._baseIntervalReal={timeUnit:"day",count:1},e._prevSeriesTime={},e._minDifference={},e._firstWeekDay=1,e.groupMin={},e.groupMax={},e._intervalMax={},e._intervalMin={},e.className="DateAxis",e.setPropertyValue("markUnitChange",!0),e.snapTooltip=!0,e.tooltipPosition="pointer",e.setPropertyValue("groupData",!1),e.groupCount=200,e.events.on("parentset",e.getDFFormatter,e,!1),e.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),e.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),e.axisFieldName="date",e.applyTheme(),e}return Sd(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component,n=i._gridInterval,r=Vp(n.timeUnit,n.count);Math.round((e-i.min)/r)/2==Math.round(Math.round((e-i.min)/r)/2)?t.axisFill.__disabled=!0:t.axisFill.__disabled=!1},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},e.prototype.createDataItem=function(){return new $A},e.prototype.createAxisBreak=function(){return new GA},e.prototype.validateDataItems=function(){var e=this.start,i=this.end,n=this.baseDuration,r=(this.max-this.min)/n;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),t.prototype.validateDataItems.call(this);var s=Vp(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/s),this._deltaMinMax=this.baseDuration/2,e+=(i-e)*(1-r/((this.max-this.min)/n)),this.zoom({start:e,end:i},!1,!0)},e.prototype.handleSelectionExtremesChange=function(){},e.prototype.getIntervalMax=function(t){return this._intervalMax[t.timeUnit+t.count]},e.prototype.getIntervalMin=function(t){return this._intervalMin[t.timeUnit+t.count]},e.prototype.calculateZoom=function(){var e=this;t.prototype.calculateZoom.call(this);var i=this.adjustDifference(this._minZoomed,this._maxZoomed),n=!1;if(this.groupData&&Rd(i)){var r=this.mainBaseInterval,s=this.getIntervalMin(r),a=this.getIntervalMax(r),o=s+(a-s)*this.start,u=s+(a-s)*this.end,l=this.adjustDifference(o,u)+(this.startLocation+(1-this.endLocation))*this.baseDuration,h=void 0;this.groupInterval?h=xd({},this.groupInterval):Vp((h=this.chooseInterval(0,l,this.groupCount,this.groupIntervals)).timeUnit,h.count)<Vp(r.timeUnit,r.count)&&(h=xd({},r)),this._groupInterval=h;var c=h.timeUnit+h.count;this._currentDataSetId!=c&&(this._currentDataSetId=c,this.dispatch("groupperiodchanged")),this.series.each((function(t){t.baseAxis==e&&t.setDataSet(e._currentDataSetId)&&(n=!0)}))}var d=this.chooseInterval(0,i,this._gridCount);Vp(d.timeUnit,d.count)<this.baseDuration&&(d=xd({},this.baseInterval)),this._gridInterval=d,this._nextGridUnit=zp(d.timeUnit),this._intervalDuration=Vp(d.timeUnit,d.count),this._gridDate=Hp(new Date(this.minZoomed-Vp(d.timeUnit,d.count)),d.timeUnit,d.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),cm(this.series.iterator(),(function(t){if(t.baseAxis==e){var i=t.getAxisField(e),r=Hp(new Date(e._minZoomed+.05*e.baseDuration),e.baseInterval.timeUnit,e.baseInterval.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone).getTime(),s=r.toString(),a=t.dataItemsByAxis.getKey(e.uid).getKey(s+t.currentDataSetId),o=0;0!=e.start&&(o=a?(a=e.findFirst(a,r,i)).index:t.dataItems.findClosestIndex(e._minZoomed,(function(t){return t[i]}),"left"));var u=e.baseInterval,l=qp(Hp(new Date(e._maxZoomed),u.timeUnit,u.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone),u.timeUnit,u.count,e._df.utc).getTime(),h=l.toString(),c=t.dataItemsByAxis.getKey(e.uid).getKey(h+t.currentDataSetId),d=t.dataItems.length;1!=e.end&&(c?d=c.index:(l-=1,d=t.dataItems.findClosestIndex(l,(function(t){return t[i]}),"right"),d++)),t.max(e)<r?(t.startIndex=t.dataItems.length,t.endIndex=t.dataItems.length,t.outOfRange=!0):t.min(e)>l?(t.startIndex=0,t.endIndex=0,t.outOfRange=!0):(t.outOfRange=!1,t.startIndex=o,t.endIndex=d),!n&&t.dataRangeInvalid&&t.validateDataRange()}}))},e.prototype.findFirst=function(t,e,i){var n=t.index;if(n>0){var r=t.component.dataItems.getIndex(n-1),s=r[i];return!s||s.getTime()<e?t:this.findFirst(r,e,i)}return t},e.prototype.validateData=function(){t.prototype.validateData.call(this),Gd(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(e.prototype,"minDifference",{get:function(){var t=this,e=Number.MAX_VALUE;return this.series.each((function(i){e>t._minDifference[i.uid]&&(e=t._minDifference[i.uid])})),e!=Number.MAX_VALUE&&0!=e||(e=Vp("day")),e},enumerable:!0,configurable:!0}),e.prototype.seriesDataChangeUpdate=function(t){this._minDifference[t.uid]=Number.MAX_VALUE},e.prototype.postProcessSeriesDataItems=function(t){var e=this;this._firstWeekDay=this.getFirstWeekDay(),t?this.seriesGroupUpdate(t):this.series.each((function(t){e.seriesGroupUpdate(t)})),this.addEmptyUnitsBreaks()},e.prototype.seriesGroupUpdate=function(t){var e=this;JSON.stringify(t._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(t._baseInterval[this.uid]=this.mainBaseInterval,t.mainDataSet.each((function(t){e.postProcessSeriesDataItem(t)})),this.groupData&&this.groupSeriesData(t))},e.prototype.groupSeriesData=function(t){var e=this;if(t.baseAxis==this&&t.dataItems.length>0&&!t.dataGrouped){t.bulletsContainer.removeChildren();var i=[],n=this.mainBaseInterval,r=Vp(n.timeUnit,n.count);this.groupIntervals.each((function(t){var n=Vp(t.timeUnit,t.count);(n>r&&n<e.max-e.min||e.groupInterval)&&i.push(t)})),t._dataSets&&(t._dataSets.each((function(t,e){e.each((function(t){t.dispose()})),e.clear()})),t._dataSets.clear()),t.dataGrouped=!0,kf(i,(function(i){var n="date"+e.axisLetter,r=i.timeUnit+i.count,s=new Pm(t.mainDataSet.template.clone());t.dataSets.setKey(r,s);var a,o,u=t.mainDataSet,l=Number.NEGATIVE_INFINITY,h=0,c=[];nm(t.dataFields,(function(t,e){var i=t;i!=n&&-1==i.indexOf("Show")&&c.push(i)})),u.each((function(r){var u=r.getDate(n);if(u){var d=u.getTime(),f=(o=Hp(new Date(d),i.timeUnit,i.count,e._df.firstDayOfWeek,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone)).getTime();l<f?(a&&t._adapterO&&kf(c,(function(e){a.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:a,interval:i,dataField:e,date:o,value:a.values[e].value}).value,a.values[e].workingValue=a.values[e].value})),(a=s.create()).dataContext={},a.setWorkingLocation("dateX",t.dataItems.template.locations.dateX,0),a.setWorkingLocation("openDateX",t.dataItems.template.locations.openDateX,0),a.setWorkingLocation("dateY",t.dataItems.template.locations.dateY,0),a.setWorkingLocation("openDateY",t.dataItems.template.locations.openDateY,0),a.component=t,a.setDate(n,o),a._index=h,h++,kf(c,(function(e){var n=r.values[e];if(n){var s=n.value;t._adapterO&&(s=t._adapterO.apply("groupValue",{dataItem:r,interval:i,dataField:e,date:o,value:s}).value);var u=a.values[e];Gd(s)?(u.value=s,u.workingValue=s,u.open=s,u.close=s,u.low=s,u.high=s,u.sum=s,u.average=s,u.count=1):u.count=0}})),e.postProcessSeriesDataItem(a,i),nm(t.propertyFields,(function(t,e){var i=t,n=r.properties[t];Rd(n)&&(a.hasProperties=!0,a.setProperty(i,n))})),a.groupDataItems=[r],l=f):a&&(kf(c,(function(e){var n=t.groupFields[e],s=r.values[e];if(s){var u=s.value;if(t._adapterO&&(u=t._adapterO.apply("groupValue",{dataItem:r,interval:i,dataField:e,date:o,value:u}).value),Gd(u)){var l=a.values[e];Gd(l.open)||(l.open=u),l.close=u,(l.low>u||!Gd(l.low))&&(l.low=u),(l.high<u||!Gd(l.high))&&(l.high=u),Gd(l.sum)?l.sum+=u:l.sum=u,l.count++,l.average=l.sum/l.count,Gd(l[n])&&(l.value=l[n],l.workingValue=l.value)}}})),tv(r.properties,a.properties),nm(t.propertyFields,(function(t,e){var i=t,n=r.properties[t];Rd(n)&&(a.hasProperties=!0,a.setProperty(i,n))})),a.groupDataItems.push(r))}a&&tv(r.dataContext,a.dataContext)})),a&&t._adapterO&&kf(c,(function(e){a.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:a,interval:i,dataField:e,date:o,value:a.values[e].value}).value,a.values[e].workingValue=a.values[e].value}))})),this.calculateZoom()}},e.prototype.getDFFormatter=function(){this._df=this.dateFormatter},e.prototype.postProcessSeriesDataItem=function(t,e){var i=this,n="";e?n=e.timeUnit+e.count:e=this.mainBaseInterval;var r=t.component.dataItemsByAxis.getKey(this.uid);nm(t.dates,(function(s){var a=t.getDate(s).getTime(),o=Hp(new Date(a),e.timeUnit,e.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone).getTime(),u=qp(new Date(o),e.timeUnit,e.count,i._df.utc);t.setCalculatedValue(s,o,"open"),t.setCalculatedValue(s,u.getTime(),"close"),r.setKey(o+n,t)}))},e.prototype.addEmptyUnitsBreaks=function(){var t=this;if(this.skipEmptyPeriods&&Gd(this.min)&&Gd(this.max)){var e=this.baseInterval.timeUnit,i=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var n=Hp(new Date(this.min),e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),r=void 0,s=function(){qp(n,e,i,a._df.utc);var s=n.getTime(),o=s.toString();vm(a.series.iterator(),(function(e){return!!e.dataItemsByAxis.getKey(t.uid).getKey(o+e.currentDataSetId)}))?r&&(r.endDate=new Date(s-1),r=void 0):r||((r=a.axisBreaks.create()).startDate=new Date(s),a._gapBreaks=!0)},a=this;n.getTime()<this.max-this.baseDuration;)s()}},e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(t){var i=Math.ceil(e._gridCount*(Math.min(e.end,t.endPosition)-Math.max(e.start,t.startPosition))/(e.end-e.start));t.gridInterval=e.chooseInterval(0,t.adjustedEndValue-t.adjustedStartValue,i);var n=Hp(new Date(t.adjustedStartValue),t.gridInterval.timeUnit,t.gridInterval.count,e._firstWeekDay,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone);n.getTime()>t.startDate.getTime()&&qp(n,t.gridInterval.timeUnit,t.gridInterval.count,e._df.utc),t.gridDate=n}))},e.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},e.prototype.getGridDate=function(t,e){var i=this._gridInterval.timeUnit,n=this._gridInterval.count;Hp(t,i,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var r=t.getTime(),s=$p(t),a=qp(s,i,e,this._df.utc).getTime(),o=this.isInBreak(a);o&&o.endDate&&(Hp(s=new Date(o.endDate.getTime()),i,n,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),s.getTime()<o.endDate.getTime()&&qp(s,i,n,this._df.utc),a=s.getTime());var u=this.adjustDifference(r,a);return Math.round(u/Vp(i))<n?this.getGridDate(t,e+n):s},e.prototype.getBreaklessDate=function(t,e,i){var n=new Date(t.endValue);Hp(n,e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),qp(n,e,i,this._df.utc);var r=n.getTime();return(t=this.isInBreak(r))?this.getBreaklessDate(t,e,i):n},e.prototype.validateAxisElements=function(){var t=this;if(Gd(this.max)&&Gd(this.min)){this.calculateZoom();var e=this._gridDate.getTime(),i=this._gridInterval.timeUnit,n=this._gridInterval.count,r=$p(this._gridDate),s=this._dataItemsIterator;this.resetIterators();for(var a=function(){var t=o.getGridDate($p(r),n);e=t.getTime();var a=$p(t);a=qp(a,i,n,o._df.utc);var u=o.dateFormats.getKey(i);o.markUnitChange&&r&&Wp(t,r,o._nextGridUnit,o._df.utc)&&"year"!==i&&(u=o.periodChangeDateFormats.getKey(i));var l=o._df.format(t,u),h=s.find((function(t){return t.text===l}));h.__disabled&&(h.__disabled=!1),o.appendDataItem(h),h.axisBreak=void 0,h.date=t,h.endDate=a,h.text=l,o.validateDataElement(h),r=t},o=this;e<=this._maxZoomed;)a();var u=this.renderer;this._axisBreaks&&cm(this._axisBreaks.iterator(),(function(e){if(e.breakSize>0){var i=e.gridInterval.timeUnit,n=e.gridInterval.count;if(of(e.startPoint,e.endPoint)>4*u.minGridDistance)for(var r,a=e.gridDate.getTime(),o=0,l=function(){var u=$p(e.gridDate);if(a=qp(u,i,n*o,t._df.utc).getTime(),o++,a>e.adjustedStartValue&&a<e.adjustedEndValue){var l=$p(u);l=qp(l,i,n,t._df.utc);var h=t.dateFormats.getKey(i);t.markUnitChange&&r&&Wp(u,r,t._nextGridUnit,t._df.utc)&&"year"!==i&&(h=t.periodChangeDateFormats.getKey(i));var c=t._df.format(u,h),d=s.find((function(t){return t.text===c}));d.__disabled&&(d.__disabled=!1),t.appendDataItem(d),d.axisBreak=e,e.dataItems.moveValue(d),d.date=u,d.endDate=l,d.text=c,r=u,t.validateDataElement(d)}};a<=e.adjustedMax;)l()}}))}},e.prototype.validateDataElement=function(t){if(t.itemIndex=this._axisItemCount,this._axisItemCount++,Gd(this.max)&&Gd(this.min)){var e=this.renderer,i=t.value,n=t.endValue;Gd(n)||(n=i);var r=this.valueToPosition(i),s=this.valueToPosition(n),a=s;!t.isRange&&this._gridInterval.count>this.baseInterval.count&&(s=r+(s-r)/(this._gridInterval.count/this.baseInterval.count)),t.position=r;var o=t.tick;o&&!o.disabled&&e.updateTickElement(o,r,s);var u=t.grid;u&&!u.disabled&&e.updateGridElement(u,r,s);var l=t.axisFill;l&&!l.disabled&&(e.updateFillElement(l,r,a),t.isRange||this.fillRule(t));var h=t.mask;h&&e.updateFillElement(h,r,s),t.bullet&&e.updateBullet(t.bullet,r,s);var c=t.label;if(c&&!c.disabled){var d=c.location;0==d&&(d=1!=this._gridInterval.count||"week"==this._gridInterval.timeUnit||t.isRange?0:.5),e.updateLabelElement(c,r,s,d)}}},Object.defineProperty(e.prototype,"baseDuration",{get:function(){return Vp(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),e.prototype.adjustMinMax=function(t,e){return{min:t,max:e,step:this.baseDuration}},e.prototype.fixMin=function(t){var e=this.baseInterval,i=Hp(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(qp(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.startLocation},e.prototype.fixMax=function(t){var e=this.baseInterval,i=Hp(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(qp(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.endLocation},e.prototype.chooseInterval=function(t,e,i,n){n||(n=this.gridIntervals);var r=n.getIndex(t),s=Vp(r.timeUnit,r.count),a=n.length-1;if(t>=a)return xd({},n.getIndex(a));var o=Math.ceil(e/s);return e<s&&t>0?xd({},n.getIndex(t-1)):o<=i?xd({},n.getIndex(t)):t+1<n.length?this.chooseInterval(t+1,e,i,n):xd({},n.getIndex(t))},e.prototype.formatLabel=function(t){return this._df.format(t)},e.prototype.dateToPosition=function(t){return this.valueToPosition(t.getTime())},e.prototype.anyToPosition=function(t){return t instanceof Date?this.dateToPosition(t):this.valueToPosition(t)},e.prototype.dateToPoint=function(t){var e=this.dateToPosition(t),i=this.renderer.positionToPoint(e),n=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:n}},e.prototype.anyToPoint=function(t){return t instanceof Date?this.dateToPoint(t):this.valueToPoint(t)},e.prototype.positionToDate=function(t){return new Date(this.positionToValue(t))},e.prototype.getPositionX=function(t,e,i,n,r){var s=this.getTimeByLocation(t,e,i);Gd(s)||(s=this.baseValue);var a=this.valueToPosition(s);return r&&(a=Xd(a,r.start,r.end)),a},e.prototype.getPositionY=function(t,e,i,n,r){var s=this.getTimeByLocation(t,e,i),a=t.getValue("valueX","stack");Gd(s)||(s=this.baseValue);var o=this.valueToPosition(s+a);return r&&(o=Xd(o,r.start,r.end)),o},e.prototype.getAngle=function(t,e,i,n,r){var s=this.getTimeByLocation(t,e,i),a=t.getValue(n,"stack");Gd(s)||(s=this.baseValue);var o=this.valueToPosition(s+a);return r&&(o=Xd(o,r.start,r.end)),this.positionToAngle(o)},e.prototype.getTimeByLocation=function(t,e,i){if(Rd(e)){Gd(i)||Gd(i=t.workingLocations[e])||(i=0);var n=t.values[e].open,r=t.values[e].close,s=t.values[e].workingValue,a=t.values[e].value-s;return r-=a,Gd(n-=a)&&Gd(r)?n+(r-n)*i:void 0}},e.prototype.processSeriesDataItem=function(t,e){var i,n=t.component,r=t["date"+e];if(Gd(this.timezoneOffset)?(r.setTime(r.getTime()+6e4*(r.getTimezoneOffset()-this.timezoneOffset)),t.setValue("date"+e,r.getTime(),0)):Rd(this.timezone)&&(r=Up(r,this.timezone),t.setValue("date"+e,r.getTime(),0),t["date"+e]=r),r){i=r.getTime();var s,a=t["openDate"+e],o=this._prevSeriesTime[n.uid];if(a&&(s=a.getTime()),Gd(s)){var u=Math.abs(i-s);this._minDifference[n.uid]>u&&(this._minDifference[n.uid]=u)}var l=i-o;l>0&&this._minDifference[n.uid]>l&&(this._minDifference[n.uid]=l),this._prevSeriesTime[n.uid]=i,n._baseInterval[this.uid]&&this.postProcessSeriesDataItem(t)}},e.prototype.updateAxisBySeries=function(){t.prototype.updateAxisBySeries.call(this);var e=this.chooseInterval(0,this.minDifference,1);this.minDifference>=Vp("day",27)&&"week"==e.timeUnit&&(e.timeUnit="month",e.count=1),"month"==e.timeUnit&&(this.minDifference>=Vp("day",58)&&1==e.count&&(e.count=2),this.minDifference>=Vp("day",87)&&2==e.count&&(e.count=3),this.minDifference>=Vp("day",174)&&5==e.count&&(e.count=6)),this.minDifference>=Vp("hour",23)&&"hour"==e.timeUnit&&(e.timeUnit="day",e.count=1),this.minDifference>=Vp("week",1)-Vp("hour",1)&&"day"==e.timeUnit&&(e.timeUnit="week",e.count=1),this.minDifference>=Vp("year",1)-Vp("day",1.01)&&"month"==e.timeUnit&&(e.timeUnit="year",e.count=1),this._baseIntervalReal=e,this._mainBaseInterval=e},Object.defineProperty(e.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(t){JSON.stringify(this._baseInterval)!=JSON.stringify(t)&&(this._baseInterval=t,this._mainBaseInterval=t,Gd(t.count)||(t.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(t){if(t){var e=this.axisBreaks.template;e.startLine.disabled=!0,e.endLine.disabled=!0,e.fillShape.disabled=!0,e.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",t)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(t){this.setPropertyValue("tooltipDateFormat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(t){this.setPropertyValue("markUnitChange",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e,i=this.positionToDate(t);if(i=Hp(i,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=i,Rd(this.tooltipDateFormat))e=this._df.format(i,this.tooltipDateFormat,-1==["day","month","week","year"].indexOf(this.baseInterval.timeUnit));else{var n=this.dateFormats.getKey(this.baseInterval.timeUnit);e=n?this._df.format(i,n):this.getPositionLabel(t)}return this._adapterO?this._adapterO.apply("getTooltipText",e):e},e.prototype.roundPosition=function(t,e,i){var n=this.baseInterval,r=n.timeUnit,s=n.count,a=this.positionToDate(t);if(Hp(a,r,s,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),e>0&&qp(a,r,e*s,this._df.utc),i>0&&i<1&&a.setTime(a.getTime()+this.baseDuration*i),this.isInBreak(a.getTime()))for(;a.getTime()<this.max&&(qp(a,r,s,this._df.utc),this.isInBreak(a.getTime())););return this.dateToPosition(a)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getSeriesDataItem=function(t,e,i){var n=this.positionToValue(e),r=n-("Y"==this.axisLetter?t.dataItems.template.locations.dateY:t.dataItems.template.locations.dateX)*this.baseDuration,s=Hp(new Date(n),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),a=Hp(new Date(n+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);a.getTime()>s.getTime()&&Math.abs(a.getTime()-r)<Math.abs(r-s.getTime())&&(s=a);var o,u=t.dataItemsByAxis.getKey(this.uid).getKey(s.getTime()+t.currentDataSetId);!u&&i&&(o="Y"==this.axisLetter?"dateY":"dateX",u=t.dataItems.getIndex(t.dataItems.findClosestIndex(s.getTime(),(function(t){return t[o]?t[o].getTime():-1/0}),"any")));return u},e.prototype.getPositionLabel=function(t){var e=this.positionToDate(t);return this._df.format(e,this.getCurrentLabelFormat())},e.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this);var e=this.renderer;e&&(e.ticks.template.location=0,e.grid.template.location=0,e.labels.template.location=0,e.baseGrid.disabled=!0)},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.animateMinMax=function(t,e){var i=this,n=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing);return n.events.on("animationprogress",(function(){i.dispatch("extremeschanged")})),n},e.prototype.handleExtremesChange=function(){if(t.prototype.handleExtremesChange.call(this),this.groupData){var e=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[e]=this._finalMin,this.groupMax[e]=this._finalMax}},e.prototype.zoomToDates=function(t,e,i,n,r){t=this._df.parse(t),e=this._df.parse(e),this.zoomToValues(t.getTime(),e.getTime(),i,n,r)},e.prototype.zoomToValues=function(t,e,i,n,r){var s=this;if(this.groupData){var a=this.adjustDifference(t,e),o=!1;e==this.max&&(o=!0);var u=!1;if(t==this.min&&(u=!0),Rd(a)){var l=this.mainBaseInterval,h=this.chooseInterval(0,a,this.groupCount,this.groupIntervals);(h.timeUnit==l.timeUnit&&h.count<l.count||Vp(h.timeUnit,1)<Vp(l.timeUnit,1))&&(h=xd({},l));var c=h.timeUnit+h.count,d=this.groupMin[c],f=this.groupMax[c];Gd(d)&&Gd(f)||(d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,this.series.each((function(t){var e=t.min(s),i=t.max(s);if(t._dataSets){var n=t._dataSets.getKey(h.timeUnit+h.count);if(n){var r=n.getIndex(0),a=n.getIndex(n.length-1);r&&(t.xAxis==s?e=r.dateX.getTime():t.yAxis==s&&(e=r.dateY.getTime())),a&&(t.xAxis==s?i=a.dateX.getTime():t.yAxis==s&&(i=a.dateY.getTime()))}}i=Hp(qp(new Date(i),h.timeUnit,1,s._df.utc),h.timeUnit,1,s._df.firstDayOfWeek,s._df.utc,void 0,s._df.timezoneMinutes,s._df.timezone).getTime(),e<d&&(d=e),i>f&&(f=i)})),this.groupMin[c]=d,this.groupMax[c]=f),t=Xd(t,d,f),e=Xd(e,d,f),r&&(o&&(t=Xd(t=e-a,d,f)),u&&(e=Xd(e=t+a,d,f)));m=(t-d)/(f-d),v=(e-d)/(f-d);this.zoom({start:m,end:v},i,n)}}else{var m=this.valueToPosition(t),v=this.valueToPosition(e);this.zoom({start:m,end:v},i,n)}},e.prototype.asIs=function(e){return"baseInterval"==e||t.prototype.asIs.call(this,e)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.dateFormats=e.dateFormats,this.periodChangeDateFormats=e.periodChangeDateFormats,this.groupIntervals.clear(),e.groupIntervals.each((function(t){i.groupIntervals.push(xd({},t))})),this.gridIntervals.clear(),e.gridIntervals.each((function(t){i.gridIntervals.push(xd({},t))})),e._baseInterval&&(this.baseInterval=e._baseInterval)},e.prototype.showTooltipAtPosition=function(e,i){var n=this;if(i||(e=this.toAxisPosition(e)),this.snapTooltip){var r,s=this.positionToDate(e).getTime();if(this.series.each((function(t){if(t.baseAxis==n){var i=n.getSeriesDataItem(t,e,!0);if(i){var a=void 0;t.xAxis==n&&(a=i.dateX),t.yAxis==n&&(a=i.dateY),r?Math.abs(r.getTime()-s)>Math.abs(a.getTime()-s)&&(r=a):r=a}}})),r){var a=r.getTime();r=Hp(new Date(a),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),a=r.getTime();var o=this.renderer.tooltipLocation;0==o&&(o=1e-4),r=new Date(r.getTime()+this.baseDuration*o),e=this.dateToPosition(r),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each((function(t){var e=t.dataItemsByAxis.getKey(n.uid).getKey(a+t.currentDataSetId),i=t.showTooltipAtDataItem(e);i?n.chart._seriesPoints.push({series:t,point:i}):(t.tooltipText||t.tooltipHTML)&&t.hideTooltip()}))}}t.prototype.showTooltipAtPosition.call(this,e,!0)},Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(t){var e=this;this.setPropertyValue("groupData",t)&&(this.series.each((function(i){i.setDataSet(""),t&&!i.dataGrouped&&i.inited&&(i._baseInterval[e.uid]=e.mainBaseInterval,e.groupSeriesData(i))})),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(t){this.setPropertyValue("groupInterval",t)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(t){this.setPropertyValue("groupCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(t){this.setPropertyValue("timezoneOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(t){this.setPropertyValue("timezone",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),e.prototype.makeGap=function(t,e){var i=t.component;if(t&&e&&!i.connect&&Gd(i.autoGapCount)&&i.baseAxis==this){var n=t.dates["date"+this.axisLetter],r=e.dates["date"+this.axisLetter];if(n&&r)if(n.getTime()-r.getTime()>i.autoGapCount*this.baseDuration)return!0}return!1},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),e.prototype._saveMinMax=function(t,e){var i=this.groupInterval;i||(i=this._mainBaseInterval);var n=i.timeUnit+i.count;this._intervalMin[n]=t,this._intervalMax[n]=e},e}(VA);Om.registeredClasses.DateAxis=WA,Om.registeredClasses.DateAxisDataItem=$A;var qA=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererX",e.minGridDistance=120,e.opposite=!1,e.rotation=0,e.width=Ad(100),e.labels.template.horizontalCenter="middle",e.applyTheme(),e}return Sd(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="vertical"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.x=t.pixelX,e.width=t.axisLength}},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){e.width instanceof Id||(e.width=Ad(100)),this.line;var i=e.title;i.rotation=0,i.align="center",this.opposite?(this.line.toFront(),i.toBack()):(i.toFront(),this.toBack(),this.line.toBack())}},e.prototype.updateTooltip=function(){if(this.axis){var t=1e3,e=this.line.pixelX,i=this.line.pixelY,n=this.axisLength,r=t;this.opposite?this.inside||(i=-1e3,r=t):this.inside&&(i=-1e3,r=t),this.axis.updateTooltip("vertical",{x:e,y:i,width:n,height:r})}},e.prototype.updateLabelElement=function(t,e,i,n){Rd(n)||(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e);t.isMeasured=!t.inside;var s,a=0,o=this.gridContainer.maxHeight;this.opposite?(t.inside?(s="top","bottom"==t.valign&&(a=o,s="bottom"),"middle"==t.valign&&(a=o/2,s="middle")):s="bottom",r.y=a):(t.inside?(s="bottom","top"==t.valign&&(a=-o,s="top"),"middle"==t.valign&&(a=-o/2,s="middle")):s="top",r.y+=a),0==t.rotation&&(t.verticalCenter=s),this.positionItem(t,r),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredWidth-t.pixelPaddingRight-t.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:this.positionToCoordinate(t),y:0}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.x,t.y)},e.prototype.getPositionRangePath=function(t,e){var i=Xd(this.positionToCoordinate(t),0,this.axisLength),n=Xd(this.positionToCoordinate(e),0,this.axisLength),r=Math.abs(n-i),s=this.getHeight();return fg({x:Math.min(i,n),y:0,width:r,height:s},!0)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var i=e.startLine,n=e.endLine,r=e.fillShape,s=e.startPoint,a=e.endPoint,o=e.pixelMarginLeft,u=this.getHeight()-e.pixelMarginTop-e.pixelMarginBottom;s.x=Xd(s.x,-1,this.axisLength+1),a.x=Xd(a.x,-1,this.axisLength+1),s.x==a.x&&(s.x<0||s.x>this.axisLength)?e.fillShape.__disabled=!0:e.fillShape.__disabled=!1,i.y=o,i.width=0,i.height=u,n.y=o,n.width=0,n.height=u,r.height=u,r.width=Math.abs(a.x-s.x),r.y=o,r.x=s.x},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);t.path=sg({x:0,y:0})+ag({x:0,y:this.getHeight()}),this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e),r=t.length;n.y=Av({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.opposite?r*=t.inside?1:-1:r*=t.inside?-1:1,t.path=sg({x:0,y:0})+ag({x:0,y:r}),this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=sg({x:0,y:0})+ag({x:this.axisLength,y:0})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,i=this.getHeight(),n=this.axisLength,r=this.baseGrid,s=e.basePoint.x;if(s<-.2||s>n+.2)r.hide(0);else{var a=Av({x:0,y:0},this.gridContainer,r.parent).y;r.path=sg({x:0,y:0})+ag({x:0,y:i}),r.moveTo({x:s,y:a}),r.show(0)}},e.prototype.createBreakSprites=function(t){t.startLine=new Vg,t.endLine=new Vg;var e=new Gg;e.setWavedSides(!1,!0,!1,!0),t.fillShape=e},e.prototype.toAxisPosition=function(t){var e=t,i=this.axis;if(i){var n=i.relativePositionSprite,r=i.pixelX;if(n?r=Av({x:this.pixelX,y:0},this.parent,n).x:n=i.parent,n)return(e-r/n.innerWidth)/(i.axisLength/n.innerWidth)}return t},e.prototype.updateBullet=function(t,e,i){var n=.5;t instanceof RA&&(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e);r.y=Av({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e}(NA);Om.registeredClasses.AxisRendererX=qA,Hb.push({relevant:Ub.heightXS,state:function(t,e){if(t instanceof qA){var i=t.states.create(e);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),Hb.push({relevant:Ub.heightXXS,state:function(t,e){if(t instanceof qA){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var HA=function(t){function e(){var e=t.call(this)||this;return e.className="CategoryAxisBreak",e.properties.startLocation=.5,e.properties.endLocation=.5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(t){this.setPropertyValue("startCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(t){this.setPropertyValue("endCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startValue",{get:function(){var t=this.getPropertyValue("startCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){var t=this.getPropertyValue("endCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(TA);Om.registeredClasses.CategoryAxisBreak=HA;var UA=function(t){function e(){var e=t.call(this)||this;return e.seriesDataItems={},e.className="CategoryAxisDataItem",e.text="{category}",e.locations.category=0,e.locations.endCategory=1,e.deltaPosition=0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(t){var e=this.properties.category;this.setProperty("category",t),Rd(e)&&e!=t&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(t){this.setProperty("endCategory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(t){t!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",t),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(IA),KA=function(t){function e(){var e=t.call(this)||this;e.dataItemsByCategory=new wm,e.className="CategoryAxis",e.axisFieldName="category",e._lastDataItem=e.createDataItem(),e._lastDataItem.component=e,e._disposers.push(e._lastDataItem),e.applyTheme();var i=e.dataItemsByCategory;return e.addDisposer(e.mainDataSet.events.on("removed",(function(t){i.removeKey(t.oldValue.category)}))),e}return Sd(e,t),e.prototype.createDataItem=function(){return new UA},e.prototype.createAxisBreak=function(){return new HA},e.prototype.processSeriesDataItem=function(e,i){t.prototype.processSeriesDataItem.call(this,e,i);var n=e["category"+this.axisLetter];if(Rd(n)){var r=this.dataItemsByCategory.getKey(n);if(r){var s=e.component.uid,a=r.seriesDataItems[s];a||(a=[],r.seriesDataItems[s]=a),a.push(e)}}else e.component.dataItems.remove(e)},e.prototype.validateDataRange=function(){var i=this;t.prototype.validateDataRange.call(this),cm(this._series.iterator(),(function(t){if(t.xAxis instanceof e&&t.yAxis instanceof e)t.invalidateDataRange();else{var n=i.positionToIndex(i.start),r=i.positionToIndex(i.end);r>=i.dataItems.length&&r--;for(var s=t.uid,a=void 0,o=void 0,u=n;u<=r;u++){var l=i.dataItems.getIndex(u);if(l){var h=l.seriesDataItems[s];if(h)for(var c=0;c<h.length;c++){var d=h[c];if(d){var f=d.index;(!Gd(a)||f<a)&&(a=f),(!Gd(o)||f>o)&&(o=f)}}}}Gd(a)?t.startIndex=a:t.start=i.start,Gd(o)?t.endIndex=o+1:t.end=i.end,i._axisBreaks&&i._axisBreaks.length>0&&t.invalidateDataRange()}}))},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this);var i=this.dataItems.length,n=Xd(Math.floor(this.start*i-1),0,i),r=Xd(Math.ceil(this.end*i),0,i);this.renderer.invalid&&this.renderer.validate();var s=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),a=Math.min(this.dataItems.length,Math.ceil((r-n)/s));if(this._startIndex=Math.floor(n/a)*a,this._endIndex=Math.ceil(this.end*i),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=a,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),n=nf(0,this._startIndex-this._frequency),r=rf(this.dataItems.length,this._endIndex+this._frequency);for(var o=0,u=0;u<n;u++){(h=this.dataItems.getIndex(u)).__disabled=!0}u=r;for(var l=this.dataItems.length;u<l;u++){(h=this.dataItems.getIndex(u)).__disabled=!0}for(u=n;u<r;u++)if(u<this.dataItems.length){var h=this.dataItems.getIndex(u);if(u/this._frequency==Math.round(u/this._frequency))this.isInBreak(u)||(this.appendDataItem(h),this.validateDataElement(h,o)),o++;else h.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,o+1,this.dataItems.length),this._axisBreaks)this._axisBreaks.each((function(t){var i=t.adjustedStartValue,n=t.adjustedEndValue;if(sf({start:i,end:n},{start:e._startIndex,end:e._endIndex})){for(var r=i;r<=n;r++){(o=e.dataItems.getIndex(r)).__disabled=!0}var s=Xd(Math.ceil(e._frequency/t.breakSize),1,n-i),a=0;if(t.breakSize>0)for(r=i;r<=n;r+=s){var o;(o=e.dataItems.getIndex(r)).__disabled=!1,e.appendDataItem(o),e.validateDataElement(o,a),a++}}}));this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},e.prototype.validateDataElement=function(e,i,n){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var r=this.renderer;Gd(n)||(n=this.categoryToIndex(e.category));var s=this.categoryToIndex(e.endCategory);Gd(s)||(s=n);var a,o,u,l=this.indexToPosition(n,e.locations.category),h=this.indexToPosition(s,e.locations.endCategory);e.position=l,e.isRange&&(a=s,o=this.indexToPosition(n,e.locations.category),u=this.indexToPosition(a,e.locations.endCategory)),e.point=r.positionToPoint(l);var c=e.tick;c&&!c.disabled&&r.updateTickElement(c,l,h);var d=e.grid;d&&!d.disabled&&r.updateGridElement(d,l,h);var f=e.label;f&&!f.disabled&&(e.isRange&&null!=f.text||(e.text=e.text),r.updateLabelElement(f,l,h),(r instanceof BA&&e.label.measuredWidth>this.ghostLabel.measuredWidth||r instanceof qA&&e.label.measuredHeight>this.ghostLabel.measuredHeight)&&(e.label.html?this.ghostLabel.html=e.label.currentText:this.ghostLabel.text=e.label.currentText));var m=e.axisFill;m&&!m.disabled&&(e.isRange||(a=n+this._frequency,o=this.indexToPosition(n,m.location),u=this.indexToPosition(a,m.location)),r.updateFillElement(m,o,u),e.isRange||this.fillRule(e,i)),e.bullet&&r.updateBullet(e.bullet,l,h);var v=e.mask;v&&r.updateFillElement(v,o,u)},e.prototype.disposeData=function(){this.dataItemsByCategory.clear(),t.prototype.disposeData.call(this)},e.prototype.processDataItem=function(e,i){e&&(t.prototype.processDataItem.call(this,e,i),Rd(e.category)&&this.dataItemsByCategory.setKey(e.category,e))},e.prototype.getDataItem=function(t){var e=t[this.dataFields.category];if(Rd(e)){var i=this.dataItemsByCategory.getKey(e);return i||this.dataItems.create()}},e.prototype.indexToPosition=function(t,e){Gd(e)||(e=.5);var i=this.startIndex,n=this.endIndex,r=this.adjustDifference(i,n),s=this.startLocation;(r-=s,r-=1-this.endLocation,this._axisBreaks)&&hm(this._axisBreaks.iterator(),(function(e){var r=e.adjustedStartValue,s=e.adjustedEndValue;if(t<i||!Gd(r)||!Gd(s))return!1;if(sf({start:r,end:s},{start:i,end:n})){r=Math.max(i,r),s=Math.min(n,s);var a=e.breakSize;t>s?i+=(s-r)*(1-a):t<r||(t=r+(t-r)*a)}return!0}));var a=0,o=this.dataItems.getIndex(t);return o&&(a=o.deltaPosition),Yd(a+(t+e-s-i)/r,5)},e.prototype.categoryToPosition=function(t,e){var i=this.categoryToIndex(t);return this.indexToPosition(i,e)},e.prototype.categoryToPoint=function(t,e){var i=this.categoryToPosition(t,e),n=this.renderer.positionToPoint(i),r=this.renderer.positionToAngle(i);return{x:n.x,y:n.y,angle:r}},e.prototype.anyToPoint=function(t,e){return this.categoryToPoint(t,e)},e.prototype.anyToPosition=function(t,e){return this.categoryToPosition(t,e)},e.prototype.categoryToIndex=function(t){if(Rd(t)){var e=this.dataItemsByCategory.getKey(t);if(e)return e.index}},e.prototype.zoomToCategories=function(t,e){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1)},e.prototype.getAnyRangePath=function(t,e,i,n){var r=this.categoryToPosition(t,i),s=this.categoryToPosition(e,n);return this.getPositionRangePath(r,s)},e.prototype.roundPosition=function(t,e){var i=this.positionToIndex(t);return this.indexToPosition(i,e)},e.prototype.getFirstSeriesDataItem=function(t,e){for(var i=0;i<t.dataItems.length;i++){var n=t.dataItems.getIndex(i);if(t.xAxis==this&&n.categoryX==e)return n;if(t.yAxis==this&&n.categoryY==e)return n}},e.prototype.getLastSeriesDataItem=function(t,e){for(var i=t.dataItems.length-1;i>=0;i--){var n=t.dataItems.getIndex(i);if(t.xAxis==this&&n.categoryX==e)return n;if(t.yAxis==this&&n.categoryY==e)return n}},e.prototype.getSeriesDataItemByCategory=function(t,e){var i,n=this;return e.dataItems.each((function(r){e.xAxis==n?r.categoryX==t&&(i=r):e.yAxis==n&&r.categoryY==t&&(i=r)})),i},e.prototype.getSeriesDataItem=function(t,e,i){var n=this;if(Gd(e)){var r=this.positionToIndex(e);r>=this.dataItems.length&&r--;var s=this.dataItems.getIndex(r);if(s){var a,o=s.category,u=t.dataItems.getIndex(r);if(u){if(t.xAxis==this&&u.categoryX==o)return u;if(t.yAxis==this&&u.categoryY==o)return u}return t.dataItems.each((function(e){t.xAxis==n&&e.categoryX==o&&(a||(a=e),Math.abs(r-a.index)>Math.abs(r-e.index)&&(a=e)),t.yAxis==n&&e.categoryY==o&&(a||(a=e),Math.abs(r-a.index)>Math.abs(r-e.index)&&(a=e))})),a}}},e.prototype.getX=function(t,e,i,n,r){var s=this.getPositionX(t,e,i,n,r);return jd(s)?this.basePoint.x:this.renderer.positionToPoint(s).x},e.prototype.getPositionX=function(t,e,i,n,r){var s;return Rd(e)&&(s=this.categoryToPosition(t.categories[e],i)),r&&(s=Xd(s,r.start,r.end)),s},e.prototype.getY=function(t,e,i,n,r){var s=this.getPositionY(t,e,i,n,r);return jd(s)?this.basePoint.y:this.renderer.positionToPoint(s).y},e.prototype.getPositionY=function(t,e,i,n,r){var s;return Rd(e)&&(s=this.categoryToPosition(t.categories[e],i)),r&&(s=Xd(s,r.start,r.end)),s},e.prototype.getAngle=function(t,e,i,n,r){var s=this.categoryToPosition(t.categories[e],i);return r&&(s=Xd(s,r.start,r.end)),this.positionToAngle(s)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getTooltipText=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return this.tooltipDataItem=e,this.tooltip.dataItem=e,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",e.category):e.category},e.prototype.positionToIndex=function(t){(t=Yd(t,10))<0&&(t=0),t>1&&(t=1);var e=this.startIndex,i=this.endIndex,n=i-e-this.startLocation-(1-this.endLocation);t+=1/n*this.startLocation;var r=null;this._axisBreaks&&hm(this._axisBreaks.iterator(),(function(s){var a=s.startPosition,o=s.endPosition,u=s.adjustedStartValue,l=s.adjustedEndValue;u=nf(u,e),l=rf(l,i);var h=s.breakSize;if(n-=(l-u)*(1-h),t>o)e+=(l-u)*(1-h);else if(!(t<a)){var c=(t-a)/(o-a);return r=u+Math.round(c*(l-u)),!1}return!0}));return Gd(r)||(r=Math.floor(t*n+e)),r>=this.dataItems.length&&(r=this.dataItems.length-1),r},e.prototype.positionToCategory=function(t){return this.getPositionLabel(t)},e.prototype.getPositionLabel=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return e.category},Object.defineProperty(e.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this),this.renderer.baseGrid.disabled=!0},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(t){this.setPropertyValue("sortBySeries",t,!0)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){e&&Rd(e.sortBySeries)&&Vd(e.sortBySeries)&&(this.map.hasKey(e.sortBySeries)?e.sortBySeries=this.map.getKey(e.sortBySeries):(this.addDelayedMap("sortBySeries",e.sortBySeries),delete e.sortBySeries)),t.prototype.processConfig.call(this,e)},e}(AA);Om.registeredClasses.CategoryAxis=KA,Om.registeredClasses.CategoryAxisDataItem=UA;var JA=function(t){function e(){var e=t.call(this)||this;return e.className="XYSeriesDataItem",e.values.customValue={},e.values.valueX={stack:0},e.values.valueY={stack:0},e.values.openValueX={},e.values.openValueY={},e.values.dateX={},e.values.dateY={},e.values.openDateX={},e.values.openDateY={},e.setLocation("dateX",.5,0),e.setLocation("dateY",.5,0),e.setLocation("categoryX",.5,0),e.setLocation("categoryY",.5,0),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(t){this.setValue("customValue",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(t){this.setDate("dateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(t){this.setDate("dateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(t){this.setCategory("categoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(t){this.setCategory("categoryY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(t){this.setValue("openValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(t){this.setValue("openValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(t){this.setDate("openDateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(t){this.setDate("openDateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(t){this.setCategory("openCategoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(t){this.setCategory("openCategoryY",t)},enumerable:!0,configurable:!0}),e.prototype.getMin=function(t,e,i){var n,r=this;return Gd(i)||(i=0),kf(t,(function(t){var s;s=e?r.getWorkingValue(t):r.getValue(t),((s+=i)<n||!Gd(n))&&(n=s)})),n},e.prototype.getMax=function(t,e,i){var n,r=this;return Gd(i)||(i=0),kf(t,(function(t){var s;s=e?r.getWorkingValue(t):r.getValue(t),((s+=i)>n||!Gd(n))&&(n=s)})),n},e}(xA),YA=function(t){function e(){var e=t.call(this)||this;return e.groupFields={},e._xAxis=new Vf,e._yAxis=new Vf,e._xValueFields=[],e._yValueFields=[],e._baseInterval={},e.dataGrouped=!1,e.usesShowFields=!1,e._dataSetChanged=!1,e._maxxX=1e5,e._maxxY=1e5,e._propertiesChanged=!1,e.outOfRange=!1,e.className="XYSeries",e.isMeasured=!1,e.groupFields.valueX="close",e.groupFields.valueY="close",e.groupFields.customValue="close",e.groupFields.openValueX="open",e.groupFields.openValueY="open",e.cursorTooltipEnabled=!0,e.cursorHoverEnabled=!0,e.excludeFromTotal=!1,e.mainContainer.mask=new Pb,e.mainContainer.mask.setElement(e.paper.add("path")),e.stacked=!1,e.snapTooltip=!1,e._showBullets=!1,e.tooltip.pointerOrientation="horizontal",e.properties.stackToNegative=!0,e.hideTooltipWhileZooming=!0,e.setPropertyValue("maskBullets",!0),e.tooltip.events.on("hidden",(function(){e.returnBulletDefaultState()}),void 0,!1),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.observe(Db,(function(){e.inited&&(e._propertiesChanged=!0,e.legendDataItem&&(e.legendDataItem.childrenCreated=!1),e.chart&&e.chart.legend&&e.chart.legend.invalidateDataItems(),e.invalidate())}),void 0,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},e.prototype.createDataItem=function(){return new JA},e.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},e.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},e.prototype.validateData=function(){this._baseInterval={};var e=this.dataFields;if(e.valueYShow||e.openValueXShow||e.openValueXShow||e.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),t.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!Rd(this.dataFields[this._xField])||!Rd(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},e.prototype.processDataItem=function(e,i){try{t.prototype.processDataItem.call(this,e,i),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y"),this.setInitialWorkingValues(e)}catch(t){this._chart&&this._chart.raiseCriticalError(t)}},e.prototype.updateDataItem=function(e){t.prototype.updateDataItem.call(this,e),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y")},e.prototype.setInitialWorkingValues=function(t){},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.xAxis,i=this.yAxis;if(e){var n=this.dataItemsByAxis.getKey(e.uid);n&&n.clear(),e instanceof KA&&this.clearCatAxis(e)}if(i){var r=this.dataItemsByAxis.getKey(i.uid);r&&r.clear(),i instanceof KA&&this.clearCatAxis(i)}},e.prototype.clearCatAxis=function(t){var e=this.uid;t.dataItems.each((function(t){t.seriesDataItems[e]&&(t.seriesDataItems[e]=[])}))},e.prototype.defineFields=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){var i=t.axisFieldName,n=i+"X",r="open"+av(i)+"X",s=e.axisFieldName,a=s+"Y",o="open"+av(s)+"Y";this._xField=n,this._yField=a,this.dataFields[r]&&(this._xOpenField=r),this.dataFields[o]&&(this._yOpenField=o),this.dataFields[o]||this.baseAxis!=e||(this._yOpenField=a),this.dataFields[r]||this.baseAxis!=t||(this._xOpenField=n),this.stacked&&this.baseAxis==t&&(this._xOpenField=n),this.stacked&&this.baseAxis==e&&(this._yOpenField=a),t instanceof KA&&e instanceof KA&&(this._yOpenField||(this._yOpenField=a)),this._xValueFields=[],this._yValueFields=[],this.addValueField(t,this._xValueFields,this._xField),this.addValueField(t,this._xValueFields,this._xOpenField),this.addValueField(e,this._yValueFields,this._yField),this.addValueField(e,this._yValueFields,this._yOpenField)}},e.prototype.addValueField=function(t,e,i){t instanceof VA&&Rd(this.dataFields[i])&&-1==e.indexOf(i)&&e.push(i)},e.prototype.setCategoryAxisField=function(t,e){Rd(this.dataFields[t])||(this.dataFields[t]=e.dataFields.category)},e.prototype.setDateAxisField=function(t,e){Rd(this.dataFields[t])||(this.dataFields[t]=e.dataFields.date)},e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.createMask()},e.prototype.createMask=function(){if(this.mainContainer.mask){var t=this.getMaskPath();cm(this.axisRanges.iterator(),(function(e){e.axisFill.fillPath&&(e.axisFill.validate(),t+=e.axisFill.fillPath)})),this.mainContainer.mask.path=t}},e.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?fg({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},e.prototype.getAxisField=function(t){return t==this.xAxis?this.xField:t==this.yAxis?this.yField:void 0},e.prototype.validateDataItems=function(){var e=this.chart;e&&(this._maxxX=nf(1e5,2*e.plotContainer.maxWidth),this._maxxY=nf(1e5,2*e.plotContainer.maxHeight));var i=this.xAxis,n=this.yAxis;i&&n&&(i.updateAxisBySeries(),n.updateAxisBySeries()),t.prototype.validateDataItems.call(this),i&&n&&(i.postProcessSeriesDataItems(this),n.postProcessSeriesDataItems(this))},e.prototype.validateDataRange=function(){var e=this.xAxis,i=this.yAxis;e&&i&&(e.dataRangeInvalid&&e.validateDataRange(),i.dataRangeInvalid&&i.validateDataRange()),t.prototype.validateDataRange.call(this)},e.prototype.validate=function(){var e=this.xAxis,i=this.yAxis;if(e&&i){e.invalid&&e.validate(),i.invalid&&i.validate(),this.y=i.pixelY,this.x=e.pixelX,this._showBullets=!0;var n=this.minBulletDistance;Gd(n)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<n&&(this._showBullets=!1)}if(this.updateTooltip(),!(e instanceof WA&&e.groupData&&!this.dataGrouped||i instanceof WA&&i.groupData&&!this.dataGrouped)){t.prototype.validate.call(this);var r=this.chart,s=this.maskBullets;r&&s&&"XYChart"==r.className&&("vertical"!=r.leftAxesContainer.layout&&"vertical"!=r.rightAxesContainer.layout||(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),"horizontal"!=r.topAxesContainer.layout&&"horizontal"!=r.bottomAxesContainer.layout||(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(e.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var t=this.chart.xAxes.getIndex(0);if(!t)throw Error("There are no X axes on chart.");this.xAxis=t}return this._xAxis.get()}},set:function(t){this.setXAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setXAxis=function(t){var e=this._xAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._xAxis.dispose(),e.series.removeValue(this)),this._xAxis.set(t,t.registerSeries(this)),this.dataItemsByAxis.setKey(t.uid,new wm),this.invalidateData())},Object.defineProperty(e.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var t=this.chart.yAxes.getIndex(0);if(!t)throw Error("There are no Y axes on chart.");this.yAxis=t}return this._yAxis.get()}},set:function(t){this.setYAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setYAxis=function(t){var e=this._yAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._yAxis.dispose(),e.series.removeValue(this)),this._yAxis.set(t,t.registerSeries(this)),t.chart instanceof QA&&t.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(t.uid,new wm),this.invalidateData())},Object.defineProperty(e.prototype,"baseAxis",{get:function(){var t=this.xAxis,e=this.yAxis;return!this._baseAxis&&t&&e&&(e instanceof WA&&(this._baseAxis=e),t instanceof WA&&(this._baseAxis=t),e instanceof KA&&(this._baseAxis=e),t instanceof KA&&(this._baseAxis=t),this._baseAxis||(this._baseAxis=t)),this._baseAxis},set:function(t){this._baseAxis!=t&&(this._baseAxis=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.addData=function(e,i,n){t.prototype.addData.call(this,e,i,n),this.scrollbarSeries&&(this.scrollbarSeries.addData(e,i,!0),this.scrollbarSeries._parseDataFrom=this._parseDataFrom)},e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.scrollbarSeries&&this.scrollbarSeries.setData(e)},e.prototype.setDataSet=function(e){var i=t.prototype.setDataSet.call(this,e);if(i){this._dataSetChanged=!0;var n=this.dataItems;if(this.resetExtremes(),n&&n.length>0){var r=this.xAxis,s=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),r instanceof WA&&r==this.baseAxis&&(this._tmin.setKey(r.uid,n.getIndex(0).dateX.getTime()),this._tmax.setKey(r.uid,n.getIndex(n.length-1).dateX.getTime()),this.dispatch("extremeschanged")),s instanceof WA&&s==this.baseAxis&&(this._tmin.setKey(s.uid,n.getIndex(0).dateY.getTime()),this._tmax.setKey(s.uid,n.getIndex(n.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return i},e.prototype.processValues=function(e){t.prototype.processValues.call(this,e);var i=this.xAxis,n=this.yAxis;if(i&&n){var r=this.dataItems,s=1/0,a=-1/0,o=1/0,u=-1/0,l=this.startIndex,h=this.endIndex,c=l,d=h;e||(l=0,h=this.dataItems.length);for(var f=l;f<h;f++){var m=r.getIndex(f);this.getStackValue(m,e);var v=m.getValue("valueX","stack"),p=m.getValue("valueY","stack");e||(v=m.getValue("valueX","stackTrue"),p=m.getValue("valueY","stackTrue")),s=rf(m.getMin(this._xValueFields,e,v),s),o=rf(m.getMin(this._yValueFields,e,p),o),a=nf(m.getMax(this._xValueFields,e,v),a),u=nf(m.getMax(this._yValueFields,e,p),u),this.stacked&&(this.baseAxis==i&&(p<o&&(o=p),p>u&&(u=p)),this.baseAxis==n&&(v<s&&(s=v),v>a&&(a=v)))}i.processSeriesDataItems(),n.processSeriesDataItems();var b=i.uid,g=n.uid;if(this.xAxis instanceof VA&&(s==1/0||a==-1/0))return this._smin.setKey(b,void 0),this._smax.setKey(b,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof VA&&(o==1/0||u==-1/0))return this._smin.setKey(g,void 0),this._smax.setKey(g,void 0),void this.dispatchImmediately("selectionextremeschanged");if(!e&&(this._tmin.getKey(b)!=s||this._tmax.getKey(b)!=a||this._tmin.getKey(g)!=o||this._tmax.getKey(g)!=u)){this._tmin.setKey(b,s),this._tmax.setKey(b,a),this._tmin.setKey(g,o),this._tmax.setKey(g,u);var y=this.stackedSeries;y&&(y.isDisposed()?this.stackedSeries=void 0:y.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(l!=c||h!=d){s=1/0,a=-1/0,o=1/0,u=-1/0;for(f=c;f<d;f++){m=r.getIndex(f);this.getStackValue(m,e);v=m.getValue("valueX","stack"),p=m.getValue("valueY","stack");e||(v=m.getValue("valueX","stackTrue"),p=m.getValue("valueY","stackTrue")),s=rf(m.getMin(this._xValueFields,e,v),s),o=rf(m.getMin(this._yValueFields,e,p),o),a=nf(m.getMax(this._xValueFields,e,v),a),u=nf(m.getMax(this._yValueFields,e,p),u),this.stacked&&(this.baseAxis==i&&(p<o&&(o=p),p>u&&(u=p)),this.baseAxis==n&&(v<s&&(s=v),v>a&&(a=v)))}}if(this.xAxis instanceof VA&&(s==1/0||a==-1/0))return this._smin.setKey(b,void 0),this._smax.setKey(b,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof VA&&(o==1/0||u==-1/0))return this._smin.setKey(g,void 0),this._smax.setKey(g,void 0),void this.dispatchImmediately("selectionextremeschanged");if((this._smin.getKey(b)!=s||this._smax.getKey(b)!=a||this._smin.getKey(g)!=o||this._smax.getKey(g)!=u)&&(this._smin.setKey(b,s),this._smax.setKey(b,a),this._smin.setKey(g,o),this._smax.setKey(g,u),this.appeared||0!=this.start||1!=this.end||this.dataItems!=this.mainDataSet)){var w,S,x=!1;if(n instanceof VA&&!(n instanceof WA))(!Gd(w=this._tmin.getKey(g))||(this.usesShowFields||this._dataSetChanged||i instanceof WA&&i.groupData&&this.isShowing)&&o<w||this.stackedSeries&&!this.isHidden&&!e)&&(this._tmin.setKey(g,o),x=!0),(!Gd(S=this._tmax.getKey(g))||(this.usesShowFields||this._dataSetChanged||i instanceof WA&&i.groupData&&this.isShowing)&&u>S||this.stackedSeries&&!this.isHidden&&!e)&&(this._tmax.setKey(g,u),x=!0);if(i instanceof VA&&!(i instanceof WA))(!Gd(w=this._tmin.getKey(b))||(this.usesShowFields||this._dataSetChanged||n instanceof WA&&n.groupData&&this.isShowing)&&s<w||this.stackedSeries&&!this.isHidden&&!e)&&(this._tmin.setKey(b,s),x=!0),(!Gd(S=this._tmax.getKey(b))||(this.usesShowFields||this._dataSetChanged||n instanceof WA&&n.groupData&&this.isShowing)&&a>S||this.stackedSeries&&!this.isHidden&&!e)&&(this._tmax.setKey(b,a),x=!0);x&&this.dispatchImmediately("extremeschanged"),0==this.start&&1==this.end&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!e&&this.stacked&&this.processValues(!0)}},e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i;if(this.visible&&!this.isHiding&&!this.isShowing){var n=this._xAxis.get(),r=this._yAxis.get();n==this.baseAxis&&(i=n.getSeriesDataItem(this,n.toAxisPosition(t),this.snapTooltip)),r==this.baseAxis&&(i=r.getSeriesDataItem(this,r.toAxisPosition(e),this.snapTooltip));var s=this.showTooltipAtDataItem(i);if(s)return s;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},e.prototype.getAdjustedXLocation=function(t,e,i){return t.locations[e]},e.prototype.getAdjustedYLocation=function(t,e,i){return t.locations[e]},e.prototype.showTooltipAtDataItem=function(t){var e,i,n=this.chart.cursor;if(n&&n.hideSeriesTooltipsOnSelection&&n.selection.visible&&n.downPoint)this.hideTooltip();else if(this.returnBulletDefaultState(t),t&&t.visible){if(this.updateLegendValue(t),this.cursorTooltipEnabled){this.tooltipDataItem=t;var r=this.tooltipXField,s=this.tooltipYField;if(Rd(t[r])&&Rd(t[s])){var a=this.getPoint(t,r,s,this.getAdjustedXLocation(t,r),this.getAdjustedYLocation(t,s));if(a&&("XYChart"!=this.chart.className||!(a.y<-1||a.y>this.yAxis.pixelHeight+1||a.x<-1||a.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=a.x,this.tooltipY=a.y,this._prevTooltipDataItem!=t&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:t}),this._prevTooltipDataItem=t),this.cursorHoverEnabled)try{for(var o=Md(t.sprites),u=o.next();!u.done;u=o.next()){var l=u.value;!l.parent.visible||l.isHidden||l.__disabled||l.disabled||l.isHiding||(l.interactions.isRealHover||(l.dispatchImmediately("over"),l.interactions.isRealHover=!0),l.isHover=!0)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return this.showTooltip()?Iv({x:a.x,y:a.y},this):void 0}}}}else this.updateLegendValue(t,!0)},e.prototype.returnBulletDefaultState=function(t){var e,i;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=t)try{for(var n=Md(this._prevTooltipDataItem.sprites),r=n.next();!r.done;r=n.next()){var s=r.value;if(s.isDisposed())this._prevTooltipDataItem=void 0;else{var a=s.interactions.isRealHover;s.isHover=!1,a&&s.dispatchImmediately("out")}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},e.prototype.shouldCreateBullet=function(t,e){var i=e.xField;Rd(i)||(i=this.xField);var n=e.yField;if(Rd(n)||(n=this.yField),this.xAxis instanceof VA&&!t.hasValue([i])||this.yAxis instanceof VA&&!t.hasValue([n]))return!1;if(e.disabled){var r=e.propertyFields.disabled,s=t.dataContext;return!(!s||!1!==s[r])}return!0},e.prototype.updateTooltip=function(){this.hideTooltipWhileZooming||!this.tooltip||this.tooltip.isHidden||this.isHiding||this.isHidden||!this.tooltipDataItem||this.showTooltipAtDataItem(this.tooltipDataItem)},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem,n=e.xField;Rd(n)||(n=this.xField);var r=e.yField;Rd(r)||(r=this.yField);var s=this.xAxis,a=this.yAxis;if(s instanceof VA&&!i.hasValue([n])||a instanceof VA&&!i.hasValue([r]))e.visible=!1;else{var o=this.getBulletLocationX(e,n),u=this.getBulletLocationY(e,r);if(this.getPoint(i,n,r,o,u)){var l=this.xOpenField,h=this.yOpenField,c=void 0,d=void 0;if(s instanceof WA){Gd(o)||(o=0);var f=void 0,m=i.getWorkingValue(n);if(l?f=i.getWorkingValue(l):s==this.baseAxis&&(f=s.baseValue),Gd(f)||(f=m),(f+=S=i.getValue("valueX","stack"))==(m+=S)){var v=s.baseInterval,p=s.dateFormatter;f=Hp(new Date(f),v.timeUnit,v.count,p.firstDayOfWeek,p.utc,void 0,p.timezoneMinutes,p.timezone).getTime(),m=qp(new Date(f),v.timeUnit,v.count,p.utc).getTime()}var b=void 0;b=s==this.baseAxis?f+(m-f)*o:f+(m-f)*(1-o),c=s.valueToPosition(b)}else if(s instanceof VA){Gd(o)||(o=0);f=void 0,m=i.getWorkingValue(n);f=l?i.getWorkingValue(l):s.baseValue;b=(f+=S=i.getValue("valueX","stack"))+((m+=S)-f)*(1-o);c=s.valueToPosition(b)}else if(s instanceof KA){var g=this.getAdjustedXLocation(i,n,e.locationX),y=this.getAdjustedXLocation(i,l,e.locationX);c=s.categoryToPosition(i[n],g);var w=void 0;l&&(w=s.categoryToPosition(i[l],y)),Gd(w)||(w=1),c=w+(c-w)*o}if(a instanceof WA){Gd(u)||(u=0);f=void 0,m=i.getWorkingValue(r);if(h?f=i.getWorkingValue(h):a==this.baseAxis&&(f=a.baseValue),Gd(f)||(f=m),(f+=S=i.getValue("valueY","stack"))==(m+=S)){v=a.baseInterval,p=a.dateFormatter;f=Hp(new Date(f),v.timeUnit,v.count,p.firstDayOfWeek,p.utc,void 0,p.timezoneMinutes,p.timezone).getTime(),m=qp(new Date(f),v.timeUnit,v.count,p.utc).getTime()}b=void 0;b=a==this.baseAxis?f+(m-f)*u:f+(m-f)*(1-u),d=a.valueToPosition(b)}else if(a instanceof VA){Gd(u)||(u=0);var S;f=void 0,m=i.getWorkingValue(r);f=h?i.getWorkingValue(h):a.baseValue;b=(f+=S=i.getValue("valueY","stack"))+((m+=S)-f)*(1-u);d=a.valueToPosition(b)}else if(a instanceof KA){d=a.categoryToPosition(i[r],u);var x=this.getAdjustedYLocation(i,r,e.locationY),C=this.getAdjustedYLocation(i,h,e.locationY);d=a.categoryToPosition(i[r],x);var O=void 0;h&&(O=a.categoryToPosition(i[h],C)),Gd(O)||(O=1),d=O+(d-O)*u}e.visible=!0,this.positionBulletReal(e,c,d)}else e.visible=!1}},e.prototype.positionBulletReal=function(t,e,i){t.x=this.xAxis.renderer.positionToPoint(e,i).x,t.y=this.yAxis.renderer.positionToPoint(i,e).y},e.prototype.getBulletLocationX=function(t,e){var i=t.locationX,n=t.dataItem;return Gd(i)||(i=n.workingLocations[e]),i},e.prototype.getBulletLocationY=function(t,e){var i=t.locationY,n=t.dataItem;return Gd(i)||(i=n.workingLocations[e]),i},e.prototype.updateStacking=function(){var t=this;this.invalidateDataItems(),this.chart&&this.chart.series.each((function(e){e.baseAxis==t.baseAxis&&(e.stackedSeries=void 0,e.invalidateDataItems(),e.invalidateProcessedData())}))},Object.defineProperty(e.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(t){if(this.setPropertyValue("stacked",t,!0)){this.updateStacking();var e,i=this.xAxis,n=this.yAxis;if(!t)i!=this.baseAxis&&i instanceof VA&&(e=this.xField),n!=this.baseAxis&&n instanceof VA&&(e=this.yField),e&&this.dataItems.each((function(t){t.setCalculatedValue(e,0,"stack"),t.setCalculatedValue(e,0,"stackTrue")}))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var i,n=this;this.isHidden&&(this.appeared&&this.xAxis instanceof WA&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof WA&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0))),this.xAxis instanceof VA&&this.xAxis!=this.baseAxis&&(i=this._xValueFields),this.yAxis instanceof VA&&this.yAxis!=this.baseAxis&&(i=this._yValueFields);var r,s=this.startIndex,a=this.endIndex,o=0,u=this.defaultState.transitionDuration;Gd(e)&&(u=e),cm(mm(this.dataItems.iterator()),(function(t){var e=t[0],l=t[1],h=u;(e<n.startIndex-10||e>n.endIndex+10)&&(h=0,o=0),n.sequencedInterpolation&&h>0&&(o=n.sequencedInterpolationDelay*e+u*(e-s)/(a-s)),r=l.show(h,o,i)})),this.dataSets.each((function(t,e){e!=n.dataItems&&e.each((function(t){t.events.disable(),t.show(0,0,i),t.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(t){t.events.disable(),t.show(0,0,i),t.events.enable()}));var l=t.prototype.show.call(this,e);return r&&!r.isFinished()&&(l=r),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),l},e.prototype.hide=function(e){var i,n,r=this,s=this.xAxis;s instanceof VA&&s!=this.baseAxis&&(i=this._xValueFields,n=this.stacked||s.minZoomed<s.baseValue&&s.maxZoomed>s.baseValue||this.stackedSeries?s.baseValue:s.min);var a=this.yAxis;a instanceof VA&&a!=this.baseAxis&&(i=this._yValueFields,n=this.stacked||a.minZoomed<a.baseValue&&a.maxZoomed>a.baseValue||this.stackedSeries?a.baseValue:a.min);var o=this.startIndex,u=this.endIndex,l=this.hiddenState.transitionDuration;Gd(e)&&(l=e);var h,c=0;cm(mm(this.dataItems.iterator()),(function(t){var e=t[0],s=t[1],a=l;(e<r.startIndex-10||e>r.endIndex+10)&&(a=0),0==a?s.hide(0,0,n,i):(r.sequencedInterpolation&&a>0&&(c=r.sequencedInterpolationDelay*e+l*(e-o)/(u-o)),h=s.hide(a,c,n,i))})),this.dataSets.each((function(t,e){e!=r.dataItems&&e.each((function(t){t.events.disable(),t.hide(0,0,n,i),t.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(t){t.events.disable(),t.hide(0,0,n,i),t.events.enable()}));var d=t.prototype.hide.call(this,l);return d&&!d.isFinished()&&d.delay(c),h&&!h.isFinished()&&(d=h),this.appeared&&this.dispatch("selectionextremeschanged"),this.validateDataElements(),d},e.prototype.handleDataItemWorkingValueChange=function(e,i){t.prototype.handleDataItemWorkingValueChange.call(this,e,i),cm(this.baseAxis.series.iterator(),(function(t){(t.stacked||t.stackedSeries)&&t.invalidateProcessedData()}))},e.prototype.getStackValue=function(t,e){var i=this,n=this.xAxis,r=this.yAxis;if(this.stacked&&n&&r){var s,a=this.chart,o=a.series.indexOf(this);n!=this.baseAxis&&n instanceof VA&&(s=this.xField),r!=this.baseAxis&&r instanceof VA&&(s=this.yField),s&&(t.setCalculatedValue(s,0,"stack"),t.setCalculatedValue(s,0,"stackTrue"),hm(a.series.range(0,o).backwards().iterator(),(function(e){if(e.xAxis==n&&e.yAxis==r&&e.className==i.className){e.stackedSeries=i;var a=e.dataItems.getIndex(t.index);if(a&&a.hasValue(i._xValueFields)&&a.hasValue(i._yValueFields)){var o,u=t.getValue(s),l=a.getValue(s,"stackTrue");null==l&&(l=0);var h=a.getValue(s)+l;if(o=a.getWorkingValue(s)+a.getValue(s,"stack"),!i.stackToNegative)return t.setCalculatedValue(s,o,"stack"),t.setCalculatedValue(s,h,"stackTrue"),!1;if(u>=0&&h>=0||u<0&&h<0)return t.setCalculatedValue(s,o,"stack"),t.setCalculatedValue(s,h,"stackTrue"),!1;if(!e.stacked)return!1}else if(!e.stacked)return!1}return!0})))}},Object.defineProperty(e.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(t){this.setPropertyValue("stackToNegative",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(t){this._tooltipXField=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(t){this._tooltipYField=t},enumerable:!0,configurable:!0}),e.prototype.min=function(t){return this._tmin.getKey(t.uid)},e.prototype.max=function(t){return this._tmax.getKey(t.uid)},e.prototype.selectionMin=function(t){return this._smin.getKey(t.uid)},e.prototype.selectionMax=function(t){return this._smax.getKey(t.uid)},e.prototype.processConfig=function(e){if(e){if(Rd(e.baseAxis)&&Vd(e.baseAxis)&&(this.map.hasKey(e.baseAxis)?e.baseAxis=this.map.getKey(e.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.baseAxis+'" found for `baseAxis`.'),delete e.baseAxis)),Rd(e.xAxis)&&Vd(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.xAxis+'" found for `xAxis`.'),delete e.xAxis)),Rd(e.yAxis)&&Vd(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.yAxis+'" found for `yAxis`.'),delete e.yAxis)),Rd(e.axisRanges)&&Wd(e.axisRanges))for(var i=0,n=e.axisRanges.length;i<n;i++){var r=e.axisRanges[i];Rd(r.type)||(r.type="AxisDataItem"),Rd(r.axis)&&Vd(r.axis)&&this.map.hasKey(r.axis)?r.component=this.map.getKey(r.axis):Rd(r.component)&&Vd(r.component)&&this.map.hasKey(r.component)&&(r.component=this.map.getKey(r.component))}Rd(e.dataFields)&&$d(e.dataFields)||this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}t.prototype.processConfig.call(this,e)},e.prototype.getPoint=function(t,e,i,n,r,s,a){if(this.xAxis&&this.yAxis){var o=this.xAxis.getX(t,e,n),u=this.yAxis.getY(t,i,r);return{x:o=Xd(o,-this._maxxX,this._maxxX),y:u=Xd(u,-this._maxxY,this._maxxY)}}},e.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var t="";nm(this.dataFields,(function(e,i){t+="{"+e+"} "})),this.itemReaderText=t,this._itemReaderTextChanged=!1}},Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(t){this.setPropertyValue("cursorHoverEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(t){this.setPropertyValue("excludeFromTotal",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t);var e=this.chart;e&&(this.bulletsContainer.parent=t?e.bulletsContainer:e.axisBulletsContainer)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){this.groupFields=tv(e.groupFields,{}),t.prototype.copyFrom.call(this,e)},e.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),t.prototype.dispose.call(this)},e}(CA);Om.registeredClasses.XYSeries=YA,Om.registeredClasses.XYSeriesDataItem=JA;var ZA=function(t){function e(){var e=t.call(this)||this;e._chart=new Vf,e.className="XYChartScrollbar";var i=new Dp;e.padding(0,0,0,0);var n=e.createChild(QA);if(n.shouldClone=!1,n.margin(0,0,0,0),n.padding(0,0,0,0),n.interactionsEnabled=!1,e._scrollbarChart=n,!zv()){var r=new ny;r.filterUnits="userSpaceOnUse",n.plotContainer.filters.push(r)}e._disposers.push(e._scrollbarChart),e.minHeight=60,e.minWidth=60;var s=e.createChild(Pb);s.shouldClone=!1,s.setElement(e.paper.add("path")),s.fill=i.getFor("background"),s.fillOpacity=.8,s.interactionsEnabled=!1,s.isMeasured=!1,s.toBack(),e._unselectedOverlay=s,e._disposers.push(e._unselectedOverlay),n.toBack(),e.background.cornerRadius(0,0,0,0);var a=e.thumb.background;a.cornerRadius(0,0,0,0),a.fillOpacity=0,a.fill=i.getFor("background");var o=a.states.getKey("hover");o&&(o.properties.fillOpacity=.2);var u=a.states.getKey("down");return u&&(u.properties.fillOpacity=.4),e._disposers.push(e._chart),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Am,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(t){var e=this,i=t.newValue;if(i.xAxis&&i.yAxis){var n=this.scrollbarChart;n.zoomOutButton.disabled=!0,this.chart=i.chart,n.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,n.language.locale=this.chart.language.locale;var r=!0,s=!0;cm(this.series.iterator(),(function(t){t!=i&&(t.xAxis==i.xAxis&&e.scrollbarChart.xAxes.length>0&&(r=!1),t.yAxis==i.yAxis&&e.scrollbarChart.yAxes.length>0&&(s=!1))})),i.events.on("beforedisposed",(function(){e.series.removeValue(i)}));var a=new Dp,o=i.clone();if(rp.queue&&this.addDisposer(this.chart.events.on("removedfromqueue",(function(){n.invalidateData()}))),zv()&&(o.stroke=Ym("#aaaaaa"),o.fill=o.stroke,o.propertyFields.fill=void 0,o.propertyFields.stroke=void 0),i.scrollbarSeries=o,r){var u=i.xAxis.clone();if(n.xAxes.moveValue(u),u.title.disabled=!0,u.rangeChangeDuration=0,(d=u.renderer).ticks.template.disabled=!0,d.inside=!0,d.labels.template.inside=!0,d.line.strokeOpacity=0,d.minLabelPosition=.02,d.maxLabelPosition=.98,d.line.disabled=!0,d.axisFills.template.disabled=!0,d.baseGrid.disabled=!0,d.grid.template.strokeOpacity=.05,d.minWidth=void 0,d.minHeight=void 0,d.padding(0,0,0,0),d.chart=n,d.margin(0,0,0,0),u.width=Ad(100),d.labels.template.fillOpacity=.5,u.maxZoomCount=void 0,u.minZoomCount=void 0,u instanceof WA){var l=u,h=i.xAxis;l.groupCount=5*h.groupCount,l.min=void 0,l.max=void 0,this._disposers.push(l.clonedFrom.events.on("extremeschanged",(function(){Gd(l.clonedFrom.minDefined)&&(l.min=l.clonedFrom.minDefined),Gd(l.clonedFrom.maxDefined)&&(l.max=l.clonedFrom.maxDefined)}),void 0,!1))}else if(u instanceof VA){var c=u;c.min=void 0,c.max=void 0,Gd(c.clonedFrom.minDefined)||(c.min=void 0),Gd(c.clonedFrom.maxDefined)||(c.max=void 0),this._disposers.push(c.clonedFrom.events.on("extremeschanged",(function(){Gd(c.clonedFrom.minDefined)&&(c.min=c.clonedFrom.min),Gd(c.clonedFrom.maxDefined)&&(c.max=c.clonedFrom.max)}),void 0,!1))}o.xAxis=u}else this.scrollbarChart.xAxes.each((function(t){t.clonedFrom==i.xAxis&&(o.xAxis=t)}));if(s){var d,f=i.yAxis.clone();if(n.yAxes.moveValue(f),f.title.disabled=!0,f.rangeChangeDuration=0,(d=f.renderer).ticks.template.disabled=!0,d.inside=!0,d.labels.template.inside=!0,d.line.strokeOpacity=0,d.minLabelPosition=.02,d.maxLabelPosition=.98,d.line.disabled=!0,d.axisFills.template.disabled=!0,d.grid.template.stroke=a.getFor("background"),d.baseGrid.disabled=!0,d.grid.template.strokeOpacity=.05,d.minWidth=void 0,d.minHeight=void 0,d.chart=n,d.padding(0,0,0,0),d.margin(0,0,0,0),f.height=Ad(100),d.labels.template.fillOpacity=.5,o.yAxis=f,f.maxZoomCount=void 0,f.minZoomCount=void 0,f instanceof WA){var m=f;m.min=void 0,m.max=void 0;h=i.yAxis;f.groupCount=5*h.groupCount,this._disposers.push(m.clonedFrom.events.on("extremeschanged",(function(){Gd(m.clonedFrom.minDefined)&&(m.min=m.clonedFrom.minDefined),Gd(m.clonedFrom.maxDefined)&&(m.max=m.clonedFrom.maxDefined)})))}else if(f instanceof VA){var v=f;v.min=void 0,v.max=void 0,Gd(v.clonedFrom.minDefined)||(v.min=void 0),Gd(v.clonedFrom.maxDefined)||(v.max=void 0),this._disposers.push(v.clonedFrom.events.on("extremeschanged",(function(){Gd(v.clonedFrom.minDefined)&&(v.min=v.clonedFrom.minDefined),Gd(v.clonedFrom.maxDefined)&&(v.max=v.clonedFrom.maxDefined)})))}}else this.scrollbarChart.yAxes.each((function(t){t.clonedFrom==i.yAxis&&(o.yAxis=t)}));o.rangeChangeDuration=0,o.interpolationDuration=0,o.defaultState.transitionDuration=0,o.showOnInit=!1,this._disposers.push(o.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(i.events.on("datavalidated",(function(){o.data!=i.data&&(o.data=i.data)}),void 0,!1)),o.defaultState.properties.visible=!0,n.series.push(o),this.updateByOrientation()}},e.prototype.updateByOrientation=function(){var t=this;this._scrollbarChart&&(cm(this._scrollbarChart.xAxes.iterator(),(function(e){var i=e.renderer;"vertical"==t.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)})),cm(this._scrollbarChart.yAxes.iterator(),(function(e){var i=e.renderer;"horizontal"==t.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)})))},e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue,i=this.scrollbarChart;i.series.each((function(t){t&&t.clonedFrom==e&&i.series.removeValue(t)})),0==i.series.length&&(i.xAxes.clear(),i.yAxes.clear());try{e.events.off("validated",this.zoomOutAxes,this)}catch(t){}},Object.defineProperty(e.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.get()!==t&&(this._chart.set(t,t.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),e.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},e.prototype.zoomOutAxes=function(){var t=this.scrollbarChart;cm(t.xAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)})),cm(t.yAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)}))},e.prototype.updateThumb=function(e){if(void 0===e&&(e=!0),t.prototype.updateThumb.call(this,e),this._unselectedOverlay){var i=this.thumb,n=i.pixelX||0,r=i.pixelY||0,s=i.pixelWidth||0,a=i.pixelHeight||0,o="";"horizontal"==this.orientation?(o=fg({x:-1,y:0,width:n,height:a}),o+=fg({x:n+s,y:0,width:(this.pixelWidth||0)-n-s,height:a})):(o=fg({x:0,y:0,width:s,height:r}),o+=fg({x:0,y:r+a,width:s,height:(this.pixelHeight||0)-r-a})),this._unselectedOverlay.path=o}},e.prototype.processConfig=function(e){if(e&&Rd(e.series)&&Wd(e.series))for(var i=0,n=e.series.length;i<n;i++){var r=e.series[i];if(Rd(r)&&Vd(r)){if(!this.map.hasKey(r))throw Error("XYChartScrollbar error: Series with id `"+r+"` does not exist.");e.series[i]=this.map.getKey(r)}}t.prototype.processConfig.call(this,e)},e}(Og);Om.registeredClasses.XYChartScrollbar=ZA;var XA=function(t){function e(){var e=t.call(this)||this;return e.className="XYChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(OA),QA=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=qA,e._axisRendererY=BA,e._seriesPoints=[],e.className="XYChart",e.maskBullets=!0,e.arrangeTooltips=!0;var i=e.chartContainer;i.layout="vertical",e.padding(15,15,15,15);var n=i.createChild(Eb);n.shouldClone=!1,n.layout="vertical",n.width=Ad(100),n.zIndex=1,e.topAxesContainer=n;var r=i.createChild(Eb);r.shouldClone=!1,r.layout="horizontal",r.width=Ad(100),r.height=Ad(100),r.zIndex=0,e.yAxesAndPlotContainer=r;var s=i.createChild(Eb);s.shouldClone=!1,s.width=Ad(100),s.layout="vertical",s.zIndex=1,e.bottomAxesContainer=s;var a=r.createChild(Eb);a.shouldClone=!1,a.layout="horizontal",a.height=Ad(100),a.contentAlign="right",a.events.on("transformed",e.updateXAxesMargins,e,!1),a.zIndex=1,e.leftAxesContainer=a;var o=r.createChild(Eb);o.shouldClone=!1,o.height=Ad(100),o.width=Ad(100),o.background.fillOpacity=0,e.plotContainer=o,e.mouseWheelBehavior="none",e._cursorContainer=o;var u=r.createChild(Eb);u.shouldClone=!1,u.layout="horizontal",u.height=Ad(100),u.zIndex=1,u.events.on("transformed",e.updateXAxesMargins,e,!1),e.rightAxesContainer=u,e.seriesContainer.parent=o,e.bulletsContainer.parent=o;var l=o.createChild($g);l.shouldClone=!1,l.align="right",l.valign="top",l.zIndex=Number.MAX_SAFE_INTEGER,l.marginTop=5,l.marginRight=5,l.hide(0),e.zoomOutButton=l;var h=e.plotContainer.createChild(Eb);return h.shouldClone=!1,h.width=Ad(100),h.height=Ad(100),h.isMeasured=!1,h.zIndex=4,h.layout="none",e.axisBulletsContainer=h,e._bulletMask=e.plotContainer,e.events.on("beforedatavalidated",(function(){e.series.each((function(t){t.dataGrouped=!1,t._baseInterval={}}))}),e,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,Rd(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},e.prototype.draw=function(){t.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},e.prototype.updatePlotElements=function(){cm(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateData=function(){0==this._parseDataFrom&&(cm(this.xAxes.iterator(),(function(t){t.dataChangeUpdate()})),cm(this.yAxes.iterator(),(function(t){t.dataChangeUpdate()})),cm(this.series.iterator(),(function(t){t.dataChangeUpdate()}))),t.prototype.validateData.call(this)},e.prototype.updateXAxesMargins=function(){var t=this.leftAxesContainer.measuredWidth,e=this.rightAxesContainer.measuredWidth,i=this.bottomAxesContainer;i.paddingLeft==t&&i.paddingRight==e||(i.paddingLeft=t,i.paddingRight=e);var n=this.topAxesContainer;n.paddingLeft==t&&n.paddingRight==e||(n.paddingLeft=t,n.paddingRight=e)},e.prototype.reinit=function(){t.prototype.reinit.call(this),this.series.each((function(t){t.appeared=!1}))},e.prototype.handleXAxisChange=function(t){this.updateXAxis(t.target)},e.prototype.handleYAxisChange=function(t){this.updateYAxis(t.target)},e.prototype.processXAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererX,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),e.axisLetter="X",e.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),e.dataProvider=this,this.updateXAxis(e.renderer),this.processAxis(e)},e.prototype.processYAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererY,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),e.axisLetter="Y",e.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),e.dataProvider=this,this.updateYAxis(e.renderer),this.processAxis(e)},e.prototype.handleXAxisRangeChange=function(){var t=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,t)},e.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var t=!1;hm(this.xAxes.iterator(),(function(e){if(e.toggleZoomOutButton)if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(Yd(e.end-e.start,3)<1/i)return t=!0,!1}else if(Yd(e.start,3)>0||Yd(e.end,3)<1)return t=!0,!1;return!0})),hm(this.yAxes.iterator(),(function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(Yd(e.end-e.start,3)<1/i)return t=!0,!1}else if(Yd(e.start,3)>0||Yd(e.end,3)<1)return t=!0,!1;return!0}})),this.seriesAppeared||(t=!1),t?this.zoomOutButton.show():this.zoomOutButton.hide()}},e.prototype.seriesAppeared=function(){var t=!1;return cm(this.series.iterator(),(function(e){if(!e.appeared)return t=!1,!1})),t},e.prototype.handleYAxisRangeChange=function(){var t=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,t)},e.prototype.updateScrollbar=function(t,e){t&&(t.skipRangeEvents(),t.start=e.start,t.end=e.end)},e.prototype.getCommonAxisRange=function(t){var e,i;return t.each((function(t){if(!t.zoomable||t instanceof VA&&t.syncWithAxis);else{var n=t.start,r=t.end;t.renderer.inversed&&(n=1-t.end,r=1-t.start),(!Gd(e)||n<e)&&(e=n),(!Gd(i)||r>i)&&(i=r)}})),{start:e,end:i}},e.prototype.updateXAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.topAxesContainer,e.toFront()):(e.parent=this.bottomAxesContainer,e.toBack()),e.renderer&&e.renderer.processRenderer()},e.prototype.updateYAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.rightAxesContainer,e.toBack()):(e.parent=this.leftAxesContainer,e.toFront()),e.renderer&&e.renderer.processRenderer()},e.prototype.processAxis=function(t){var e=this;t instanceof KA&&this._dataUsers.moveValue(t);var i=t.renderer;i.gridContainer.parent=this.plotContainer,i.gridContainer.toBack(),i.breakContainer.parent=this.plotContainer,i.breakContainer.toFront(),i.breakContainer.zIndex=10,t.addDisposer(new _f((function(){e.dataUsers.removeValue(t)}))),i.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(t.events.on("positionchanged",(function(){var n=Av({x:0,y:0},t,e.axisBulletsContainer);t.renderer instanceof BA&&(i.bulletsContainer.y=n.y),t.renderer instanceof qA&&(i.bulletsContainer.x=n.x)}),void 0,!1)),this.plotContainer.events.on("maxsizechanged",(function(){e.inited&&(t.invalidateDataItems(),e.updateSeriesMasks())}),t,!1)},e.prototype.updateSeriesMasks=function(){zv()&&this.series.each((function(t){var e=t.mainContainer.mask;t.mainContainer.mask=void 0,t.mainContainer.mask=e}))},e.prototype.handleSeriesRemoved=function(e){var i=e.oldValue;i&&(i.xAxis&&(i.xAxis.series.removeValue(i),i.xAxis.invalidateProcessedData()),i.yAxis&&(i.yAxis.series.removeValue(i),i.yAxis.invalidateProcessedData()),this.series.each((function(t){t.resetExtremes()}))),t.prototype.handleSeriesRemoved.call(this,e)},Object.defineProperty(e.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new Am,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new km(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),e.prototype.handleAxisRemoval=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),e.autoDispose&&e.dispose()},Object.defineProperty(e.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new Am,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new km(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(e){try{t.prototype.handleSeriesAdded.call(this,e);var i=e.newValue;0!=this.xAxes.length&&0!=this.yAxes.length||(Om.removeFromInvalidComponents(i),i.dataInvalid=!1),i.maskBullets=i.maskBullets,null==i.fill&&(this.patterns?(Rd(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),Rd(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof Jm&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next()),Rd(i.stroke)||(i.stroke=i.fill)}catch(t){this.raiseCriticalError(t)}},Object.defineProperty(e.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor!=t&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=t,t&&(this._disposers.push(t),t.chart=this,t.shouldClone=!1,t.parent=this._cursorContainer,t.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),t.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),t.events.on("zoomended",this.handleCursorZoomEnd,this,!1),t.events.on("panstarted",this.handleCursorPanStart,this,!1),t.events.on("panning",this.handleCursorPanning,this,!1),t.events.on("panended",this.handleCursorPanEnd,this,!1),t.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),t.events.on("hidden",this.handleHideCursor,this,!1),t.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),e.prototype.handleCursorPositionChange=function(){var t=this.cursor;if(t.visible&&!t.isHiding){var e=this.cursor.xPosition,i=this.cursor.yPosition;this.showSeriesTooltip({x:e,y:i});var n=[],r=t.snapToSeries;if(r&&!t.downPoint){r instanceof YA&&(r=[r]);var s=[];kf(r,(function(t){if(!t.isHidden&&!t.isHiding){var r=t.xAxis,a=t.yAxis;r instanceof VA&&!(r instanceof WA)&&a instanceof VA&&!(a instanceof WA)?(t.dataItems.each((function(t){s.push(t)})),jf(n,t.yAxis),jf(n,t.xAxis)):(t.baseAxis==t.xAxis&&(jf(n,t.yAxis),s.push(r.getSeriesDataItem(t,r.toAxisPosition(e),!0))),t.baseAxis==t.yAxis&&(jf(n,t.xAxis),s.push(a.getSeriesDataItem(t,a.toAxisPosition(i),!0))))}}));var a=this.getClosest(s,e,i);a&&(this.series.each((function(t){var e=a.component;t!=e&&(t.hideTooltip(),t.xAxis!=e.xAxis&&(t.xAxis.hideTooltip(),n.push(t.xAxis)),t.yAxis!=e.yAxis&&(t.yAxis.hideTooltip(),n.push(t.yAxis)))})),a.component.showTooltipAtDataItem(a),t.handleSnap(a.component))}this._seriesPoints=[],this._cursorXPosition!=e&&this.showAxisTooltip(this.xAxes,e,n),this._cursorYPosition!=i&&this.showAxisTooltip(this.yAxes,i,n),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},e.prototype.getClosest=function(t,e,i){var n,r=1/0;return If(t,(function(t){if(t){var s=t.component.xAxis,a=t.component.yAxis,o=s.positionToCoordinate(s.toGlobalPosition(s.toAxisPosition(e))),u=a.positionToCoordinate(a.toGlobalPosition(a.toAxisPosition(i))),l=t.component.xField,h=t.component.yField;if(s instanceof VA&&!Gd(t.getValue(l)))return!0;if(a instanceof VA&&!Gd(t.getValue(h)))return!0;var c=s.positionToCoordinate(s.toGlobalPosition(s.getPositionX(t,l,t.locations[l],"valueX"))),d=a.positionToCoordinate(a.toGlobalPosition(a.getPositionY(t,h,t.locations[h],"valueY"))),f=Math.sqrt(Math.pow(o-c,2)+Math.pow(u-d,2));return f<r&&(r=f,n=t),!0}})),n},e.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},e.prototype.updateSeriesLegend=function(){cm(this.series.iterator(),(function(t){t.updateLegendValue()}))},e.prototype.hideObjectTooltip=function(t){cm(t.iterator(),(function(t){t.cursorTooltipEnabled&&t.hideTooltip(0)}))},e.prototype.showSeriesTooltip=function(t){var e=this;if(t){var i=[];this.series.each((function(n){if(n.xAxis instanceof WA&&n.xAxis.snapTooltip||n.yAxis instanceof WA&&n.yAxis.snapTooltip);else{var r=n.showTooltipAtPosition(t.x,t.y);r&&(n.tooltip.setBounds(jv({x:0,y:0,width:e.pixelWidth,height:e.pixelHeight},e)),i.push({series:n,point:r}))}})),this.arrangeTooltips&&this.sortSeriesTooltips(i)}else this.series.each((function(t){t.hideTooltip()}))},e.prototype.sortSeriesTooltips=function(t){if(t.length>0){var e=this.cursor;if(e&&Gd(e.maxTooltipDistance)){var i,n,r=Iv({x:e.point.x,y:e.point.y},e),s=1/0;kf(t,(function(t){var e=t.series,a=t.point;if(a){var o={x:a.x,y:a.y},u=Math.abs(of(o,r));u<s&&(n=o,s=u,i=e)}}));var a=[];i&&(kf(t,(function(t){if(Math.abs(of(t.point,n))<=Math.abs(e.maxTooltipDistance))a.push({series:t.series,point:t.point});else{var i=t.series.tooltipDataItem;i&&kf(i.sprites,(function(t){t.isHover=!1,t.handleOutReal()})),t.series.hideTooltip(0)}})),e.maxTooltipDistance<0&&(a.length>0&&kf(a,(function(t){i!=t.series&&t.series.hideTooltip(0)})),a=[{series:i,point:n}])),t=a}var o=Iv({x:-.5,y:-.5},this.plotContainer),u=Iv({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),l=0,h=[];kf(t,(function(t){var e=t.point;e&&Cf(e,{x:o.x,y:o.y,width:u.x-o.x,height:u.y-o.y})&&(h.push({point:e,series:t.series}),l+=e.y)})),t=h;var c=this.series.getIndex(0),d=!1;c&&c.yAxis&&c.yAxis.renderer.inversed&&(d=!0),d?t.sort((function(t,e){return Em(t.point.y,e.point.y)})):(t.sort((function(t,e){return Em(e.point.y,t.point.y)})),t.reverse());var f=l/t.length,m=Dv({x:0,y:0},this.svgContainer.SVGContainer).y;if(t.length>0){var v=o.y,p=u.y;Lv({x:0,y:v},this);var b=!1;if(f>v+(p-v)/2)for(var g=p,y=t.length-1;y>=0;y--){var w=(O=t[y].series).tooltip,S=t[y].point.y;if(w.setBounds({x:0,y:-m,width:this.pixelWidth,height:g+m}),w.invalid&&w.validate(),w.toBack(),(g=Iv({x:0,y:w.label.pixelY-w.pixelY+S-w.pixelMarginTop},w).y)<-m){b=!0;break}}if(f<=v+(p-v)/2||b)for(var x=v,C=(y=0,t.length);y<C;y++){var O=t[y].series;S=t[y].point.y;(w=O.tooltip).setBounds({x:0,y:x,width:this.pixelWidth,height:p}),w.invalid&&w.validate(),w.toBack(),x=Iv({x:0,y:w.label.pixelY+w.label.measuredHeight-w.pixelY+S+w.pixelMarginBottom},w).y}}}},e.prototype.showAxisTooltip=function(t,e,i){var n=this;cm(t.iterator(),(function(t){i&&-1!=i.indexOf(t)||(n.dataItems.length>0||t.dataItems.length>0)&&t.showTooltipAtPosition(e)}))},e.prototype.getUpdatedRange=function(t,e){if(t){var i,n;t.renderer.inversed?(af(e),i=1-t.end,n=1-t.start):(i=t.start,n=t.end);var r=n-i;return{start:i+e.start*r,end:i+e.end*r}}},e.prototype.handleCursorZoomEnd=function(t){var e=this.cursor,i=e.behavior;if("zoomX"==i||"zoomXY"==i){var n=e.xRange;n&&this.xAxes.length>0&&((n=this.getUpdatedRange(this.xAxes.getIndex(0),n)).priority="start",this.zoomAxes(this.xAxes,n))}if("zoomY"==i||"zoomXY"==i){var r=e.yRange;r&&this.yAxes.length>0&&((r=this.getUpdatedRange(this.yAxes.getIndex(0),r)).priority="start",this.zoomAxes(this.yAxes,r))}this.handleHideCursor()},e.prototype.handleCursorPanStart=function(t){var e=this.xAxes.getIndex(0);e&&(this._panStartXRange={start:e.start,end:e.end},e.renderer.inversed&&(this._panStartXRange=af(this._panStartXRange)));var i=this.yAxes.getIndex(0);i&&(this._panStartYRange={start:i.start,end:i.end},i.renderer.inversed&&(this._panStartYRange=af(this._panStartYRange)))},e.prototype.handleCursorPanEnd=function(t){var e=this.cursor,i=e.behavior;if(this._panEndXRange&&("panX"==i||"panXY"==i)){var n=this._panEndXRange,r=this._panStartXRange,s=0;n.start<0&&(s=n.start),r.end>1?n.end>r.end&&(s=n.end-r.end):n.end>1&&(s=n.end-1),this.zoomAxes(this.xAxes,{start:n.start-s,end:n.end-s},!1,e.snapOnPan),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&("panY"==i||"panXY"==i)){s=0;(n=this._panEndYRange).start<0&&(s=n.start),n.end>1&&(s=n.end-1),this.zoomAxes(this.yAxes,{start:n.start-s,end:n.end-s},!1,e.snapOnPan),this._panEndYRange=void 0,this._panStartYRange=void 0}},e.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},e.prototype.handleCursorPanning=function(t){var e=this.cursor,i=e.behavior,n=e.maxPanOut;if(this._panStartXRange&&("panX"==i||"panXY"==i)){var r=this._panStartXRange,s=e.xRange,a=this.getCommonAxisRange(this.xAxes),o=r.end-r.start,u=s.start*(a.end-a.start),l=Math.max(-n,u+r.start),h=Math.min(u+r.end,1+n);l<=0&&(h=l+o),h>=1&&(l=h-o);var c={start:l,end:h};this._panEndXRange=c,this.zoomAxes(this.xAxes,c,!1,!1,e.maxPanOut)}if(this._panStartYRange&&("panY"==i||"panXY"==i)){r=this._panStartYRange,s=e.yRange,a=this.getCommonAxisRange(this.yAxes),o=r.end-r.start,u=s.start*(a.end-a.start),l=Math.max(-n,u+r.start),h=Math.min(u+r.end,1+n);l<=0&&(h=l+o),h>=1&&(l=h-o);c={start:l,end:h};this._panEndYRange=c,this.zoomAxes(this.yAxes,c,!1,!1,e.maxPanOut)}this.handleHideCursor()},e.prototype.handleYAxisSet=function(t){},e.prototype.handleCursorZoomStart=function(t){},Object.defineProperty(e.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(t){var e=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=t,t&&(this._disposers.push(t),t.parent=this.topAxesContainer,t.shouldClone=!1,t.startGrip.exportable=!1,t.endGrip.exportable=!1,t.toBack(),t.orientation="horizontal",t.events.on("rangechanged",this.handleXScrollbarChange,this,!1),this.events.on("datavalidated",(function(){return t.updateThumb(!1)}),this,!1),t.adapter.add("positionValue",(function(t){var i=e.xAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(i.renderer.inversed?1-t.position:t.position)),t})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(t){var e=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=t,t&&(this._disposers.push(t),t.parent=this.rightAxesContainer,t.startGrip.exportable=!1,t.shouldClone=!1,t.endGrip.exportable=!1,t.toFront(),t.orientation="vertical",t.events.on("rangechanged",this.handleYScrollbarChange,this,!1),this.events.on("datavalidated",(function(){return t.updateThumb(!1)}),this,!1),t.adapter.add("positionValue",(function(t){var i=e.yAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(t.position)),t})))},enumerable:!0,configurable:!0}),e.prototype.handleXScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;0==i.start&&(i.priority="start"),1==i.end&&(i.priority="end"),i=this.zoomAxes(this.xAxes,i),e.fixRange(i)}},e.prototype.handleYScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;1==i.end&&(i.priority="end"),0==i.start&&(i.priority="start"),i=this.zoomAxes(this.yAxes,i),e.fixRange(i)}},e.prototype.zoomAxes=function(t,e,i,n,r,s){var a={start:0,end:1};this.showSeriesTooltip();var o=e;return this.dataInvalid||cm(t.iterator(),(function(t){var u=t.maxZoomFactor;if(Gd(t.minZoomCount)&&(u/=t.minZoomCount),s&&1/(e.end-e.start)>=u);else if(t.zoomable){if(e=t.renderer.inversed?af(o):o,t.hideTooltip(0),n)if(t instanceof KA){var l=t.getCellEndPosition(0)-t.getCellStartPosition(0);e.start=t.roundPosition(e.start+l/2-t.startLocation*l,t.startLocation),e.end=t.roundPosition(e.end-l/2+(1-t.endLocation)*l,t.endLocation)}else{var h=1e-4;e.start=t.roundPosition(e.start+h,0,t.startLocation),e.end=t.roundPosition(e.end+h,0,t.endLocation)}var c=t.zoom(e,i,i,r);t.renderer.inversed&&(c=af(c)),a=c}})),a},Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)&&this.bulletsContainer&&(this.bulletsContainer.mask=t?this._bulletMask:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(t){this.setPropertyValue("arrangeTooltips",t,!0)},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=this.plotContainer,i=kv(Fv(t.point,this.htmlContainer,this.svgContainer.cssScale),e),n=t.shift.y;this.handleWheelReal(n,this.mouseWheelBehavior,i)},e.prototype.handleHorizontalWheel=function(t){var e=this.plotContainer,i=kv(Fv(t.point,this.htmlContainer,this.svgContainer.cssScale),e);this.handleWheelReal(t.shift.x,this.horizontalMouseWheelBehavior,i)},e.prototype.handleWheelReal=function(t,e,i){if(0!=t){var n=this.plotContainer,r=this.getCommonAxisRange(this.xAxes),s=this.getCommonAxisRange(this.yAxes),a=.1;if("panX"==e||"panXY"==e){var o=this.xAxes.getIndex(0),u=!1,l=a;o instanceof KA&&(l=.5/((r.end-r.start)*o.dataItems.length),u=!0),a=Math.max(.2,l);var h=r.end-r.start,c=Math.max(-0,r.start+a*t/100*(r.end-r.start)),d=Math.min(r.end+a*t/100*(r.end-r.start),1);c<=0&&(d=c+h),d>=1&&(c=d-h),this.zoomAxes(this.xAxes,{start:c,end:d},void 0,u)}if("panY"==e||"panXY"==e){var f=this.yAxes.getIndex(0);l=a,u=!1;f instanceof KA&&(l=.5/((r.end-r.start)*f.dataItems.length),u=!0),a=Math.max(.2,l),t*=-1;var m=s.end-s.start,v=Math.max(-0,s.start+a*t/100*(s.end-s.start)),p=Math.min(s.end+a*t/100*(s.end-s.start),1);v<=0&&(p=v+m),p>=1&&(v=p-m),this.zoomAxes(this.yAxes,{start:v,end:p},void 0,u)}if("zoomX"==e||"zoomXY"==e){var b=i.x/n.maxWidth,g=this.xAxes.getIndex(0).toAxisPosition(b);c=Math.max(-0,r.start-a*(r.end-r.start)*t/100*b);c=Math.min(c,g);d=Math.min(r.end+a*(r.end-r.start)*t/100*(1-b),1);d=Math.max(d,g),this.zoomAxes(this.xAxes,{start:c,end:d},void 0)}if("zoomY"==e||"zoomXY"==e){var y=i.y/n.maxHeight,w=this.yAxes.getIndex(0).toAxisPosition(y);v=Math.max(-0,s.start-a*(s.end-s.start)*t/100*(1-y));v=Math.min(v,w);p=Math.min(s.end+a*t/100*y*(s.end-s.start),1);p=Math.max(p,w),this.zoomAxes(this.yAxes,{start:v,end:p},void 0)}}},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(t){this.setPropertyValue("horizontalMouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),e.prototype.dataSourceDateFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),cm(this.series.iterator(),(function(t){e=i.populateDataSourceFields(e,t.dataFields,["dateX","dateY","openDateX","openDateY"])})),e},e.prototype.dataSourceNumberFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),cm(this.series.iterator(),(function(t){e=i.populateDataSourceFields(e,t.dataFields,["valueX","valueY","openValueX","openValueY"])})),e},e.prototype.processConfig=function(e){if(e){var i=[],n=[];if(Rd(e.xAxes)&&Wd(e.xAxes))for(var r=0,s=e.xAxes.length;r<s;r++){if(!e.xAxes[r].type)throw Error("[XYChart error] No type set for xAxes["+r+"].");if(Rd(e.xAxes[r].axisRanges)){for(var a=0,o=e.xAxes[r].axisRanges.length;a<o;a++){Rd((l=e.xAxes[r].axisRanges[a]).date)&&Vd(l.date)&&(l.date=this.dateFormatter.parse(l.date)),Rd(l.endDate)&&Vd(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}i.push({axisRanges:e.xAxes[r].axisRanges,index:r}),delete e.xAxes[r].axisRanges}}if(Rd(e.yAxes)&&Wd(e.yAxes))for(r=0,s=e.yAxes.length;r<s;r++){if(!e.yAxes[r].type)throw Error("[XYChart error] No type set for yAxes["+r+"].");if(Rd(e.yAxes[r].axisRanges)){a=0;for(var u=e.yAxes[r].axisRanges.length;a<u;a++){var l;Rd((l=e.yAxes[r].axisRanges[a]).date)&&Vd(l.date)&&(l.date=this.dateFormatter.parse(l.date)),Rd(l.endDate)&&Vd(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}n.push({axisRanges:e.yAxes[r].axisRanges,index:r}),delete e.yAxes[r].axisRanges}}if(Rd(e.series)&&Wd(e.series))for(r=0,s=e.series.length;r<s;r++)e.series[r].type=e.series[r].type||"LineSeries";if(Rd(e.cursor)&&!Rd(e.cursor.type)&&(e.cursor.type="XYCursor"),Rd(e.scrollbarX)&&!Rd(e.scrollbarX.type)&&(e.scrollbarX.type="Scrollbar"),Rd(e.scrollbarY)&&!Rd(e.scrollbarY.type)&&(e.scrollbarY.type="Scrollbar"),t.prototype.processConfig.call(this,e),n.length)for(r=0,s=n.length;r<s;r++)this.yAxes.getIndex(n[r].index).config={axisRanges:n[r].axisRanges};if(i.length)for(r=0,s=i.length;r<s;r++)this.xAxes.getIndex(i[r].index).config={axisRanges:i[r].axisRanges}}},e.prototype.configOrder=function(e,i){return e==i?0:"scrollbarX"==e?1:"scrollbarX"==i?-1:"scrollbarY"==e?1:"scrollbarY"==i?-1:"cursor"==e?1:"cursor"==i?-1:"series"==e?1:"series"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.createSeries=function(){return new YA},Object.defineProperty(e.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(t){var e=this;this._zoomOutButton=t,t&&t.events.on("hit",(function(){e.zoomAxes(e.xAxes,{start:0,end:1}),e.zoomAxes(e.yAxes,{start:0,end:1})}),void 0,!1)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;e.xAxes.each((function(t){var e=i.xAxes.push(t.clone());e.chart=i,e.renderer.chart=i})),e.yAxes.each((function(t){var e=i.yAxes.push(t.clone());e.renderer.chart=i,e.chart=i})),t.prototype.copyFrom.call(this,e),e.cursor&&(this.cursor=e.cursor.clone()),e.scrollbarX&&(this.scrollbarX=e.scrollbarX.clone()),e.scrollbarY&&(this.scrollbarY=e.scrollbarY.clone())},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.scrollbarX;e&&e instanceof ZA&&e.scrollbarChart.disposeData();var i=this.scrollbarY;i&&i instanceof ZA&&i.scrollbarChart.disposeData(),this.xAxes.each((function(t){t instanceof KA&&t.disposeData()})),this.yAxes.each((function(t){t instanceof KA&&t.disposeData()}))},e.prototype.addData=function(e,i){this.scrollbarX instanceof ZA&&this.addScrollbarData(this.scrollbarX,i),this.scrollbarY instanceof ZA&&this.addScrollbarData(this.scrollbarY,i),t.prototype.addData.call(this,e,i)},e.prototype.addScrollbarData=function(t,e){var i=t.scrollbarChart;i._parseDataFrom=i.data.length,i.invalidateData()},e.prototype.removeScrollbarData=function(t,e){var i=t.scrollbarChart;if(Gd(e)){for(;e>0;){var n=this.dataItems.getIndex(0);n&&i.dataItems.remove(n),i.dataUsers.each((function(t){var e=t.dataItems.getIndex(0);e&&t.dataItems.remove(e)})),i._parseDataFrom--,e--}i.invalidateData()}},e.prototype.removeData=function(e){this.scrollbarX instanceof ZA&&this.removeScrollbarData(this.scrollbarX,e),this.scrollbarY instanceof ZA&&this.removeScrollbarData(this.scrollbarY,e),t.prototype.removeData.call(this,e)},e.prototype.setTapToActivate=function(e){t.prototype.setTapToActivate.call(this,e),this.cursor&&(this.cursor.interactions.isTouchProtected=e,this.plotContainer.interactions.isTouchProtected=e)},e.prototype.handleTapToActivate=function(){t.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},e.prototype.handleTapToActivateDeactivation=function(){t.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},e}(MA);Om.registeredClasses.XYChart=QA,Hb.push({relevant:Ub.maybeXS,state:function(t,e){if(t instanceof QA&&t.scrollbarX){var i=t.states.create(e);return t.scrollbarX.states.create(e).properties.disabled=!0,i}return null}}),Hb.push({relevant:Ub.maybeXS,state:function(t,e){if(t instanceof QA&&t.scrollbarY){var i=t.states.create(e);return t.scrollbarY.states.create(e).properties.disabled=!0,i}return null}});var tj=function(t){function e(){var e=t.call(this)||this;e.className="LineSeriesSegment",e.isMeasured=!1,e.interactionsEnabled=!1,e.layout="none";var i=e.createChild(Pb);e.fillSprite=i,i.shouldClone=!1,i.setElement(e.paper.add("path")),i.isMeasured=!1,e._disposers.push(i);var n=e.createChild(Pb);return e.strokeSprite=n,n.shouldClone=!1,n.fill=Ym(),n.setElement(e.paper.add("path")),n.isMeasured=!1,e._disposers.push(n),e}return Sd(e,t),e.prototype.drawSegment=function(t,e,i,n){if(!this.disabled)if(t.length>0&&e.length>0&&Gd(t[0].x)&&Gd(t[0].y)){var r=sg({x:t[0].x-.2,y:t[0].y-.2})+sg(t[0]),s=this.series;"bezier"==s.smoothing?r+=new Dg(i,n).smooth(t):"monotoneX"==s.smoothing?r+=new Bg({closed:!1}).smooth(t):"monotoneY"==s.smoothing&&(r+=new _g({closed:!1}).smooth(t)),0==this.strokeOpacity||0==this.strokeSprite.strokeOpacity||(this.strokeSprite.path=r),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&Gd(e[0].x)&&Gd(e[0].y)&&(r+=ag(e[0]),"bezier"==s.smoothing?r+=new Dg(i,n).smooth(e):"monotoneX"==s.smoothing?r+=new Bg({closed:!1}).smooth(e):"monotoneY"==s.smoothing&&(r+=new _g({closed:!1}).smooth(e)),r+=ag(t[0]),r+=" Z",this.fillSprite.path=r)}else this.fillSprite.path="",this.strokeSprite.path=""},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e);var i=this.strokeSprite;am(e,i.properties,Db),i.events.copyFrom(e.strokeSprite.events),i.fillOpacity=0;var n=this.fillSprite;am(e,n.properties,Db),n.events.copyFrom(e.fillSprite.events),n.strokeOpacity=0},e}(Eb);Om.registeredClasses.LineSeriesSegment=tj;var ej=function(t){function e(){var e=t.call(this)||this;return e.className="DurationAxisDataItem",e.applyTheme(),e}return Sd(e,t),e}(zA),ij=function(t){function e(){var e=t.call(this)||this;return e._baseUnit="second",e.className="DurationAxis",e.setPropertyValue("maxZoomFactor",1e6),e.applyTheme(),e}return Sd(e,t),e.prototype.formatLabel=function(t,e){return this.durationFormatter.format(t,e||this.axisDurationFormat)},e.prototype.adjustMinMax=function(e,i,n,r,s){var a,o,u,l,h=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),"millisecond"==h||"second"==h||"minute"==h||"hour"==h){r<=1&&(r=1),r=Math.round(r);var c=e,d=i;0===n&&(n=Math.abs(i));var f,m=[60,30,20,15,10,2,1],v=1;"hour"==h&&(m=[24,12,6,4,2,1]);try{for(var p=Md(m),b=p.next();!b.done;b=p.next()){var g=b.value;if(n/g>r){v=g;break}}}catch(t){a={error:t}}finally{try{b&&!b.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}var y=Math.ceil((i-e)/v/r),w=Math.log(Math.abs(y))*Math.LOG10E,S=Math.pow(10,Math.floor(w))/10;f=v*(y=(l=y/S,m.reduce((function(t,e){return Math.abs(e-l)<Math.abs(t-l)?e:t})))*S),this.durationFormatter.getValueUnit(f,this.baseUnit),e=Math.floor(e/f)*f,i=Math.ceil(i/f)*f,s&&((e-=f)<0&&c>=0&&(e=0),(i+=f)>0&&d<=0&&(i=0)),u={min:e,max:i,step:f}}else u=t.prototype.adjustMinMax.call(this,e,i,n,r,s);return this.axisDurationFormat=this.durationFormatter.getFormat(u.step,u.max,this.baseUnit),u},Object.defineProperty(e.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(t){this._tooltipDurationFormat=t},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e=Yd(this.positionToValue(t),this._stepDecimalPlaces),i=this.formatLabel(e,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit!=t&&(this._baseUnit=t,this.durationFormatter.baseUnit=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.baseUnit=e.baseUnit},e}(VA);Om.registeredClasses.DurationAxis=ij,Om.registeredClasses.DurationAxisDataItem=ej;var nj=function(t){function e(){var e=t.call(this)||this;return e.className="LineSeriesDataItem",e}return Sd(e,t),e}(JA),rj=function(t){function e(){var e=t.call(this)||this;return e.minDistance=.5,e.segments=new jm(e.createSegment()),e.segments.template.applyOnClones=!0,e._disposers.push(new km(e.segments)),e._disposers.push(e.segments.template),e._segmentsIterator=new pm(e.segments,(function(){return e.segments.create()})),e._segmentsIterator.createNewItems=!0,e.className="LineSeries",e.strokeOpacity=1,e.fillOpacity=0,e.connect=!0,e.tensionX=1,e.tensionY=1,e.autoGapCount=1.1,e.smoothing="bezier",e.segmentsContainer=e.mainContainer.createChild(Eb),e.segmentsContainer.isMeasured=!1,e.bulletsContainer.toFront(),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},e.prototype.createSegment=function(){return new tj},e.prototype.createDataItem=function(){return new nj},e.prototype.setInitialWorkingValues=function(t){var e=this._yAxis.get(),i=this._xAxis.get();if(this.appeared&&this.visible){var n=this.dataItems.getIndex(t.index-1);if(t.component=this,this.baseAxis==i&&e instanceof VA){var r=e.minZoomed;if(n&&(r=n.values.valueY.workingValue),t.setWorkingValue("valueY",r,0),t.setWorkingValue("valueY",t.values.valueY.value),i instanceof WA)t.setWorkingLocation("dateX",t.locations.dateX-1,0),t.setWorkingLocation("dateX",t.locations.dateX);else if(i instanceof ij&&n){var s=t.valueX;t.setWorkingValue("valueX",n.valueX,0),t.setWorkingValue("valueX",s)}}if(this.baseAxis==e&&i instanceof VA){var a=i.minZoomed;if(n&&(a=n.values.valueX.workingValue),t.setWorkingValue("valueX",a,0),t.setWorkingValue("valueX",t.values.valueX.value),e instanceof WA)t.setWorkingLocation("dateY",t.locations.dateX-1,0),t.setWorkingLocation("dateY",t.locations.dateY);else if(e instanceof ij&&n){s=t.valueY;t.setWorkingValue("valueY",n.valueY,0),t.setWorkingValue("valueY",s)}}}else this.baseAxis==i&&e instanceof VA&&(i instanceof WA&&t.setWorkingLocation("dateX",t.locations.dateX),i instanceof KA&&t.setWorkingLocation("categoryX",t.locations.categoryX)),this.baseAxis==e&&i instanceof VA&&(e instanceof WA&&t.setWorkingLocation("dateY",t.locations.dateY),e instanceof KA&&t.setWorkingLocation("categoryY",t.locations.categoryY))},e.prototype.updateLegendValue=function(e,i){t.prototype.updateLegendValue.call(this,e,i),e&&e.segment&&(this.tooltipColorSource=e.segment)},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),cm(this.axisRanges.iterator(),(function(t){e.openSegmentWrapper(e._adjustedStartIndex,t)})),cm(this._segmentsIterator.iterator(),(function(t){t.__disabled=!0})))},e.prototype.sliceData=function(){for(var t=this.startIndex,e=this.endIndex,i=this.startIndex-1;i>=0;i--){if((r=this.dataItems.getIndex(i))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){t=i;break}}this._adjustedStartIndex=this.findAdjustedIndex(t,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);i=this.endIndex;for(var n=this.dataItems.length;i<n;i++){var r;if((r=this.dataItems.getIndex(i))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){e=i+1;break}}this._workingStartIndex=t,this._workingEndIndex=e},e.prototype.findAdjustedIndex=function(t,e){var i=this,n=this.propertyFields,r=t;return kf(e,(function(e){if(Rd(n[e]))for(var s=r;s>=0;s--){var a=i.dataItems.getIndex(s);if(a&&Rd(a.properties[e])){t>s&&(t=s);break}}})),t},e.prototype.openSegmentWrapper=function(t,e){var i={index:t,axisRange:e};do{i=this.openSegment(i.index,i.axisRange)}while(i)},e.prototype.getSegment=function(){var t=this._segmentsIterator.getFirst();return t.series=this,t.isDisposed()?(this.segments.removeValue(t),this.getSegment()):t},e.prototype.openSegment=function(t,e){var i=!1,n=[];t=Math.min(t,this.dataItems.length);var r,s=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var a=!1,o=this.getSegment();o.strokeDasharray=void 0,o.__disabled=!1,e?(o.parent=e.contents,am(e.contents,o,Db)):(am(this,o,Db),o.filters.clear(),o.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var u=this.connect,l=!1,h=t;h<s;h++){var c=this.dataItems.getIndex(h);if(c.segment=o,c.hasProperties&&(h==t?this.updateSegmentProperties(c.properties,o):a=this.updateSegmentProperties(c.properties,o,!0)),c.hasValue(this._xValueFields)&&c.hasValue(this._yValueFields))this.addPoints(n,c,this.xField,this.yField),l=!0;else{if(h==t)continue;if(!u&&l){r=h;break}}if(r=h,this.baseAxis instanceof WA){var d=this.dataItems.getIndex(h+1);if(d&&this.baseAxis.makeGap(d,c)){i=!0;break}}if(a)break}return this.closeSegment(o,n,t,r,e,i)},e.prototype.addPoints=function(t,e,i,n,r){var s=this.getPoint(e,i,n,e.workingLocations[i],e.workingLocations[n]);r||(e.point=s),t.push(s)},e.prototype.closeSegment=function(t,e,i,n,r,s){var a=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var o=n;o>=i;o--){var u=this.dataItems.getIndex(o);u.hasValue(this._xValueFields)&&u.hasValue(this._yValueFields)&&this.addPoints(a,u,this.xOpenField,this.yOpenField,!0)}else{var l=this.baseAxis,h=e.length,c=this.xAxis,d=this.yAxis;h>0&&(l==c?(a.push({x:e[h-1].x,y:d.basePoint.y}),a.push({x:e[0].x,y:d.basePoint.y})):(a.push({x:c.basePoint.x,y:e[h-1].y}),a.push({x:c.basePoint.x,y:e[0].y})))}return this.drawSegment(t,e,a),s&&n++,n<this._workingEndIndex-1?{index:n,axisRange:r}:null},e.prototype.drawSegment=function(t,e,i){t.drawSegment(e,i,this.tensionX,this.tensionY)},e.prototype.updateSegmentProperties=function(t,e,i){var n=!1;return nm(t,(function(t,r){if(Rd(r)){var s=e[t],a=void 0;s&&(a=s.toString?s.toString():s);var o=void 0;r&&(o=r.toString?r.toString():r),s==r||null!=a&&null!=o&&a==o||(i||(e[t]=r),n=!0)}})),n},Object.defineProperty(e.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(t){this.setPropertyValue("connect",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=this,i=t.pixelWidth,n=t.pixelHeight;t.disposeChildren();var r=t.createChild(ig);if(r.shouldClone=!1,am(this,r,Db),r.x2=i,r.y=n/2,r.y2=1e-5,r.visible=!0,this.fillOpacity>0){var s=t.createChild(Lb);am(this,s,Db),s.width=i,s.height=n,s.y=0,s.strokeOpacity=0,s.visible=!0,r.y=0}var a=t.dataItem;a.color=this.stroke,a.colorOrig=this.fill,hm(this.bullets.iterator(),(function(r){if(r instanceof gA&&!r.copyToLegendMarker)return!1;var s=!1;if(r instanceof Eb&&cm(r.children.iterator(),(function(t){if(t instanceof Yb)return s=!0,!0})),!s){var a=r.clone();return a.parent=t,a.isMeasured=!0,a.tooltipText=void 0,a.x=i/2,e.fillOpacity>0?a.y=0:a.y=n/2,a.visible=!0,Rd(a.fill)||(a.fill=e.fill),Rd(a.stroke)||(a.stroke=e.stroke),!1}}))},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(e.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(t){this.setPropertyValue("autoGapCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(t){this.setPropertyValue("smoothing",t,!0)},enumerable:!0,configurable:!0}),e}(YA);Om.registeredClasses.LineSeries=rj,Om.registeredClasses.LineSeriesDataItem=nj;var sj=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeriesDataItem",e.setLocation("dateX",0,0),e.setLocation("dateY",0,0),e.setLocation("categoryX",0,0),e.setLocation("categoryY",0,0),e.applyTheme(),e}return Sd(e,t),e}(nj),aj=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeries",e.connectEnds=!0,e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.createDataItem=function(){return new sj},e.prototype.getPoint=function(t,e,i,n,r,s,a){s||(s="valueX"),a||(a="valueY");var o=of({x:this.yAxis.getX(t,i,r,a),y:this.yAxis.getY(t,i,r,a)});0==o&&(o=1e-5);var u=this.xAxis.getAngle(t,e,n,s),l=this.chart.startAngle,h=this.chart.endAngle;return u<l||u>h?void 0:{x:o*ef(u),y:o*Qd(u)}},e.prototype.addPoints=function(t,e,i,n,r){var s=this.getPoint(e,i,n,e.locations[i],e.locations[n]);s&&t.push(s)},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return hg(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.drawSegment=function(e,i,n){var r=this.yAxis.renderer;this.connectEnds&&360==Math.abs(r.endAngle-r.startAngle)&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(i.push(i[0]),n.length>0&&n.unshift(n[n.length-1])),t.prototype.drawSegment.call(this,e,i,n)},Object.defineProperty(e.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(t){this.setPropertyValue("connectEnds",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBulletReal=function(t,e,i){var n=this.xAxis,r=this.yAxis;(e<n.start||e>n.end||i<r.start||i>r.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e},e}(rj);Om.registeredClasses.RadarSeries=aj,Om.registeredClasses.RadarSeriesDataItem=sj;var oj=function(t){function e(e){var i=t.call(this,e)||this;return i.className="AxisFillCircular",i.element=i.paper.add("path"),i.radius=Ad(100),i.applyTheme(),i}return Sd(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),!this.__disabled&&!this.disabled&&this.axis){var e=this.axis.renderer;this.fillPath=e.getPositionRangePath(this.startPosition,this.endPosition,this.radius,Rd(this.innerRadius)?this.innerRadius:e.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(FA);Om.registeredClasses.AxisFillCircular=oj;var uj=function(t){function e(){var e=t.call(this)||this;return e.className="GridCircular",e.pixelPerfect=!1,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e}(DA);Om.registeredClasses.GridCircular=uj;var lj=function(t){function e(){var e=t.call(this)||this;return e.fdx=0,e.fdy=0,e.className="AxisLabelCircular",e.padding(0,0,0,0),e.location=.5,e.locationOnPath=.5,e.radius=0,e.isMeasured=!1,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(t){if(this.setPropertyValue("relativeRotation",t,!0),!Rd(t)){this.rotation=void 0;var e=this.dataItem;e&&e.component&&e.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(t){this.setPropertyValue("bent",t,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),t?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),e.prototype.pixelRadius=function(t){var e=1;return this.inside&&(e=-1),rv(this.radius,t)*e},e.prototype.pixelRadiusY=function(t,e){var i=1;this.inside&&(i=-1);var n=this.radius;return Gd(n)?rv(n*=e/t,t)*i:rv(n,e)*i},e.prototype.fixPosition=function(t,e,i,n,r){Gd(i)||(i=e),Gd(n)||(n=0),Gd(r)||(r=0);var s={x:e*ef(t),y:i*Qd(t)};this.invalid&&this.validate();var a=!1,o=this.radius;(o instanceof Id&&o.value<0||o<0)&&(a=!0);var u=this.relativeRotation,l=this.pixelRadius(e);if(this.bent){var h={x:(e+l)*ef(t+180),y:(i+l*i/e)*Qd(t+180)};return this.path=sg(h)+lg(t+180,360,e+l,i+l*i/e),void(this.textPathElement&&this.textPathElement.attr({startOffset:100*this.locationOnPath+"%"}))}if(Gd(u)){this.horizontalCenter="none",this.verticalCenter="none",t=wf(t,-180,180);var c=this.bbox.width,d=this.bbox.height,f=this.pixelPaddingBottom,m=this.pixelPaddingTop,v=this.pixelPaddingLeft,p=this.pixelPaddingRight;t>90||t<-90?-90==u&&(u=90,c=0):(-90==u&&(d=-d),90==u&&(u=-90,c=-v-p,d=-d-m-f)),this.rotation=u+t+90;var b=Qd(u)/2,g=ef(u)/2,y=this.rotation;this.dx=d*b*Qd(y)-c*g*ef(y),this.dy=-d*b*ef(y)-c*g*Qd(y),this.inside?t>90||t<-90?l-=(f+m)*ef(u)+(v+p)*Qd(u):l+=(f+this.bbox.height+m)*ef(u)+(v+p+this.bbox.width)*Qd(u):l+=(d+f+m)*ef(u)+(c+v+p)*Qd(u),s.x+=ef(t)*l,s.y+=Qd(t)*l*i/e}else this.horizontalCenter="middle",this.verticalCenter="middle",a?(this.dx=0,this.dy=0,s.x=(e+l)*ef(t),s.y=(i+l*i/e)*Qd(t)):(this.dy=this._measuredHeight/2*Qd(t),this.dx=this._measuredWidth/2*ef(t),s.x+=ef(t)*l,s.y+=Qd(t)*l*i/e);s.x+=n,s.y+=r,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(s)},e}(PA);Om.registeredClasses.AxisLabelCircular=lj;var hj=function(t){function e(){var e=t.call(this)||this;return e.pixelRadiusReal=0,e.layout="none",e.className="AxisRendererCircular",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.useChartAngles=!0,e.radius=Ad(100),e.isMeasured=!1,e.grid.template.location=0,e.labels.template.location=0,e.labels.template.radius=15,e.ticks.template.location=0,e.ticks.template.pixelPerfect=!1,e.tooltipLocation=0,e.line.strokeOpacity=0,e.applyTheme(),e}return Sd(e,t),e.prototype.setAxis=function(e){var i=this;t.prototype.setAxis.call(this,e),e.isMeasured=!1;var n=e.tooltip;n.adapter.add("dx",(function(t,e){var n=kv({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.cos(Math.atan2(n.y,n.x))-n.x})),n.adapter.add("dy",(function(t,e){var n=kv({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.sin(Math.atan2(n.y,n.x))-n.y}))},e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return sv(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t){if(Rd(e)){if(e instanceof Id&&t){var i=t.mr,n=e.value;e=Ad(100*(n=Math.max(i*n,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i))}}else(e=t.innerRadius)instanceof Id&&t&&(e=Ad(e.value*t.innerRadiusModifyer*100));return e}},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(t){this.setPropertyValue("useChartAngles",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return sv(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){Gd(e)||(e=1);var i=this.positionToCoordinate(t),n=this.startAngle+(this.endAngle-this.startAngle)*i/this.axisLength,r=this.pixelRadius,s=this.pixelInnerRadius;if(this.axisRendererY){var a=Xd(this.axisRendererY.positionToCoordinate(e),0,1/0);return 0==a&&(a=1e-6),{x:a*ef(n),y:a*Qd(n)}}return{x:ef(n)*s+(r-s)*ef(n)*e,y:Qd(n)*s+(r-s)*Qd(n)*e}},e.prototype.positionToAngle=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start);return Yd(e.renderer.inversed?this.startAngle+(e.end-t)*i:this.startAngle+(t-e.start)*i,3)},e.prototype.angleToPosition=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start);return Yd(e.renderer.inversed?e.end-(t-this.startAngle)/i:(t-this.startAngle)/i+e.start,5)},e.prototype.updateAxisLine=function(){var t=this.pixelRadius,e=this.startAngle,i=rf(360,this.endAngle-e);this.line.path=sg({x:t*ef(e),y:t*Qd(e)})+lg(e,i,t,t)},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);if(Gd(n.x)&&Gd(n.y)&&t.element){var r=Kd*Math.atan2(n.y,n.x),s=sv(Rd(t.radius)?t.radius:Ad(100),this.pixelRadius),a=sv(t.innerRadius,this.pixelRadius);t.zIndex=0;var o=sv(Gd(a)?a:this.innerRadius,this.pixelRadiusReal,!0);Gd(o)||(o=0),t.path=sg({x:o*ef(r),y:o*Qd(r)})+ag({x:s*ef(r),y:s*Qd(r)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);if(t.element){var r=this.pixelRadius,s=Kd*Math.atan2(n.y,n.x),a=t.length;t.inside&&(a=-a),t.zIndex=1,t.path=sg({x:r*ef(s),y:r*Qd(s)})+ag({x:(r+a)*ef(s),y:(r+a)*Qd(s)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var n=.5;t instanceof RA&&(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e),s=this.pixelRadius,a=Kd*Math.atan2(r.y,r.x);r={x:s*ef(a),y:s*Qd(a)},this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,n){Rd(n)||(n=t.location),e+=(i-e)*n,t.fixPosition(this.positionToAngle(e),this.pixelRadius),t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e,i,n,r){var s="";if(Gd(t)&&Gd(e)){Rd(i)||(i=this.radius),t=nf(t,this.axis.start),(e=rf(e,this.axis.end))<t&&(e=t);var a=sv(i,this.pixelRadius),o=sv(n,this.pixelRadius,!0),u=this.positionToAngle(t);s=hg(u,this.positionToAngle(e)-u,a,o,a,r)}return s},e.prototype.createGrid=function(){return new uj},e.prototype.createFill=function(t){return new oj(t)},e.prototype.createLabel=function(){return new lj},e.prototype.pointToPosition=function(t){var e=wf(cf(t),this.startAngle,this.endAngle);return this.coordinateToPosition((e-this.startAngle)/360*this.axisLength)},e}(NA);Om.registeredClasses.AxisRendererCircular=hj;var cj=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vf,e.pixelRadiusReal=0,e.className="AxisRendererRadial",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.minGridDistance=30,e.gridType="circles",e.axisAngle=-90,e.isMeasured=!1,e.layout="none",e.radius=Ad(100),e.line.strokeOpacity=0,e.labels.template.horizontalCenter="middle",e._disposers.push(e._chart),e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return sv(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t)if(Rd(e)){if(e instanceof Id&&t){var i=t.mr,n=e.value;e=Ad(100*(n=Math.max(i*n,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i))}}else(e=t.innerRadius)instanceof Id&&t&&(e=Ad(e.value*t.innerRadiusModifyer*100));return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return sv(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var i=Xd(this.positionToCoordinate(t),0,1/0);return{x:i*ef(this.axisAngle),y:i*Qd(this.axisAngle)}},e.prototype.updateAxisLine=function(){this.line.path=sg({x:this.pixelInnerRadius*ef(this.axisAngle),y:this.pixelInnerRadius*Qd(this.axisAngle)})+ag({x:this.pixelRadius*ef(this.axisAngle),y:this.pixelRadius*Qd(this.axisAngle)});var t=this.axis.title;t.valign="none",t.horizontalCenter="middle",t.verticalCenter="bottom",t.y=-this.axisLength/2;var e=90;this.opposite?this.inside||(e=-90):this.inside&&(e=-90),t.rotation=e},e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n,r=of(this.positionToPoint(e)),s=this.startAngle,a=this.endAngle,o=this.chart;if(Gd(r)&&t.element&&o){var u=o.xAxes.getIndex(0),l=0,h=o.series.getIndex(0);if(h&&(l=h.dataItems.length),"polygons"==this.gridType&&l>0&&h&&u&&u instanceof KA){var c=u.renderer.grid.template.location,d=u.getAngle(h.dataItems.getIndex(0),"categoryX",c);n=sg({x:r*ef(d),y:r*Qd(d)});for(var f=1;f<l;f++)n+=ag({x:r*ef(d=u.getAngle(h.dataItems.getIndex(f),"categoryX",c)),y:r*Qd(d)});n+=ag({x:r*ef(d=u.getAngle(h.dataItems.getIndex(l-1),"categoryX",u.renderer.cellEndLocation)),y:r*Qd(d)})}else n=sg({x:r*ef(s),y:r*Qd(s)})+lg(s,a-s,r,r);t.path=n}this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,n){Rd(n)||(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e);this.positionItem(t,r),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBaseGridElement=function(){},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(t){this.setPropertyValue("axisAngle",yf(t)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridType",{get:function(){return this.chart.xAxes.getIndex(0)instanceof KA?this.getPropertyValue("gridType"):"circles"},set:function(t){this.setPropertyValue("gridType",t,!0)},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e){var i,n=this.pixelInnerRadius,r=this.axisLength+n,s=Xd(this.positionToCoordinate(t),n,r),a=Xd(this.positionToCoordinate(e),n,r),o=this.startAngle,u=this.endAngle-o,l=this.chart,h=l.xAxes.getIndex(0),c=l.series.getIndex(0),d=0;if(c&&(d=c.dataItems.length),"polygons"==this.gridType&&d>0&&c&&h&&h instanceof KA){var f=h.renderer.grid.template.location,m=h.getAngle(c.dataItems.getIndex(0),"categoryX",f);i=sg({x:a*ef(m),y:a*Qd(m)});for(var v=1;v<d;v++)i+=ag({x:a*ef(m=h.getAngle(c.dataItems.getIndex(v),"categoryX",f)),y:a*Qd(m)});i+=ag({x:a*ef(m=h.getAngle(c.dataItems.getIndex(d-1),"categoryX",h.renderer.cellEndLocation)),y:a*Qd(m)}),i+=sg({x:s*ef(m),y:s*Qd(m)});for(v=d-1;v>=0;v--)i+=ag({x:s*ef(m=h.getAngle(c.dataItems.getIndex(v),"categoryX",f)),y:s*Qd(m)})}else i=hg(o,u,a,s);return i},e.prototype.updateBreakElement=function(t){var e=t.startLine,i=t.endLine,n=t.fillShape,r=t.startPoint,s=t.endPoint;e.radius=Math.abs(r.y),i.radius=Math.abs(s.y),n.radius=Math.abs(s.y),n.innerRadius=Math.abs(r.y)},e.prototype.createBreakSprites=function(t){t.startLine=new zg,t.endLine=new zg,t.fillShape=new zg},e.prototype.updateTooltip=function(){if(this.axis){var t=this.axisAngle;t<0&&(t+=360);var e="vertical";(t>45&&t<135||t>225&&t<315)&&(e="horizontal"),this.axis.updateTooltip(e,{x:-4e3,y:-4e3,width:8e3,height:8e3})}},e.prototype.updateTickElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);if(t.element){var r=yf(this.axisAngle+90);r/90!=Math.round(r/90)?t.pixelPerfect=!1:t.pixelPerfect=!0;var s=-t.length;t.inside&&(s*=-1),t.path=sg({x:0,y:0})+ag({x:s*ef(r),y:s*Qd(r)})}this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var n=.5;t instanceof RA&&(n=t.location),e+=(i-e)*n;var r=this.positionToPoint(e);this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength,n=this.pixelInnerRadius;return Yd(e.renderer.inversed?(e.end-t)*i+n:(t-e.start)*i+n,1)},e.prototype.pointToPosition=function(t){var e=of(t)-this.pixelInnerRadius;return this.coordinateToPosition(e)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e}(BA);Om.registeredClasses.AxisRendererRadial=cj;var dj=function(t){function e(){var e=t.call(this)||this;return e.className="RadarChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(XA),fj=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=hj,e._axisRendererY=cj,e.innerRadiusModifyer=1,e.mr=1,e.className="RadarChart",e.startAngle=-90,e.endAngle=270,e.radius=Ad(80),e.innerRadius=0;var i=e.plotContainer.createChild(Eb);return i.shouldClone=!1,i.layout="absolute",i.align="center",i.valign="middle",e.seriesContainer.parent=i,e.radarContainer=i,e.bulletsContainer.parent=i,e.axisBulletsContainer=i,e._cursorContainer=i,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e._bulletMask=i.createChild(Qb),e._bulletMask.shouldClone=!1,e._bulletMask.element=e.paper.add("path"),e._bulletMask.opacity=0,e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},e.prototype.processAxis=function(e){t.prototype.processAxis.call(this,e);var i=e.renderer;i.gridContainer.parent=i,i.breakContainer.parent=i,e.parent=this.radarContainer,i.toBack()},e.prototype.handleXAxisRangeChange=function(){t.prototype.handleXAxisRangeChange.call(this),cm(this.yAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.handleYAxisRangeChange=function(){t.prototype.handleYAxisRangeChange.call(this),cm(this.xAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.processConfig=function(e){if(e&&(Rd(e.cursor)&&!Rd(e.cursor.type)&&(e.cursor.type="RadarCursor"),Rd(e.series)&&Wd(e.series)))for(var i=0,n=e.series.length;i<n;i++)e.series[i].type=e.series[i].type||"RadarSeries";t.prototype.processConfig.call(this,e)},e.prototype.beforeDraw=function(){t.prototype.beforeDraw.call(this);var e=this.plotContainer,i=Sf(this.startAngle,this.endAngle,1),n={x:0,y:0,width:0,height:0},r=e.innerWidth/i.width,s=e.innerHeight/i.height,a=this.innerRadius;if(a instanceof Id){var o=a.value,u=Math.min(r,s);this.mr=u,o=Math.max(u*o,u-Math.min(e.innerHeight,e.innerWidth))/u,n=Sf(this.startAngle,this.endAngle,o),this.innerRadiusModifyer=o/a.value,a=Ad(100*o)}i=ff([i,n]);var l=Math.min(e.innerWidth/i.width,e.innerHeight/i.height),h=2*sv(this.radius,l)||0,c=h/2,d=this.startAngle,f=this.endAngle;this._pixelInnerRadius=sv(a,c),this._bulletMask.path=hg(d,f-d,c,this._pixelInnerRadius),cm(this.xAxes.iterator(),(function(t){t.renderer.useChartAngles&&(t.renderer.startAngle=d,t.renderer.endAngle=f),t.width=h,t.height=h,t.renderer.pixelRadiusReal=c})),cm(this.yAxes.iterator(),(function(t){t.renderer.startAngle=d,t.renderer.endAngle=f,t.width=h,t.height=h,t.renderer.pixelRadiusReal=c}));var m=this.cursor;m&&(m.width=h,m.height=h,m.startAngle=d,m.endAngle=f),this.radarContainer.definedBBox={x:c*i.x,y:c*i.y,width:c*i.width,height:c*i.height},this.radarContainer.validatePosition()},e.prototype.createSeries=function(){return new aj},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.updateXAxis=function(t){t&&t.processRenderer()},e.prototype.updateYAxis=function(t){t&&t.processRenderer()},e}(QA);Om.registeredClasses.RadarChart=fj;var mj=function(t){function e(){var e=t.call(this)||this;e._axis=new Vf,e.className="ClockHand";var i=new Dp;e.fill=i.getFor("alternativeBackground"),e.stroke=e.fill;var n=new Qb;n.radius=5,e.pin=n,e.isMeasured=!1,e.startWidth=5,e.endWidth=1,e.width=Ad(100),e.height=Ad(100),e.radius=Ad(100),e.innerRadius=Ad(0);var r=new jg;return e.hand=r,e._disposers.push(e._axis),e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.hand;e.width=this.pixelWidth;var i=Math.max(this.startWidth,this.endWidth);if(e.height=i,e.leftSide=Ad(this.startWidth/i*100),e.rightSide=Ad(this.endWidth/i*100),this.axis){var n=this.axis.renderer,r=sv(this.innerRadius,n.pixelRadius),s=sv(this.radius,n.pixelRadius);e.x=r,e.y=-i/2,e.width=s-r}},Object.defineProperty(e.prototype,"pin",{get:function(){return this._pin},set:function(t){this._pin&&this.removeDispose(this._pin),t&&(this._pin=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hand",{get:function(){return this._hand},set:function(t){this._hand&&this.removeDispose(this._hand),t&&(this._hand=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(t){this.setPropertyValue("startWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(t){this.setPropertyValue("endWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(t){this.setPropertyValue("rotationDirection",t)},enumerable:!0,configurable:!0}),e.prototype.showValue=function(t,e,i){if(this._value=t,null!=t&&(Gd(e)||(e=0),this.axis)){var n=this.axis.renderer.positionToAngle(this.axis.anyToPosition(t)),r=this.rotation;"clockWise"==this.rotationDirection&&n<r&&(this.rotation=r-360),"counterClockWise"==this.rotationDirection&&n>r&&(this.rotation=r+360),this.animate({property:"rotation",to:n},e,i)}},Object.defineProperty(e.prototype,"currentPosition",{get:function(){if(this.axis)return this.axis.renderer.angleToPosition(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.showValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this.axis!=t&&this._axis.set(t,new zf([t.events.on("datavalidated",this.updateValue,this,!1),t.events.on("datarangechanged",this.updateValue,this,!1),t.events.on("dataitemsvalidated",this.updateValue,this,!1),t.events.on("propertychanged",this.invalidate,this,!1)])),t){var e=t.chart;e&&(this.rotation=e.startAngle)}this.parent=t.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.value=this.value},e.prototype.processConfig=function(e){e&&Rd(e.axis)&&Vd(e.axis)&&this.map.hasKey(e.axis)&&(e.axis=this.map.getKey(e.axis)),t.prototype.processConfig.call(this,e)},e}(Eb);Om.registeredClasses.ClockHand=mj,function(t){function e(){var e=t.call(this)||this;return e.className="GaugeChartDataItem",e.applyTheme(),e}Sd(e,t)}(dj);var vj=function(t){function e(){var e=t.call(this)||this;return e.className="GaugeChart",e.startAngle=180,e.endAngle=360,e.hands=new jm(new mj),e.hands.events.on("inserted",e.processHand,e,!1),e._disposers.push(new km(e.hands)),e._disposers.push(e.hands.template),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},e.prototype.processHand=function(t){var e=t.newValue;e.axis||(e.axis=this.xAxes.getIndex(0))},e.prototype.configOrder=function(e,i){return e==i?0:"hands"==e?1:"hands"==i?-1:t.prototype.configOrder.call(this,e,i)},e}(fj);Om.registeredClasses.GaugeChart=vj;var pj=function(t){function e(){var e=t.call(this)||this;return e.className="PercentSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e.prototype.uidAttr=function(){return this.slice.uidAttr()},e.prototype.hide=function(e,i,n,r){return r||(r=["value"]),t.prototype.hide.call(this,e,i,0,r)},e.prototype.setVisibility=function(e,i){i||(e?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),t.prototype.setVisibility.call(this,e,i)},e.prototype.show=function(e,i,n){return n||(n=["value"]),t.prototype.show.call(this,e,i,n)},Object.defineProperty(e.prototype,"category",{get:function(){return this.properties.category},set:function(t){this.setProperty("category",t)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){this.component.createLegendMarker(t,this)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){var t=this;if(!this._tick){var e=this.component.ticks.create();this._tick=e,this.addSprite(e),this._disposers.push(e),e.parent=this.component.ticksContainer,this._disposers.push(new _f((function(){t.component&&t.component.ticks.removeValue(e)}))),e.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this.addSprite(e),this._label=e,this._disposers.push(e),e.parent=this.component.labelsContainer,this._disposers.push(new _f((function(){t.component&&t.component.labels.removeValue(e)}))),e.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){var t=this;if(!this._slice){var e=this.component,i=e.slices.create();this.addSprite(i),this._slice=i,this._disposers.push(i),i.parent=e.slicesContainer,this._disposers.push(new _f((function(){e.slices.removeValue(i)}))),i.visible=this.visible,e.itemsFocusable()?(Rd(this.component.role)||(this.component.role="menu"),Rd(i.role)||(i.role="menuitem"),i.focusable=!0):(Rd(this.component.role)||(this.component.role="list"),Rd(i.role)||(i.role="listitem"),i.focusable=!1),i.focusable&&(i.events.on("focus",(function(n){i.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),i.events.on("blur",(function(t){i.readerTitle=""}),void 0,!1)),i.hoverable&&(i.events.on("over",(function(n){i.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),i.events.on("out",(function(t){i.readerTitle=""}),void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(t){this.setProperty("hiddenInLegend",t)},enumerable:!0,configurable:!0}),e}(xA),bj=function(t){function e(){var e=t.call(this)||this;e.className="PercentSeries",e._addAllDataItems=!1,e.colors=new ay,e.colors.step=1,e.isMeasured=!0,e.calculatePercent=!0;var i=e.createChild(Eb);i.shouldClone=!1,i.isMeasured=!1,e.slicesContainer=i;var n=e.createChild(Eb);n.shouldClone=!1,n.isMeasured=!1,n.layout="none",e.ticksContainer=n;var r=e.createChild(Eb);return r.shouldClone=!1,r.isMeasured=!1,r.layout="none",e.labelsContainer=r,e.alignLabels=!1,e.bulletsContainer.toFront(),e.skipFocusThreshold=50,e.defaultState.transitionEasing=Hv,e.itemReaderText="{category}: {value.percent.formatNumber('#.#p')}",e.applyTheme(),e}return Sd(e,t),e.prototype.createSlice=function(){return new Pb},e.prototype.createTick=function(){return new LA},e.prototype.createLabel=function(){return new Yb},Object.defineProperty(e.prototype,"slices",{get:function(){if(!this._slices){var t=this.createSlice();t.applyOnClones=!0,this._disposers.push(t),this.initSlice(t),this._slices=new jm(t),this._disposers.push(new km(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,this._disposers.push(t),this.initTick(t),this._ticks=new jm(t),this._disposers.push(new km(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();t.applyOnClones=!0,this._disposers.push(t),this.initLabel(t),this._labels=new jm(t),this._disposers.push(new km(this._labels))}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createDataItem=function(){return new pj},e.prototype.initSlice=function(t){},e.prototype.initLabel=function(t){t.text="{category}: {value.percent.formatNumber('#.0p')}",t.isMeasured=!1,t.padding(5,5,5,5)},e.prototype.initTick=function(t){},e.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),t.prototype.validateDataItems.call(this)},e.prototype.validateDataElement=function(e){var i=e.slice;i&&(null==i.fill?this.patterns?(Rd(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),Rd(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof Jm&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next():this.colors.currentStep+=this.colors.step,null==i.stroke&&(i.stroke=i.fill)),t.prototype.validateDataElement.call(this,e),i&&e.bullets.each((function(t,e){null==e.fill&&(e.fill=i.fill),null==e.stroke&&(e.stroke=i.stroke)})),this.updateLegendValue(e)},e.prototype.validateData=function(){t.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},e.prototype.arrangeLabels=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e].label;if(n){n.invalid&&n.validate();var r=n.measuredHeight;n.visible||(r=0),n.pixelY-r/2<-this.maxHeight/2&&(n.y=-this.maxHeight/2+r/2);var s=this.getNextLabel(e+1,t),a=n.pixelY+r/2;if(s){s.invalid&&s.validate();var o=s.measuredHeight;s.visible||(o=0);var u=s.pixelY;null==u&&(u=0),u-o/2<a&&(s.y=a+o/2)}}}},e.prototype.arrangeLabels2=function(t){for(var e=this.maxHeight/2,i=t.length-1;i>=0;i--){var n=t[i].label;if(n){n.invalid&&n.validate();var r=n.measuredHeight;n.visible||(r=0),n.pixelY+r/2>e&&(n.y=e-r/2,e=n.y-r/2)}}},e.prototype.getNextLabel=function(t,e){if(e.length>=t){var i=e[t];if(i)return i.label&&i.visible?i.label:this.getNextLabel(t+1,e)}},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t,e){cm(t.children.iterator(),(function(i){var n=e.slice;i.defaultState.properties.fill=n.fill,i.defaultState.properties.stroke=n.stroke,i.defaultState.properties.fillOpacity=n.fillOpacity,i.defaultState.properties.strokeOpacity=n.strokeOpacity,i.fill=n.fill,i.stroke=n.stroke,i.fillOpacity=n.fillOpacity,i.strokeOpacity=n.strokeOpacity,null==i.fill&&(i.__disabled=!0);var r=t.dataItem;r.color=n.fill,r.colorOrig=n.fill,i.addDisposer(n.events.on("propertychanged",(function(t){"fill"==t.property&&(i.__disabled=!1,i.isActive||(i.fill=n.fill),i.defaultState.properties.fill=n.fill,r.color=n.fill,r.colorOrig=n.fill),"stroke"==t.property&&(i.isActive||(i.stroke=n.stroke),i.defaultState.properties.stroke=n.stroke),"strokeOpacity"==t.property&&(i.isActive||(i.strokeOpacity=n.strokeOpacity),i.defaultState.properties.strokeOpacity=n.strokeOpacity)}),void 0,!1))}))},e.prototype.handleSliceScale=function(t){var e=this,i=t.target.dataItem;i&&i.bullets&&cm(i.bullets.iterator(),(function(t){var i=t[1];e.positionBullet(i)}))},e.prototype.handleSliceMove=function(t){},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slices.template.copyFrom(e.slices.template),this.labels.template.copyFrom(e.labels.template),this.ticks.template.copyFrom(e.ticks.template),this.colors=e.colors.clone()},Object.defineProperty(e.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(t){this.setAlignLabels(t)},enumerable:!0,configurable:!0}),e.prototype.setAlignLabels=function(t){this.setPropertyValue("alignLabels",t,!0)},Object.defineProperty(e.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(t){this.setPropertyValue("ignoreZeroValues",t,!0)},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t){if(t){var e=t.legendDataItem,i=t.legendSettings;e&&i&&i&&(i.labelText&&(e.label.text=i.labelText),i.itemLabelText&&(e.label.text=i.itemLabelText),i.valueText&&(e.valueLabel.text=i.valueText),i.itemValueText&&(e.valueLabel.text=i.itemValueText))}},e}(CA);Om.registeredClasses.PercentSeries=bj,Om.registeredClasses.PercentSeriesDataItem=pj,Hb.push({relevant:Ub.maybeXS,state:function(t,e){if(t instanceof bj){var i=t.states.create(e);return t.labels.template.states.create(e).properties.disabled=!0,t.ticks.template.states.create(e).properties.disabled=!0,i}return null}});var gj=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(OA),yj=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChart",e.align="none",e.valign="none",e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.applyTheme(),e}return Sd(e,t),e.prototype.validateData=function(){t.prototype.validateData.call(this),this.feedLegend()},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];cm(this.series.iterator(),(function(t){t.hiddenInLegend||cm(t.dataItems.iterator(),(function(i){i.hiddenInLegend||(e.push(i),i.legendSettings||(i.legendSettings=t.legendSettings))}))})),t.data=e,t.dataFields.name="category"}},e.prototype.createSeries=function(){return new bj},e.prototype.setLegend=function(e){t.prototype.setLegend.call(this,e),e&&(e.labels.template.text="{category}",e.valueLabels.template.text="{value.percent.formatNumber('#.0p')}",e.itemContainers.template.events.on("over",(function(t){var e=t.target.dataItem.dataContext;if(e.visible&&!e.isHiding){var i=e.slice;i.dispatchImmediately("over"),i.isHover=!0,i.interactions.isRealHover=!0}})),e.itemContainers.template.events.on("out",(function(t){var e=t.target.dataItem.dataContext.slice;e.dispatchImmediately("out"),e.isHover=!1})))},e}(MA);Om.registeredClasses.PercentChart=yj,Om.registeredClasses.PercentChartDataItem=gj;var wj=function(t){function e(){var e=t.call(this)||this;return e._label=new Vf,e._slice=new Vf,e.className="PieTick",e.element=e.paper.add("polyline"),e._disposers.push(e._label),e._disposers.push(e._slice),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,i=this.label,n=e.dataItem.component;if(e&&e.radius>0&&i&&i.text){var r=e.dx+e.slice.dx+e.pixelX+e.ix*e.radius*e.scale,s=e.dy+e.slice.dy+e.pixelY+e.iy*e.radiusY*e.scale,a=void 0,o=void 0,u=void 0,l=void 0;if(n.alignLabels)a=i.pixelX-this.length,o=i.pixelY,u=i.pixelX,l=o,"right"==i.horizontalCenter&&(u=(a+=2*this.length)-this.length);else{var h=i.pixelRadius(e.radius);u=a=r+h*e.ix,l=o=s+h*e.iy}this.element.attr({points:[r,s,a,o,u,l]})}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new zf([t.events.on("transformed",this.invalidate,this),t.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),e}(LA);Om.registeredClasses.PieTick=wj;var Sj=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeriesDataItem",e.values.radiusValue={},e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(t){this.setValue("radiusValue",t)},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,n,r){return t.prototype.hide.call(this,e,i,0,["value","radiusValue"])},e.prototype.show=function(e,i,n){return t.prototype.show.call(this,e,i,["value","radiusValue"])},e}(pj),xj=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries",e.alignLabels=!0,e.layout="none",e.labels.template.radius=Ad(5),e.addDisposer(e.labels.template.events.on("enabled",e.invalidate,e,!1)),e.applyTheme(),e}return Sd(e,t),e.prototype.createSlice=function(){return new yg},e.prototype.createTick=function(){return new wj},e.prototype.createLabel=function(){return new lj},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},e.prototype.createDataItem=function(){return new Sj},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})",t.states.create("hover").properties.scale=1.05,t.defaultState.properties.shiftRadius=0,t.togglable=!0,t.events.on("toggled",(function(t){t.target.hideTooltip(),t.target.interactions.lastHitPointer&&t.target.interactions.lastHitPointer.touch&&!t.target.isActive&&(t.target.isHover=!1)})),t.states.create("active").properties.shiftRadius=.1},e.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=Sf(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var e=this.startIndex;e<this.endIndex;e++){var i=this.dataItems.getIndex(e).values.radiusValue.percent;i>this._maxRadiusPercent&&(this._maxRadiusPercent=i)}t.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort((function(t,e){var i=(t.slice.middleAngle+360)%360,n=(e.slice.middleAngle+360)%360;return i>270&&(i-=360),n>270&&(n-=360),i<n?-1:i>n?1:0})),this._leftItems.sort((function(t,e){var i=(t.slice.middleAngle+360)%360,n=(e.slice.middleAngle+360)%360;return i<n?1:i>n?-1:0})),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},e.prototype.validateDataElement=function(e){if(this.pixelRadius>0){!this.ignoreZeroValues||0!=e.value&&null!=e.value?e.__disabled=!1:e.__disabled=!0;var i=e.slice;if(i.radius=this.pixelRadius,Gd(e.radiusValue)&&(i.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*e.values.radiusValue.percent/this._maxRadiusPercent),i.innerRadius instanceof Id||(i.innerRadius=this.pixelInnerRadius),i.startAngle=this._currentStartAngle,i.arc=Math.abs(e.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var n=e.label,r=e.tick;r.slice=i,r.label=n;var s=(i.middleAngle+360)%360,a=void 0;if(this.alignLabels){var o=n.pixelRadius(i.radius),u=r.length+o;n.dx=0,n.dy=0,n.verticalCenter="middle";var l=this._arcRect;s>270||s<=90?(u+=(l.width+l.x)*this.pixelRadius,n.horizontalCenter="left",this._rightItems.push(e)):(u-=l.x*this.pixelRadius,n.horizontalCenter="right",this._leftItems.push(e),u*=-1);var h=i.radius+r.length+o;a={x:u,y:i.iy*h},n.moveTo(a)}else{var c=i.depth;Gd(c)||(c=0),n.fixPosition(i.middleAngle,i.radius,i.radiusY,0,-c)}}this._currentStartAngle+=i.arc,t.prototype.validateDataElement.call(this,e)}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(t){this._pixelRadius!=t&&(this._pixelRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(t){this._pixelInnerRadius!=t&&(this._pixelInnerRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){var t=this.getPropertyValue("startAngle");return Gd(t)?t:this._startAngleInternal},set:function(t){this.setPropertyValue("startAngle",yf(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){var t=this.getPropertyValue("endAngle");return Gd(t)?t:this._endAngleInternal},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem.slice,n=e.locationX;Gd(n)||(n=.5);var r=e.locationY;Gd(r)||(r=1);var s=i.startAngle+i.arc*n;e.x=r*i.radius*ef(s),e.y=r*i.radiusY*Qd(s)},e.prototype.handleSliceMove=function(t){if(!this.alignLabels){var e=t.target,i=e.dataItem;if(i){var n=i.label;n&&(n.dx=n.fdx+e.dx+e.pixelX,n.dy=n.fdy+e.dy+e.pixelY)}}},Object.defineProperty(e.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var t=this.chart;return t?Sf(t.startAngle,t.endAngle,this.pixelRadius):Sf(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),e}(bj);Om.registeredClasses.PieSeries=xj,Om.registeredClasses.PieSeriesDataItem=Sj;var Cj=function(t){function e(){var e=t.call(this)||this;return e.className="PieChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(gj),Oj=function(t){function e(){var e=t.call(this)||this;e.className="PieChart",e.innerRadius=0,e.radius=Ad(80),e.align="none",e.valign="none",e.startAngle=-90,e.endAngle=270;var i=e.seriesContainer;return i.isMeasured=!0,i.valign="middle",i.align="center",i.layout="absolute",i.width=void 0,i.height=void 0,e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.chartContainer.events.on("maxsizechanged",e.updateRadius,e,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.updateRadius()},e.prototype.handleSeriesAdded=function(e){t.prototype.handleSeriesAdded.call(this,e),this._chartPixelRadius=void 0,this.updateSeriesAngles()},e.prototype.updateSeriesAngles=function(){var t=this;this.series.each((function(e){e._startAngleInternal=t.startAngle,e._endAngleInternal=t.endAngle}))},e.prototype.updateRadius=function(){var t=this.chartContainer,e=Sf(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},n=this.innerRadius;n instanceof Id&&(i=Sf(this.startAngle,this.endAngle,n.value)),e=ff([e,i]);var r=Math.min(t.innerWidth/e.width,t.innerHeight/e.height);Gd(r)||(r=0);var s=sv(this.radius,r),a=sv(this.innerRadius,r),o=(s-a)/this.series.length;s==this._chartPixelRadius&&a==this._chartPixelInnerRadius||(this._chartPixelRadius=s,this._chartPixelInnerRadius=a,cm(mm(this.series.iterator()),(function(t){var e=t[0],i=t[1],n=a+sv(i.radius,s-a),r=a+sv(i.innerRadius,s-a);Gd(n)||(n=a+o*(e+1)),Gd(r)||(r=a+o*e),i.pixelRadius=n,i.pixelInnerRadius=r})),this.seriesContainer.definedBBox={x:s*e.x,y:s*e.y,width:s*e.width,height:s*e.height},this.seriesContainer.invalidateLayout(),this.bulletsContainer.x=this.seriesContainer.x,this.bulletsContainer.y=this.seriesContainer.y)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new xj},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),e}(yj);Om.registeredClasses.PieChart=Oj,Om.registeredClasses.PieChartDataItem=Cj;var Mj=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3DDataItem",e.values.depthValue={},e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(t){this.setValue("depthValue",t)},enumerable:!0,configurable:!0}),e}(Sj),Tj=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3D",e.applyTheme(),e}return Sd(e,t),e.prototype.createDataItem=function(){return new Mj},e.prototype.createSlice=function(){return new Zg},e.prototype.validateDataElement=function(e){var i=e.slice,n=this.depth;Gd(n)||(n=this.chart.depth);var r=e.values.depthValue.percent;Gd(r)||(r=100),i.depth=r*n/100;var s=this.angle;Gd(s)||(s=this.chart.angle),i.angle=s,t.prototype.validateDataElement.call(this,e)},e.prototype.validate=function(){t.prototype.validate.call(this);for(var e=this._workingStartIndex;e<this._workingEndIndex;e++){var i=this.dataItems.getIndex(e).slice,n=i.startAngle;n>=-90&&n<90?i.toFront():n>=90&&i.toBack()}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem.slice;e.y=e.pixelY-i.depth},e}(xj);Om.registeredClasses.PieSeries3D=Tj,Om.registeredClasses.PieSeries3DDataItem=Mj,function(t){function e(){var e=t.call(this)||this;return e.className="PieChart3DDataItem",e.applyTheme(),e}Sd(e,t)}(Cj);var kj=function(t){function e(){var e=t.call(this)||this;return e.className="PieChart3D",e.depth=20,e.angle=10,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){t=Xd(t,0,90),this.setPropertyValue("angle",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new Tj},e}(Oj);Om.registeredClasses.PieChart3D=kj;var Ij=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChartDataItem",e.applyTheme(),e}return Sd(e,t),e}(gj),Aj=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChart",e.seriesContainer.layout="horizontal",e.padding(15,15,15,15),e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},e.prototype.validate=function(){t.prototype.validate.call(this)},e}(yj);Om.registeredClasses.SlicedChart=Aj,Om.registeredClasses.SlicedChartDataItem=Ij;var jj=function(t){function e(){var e=t.call(this)||this;return e.legendSettings=new wA,e.className="FlowDiagramNode",e.isMeasured=!1,new Dp,e.draggable=!0,e.inert=!0,e.setStateOnChildren=!0,e.events.on("positionchanged",e.invalidateLinks,e,!1),e.events.on("sizechanged",e.invalidateLinks,e,!1),e}return Sd(e,t),e.prototype.handleHit=function(t){this.isHidden||this.isHiding?this.show():this.hide()},e.prototype.show=function(e){var i=t.prototype.show.call(this,e);return this.outgoingDataItems.each((function(t){(!t.toNode||t.toNode&&!t.toNode.isHidden)&&(t.setWorkingValue("value",t.getValue("value"),e),t.link.show())})),this.incomingDataItems.each((function(t){(!t.fromNode||t.fromNode&&!t.fromNode.isHidden)&&(t.setWorkingValue("value",t.getValue("value"),e),t.link.show())})),i},e.prototype.hide=function(e){var i=t.prototype.hide.call(this,e);return this.outgoingDataItems.each((function(t){t.setWorkingValue("value",0,e),t.link.hide()})),this.incomingDataItems.each((function(t){t.setWorkingValue("value",0,e),t.link.hide()})),i},e.prototype.validate=function(){this.isDisposed()||(t.prototype.validate.call(this),this.invalidateLinks())},e.prototype.invalidateLinks=function(){var t=this;this.outgoingDataItems.each((function(e){var i=e.link;if("fromNode"==i.colorMode&&(i.fill=i.dataItem.fromNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var n=i.gradient.stops.getIndex(0);n&&(n.color=t.color,i.gradient.validate())}})),this.incomingDataItems.each((function(e){var i=e.link;if("toNode"==i.colorMode&&(i.fill=i.dataItem.toNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var n=i.gradient.stops.getIndex(1);n&&(n.color=t.color,i.gradient.validate())}}))},Object.defineProperty(e.prototype,"incomingDataItems",{get:function(){var t=this;if(!this._incomingDataItems){var e=new Am;e.events.on("inserted",(function(){"name"==t.chart.sortBy?t._incomingSorted=dm(t._incomingDataItems.iterator(),(function(t,e){return bm(t.fromName,e.fromName)})):"value"==t.chart.sortBy?t._incomingSorted=dm(t._incomingDataItems.iterator(),(function(t,e){return Nm(Em(t.value,e.value))})):t._incomingSorted=t._incomingDataItems.iterator()}),void 0,!1),this._incomingDataItems=e}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingDataItems",{get:function(){var t=this;if(!this._outgoingDataItems){var e=new Am;e.events.on("inserted",(function(){"name"==t.chart.sortBy?t._outgoingSorted=dm(t._outgoingDataItems.iterator(),(function(t,e){return bm(t.fromName,e.fromName)})):"value"==t.chart.sortBy?t._outgoingSorted=dm(t._outgoingDataItems.iterator(),(function(t,e){return Nm(Em(t.value,e.value))})):t._outgoingSorted=t._outgoingDataItems.iterator()}),void 0,!1),this._outgoingDataItems=e}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(t){this.setPropertyValue("total",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(t){this.setPropertyValue("totalIncoming",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(t){this.setPropertyValue("totalOutgoing",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(t){this.setColorProperty("color",t),this._background&&(this._background.fill=t),this.fill=t},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var n=t.createChild(Zb);n.shouldClone=!1,am(this,n,Db),n.stroke=this.fill,n.copyFrom(this),n.padding(0,0,0,0),n.width=e,n.height=i;var r=t.dataItem;r.color=n.fill,r.colorOrig=n.fill},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.FlowDiagramNode=jj;var Fj=function(t){function e(){var e=t.call(this)||this;e.className="FlowDiagramLink";var i=new Dp;return e.maskBullets=!1,e.colorMode="fromNode",e.layout="none",e.isMeasured=!1,e.startAngle=0,e.endAngle=0,e.strokeOpacity=0,e.verticalCenter="none",e.horizontalCenter="none",e.tooltipText="{fromName}{toName}:{value.value}",e.tooltipLocation=.5,e.link=e.createChild(Pb),e.link.shouldClone=!1,e.link.setElement(e.paper.add("path")),e.link.isMeasured=!1,e.fillOpacity=.2,e.fill=i.getFor("alternativeBackground"),e.applyTheme(),e}return Sd(e,t),e.prototype.positionBullets=function(){var t=this;cm(this.bullets.iterator(),(function(e){e.parent=t.bulletsContainer,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,t.positionBullet(e)}))},Object.defineProperty(e.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var t=this.createChild(Eb);t.shouldClone=!1,t.layout="none",this._bulletsContainer=t}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var t=this.createChild(Pb);t.shouldClone=!1,t.setElement(this.paper.add("path")),t.isMeasured=!1,this._bulletsMask=t}return this._bulletsMask},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){var e=t.locationX;Gd(e)||(e=t.locationY),Gd(e)||(e=.5);var i=this.middleLine.positionToPoint(e);t.moveTo(i);var n,r=t.propertyFields.rotation;t.dataItem&&(n=t.dataItem.dataContext[r]);Gd(n)||(n=i.angle),t.rotation=n},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(t){if("gradient"==t){var e=this.fill;this.gradient.stops.clear(),e instanceof Jm&&(this.gradient.addColor(e),this.gradient.addColor(e)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){t.prototype.setFill.call(this,e);var i=this._gradient;i&&e instanceof Jm&&(i.stops.clear(),i.addColor(e),i.addColor(e))},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bullets",{get:function(){var t=this;return this._bullets||(this._bullets=new jm(new gA),this._disposers.push(new km(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",(function(e){e.newValue.events.on("propertychanged",(function(e){"locationX"!=e.property&&"locationY"!=e.property||t.positionBullet(e.target)}),void 0,!1)}),void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.bullets.copyFrom(e.bullets);var i=this.middleLine;i&&(i instanceof ig&&e.middleLine instanceof ig&&i.copyFrom(e.middleLine),i instanceof mg&&e.middleLine instanceof mg&&i.copyFrom(e.middleLine)),this.link.copyFrom(e.link)},e.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},e.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(e.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new hb),this._gradient},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.FlowDiagramLink=Fj;var Dj=function(t){function e(){var e=t.call(this)||this;return e.className="FlowDiagramDataItem",e.values.value={},e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(t){this.setProperty("fromName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toName",{get:function(){return this.properties.toName},set:function(t){this.setProperty("toName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",Zm(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){var t=this;if(!this._link){var e=this.component.links.create();this._link=e,this.addSprite(e),this._disposers.push(new _f((function(){t.component&&t.component.links.removeValue(e)})))}return this._link},enumerable:!0,configurable:!0}),e}(pA),Pj=function(t){function e(){var e=t.call(this)||this;e.colors=new ay,e.className="FlowDiagram",e.nodePadding=20,e.sortBy="none",e.sequencedInterpolation=!0,e.colors.step=2,e.minNodeSize=.02;var i=e.chartContainer.createChild(Eb);i.shouldClone=!1,i.layout="none",i.isMeasured=!1,e.linksContainer=i;var n=e.chartContainer.createChild(Eb);return n.shouldClone=!1,n.layout="none",n.isMeasured=!1,e.nodesContainer=n,e.dataItem=e.createDataItem(),e.dataItem.component=e,e.applyTheme(),e}return Sd(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.dataItem.dispose()},e.prototype.validateData=function(){var e=this;0==this._parseDataFrom&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),t.prototype.validateData.call(this);var i,n,r=0,s=0;cm(this.dataItems.iterator(),(function(t){var a=t.fromName;a&&((o=e.nodes.getKey(a))||((o=e.nodes.create(a)).name=a,o.chart=e,o.dataItem=t),t.fromNode=o,t.fromNode.outgoingDataItems.push(t));var o,u=t.toName;u&&((o=e.nodes.getKey(u))||((o=e.nodes.create(u)).name=u,o.chart=e,o.dataItem=t),t.toNode=o,t.toNode.incomingDataItems.push(t));if(!t.fromNode){var l=new Ug;l.opacities=[0,1],t.link.strokeModifier=l}if(!t.toNode){var h=new Ug;h.opacities=[1,0],t.link.strokeModifier=h}var c=t.value;Gd(c)&&(r+=c,s++,(i>c||!Gd(i))&&(i=c),(n<c||!Gd(n))&&(n=c))}));var a="value";this.dataItem.setCalculatedValue(a,n,"high"),this.dataItem.setCalculatedValue(a,i,"low"),this.dataItem.setCalculatedValue(a,r,"sum"),this.dataItem.setCalculatedValue(a,r/s,"average"),this.dataItem.setCalculatedValue(a,s,"count"),cm(this.nodes.iterator(),(function(t){var i=t[1];i.fill instanceof Jm&&(i.color=i.fill),null==i.color&&(i.color=e.colors.next()),null!=i.dataItem.color&&(i.color=i.dataItem.color),i.dataItem.visible||i.hide(0),e.getNodeValue(i)})),this.sortNodes(),this.feedLegend()},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.invalidate()},e.prototype.sortNodes=function(){"name"==this.sortBy?this._sorted=this.nodes.sortedIterator():"value"==this.sortBy?this._sorted=dm(this.nodes.iterator(),(function(t,e){return Nm(Em(t[1].total,e[1].total))})):this._sorted=this.nodes.iterator()},e.prototype.getNodeValue=function(t){var e=0,i=0;cm(t.incomingDataItems.iterator(),(function(t){var i=t.getWorkingValue("value");Gd(i)&&(e+=i)})),cm(t.outgoingDataItems.iterator(),(function(t){var e=t.getWorkingValue("value");Gd(e)&&(i+=e)})),t.total=e+i,t.totalIncoming=e,t.totalOutgoing=i},e.prototype.changeSorting=function(){this.sortNodes()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},e.prototype.createDataItem=function(){return new Dj},Object.defineProperty(e.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(t){this.setPropertyValue("nodePadding",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(t){this.setPropertyValue("sortBy",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(t){this.setPropertyValue("minNodeSize",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){if(!this._nodes){var t=this.createNode();t.events.on("hit",(function(t){t.target.handleHit(t)})),this._nodes=new Sm(t),this._disposers.push(new ym(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new jj;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"links",{get:function(){return this._links||(this._links=new jm(this.createLink()),this._disposers.push(new km(this._links))),this._links},enumerable:!0,configurable:!0}),e.prototype.createLink=function(){var t=new Fj;return this._disposers.push(t),t},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];this.nodes.each((function(t,i){e.push(i)})),t.data=e,t.dataFields.name="name"}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.nodes.clear()},e}(bA);Om.registeredClasses.FlowDiagram=Pj;var Lj=function(t){function e(){var e=t.call(this)||this;e.className="LabelBullet";var i=e.createChild(Yb);return i.shouldClone=!1,i.verticalCenter="middle",i.horizontalCenter="middle",i.truncate=!0,i.hideOversized=!1,i.maxWidth=500,i.maxHeight=500,i.stroke=Ym(),i.strokeOpacity=0,i.fill=(new Dp).getFor("text"),e.events.on("maxsizechanged",e.handleMaxSize,e,!1),e.label=i,e.applyTheme(),e}return Sd(e,t),e.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label)},e}(gA);Om.registeredClasses.LabelBullet=Lj;var Ej=function(t){function e(){var e=t.call(this)||this;e.nextInCoord=0,e.nextOutCoord=0,e.className="SankeyNode",e.width=10,e.height=10;var i=e.createChild(Lj);i.shouldClone=!1,i.locationX=1,i.locationY=.5,i.label.text="{name}",i.width=150,i.height=150,i.label.horizontalCenter="left",i.label.padding(0,5,0,5),e.nameLabel=i;var n=e.createChild(Lj);n.shouldClone=!1,n.label.hideOversized=!1,n.locationX=.5,n.locationY=.5,n.width=150,n.height=150,n.label.horizontalCenter="middle",e.valueLabel=n;var r=e.hiddenState;return r.properties.fill=(new Dp).getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,e.background.hiddenState.copyFrom(r),e}return Sd(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var i=this.chart;if(i){var n=i.orientation;this._incomingSorted&&cm(this._incomingSorted,(function(t){var r=t.link,s=t.getWorkingValue("value");if(Gd(s)){r.parent=e.chart.linksContainer;var a=void 0,o=void 0,u=void 0;if("horizontal"==n?(a=e.pixelX+e.dx,o=e.nextInCoord+e.pixelY+e.dy,u=0):(o=e.pixelY+e.dy,a=e.nextInCoord+e.pixelX+e.dx,u=90),r.endX=a,r.endY=o,r.startAngle=u,r.endAngle=u,r.gradient.rotation=u,r.linkWidth=s*i.valueHeight,!t.fromNode){"horizontal"==n?(r.maxWidth=200,r.startX=e.pixelX+e.dx-r.maxWidth,r.startY=r.endY):(r.maxHeight=200,r.startX=r.endX,r.startY=e.pixelY+e.dy-r.maxHeight),r.fill=t.toNode.color;var l=r.gradient.stops.getIndex(0);l&&("gradient"==r.colorMode&&(l.color=e.color),l.opacity=0,r.fill=r.gradient,r.stroke=r.gradient,r.gradient.validate())}e.nextInCoord+=r.linkWidth}})),this._outgoingSorted&&cm(this._outgoingSorted,(function(t){var i=t.link;i.parent=e.chart.linksContainer;var r=t.getWorkingValue("value");if(Gd(r)){var s=void 0,a=void 0,o=void 0;if("horizontal"==n?(o=0,s=e.pixelX+e.pixelWidth+e.dx-1,a=e.nextOutCoord+e.pixelY+e.dy):(o=90,s=e.nextOutCoord+e.pixelX+e.dx,a=e.pixelY+e.pixelHeight+e.dy-1),i.startX=s,i.startY=a,i.startAngle=o,i.endAngle=o,i.gradient.rotation=o,i.linkWidth=r*e.chart.valueHeight,!t.toNode){"horizontal"==n?(i.maxWidth=200,i.endX=e.pixelX+i.maxWidth+e.dx,i.endY=i.startY):(i.maxHeight=200,i.endX=i.startX,i.endY=e.pixelY+i.maxHeight+e.dy),i.opacity=e.opacity;var u=i.gradient.stops.getIndex(1);u&&("gradient"==i.colorMode&&(u.color=e.color),u.opacity=0,i.fill=i.gradient,i.stroke=i.gradient,i.gradient.validate())}e.nextOutCoord+=i.linkWidth}}))}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},e.prototype.positionBullet=function(t){t&&(t.x=this.measuredWidth*t.locationX,t.y=this.measuredHeight*t.locationY)},Object.defineProperty(e.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(t){this.setPropertyValue("level",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.nameLabel.copyFrom(e.nameLabel),this.valueLabel.copyFrom(e.valueLabel)},e}(jj);Om.registeredClasses.SankeyNode=Ej;var Nj=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyLink",new Dp,e.tension=.8,e.controlPointDistance=.2,e.startAngle=0,e.endAngle=0,e.linkWidth=0,e.startX=0,e.endX=0,e.startY=0,e.endY=0,e.middleLine=e.createChild(gg),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Sd(e,t),e.prototype.makeBackwards=function(){null!=this.states.getKey("backwards")&&this.setState("backwards")},e.prototype.validate=function(){var e,i,n,r;if(t.prototype.validate.call(this),!this.isTemplate){var s=this.startX,a=this.startY,o=this.endX,u=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var l=this.dataItem.component;l&&("horizontal"==l.orientation?o<s&&(s=(e=Td([o,s],2))[0],o=e[1],a=(i=Td([u,a],2))[0],u=i[1],this.makeBackwards()):u<a&&(a=(n=Td([u,a],2))[0],u=n[1],s=(r=Td([o,s],2))[0],o=r[1],this.makeBackwards()))}Gd(o)||(o=s),Gd(u)||(u=a);var h=this.startAngle,c=this.endAngle,d=this.linkWidth,f="",m=s,v=a,p=o,b=u,g=s+d*Qd(h),y=o+d*Qd(c),w=a+d*ef(h),S=u+d*ef(c),x=s+d/2*Qd(h),C=o+d/2*Qd(c),O=a+d/2*ef(h),M=u+d/2*ef(c);this.zIndex=this.zIndex||this.dataItem.index;var T=this.tension+(1-this.tension)*Qd(h),k=this.tension+(1-this.tension)*ef(h);if(this.middleLine.tensionX=T,this.middleLine.tensionY=k,Gd(d)&&Gd(s)&&Gd(o)&&Gd(a)&&Gd(u)){Yd(m,3)==Yd(p,3)&&(p+=.01),Yd(v,3)==Yd(b,3)&&(b+=.01),Yd(g,3)==Yd(y,3)&&(y+=.01),Yd(w,3)==Yd(S,3)&&(S+=.01);var I=Math.min(g,y,m,p),A=Math.min(w,S,v,b),j=Math.max(g,y,m,p),F=Math.max(w,S,v,b);this._bbox={x:I,y:A,width:j-I,height:F-A};var D=this.controlPointDistance,P=m+(p-m)*D*ef(h),L=v+(b-v)*D*Qd(h),E=p-(p-m)*D*ef(c),N=b-(b-v)*D*Qd(c),R=x+(C-x)*D*ef(h),B=O+(M-O)*D*Qd(h),_=C-(C-x)*D*ef(c),z=M-(M-O)*D*Qd(c),V=cf({x:P,y:L},{x:E,y:N}),G=(d/ef(V)-d)/tf(V)*ef(h),$=(d/Qd(V)-d)*tf(V)*Qd(h),W=-G/2+g+(y-g)*D*ef(h),q=-$/2+w+(S-w)*D*Qd(h),H=-G/2+y-(y-g)*D*ef(c),U=-$/2+S-(S-w)*D*Qd(c);M==O&&(M+=.01),this.middleLine.segments=[[{x,y:O},{x:R,y:B},{x:_,y:z},{x:C,y:M}]],P+=G/2,L+=$/2,E+=G/2,N+=$/2,f+=sg({x:m,y:v}),f+=new Dg(T,k).smooth([{x:m,y:v},{x:P,y:L},{x:E,y:N},{x:p,y:b}]),f+=ag({x:y,y:S}),f+=new Dg(T,k).smooth([{x:y,y:S},{x:H,y:U},{x:W,y:q},{x:g,y:w}]),f+=" Z"}this.link.path=f,this.maskBullets&&(this.bulletsMask.path=f,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(e.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(t){this.setPropertyValue("startX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(t){this.setPropertyValue("endX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(t){this.setPropertyValue("startY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(t){this.setPropertyValue("endY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(t){this.setPropertyValue("linkWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),e}(Fj);Om.registeredClasses.SankeyLink=Nj;var Rj=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagramDataItem",e.applyTheme(),e}return Sd(e,t),e}(Dj),Bj=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagram",e.orientation="horizontal",e.nodeAlign="middle",e.nodesContainer.width=Ad(100),e.nodesContainer.height=Ad(100),e.linksContainer.width=Ad(100),e.linksContainer.height=Ad(100),e.applyTheme(),e}return Sd(e,t),e.prototype.validateData=function(){var e=this;this._valueHeight=void 0,t.prototype.validateData.call(this),this._levelCount=0,this.nodes.each((function(t,e){e.level=void 0})),this.nodes.each((function(t,i){i.level=e.getNodeLevel(i,0),e._levelCount=nf(e._levelCount,i.level)}))},e.prototype.getNodeLevel=function(t,e){var i=this,n=[e];return cm(t.incomingDataItems.iterator(),(function(t){t.fromNode&&(Gd(t.fromNode.level)?n.push(t.fromNode.level+1):(i._counter=0,i.checkLoop(t.fromNode),i._counter<i.dataItems.length&&n.push(i.getNodeLevel(t.fromNode,e+1))))})),Math.max.apply(Math,kd(n))},e.prototype.checkLoop=function(t){var e=this;this._counter++,this._counter>this.dataItems.length||cm(t.incomingDataItems.iterator(),(function(t){e.checkLoop(t.fromNode)}))},e.prototype.calculateValueHeight=function(){var t=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var e,i,n,r=this.dataItem.values.value.sum;cm(this._sorted,(function(e){var i=e[1];t.getNodeValue(i)})),this.nodes.each((function(e,i){var n=i.level,s=Math.max(i.totalIncoming,i.totalOutgoing);s/r<t.minNodeSize&&(s=r*t.minNodeSize),Gd(t._levelSum[n])?t._levelSum[n]+=s:t._levelSum[n]=s,Gd(t._levelNodesCount[n])?t._levelNodesCount[n]++:t._levelNodesCount[n]=1})),e="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,nm(this._levelSum,(function(r,s){var a=s,o=t._levelNodesCount[r],u=(e-(o-1)*t.nodePadding)/a;u==1/0&&(u=0),(n>u||!Gd(n))&&(n=u,t.maxSum=a,i=Ld(r))})),this._maxSumLevel=i;var s=this._levelNodesCount[this._maxSumLevel],a=(e-(s-1)*this.nodePadding)/this.maxSum;if(a==1/0&&(a=0),Gd(this.valueHeight)){var o=void 0;try{o=this._heightAnimation.animationOptions[0].to}catch(t){}if(o!=a){var u=this.interpolationDuration;try{u=this.nodes.template.states.getKey("active").transitionDuration}catch(t){}this._heightAnimation=new cp(this,{property:"valueHeight",from:this.valueHeight,to:a},u,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}else this.valueHeight=a},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.calculateValueHeight();var i,n=this.nodesContainer,r={},s=this._levelNodesCount[this._maxSumLevel],a=this.dataItem.values.value.sum;i="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,cm(this._sorted,(function(t){var o,u,l,h=t[1],c=h.level,d=0,f=e._levelNodesCount[c];switch(e.nodeAlign){case"bottom":d=(e.maxSum-e._levelSum[c])*e.valueHeight-(f-s)*e.nodePadding;break;case"middle":d=(e.maxSum-e._levelSum[c])*e.valueHeight/2-(f-s)*e.nodePadding/2}if(0==e.maxSum)switch(e.nodeAlign){case"bottom":d=i-f*(e.minNodeSize*i+e.nodePadding);break;case"middle":d=i/2-f/2*(e.minNodeSize*i+e.nodePadding)}h.parent=n;var m=Math.max(h.totalIncoming,h.totalOutgoing);if(m/a<e.minNodeSize&&(m=a*e.minNodeSize),"horizontal"==e.orientation){u=(o=(e.innerWidth-h.pixelWidth)/e._levelCount)*h.level,l=r[c]||d;var v=m*e.valueHeight;0==a&&0==v&&(v=e.minNodeSize*i),h.height=v,h.minX=u,h.maxX=u,r[c]=l+v+e.nodePadding}else{o=(e.innerHeight-h.pixelHeight)/e._levelCount,u=r[c]||d,l=o*h.level;var p=m*e.valueHeight;0==a&&0==p&&(p=e.minNodeSize*i),h.width=p,h.minY=l,h.maxY=l,r[c]=u+p+e.nodePadding}h.x=u,h.y=l}))},e.prototype.showReal=function(e){var i=this;if(!this.preventShow){if(this.interpolationDuration>0){var n=this.nodesContainer,r=0;cm(this.links.iterator(),(function(t){t.hide(0)})),cm(this._sorted,(function(t){var e,s=t[1];"horizontal"==i.orientation?(s.dx=-(n.pixelWidth-s.pixelWidth)/Math.max(i._levelCount,1),e="dx"):(s.dy=-(n.pixelHeight-s.pixelHeight)/Math.max(i._levelCount,1),e="dy");var a=0,o=i.interpolationDuration;i.sequencedInterpolation&&(a=i.sequencedInterpolationDelay*r+o*r/function(t){var e=0;return t((function(t){return++e,!0})),e}(i.nodes.iterator())),s.opacity=0,s.invalidateLinks(),s.animate([{property:"opacity",from:0,to:1},{property:e,to:0}],i.interpolationDuration,i.interpolationEasing).delay(a),cm(s.outgoingDataItems.iterator(),(function(t){var e=t.link.show(i.interpolationDuration);e&&!e.isFinished()&&e.delay(a)})),cm(s.incomingDataItems.iterator(),(function(t){if(!t.fromNode){var e=t.link.show(i.interpolationDuration);e&&!e.isFinished()&&e.delay(a)}})),r++}))}return t.prototype.showReal.call(this)}},e.prototype.changeSorting=function(){var t=this;this.sortNodes();var e={};cm(this._sorted,(function(i){var n,r,s=i[1],a=s.level,o=(t.maxSum-t._levelSum[a])*t.valueHeight/2;"horizontal"==t.orientation?(n="y",r=s.pixelHeight):(n="x",r=s.pixelWidth),s.animate({property:n,to:e[a]||o},t.interpolationDuration,t.interpolationEasing),e[a]=(e[a]||o)+r+t.nodePadding,s.invalidateLinks()}))},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},e.prototype.createDataItem=function(){return new Rj},Object.defineProperty(e.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(t){this.setPropertyValue("nodeAlign",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.nodes.template.nameLabel;"vertical"==t?(this.nodes.template.width=void 0,e.label.horizontalCenter="middle",e.locationX=.5):(this.nodes.template.height=void 0,e.label.horizontalCenter="left",e.locationX=1)},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new Ej;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new Nj;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(t){t!=this._valueHeight&&(this._valueHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},e}(Pj);Om.registeredClasses.SankeyDiagram=Bj;var _j=function(t){function e(){var e=t.call(this)||this;e.className="ChordNode";var i=e.createChild(lj);i.location=.5,i.radius=5,i.text="{name}",i.zIndex=1,i.shouldClone=!1,e.label=i,e.layout="none",e.events.on("positionchanged",e.updateRotation,e,!1),e.isMeasured=!1,e.slice=e.createChild(yg),e.slice.isMeasured=!1;var n=e.hiddenState;return n.properties.fill=(new Dp).getFor("disabledBackground"),n.properties.opacity=.5,n.properties.visible=!0,e.setStateOnChildren=!1,e.slice.hiddenState.properties.visible=!0,e.adapter.add("tooltipX",(function(t,e){return e.slice.ix*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e.adapter.add("tooltipY",(function(t,e){return e.slice.iy*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e}return Sd(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this);var i=this.label,n=this.slice,r=this.chart;if(r&&n){var s=this.total,a=n.arc,o=n.startAngle;this.children.each((function(t){if(t instanceof gA){var e=t.locationX;Gd(e)||(e=.5);var i=t.locationY;Gd(i)||(i=1);var r=o+a*e,s=i*n.radius;t.x=s*ef(r),t.y=s*Qd(r)}}));var u=o+a*i.location,l=o+(1-s/this.adjustedTotal)*a*.5;jd(l)&&(l=o),i.fixPosition(u,n.radius),this.nextAngle=l,this._outgoingSorted&&cm(this._outgoingSorted,(function(t){var i=t.link;i.parent=e.chart.linksContainer;var s=t.getWorkingValue("value");if(Gd(s)){if(r.nonRibbon){var u=i.percentWidth;Gd(u)||(u=5),u/=100,i.startAngle=o+a/2-a/2*u,i.arc=a*u}else i.arc=s*r.valueAngle,i.startAngle=e.nextAngle,e.nextAngle+=i.arc;t.toNode||(i.endAngle=i.startAngle),i.radius=n.pixelInnerRadius}})),this._incomingSorted&&cm(this._incomingSorted,(function(t){var i=t.link;if(i.radius=n.pixelInnerRadius,r.nonRibbon){var s=i.percentWidth;Gd(s)||(s=5),s/=100,i.endAngle=o+a/2-a/2*s,i.arc=a*s}else{i.endAngle=e.nextAngle;var u=t.getWorkingValue("value");Gd(u)&&(i.arc=u*r.valueAngle,e.nextAngle+=i.arc)}t.fromNode||(i.startAngle=i.endAngle)}))}},e.prototype.updateRotation=function(){var t=this.slice,e=this.trueStartAngle+t.arc/2,i=t.radius,n=i*ef(e),r=i*Qd(e),s=cf({x:n+this.pixelX,y:r+this.pixelY});t.startAngle=this.trueStartAngle+(s-e),this.dx=-this.pixelX,this.dy=-this.pixelY},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),this.slice.copyFrom(e.slice)},e}(jj);Om.registeredClasses.ChordNode=_j;var zj=function(t){function e(){var e=t.call(this)||this;return e.className="QuadraticCurve",e.element=e.paper.add("path"),e.pixelPerfect=!1,e.fill=Ym(),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){if(Gd(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2},i={x:this.cpx,y:this.cpy},n=sg(t)+og(e,i);this.path=n}},Object.defineProperty(e.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(t){this.setPropertyValue("cpx",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(t){this.setPropertyValue("cpy",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},i={x:this.cpx,y:this.cpy},n={x:this.x2,y:this.y2},r=mf(e,n,i,t),s=mf(e,n,i,t+.001);return{x:r.x,y:r.y,angle:cf(r,s)}},e}(ig),Vj=function(t){function e(){var e=t.call(this)||this;return e.className="ChordLink",e.middleLine=e.createChild(zj),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){if(t.prototype.validate.call(this),!this.isTemplate){var e=this.startAngle,i=this.endAngle,n=this.arc,r=this.radius,s=this.dataItem.fromNode,a=this.dataItem.toNode,o=0,u=0;s&&(o=s.pixelX+s.dx,u=s.pixelY+s.dy);var l=0,h=0;if(a&&(l=a.pixelX+a.dx,h=a.pixelY+a.dy),r>0){var c=r*ef(e)+o,d=r*Qd(e)+u,f=r*ef(i)+l,m=r*Qd(i)+h,v={x:0,y:0},p=sg({x:c,y:d});p+=lg(e,n,r),p+=og({x:f,y:m},v),p+=lg(i,n,r),p+=og({x:c,y:d},v),this.link.path=n>0?p:"",this.maskBullets&&(this.bulletsMask.path=p,this.bulletsContainer.mask=this.bulletsMask);var b=e+n/2,g=i+n/2,y=this.middleLine;y.x1=r*ef(b)+o,y.y1=r*Qd(b)+u,y.x2=r*ef(g)+l,y.y2=r*Qd(g)+h,y.cpx=0,y.cpy=0,y.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),e}(Fj);Om.registeredClasses.ChordLink=Vj;var Gj=function(t){function e(){var e=t.call(this)||this;return e.className="ChordDiagramDataItem",e.applyTheme(),e}return Sd(e,t),e}(Dj),$j=function(t){function e(){var e=t.call(this)||this;e.valueAngle=0,e.className="ChordDiagram",e.startAngle=-90,e.endAngle=270,e.radius=Ad(80),e.innerRadius=-15,e.nodePadding=5;var i=e.chartContainer.createChild(Eb);return i.align="center",i.valign="middle",i.shouldClone=!1,i.layout="absolute",e.chordContainer=i,e.nodesContainer.parent=i,e.linksContainer.parent=i,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e.applyTheme(),e}return Sd(e,t),e.prototype.validate=function(){var e=this,i=this.chartContainer,n=this.endAngle,r=this.startAngle+this.nodePadding/2,s=Sf(this.startAngle,this.endAngle,1);s=ff([s,{x:0,y:0,width:0,height:0}]);var a=Math.min(i.innerWidth/s.width,i.innerHeight/s.height);Gd(a)||(a=0);var o=sv(this.radius,a),u=sv(this.innerRadius,o,!0),l=this.dataItem.values.value.sum,h=0,c=0;cm(this._sorted,(function(t){var i=t[1];e.getNodeValue(i),h++;var n=i.total;i.total/l<e.minNodeSize&&(n=l*e.minNodeSize),c+=n})),this.valueAngle=(n-this.startAngle-this.nodePadding*h)/c,cm(this._sorted,(function(t){var i=t[1],s=i.slice;s.radius=o,s.innerRadius=u;var a,c=i.total;i.total/l<e.minNodeSize&&(c=l*e.minNodeSize),i.adjustedTotal=c,a=e.nonRibbon?(n-e.startAngle)/h-e.nodePadding:e.valueAngle*c,s.arc=a,s.startAngle=r,i.trueStartAngle=r,i.parent=e.nodesContainer,i.validate(),r+=a+e.nodePadding})),this.chordContainer.definedBBox={x:o*s.x,y:o*s.y,width:o*s.width,height:o*s.height},this.chordContainer.invalidateLayout(),t.prototype.validate.call(this)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},e.prototype.createDataItem=function(){return new Gj},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(t){this.setPropertyValue("nonRibbon",t,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new _j;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new Vj;return this._disposers.push(t),t},e}(Pj);Om.registeredClasses.ChordDiagram=$j;var Wj=function(t){function e(){var e=t.call(this)||this;return e.className="Column",e.width=Ad(80),e.height=Ad(80),e.events.disableType("transformed"),e.applyOnClones=!0,e.strokeOpacity=1,e.layout="none",e.createAssets(),e.events.on("childadded",e.handleKidAdded,e,!1),e}return Sd(e,t),e.prototype.handleKidAdded=function(){"none"==this.layout&&(this.layout="absolute")},e.prototype.createAssets=function(){this.column=this.createChild(Zb),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.column;e&&(e.width=rf(this.pixelWidth,this.maxWidth),e.height=rf(this.pixelHeight,this.maxHeight),e.invalid&&e.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column&&this.column.copyFrom(e.column)},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:rf(this.pixelWidth,this.maxWidth),height:rf(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.Column=Wj;var qj=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.locations.dateX=.5,e.locations.dateY=.5,e.locations.categoryX=.5,e.locations.categoryY=.5,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(t){this.setColumn(t)},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){var e=this;if(this._column&&t!=this._column&&Af(this.sprites,this._column),this._column=t,t){var i=t.dataItem;i&&i!=this&&(i.column=void 0),this.addSprite(t),this._disposers.push(new _f((function(){e.component&&e.component.columns.removeValue(t)})))}},Object.defineProperty(e.prototype,"width",{get:function(){var t=this.properties.width;return this._adapterO&&(t=this._adapterO.apply("width",t)),t},set:function(t){this.properties.width!=t&&(this.properties.width=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.properties.height;return this._adapterO&&(t=this._adapterO.apply("height",t)),t},set:function(t){this.properties.height!=t&&(this.properties.height=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new wm),this._rangesColumns},enumerable:!0,configurable:!0}),e}(JA),Hj=function(t){function e(){var e=t.call(this)||this;e._startLocation=0,e._endLocation=1,e.className="ColumnSeries",e.width=Ad(100),e.height=Ad(100),e.strokeOpacity=0,e.fillOpacity=1,e.clustered=!0;var i=e.mainContainer.createChild(Eb);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e._columnsContainer=i,e.columns.template.pixelPerfect=!1,e.tooltipColorSource=e.columns.template,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},e.prototype.createDataItem=function(){return new qj},e.prototype.validate=function(){var i=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var n,r=this.chart.series,s=0,a=0,o=[];cm(r.iterator(),(function(t){var n;t instanceof e&&(i.baseAxis==t.baseAxis&&(n=i.baseAxis==i.xAxis?i.chart.yAxes.indexOf(t.yAxis):i.chart.xAxes.indexOf(t.xAxis),o.push({series:t,axis:n})))})),o.sort((function(t,e){return t.axis-e.axis})),kf(o,(function(t){var r=t.series;r instanceof e&&((!r.stacked&&r.clustered||n!=t.axis&&r.clustered)&&s++,r==i&&(a=s-1)),n=t.axis})),this.clustered||(a=0,s=1);var u=this.baseAxis.renderer,l=u.cellStartLocation,h=u.cellEndLocation;this._startLocation=l+a/s*(h-l),this._endLocation=l+(a+1)/s*(h-l);var c=this.xAxis,d=this.yAxis;c instanceof KA&&d instanceof VA&&c.sortBySeries==this&&this.sortCategoryAxis(c,"valueY"),d instanceof KA&&c instanceof VA&&d.sortBySeries==this&&this.sortCategoryAxis(d,"valueX")}t.prototype.validate.call(this);for(var f=0;f<this.startIndex;f++){var m=this.dataItems.getIndex(f);this.disableUnusedColumns(m)}for(f=this.dataItems.length-1;f>this.endIndex;f--){m=this.dataItems.getIndex(f);this.disableUnusedColumns(m)}this._propertiesChanged=!1},e.prototype.sortCategoryAxis=function(t,e){var i=this;this.dataItems.values.sort((function(t,i){return i.values[e].workingValue-t.values[e].workingValue}));var n=0;this.dataItems.each((function(t){t._index=n,n++})),t.dataItems.each((function(t){var e=t.component,n=e.categoryToPosition(t.category)-t.deltaPosition,r=e.getSeriesDataItemByCategory(t.category,i);if(r){var s=i.dataItems.indexOf(r);t._index=s;var a=Yd((s+.5)/i.dataItems.length-n,3);t.deltaAnimation&&!t.deltaAnimation.isDisposed()&&t.deltaAnimation.animationOptions[0].to==a||a!=Yd(t.deltaPosition,3)&&(t.deltaAnimation&&t.deltaAnimation.stop(),t.deltaAnimation=t.animate({property:"deltaPosition",from:-a,to:0},e.interpolationDuration,e.interpolationEasing),i._disposers.push(t.deltaAnimation))}})),t.dataItems.values.sort((function(t,e){return t.index-e.index}))},e.prototype.validateDataElement=function(e){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(e),t.prototype.validateDataElement.call(this,e))},e.prototype.getStartLocation=function(t){var e=this._startLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xOpenField]-.5:e+=t.locations[this.yOpenField]-.5,e},e.prototype.getEndLocation=function(t){var e=this._endLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xField]-.5:e+=t.locations[this.yField]-.5,e},e.prototype.validateDataElementReal=function(t){var e,i,n,r,s=this,a=this.getStartLocation(t),o=this.getEndLocation(t),u=this.xField,l=this.xOpenField,h=this.yField,c=this.yOpenField,d=this.columns.template,f=d.percentWidth,m=d.percentHeight,v=d.pixelWidth,p=d.pixelHeight,b=d.maxWidth,g=d.maxHeight,y=d.pixelPaddingLeft,w=d.pixelPaddingRight,S=d.pixelPaddingTop,x=d.pixelPaddingBottom,C=!1,O=t.width;Rd(O)&&(Gd(O)&&(v=O),O instanceof Id&&(f=100*O.value));var M=t.height;if(Rd(M)&&(Gd(M)&&(p=M),M instanceof Id&&(m=100*M.value)),this.xAxis instanceof KA&&this.yAxis instanceof KA){if(!t.hasValue(this._xValueFields)||!t.hasValue(this._yValueFields))return;if(a=0,o=1,!jd(f))a+=A=Yd((o-a)*(1-f/100)/2,5),o-=A;if(e=this.xAxis.getX(t,l,a),i=this.xAxis.getX(t,u,o),jd(f))e+=A=(i-e-v)/2,i-=A;if(!jd(b)&&b<Math.abs(i-e))e+=A=(i-e-b)/2,i-=A;if(a=0,o=1,!jd(m))a+=A=Yd((1-m/100)/2,5),o-=A;if(n=this.yAxis.getY(t,c,a),r=this.yAxis.getY(t,h,o),jd(m))r+=A=(r-n-p)/2,n-=A;if(!jd(g)&&g<Math.abs(r-n))r+=A=(r-n-g)/2,n-=A;i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),n=this.fixVerticalCoordinate(n),r=this.fixVerticalCoordinate(r)}else if(this.baseAxis==this.xAxis){if(!t.hasValue(this._yValueFields))return;if(!jd(f))a+=A=Yd((o-a)*(1-f/100)/2,5),o-=A;if(e=this.xAxis.getX(t,l,a),i=this.xAxis.getX(t,u,o),jd(f))e+=A=(i-e-v)/2,i-=A;if(!jd(b)&&b<Math.abs(i-e))e+=A=(i-e-b)/2,i-=A;var T=t.locations[c],k=t.locations[h];this.yAxis instanceof VA&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(T=0,k=0),r=this.yAxis.getY(t,c,T),n=this.yAxis.getY(t,h,k);var I=Math.ceil(this.yAxis.axisLength);(n<0&&r<0||n>I&&r>I)&&(C=!0),n=this.fixVerticalCoordinate(n),r=this.fixVerticalCoordinate(r),Math.abs(i-e)-y-w==0&&(C=!0)}else{if(!t.hasValue(this._xValueFields))return;var A;if(!jd(m))a+=A=Yd((o-a)*(1-m/100)/2,5),o-=A;if(n=this.yAxis.getY(t,c,a),r=this.yAxis.getY(t,h,o),jd(m))r-=A=(r-n-p)/2,n+=A;if(!jd(g)&&g<Math.abs(r-n))r-=A=(r-n-g)/2,n+=A;var j=t.locations[u],F=t.locations[l];this.xAxis instanceof VA&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(j=0,F=0),i=this.xAxis.getX(t,u,j),e=this.xAxis.getX(t,l,F);I=Math.ceil(this.xAxis.axisLength);(i<0&&e<0||i>I&&e>I)&&(C=!0),i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),Math.abs(n-r)-S-x==0&&(C=!0)}var D,P=Math.abs(i-e),L=Math.abs(r-n),E=Math.min(e,i),N=Math.min(n,r);C?this.disableUnusedColumns(t):(t.column?(D=t.column,this._propertiesChanged&&(am(this,D,Db),am(this.columns.template,D,Db),kf(Db,(function(t){D[t]=D[t]})))):(am(this,D=this.columns.create(),Db),am(this.columns.template,D,Db),t.addSprite(D),t.column=D,D.paper=this.paper,this.itemsFocusable()?(Rd(this.role)||(this.role="menu"),Rd(D.role)||(D.role="menuitem"),D.focusable=!0):(Rd(this.role)||(this.role="list"),Rd(D.role)||(D.role="listitem"),D.focusable=!1),D.focusable&&(D.events.on("focus",(function(e){D.readerTitle=s.populateString(s.itemReaderText,t)}),void 0,!1),D.events.on("blur",(function(t){D.readerTitle=""}),void 0,!1)),D.hoverable&&(D.events.on("over",(function(e){D.readerTitle=s.populateString(s.itemReaderText,t)}),void 0,!1),D.events.on("out",(function(t){D.readerTitle=""}),void 0,!1)),D.parent=this.columnsContainer,D.virtualParent=this),D.width=P,D.height=L,D.x=E,D.y=N,D.realX=e,D.realY=n,D.realWidth=i-e,D.realHeight=r-n,this.setColumnStates(D),D.invalid&&D.validate(),D.__disabled=!1,cm(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i||(i=s.columns.create(),am(e.contents,i,Db),t.addSprite(i),t.rangesColumns.setKey(e.uid,i),i.paper=s.paper),i.parent=e.contents,i.width=P,i.height=L,i.x=E,i.y=N,s.setColumnStates(i),i.invalid&&i.validate(),i.__disabled=!1})));t.itemWidth=P,t.itemHeight=L},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.width=0,t.column.height=0,t.column.__disabled=!0),cm(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.width=0,i.height=0,i.__disabled=!0)})))},e.prototype.setColumnStates=function(t){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var e=t.dataItem;if(this.xAxis instanceof VA||this.yAxis instanceof VA){var i,n=void 0,r=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof VA&&(i=e.getValue(this.xOpenField),n=e.getValue(this.xField)),r=e.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof VA&&(i=e.getValue(this.yOpenField),n=e.getValue(this.yField)),r=e.getValue(this.yAxis.axisFieldName+"Y","previousChange")),n<i?(e.droppedFromOpen=!0,t.defaultState.copyFrom(this._dropFromOpenState),t.setState(this._dropFromOpenState,0)):(e.droppedFromOpen=!1,t.defaultState.copyFrom(this._riseFromOpenState),t.setState(this._riseFromOpenState,0)),r<0?(e.droppedFromPrevious=!0,t.defaultState.copyFrom(this._dropFromPreviousState),t.setState(this._dropFromPreviousState,0)):(e.droppedFromPrevious=!1,t.defaultState.copyFrom(this._riseFromPreviousState),t.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns||(this._columns=new jm(this.createColumnTemplate()),this._disposers.push(new km(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),e.prototype.createColumnTemplate=function(){return new Wj},Object.defineProperty(e.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(t){this.setPropertyValue("clustered",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(t){this._dropFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(t){this._dropFromPreviousState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(t){this._riseFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(t){this._riseFromPreviousState=t},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(e,i){var n=this;if(t.prototype.updateLegendValue.call(this,e,i),this.legendDataItem){var r,s,a=this.legendDataItem.marker;e&&(r=e.droppedFromOpen?this._dropFromOpenState:this._riseFromOpenState,s=e.droppedFromPrevious?this._dropFromPreviousState:this._riseFromPreviousState),cm(a.children.iterator(),(function(t){e?(t.setState(s),t.setState(r)):(t.setState(n._riseFromPreviousState),t.setState(n._riseFromOpenState))}))}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var n=t.createChild(Zb);n.shouldClone=!1,am(this,n,Db),n.copyFrom(this.columns.template),n.padding(0,0,0,0),n.width=e,n.height=i;var r=t.dataItem;r.color=this.fill,r.colorOrig=this.fill},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.columns.template.copyFrom(e.columns.template)},e.prototype.getBulletLocationX=function(e,i){if(this.baseAxis==this.xAxis){var n=e.locationX;Gd(n)||(n=.5);var r=this.getEndLocation(e.dataItem);return r-(r-this.getStartLocation(e.dataItem))*n}return t.prototype.getBulletLocationX.call(this,e,i)},e.prototype.getBulletLocationY=function(e,i){if(this.baseAxis==this.yAxis){var n=e.locationY;Gd(n)||(n=.5);var r=this.getEndLocation(e.dataItem);return r-(r-this.getStartLocation(e.dataItem))*n}return t.prototype.getBulletLocationY.call(this,e,i)},e.prototype.getAdjustedXLocation=function(t,e,i){return Gd(i)||(i=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*(1-i)},e.prototype.getAdjustedYLocation=function(t,e,i){return Gd(i)||(i=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*i},e.prototype.fixVerticalCoordinate=function(t){var e=this.columns.template.pixelPaddingBottom;return Xd(t,-this.columns.template.pixelPaddingTop,this.yAxis.axisLength+e)},e.prototype.fixHorizontalCoordinate=function(t){var e=this.columns.template.pixelPaddingLeft,i=this.columns.template.pixelPaddingRight;return Xd(t,-e,this.xAxis.axisLength+i)},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.columns.clear()},e}(YA);Om.registeredClasses.ColumnSeries=Hj,Om.registeredClasses.ColumnSeriesDataItem=qj;var Uj=function(t){function e(){var e=t.call(this)||this;return e.className="TreeMapSeriesDataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"parentName",{get:function(){var t=this.treeMapDataItem;if(t&&t.parent)return t.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.treeMapDataItem;if(t)return t.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,n,r){var s=this.treeMapDataItem;return s&&s.hide(e),t.prototype.hide.call(this,e,i,n,r)},e.prototype.show=function(e,i,n){var r=this.treeMapDataItem;return r&&r.show(e,i,n),t.prototype.show.call(this,e,i,n)},e}(qj),Kj=function(t){function e(){var e=t.call(this)||this;e.className="TreeMapSeries",e.applyTheme(),e.fillOpacity=1,e.strokeOpacity=1,e.minBulletDistance=0,e.columns.template.tooltipText="{parentName} {name}: {value}",e.columns.template.configField="config";var i=new Dp;return e.stroke=i.getFor("background"),e.dataFields.openValueX="x0",e.dataFields.valueX="x1",e.dataFields.openValueY="y0",e.dataFields.valueY="y1",e.sequencedInterpolation=!1,e.showOnInit=!1,e.columns.template.pixelPerfect=!1,e}return Sd(e,t),e.prototype.processDataItem=function(e,i){i.seriesDataItem=e,t.prototype.processDataItem.call(this,e,i)},e.prototype.createDataItem=function(){return new Uj},e.prototype.show=function(e){if(!this.preventShow){var i=this.defaultState.transitionDuration;return Gd(e)&&(i=e),this.dataItems.each((function(t){t.show(e)})),t.prototype.showReal.call(this,i)}},e.prototype.hide=function(e){var i=this.defaultState.transitionDuration;Gd(e)&&(i=e);var n=t.prototype.hideReal.call(this,i);return this.dataItems.each((function(t){t.hide(e)})),n},e.prototype.processValues=function(){},e.prototype.getStartLocation=function(t){return 0},e.prototype.getEndLocation=function(t){return 1},e.prototype.dataChangeUpdate=function(){},e.prototype.processConfig=function(e){e&&(Rd(e.dataFields)&&$d(e.dataFields)||(e.dataFields={})),t.prototype.processConfig.call(this,e)},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var n=t.createChild(Zb);n.shouldClone=!1,am(this,n,Db),n.padding(0,0,0,0),n.width=e,n.height=i;var r=t.dataItem;r.color=n.fill,r.colorOrig=n.fill},e.prototype.disableUnusedColumns=function(e){t.prototype.disableUnusedColumns.call(this,e),e.column&&(e.column.__disabled=!1)},e}(Hj);Om.registeredClasses.TreeMapSeries=Kj,Om.registeredClasses.TreeMapSeriesDataItem=Uj;var Jj=function(t){function e(){var e=t.call(this)||this;return e.rows=[],e.className="TreeMapDataItem",e.values.value={workingValue:0},e.values.x0={},e.values.y0={},e.values.x1={},e.values.y1={},e.hasChildren.children=!0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),e.prototype.getDuration=function(){return 0},Object.defineProperty(e.prototype,"value",{get:function(){var t=0;return this.children&&0!=this.children.length?cm(this.children.iterator(),(function(e){var i=e.value;Gd(i)&&(t+=i)})):t=this.values.value.workingValue,t},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x0",{get:function(){return this.values.x0.value},set:function(t){this.setValue("x0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this.values.x1.value},set:function(t){this.setValue("x1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y0",{get:function(){return this.values.y0.value},set:function(t){this.setValue("y0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.values.y1.value},set:function(t){this.setValue("y1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.properties.children},set:function(t){this.setProperty("children",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t=this.properties.color;return null==t&&this.parent&&(t=this.parent.color),null==t&&this.component&&(t=this.component.colors.getIndex(this.component.colors.step*this.index)),t},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){t!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=t,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,n,r){this.setWorkingValue("value",0),this.children&&this.children.each((function(t){t.hide(e,i,n,r)}));var s=this.seriesDataItem;return s&&s.bullets.each((function(t,e){e.hide(),e.preventShow=!0})),t.prototype.hide.call(this,e,i,n,r)},e.prototype.show=function(e,i,n){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each((function(t){t.show(e,i,n)}));var r=this.seriesDataItem;return r&&r.bullets.each((function(t,e){e.preventShow=!1})),t.prototype.show.call(this,e,i,n)},e}(XA),Yj=function(t){function e(){var e=t.call(this)||this;e.layoutAlgorithm=e.squarify,e.zoomable=!0,e.className="TreeMap",e._usesData=!0,e.maxLevels=2,e.currentLevel=0,e.hideParentColumns=!1,e.colors=new ay,e.sorting="descending";var i=e.xAxes.push(new VA);i.title.disabled=!0,i.strictMinMax=!0;var n=i.renderer;n.inside=!0,n.labels.template.disabled=!0,n.ticks.template.disabled=!0,n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.minGridDistance=100,n.line.disabled=!0,n.baseGrid.disabled=!0;var r=e.yAxes.push(new VA);r.title.disabled=!0,r.strictMinMax=!0;var s=r.renderer;s.inside=!0,s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.grid.template.disabled=!0,s.axisFills.template.disabled=!0,s.minGridDistance=100,s.line.disabled=!0,s.baseGrid.disabled=!0,s.inversed=!0,e.xAxis=i,e.yAxis=r;var a=new Kj;return e.seriesTemplates=new Sm(a),a.virtualParent=e,e._disposers.push(new ym(e.seriesTemplates)),e._disposers.push(a),e.zoomOutButton.events.on("hit",(function(){e.zoomToChartDataItem(e._homeDataItem)}),void 0,!1),e.seriesTemplates.events.on("insertKey",(function(t){t.newValue.isTemplate=!0}),void 0,!1),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(t){var e=this;this._navigationBar!=t&&(this._navigationBar=t,t.parent=this,t.toBack(),t.links.template.events.on("hit",(function(t){var i=t.target.dataItem.dataContext;i.isDisposed()||(e.zoomToChartDataItem(i),e.createTreeSeries(i))}),void 0,!0),this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],t.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var e=this.dataItems.template.clone();this._homeDataItem=e,cm(this.dataItems.iterator(),(function(t){t.parent=e})),e.children=this.dataItems,e.x0=0,e.y0=0,e.name=this._homeText;var i=1e3,n=10*Math.round(i*this.pixelHeight/this.pixelWidth/10)||1e3;e.x1=i,e.y1=n,this.xAxis.min=0,this.xAxis.max=i,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=n,this.yAxis.getMinMax(),this.layoutItems(e),this.createTreeSeries(e),this.feedLegend()},e.prototype.layoutItems=function(t,e){if(t){var i=t.children;e||(e=this.sorting),"ascending"==e&&i.values.sort((function(t,e){return t.value-e.value})),"descending"==e&&i.values.sort((function(t,e){return e.value-t.value})),this._updateDataItemIndexes(0),this.layoutAlgorithm(t);for(var n=0,r=i.length;n<r;n++){var s=i.getIndex(n);s.children&&this.layoutItems(s)}}},e.prototype.createTreeSeries=function(t){var e=this;this._tempSeries=[];for(var i=[t],n=t.parent;null!=n;)this.initSeries(n),i.push(n),n=n.parent;i.reverse(),this.navigationBar&&(this.navigationBar.data=i),this.createTreeSeriesReal(t),kf(this._tempSeries,(function(t){-1==e.series.indexOf(t)&&e.series.push(t),t.zIndex=t.level}))},e.prototype.createTreeSeriesReal=function(t){if(t.children&&t.level<this.currentLevel+this.maxLevels){this.initSeries(t);for(var e=0;e<t.children.length;e++){var i=t.children.getIndex(e);i.children&&this.createTreeSeriesReal(i)}}},e.prototype.setData=function(e){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,t.prototype.setData.call(this,e)},e.prototype.seriesAppeared=function(){return!0},e.prototype.initSeries=function(t){var e=this;if(!t.series){var i=void 0,n=this.seriesTemplates.getKey(t.level.toString());(i=n?n.clone():this.series.create()).dataItem.dataContext=t,i.name=t.name,i.parentDataItem=t,t.series=i;var r=t.level;i.level=r;var s=t.dataContext;s&&(i.config=s.config),this.dataUsers.removeValue(i),i.data=t.children.values,i.fill=t.color,i.columnsContainer.hide(0),i.bulletsContainer.hide(0),i.columns.template.adapter.add("fill",(function(t,e){var i=e.dataItem;if(i){var n=i.treeMapDataItem;if(n)return e.fill=n.color,e.adapter.remove("fill"),n.color}})),this.zoomable&&(t.level>this.currentLevel||t.children&&t.children.length>0)&&(i.columns.template.cursorOverStyle=fb.pointer,this.zoomable&&i.columns.template.events.on("hit",(function(i){var n=i.target.dataItem;t.level>e.currentLevel?e.zoomToChartDataItem(n.treeMapDataItem.parent):e.zoomToSeriesDataItem(n)}),this,void 0))}this._tempSeries.push(t.series)},e.prototype.toggleBullets=function(t){var e=this;cm(this.series.iterator(),(function(i){-1==e._tempSeries.indexOf(i)?(i.columnsContainer.hide(),i.bulletsContainer.hide(t)):(i.columnsContainer.show(),i.bulletsContainer.show(t),i.dataItems.each((function(t){t.bullets.each((function(t,e){e.show()}))})),i.level<e.currentLevel?(e.hideParentColumns&&i.columnsContainer.hide(),i.bulletsContainer.hide(t)):i.level==e.currentLevel&&e.maxLevels>1&&i.dataItems.each((function(t){t.treeMapDataItem.children&&t.bullets.each((function(t,e){e.hide()}))})))}))},e.prototype.zoomToSeriesDataItem=function(t){this.zoomToChartDataItem(t.treeMapDataItem)},e.prototype.zoomToChartDataItem=function(t){var e=this;t||(t=this._homeDataItem);var i=this.zoomOutButton;if(i&&(t!=this._homeDataItem?i.show():i.hide()),t&&t.children){this.xAxis.zoomToValues(t.x0,t.x1),this.yAxis.zoomToValues(t.y0,t.y1),this.currentLevel=t.level,this.currentlyZoomed=t,this.createTreeSeries(t);var n=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;!n||n.isDisposed()||n.isFinished()?this.toggleBullets():(this._dataDisposers.push(n),n.events.once("animationended",(function(){e.toggleBullets()})))}},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},e.prototype.createDataItem=function(){return new Jj},Object.defineProperty(e.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(t){this.setPropertyValue("maxLevels",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(t){this.setPropertyValue("currentLevel",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(t){this.setPropertyValue("hideParentColumns",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(t){this.setPropertyValue("sorting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new Kj},Object.defineProperty(e.prototype,"homeText",{get:function(){return this._homeText},set:function(t){this._homeText=t,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e){if(Rd(e.layoutAlgorithm)&&Vd(e.layoutAlgorithm))switch(e.layoutAlgorithm){case"squarify":e.layoutAlgorithm=this.squarify;break;case"binaryTree":e.layoutAlgorithm=this.binaryTree;break;case"slice":e.layoutAlgorithm=this.slice;break;case"dice":e.layoutAlgorithm=this.dice;break;case"sliceDice":e.layoutAlgorithm=this.sliceDice;break;default:delete e.layoutAlgorithm}Rd(e.navigationBar)&&!Rd(e.navigationBar.type)&&(e.navigationBar.type="NavigationBar"),t.prototype.processConfig.call(this,e)}},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),cm(this.series.iterator(),(function(t){t.validateRawData()})),this.zoomToChartDataItem(this._homeDataItem)},e.prototype.binaryTree=function(t){var e,i,n=t.children,r=n.length,s=new Array(r+1);for(s[0]=i=e=0;e<r;++e)s[e+1]=i+=n.getIndex(e).value;r>0&&function t(e,i,r,a,o,u,l){if(e>=i-1){return(b=n.getIndex(e)).x0=a,b.y0=o,b.x1=u,void(b.y1=l)}var h=s[e],c=r/2+h,d=e+1,f=i-1;for(;d<f;){var m=d+f>>>1;s[m]<c?d=m+1:f=m}c-s[d-1]<s[d]-c&&e+1<d&&--d;var v=s[d]-h,p=r-v;if(0==r){var b;return(b=n.getIndex(e)).x0=a,b.y0=o,b.x1=u,void(b.y1=l)}if(u-a>l-o){var g=(a*p+u*v)/r;t(e,d,v,a,o,g,l),t(d,i,p,g,o,u,l)}else{var y=(o*p+l*v)/r;t(e,d,v,a,o,u,y),t(d,i,p,a,y,u,l)}}(0,r,t.value,t.x0,t.y0,t.x1,t.y1)},e.prototype.slice=function(t){for(var e,i=t.x0,n=t.x1,r=t.y0,s=t.y1,a=t.children,o=-1,u=a.length,l=t.value&&(s-r)/t.value;++o<u;)(e=a.getIndex(o)).x0=i,e.x1=n,e.y0=r,r+=e.value*l,e.y1=r},e.prototype.dice=function(t){for(var e,i=t.x0,n=t.x1,r=t.y0,s=t.y1,a=t.children,o=-1,u=a.length,l=t.value&&(n-i)/t.value;++o<u;)(e=a.getIndex(o)).y0=r,e.y1=s,e.x0=i,i+=e.value*l,e.x1=i},e.prototype.sliceDice=function(t){1&t.level?this.slice(t):this.dice(t)},e.prototype.squarify=function(t){for(var e,i,n,r,s,a,o,u,l,h,c=(1+Math.sqrt(5))/2,d=t.x0,f=t.x1,m=t.y0,v=t.y1,p=t.children,b=0,g=0,y=p.length,w=t.value;b<y;){i=f-d,n=v-m;do{r=p.getIndex(g++).value}while(!r&&g<y);for(s=a=r,h=r*r*(l=Math.max(n/i,i/n)/(w*c)),u=Math.max(a/h,h/s);g<y;++g){if(r+=e=p.getIndex(g).value,e<s&&(s=e),e>a&&(a=e),h=r*r*l,(o=Math.max(a/h,h/s))>u){r-=e;break}u=o}var S=this.dataItems.template.clone();S.value=r,S.dice=i<n,S.children=p.slice(b,g),S.x0=d,S.y0=m,S.x1=f,S.y1=v,S.dice?(S.y1=w?m+=n*r/w:v,this.dice(S)):(S.x1=w?d+=i*r/w:f,this.slice(S)),w-=r,b=g}},e.prototype.handleSeriesAdded2=function(){},e.prototype.handleDataItemValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.getLegendLevel=function(t){if(t&&t.children){if(t.children.length>1)return t;if(1==t.children.length){var e=t.children.getIndex(0);return e.children?this.getLegendLevel(e):t}return t}},e.prototype.handleLegendSeriesAdded=function(t){},Object.defineProperty(e.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),e.prototype.feedLegend=function(){var t=this.legend;if(t){t.dataFields.name="name";var e=this.getLegendLevel(this._homeDataItem);if(e){var i=[];e.children.each((function(t){i.push(t)})),t.data=i}}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},e.prototype.getExporting=function(){var e=this,i=t.prototype.getExporting.call(this);return i.adapter.add("formatDataFields",(function(t){return"csv"!=t.format&&"xlsx"!=t.format||Rd(e.dataFields.children)&&delete t.dataFields[e.dataFields.children],t})),i},e}(QA);Om.registeredClasses.TreeMap=Yj;var Zj=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vf,e.className="AxisRendererX3D",e._disposers.push(e._chart),e.applyTheme(),e}return Sd(e,t),e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);if(t.element){var r=this.chart.dx3D||0,s=this.chart.dy3D||0,a=this.getHeight();t.path=sg({x:r,y:s})+ag({x:r,y:a+s})+ag({x:0,y:a})}this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.getHeight(),i=this.chart.dx3D||0,n=this.chart.dy3D||0;this.baseGrid.path=sg({x:i,y:n})+ag({x:0,y:0})+ag({x:0,y:e})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(qA);Om.registeredClasses.AxisRendererX3D=Zj;var Xj=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vf,e.className="AxisRendererY3D",e._disposers.push(e._chart),e.applyTheme(),e}return Sd(e,t),e.prototype.updateGridElement=function(t,e,i){e+=(i-e)*t.location;var n=this.positionToPoint(e);if(t.element){var r=this.chart.dx3D||0,s=this.chart.dy3D||0,a=this.getWidth();t.path=sg({x:0,y:0})+ag({x:r,y:s})+ag({x:a+r,y:s})}this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.chart.dx3D||0,i=this.chart.dy3D||0,n=this.getWidth();this.baseGrid.path=sg({x:0,y:0})+ag({x:n,y:0})+ag({x:n+e,y:i})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(BA),Qj=function(t){function e(){var e=t.call(this)||this;return e.className="Column3D",e}return Sd(e,t),e.prototype.createAssets=function(){this.column3D=this.createChild(Yg),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},e.prototype.validate=function(){t.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column3D&&this.column3D.copyFrom(e.column3D)},e.prototype.setFill=function(e){t.prototype.setFill.call(this,e),this.column.fill=e},e}(Wj);Om.registeredClasses.Column3D=Qj;var tF=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3DDataItem",e.applyTheme(),e}return Sd(e,t),e}(qj),eF=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3D",e.columns.template.column3D.applyOnClones=!0,e.columns.template.hiddenState.properties.visible=!0,e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){var t=this.chart;return t&&t.columnsContainer&&"vertical"!=t.leftAxesContainer.layout&&"vertical"!=t.rightAxesContainer.layout&&"horizontal"!=t.bottomAxesContainer.layout&&"horizontal"!=t.topAxesContainer.layout?t.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),e.column&&(e.column.dx=this.dx,e.column.dy=this.dy,e.column.visible=this.visible)},e.prototype.validateDataElements=function(){t.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},e.prototype.createColumnTemplate=function(){return new Qj},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0),this.columns.template.column3D.depth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.columns.template.column3D.angle=t},enumerable:!0,configurable:!0}),e}(Hj);Om.registeredClasses.ColumnSeries3D=eF,Om.registeredClasses.ColumnSeries3DDataItem=tF,function(t){function e(){var e=t.call(this)||this;return e.className="XYChart3DDataItem",e.applyTheme(),e}Sd(e,t)}(XA);var iF=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=Zj,e._axisRendererY=Xj,e.className="XYChart3D",e.depth=30,e.angle=30;var i=e.seriesContainer.createChild(Eb);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e.columnsContainer=i,e.columnsContainer.mask=e.createChild(Pb),e.applyTheme(),e}return Sd(e,t),e.prototype.updateSeriesMasks=function(){if(t.prototype.updateSeriesMasks.call(this),zv()){var e=this.columnsContainer,i=e.mask;e.mask=void 0,e.mask=i}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx3D",{get:function(){return ef(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy3D",{get:function(){return-Qd(this.angle)*this.depth},enumerable:!0,configurable:!0}),e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.fixColumns()},e.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),t.prototype.fixLayout.call(this)},e.prototype.fixColumns=function(){var t=this,e=1,i=0;cm(this.series.iterator(),(function(t){t instanceof eF&&(!t.clustered&&i>0&&e++,t.depthIndex=e-1,i++)}));var n=0;cm(this.series.iterator(),(function(i){if(i instanceof eF){i.depth=t.depth/e,i.angle=t.angle,i.columnsContainer==t.columnsContainer&&(i.dx=t.depth/e*ef(t.angle)*i.depthIndex,i.dy=-t.depth/e*Qd(t.angle)*i.depthIndex);var r=!1;(i.baseAxis==i.xAxis&&i.xAxis.renderer.inversed||i.baseAxis==i.yAxis&&i.yAxis.renderer.inversed)&&(r=!0);var s=1;i.dataItems.each((function(t){var e=t.column;e&&(e.zIndex=r?1e3*(1e3-s)+n-100*i.depthIndex:1e3*s+n-100*i.depthIndex),s++})),r?n--:n++}})),this.maskColumns()},e.prototype.processConfig=function(e){if(e&&Rd(e.series)&&Wd(e.series))for(var i=0,n=e.series.length;i<n;i++)e.series[i].type=e.series[i].type||"ColumnSeries3D";t.prototype.processConfig.call(this,e)},e.prototype.maskColumns=function(){var t=this.plotContainer.pixelWidth,e=this.plotContainer.pixelHeight,i=this.dx3D,n=this.dy3D,r=sg({x:0,y:0})+ag({x:i,y:n})+ag({x:t+i,y:n})+ag({x:t+i,y:e+n})+ag({x:t,y:e})+ag({x:t,y:e})+ag({x:0,y:e})+" Z",s=this.columnsContainer;s&&s.mask&&(s.mask.path=r)},e}(QA);Om.registeredClasses.XYChart3D=iF;var nF=function(t){function e(){var e=t.call(this)||this;e.className="HeatLegend",e.markerContainer=e.createChild(Eb),e.markerContainer.shouldClone=!1,e.markerCount=1;var i=new Zb;return i.minHeight=20,i.minWidth=20,i.interactionsEnabled=!1,i.fillOpacity=1,i.cornerRadius(0,0,0,0),e.markerContainer.minHeight=20,e.markerContainer.minWidth=20,e.orientation="horizontal",e.markers=new jm(i),e._disposers.push(new km(e.markers)),e._disposers.push(e.markers.template),e.applyTheme(),e}return Sd(e,t),e.prototype.getMinFromRules=function(t){var e,i=this.series;if(i)return hm(i.heatRules.iterator(),(function(i){return i.property!=t||(e=i.min,!1)})),e},e.prototype.getMaxFromRules=function(t){var e,i=this.series;if(i)return cm(i.heatRules.iterator(),(function(i){return i.property!=t||(e=i.max,!1)})),e},e.prototype.validate=function(){t.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var e=this.series,i=this.minColor,n=this.maxColor;if(Rd(i)||(i=Zm(this.getMinFromRules("fill"))),Rd(n)||(n=Zm(this.getMaxFromRules("fill"))),e){var r=e.fill;!Rd(i)&&r instanceof Jm&&(i=r),!Rd(n)&&r instanceof Jm&&(n=r)}Rd(n)||(n=Zm(this.getMaxFromRules("fill")));var s=Ld(this.getMinFromRules("fillOpacity"));Gd(s)||(s=1);var a=Ld(this.getMaxFromRules("fillOpacity"));Gd(a)||(a=1);var o=Ld(this.getMinFromRules("strokeOpacity"));Gd(o)||(o=1);var u=Ld(this.getMaxFromRules("strokeOpacity"));Gd(u)||(u=1);for(var l=Zm(this.getMinFromRules("stroke")),h=Zm(this.getMaxFromRules("stroke")),c=0;c<this.markerCount;c++){var d=this.markers.getIndex(c);if(d||((d=this.markers.create()).parent=this.markerContainer,d.height=Ad(100),d.width=Ad(100)),1==this.markerCount){var f=new hb;if(this.reverseOrder?(f.addColor(n,a),f.addColor(i,s)):(f.addColor(i,s),f.addColor(n,a)),"vertical"==this.orientation&&(f.rotation=-90),d.fill=f,Rd(l)&&Rd(h)){var m=new hb;this.reverseOrder?(m.addColor(h,u),m.addColor(l,o)):(m.addColor(l,o),m.addColor(h,u)),"vertical"==this.orientation&&(m.rotation=-90),d.stroke=m}}else{var v=c;this.reverseOrder&&(v=this.markerCount-c-1);var p=new Jm(Wm(i.rgb,n.rgb,v/this.markerCount));d.fill=p;var b=s+(a-s)*v/this.markerCount;if(d.fillOpacity=b,Rd(l)&&Rd(h)){var g=new Jm(Wm(l.rgb,h.rgb,v/this.markerCount));d.stroke=g;var y=o+(u-o)*v/this.markerCount;d.strokeOpacity=y}}}var w=this.valueAxis.renderer;this.markerCount>1&&("horizontal"==this.orientation?w.minGridDistance=this.measuredWidth/this.markerCount:w.minGridDistance=this.measuredHeight/this.markerCount),this.valueAxis.invalidate();c=this.markerCount;for(var S=this.markers.length;c<S;c++)this.markers.getIndex(c).parent=void 0},Object.defineProperty(e.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(t){t instanceof Jm||(t=Zm(t)),this.setColorProperty("minColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(t){t instanceof Jm||(t=Zm(t)),this.setColorProperty("maxColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(t){this.setPropertyValue("markerCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(t){this.setPropertyValue("minValue",t),this.valueAxis.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(t){this.setPropertyValue("maxValue",t),this.valueAxis.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.markerContainer,i=this.valueAxis;"horizontal"==t?(Rd(this.width)||(this.width=200),this.height=void 0,i.width=Ad(100),i.height=void 0,i.tooltip.pointerOrientation="vertical",this.layout="vertical",e.width=Ad(100),e.height=void 0,i.renderer instanceof qA||(i.renderer=new qA)):(Rd(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",e.width=void 0,e.height=Ad(100),i.height=Ad(100),i.width=void 0,i.tooltip.pointerOrientation="horizontal",i.renderer instanceof BA||(i.renderer=new BA),i.renderer.inside=!0,i.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var n=i.renderer;n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.baseGrid.disabled=!0,n.labels.template.padding(2,3,2,3),n.minHeight=void 0,n.minWidth=void 0,this.markerContainer.layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(VA),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(t){this._valueAxis=t,t.parent=this,t.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){var e=this;this._series=t;var i="value";try{var n=t.heatRules.getIndex(0).dataField;n&&(i=n)}catch(t){}this.updateMinMax(t.dataItem.values[i].low,t.dataItem.values[i].high),t.dataItem.events.on("calculatedvaluechanged",(function(n){e.updateMinMax(t.dataItem.values[i].low,t.dataItem.values[i].high)}),void 0,!1),t.heatRules.events.on("inserted",this.invalidate,this,!1),t.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),e.prototype.updateMinMax=function(t,e){var i=this.valueAxis;Gd(this.minValue)||(i.min=t,i.invalidate()),Gd(this.maxValue)||(i.max=e,i.invalidate())},e.prototype.processConfig=function(e){if(e&&Rd(e.series)&&Vd(e.series)&&Vd(e.series))if(this.map.hasKey(e.series))e.series=this.map.getKey(e.series);else{var i=e.series,n=this.map.events.on("insertKey",(function(t){t.key==i&&(this.series=t.newValue,n.dispose())}),this);this._disposers.push(n),delete e.series}t.prototype.processConfig.call(this,e)},e}(Eb);Om.registeredClasses.HeatLegend=nF;var rF=function(t){function e(){var e=t.call(this)||this;return e.className="Candlestick",e.layout="none",e}return Sd(e,t),e.prototype.createAssets=function(){t.prototype.createAssets.call(this),this.lowLine=this.createChild(ig),this.lowLine.shouldClone=!1,this.highLine=this.createChild(ig),this.highLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.lowLine&&this.lowLine.copyFrom(e.lowLine),this.highLine&&this.highLine.copyFrom(e.highLine)},e}(Wj);Om.registeredClasses.Candlestick=rF;var sF=function(t){function e(){var e=t.call(this)||this;return e.values.lowValueX={},e.values.lowValueY={},e.values.highValueX={},e.values.highValueY={},e.className="CandlestickSeriesDataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(t){this.setValue("lowValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(t){this.setValue("lowValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(t){this.setValue("highValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(t){this.setValue("highValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),e}(qj),aF=function(t){function e(){var e=t.call(this)||this;e.className="CandlestickSeries",e.groupFields.lowValueX="low",e.groupFields.lowValueY="low",e.groupFields.highValueX="high",e.groupFields.highValueY="high",e.strokeOpacity=1;var i=new Dp,n=i.getFor("positive"),r=i.getFor("negative");return e.dropFromOpenState.properties.fill=r,e.dropFromOpenState.properties.stroke=r,e.riseFromOpenState.properties.fill=n,e.riseFromOpenState.properties.stroke=n,e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},e.prototype.createDataItem=function(){return new sF},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),this.validateCandlestick(e)},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.lowLine,n=e.highLine;if(this.baseAxis==this.xAxis){var r=e.pixelWidth/2;i.x=r,n.x=r;var s=t.getWorkingValue(this.yOpenField),a=t.getWorkingValue(this.yField),o=this.yAxis.getY(t,this.yOpenField),u=this.yAxis.getY(t,this.yField),l=this.yAxis.getY(t,this.yLowField),h=this.yAxis.getY(t,this.yHighField),c=e.pixelY;i.y1=l-c,n.y1=h-c,s<a?(i.y2=o-c,n.y2=u-c):(i.y2=u-c,n.y2=o-c)}if(this.baseAxis==this.yAxis){var d=e.pixelHeight/2;i.y=d,n.y=d;var f=t.getWorkingValue(this.xOpenField),m=t.getWorkingValue(this.xField),v=this.xAxis.getX(t,this.xOpenField),p=this.xAxis.getX(t,this.xField),b=this.xAxis.getX(t,this.xLowField),g=this.xAxis.getX(t,this.xHighField),y=e.pixelX;i.x1=b-y,n.x1=g-y,f<m?(i.x2=v-y,n.x2=p-y):(i.x2=p-y,n.x2=v-y)}cm(this.axisRanges.iterator(),(function(e){var r=t.rangesColumns.getKey(e.uid);if(r){var s=r.lowLine;s.x=i.x,s.y=i.y,s.x1=i.x1,s.x2=i.x2,s.y1=i.y1,s.y2=i.y2;var a=r.highLine;a.x=n.x,a.y=n.y,a.x1=n.x1,a.x2=n.x2,a.y1=n.y1,a.y2=n.y2}}))}},Object.defineProperty(e.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),e.prototype.defineFields=function(){t.prototype.defineFields.call(this);var e=this.xAxis,i=this.yAxis;if(e&&i){if(this.baseAxis==e){var n=av(i.axisFieldName);this._yLowField="low"+n+"Y",this._yHighField="high"+n+"Y"}if(this.baseAxis==i){var r=av(e.axisFieldName);this._xLowField="low"+r+"X",this._xHighField="high"+r+"X"}this.addValueField(e,this._xValueFields,this._xLowField),this.addValueField(e,this._xValueFields,this._xHighField),this.addValueField(i,this._yValueFields,this._yLowField),this.addValueField(i,this._yValueFields,this._yHighField)}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var n,r,s=t.createChild(rF);s.shouldClone=!1,s.copyFrom(this.columns.template);var a=s.lowLine,o=s.highLine;this.baseAxis==this.yAxis?(n=e/3,r=i,a.y=i/2,o.y=i/2,a.x2=e/3,o.x2=e/3,o.x=e/3*2,s.column.x=e/3):(n=e,r=i/3,a.x=e/2,o.x=e/2,a.y2=i/3,o.y2=i/3,o.y=i/3*2,s.column.y=i/3),s.width=n,s.height=r,am(this,t,Db),am(this.columns.template,s,Db),s.stroke=this.riseFromOpenState.properties.stroke,s.fill=s.stroke;var u=t.dataItem;u.color=s.fill,u.colorOrig=s.fill},e.prototype.createColumnTemplate=function(){return new rF},e}(Hj);Om.registeredClasses.CandlestickSeries=aF,Om.registeredClasses.CandlestickSeriesDataItem=sF;var oF=function(t){function e(){var e=t.call(this)||this;return e.className="OHLC",e.layout="none",e}return Sd(e,t),e.prototype.createAssets=function(){this.openLine=this.createChild(ig),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(ig),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(ig),this.closeLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.openLine&&this.openLine.copyFrom(e.openLine),this.highLowLine&&this.highLowLine.copyFrom(e.highLowLine),this.closeLine&&this.closeLine.copyFrom(e.closeLine)},e}(rF);Om.registeredClasses.OHLC=oF;var uF=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(sF),lF=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeries",e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},e.prototype.createDataItem=function(){return new uF},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.openLine,n=e.highLowLine,r=e.closeLine;if(this.baseAxis==this.xAxis){var s=e.pixelWidth/2;n.x=s,t.getWorkingValue(this.yOpenField),t.getWorkingValue(this.yField);var a=this.yAxis.getY(t,this.yOpenField),o=this.yAxis.getY(t,this.yField),u=this.yAxis.getY(t,this.yLowField),l=this.yAxis.getY(t,this.yHighField),h=e.pixelY;i.y1=a-h,i.y2=a-h,i.x1=0,i.x2=s,r.y1=o-h,r.y2=o-h,r.x1=s,r.x2=2*s,n.y1=l-h,n.y2=u-h}if(this.baseAxis==this.yAxis){var c=e.pixelHeight/2;n.y=c,t.getWorkingValue(this.xOpenField),t.getWorkingValue(this.xField);var d=this.xAxis.getX(t,this.xOpenField),f=this.xAxis.getX(t,this.xField),m=this.xAxis.getX(t,this.xLowField),v=this.xAxis.getX(t,this.xHighField),p=e.pixelX;i.x1=d-p,i.x2=d-p,i.y1=c,i.y2=2*c,r.x1=f-p,r.x2=f-p,r.y1=0,r.y2=c,n.x1=v-p,n.x2=m-p}cm(this.axisRanges.iterator(),(function(e){var s=t.rangesColumns.getKey(e.uid);if(s){var a=s.openLine;a.x=i.x,a.y=i.y,a.x1=i.x1,a.x2=i.x2,a.y1=i.y1,a.y2=i.y2;var o=s.closeLine;o.x=r.x,o.y=r.y,o.x1=r.x1,o.x2=r.x2,o.y1=r.y1,o.y2=r.y2;var u=s.highLowLine;u.x=n.x,u.y=n.y,u.x1=n.x1,u.x2=n.x2,u.y1=n.y1,u.y2=n.y2}}))}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var n,r,s=t.createChild(oF);s.shouldClone=!1,s.copyFrom(this.columns.template);var a=s.openLine,o=s.closeLine,u=s.highLowLine;this.baseAxis==this.yAxis?(n=e/3,r=i,u.y=i/2,u.x2=e,a.x=e/3*2,a.y2=i/2,o.x=e/3,o.y2=i,o.y1=i/2):(n=e,r=i/3,u.x=e/2,u.y2=i,a.y=i/3*2,a.x2=e/2,o.y=i/3,o.x2=e,o.x1=e/2),s.width=n,s.height=r,am(this,t,Db),am(this.columns.template,s,Db),s.stroke=this.riseFromOpenState.properties.stroke;var l=t.dataItem;l.color=s.stroke,l.colorOrig=s.stroke},e.prototype.createColumnTemplate=function(){return new oF},e}(aF);Om.registeredClasses.OHLCSeries=lF,Om.registeredClasses.OHLCSeriesDataItem=uF;var hF=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesSegment",e}return Sd(e,t),e.prototype.drawSegment=function(t,e,i,n,r,s){if(t.length>0&&e.length>0)if(r){var a=sg(t[0]);if(t.length>0)for(var o=1;o<t.length;o++){var u=t[o];o/2==Math.round(o/2)?a+=sg(u):a+=ag(u)}this.strokeSprite.path=a,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(a=sg(t[0])+rg(t),a+=ag(e[0])+rg(e),a+=ag(t[0]),a+=" Z",this.fillSprite.path=a)}else{a=sg(t[0])+rg(t);this.strokeSprite.path=a,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(a+=ag(e[0])+rg(e),a+=ag(t[0]),a+=" Z",this.fillSprite.path=a)}else this.strokeSprite.path="",this.fillSprite.path=""},e}(tj);Om.registeredClasses.StepLineSeriesSegment=hF;var cF=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(nj),dF=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeries",e.applyTheme(),e.startLocation=0,e.endLocation=1,e}return Sd(e,t),e.prototype.createDataItem=function(){return new cF},e.prototype.addPoints=function(t,e,i,n,r){var s,a,o,u;this.baseAxis==this.xAxis&&(s=this.startLocation,a=this.endLocation,o=this.getAdjustedXLocation(e,this.yOpenField),u=this.getAdjustedXLocation(e,this.yField)),this.baseAxis==this.yAxis&&(o=this.startLocation,u=this.endLocation,s=this.getAdjustedXLocation(e,this.xOpenField),a=this.getAdjustedXLocation(e,this.xField));var l=this.xAxis.getX(e,i,s),h=this.yAxis.getY(e,n,o),c=this.xAxis.getX(e,i,a),d=this.yAxis.getY(e,n,u);if(l=Xd(l,-1e5,1e5),h=Xd(h,-1e5,1e5),c=Xd(c,-1e5,1e5),d=Xd(d,-1e5,1e5),!this.noRisers&&t.length>1){var f=t[t.length-1];this.baseAxis==this.xAxis&&(r?t.push({x:f.x,y:d}):t.push({x:l,y:f.y})),this.baseAxis==this.yAxis&&(r?t.push({x:c,y:f.y}):t.push({x:f.x,y:h}))}var m={x:l,y:h},v={x:c,y:d};r?t.push(v,m):t.push(m,v)},e.prototype.drawSegment=function(t,e,i){var n=!1;this.yAxis==this.baseAxis&&(n=!0),t.drawSegment(e,i,this.tensionX,this.tensionY,this.noRisers,n)},e.prototype.createSegment=function(){return new hF},Object.defineProperty(e.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(t){this.setPropertyValue("noRisers",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e}(rj);Om.registeredClasses.StepLineSeries=dF,Om.registeredClasses.StepLineSeriesDataItem=cF;var fF=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumn",e}return Sd(e,t),e.prototype.createAssets=function(){this.radarColumn=this.createChild(yg),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.radarColumn&&this.radarColumn.copyFrom(e.radarColumn)},e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return Gd(t)?t:this.radarColumn.getTooltipX()},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipX");return Gd(t)?t:this.radarColumn.getTooltipY()},e}(Wj);Om.registeredClasses.RadarColumn=fF;var mF=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(qj),vF=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumnSeries",e.applyTheme(),e}return Sd(e,t),e.prototype.createColumnTemplate=function(){return new fF},e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.__disabled=!0),cm(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.__disabled=!0)})))},e.prototype.validateDataElementReal=function(t){var e,i,n,r,s=this,a=this.chart.startAngle,o=this.chart.endAngle,u=this.yField,l=this.yOpenField,h=this.xField,c=this.xOpenField,d=this.getStartLocation(t),f=this.getEndLocation(t),m=(o-a)/(this.dataItems.length*(this.end-this.start)),v=t.column;v||(v=this.columns.create(),t.column=v,am(this,v,Db),am(this.columns.template,v,Db),t.addSprite(v),v.paper=this.paper,this.setColumnStates(v));var p=v.width,b=100;p instanceof Id&&(b=p.percent);var g=Yd((f-d)*(1-b/100)/2,5);if(d+=g,f-=g,this.xAxis instanceof KA&&this.yAxis instanceof KA)n=of({x:this.yAxis.getX(t,u,0,"valueY"),y:this.yAxis.getY(t,u,0,"valueY")}),r=of({x:this.yAxis.getX(t,l,1,"valueY"),y:this.yAxis.getY(t,l,1,"valueY")}),e=this.xAxis.getAngle(t,c,0,"valueX"),i=this.xAxis.getAngle(t,h,1,"valueX"),a+=d*m,o-=(1-f)*m;else if(this.baseAxis==this.xAxis)n=of({x:this.yAxis.getX(t,u,t.locations[u],"valueY"),y:this.yAxis.getY(t,u,t.locations[u],"valueY")}),r=of({x:this.yAxis.getX(t,l,t.locations[l],"valueY"),y:this.yAxis.getY(t,l,t.locations[l],"valueY")}),e=this.xAxis.getAngle(t,c,d,"valueX"),i=this.xAxis.getAngle(t,h,f,"valueX"),a+=d*m,o-=(1-f)*m;else{if(n=of({x:this.yAxis.getX(t,u,d,"valueY"),y:this.yAxis.getY(t,u,d,"valueY")}),r=of({x:this.yAxis.getX(t,l,f,"valueY"),y:this.yAxis.getY(t,l,f,"valueY")}),Gd(p)){var y=Math.abs(n-r);if(y>p){var w=(y-p)/2;n+=w,r-=w}}e=this.xAxis.getAngle(t,h,t.locations[h],"valueX"),i=this.xAxis.getAngle(t,c,t.locations[c],"valueX")}if(i<e){var S=i;i=e,e=S}e=Xd(e,a,o),i=Xd(i,a,o);var x=v.radarColumn;x.startAngle=e;var C=i-e;C>0?(x.arc=C,x.radius=n,x.innerRadius=r,v.__disabled=!1,v.parent=this.columnsContainer,cm(this.axisRanges.iterator(),(function(i){var a=t.rangesColumns.getKey(i.uid);a||(a=s.columns.create(),function(t,e,i){kf(i,(function(i){e[i]=t[i]}))}(s.columns.template,a,Db),am(i.contents,a,Db),a.dataItem&&Af(a.dataItem.sprites,a),t.addSprite(a),a.paper=s.paper,s.setColumnStates(a),t.rangesColumns.setKey(i.uid,a));var o=a.radarColumn;o.startAngle=e,o.arc=C,o.radius=n,o.innerRadius=r,o.invalid&&(o.paper=s.paper,o.validate()),a.__disabled=!1,a.parent=i.contents}))):this.disableUnusedColumns(t)},e.prototype.getPoint=function(t,e,i,n,r,s,a){s||(s="valueX"),a||(a="valueY");var o=of({x:this.yAxis.getX(t,i,r,a),y:this.yAxis.getY(t,i,r,a)});0==o&&(o=1e-5);var u=this.xAxis.getAngle(t,e,n,s);return{x:o*ef(u),y:o*Qd(u)}},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return hg(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.positionBulletReal=function(t,e,i){var n=this.xAxis,r=this.yAxis;(e<n.start||e>n.end||i<r.start||i>r.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e},e}(Hj);Om.registeredClasses.RadarColumnSeries=vF,Om.registeredClasses.RadarColumnSeriesDataItem=mF;var pF=function(t){function e(){var e=t.call(this)||this;return e.slice=e.createChild(Pb),e.slice.shouldClone=!1,e.slice.setElement(e.paper.add("path")),e.slice.isMeasured=!1,e.orientation="vertical",e.bottomWidth=Ad(100),e.topWidth=Ad(100),e.isMeasured=!1,e.width=10,e.height=10,e.expandDistance=0,e.className="FunnelSlice",e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelPaddingTop,i=this.pixelPaddingBottom,n=this.pixelPaddingRight,r=this.pixelPaddingLeft,s=this.pixelWidth-n-r,a=this.pixelHeight-e-i,o=this.expandDistance,u="";if("vertical"==this.orientation){var l={x:(s-(b=rv(this.topWidth,s)))/2+r,y:e},h={x:(s+b)/2+r,y:e},c={x:(s+(g=rv(this.bottomWidth,s)))/2+r,y:e+a},d={x:(s-g)/2+r,y:e+a},f={x:h.x+(c.x-h.x)/2+o*a,y:h.y+.5*a},m={x:l.x+(d.x-l.x)/2-o*a,y:l.y+.5*a},v=ag(c),p=ag(l);0!=o&&(v=og(c,f),p=og(l,m)),u=sg(l)+ag(h)+v+ag(d)+p,this.tickPoint={x:h.x+(c.x-h.x)/2,y:h.y+(c.y-h.y)/2}}else{var b,g,y={x:r,y:(a-(b=rv(this.topWidth,a)))/2+e},w={x:r,y:(a+b)/2+e},S={x:r+s,y:(a-(g=rv(this.bottomWidth,a)))/2+e},x={x:r+s,y:(a+g)/2+e};f={y:y.y+(S.y-y.y)/2-o*s,x:y.x+.5*s},m={y:w.y+(x.y-w.y)/2+o*s,x:w.x+.5*s},v=ag(S),p=ag(w);0!=o&&(v=og(S,f),p=og(w,m)),u=sg(w)+ag(y)+v+ag(x)+p,this.tickPoint={y:w.y+(x.y-w.y)/2,x:w.x+(x.x-w.x)/2}}this.slice.path=u,this.invalidateLayout()},e.prototype.getPoint=function(t,e){var i=this.pixelPaddingTop,n=this.pixelPaddingBottom,r=this.pixelPaddingRight,s=this.pixelPaddingLeft,a=this.pixelWidth-r-s,o=this.pixelHeight-i-n;if("vertical"==this.orientation){var u={x:(a-(d=rv(this.topWidth,a)))/2+s,y:i},l={x:(a+d)/2+s,y:i},h={x:(a+(f=rv(this.bottomWidth,a)))/2+s,y:i+o},c=u.x+({x:(a-f)/2+s,y:i+o}.x-u.x)*e;return{x:c+(l.x+(h.x-l.x)*e-c)*t,y:l.y+(h.y-l.y)*e}}var d,f,m={x:s,y:(o-(d=rv(this.topWidth,o)))/2+i},v={x:s,y:(o+d)/2+i},p={x:s+a,y:(o-(f=rv(this.bottomWidth,o)))/2+i},b=m.y+(p.y-m.y)*t;return{y:b+(v.y+({x:s+a,y:(o+f)/2+i}.y-v.y)*t-b)*e,x:m.x+(p.x-m.x)*t}},Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(t){this.setPropertyValue("expandDistance",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slice&&this.slice.copyFrom(e.slice)},e}(Eb);Om.registeredClasses.FunnelSlice=pF;var bF=function(t){function e(){var e=t.call(this)||this;return e._label=new Vf,e._slice=new Vf,e.className="FunnelTick",e.element=e.paper.add("path"),e._disposers.push(e._label),e._disposers.push(e._slice),e.setPropertyValue("locationX",0),e.setPropertyValue("locationY",0),e.applyTheme(),e}return Sd(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,i=e.getPoint(this.locationX,this.locationY);if(i){var n=this.label,r=e.dataItem.component,s=void 0,a=void 0,o=void 0;if("vertical"==r.orientation){var u=n.pixelX,l=n.pixelY;r.labelsOpposite||(u+=n.maxRight),s=Av(i,e,this.parent),o=Av({x:u,y:l},n.parent,this.parent),a={x:n.parent.pixelX-this.length,y:o.y},r.labelsOpposite||(a.x=n.parent.measuredWidth+this.length)}else{u=n.pixelX,l=n.pixelY;r.labelsOpposite||(l+=n.maxBottom),s=Av(i,e,this.parent),a={x:(o=Av({x:u,y:l},n.parent,this.parent)).x,y:n.parent.pixelY-this.length},r.labelsOpposite||(a.y=n.parent.measuredHeight+this.length)}this.path=sg(s)+ag(a)+ag(o)}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new zf([t.events.on("transformed",this.invalidate,this,!1),t.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){this.setPropertyValue("locationX",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){this.setPropertyValue("locationY",t,!1,!0)},enumerable:!0,configurable:!0}),e}(LA);Om.registeredClasses.FunnelTick=bF;var gF=function(t){function e(){var e=t.call(this)||this;return e.className="FunnelSeriesDataItem",e.events.on("visibilitychanged",(function(){e.component&&e.component.invalidateDataItems()}),e,!1),e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"sliceLink",{get:function(){var t=this;if(!this._sliceLink){var e=this.component.sliceLinks.create();this._sliceLink=e,this._disposers.push(e),e.parent=this.component.slicesContainer,this._disposers.push(new _f((function(){t.component&&t.component.sliceLinks.removeValue(e)}))),this.addSprite(e),e.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),e}(pj),yF=function(t){function e(){var e=t.call(this)||this;return e._nextY=0,e.className="FunnelSeries",e.orientation="vertical",e.width=Ad(100),e.height=Ad(100),e.slicesContainer.width=Ad(100),e.slicesContainer.height=Ad(100),e._disposers.push(e.slicesContainer.events.on("maxsizechanged",e.invalidateDataItems,e,!1)),e.labelsOpposite=!0,e.labelsContainer.layout="absolute",e.bottomRatio=0,e.applyTheme(),e}return Sd(e,t),e.prototype.createSlice=function(){return new pF},e.prototype.createTick=function(){return new bF},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},e.prototype.createDataItem=function(){return new gF},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})",t.states.create("hover").properties.expandDistance=.2},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.verticalCenter="middle",e.horizontalCenter="middle",e.isMeasured=!0,e.padding(5,5,5,5)},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextY=0},e.prototype.validateDataElements=function(){var e=this,i=this.slicesContainer,n=this.labelsContainer,r=this.labels.template;this.alignLabels?(r.interactionsEnabled=!0,i.isMeasured=!0,n.isMeasured=!0):(r.interactionsEnabled=!1,i.isMeasured=!1,n.isMeasured=!1);var s=0,a=0;this.dataItems.each((function(t){Rd(t.value)&&(a++,t.value>0?s+=Math.abs(t.getWorkingValue("value")/t.value):e.ignoreZeroValues||!t.visible||t.__disabled||t.isHiding?a--:s+=1)})),this._total=1/a*s,this._count=a,t.prototype.validateDataElements.call(this),this.arrangeLabels()},e.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");if(e<this.dataItems.length-1){var n=this.dataItems.getIndex(e+1);if(i=n.getWorkingValue("value"),!n.visible||n.isHiding||n.__disabled||0==n.value&&this.ignoreZeroValues)return this.getNextValue(n)}return i},e.prototype.formDataElement=function(){},e.prototype.validateDataElement=function(e){var i=this,n=e.slice;n.orientation=this.orientation;var r=e.sliceLink;r.orientation=this.orientation;var s=e.tick,a=e.label;s.slice=n,s.label=a,Rd(e.value)?(this.decorateSlice(e),kf(e.sprites,(function(t){0==e.value&&i.ignoreZeroValues?t.__disabled=!0:t.__disabled=!1}))):kf(e.sprites,(function(t){t.__disabled=!0})),e.index==this.dataItems.length-1&&(r.disabled=!0),t.prototype.validateDataElement.call(this,e),r.fill=n.fill},e.prototype.decorateSlice=function(t){var e=t.slice,i=t.sliceLink,n=t.label,r=t.tick,s=this.slicesContainer.innerWidth,a=this.slicesContainer.innerHeight,o=this.getNextValue(t),u=Math.abs(t.getWorkingValue("value")),l=this.bottomRatio,h=1;if(0!=t.value?h=u/Math.abs(t.value):(t.__disabled||t.isHiding||!t.visible)&&(h=1e-6),this.ignoreZeroValues&&0==t.value)t.__disabled=!0;else if(t.__disabled=!1,this._nextY==1/0&&(this._nextY=0),"vertical"==this.orientation){var c=i.pixelHeight*h;a+=c,e.topWidth=u/this.dataItem.values.value.high*s,e.bottomWidth=(u-(u-o)*l)/this.dataItem.values.value.high*s,i.topWidth=e.bottomWidth,i.bottomWidth=(u-(u-o))/this.dataItem.values.value.high*s,e.y=this._nextY,e.height=Math.min(1e5,nf(0,a/this._count*h/this._total-c)),e.x=s/2,this.alignLabels?n.x=void 0:n.x=e.x,n.y=e.pixelY+e.pixelHeight*r.locationY,this._nextY+=e.pixelHeight+c,i.y=this._nextY-c,i.x=e.x}else{var d=i.pixelWidth*h;s+=d,e.topWidth=u/this.dataItem.values.value.high*a,e.bottomWidth=(u-(u-o)*l)/this.dataItem.values.value.high*a,i.topWidth=e.bottomWidth,i.bottomWidth=(u-(u-o))/this.dataItem.values.value.high*a,e.x=this._nextY,e.width=Math.min(1e5,s/this._count*h*1/this._total-d),e.y=a/2,this.alignLabels?n.y=this.labelsContainer.measuredHeight:n.y=e.y,n.x=e.pixelX+e.pixelWidth*r.locationX,this._nextY+=e.pixelWidth+d,i.x=this._nextY-d,i.y=e.y}},e.prototype.getLastLabel=function(t){if(t>0){var e=this.labels.getIndex(t);return e.__disabled||!e.visible?this.getLastLabel(t-1):e}},e.prototype.arrangeLabels=function(){if(this.alignLabels){var t=this.labels.length;if(t>1){var e=this.getLastLabel(t-1);if(e){var i=e.pixelY,n=e.pixelX;if(t>1){for(var r=t-2;r>=0;r--){(s=this.labels.getIndex(r)).visible&&!s.__disabled&&(s.invalid&&s.validate(),"vertical"==this.orientation?s.pixelY+s.measuredHeight>i&&(s.y=Math.min(1e6,i-s.measuredHeight)):s.pixelX+s.measuredWidth>n&&(s.x=Math.min(1e6,n-s.measuredWidth)),i=s.pixelY,n=s.pixelX)}i=0,n=0;for(r=0;r<t;r++){var s;(s=this.labels.getIndex(r)).visible&&!s.__disabled&&(s.invalid&&s.validate(),"vertical"==this.orientation?s.pixelY<i&&(s.y=Math.min(1e6,i)):s.pixelX<n&&(s.x=Math.min(1e6,n)),i+=s.measuredHeight,n+=s.measuredWidth)}}}}}},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem.slice,n=e.locationX;Gd(n)||(n=.5);var r=e.locationY;Gd(r)||(r=1),e.x=i.pixelX+i.measuredWidth*n,e.y=i.pixelY+i.measuredHeight*r},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),"vertical"==t?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(t){this.setPropertyValue("bottomRatio",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var t=new pF;t.applyOnClones=!0,t.fillOpacity=.5,t.expandDistance=-.3,t.hiddenState.properties.opacity=0,this._disposers.push(t),this._sliceLinks=new jm(t),this._disposers.push(new km(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var i=this,n=this.startIndex,r=this.endIndex,s=this.defaultState.transitionDuration;Gd(e)&&(s=e);var a=0;return cm(mm(this.dataItems.iterator()),(function(t){var e=t[0],o=t[1];i.sequencedInterpolation&&(a=i.sequencedInterpolationDelay*e+s*(e-n)/(r-n)),o.show(s,a,["value"])})),t.prototype.show.call(this,e)},e.prototype.hide=function(e){var i=this,n=["value"],r=this.startIndex,s=this.endIndex,a=0,o=this.hiddenState.transitionDuration;Gd(e)&&(o=e),cm(mm(this.dataItems.iterator()),(function(t){var e=t[0],u=t[1];i.sequencedInterpolation&&(a=i.sequencedInterpolationDelay*e+o*(e-r)/(s-r)),u.hide(o,a,0,n)}));var u=t.prototype.hide.call(this,e);return u&&!u.isFinished()&&u.delay(a),u},e.prototype.setAlignLabels=function(e){t.prototype.setAlignLabels.call(this,e),this.ticks.template.disabled=!e;var i=this.labelsContainer;i&&(e?(i.height=void 0,i.width=void 0,i.margin(10,10,10,10)):(i.width=Ad(100),i.height=Ad(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(e.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(t){this.setPropertyValue("labelsOpposite",t);var e=this.labels.template,i="none",n="none";this.alignLabels?t?(this.labelsContainer.toFront(),"vertical"==this.orientation?(this.ticks.template.locationX=1,e.horizontalCenter="left",i="right"):(this.ticks.template.locationY=1,e.horizontalCenter="right",n="bottom")):(this.labelsContainer.toBack(),"vertical"==this.orientation?(this.ticks.template.locationX=0,i="left"):(n="top",this.ticks.template.locationY=0)):"vertical"==this.orientation?i="center":n="middle",e.align=i,e.valign=n,this.validateLayout(),this.ticks.each((function(t){t.invalidate()})),this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(bj);Om.registeredClasses.FunnelSeries=yF,Om.registeredClasses.FunnelSeriesDataItem=gF;var wF=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(gF),SF=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeries",e.topWidth=Ad(0),e.bottomWidth=Ad(100),e.pyramidHeight=Ad(100),e.valueIs="area",e.sliceLinks.template.width=0,e.sliceLinks.template.height=0,e.applyTheme(),e}return Sd(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new wF},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextWidth=void 0},e.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");e<this.dataItems.length-1&&(i=this.dataItems.getIndex(e+1).getWorkingValue("value"));return 0==i&&(i=1e-6),i},e.prototype.validateDataElements=function(){var e=this,i=this.slicesContainer.innerWidth,n=this.slicesContainer.innerHeight;if(this.dataItems.each((function(t){if(t.value>0){var r=t.getWorkingValue("value")/t.value,s=t.sliceLink;"vertical"==e.orientation?n-=s.pixelHeight*r:i-=s.pixelWidth*r}})),this._pyramidHeight=rv(this.pyramidHeight,n),this._pyramidWidth=rv(this.pyramidHeight,i),"vertical"==this.orientation){var r=(n-this._pyramidHeight)/2;this.slicesContainer.y=r,this.labelsContainer.y=r,this.ticksContainer.y=r}else{var s=(i-this._pyramidWidth)/2;this.slicesContainer.x=s,this.labelsContainer.x=s,this.ticksContainer.x=s}t.prototype.validateDataElements.call(this)},e.prototype.decorateSlice=function(t){var e=this.dataItem.values.value.absoluteSum;if(0!=e){var i=t.slice,n=t.sliceLink,r=t.label,s=t.tick;this.getNextValue(t);var a=Math.abs(t.getWorkingValue("value")),o=this._pyramidWidth,u=this._pyramidHeight,l=this.slicesContainer.innerWidth,h=this.slicesContainer.innerHeight,c=n.pixelWidth,d=n.pixelHeight;if(0!=t.value&&null!=t.value||!this.ignoreZeroValues?t.__disabled=!1:t.__disabled=!0,"vertical"==this.orientation){var f=rv(this.topWidth,l);Gd(this._nextWidth)||(this._nextWidth=f);var m=rv(this.bottomWidth,l),v=this._nextWidth,p=Math.atan2(u,f-m);0==(S=Math.tan(Math.PI/2-p))&&(S=1e-8);var b=void 0,g=void 0;if("area"==this.valueIs){var y=(f+m)/2*u*a/e,w=Math.abs(v*v-2*y*S);g=(b=(v-Math.sqrt(w))/S)>0?(2*y-b*v)/b:v}else g=v-(b=u*a/e)*S;i.height=b,i.width=l,i.bottomWidth=g,i.topWidth=v,n.topWidth=i.bottomWidth,n.bottomWidth=i.bottomWidth,i.y=this._nextY,this.alignLabels?r.x=0:r.x=l/2,r.y=i.pixelY+i.pixelHeight*s.locationY+i.dy,this._nextY+=i.pixelHeight+d*a/Math.max(Math.abs(t.value),1e-8),n.y=this._nextY-d,n.x=l/2}else{f=rv(this.topWidth,h);Gd(this._nextWidth)||(this._nextWidth=f);var S;m=rv(this.bottomWidth,h),v=this._nextWidth,p=Math.atan2(o,f-m);0==(S=Math.tan(Math.PI/2-p))&&(S=1e-8);var x=void 0;g=void 0;if("area"==this.valueIs)g=(2*(y=(f+m)/2*o*a/e)-(x=(v-Math.sqrt(v*v-2*y*S))/S)*v)/x;else g=v-(x=o*a/e)*S;i.width=x,i.height=h,i.bottomWidth=g,i.topWidth=v,n.topWidth=i.bottomWidth,n.bottomWidth=i.bottomWidth,i.x=this._nextY,this.alignLabels?r.y=this.labelsContainer.measuredHeight:r.y=h/2,r.x=i.pixelX+i.pixelWidth*s.locationX+i.dx,this._nextY+=i.pixelWidth+c*a/Math.max(Math.abs(t.value),1e-8),n.x=this._nextY-c,n.y=h/2}this._nextWidth=i.bottomWidth}},Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(t){this.setPercentProperty("pyramidHeight",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(t){this.setPropertyValue("valueIs",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e}(yF);Om.registeredClasses.PyramidSeries=SF,Om.registeredClasses.PyramidSeriesDataItem=wF;var xF=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(wF),CF=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeries",e.topWidth=Ad(100),e.bottomWidth=Ad(100),e.valueIs="height",e.applyTheme(),e.startLocation=0,e.endLocation=1,e.align="center",e.valign="middle",e._maskSprite=e.slicesContainer.createChild(Pb),e._maskSprite.visible=!1,e._maskSprite.zIndex=100,e._maskSprite.shouldClone=!1,e}return Sd(e,t),e.prototype.validateDataElements=function(){var e=this.slicesContainer.maxWidth,i=this.slicesContainer.maxHeight,n=this._maskSprite,r=n.measuredWidth/n.scale,s=n.measuredHeight/n.scale,a=rf(i/s,e/r);a==1/0&&(a=1),a=nf(.001,a);var o,u,l=this.startLocation,h=this.endLocation,c=rf(e,r*a),d=rf(i,s*a);n.scale=a,"vertical"==this.orientation?(this.topWidth=c+4,this.bottomWidth=c+4,this.pyramidHeight=d*(h-l),n.x=e/2,n.y=d/2):(this.topWidth=d+4,this.bottomWidth=d+4,this.pyramidHeight=c*(h-l),n.valign="middle",n.x=c/2,n.y=i/2),n.verticalCenter="middle",n.horizontalCenter="middle",t.prototype.validateDataElements.call(this),"vertical"==this.orientation?("bottom"==this.valign&&(o=i-d),"middle"==this.valign&&(o=(i-d)/2),"top"==this.valign&&(o=0),"left"==this.align&&(u=-(e-c)/2),"center"==this.align&&(u=0),"right"==this.align&&(u=(e-c)/2),this.slices.template.dy=l*d,this.alignLabels&&(this.slicesContainer.dx=u)):("bottom"==this.valign&&(o=(i-d)/2),"middle"==this.valign&&(o=0),"top"==this.valign&&(o=-(i-d)/2),"left"==this.align&&(u=0),"center"==this.align&&(u=(e-c)/2),"right"==this.align&&(u=e-c),this.slices.template.dx=l*c,this.alignLabels&&(this.slicesContainer.dy=o)),this.slicesContainer.x=u,this.labelsContainer.x=u,this.ticksContainer.x=u,this.slicesContainer.y=o,this.labelsContainer.y=o,this.ticksContainer.y=o,c>0&&d>0&&(this.slicesContainer.mask=n)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),Rd(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new xF},Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),e.prototype.initSlice=function(e){t.prototype.initSlice.call(this,e);var i=e.states.getKey("hover");i&&(i.properties.expandDistance=0)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(SF);Om.registeredClasses.PictorialStackedSeries=CF,Om.registeredClasses.PictorialStackedSeriesDataItem=xF;var OF=function(t){function e(){var e=t.call(this)||this;return e.className="ConeColumn",e}return Sd(e,t),e.prototype.createAssets=function(){this.coneColumn=this.createChild(Kg),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.coneColumn&&this.coneColumn.copyFrom(e.coneColumn)},e}(Wj);Om.registeredClasses.ConeColumn=OF;var MF=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(qj),TF=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeries",e.applyTheme(),e}return Sd(e,t),e.prototype.createColumnTemplate=function(){return new OF},e.prototype.getMaskPath=function(){var t=0,e=0,i=this.columns.getIndex(0);if(i)return this.baseAxis==this.xAxis?e=i.coneColumn.innerWidth/2+1:t=i.coneColumn.innerHeight/2+1,fg({x:-t,y:0,width:this.xAxis.axisLength+t,height:this.yAxis.axisLength+e})},e.prototype.validateDataElementReal=function(e){if(t.prototype.validateDataElementReal.call(this,e),e.column){var i=e.column.coneColumn;i.fill=e.column.fill,this.baseAxis==this.yAxis?i.orientation="horizontal":i.orientation="vertical"}},e}(Hj);Om.registeredClasses.ConeSeries=TF,Om.registeredClasses.ConeSeriesDataItem=MF;var kF=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumn",e}return Sd(e,t),e.prototype.createAssets=function(){this.curvedColumn=this.createChild(Pb),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=Ad(120),this.height=Ad(120),this.column=this.curvedColumn},e.prototype.draw=function(){t.prototype.draw.call(this);var e,i=this.realWidth,n=this.realHeight,r=this.realX-this.pixelX,s=this.realY-this.pixelY;var a=1,o=1;"vertical"==this.orientation?(a=this.tension,e=[{x:0,y:n+s},{x:i/2,y:s},{x:i,y:n+s}]):(o=this.tension,e=[{x:r,y:n=Math.abs(n)},{x:r+i,y:n/2},{x:r,y:0}]);var u=sg(e[0])+new Dg(a,o).smooth(e);this.column.path=u},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.curvedColumn&&this.curvedColumn.copyFrom(e.curvedColumn)},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(Wj);Om.registeredClasses.CurvedColumn=kF;var IF=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeriesDataItem",e.applyTheme(),e}return Sd(e,t),e}(qj),AF=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeries",e.applyTheme(),e}return Sd(e,t),e.prototype.createColumnTemplate=function(){return new kF},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e);var i=e.column;(i=e.column)&&(e.column.curvedColumn.fill=e.column.fill,this.baseAxis==this.yAxis?i.orientation="horizontal":i.orientation="vertical")},e}(Hj);Om.registeredClasses.CurvedColumnSeries=AF,Om.registeredClasses.CurvedColumnSeriesDataItem=IF;var jF=function(t){function e(){var e=t.call(this)||this;e.className="CircleBullet";var i=e.createChild(Qb);return i.shouldClone=!1,i.radius=5,i.isMeasured=!1,e.circle=i,e.applyTheme(),e}return Sd(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.circle.copyFrom(e.circle)},e}(gA);Om.registeredClasses.CircleBullet=jF;var FF=function(t){function e(){var e=t.call(this)||this;return e.className="ErrorBullet",e.errorLine=e.createChild(Pb),e.errorLine.shouldClone=!1,e.width=20,e.height=20,e.strokeOpacity=1,e.isDynamic=!0,e}return Sd(e,t),e.prototype.validatePosition=function(){t.prototype.validatePosition.call(this);var e=this.pixelWidth/2,i=this.pixelHeight/2;this.errorLine.path=sg({x:-e,y:-i})+ag({x:e,y:-i})+sg({x:0,y:-i})+ag({x:0,y:i})+sg({x:-e,y:i})+ag({x:e,y:i})},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.errorLine.copyFrom(e.errorLine)},e}(gA);Om.registeredClasses.ErrorBullet=FF;var DF=function(t){function e(){var e=t.call(this)||this;return e.className="NavigationBarDataItem",e.applyTheme(),e}return Sd(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),e}(Kb),PF=function(t){function e(){var e=t.call(this)||this;e.className="NavigationBar";var i=new Dp,n=new Tg;n.valign="middle",n.paddingTop=8,n.paddingBottom=8,e.paddingBottom=2,e.links=new jm(n),e._disposers.push(new km(e.links)),e._disposers.push(n),e._linksIterator=new pm(e.links,(function(){return e.links.create()})),e._linksIterator.createNewItems=!0;var r=new Fg;r.direction="right",r.width=8,r.height=12,r.fill=i.getFor("alternativeBackground"),r.fillOpacity=.5,r.valign="middle",r.marginLeft=10,r.marginRight=10,e.separators=new jm(r),e._disposers.push(new km(e.separators)),e._disposers.push(r);var s=new Tg;return e.activeLink=s,s.copyFrom(n),s.valign="middle",s.fontWeight="bold",e.width=Ad(100),e.layout="grid",e.dataFields.name="name",e.applyTheme(),e}return Sd(e,t),e.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),t.prototype.validateDataElements.call(this)},e.prototype.validateDataElement=function(e){var i;if(t.prototype.validateDataElement.call(this,e),e.index<this.dataItems.length-1){(i=this._linksIterator.getLast()).parent=this;var n=this.separators.create();n.parent=this,n.valign="middle"}else(i=this.activeLink).events.copyFrom(this.links.template.events),i.hide(0),i.show(),i.parent=this;i.dataItem=e,i.text=e.name,i.validate()},e}(Jb);Om.registeredClasses.NavigationBar=PF,Om.registeredClasses.NavigationBarDataItem=DF;var LF=function(t){function e(){var e=t.call(this)||this;e.point={x:0,y:0},e._stick="none",e.className="Cursor",e.width=Ad(100),e.height=Ad(100),e.shouldClone=!1,e.hide(0),e.trackable=!0,e.clickable=!0,e.isMeasured=!1;var i=Yp();return e._disposers.push(i.body.events.on("down",e.handleCursorDown,e)),e._disposers.push(i.body.events.on("up",e.handleCursorUp,e)),e._disposers.push(i.body.events.on("track",e.handleCursorMove,e)),e.applyTheme(),e}return Sd(e,t),e.prototype.handleCursorMove=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)){if(("zoom"==this._generalBehavior||"pan"==this._generalBehavior)&&this.downPoint||Yp().isLocalElement(t.pointer,this.paper.svg,this.uid)){var e=Pv(t.pointer.point,this);return"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),"soft"==this._stick&&this._stickPoint&&(this.fitsToBounds(e)||(e=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.triggerMove(e),e}this.isHidden&&this.isHiding||this.hide()}},e.prototype.hideReal=function(e){if("hard"!=this._stick&&"soft"!=this._stick||!this._stickPoint)return t.prototype.hideReal.call(this,e)},e.prototype.triggerMove=function(t,e,i){t.x=Yd(t.x,1),t.y=Yd(t.y,1),e&&(this._stick=e),"hard"!=e&&"soft"!=e||(this._stickPoint=t),this.triggerMoveReal(t,i)},e.prototype.triggerMoveReal=function(t,e){(this.point.x!=t.x||this.point.y!=t.y||e)&&(this.point=t,this.invalidatePosition(),this.fitsToBounds(t)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},e.prototype.triggerDown=function(t){this.triggerDownReal(t)},e.prototype.triggerDownReal=function(t){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),Yp().setGlobalStyle(fb.grabbing)}},e.prototype.triggerUp=function(t){this.triggerUpReal(t)},e.prototype.triggerUpReal=function(t){Rb.requestFrame(),this.updatePoint(this.upPoint);var e=Yp();if(of(this._upPointOrig,this._downPointOrig)>e.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),e.setGlobalStyle(fb.default)}this.downPoint=void 0,this.updateSelection()}},e.prototype.updateSelection=function(){},e.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},e.prototype.handleCursorDown=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)&&Yp().isLocalElement(t.pointer,this.paper.svg,this.uid)){Sp();var e=Pv(t.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.fitsToBounds(e)&&(this._downPointOrig={x:e.x,y:e.y},t.event.cancelable&&this.shouldPreventGestures(t.touch)&&this.fitsToBounds(e)&&t.event.preventDefault(),this.triggerMove(e),this.triggerDown(e))}},e.prototype.shouldPreventGestures=function(t){return!0},e.prototype.updatePoint=function(t){},e.prototype.handleCursorUp=function(t){if(this.interactionsEnabled&&(this.downPoint||Yp().isLocalElement(t.pointer,this.paper.svg,this.uid))){var e=Pv(t.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",e),this.downPoint&&this.fitsToBounds(this.downPoint)&&("hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._upPointOrig={x:e.x,y:e.y},this.triggerMove(e),this.triggerUp(e))}},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t,Rd(this._chart.plotContainer)&&Yp().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),e}(Eb);Om.registeredClasses.Cursor=LF;var EF=function(t){function e(){var e=t.call(this)||this;e._lineX=new Vf,e._lineY=new Vf,e._xAxis=new Vf,e._yAxis=new Vf,e._snapToDisposers=[],e.className="XYCursor",e.behavior="zoomX",e.maxPanOut=.1;var i=new Dp;e.snapOnPan=!0;var n=e.createChild(Pb);n.shouldClone=!1,n.fillOpacity=.2,n.fill=i.getFor("alternativeBackground"),n.isMeasured=!1,n.visible=!1,n.interactionsEnabled=!1,e.selection=n,e._disposers.push(e.selection);var r=e.createChild(Pb);r.shouldClone=!1,r.stroke=i.getFor("grid"),r.fill=Ym(),r.strokeDasharray="3,3",r.isMeasured=!1,r.strokeOpacity=.4,r.interactionsEnabled=!1,r.y=0,e.lineX=r,e._disposers.push(e.lineX);var s=e.createChild(Pb);return s.shouldClone=!1,s.stroke=i.getFor("grid"),s.fill=Ym(),s.strokeDasharray="3,3",s.isMeasured=!1,s.strokeOpacity=.4,s.interactionsEnabled=!1,s.x=0,e.lineY=s,e._disposers.push(e.lineY),e.events.on("sizechanged",e.updateSize,e,!1),e._disposers.push(e._lineX),e._disposers.push(e._lineY),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.mask=e,e.hideSeriesTooltipsOnSelection=!0,e.applyTheme(),e}return Sd(e,t),e.prototype.updateSize=function(){this.lineX&&(this.lineX.path=sg({x:0,y:0})+ag({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=sg({x:0,y:0})+ag({x:this.innerWidth,y:0}))},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint,e=this.behavior;if(t){var i=this.point;this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY);var n=this.selection,r=Math.min(i.x,t.x),s=Math.min(i.y,t.y),a=Yd(Math.abs(t.x-i.x),this._positionPrecision),o=Yd(Math.abs(t.y-i.y),this._positionPrecision);switch(e){case"zoomX":case"selectX":s=0,o=this.pixelHeight;break;case"zoomY":case"selectY":r=0,a=this.pixelWidth}n.x=r,n.y=s,n.path=dg(a,o),n.validatePosition()}else"select"!=this._generalBehavior&&this.selection.hide()}},e.prototype.fixPoint=function(t){return t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),t.x=Math.min(this.pixelWidth,t.x),t.y=Math.min(this.pixelHeight,t.y),t},e.prototype.triggerMoveReal=function(e,i){t.prototype.triggerMoveReal.call(this,e,i);var n=this.snapToSeries;if(n&&!this.downPoint)if(n instanceof YA)n.isHidden&&this.updateLinePositions(e);else{var r=!0;kf(n,(function(t){t.isHidden||(r=!1)})),r&&this.updateLinePositions(e)}else this.updateLinePositions(e);this.downPoint&&of(this.downPoint,e)>3&&"pan"==this._generalBehavior&&(this.getPanningRanges(),this.dispatch("panning"))},e.prototype.updateLinePositions=function(t){t=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=t.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=t.y),this.updateSelection()},e.prototype.triggerDownReal=function(e){if(this.visible&&!this.isHiding)if("select"==this._generalBehavior&&(this.selection.parent=this.parent),this.fitsToBounds(e)){this.downPoint={x:e.x,y:e.y},this.updatePoint(e),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var i=this.selection,n=this.downPoint.x,r=this.downPoint.y;this._usesSelection&&(i.x=n,i.y=r,i.path="",i.show()),t.prototype.triggerDownReal.call(this,e)}else this.downPoint=void 0;else this.downPoint=void 0},e.prototype.updatePoint=function(t){this.lineX&&(t.x=this.lineX.pixelX),this.lineY&&(t.y=this.lineY.pixelY)},e.prototype.triggerUpReal=function(e){if(this.hasMoved())this.downPoint&&(this.upPoint=e,this.updatePoint(this.upPoint),"pan"!=this._generalBehavior&&this.getRanges(),"select"!=this._generalBehavior&&this.selection.hide(),t.prototype.triggerUpReal.call(this,e));else{if("select"!=this._generalBehavior?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),"pan"==this._generalBehavior)Yp().setGlobalStyle(fb.default);this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},e.prototype.hasMoved=function(){var t,e,i;return"zoomX"==this.behavior||"panX"==this.behavior?(e=this._upPointOrig,i=this._downPointOrig,t=e?(i||(i={x:0,y:0}),Math.abs(e.x-i.x)):0):t="zoomY"==this.behavior||"panY"==this.behavior?function(t,e){return t?(e||(e={x:0,y:0}),Math.abs(t.y-e.y)):0}(this._upPointOrig,this._downPointOrig):of(this._upPointOrig,this._downPointOrig),t>Yp().getHitOption(this.interactions,"hitTolerance")},e.prototype.getPanningRanges=function(){var t=Yd(this.downPoint.x/this.innerWidth,5),e=1-Yd(this.downPoint.y/this.innerHeight,5),i=t-Yd(this.point.x/this.innerWidth,5),n=e-(1-Yd(this.point.y/this.innerHeight,5));this.xRange={start:i,end:1+i},this.yRange={start:n,end:1+n},"panX"==this.behavior&&(this.yRange.start=0,this.yRange.end=1),"panY"==this.behavior&&(this.xRange.start=0,this.xRange.end=1)},e.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),this.selection;var t=Yd(this.downPoint.x/this.innerWidth,5),e=Yd(this.upPoint.x/this.innerWidth,5),i=1-Yd(this.downPoint.y/this.innerHeight,5),n=1-Yd(this.upPoint.y/this.innerHeight,5);this.xRange={start:rf(t,e),end:nf(t,e)},this.yRange={start:rf(i,n),end:nf(i,n)}},Object.defineProperty(e.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(t){this.setPropertyValue("behavior",t,!0),this._usesSelection=!1,-1!=t.indexOf("zoom")&&(this._generalBehavior="zoom",this._usesSelection=!0),-1!=t.indexOf("select")&&(this._generalBehavior="select",this._usesSelection=!0),-1!=t.indexOf("pan")&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),e.prototype.shouldPreventGestures=function(t){return!(this.interactions.isTouchProtected&&t||"none"==this.behavior)},Object.defineProperty(e.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(t){this.setPropertyValue("fullWidthLineX",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(t){this.setPropertyValue("fullWidthLineY",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(t){this.setPropertyValue("hideSeriesTooltipsOnSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(t){this.setPropertyValue("maxTooltipDistance",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(t){var e=this;this._xAxis.get()!=t&&this._xAxis.set(t,new zf([t.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.preventShow=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.preventShow=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(t){var e=this;this._yAxis.get()!=t&&this._yAxis.set(t,new zf([t.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.__disabled=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.__disabled=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),e.prototype.handleXTooltipPosition=function(t){var e=this.xAxis.tooltip,i=kv({x:e.pixelX,y:e.pixelY},this),n=i.x;if(i.y=1,this.lineX&&(this.lineX.x=n,this.fitsToBounds(i)||this.hide()),this.xAxis&&this.fullWidthLineX){var r=this.xAxis.currentItemStartPoint,s=this.xAxis.currentItemEndPoint;if(r&&s){this.lineX.x=n;var a=s.x-r.x;this.lineX.path=dg(a,this.innerHeight,-a/2)}}},e.prototype.handleYTooltipPosition=function(t){var e=this.yAxis.tooltip,i=kv({x:e.pixelX,y:e.pixelY},this),n=i.y;if(i.x=1,this.lineY&&(this.lineY.y=n,this.fitsToBounds(i)||this.hide()),this.yAxis&&this.fullWidthLineY){var r=this.yAxis.currentItemStartPoint,s=this.yAxis.currentItemEndPoint;if(r&&s){this.lineY.y=n;var a=s.y-r.y;this.lineY.path=dg(this.innerWidth,a,0,-a/2)}}},Object.defineProperty(e.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineX.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.interactionsEnabled=!1,t.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineY.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.parent=this,t.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection=t,t&&(t.element=this.paper.add("path"),t.parent=this)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var i=this;if(e&&(Rd(e.xAxis)&&Vd(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.xAxis+'" found for `xAxis`'),delete e.xAxis)),Rd(e.yAxis)&&Vd(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.yAxis+'" found for `yAxis`'),delete e.yAxis)),Rd(e.snapToSeries))){var n=Wd(e.snapToSeries)?e.snapToSeries:[e.snapToSeries],r=!1;kf(n,(function(t,e){Vd(t)&&(i.map.hasKey(t)?n[e]=i.map.getKey(t):(i.processingErrors.push('[XYCursor] No series with id "'+t+'" found for `series`'),r=!0))})),r?delete e.snapToSeries:e.snapToSeries=n}t.prototype.processConfig.call(this,e)},Object.defineProperty(e.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(t){var e=this;this.setPropertyValue("snapToSeries",t)&&(t instanceof YA&&(t=[t]),this._snapToDisposers&&kf(this._snapToDisposers,(function(t){t.dispose()})),this._snapToDisposers=[],t&&kf(t,(function(t){e._snapToDisposers.push(t.events.on("tooltipshownat",(function(){e.handleSnap(t)}),void 0,!1))})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(t){this.setPropertyValue("snapOnPan",t)},enumerable:!0,configurable:!0}),e.prototype.handleSnap=function(t){if(!this.downPoint){var e=t.getTooltipX()+t.xAxis.pixelX,i=t.getTooltipY()+t.yAxis.pixelY,n=t.xAxis,r=t.yAxis;n&&n.renderer.opposite&&(i-=this.pixelHeight),this.point={x:e,y:i},this.getPositions();var s=e,a=i;e-=this.pixelWidth,r&&r.renderer.opposite&&(e+=this.pixelWidth);var o=t.tooltip,u=o.animationDuration,l=o.animationEasing;n instanceof VA&&!(n instanceof WA)&&r instanceof VA&&!(r instanceof WA)?(t.yAxis.showTooltipAtPosition(this.yPosition),t.xAxis.showTooltipAtPosition(this.xPosition)):(t.baseAxis==t.xAxis&&t.yAxis.showTooltipAtPosition(this.yPosition),t.baseAxis==t.yAxis&&t.xAxis.showTooltipAtPosition(this.xPosition)),this.lineY.x=e,this.lineX.y=i,this.xAxis||this.lineX.animate([{property:"x",to:s}],u,l),this.yAxis||this.lineY.animate([{property:"y",to:a}],u,l)}},e.prototype.dispose=function(){this.hide(0),t.prototype.dispose.call(this)},e}(LF);Om.registeredClasses.XYCursor=EF;var NF=function(t){function e(){var e=t.call(this)||this;return e.className="RadarCursor",e.radius=Ad(100),e.innerRadius=Ad(0),e.applyTheme(),e.mask=void 0,e}return Sd(e,t),e.prototype.fitsToBounds=function(t){var e=of(t);return e<this.truePixelRadius+1&&e>this.pixelInnerRadius-1},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.triggerMoveReal=function(e,i){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),t.prototype.triggerMoveReal.call(this,e,i)},e.prototype.updateLineX=function(t){var e=this.pixelRadius,i=this.startAngle,n=this.endAngle,r=this.pixelInnerRadius;if(e>0&&Gd(i)&&Gd(n)&&Gd(r)){var s=wf(cf(t),i,n),a=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var o=this.xAxis.currentItemStartPoint,u=this.xAxis.currentItemEndPoint;if(o&&u){var l=wf(cf(o),i,n),h=wf(cf(u),i,n)-l;i<n?h<0&&(h+=360):h>0&&(h-=360),a=sg({x:r*ef(s-=h/2),y:r*Qd(s)})+ag({x:e*ef(s),y:e*Qd(s)})+lg(s,h,e)+ag({x:r*ef(s+h),y:r*Qd(s+h)})+lg(s+h,-h,r)}}a||(a=sg({x:r*ef(s),y:r*Qd(s)})+ag({x:e*ef(s),y:e*Qd(s)})),this.lineX.path=a}}},e.prototype.updateLineY=function(t){if(this.lineY&&this.lineY.visible){var e=this.startAngle,i=this.endAngle,n=this.truePixelRadius,r=Xd(of(t),0,this.truePixelRadius);if(Gd(r)&&Gd(e)){this.lineY.moveTo({x:0,y:0});var s=void 0,a=i-e;if(this.yAxis&&this.fullWidthLineY){var o=this.yAxis.currentItemStartPoint,u=this.yAxis.currentItemEndPoint;if(o&&u){var l=Xd(of(o),0,n);s=sg({x:(r=Xd(of(u),0,n))*ef(e),y:r*Qd(e)})+lg(e,a,r),s+=sg({x:l*ef(i),y:l*Qd(i)})+lg(i,-a,l)}}s||(s=sg({x:r*ef(e),y:r*Qd(e)})+lg(e,i-e,r)),this.lineY.path=s}}},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint;if(t){var e=this.point,i=this.pixelRadius,n=this.truePixelRadius,r=this.pixelInnerRadius,s=Math.min(this.startAngle,this.endAngle),a=Math.max(this.startAngle,this.endAngle),o=wf(cf(t),s,a),u=wf(cf(e),s,a),l=of(t);if(l<n){var h=Xd(of(e),0,n);this._prevAngle=u;var c=sg({x:0,y:0}),d=Qd(o),f=ef(o),m=Qd(u),v=ef(u),p=this.behavior;"zoomX"==p||"selectX"==p?c+=ag({x:i*f,y:i*d})+lg(o,u-o,i)+ag({x:r*v,y:r*m})+lg(u,o-u,r):"zoomY"==p||"selectY"==p?c=sg({x:h*ef(s),y:h*Qd(s)})+lg(s,a-s,h)+ag({x:l*ef(a),y:l*Qd(a)})+lg(a,s-a,l)+" Z":"zoomXY"==p&&(c=sg({x:h*ef(o),y:h*Qd(o)})+lg(o,u-o,h)+ag({x:l*ef(u),y:l*Qd(u)})+lg(u,o-u,l)+" Z"),this.selection.path=c}this.selection.moveTo({x:0,y:0})}}},e.prototype.getPositions=function(){if(this.chart){var t=this.pixelInnerRadius,e=this.truePixelRadius-t,i=this.startAngle,n=this.endAngle,r=(wf(cf(this.point),i,n)-i)/(n-i);this.xPosition=r,this.yPosition=Xd((of(this.point)-t)/e,0,1)}},e.prototype.updatePoint=function(t){},e.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var e=this.xAxis.tooltip;this.updateLineX(kv({x:e.pixelX,y:e.pixelY},this))}},e.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var e=this.yAxis.tooltip;this.updateLineY(kv({x:e.pixelX,y:e.pixelY},this))}},e.prototype.updateLinePositions=function(t){},e.prototype.getRanges=function(){var t=this.downPoint;if(t){var e=this.upPoint;if(this.chart){var i=this.pixelRadius,n=this.startAngle,r=this.endAngle,s=wf(cf(t),this.startAngle,this.endAngle),a=wf(cf(e),this.startAngle,this.endAngle),o=Xd(of(t),0,i),u=Xd(of(e),0,i),l=0,h=1,c=0,d=1,f=this.behavior;if("zoomX"==f||"selectX"==f||"zoomXY"==f||"selectXY"==f){var m=r-n;l=Yd((s-n)/m,5),h=Yd((a-n)/m,5)}"zoomY"!=f&&"selectY"!=f&&"zoomXY"!=f&&"selectXY"!=f||(c=Yd(o/i,5),d=Yd(u/i,5)),this.xRange={start:Math.min(l,h),end:Math.max(l,h)},this.yRange={start:Math.min(c,d),end:Math.max(c,d)},"selectX"==this.behavior||"selectY"==this.behavior||"selectXY"==this.behavior||this.selection.hide()}}},e.prototype.updateSize=function(){},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return sv(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truePixelRadius",{get:function(){return rv(Ad(100),rf(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){var t=this.innerRadius;return t instanceof Id&&(t=Ad(100*t.value*this.chart.innerRadiusModifyer)),sv(t,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),e.prototype.fixPoint=function(t){return t},e}(EF);Om.registeredClasses.RadarCursor=NF;var RF=function(t){Mm(t,"SpriteState")&&(t.transitionDuration=400),Mm(t,"Component")&&(t.rangeChangeDuration=500,t.interpolationDuration=500,t.sequencedInterpolation=!1,Mm(t,"SankeyDiagram")&&(t.sequencedInterpolation=!0),Mm(t,"FunnelSeries")&&(t.sequencedInterpolation=!0)),Mm(t,"Chart")&&(t.defaultState.transitionDuration=2e3,t.hiddenState.transitionDuration=1e3),Mm(t,"Tooltip")&&(t.animationDuration=400,t.defaultState.transitionDuration=400,t.hiddenState.transitionDuration=400),Mm(t,"Scrollbar")&&(t.animationDuration=500),Mm(t,"Series")&&(t.defaultState.transitionDuration=1e3,t.hiddenState.transitionDuration=700,t.hiddenState.properties.opacity=1,t.showOnInit=!0),Mm(t,"MapSeries")&&(t.hiddenState.properties.opacity=0),Mm(t,"PercentSeries")&&(t.hiddenState.properties.opacity=0),Mm(t,"FunnelSlice")&&(t.defaultState.transitionDuration=800,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),Mm(t,"Slice")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),Mm(t,"Preloader")&&(t.hiddenState.transitionDuration=2e3),Mm(t,"Column")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),Mm(t,"Column3D")&&(t.hiddenState.properties.opacity=0)};const BF="esriFieldTypeDouble",_F="count",zF="sum",VF="min",GF="max",$F="avg",WF="stddev",qF="var",HF="percentile_cont",UF="percentile_disc",KF="envelope-aggregate",JF="no_aggregation",YF="esriSLSDash",ZF="esriSLSDashDot",XF="esriSLSDashDotDot",QF="esriSLSDot",tD="esriSLSNull",eD="esriSLSSolid",iD="esriSMSCircle",nD="esriSMSCross",rD="esriSMSDiamond",sD="esriSMSSquare",aD="esriSMSX",oD="esriSMSTriangle",uD="esriSFSBackwardDiagonal",lD="esriSFSCross",hD="esriSFSDiagonalCross",cD="esriSFSForwardDiagonal",dD="esriSFSHorizontal",fD="esriSFSVertical",mD="left",vD="right",pD="center",bD="justify",gD="baseline",yD="top",wD="middle",SD="bottom",xD="esriSLS",CD="esriSMS",OD="esriSFS",MD="esriTS",TD="unique-value",kD="simple",ID="pie-chart",AD="chartText",jD="chartOverlay",FD="category",DD="number",PD="date",LD="chartGuide",ED="scatterSeries",ND="pieSeries",RD="gaugeSeries",BD="lineSeries",_D="barSeries",zD="histogramSeries",VD="comboLineAndBarSeries",GD="none",$D="logarithmic",WD="squareRoot",qD="colorMatch",HD="left",UD="right",KD="top",JD="bottom",YD="sideBySide",ZD="stacked",XD="stacked100",QD={Ascending:"ASC",Descending:"DESC"},tP="inline",eP="layer",iP={statisticType:_F,sortingOrder:QD.Ascending},nP="bezier",rP="monotoneX",sP="monotoneY",aP="esriTimeUnitsSeconds",oP="esriTimeUnitsMinutes",uP="esriTimeUnitsHours",lP="esriTimeUnitsDays",hP="esriTimeUnitsWeeks",cP="esriTimeUnitsMonths",dP="esriTimeUnitsYears",fP="null",mP="zero",vP="interpolate",pP="equalIntervalsFromEndTime",bP="none",gP="rotate",yP="stagger",wP="wrap",SP="value",xP="date",CP="category",OP="linear",MP="logarithmic",TP="originalValue",kP="arcgis_charts_pie_from_fields_name",IP="arcgis_charts_pie_from_fields_value";var AP="object"==typeof global&&global&&global.Object===Object&&global,jP="object"==typeof self&&self&&self.Object===Object&&self,FP=AP||jP||Function("return this")(),DP=FP.Symbol,PP=Object.prototype,LP=PP.hasOwnProperty,EP=PP.toString,NP=DP?DP.toStringTag:void 0;var RP=Object.prototype.toString;var BP=DP?DP.toStringTag:void 0;function _P(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":BP&&BP in Object(t)?function(t){var e=LP.call(t,NP),i=t[NP];try{t[NP]=void 0;var n=!0}catch(t){}var r=EP.call(t);return n&&(e?t[NP]=i:delete t[NP]),r}(t):function(t){return RP.call(t)}(t)}function zP(t){return null!=t&&"object"==typeof t}function VP(t){return"symbol"==typeof t||zP(t)&&"[object Symbol]"==_P(t)}function GP(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}var $P=Array.isArray,WP=DP?DP.prototype:void 0,qP=WP?WP.toString:void 0;function HP(t){if("string"==typeof t)return t;if($P(t))return GP(t,HP)+"";if(VP(t))return qP?qP.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var UP=/\s/;var KP=/^\s+/;function JP(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&UP.test(t.charAt(e)););return e}(t)+1).replace(KP,""):t}function YP(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var ZP=/^[-+]0x[0-9a-f]+$/i,XP=/^0b[01]+$/i,QP=/^0o[0-7]+$/i,tL=parseInt;function eL(t){if("number"==typeof t)return t;if(VP(t))return NaN;if(YP(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=YP(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=JP(t);var i=XP.test(t);return i||QP.test(t)?tL(t.slice(2),i?2:8):ZP.test(t)?NaN:+t}function iL(t){return t}function nL(t){if(!YP(t))return!1;var e=_P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var rL,sL=FP["__core-js_shared__"],aL=(rL=/[^.]+$/.exec(sL&&sL.keys&&sL.keys.IE_PROTO||""))?"Symbol(src)_1."+rL:"";var oL=Function.prototype.toString;function uL(t){if(null!=t){try{return oL.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var lL=/^\[object .+?Constructor\]$/,hL=Function.prototype,cL=Object.prototype,dL=hL.toString,fL=cL.hasOwnProperty,mL=RegExp("^"+dL.call(fL).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vL(t){return!(!YP(t)||(e=t,aL&&aL in e))&&(nL(t)?mL:lL).test(uL(t));var e}function pL(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return vL(i)?i:void 0}var bL=pL(FP,"WeakMap"),gL=Object.create,yL=function(){function t(){}return function(e){if(!YP(e))return{};if(gL)return gL(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function wL(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var SL=Date.now;var xL,CL,OL,ML=function(){try{var t=pL(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),TL=ML,kL=TL?function(t,e){return TL(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:iL,IL=(xL=kL,CL=0,OL=0,function(){var t=SL(),e=16-(t-OL);if(OL=t,e>0){if(++CL>=800)return arguments[0]}else CL=0;return xL.apply(void 0,arguments)});var AL=/^(?:0|[1-9]\d*)$/;function jL(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&AL.test(t))&&t>-1&&t%1==0&&t<e}function FL(t,e,i){"__proto__"==e&&TL?TL(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function DL(t,e){return t===e||t!=t&&e!=e}var PL=Object.prototype.hasOwnProperty;function LL(t,e,i){var n=t[e];PL.call(t,e)&&DL(n,i)&&(void 0!==i||e in t)||FL(t,e,i)}function EL(t,e,i,n){var r=!i;i||(i={});for(var s=-1,a=e.length;++s<a;){var o=e[s],u=n?n(i[o],t[o],o,i,t):void 0;void 0===u&&(u=t[o]),r?FL(i,o,u):LL(i,o,u)}return i}var NL=Math.max;function RL(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function BL(t){return null!=t&&RL(t.length)&&!nL(t)}function _L(t,e,i){if(!YP(i))return!1;var n=typeof e;return!!("number"==n?BL(i)&&jL(e,i.length):"string"==n&&e in i)&&DL(i[e],t)}var zL=Object.prototype;function VL(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||zL)}function GL(t){return zP(t)&&"[object Arguments]"==_P(t)}var $L=Object.prototype,WL=$L.hasOwnProperty,qL=$L.propertyIsEnumerable,HL=GL(function(){return arguments}())?GL:function(t){return zP(t)&&WL.call(t,"callee")&&!qL.call(t,"callee")};var UL="object"==typeof exports&&exports&&!exports.nodeType&&exports,KL=UL&&"object"==typeof module&&module&&!module.nodeType&&module,JL=KL&&KL.exports===UL?FP.Buffer:void 0,YL=(JL?JL.isBuffer:void 0)||function(){return!1},ZL={};function XL(t){return function(e){return t(e)}}ZL["[object Float32Array]"]=ZL["[object Float64Array]"]=ZL["[object Int8Array]"]=ZL["[object Int16Array]"]=ZL["[object Int32Array]"]=ZL["[object Uint8Array]"]=ZL["[object Uint8ClampedArray]"]=ZL["[object Uint16Array]"]=ZL["[object Uint32Array]"]=!0,ZL["[object Arguments]"]=ZL["[object Array]"]=ZL["[object ArrayBuffer]"]=ZL["[object Boolean]"]=ZL["[object DataView]"]=ZL["[object Date]"]=ZL["[object Error]"]=ZL["[object Function]"]=ZL["[object Map]"]=ZL["[object Number]"]=ZL["[object Object]"]=ZL["[object RegExp]"]=ZL["[object Set]"]=ZL["[object String]"]=ZL["[object WeakMap]"]=!1;var QL="object"==typeof exports&&exports&&!exports.nodeType&&exports,tE=QL&&"object"==typeof module&&module&&!module.nodeType&&module,eE=tE&&tE.exports===QL&&AP.process,iE=function(){try{var t=tE&&tE.require&&tE.require("util").types;return t||eE&&eE.binding&&eE.binding("util")}catch(t){}}(),nE=iE&&iE.isTypedArray,rE=nE?XL(nE):function(t){return zP(t)&&RL(t.length)&&!!ZL[_P(t)]},sE=Object.prototype.hasOwnProperty;function aE(t,e){var i=$P(t),n=!i&&HL(t),r=!i&&!n&&YL(t),s=!i&&!n&&!r&&rE(t),a=i||n||r||s,o=a?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],u=o.length;for(var l in t)!e&&!sE.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||jL(l,u))||o.push(l);return o}function oE(t,e){return function(i){return t(e(i))}}var uE=oE(Object.keys,Object),lE=Object.prototype.hasOwnProperty;function hE(t){if(!VL(t))return uE(t);var e=[];for(var i in Object(t))lE.call(t,i)&&"constructor"!=i&&e.push(i);return e}function cE(t){return BL(t)?aE(t):hE(t)}var dE=Object.prototype.hasOwnProperty;function fE(t){if(!YP(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=VL(t),i=[];for(var n in t)("constructor"!=n||!e&&dE.call(t,n))&&i.push(n);return i}function mE(t){return BL(t)?aE(t,!0):fE(t)}var vE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pE=/^\w*$/;function bE(t,e){if($P(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!VP(t))||(pE.test(t)||!vE.test(t)||null!=e&&t in Object(e))}var gE=pL(Object,"create");var yE=Object.prototype.hasOwnProperty;var wE=Object.prototype.hasOwnProperty;function SE(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function xE(t,e){for(var i=t.length;i--;)if(DL(t[i][0],e))return i;return-1}SE.prototype.clear=function(){this.__data__=gE?gE(null):{},this.size=0},SE.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},SE.prototype.get=function(t){var e=this.__data__;if(gE){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return yE.call(e,t)?e[t]:void 0},SE.prototype.has=function(t){var e=this.__data__;return gE?void 0!==e[t]:wE.call(e,t)},SE.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=gE&&void 0===e?"__lodash_hash_undefined__":e,this};var CE=Array.prototype.splice;function OE(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}OE.prototype.clear=function(){this.__data__=[],this.size=0},OE.prototype.delete=function(t){var e=this.__data__,i=xE(e,t);return!(i<0)&&(i==e.length-1?e.pop():CE.call(e,i,1),--this.size,!0)},OE.prototype.get=function(t){var e=this.__data__,i=xE(e,t);return i<0?void 0:e[i][1]},OE.prototype.has=function(t){return xE(this.__data__,t)>-1},OE.prototype.set=function(t,e){var i=this.__data__,n=xE(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};var ME=pL(FP,"Map");function TE(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function kE(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}kE.prototype.clear=function(){this.size=0,this.__data__={hash:new SE,map:new(ME||OE),string:new SE}},kE.prototype.delete=function(t){var e=TE(this,t).delete(t);return this.size-=e?1:0,e},kE.prototype.get=function(t){return TE(this,t).get(t)},kE.prototype.has=function(t){return TE(this,t).has(t)},kE.prototype.set=function(t,e){var i=TE(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function IE(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var a=t.apply(this,n);return i.cache=s.set(r,a)||s,a};return i.cache=new(IE.Cache||kE),i}IE.Cache=kE;var AE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jE=/\\(\\)?/g,FE=function(t){var e=IE(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(AE,(function(t,i,n,r){e.push(n?r.replace(jE,"$1"):i||t)})),e})),DE=FE;function PE(t,e){return $P(t)?t:bE(t,e)?[t]:DE(function(t){return null==t?"":HP(t)}(t))}function LE(t){if("string"==typeof t||VP(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function EE(t,e){for(var i=0,n=(e=PE(e,t)).length;null!=t&&i<n;)t=t[LE(e[i++])];return i&&i==n?t:void 0}function NE(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}var RE=DP?DP.isConcatSpreadable:void 0;function BE(t){return $P(t)||HL(t)||!!(RE&&t&&t[RE])}function _E(t,e,i,n,r){var s=-1,a=t.length;for(i||(i=BE),r||(r=[]);++s<a;){var o=t[s];e>0&&i(o)?e>1?_E(o,e-1,i,n,r):NE(r,o):n||(r[r.length]=o)}return r}var zE=oE(Object.getPrototypeOf,Object);function VE(t){var e=this.__data__=new OE(t);this.size=e.size}VE.prototype.clear=function(){this.__data__=new OE,this.size=0},VE.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},VE.prototype.get=function(t){return this.__data__.get(t)},VE.prototype.has=function(t){return this.__data__.has(t)},VE.prototype.set=function(t,e){var i=this.__data__;if(i instanceof OE){var n=i.__data__;if(!ME||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new kE(n)}return i.set(t,e),this.size=i.size,this};var GE="object"==typeof exports&&exports&&!exports.nodeType&&exports,$E=GE&&"object"==typeof module&&module&&!module.nodeType&&module,WE=$E&&$E.exports===GE?FP.Buffer:void 0,qE=WE?WE.allocUnsafe:void 0;function HE(){return[]}var UE=Object.prototype.propertyIsEnumerable,KE=Object.getOwnPropertySymbols,JE=KE?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[r++]=a)}return s}(KE(t),(function(e){return UE.call(t,e)})))}:HE,YE=JE;var ZE=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)NE(e,YE(t)),t=zE(t);return e}:HE;function XE(t,e,i){var n=e(t);return $P(t)?n:NE(n,i(t))}function QE(t){return XE(t,cE,YE)}function tN(t){return XE(t,mE,ZE)}var eN=pL(FP,"DataView"),iN=pL(FP,"Promise"),nN=pL(FP,"Set"),rN=uL(eN),sN=uL(ME),aN=uL(iN),oN=uL(nN),uN=uL(bL),lN=_P;(eN&&"[object DataView]"!=lN(new eN(new ArrayBuffer(1)))||ME&&"[object Map]"!=lN(new ME)||iN&&"[object Promise]"!=lN(iN.resolve())||nN&&"[object Set]"!=lN(new nN)||bL&&"[object WeakMap]"!=lN(new bL))&&(lN=function(t){var e=_P(t),i="[object Object]"==e?t.constructor:void 0,n=i?uL(i):"";if(n)switch(n){case rN:return"[object DataView]";case sN:return"[object Map]";case aN:return"[object Promise]";case oN:return"[object Set]";case uN:return"[object WeakMap]"}return e});var hN=lN,cN=Object.prototype.hasOwnProperty;var dN=FP.Uint8Array;function fN(t){var e=new t.constructor(t.byteLength);return new dN(e).set(new dN(t)),e}var mN=/\w*$/;var vN=DP?DP.prototype:void 0,pN=vN?vN.valueOf:void 0;function bN(t,e,i){var n,r,s,a=t.constructor;switch(e){case"[object ArrayBuffer]":return fN(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var i=e?fN(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var i=e?fN(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,i);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(s=new(r=t).constructor(r.source,mN.exec(r))).lastIndex=r.lastIndex,s;case"[object Symbol]":return n=t,pN?Object(pN.call(n)):{}}}var gN=iE&&iE.isMap,yN=gN?XL(gN):function(t){return zP(t)&&"[object Map]"==hN(t)};var wN=iE&&iE.isSet,SN=wN?XL(wN):function(t){return zP(t)&&"[object Set]"==hN(t)},xN={};function CN(t,e,i,n,r,s){var a,o=1&e,u=2&e,l=4&e;if(i&&(a=r?i(t,n,r,s):i(t)),void 0!==a)return a;if(!YP(t))return t;var h=$P(t);if(h){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&cN.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!o)return function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(t,a)}else{var c=hN(t),d="[object Function]"==c||"[object GeneratorFunction]"==c;if(YL(t))return function(t,e){if(e)return t.slice();var i=t.length,n=qE?qE(i):new t.constructor(i);return t.copy(n),n}(t,o);if("[object Object]"==c||"[object Arguments]"==c||d&&!r){if(a=u||d?{}:function(t){return"function"!=typeof t.constructor||VL(t)?{}:yL(zE(t))}(t),!o)return u?function(t,e){return EL(t,ZE(t),e)}(t,function(t,e){return t&&EL(e,mE(e),t)}(a,t)):function(t,e){return EL(t,YE(t),e)}(t,function(t,e){return t&&EL(e,cE(e),t)}(a,t))}else{if(!xN[c])return r?t:{};a=bN(t,c,o)}}s||(s=new VE);var f=s.get(t);if(f)return f;s.set(t,a),SN(t)?t.forEach((function(n){a.add(CN(n,e,i,n,t,s))})):yN(t)&&t.forEach((function(n,r){a.set(r,CN(n,e,i,r,t,s))}));var m=h?void 0:(l?u?tN:QE:u?mE:cE)(t);return function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););}(m||t,(function(n,r){m&&(n=t[r=n]),LL(a,r,CN(n,e,i,r,t,s))})),a}xN["[object Arguments]"]=xN["[object Array]"]=xN["[object ArrayBuffer]"]=xN["[object DataView]"]=xN["[object Boolean]"]=xN["[object Date]"]=xN["[object Float32Array]"]=xN["[object Float64Array]"]=xN["[object Int8Array]"]=xN["[object Int16Array]"]=xN["[object Int32Array]"]=xN["[object Map]"]=xN["[object Number]"]=xN["[object Object]"]=xN["[object RegExp]"]=xN["[object Set]"]=xN["[object String]"]=xN["[object Symbol]"]=xN["[object Uint8Array]"]=xN["[object Uint8ClampedArray]"]=xN["[object Uint16Array]"]=xN["[object Uint32Array]"]=!0,xN["[object Error]"]=xN["[object Function]"]=xN["[object WeakMap]"]=!1;function ON(t){return CN(t,5)}function MN(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new kE;++e<i;)this.add(t[e])}function TN(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function kN(t,e){return t.has(e)}MN.prototype.add=MN.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},MN.prototype.has=function(t){return this.__data__.has(t)};function IN(t,e,i,n,r,s){var a=1&i,o=t.length,u=e.length;if(o!=u&&!(a&&u>o))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var c=-1,d=!0,f=2&i?new MN:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var m=t[c],v=e[c];if(n)var p=a?n(v,m,c,e,t,s):n(m,v,c,t,e,s);if(void 0!==p){if(p)continue;d=!1;break}if(f){if(!TN(e,(function(t,e){if(!kN(f,e)&&(m===t||r(m,t,i,n,s)))return f.push(e)}))){d=!1;break}}else if(m!==v&&!r(m,v,i,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function AN(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function jN(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var FN=DP?DP.prototype:void 0,DN=FN?FN.valueOf:void 0;var PN=Object.prototype.hasOwnProperty;var LN="[object Object]",EN=Object.prototype.hasOwnProperty;function NN(t,e,i,n,r,s){var a=$P(t),o=$P(e),u=a?"[object Array]":hN(t),l=o?"[object Array]":hN(e),h=(u="[object Arguments]"==u?LN:u)==LN,c=(l="[object Arguments]"==l?LN:l)==LN,d=u==l;if(d&&YL(t)){if(!YL(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new VE),a||rE(t)?IN(t,e,i,n,r,s):function(t,e,i,n,r,s,a){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new dN(t),new dN(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return DL(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=AN;case"[object Set]":var u=1&n;if(o||(o=jN),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;n|=2,a.set(t,e);var h=IN(o(t),o(e),n,r,s,a);return a.delete(t),h;case"[object Symbol]":if(DN)return DN.call(t)==DN.call(e)}return!1}(t,e,u,i,n,r,s);if(!(1&i)){var f=h&&EN.call(t,"__wrapped__"),m=c&&EN.call(e,"__wrapped__");if(f||m){var v=f?t.value():t,p=m?e.value():e;return s||(s=new VE),r(v,p,i,n,s)}}return!!d&&(s||(s=new VE),function(t,e,i,n,r,s){var a=1&i,o=QE(t),u=o.length;if(u!=QE(e).length&&!a)return!1;for(var l=u;l--;){var h=o[l];if(!(a?h in e:PN.call(e,h)))return!1}var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var f=!0;s.set(t,e),s.set(e,t);for(var m=a;++l<u;){var v=t[h=o[l]],p=e[h];if(n)var b=a?n(p,v,h,e,t,s):n(v,p,h,t,e,s);if(!(void 0===b?v===p||r(v,p,i,n,s):b)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var g=t.constructor,y=e.constructor;g==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(f=!1)}return s.delete(t),s.delete(e),f}(t,e,i,n,r,s))}function RN(t,e,i,n,r){return t===e||(null==t||null==e||!zP(t)&&!zP(e)?t!=t&&e!=e:NN(t,e,i,n,RN,r))}function BN(t){return t==t&&!YP(t)}function _N(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}function zN(t){var e=function(t){for(var e=cE(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,BN(r)]}return e}(t);return 1==e.length&&e[0][2]?_N(e[0][0],e[0][1]):function(i){return i===t||function(t,e,i,n){var r=i.length,s=r,a=!n;if(null==t)return!s;for(t=Object(t);r--;){var o=i[r];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<s;){var u=(o=i[r])[0],l=t[u],h=o[1];if(a&&o[2]){if(void 0===l&&!(u in t))return!1}else{var c=new VE;if(n)var d=n(l,h,u,t,e,c);if(!(void 0===d?RN(h,l,3,n,c):d))return!1}}return!0}(i,t,e)}}function VN(t,e){return null!=t&&e in Object(t)}function GN(t,e){return null!=t&&function(t,e,i){for(var n=-1,r=(e=PE(e,t)).length,s=!1;++n<r;){var a=LE(e[n]);if(!(s=null!=t&&i(t,a)))break;t=t[a]}return s||++n!=r?s:!!(r=null==t?0:t.length)&&RL(r)&&jL(a,r)&&($P(t)||HL(t))}(t,e,VN)}function $N(t,e){return bE(t)&&BN(e)?_N(LE(t),e):function(i){var n=function(t,e,i){var n=null==t?void 0:EE(t,e);return void 0===n?i:n}(i,t);return void 0===n&&n===e?GN(i,t):RN(e,n,3)}}function WN(t){return bE(t)?(e=LE(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return EE(e,t)}}(t);var e}function qN(t){return"function"==typeof t?t:null==t?iL:"object"==typeof t?$P(t)?$N(t[0],t[1]):zN(t):WN(t)}var HN=function(t,e,i){for(var n=-1,r=Object(t),s=i(t),a=s.length;a--;){var o=s[++n];if(!1===e(r[o],o,r))break}return t},UN=HN;var KN=function(t,e){return function(i,n){if(null==i)return i;if(!BL(i))return t(i,n);for(var r=i.length,s=e?r:-1,a=Object(i);(e?s--:++s<r)&&!1!==n(a[s],s,a););return i}}((function(t,e){return t&&UN(t,e,cE)})),JN=KN,YN=function(){return FP.Date.now()},ZN=Math.max,XN=Math.min;function QN(t,e,i){var n,r,s,a,o,u,l=0,h=!1,c=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var i=n,s=r;return n=r=void 0,l=e,a=t.apply(s,i)}function m(t){return l=t,o=setTimeout(p,e),h?f(t):a}function v(t){var i=t-u;return void 0===u||i>=e||i<0||c&&t-l>=s}function p(){var t=YN();if(v(t))return b(t);o=setTimeout(p,function(t){var i=e-(t-u);return c?XN(i,s-(t-l)):i}(t))}function b(t){return o=void 0,d&&n?f(t):(n=r=void 0,a)}function g(){var t=YN(),i=v(t);if(n=arguments,r=this,u=t,i){if(void 0===o)return m(u);if(c)return clearTimeout(o),o=setTimeout(p,e),f(u)}return void 0===o&&(o=setTimeout(p,e)),a}return e=eL(e)||0,YP(i)&&(h=!!i.leading,s=(c="maxWait"in i)?ZN(eL(i.maxWait)||0,e):s,d="trailing"in i?!!i.trailing:d),g.cancel=function(){void 0!==o&&clearTimeout(o),l=0,n=u=r=o=void 0},g.flush=function(){return void 0===o?a:b(YN())},g}var tR=Object.prototype.hasOwnProperty;function eR(t){if(null==t)return!0;if(BL(t)&&($P(t)||"string"==typeof t||"function"==typeof t.splice||YL(t)||rE(t)||HL(t)))return!t.length;var e=hN(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(VL(t))return!hE(t).length;for(var i in t)if(tR.call(t,i))return!1;return!0}function iR(t,e){return RN(t,e)}function nR(t,e){if(t!==e){var i=void 0!==t,n=null===t,r=t==t,s=VP(t),a=void 0!==e,o=null===e,u=e==e,l=VP(e);if(!o&&!l&&!s&&t>e||s&&a&&u&&!o&&!l||n&&a&&u||!i&&u||!r)return 1;if(!n&&!s&&!l&&t<e||l&&i&&r&&!n&&!s||o&&i&&r||!a&&r||!u)return-1}return 0}function rR(t,e,i){e=e.length?GP(e,(function(t){return $P(t)?function(e){return EE(e,1===t.length?t[0]:t)}:t})):[iL];var n=-1;e=GP(e,XL(qN));var r=function(t,e){var i=-1,n=BL(t)?Array(t.length):[];return JN(t,(function(t,r,s){n[++i]=e(t,r,s)})),n}(t,(function(t,i,r){return{criteria:GP(e,(function(e){return e(t)})),index:++n,value:t}}));return function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(r,(function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,s=e.criteria,a=r.length,o=i.length;++n<a;){var u=nR(r[n],s[n]);if(u)return n>=o?u:u*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}))}var sR=function(t,e){return IL(function(t,e,i){return e=NL(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=NL(n.length-e,0),a=Array(s);++r<s;)a[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=i(a),wL(t,this,o)}}(t,e,iL),t+"")}((function(t,e){if(null==t)return[];var i=e.length;return i>1&&_L(t,e[0],e[1])?e=[]:i>2&&_L(e[0],e[1],e[2])&&(e=[e[0]]),rR(t,_E(e,1),[])})),aR=sR;const oR={title:{marginBottom:8,wrap:!0},subtitle:{marginBottom:10,wrap:!0},rotated:!1,legendProperties:{legendLabels:{marginLeft:5,marginRight:5,truncate:!1,applyOnClones:!0,wrap:!0,maxWidth:200},valueLabels:{wrap:!0,maxWidth:200},legendTitle:{wrap:!0,maxWidth:220,marginLeft:10,marginRight:10,marginTop:15},legendMarkersSize:14,legendLabelReducedOpacity:.5,rectangleMarkerRadius:3,roundedMarkerRadius:12,legendPaddingRightWithScrollbarVisible:10,maxHeight:100,marginTop:2,marginBottom:2,marginLeft:0,marginRight:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},footer:{wrap:!0,horizontalCenter:pD,verticalCenter:wD,align:pD},axisLabel:{rotation:0,align:pD,horizontalCenter:pD,verticalCenter:yD,dy:10},axisTickLength:5,rotatedAxisLabel:{rotation:-45,horizontalCenter:mD,verticalCenter:SD,dy:6},rotatedHistogramAxisLabel:{rotation:-45,horizontalCenter:mD,verticalCenter:SD,dy:-6,dx:-6},nonRotatedHistogramAxisLabel:{rotation:0,horizontalCenter:pD,verticalCenter:wD,dy:0,dx:0},xAxisTitleLabel:{align:pD,valign:wD,rotation:0,fontSize:10,wrap:!0},yAxisTitleLabel:{align:pD,valign:wD,rotation:270,wrap:!0},titleLabel:{align:pD,wrap:!0},horizontalSurfaceGuideLabels:{horizontalCenter:vD,align:vD,verticalCenter:wD,wrap:!0},horizontalLineGuideLabels:{horizontalCenter:vD,align:vD,verticalCenter:yD,wrap:!0},verticalSurfaceGuideLabels:{horizontalCenter:pD,verticalCenter:yD,valign:yD},verticalLineGuideLabels:{horizontalCenter:vD,verticalCenter:SD,valign:yD,wrap:!0,rotation:90},guideAbove:!1,cursorCrosshair:{style:{type:xD,style:YF,color:[0,0,0,102],width:1},horizontalLineVisible:!1,verticalLineVisible:!1},gauge:{innerRadius:80,radius:95,startAngle:-180,endAngle:180,innerLabelToInnerChartRatio:.5,axisLabelToInnerChartRatio:.13,innerLabelAutoMinFontSize:14,innerLabelAutoMaxFontSize:100,axisLabelAutoMinFontSize:14,axisLabelAutoMaxFontSize:40,gaugeMinGridDistance:1,axisMinimum:0,axisMaximum:100,numberOfLabelIntervals:5,numberOfTicksBetweenTwoLabels:4,maximumNumberOfLabelIntervals:24,paddingTop:10,paddingBottom:10,paddingRight:0,paddingLeft:0},gaugeTicksLength:7,gaugeInnerLabel:{horizontalCenter:pD,verticalCenter:wD},gaugeNeedle:{startWidth:10,endWidth:1,innerRadius:25,displayPin:!1},gaugeFirstLabelId:"arcgis_charts_gauge_first_label",gaugeLastLabelId:"arcgis_charts_gauge_last_label",headerContainer:{layout:"vertical",width:"100%",paddingBottom:5},footerContainer:{layout:"vertical",width:"100%",paddingTop:5,paddingBottom:15},paddingMinSize:0,marginMinSize:0,chartPaddingMinSize:7,chartPaddingRightWhenLegendNotOnRight:15,chartAndLegendContainer:{paddingTop:0},chartContainer:{paddingBottom:0,paddingTop:15},chartContainerPaddingTopWhenRotated:5,dataLabelInitialize:{strokeWidth:0,applyOnClones:!0},dataLabel:{align:pD,horizontalCenter:pD,valign:SD,verticalCenter:yD,dy:-3},dataLabelRotated:{align:vD,horizontalCenter:vD,valign:wD,verticalCenter:wD,dx:2},dataLabelStackedRotated:{align:pD,horizontalCenter:pD,valign:wD,verticalCenter:wD},dataLabelStackedNonRotated:{align:pD,horizontalCenter:pD,valign:wD,verticalCenter:wD},dataLabelNegative:{paddingTop:5,paddingRight:5},scatterPlotSeries:{strokeOpacity:0,regressionPrecision:7,r2:NaN,trendLinePoints:[{},{}]},histogramSeries:{normalDistribNumberOfPoints:100},lineSeries:{strokeWidth:2,lineSmoothed:!1,lineSmoothedKind:nP,showArea:!1,areaOpacity:.25,markerVisible:!0,rotated:!1,stackedType:YD,stackNegativeValuesToBaseline:!0,marker:{markerSize:4,markerStrokeWidth:2}},buffer:!1,elementLimitForSmoothRendering:1e3,defaultStatParameterValue:.5,pieChart:{dataLabels:{maxWidth:100,wrap:!1},dataLabelsOffset:10,innerRadius:0,min:-90,max:270,displayNumericValueOnLegend:!1,displayNumericValueOnDataLabel:!0,displayNumericValueOnTooltip:!0,displayPercentageOnLegend:!1,displayPercentageOnDataLabel:!1,displayPercentageOnTooltip:!0,sliceGrouping:{sliceId:yC,percentageThreshold:0,fillSymbol:{type:OD,color:[210,210,210,178.5]}},paddingWithLabels:80,defaultPadding:0,alignDataLabels:!1,ticksOpacity:1,technicalFieldSliceId:"arcgis_charts_slice_id",technicalFieldSlicePercent:"arcgis_charts_slice_percent",technicalFieldGroupedSlices:"arcgis_charts_grouped_slices"},pieSliceCustomLabelName:"customLabel",yAxisLabelMaxWidth:100,axisLabelPadding:1.5,categoryAxisLabelPadding:3,histogramAxisLabelPadding:3,seriesSort:QD.Ascending,technicalSortingFieldBySum:"arcgis_charts_category_sum",technicalSortingFieldByPercent:"arcgis_charts_category_first_series_percent",color:[0,0,0,255],chartEllipsis:"...",backgroundColor:[255,255,255,255],yAxisMinGridDistance:40,lineWidth:1,loaderRotationSpeed:400,loaderIntervalTimeout:400,loaderBackground:[255,255,255,230],loaderLabelFontSize:20,selectionTheme:{selectedElementsTheme:{elementOutlineColor:[0,255,255,255],elementOutlineWidth:5}},columnTooltipPosition:"pointer",markerTooltipPosition:"fixed",patternLineProperties:{width:5,height:5,strokeWidth:1},patternRectProperties:{rectWidth:9,rectHeight:9,width:10,height:10,strokeWidth:0,backgroundOpacity:5,fillOpacity:3},originalCategoryValue:"arcgis_charts_original_category_value",originalDateValue:"arcgis_charts_original_date_value",typeOrDomainFieldName:"arcgis_charts_type_domain_field_name",typeOrDomainIdValue:"arcgis_charts_type_domain_id_value",dateBinningRange:"arcgis_charts_bin_range",dateBinModel:"arcgis_charts_bin_model",queryCalculatedExpr:["EXPR_1","Expr1","expr1","EXPR1"],queryMaxFloatPrecision:10,dateFormatUTC:{timeZone:"UTC",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},rendererOtherValue:"arcgisChartsrendererOtherValue",scatterPlotAggregationFields:{dataContextXMinField:"arcgis_charts_xmin",dataContextXMaxField:"arcgis_charts_xmax",dataContextYMinField:"arcgis_charts_ymin",dataContextYMaxField:"arcgis_charts_ymax",dataContextCountDistinctX:"distinctX",dataContextCountDistinctY:"distinctY",queryNumberOfFeatures:"numberOfFeatures",queryNumberOfAggregatedFeatures:"numberOfAggregatedFeatures"},dataTooltipVisible:!0,dataTooltipStyle:{outline:{type:xD,color:[255,255,255,255],width:1}},dataTooltipStyleReversed:{color:[255,255,255,255],outline:{type:xD,width:3}},tooltipWidth:300,axisLabelOveredOpacity:.5,generalFontSize:10,actionMode:dA,debounceTime:100,chartDefaultPaddingRight:0,htmlEmptyContent:"<p></p>"},uR="ready",lR="hidden",hR="shown",cR="hit",dR="doublehit",fR="up",mR="selectended",vR="over",pR="out",bR="sizechanged",gR="visibilitychanged",yR="positionchanged",wR="validated",SR="dataitemsvalidated",xR="inited",CR="opened",OR="closed",MR="childadded",TR="datarangechanged",kR="layoutvalidated";var IR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function AR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jR(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var FR={exports:{}};!function(t,e){!function(){var i=9007199254740992,n="0123456789",r="abcdefghijklmnopqrstuvwxyz",s=r.toUpperCase(),a=n+"abcdef";function o(t){this.name="UnsupportedError",this.message=t||"This feature is not supported on this platform"}o.prototype=new Error,o.prototype.constructor=o;var u=Array.prototype.slice;function l(t){if(!(this instanceof l))return t||(t=null),null===t?new l:new l(t);if("function"==typeof t)return this.random=t,this;arguments.length&&(this.seed=0);for(var e=0;e<arguments.length;e++){var i=0;if("[object String]"===Object.prototype.toString.call(arguments[e]))for(var n=0;n<arguments[e].length;n++){for(var r=0,s=0;s<arguments[e].length;s++)r=arguments[e].charCodeAt(s)+(r<<6)+(r<<16)-r;i+=r}else i=arguments[e];this.seed+=(arguments.length-e)*i}return this.mt=this.mersenne_twister(this.seed),this.bimd5=this.blueimp_md5(),this.random=function(){return this.mt.random(this.seed)},this}function h(t,e){if(t=t||{},e)for(var i in e)void 0===t[i]&&(t[i]=e[i]);return t}function c(t,e){if(t)throw new RangeError(e)}l.prototype.VERSION="1.1.7";var d=function(){throw new Error("No Base64 encoder available.")};function f(t){this.c=t}function m(t){this.c=t}function v(t){this.c=t}function p(t){return function(){return this.natural(t)}}"function"==typeof btoa?d=btoa:"function"==typeof Buffer&&(d=function(t){return new Buffer(t).toString("base64")}),l.prototype.bool=function(t){return c((t=h(t,{likelihood:50})).likelihood<0||t.likelihood>100,"Chance: Likelihood accepts values from 0 to 100."),100*this.random()<t.likelihood},l.prototype.falsy=function(t){var e=(t=h(t,{pool:[!1,null,0,NaN,""]})).pool;return e[this.integer({min:0,max:e.length})]},l.prototype.animal=function(t){if(void 0!==(t=h(t)).type)return c(!this.get("animals")[t.type.toLowerCase()],"Please pick from desert, ocean, grassland, forest, zoo, pets, farm."),this.pick(this.get("animals")[t.type.toLowerCase()]);return this.pick(this.get("animals")[this.pick(["desert","forest","ocean","zoo","farm","pet","grassland"])])},l.prototype.character=function(t){var e,i,a="!@#$%^&*()[]";return e="lower"===(t=h(t)).casing?r:"upper"===t.casing?s:r+s,t.pool?i=t.pool:(i="",t.alpha&&(i+=e),t.numeric&&(i+=n),t.symbols&&(i+=a),i||(i=e+n+a)),i.charAt(this.natural({max:i.length-1}))},l.prototype.floating=function(t){c((t=h(t,{fixed:4})).fixed&&t.precision,"Chance: Cannot specify both fixed and precision.");var e=Math.pow(10,t.fixed),n=i/e,r=-n;c(t.min&&t.fixed&&t.min<r,"Chance: Min specified is out of range with fixed. Min should be, at least, "+r),c(t.max&&t.fixed&&t.max>n,"Chance: Max specified is out of range with fixed. Max should be, at most, "+n),t=h(t,{min:r,max:n});var s=(this.integer({min:t.min*e,max:t.max*e})/e).toFixed(t.fixed);return parseFloat(s)},l.prototype.integer=function(t){return c((t=h(t,{min:-9007199254740992,max:i})).min>t.max,"Chance: Min cannot be greater than Max."),Math.floor(this.random()*(t.max-t.min+1)+t.min)},l.prototype.natural=function(t){if("number"==typeof(t=h(t,{min:0,max:i})).numerals&&(c(t.numerals<1,"Chance: Numerals cannot be less than one."),t.min=Math.pow(10,t.numerals-1),t.max=Math.pow(10,t.numerals)-1),c(t.min<0,"Chance: Min cannot be less than zero."),t.exclude){for(var e in c(!Array.isArray(t.exclude),"Chance: exclude must be an array."),t.exclude)c(!Number.isInteger(t.exclude[e]),"Chance: exclude must be numbers.");var n=t.min+this.natural({max:t.max-t.min-t.exclude.length}),r=t.exclude.sort();for(var e in r){if(n<r[e])break;n++}return n}return this.integer(t)},l.prototype.prime=function(t){c((t=h(t,{min:0,max:1e4})).min<0,"Chance: Min cannot be less than zero."),c(t.min>t.max,"Chance: Min cannot be greater than Max.");var e=b.primes[b.primes.length-1];if(t.max>e)for(var i=e+2;i<=t.max;++i)this.is_prime(i)&&b.primes.push(i);var n=b.primes.filter((function(e){return e>=t.min&&e<=t.max}));return this.pick(n)},l.prototype.is_prime=function(t){if(t%1||t<2)return!1;if(t%2==0)return 2===t;if(t%3==0)return 3===t;for(var e=Math.sqrt(t),i=5;i<=e;i+=6)if(t%i==0||t%(i+2)==0)return!1;return!0},l.prototype.hex=function(t){c((t=h(t,{min:0,max:i,casing:"lower"})).min<0,"Chance: Min cannot be less than zero.");var e=this.natural({min:t.min,max:t.max});return"upper"===t.casing?e.toString(16).toUpperCase():e.toString(16)},l.prototype.letter=function(t){t=h(t,{casing:"lower"});var e=this.character({pool:"abcdefghijklmnopqrstuvwxyz"});return"upper"===t.casing&&(e=e.toUpperCase()),e},l.prototype.string=function(t){(t=h(t,{min:5,max:20})).length||(t.length=this.natural({min:t.min,max:t.max})),c(t.length<0,"Chance: Length cannot be less than zero.");var e=t.length;return this.n(this.character,e,t).join("")},f.prototype={substitute:function(){return this.c}},m.prototype={substitute:function(){if(!/[{}\\]/.test(this.c))throw new Error('Invalid escape sequence: "\\'+this.c+'".');return this.c}},v.prototype={replacers:{"#":function(t){return t.character({pool:n})},A:function(t){return t.character({pool:s})},a:function(t){return t.character({pool:r})}},substitute:function(t){var e=this.replacers[this.c];if(!e)throw new Error('Invalid replacement character: "'+this.c+'".');return e(t)}},l.prototype.template=function(t){if(!t)throw new Error("Template string is required");var e=this;return function(t){for(var e=[],i="identity",n=0;n<t.length;n++){var r=t[n];switch(i){case"escape":e.push(new m(r)),i="identity";break;case"identity":"{"===r?i="replace":"\\"===r?i="escape":e.push(new f(r));break;case"replace":"}"===r?i="identity":e.push(new v(r))}}return e}(t).map((function(t){return t.substitute(e)})).join("")},l.prototype.buffer=function(t){if("undefined"==typeof Buffer)throw new o("Sorry, the buffer() function is not supported on your platform");c((t=h(t,{length:this.natural({min:5,max:20})})).length<0,"Chance: Length cannot be less than zero.");var e=t.length,i=this.n(this.character,e,t);return Buffer.from(i)},l.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},l.prototype.mixin=function(t){for(var e in t)l.prototype[e]=t[e];return this},l.prototype.unique=function(t,e,i){c("function"!=typeof t,"Chance: The first argument must be a function.");var n=function(t,e){return-1!==t.indexOf(e)};i&&(n=i.comparator||n);for(var r,s=[],a=0,o=50*e,l=u.call(arguments,2);s.length<e;){var h=JSON.parse(JSON.stringify(l));if(n(s,r=t.apply(this,h))||(s.push(r),a=0),++a>o)throw new RangeError("Chance: num is likely too large for sample set")}return s},l.prototype.n=function(t,e){c("function"!=typeof t,"Chance: The first argument must be a function."),void 0===e&&(e=1);var i=e,n=[],r=u.call(arguments,2);for(i=Math.max(0,i);i--;null)n.push(t.apply(this,r));return n},l.prototype.pad=function(t,e,i){return i=i||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(i)+t},l.prototype.pick=function(t,e){if(0===t.length)throw new RangeError("Chance: Cannot pick() from an empty array");return e&&1!==e?this.shuffle(t).slice(0,e):t[this.natural({max:t.length-1})]},l.prototype.pickone=function(t){if(0===t.length)throw new RangeError("Chance: Cannot pickone() from an empty array");return t[this.natural({max:t.length-1})]},l.prototype.pickset=function(t,e){if(0===e)return[];if(0===t.length)throw new RangeError("Chance: Cannot pickset() from an empty array");if(e<0)throw new RangeError("Chance: Count must be a positive number");if(e&&1!==e){var i=t.slice(0),n=i.length;return this.n((function(){var t=this.natural({max:--n}),e=i[t];return i[t]=i[n],e}),Math.min(n,e))}return[this.pickone(t)]},l.prototype.shuffle=function(t){for(var e,i,n=[],r=0,s=Number(t.length),a=(i=s,Array.apply(null,Array(i)).map((function(t,e){return e}))),o=s-1,u=0;u<s;u++)r=a[e=this.natural({max:o})],n[u]=t[r],a[e]=a[o],o-=1;return n},l.prototype.weighted=function(t,e,i){if(t.length!==e.length)throw new RangeError("Chance: Length of array and weights must match");for(var n,r=0,s=0;s<e.length;++s){if(n=e[s],isNaN(n))throw new RangeError("Chance: All weights must be numbers");n>0&&(r+=n)}if(0===r)throw new RangeError("Chance: No valid entries in array weights");var a,o=this.random()*r,u=0,l=-1;for(s=0;s<e.length;++s){if(u+=n=e[s],n>0){if(o<=u){a=s;break}l=s}s===e.length-1&&(a=l)}var h=t[a];return(i=void 0!==i&&i)&&(t.splice(a,1),e.splice(a,1)),h},l.prototype.paragraph=function(t){var e=(t=h(t)).sentences||this.natural({min:3,max:7}),i=this.n(this.sentence,e),n=!0===t.linebreak?"\n":" ";return i.join(n)},l.prototype.sentence=function(t){var e,i=(t=h(t)).words||this.natural({min:12,max:18}),n=t.punctuation;return e=this.n(this.word,i).join(" "),e=this.capitalize(e),!1===n||/^[.?;!:]$/.test(n)||(n="."),n&&(e+=n),e},l.prototype.syllable=function(t){for(var e,i=(t=h(t)).length||this.natural({min:2,max:3}),n="bcdfghjklmnprstvwz",r="aeiou",s="",a=0;a<i;a++)s+=e=0===a?this.character({pool:"bcdfghjklmnprstvwzaeiou"}):-1===n.indexOf(e)?this.character({pool:n}):this.character({pool:r});return t.capitalize&&(s=this.capitalize(s)),s},l.prototype.word=function(t){c((t=h(t)).syllables&&t.length,"Chance: Cannot specify both syllables AND length.");var e=t.syllables||this.natural({min:1,max:3}),i="";if(t.length){do{i+=this.syllable()}while(i.length<t.length);i=i.substring(0,t.length)}else for(var n=0;n<e;n++)i+=this.syllable();return t.capitalize&&(i=this.capitalize(i)),i},l.prototype.age=function(t){var e;switch((t=h(t)).type){case"child":e={min:0,max:12};break;case"teen":e={min:13,max:19};break;case"adult":default:e={min:18,max:65};break;case"senior":e={min:65,max:100};break;case"all":e={min:0,max:100}}return this.natural(e)},l.prototype.birthday=function(t){var e=this.age(t),i=(new Date).getFullYear();if(t&&t.type){var n=new Date,r=new Date;n.setFullYear(i-e-1),r.setFullYear(i-e),t=h(t,{min:n,max:r})}else t=h(t,{year:i-e});return this.date(t)},l.prototype.cpf=function(t){t=h(t,{formatted:!0});var e=this.n(this.natural,9,{max:9}),i=2*e[8]+3*e[7]+4*e[6]+5*e[5]+6*e[4]+7*e[3]+8*e[2]+9*e[1]+10*e[0];(i=11-i%11)>=10&&(i=0);var n=2*i+3*e[8]+4*e[7]+5*e[6]+6*e[5]+7*e[4]+8*e[3]+9*e[2]+10*e[1]+11*e[0];(n=11-n%11)>=10&&(n=0);var r=""+e[0]+e[1]+e[2]+"."+e[3]+e[4]+e[5]+"."+e[6]+e[7]+e[8]+"-"+i+n;return t.formatted?r:r.replace(/\D/g,"")},l.prototype.cnpj=function(t){t=h(t,{formatted:!0});var e=this.n(this.natural,12,{max:12}),i=2*e[11]+3*e[10]+4*e[9]+5*e[8]+6*e[7]+7*e[6]+8*e[5]+9*e[4]+2*e[3]+3*e[2]+4*e[1]+5*e[0];(i=11-i%11)<2&&(i=0);var n=2*i+3*e[11]+4*e[10]+5*e[9]+6*e[8]+7*e[7]+8*e[6]+9*e[5]+2*e[4]+3*e[3]+4*e[2]+5*e[1]+6*e[0];(n=11-n%11)<2&&(n=0);var r=""+e[0]+e[1]+"."+e[2]+e[3]+e[4]+"."+e[5]+e[6]+e[7]+"/"+e[8]+e[9]+e[10]+e[11]+"-"+i+n;return t.formatted?r:r.replace(/\D/g,"")},l.prototype.first=function(t){return t=h(t,{gender:this.gender(),nationality:"en"}),this.pick(this.get("firstNames")[t.gender.toLowerCase()][t.nationality.toLowerCase()])},l.prototype.profession=function(t){return(t=h(t)).rank?this.pick(["Apprentice ","Junior ","Senior ","Lead "])+this.pick(this.get("profession")):this.pick(this.get("profession"))},l.prototype.company=function(){return this.pick(this.get("company"))},l.prototype.gender=function(t){return t=h(t,{extraGenders:[]}),this.pick(["Male","Female"].concat(t.extraGenders))},l.prototype.last=function(t){if("*"===(t=h(t,{nationality:"*"})).nationality){var e=[],i=this.get("lastNames");return Object.keys(i).forEach((function(t){e=e.concat(i[t])})),this.pick(e)}return this.pick(this.get("lastNames")[t.nationality.toLowerCase()])},l.prototype.israelId=function(){for(var t=this.string({pool:"0123456789",length:8}),e=0,i=0;i<t.length;i++){var n=t[i]*(i/2===parseInt(i/2)?1:2);n=this.pad(n,2).toString(),e+=n=parseInt(n[0])+parseInt(n[1])}return t+=(10-parseInt(e.toString().slice(-1))).toString().slice(-1)},l.prototype.mrz=function(t){var e,i,n,r,s=function(t){var e="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),i=[7,3,1],n=0;return"string"!=typeof t&&(t=t.toString()),t.split("").forEach((function(t,r){var s=e.indexOf(t);t=-1!==s?0===s?0:s+9:parseInt(t,10),n+=t*=i[r%i.length]})),n%10},a=this;return t=h(t,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:(e=a.birthday({type:"adult"}),[e.getFullYear().toString().substr(2),a.pad(e.getMonth()+1,2),a.pad(e.getDate(),2)].join("")),expiry:function(){var t=new Date;return[(t.getFullYear()+5).toString().substr(2),a.pad(t.getMonth()+1,2),a.pad(t.getDate(),2)].join("")}(),gender:"Female"===this.gender()?"F":"M",issuer:"GBR",nationality:"GBR"}),n=function(t){return new Array(t+1).join("<")},(r=["P<",(i=t).issuer,i.last.toUpperCase(),"<<",i.first.toUpperCase(),n(39-(i.last.length+i.first.length+2)),i.passportNumber,s(i.passportNumber),i.nationality,i.dob,s(i.dob),i.gender,i.expiry,s(i.expiry),n(14),s(n(14))].join(""))+s(r.substr(44,10)+r.substr(57,7)+r.substr(65,7))},l.prototype.name=function(t){t=h(t);var e,i=this.first(t),n=this.last(t);return e=t.middle?i+" "+this.first(t)+" "+n:t.middle_initial?i+" "+this.character({alpha:!0,casing:"upper"})+". "+n:i+" "+n,t.prefix&&(e=this.prefix(t)+" "+e),t.suffix&&(e=e+" "+this.suffix(t)),e},l.prototype.name_prefixes=function(t){var e=[{name:"Doctor",abbreviation:"Dr."}];return"male"!==(t=(t=t||"all").toLowerCase())&&"all"!==t||e.push({name:"Mister",abbreviation:"Mr."}),"female"!==t&&"all"!==t||(e.push({name:"Miss",abbreviation:"Miss"}),e.push({name:"Misses",abbreviation:"Mrs."})),e},l.prototype.prefix=function(t){return this.name_prefix(t)},l.prototype.name_prefix=function(t){return(t=h(t,{gender:"all"})).full?this.pick(this.name_prefixes(t.gender)).name:this.pick(this.name_prefixes(t.gender)).abbreviation},l.prototype.HIDN=function(){var t="";return t+=this.string({pool:"0123456789",length:6}),t+=this.string({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYXZ",length:2})},l.prototype.ssn=function(t){var e="1234567890",i=(t=h(t,{ssnFour:!1,dashes:!0})).dashes?"-":"";return t.ssnFour?this.string({pool:e,length:4}):this.string({pool:e,length:3})+i+this.string({pool:e,length:2})+i+this.string({pool:e,length:4})},l.prototype.aadhar=function(t){var e="1234567890",i=(t=h(t,{onlyLastFour:!1,separatedByWhiteSpace:!0})).separatedByWhiteSpace?" ":"";return t.onlyLastFour?this.string({pool:e,length:4}):this.string({pool:e,length:4})+i+this.string({pool:e,length:4})+i+this.string({pool:e,length:4})},l.prototype.name_suffixes=function(){return[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}]},l.prototype.suffix=function(t){return this.name_suffix(t)},l.prototype.name_suffix=function(t){return(t=h(t)).full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation},l.prototype.nationalities=function(){return this.get("nationalities")},l.prototype.nationality=function(){return this.pick(this.nationalities()).name},l.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})},l.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})},l.prototype.wp8_anid2=function(){return d(this.hash({length:32}))},l.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})},l.prototype.bb_pin=function(){return this.hash({length:8})},l.prototype.avatar=function(t){var e={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(t)if("string"==typeof t)e.email=t,t={};else{if("object"!=typeof t)return null;if("Array"===t.constructor)return null}else e.email=this.email(),t={};return(e=h(t,e)).email||(e.email=this.email()),e.protocol={http:"http",https:"https"}[e.protocol]?e.protocol+":":"",e.size=parseInt(e.size,0)?e.size:"",e.rating={g:"g",pg:"pg",r:"r",x:"x"}[e.rating]?e.rating:"",e.fallback={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"}[e.fallback]?e.fallback:"",e.fileExtension={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"}[e.fileExtension]?e.fileExtension:"",e.protocol+"//www.gravatar.com/avatar/"+this.bimd5.md5(e.email)+(e.fileExtension?"."+e.fileExtension:"")+(e.size||e.rating||e.fallback?"?":"")+(e.size?"&s="+e.size.toString():"")+(e.rating?"&r="+e.rating:"")+(e.fallback?"&d="+e.fallback:"")},l.prototype.color=function(t){function e(t,e){return[t,t,t].join(e||"")}function i(t){var i=t?"rgba":"rgb",n=t?","+this.floating({min:v,max:p}):"";return i+"("+(s?e(this.natural({min:a,max:o}),","):this.natural({min:c,max:d})+","+this.natural({min:f,max:m})+","+this.natural({max:255}))+n+")"}function n(i,n,r){var h=r?"#":"",v="";return s?(v=e(this.pad(this.hex({min:a,max:o}),2)),"shorthex"===t.format&&(v=e(this.hex({min:0,max:15})))):v="shorthex"===t.format?this.pad(this.hex({min:Math.floor(u/16),max:Math.floor(l/16)}),1)+this.pad(this.hex({min:Math.floor(c/16),max:Math.floor(d/16)}),1)+this.pad(this.hex({min:Math.floor(f/16),max:Math.floor(m/16)}),1):void 0!==u||void 0!==l||void 0!==c||void 0!==d||void 0!==f||void 0!==m?this.pad(this.hex({min:u,max:l}),2)+this.pad(this.hex({min:c,max:d}),2)+this.pad(this.hex({min:f,max:m}),2):this.pad(this.hex({min:a,max:o}),2)+this.pad(this.hex({min:a,max:o}),2)+this.pad(this.hex({min:a,max:o}),2),h+v}var r,s=(t=h(t,{format:this.pick(["hex","shorthex","rgb","rgba","0x","name"]),grayscale:!1,casing:"lower",min:0,max:255,min_red:void 0,max_red:void 0,min_green:void 0,max_green:void 0,min_blue:void 0,max_blue:void 0,min_alpha:0,max_alpha:1})).grayscale,a=t.min,o=t.max,u=t.min_red,l=t.max_red,c=t.min_green,d=t.max_green,f=t.min_blue,m=t.max_blue,v=t.min_alpha,p=t.max_alpha;if(void 0===t.min_red&&(u=a),void 0===t.max_red&&(l=o),void 0===t.min_green&&(c=a),void 0===t.max_green&&(d=o),void 0===t.min_blue&&(f=a),void 0===t.max_blue&&(m=o),void 0===t.min_alpha&&(v=0),void 0===t.max_alpha&&(p=1),s&&0===a&&255===o&&void 0!==u&&void 0!==l&&(a=(u+c+f)/3,o=(l+d+m)/3),"hex"===t.format)r=n.call(this,2,6,!0);else if("shorthex"===t.format)r=n.call(this,1,3,!0);else if("rgb"===t.format)r=i.call(this,!1);else if("rgba"===t.format)r=i.call(this,!0);else{if("0x"!==t.format){if("name"===t.format)return this.pick(this.get("colorNames"));throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", "0x" or "name".')}r="0x"+n.call(this,2,6)}return"upper"===t.casing&&(r=r.toUpperCase()),r},l.prototype.domain=function(t){return t=h(t),this.word()+"."+(t.tld||this.tld())},l.prototype.email=function(t){return t=h(t),this.word({length:t.length})+"@"+(t.domain||this.domain())},l.prototype.fbid=function(){return"10000"+this.string({pool:"1234567890",length:11})},l.prototype.google_analytics=function(){return"UA-"+this.pad(this.natural({max:999999}),6)+"-"+this.pad(this.natural({max:99}),2)},l.prototype.hashtag=function(){return"#"+this.word()},l.prototype.ip=function(){return this.natural({min:1,max:254})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({min:1,max:254})},l.prototype.ipv6=function(){return this.n(this.hash,8,{length:4}).join(":")},l.prototype.klout=function(){return this.natural({min:1,max:99})},l.prototype.semver=function(t){t=h(t,{include_prerelease:!0});var e=this.pickone(["^","~","<",">","<=",">=","="]);t.range&&(e=t.range);var i="";return t.include_prerelease&&(i=this.weighted(["","-dev","-beta","-alpha"],[50,10,5,1])),e+this.rpg("3d10").join(".")+i},l.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io","ac","ad","ae","af","ag","ai","al","am","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]},l.prototype.tld=function(){return this.pick(this.tlds())},l.prototype.twitter=function(){return"@"+this.word()},l.prototype.url=function(t){var e=(t=h(t,{protocol:"http",domain:this.domain(t),domain_prefix:"",path:this.word(),extensions:[]})).extensions.length>0?"."+this.pick(t.extensions):"",i=t.domain_prefix?t.domain_prefix+"."+t.domain:t.domain;return t.protocol+"://"+i+"/"+t.path+e},l.prototype.port=function(){return this.integer({min:0,max:65535})},l.prototype.locale=function(t){return(t=h(t)).region?this.pick(this.get("locale_regions")):this.pick(this.get("locale_languages"))},l.prototype.locales=function(t){return(t=h(t)).region?this.get("locale_regions"):this.get("locale_languages")},l.prototype.loremPicsum=function(t){var e=(t=h(t,{width:500,height:500,greyscale:!1,blurred:!1})).greyscale?"g/":"",i=t.blurred?"/?blur":"/?random";return"https://picsum.photos/"+e+t.width+"/"+t.height+i},l.prototype.address=function(t){return t=h(t),this.natural({min:5,max:2e3})+" "+this.street(t)},l.prototype.altitude=function(t){return t=h(t,{fixed:5,min:0,max:8848}),this.floating({min:t.min,max:t.max,fixed:t.fixed})},l.prototype.areacode=function(t){t=h(t,{parens:!0});var e=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return t.parens?"("+e+")":e},l.prototype.city=function(){return this.capitalize(this.word({syllables:3}))},l.prototype.coordinates=function(t){return this.latitude(t)+", "+this.longitude(t)},l.prototype.countries=function(){return this.get("countries")},l.prototype.country=function(t){t=h(t);var e=this.pick(this.countries());return t.raw?e:t.full?e.name:e.abbreviation},l.prototype.depth=function(t){return t=h(t,{fixed:5,min:-10994,max:0}),this.floating({min:t.min,max:t.max,fixed:t.fixed})},l.prototype.geohash=function(t){return t=h(t,{length:7}),this.string({length:t.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})},l.prototype.geojson=function(t){return this.latitude(t)+", "+this.longitude(t)+", "+this.altitude(t)},l.prototype.latitude=function(t){const[e,i,n]=["ddm","dms","dd"],r=(t=h(t,t&&t.format&&[e,i].includes(t.format.toLowerCase())?{min:0,max:89,fixed:4}:{fixed:5,min:-90,max:90,format:n})).format.toLowerCase();switch(r!==e&&r!==i||(c(t.min<0||t.min>89,"Chance: Min specified is out of range. Should be between 0 - 89"),c(t.max<0||t.max>89,"Chance: Max specified is out of range. Should be between 0 - 89"),c(t.fixed>4,"Chance: Fixed specified should be below or equal to 4")),r){case e:return this.integer({min:t.min,max:t.max})+""+this.floating({min:0,max:59,fixed:t.fixed});case i:return this.integer({min:t.min,max:t.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59,fixed:t.fixed})+"";default:return this.floating({min:t.min,max:t.max,fixed:t.fixed})}},l.prototype.longitude=function(t){const[e,i,n]=["ddm","dms","dd"],r=(t=h(t,t&&t.format&&[e,i].includes(t.format.toLowerCase())?{min:0,max:179,fixed:4}:{fixed:5,min:-180,max:180,format:n})).format.toLowerCase();switch(r!==e&&r!==i||(c(t.min<0||t.min>179,"Chance: Min specified is out of range. Should be between 0 - 179"),c(t.max<0||t.max>179,"Chance: Max specified is out of range. Should be between 0 - 179"),c(t.fixed>4,"Chance: Fixed specified should be below or equal to 4")),r){case e:return this.integer({min:t.min,max:t.max})+""+this.floating({min:0,max:59.9999,fixed:t.fixed});case i:return this.integer({min:t.min,max:t.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59.9999,fixed:t.fixed})+"";default:return this.floating({min:t.min,max:t.max,fixed:t.fixed})}},l.prototype.phone=function(t){var e,i,n=this,r=function(t){var e=[];return t.sections.forEach((function(t){e.push(n.string({pool:"0123456789",length:t}))})),t.area+e.join(" ")};switch((t=h(t,{formatted:!0,country:"us",mobile:!1})).formatted||(t.parens=!1),t.country){case"fr":t.mobile?(e=this.pick(["06","07"])+n.string({pool:"0123456789",length:8}),i=t.formatted?e.match(/../g).join(" "):e):(e=this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+n.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+n.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+n.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+n.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+n.string({pool:"0123456789",length:6}),"09"+n.string({pool:"0123456789",length:8})]),i=t.formatted?e.match(/../g).join(" "):e);break;case"uk":t.mobile?(e=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]),i=t.formatted?r(e):r(e).replace(" ","")):(e=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[6]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[6]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[6]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[6]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[6]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[6]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[6]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[6]}]),i=t.formatted?r(e):r(e).replace(" ","","g"));break;case"za":t.mobile?(e=this.pick(["060"+this.pick(["3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:6}),"061"+this.pick(["0","1","2","3","4","5","8"])+n.string({pool:"0123456789",length:6}),"06"+n.string({pool:"0123456789",length:7}),"071"+this.pick(["0","1","2","3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:6}),"07"+this.pick(["2","3","4","6","7","8","9"])+n.string({pool:"0123456789",length:7}),"08"+this.pick(["0","1","2","3","4","5"])+n.string({pool:"0123456789",length:7})]),i=t.formatted||e):(e=this.pick(["01"+this.pick(["0","1","2","3","4","5","6","7","8"])+n.string({pool:"0123456789",length:7}),"02"+this.pick(["1","2","3","4","7","8"])+n.string({pool:"0123456789",length:7}),"03"+this.pick(["1","2","3","5","6","9"])+n.string({pool:"0123456789",length:7}),"04"+this.pick(["1","2","3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:7}),"05"+this.pick(["1","3","4","6","7","8"])+n.string({pool:"0123456789",length:7})]),i=t.formatted||e);break;case"us":var s=this.areacode(t).toString(),a=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString(),o=this.natural({min:1e3,max:9999}).toString();i=t.formatted?s+" "+a+"-"+o:s+a+o;break;case"br":var u,l=this.pick(["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"]);u=t.mobile?"9"+n.string({pool:"0123456789",length:4}):this.natural({min:2e3,max:5999}).toString();var c=n.string({pool:"0123456789",length:4});i=t.formatted?"("+l+") "+u+"-"+c:l+u+c}return i},l.prototype.postal=function(){return this.character({pool:"XVTSRPNKLMHJGECBA"})+this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+" "+(this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+this.natural({max:9}))},l.prototype.postcode=function(){return this.pick(this.get("postcodeAreas")).code+this.natural({max:9})+(this.bool()?this.character({alpha:!0,casing:"upper"}):"")+" "+(this.natural({max:9})+(this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})))},l.prototype.counties=function(t){return t=h(t,{country:"uk"}),this.get("counties")[t.country.toLowerCase()]},l.prototype.county=function(t){return this.pick(this.counties(t)).name},l.prototype.provinces=function(t){return t=h(t,{country:"ca"}),this.get("provinces")[t.country.toLowerCase()]},l.prototype.province=function(t){return t&&t.full?this.pick(this.provinces(t)).name:this.pick(this.provinces(t)).abbreviation},l.prototype.state=function(t){return t&&t.full?this.pick(this.states(t)).name:this.pick(this.states(t)).abbreviation},l.prototype.states=function(t){var e;switch((t=h(t,{country:"us",us_states_and_dc:!0})).country.toLowerCase()){case"us":var i=this.get("us_states_and_dc"),n=this.get("territories"),r=this.get("armed_forces");e=[],t.us_states_and_dc&&(e=e.concat(i)),t.territories&&(e=e.concat(n)),t.armed_forces&&(e=e.concat(r));break;case"it":case"mx":e=this.get("country_regions")[t.country.toLowerCase()];break;case"uk":e=this.get("counties")[t.country.toLowerCase()]}return e},l.prototype.street=function(t){var e;switch((t=h(t,{country:"us",syllables:2})).country.toLowerCase()){case"us":e=this.word({syllables:t.syllables}),e=this.capitalize(e),e+=" ",e+=t.short_suffix?this.street_suffix(t).abbreviation:this.street_suffix(t).name;break;case"it":e=this.word({syllables:t.syllables}),e=this.capitalize(e),e=(t.short_suffix?this.street_suffix(t).abbreviation:this.street_suffix(t).name)+" "+e}return e},l.prototype.street_suffix=function(t){return t=h(t,{country:"us"}),this.pick(this.street_suffixes(t))},l.prototype.street_suffixes=function(t){return t=h(t,{country:"us"}),this.get("street_suffixes")[t.country.toLowerCase()]},l.prototype.zip=function(t){var e=this.n(this.natural,5,{max:9});return t&&!0===t.plusfour&&(e.push("-"),e=e.concat(this.n(this.natural,4,{max:9}))),e.join("")},l.prototype.ampm=function(){return this.bool()?"am":"pm"},l.prototype.date=function(t){var e,i;if(t&&(t.min||t.max)){var n=void 0!==(t=h(t,{american:!0,string:!1})).min?t.min.getTime():1,r=void 0!==t.max?t.max.getTime():864e13;i=new Date(this.integer({min:n,max:r}))}else{var s=this.month({raw:!0}),a=s.days;t&&t.month&&(a=this.get("months")[(t.month%12+12)%12].days),t=h(t,{year:parseInt(this.year(),10),month:s.numeric-1,day:this.natural({min:1,max:a}),hour:this.hour({twentyfour:!0}),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:!0,string:!1}),i=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond)}return e=t.american?i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear():i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear(),t.string?e:i},l.prototype.hammertime=function(t){return this.date(t).getTime()},l.prototype.hour=function(t){return c((t=h(t,{min:t&&t.twentyfour?0:1,max:t&&t.twentyfour?23:12})).min<0,"Chance: Min cannot be less than 0."),c(t.twentyfour&&t.max>23,"Chance: Max cannot be greater than 23 for twentyfour option."),c(!t.twentyfour&&t.max>12,"Chance: Max cannot be greater than 12."),c(t.min>t.max,"Chance: Min cannot be greater than Max."),this.natural({min:t.min,max:t.max})},l.prototype.millisecond=function(){return this.natural({max:999})},l.prototype.minute=l.prototype.second=function(t){return c((t=h(t,{min:0,max:59})).min<0,"Chance: Min cannot be less than 0."),c(t.max>59,"Chance: Max cannot be greater than 59."),c(t.min>t.max,"Chance: Min cannot be greater than Max."),this.natural({min:t.min,max:t.max})},l.prototype.month=function(t){c((t=h(t,{min:1,max:12})).min<1,"Chance: Min cannot be less than 1."),c(t.max>12,"Chance: Max cannot be greater than 12."),c(t.min>t.max,"Chance: Min cannot be greater than Max.");var e=this.pick(this.months().slice(t.min-1,t.max));return t.raw?e:e.name},l.prototype.months=function(){return this.get("months")},l.prototype.second=function(){return this.natural({max:59})},l.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})},l.prototype.weekday=function(t){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"];return(t=h(t,{weekday_only:!1})).weekday_only||(e.push("Saturday"),e.push("Sunday")),this.pickone(e)},l.prototype.year=function(t){return(t=h(t,{min:(new Date).getFullYear()})).max=void 0!==t.max?t.max:t.min+100,this.natural(t).toString()},l.prototype.cc=function(t){var e,i,n;return i=(e=(t=h(t)).type?this.cc_type({name:t.type,raw:!0}):this.cc_type({raw:!0})).prefix.split(""),n=e.length-e.prefix.length-1,(i=i.concat(this.n(this.integer,n,{min:0,max:9}))).push(this.luhn_calculate(i.join(""))),i.join("")},l.prototype.cc_types=function(){return this.get("cc_types")},l.prototype.cc_type=function(t){t=h(t);var e=this.cc_types(),i=null;if(t.name){for(var n=0;n<e.length;n++)if(e[n].name===t.name||e[n].short_name===t.name){i=e[n];break}if(null===i)throw new RangeError("Chance: Credit card type '"+t.name+"' is not supported")}else i=this.pick(e);return t.raw?i:i.name},l.prototype.currency_types=function(){return this.get("currency_types")},l.prototype.currency=function(){return this.pick(this.currency_types())},l.prototype.timezones=function(){return this.get("timezones")},l.prototype.timezone=function(){return this.pick(this.timezones())},l.prototype.currency_pair=function(t){var e=this.unique(this.currency,2,{comparator:function(t,e){return t.reduce((function(t,i){return t||i.code===e.code}),!1)}});return t?e[0].code+"/"+e[1].code:e},l.prototype.dollar=function(t){t=h(t,{max:1e4,min:0});var e=this.floating({min:t.min,max:t.max,fixed:2}).toString(),i=e.split(".")[1];return void 0===i?e+=".00":i.length<2&&(e+="0"),e<0?"-$"+e.replace("-",""):"$"+e},l.prototype.euro=function(t){return Number(this.dollar(t).replace("$","")).toLocaleString()+""},l.prototype.exp=function(t){t=h(t);var e={};return e.year=this.exp_year(),e.year===(new Date).getFullYear().toString()?e.month=this.exp_month({future:!0}):e.month=this.exp_month(),t.raw?e:e.month+"/"+e.year},l.prototype.exp_month=function(t){t=h(t);var e,i,n=(new Date).getMonth()+1;if(t.future&&12!==n)do{e=this.month({raw:!0}).numeric,i=parseInt(e,10)}while(i<=n);else e=this.month({raw:!0}).numeric;return e},l.prototype.exp_year=function(){var t=(new Date).getMonth()+1,e=(new Date).getFullYear();return this.year({min:12===t?e+1:e,max:e+10})},l.prototype.vat=function(t){if("it"===(t=h(t,{country:"it"})).country.toLowerCase())return this.it_vat()},l.prototype.iban=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return this.string({length:2,pool:t})+this.pad(this.integer({min:0,max:99}),2)+this.string({length:4,pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"})+this.pad(this.natural(),this.natural({min:6,max:26}))},l.prototype.it_vat=function(){var t=this.natural({min:1,max:18e5});return(t=this.pad(t,7)+this.pad(this.pick(this.provinces({country:"it"})).code,3))+this.luhn_calculate(t)},l.prototype.cf=function(t){var e=(t=t||{}).gender?t.gender:this.gender(),i=t.first?t.first:this.first({gender:e,nationality:"it"}),n=t.last?t.last:this.last({nationality:"it"}),r=t.birthday?t.birthday:this.birthday(),s=t.city?t.city:this.pickone(["A","B","C","D","E","F","G","H","I","L","M","Z"])+this.pad(this.natural({max:999}),3),a=[],o=function(t,e){var i,n=[];return t.length<3?n=t.split("").concat("XXX".split("")).splice(0,3):(i=t.toUpperCase().split("").map((function(t){return-1!=="BCDFGHJKLMNPRSTVWZ".indexOf(t)?t:void 0})).join(""),i.length>3&&(i=e?i.substr(0,3):i[0]+i.substr(2,2)),i.length<3&&(n=i,i=t.toUpperCase().split("").map((function(t){return-1!=="AEIOU".indexOf(t)?t:void 0})).join("").substr(0,3-n.length)),n+=i),n};return a=a.concat(o(n,!0),o(i),function(t,e,i){return t.getFullYear().toString().substr(2)+["A","B","C","D","E","H","L","M","P","R","S","T"][t.getMonth()]+i.pad(t.getDate()+("female"===e.toLowerCase()?40:0),2)}(r,e,this),s.toUpperCase().split("")).join(""),a+=function(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0,s=0;s<15;s++)r+=s%2!=0?n.indexOf(i[e.indexOf(t[s])]):"BAKPLCQDREVOSFTGUHMINJWZYX".indexOf(i[e.indexOf(t[s])]);return n[r%26]}(a.toUpperCase()),a.toUpperCase()},l.prototype.pl_pesel=function(){for(var t=this.natural({min:1,max:9999999999}),e=this.pad(t,10).split(""),i=0;i<e.length;i++)e[i]=parseInt(e[i]);var n=(1*e[0]+3*e[1]+7*e[2]+9*e[3]+1*e[4]+3*e[5]+7*e[6]+9*e[7]+1*e[8]+3*e[9])%10;return 0!==n&&(n=10-n),e.join("")+n},l.prototype.pl_nip=function(){for(var t=this.natural({min:1,max:999999999}),e=this.pad(t,9).split(""),i=0;i<e.length;i++)e[i]=parseInt(e[i]);var n=(6*e[0]+5*e[1]+7*e[2]+2*e[3]+3*e[4]+4*e[5]+5*e[6]+6*e[7]+7*e[8])%11;return 10===n?this.pl_nip():e.join("")+n},l.prototype.pl_regon=function(){for(var t=this.natural({min:1,max:99999999}),e=this.pad(t,8).split(""),i=0;i<e.length;i++)e[i]=parseInt(e[i]);var n=(8*e[0]+9*e[1]+2*e[2]+3*e[3]+4*e[4]+5*e[5]+6*e[6]+7*e[7])%11;return 10===n&&(n=0),e.join("")+n},l.prototype.note=function(t){t=h(t,{notes:"flatKey"});var e={naturals:["C","D","E","F","G","A","B"],flats:["D","E","G","A","B"],sharps:["C","D","F","G","A"]};return e.all=e.naturals.concat(e.flats.concat(e.sharps)),e.flatKey=e.naturals.concat(e.flats),e.sharpKey=e.naturals.concat(e.sharps),this.pickone(e[t.notes])},l.prototype.midi_note=function(t){return t=h(t,{min:0,max:127}),this.integer({min:t.min,max:t.max})},l.prototype.chord_quality=function(t){var e=["maj","min","aug","dim"];return(t=h(t,{jazz:!0})).jazz&&(e=["maj7","min7","7","sus","dim",""]),this.pickone(e)},l.prototype.chord=function(t){return t=h(t),this.note(t)+this.chord_quality(t)},l.prototype.tempo=function(t){return t=h(t,{min:40,max:320}),this.integer({min:t.min,max:t.max})},l.prototype.coin=function(){return this.bool()?"heads":"tails"},l.prototype.d4=p({min:1,max:4}),l.prototype.d6=p({min:1,max:6}),l.prototype.d8=p({min:1,max:8}),l.prototype.d10=p({min:1,max:10}),l.prototype.d12=p({min:1,max:12}),l.prototype.d20=p({min:1,max:20}),l.prototype.d30=p({min:1,max:30}),l.prototype.d100=p({min:1,max:100}),l.prototype.rpg=function(t,e){if(e=h(e),t){var i=t.toLowerCase().split("d"),n=[];if(2!==i.length||!parseInt(i[0],10)||!parseInt(i[1],10))throw new Error("Chance: Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die");for(var r=i[0];r>0;r--)n[r-1]=this.natural({min:1,max:i[1]});return void 0!==e.sum&&e.sum?n.reduce((function(t,e){return t+e})):n}throw new RangeError("Chance: A type of die roll must be included")},l.prototype.guid=function(t){t=h(t,{version:5});var e="abcdef1234567890";return this.string({pool:e,length:8})+"-"+this.string({pool:e,length:4})+"-"+t.version+this.string({pool:e,length:3})+"-"+this.string({pool:"ab89",length:1})+this.string({pool:e,length:3})+"-"+this.string({pool:e,length:12})},l.prototype.hash=function(t){var e="upper"===(t=h(t,{length:40,casing:"lower"})).casing?a.toUpperCase():a;return this.string({pool:e,length:t.length})},l.prototype.luhn_check=function(t){var e=t.toString();return+e.substring(e.length-1)===this.luhn_calculate(+e.substring(0,e.length-1))},l.prototype.luhn_calculate=function(t){for(var e,i=t.toString().split("").reverse(),n=0,r=0,s=i.length;s>r;++r)e=+i[r],r%2==0&&(e*=2)>9&&(e-=9),n+=e;return 9*n%10},l.prototype.md5=function(t){var e={str:"",key:null,raw:!1};if(t)if("string"==typeof t)e.str=t,t={};else{if("object"!=typeof t)return null;if("Array"===t.constructor)return null}else e.str=this.string(),t={};if(!(e=h(t,e)).str)throw new Error("A parameter is required to return an md5 hash.");return this.bimd5.md5(e.str,e.key,e.raw)},l.prototype.file=function(t){var e,i=t||{},n="fileExtension",r=Object.keys(this.get("fileExtension"));if(e=this.word({length:i.length}),i.extension)return e+"."+i.extension;if(i.extensions){if(Array.isArray(i.extensions))return e+"."+this.pickone(i.extensions);if(i.extensions.constructor===Object){var s=i.extensions,a=Object.keys(s);return e+"."+this.pickone(s[this.pickone(a)])}throw new Error("Chance: Extensions must be an Array or Object")}if(i.fileType){var o=i.fileType;if(-1!==r.indexOf(o))return e+"."+this.pickone(this.get(n)[o]);throw new RangeError("Chance: Expect file type value to be 'raster', 'vector', '3d' or 'document'")}return e+"."+this.pickone(this.get(n)[this.pickone(r)])};var b={firstNames:{male:{en:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],it:["Adolfo","Alberto","Aldo","Alessandro","Alessio","Alfredo","Alvaro","Andrea","Angelo","Angiolo","Antonino","Antonio","Attilio","Benito","Bernardo","Bruno","Carlo","Cesare","Christian","Claudio","Corrado","Cosimo","Cristian","Cristiano","Daniele","Dario","David","Davide","Diego","Dino","Domenico","Duccio","Edoardo","Elia","Elio","Emanuele","Emiliano","Emilio","Enrico","Enzo","Ettore","Fabio","Fabrizio","Federico","Ferdinando","Fernando","Filippo","Francesco","Franco","Gabriele","Giacomo","Giampaolo","Giampiero","Giancarlo","Gianfranco","Gianluca","Gianmarco","Gianni","Gino","Giorgio","Giovanni","Giuliano","Giulio","Giuseppe","Graziano","Gregorio","Guido","Iacopo","Jacopo","Lapo","Leonardo","Lorenzo","Luca","Luciano","Luigi","Manuel","Marcello","Marco","Marino","Mario","Massimiliano","Massimo","Matteo","Mattia","Maurizio","Mauro","Michele","Mirko","Mohamed","Nello","Neri","Niccol","Nicola","Osvaldo","Otello","Paolo","Pier Luigi","Piero","Pietro","Raffaele","Remo","Renato","Renzo","Riccardo","Roberto","Rolando","Romano","Salvatore","Samuele","Sandro","Sergio","Silvano","Simone","Stefano","Thomas","Tommaso","Ubaldo","Ugo","Umberto","Valerio","Valter","Vasco","Vincenzo","Vittorio"],nl:["Aaron","Abel","Adam","Adriaan","Albert","Alexander","Ali","Arjen","Arno","Bart","Bas","Bastiaan","Benjamin","Bob","Boris","Bram","Brent","Cas","Casper","Chris","Christiaan","Cornelis","Daan","Daley","Damian","Dani","Daniel","Danil","David","Dean","Dirk","Dylan","Egbert","Elijah","Erik","Erwin","Evert","Ezra","Fabian","Fedde","Finn","Florian","Floris","Frank","Frans","Frederik","Freek","Geert","Gerard","Gerben","Gerrit","Gijs","Guus","Hans","Hendrik","Henk","Herman","Hidde","Hugo","Jaap","Jan Jaap","Jan-Willem","Jack","Jacob","Jan","Jason","Jasper","Jayden","Jelle","Jelte","Jens","Jeroen","Jesse","Jim","Job","Joep","Johannes","John","Jonathan","Joris","Joshua","Jol","Julian","Kees","Kevin","Koen","Lars","Laurens","Leendert","Lennard","Lodewijk","Luc","Luca","Lucas","Lukas","Luuk","Maarten","Marcus","Martijn","Martin","Matthijs","Maurits","Max","Mees","Melle","Mick","Mika","Milan","Mohamed","Mohammed","Morris","Muhammed","Nathan","Nick","Nico","Niek","Niels","Noah","Noud","Olivier","Oscar","Owen","Paul","Pepijn","Peter","Pieter","Pim","Quinten","Reinier","Rens","Robin","Ruben","Sam","Samuel","Sander","Sebastiaan","Sem","Sep","Sepp","Siem","Simon","Stan","Stef","Steven","Stijn","Sven","Teun","Thijmen","Thijs","Thomas","Tijn","Tim","Timo","Tobias","Tom","Victor","Vince","Willem","Wim","Wouter","Yusuf"],fr:["Aaron","Abdon","Abel","Ablard","Abelin","Abondance","Abraham","Absalon","Acace","Achaire","Achille","Adalard","Adalbald","Adalbron","Adalbert","Adalric","Adam","Adegrin","Adel","Adelin","Andelin","Adelphe","Adam","Adodat","Adhmar","Adjutor","Adolphe","Adonis","Adon","Adrien","Agapet","Agathange","Agathon","Agilbert","Agnor","Agnan","Aignan","Agrippin","Aimable","Aim","Alain","Alban","Albin","Aubin","Albric","Albert","Albertet","Alcibiade","Alcide","Alce","Alcime","Aldonce","Aldric","Aldric","Aleaume","Alexandre","Alexis","Alix","Alliaume","Aleaume","Almine","Almire","Alos","Alphe","Alphonse","Alpinien","Alverde","Amalric","Amaury","Amandin","Amant","Ambroise","Amde","Amlien","Amiel","Amour","Anal","Anastase","Anatole","Ancelin","Andol","Andoche","Andr","Andoche","Ange","Angelin","Angilbe","Anglebert","Angoustan","Anicet","Anne","Annibal","Ansbert","Anselme","Anthelme","Antheaume","Anthime","Antide","Antoine","Antonius","Antonin","Apollinaire","Apollon","Aquilin","Arcade","Archambaud","Archambeau","Archange","Archibald","Arian","Ariel","Ariste","Aristide","Armand","Armel","Armin","Arnould","Arnaud","Arolde","Arsne","Arsino","Arthaud","Arthme","Arthur","Ascelin","Athanase","Aubry","Audebert","Audouin","Audran","Audric","Auguste","Augustin","Aurle","Aurlien","Aurian","Auxence","Axel","Aymard","Aymeric","Aymon","Aymond","Balthazar","Baptiste","Barnab","Barthlemy","Bartime","Basile","Bastien","Baudouin","Bnigne","Benjamin","Benot","Brenger","Brard","Bernard","Bertrand","Blaise","Bon","Boniface","Bouchard","Brice","Brieuc","Bruno","Brunon","Calixte","Calliste","Camlien","Camille","Camillien","Candide","Caribert","Carloman","Cassandre","Cassien","Cdric","Cleste","Clestin","Clien","Csaire","Csar","Charles","Charlemagne","Childebert","Chilpric","Chrtien","Christian","Christodule","Christophe","Chrysostome","Clarence","Claude","Claudien","Clandre","Clment","Clotaire","Cme","Constance","Constant","Constantin","Corentin","Cyprien","Cyriaque","Cyrille","Cyril","Damien","Daniel","David","Delphin","Denis","Dsir","Didier","Dieudonn","Dimitri","Dominique","Dorian","Dorothe","Edgard","Edmond","douard","leuthre","lie","lise","meric","mile","milien","Emmanuel","Enguerrand","piphane","ric","Esprit","Ernest","tienne","Eubert","Eudes","Eudoxe","Eugne","Eusbe","Eustache","variste","vrard","Fabien","Fabrice","Falba","Flicit","Flix","Ferdinand","Fiacre","Fidle","Firmin","Flavien","Flodoard","Florent","Florentin","Florestan","Florian","Fortun","Foulques","Francisque","Franois","Franais","Franciscus","Francs","Frdric","Fulbert","Fulcran","Fulgence","Gabin","Gabriel","Gal","Garnier","Gaston","Gaspard","Gatien","Gaud","Gautier","Gdon","Geoffroy","Georges","Graud","Grard","Gerbert","Germain","Gervais","Ghislain","Gilbert","Gilles","Girart","Gislebert","Gondebaud","Gonthier","Gontran","Gonzague","Grgoire","Gurin","Gui","Guillaume","Gustave","Guy","Guyot","Hardouin","Hector","Hdelin","Hlier","Henri","Herbert","Herluin","Herv","Hilaire","Hildebert","Hincmar","Hippolyte","Honor","Hubert","Hugues","Innocent","Isabeau","Isidore","Jacques","Japhet","Jason","Jean","Jeannel","Jeannot","Jrmie","Jrme","Joachim","Joanny","Job","Jocelyn","Jol","Johan","Jonas","Jonathan","Joseph","Josse","Josselin","Jourdain","Jude","Judical","Jules","Julien","Juste","Justin","Lambert","Landry","Laurent","Lazare","Landre","Lon","Lonard","Lopold","Leu","Loup","Leufroy","Libre","Litald","Lionel","Loc","Longin","Lorrain","Lorraine","Lothaire","Louis","Loup","Luc","Lucas","Lucien","Ludolphe","Ludovic","Macaire","Malo","Mamert","Manass","Marc","Marceau","Marcel","Marcelin","Marius","Marseille","Martial","Martin","Mathurin","Matthias","Mathias","Matthieu","Maugis","Maurice","Mauricet","Maxence","Maxime","Maximilien","Mayeul","Mdric","Melchior","Mence","Merlin","Mrove","Michal","Michel","Mose","Morgan","Nathan","Nathanal","Narcisse","Nhmie","Nestor","Nestor","Nicphore","Nicolas","No","Nol","Norbert","Normand","Normands","Octave","Odilon","Odon","Oger","Olivier","Oury","Pacme","Palmon","Parfait","Pascal","Paterne","Patrice","Paul","Ppin","Perceval","Philmon","Philibert","Philippe","Philothe","Pie","Pierre","Pierrick","Prosper","Quentin","Raoul","Raphal","Raymond","Rgis","Rjean","Rmi","Renaud","Ren","Reybaud","Richard","Robert","Roch","Rodolphe","Rodrigue","Roger","Roland","Romain","Romuald","Romo","Rome","Ronan","Roselin","Salomon","Samuel","Savin","Savinien","Scholastique","Sbastien","Sraphin","Serge","Sverin","Sidoine","Sigebert","Sigismond","Silvre","Simon","Simon","Sixte","Stanislas","Stphane","Stephan","Sylvain","Sylvestre","Tancrde","Tanguy","Taurin","Thodore","Thodose","Thophile","Thophraste","Thibault","Thibert","Thierry","Thomas","Timolon","Timothe","Titien","Tonnin","Toussaint","Trajan","Tristan","Turold","Tim","Ulysse","Urbain","Valentin","Valre","Valry","Venance","Venant","Venceslas","Vianney","Victor","Victorien","Victorin","Vigile","Vincent","Vital","Vitalien","Vivien","Waleran","Wandrille","Xavier","Xnophon","Yves","Zacharie","Zach","Zphirin"]},female:{en:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"],it:["Ada","Adriana","Alessandra","Alessia","Alice","Angela","Anna","Anna Maria","Annalisa","Annita","Annunziata","Antonella","Arianna","Asia","Assunta","Aurora","Barbara","Beatrice","Benedetta","Bianca","Bruna","Camilla","Carla","Carlotta","Carmela","Carolina","Caterina","Catia","Cecilia","Chiara","Cinzia","Clara","Claudia","Costanza","Cristina","Daniela","Debora","Diletta","Dina","Donatella","Elena","Eleonora","Elisa","Elisabetta","Emanuela","Emma","Eva","Federica","Fernanda","Fiorella","Fiorenza","Flora","Franca","Francesca","Gabriella","Gaia","Gemma","Giada","Gianna","Gina","Ginevra","Giorgia","Giovanna","Giulia","Giuliana","Giuseppa","Giuseppina","Grazia","Graziella","Greta","Ida","Ilaria","Ines","Iolanda","Irene","Irma","Isabella","Jessica","Laura","Lea","Letizia","Licia","Lidia","Liliana","Lina","Linda","Lisa","Livia","Loretta","Luana","Lucia","Luciana","Lucrezia","Luisa","Manuela","Mara","Marcella","Margherita","Maria","Maria Cristina","Maria Grazia","Maria Luisa","Maria Pia","Maria Teresa","Marina","Marisa","Marta","Martina","Marzia","Matilde","Melissa","Michela","Milena","Mirella","Monica","Natalina","Nella","Nicoletta","Noemi","Olga","Paola","Patrizia","Piera","Pierina","Raffaella","Rebecca","Renata","Rina","Rita","Roberta","Rosa","Rosanna","Rossana","Rossella","Sabrina","Sandra","Sara","Serena","Silvana","Silvia","Simona","Simonetta","Sofia","Sonia","Stefania","Susanna","Teresa","Tina","Tiziana","Tosca","Valentina","Valeria","Vanda","Vanessa","Vanna","Vera","Veronica","Vilma","Viola","Virginia","Vittoria"],nl:["Ada","Arianne","Afke","Amanda","Amber","Amy","Aniek","Anita","Anja","Anna","Anne","Annelies","Annemarie","Annette","Anouk","Astrid","Aukje","Barbara","Bianca","Carla","Carlijn","Carolien","Chantal","Charlotte","Claudia","Danille","Debora","Diane","Dora","Eline","Elise","Ella","Ellen","Emma","Esmee","Evelien","Esther","Erica","Eva","Femke","Fleur","Floor","Froukje","Gea","Gerda","Hanna","Hanneke","Heleen","Hilde","Ilona","Ina","Inge","Ingrid","Iris","Isabel","Isabelle","Janneke","Jasmijn","Jeanine","Jennifer","Jessica","Johanna","Joke","Julia","Julie","Karen","Karin","Katja","Kim","Lara","Laura","Lena","Lianne","Lieke","Lilian","Linda","Lisa","Lisanne","Lotte","Louise","Maaike","Manon","Marga","Maria","Marissa","Marit","Marjolein","Martine","Marleen","Melissa","Merel","Miranda","Michelle","Mirjam","Mirthe","Naomi","Natalie","Nienke","Nina","Noortje","Olivia","Patricia","Paula","Paulien","Ramona","Ria","Rianne","Roos","Rosanne","Ruth","Sabrina","Sandra","Sanne","Sara","Saskia","Silvia","Sofia","Sophie","Sonja","Suzanne","Tamara","Tess","Tessa","Tineke","Valerie","Vanessa","Veerle","Vera","Victoria","Wendy","Willeke","Yvonne","Zo"],fr:["Abdon","Abel","Abigalle","Abigal","Acacius","Acanthe","Adalbert","Adalsinde","Adegrine","Adlade","Adle","Adlie","Adeline","Adeltrude","Adolphe","Adonis","Adraste","Adrehilde","Adrienne","Agathe","Agilbert","Agla","Aignan","Agneflte","Agns","Agrippine","Aim","Alaine","Alas","Albane","Albrade","Alberte","Alcide","Alcine","Alcyone","Aldegonde","Aleth","Alexandrine","Alexine","Alice","Alinor","Aliette","Aline","Alix","Aliz","Alose","Aloyse","Alphonsine","Althe","Amaliane","Amalthe","Amande","Amandine","Amant","Amarande","Amaranthe","Amaryllis","Ambre","Ambroisie","Amlie","Amthyste","Aminte","Anal","Anas","Anastasie","Anatole","Ancelin","Andre","Anmone","Angadrme","Angle","Angeline","Anglique","Angilbert","Anicet","Annabelle","Anne","Annette","Annick","Annie","Annonciade","Ansbert","Anstrudie","Anthelme","Antigone","Antoinette","Antonine","Aphlie","Apolline","Apollonie","Aquiline","Arabelle","Arcadie","Archange","Argine","Ariane","Aricie","Ariel","Arielle","Arlette","Armance","Armande","Armandine","Armelle","Armide","Armelle","Armin","Arnaud","Arsne","Arsino","Artmis","Arthur","Ascelin","Ascension","Assomption","Astart","Astrie","Astre","Astrid","Athalie","Athanasie","Athina","Aube","Albert","Aude","Audrey","Augustine","Aure","Aurlie","Aurlien","Aurle","Aurore","Auxence","Aveline","Abigalle","Avoye","Axelle","Aymard","Azale","Adle","Adeline","Barbe","Basilisse","Bathilde","Batrice","Batrix","Bndicte","Brengre","Bernadette","Berthe","Bertille","Beuve","Blanche","Blanc","Blandine","Brigitte","Brune","Brunehilde","Callista","Camille","Capucine","Carine","Caroline","Cassandre","Catherine","Ccile","Cleste","Clestine","Cline","Chantal","Charlne","Charline","Charlotte","Chlo","Christelle","Christiane","Christine","Claire","Clara","Claude","Claudine","Clarisse","Clmence","Clmentine","Clo","Clio","Clotilde","Coline","Conception","Constance","Coralie","Coraline","Corentine","Corinne","Cyrielle","Daniel","Daniel","Daphn","Dbora","Delphine","Denise","Diane","Dieudonn","Dominique","Doriane","Dorothe","Douce","dith","Edme","lonore","liane","lia","liette","lisabeth","lise","Ella","lodie","lose","Elsa","meline","mrance","mrentienne","mrencie","milie","Emma","Emmanuelle","Emmelie","Ernestine","Esther","Estelle","Eudoxie","Eugnie","Eulalie","Euphrasie","Eusbie","vangline","Eva","ve","velyne","Fanny","Fantine","Faustine","Flicie","Fernande","Flavie","Fleur","Flore","Florence","Florie","Fortun","France","Francia","Franoise","Francine","Gabrielle","Galle","Garance","Genevive","Georgette","Gerberge","Germaine","Gertrude","Gisle","Guenivre","Guilhemine","Guillemette","Gustave","Gwenael","Hlne","Hlose","Henriette","Hermine","Hermione","Hippolyte","Honorine","Hortense","Huguette","Ines","Irne","Irina","Iris","Isabeau","Isabelle","Iseult","Isolde","Ismrie","Jacinthe","Jacqueline","Jade","Janine","Jeanne","Jocelyne","Jolle","Josphine","Judith","Julia","Julie","Jules","Juliette","Justine","Katy","Kathy","Katie","Laura","Laure","Laureline","Laurence","Laurene","Lauriane","Laurianne","Laurine","La","Lna","Lonie","Lon","Lontine","Lorraine","Lucie","Lucienne","Lucille","Ludivine","Lydie","Lydie","Megane","Madeleine","Magali","Maguelone","Mallaury","Manon","Marceline","Margot","Marguerite","Marianne","Marie","Myriam","Marie","Marine","Marion","Marlne","Marthe","Martine","Mathilde","Maud","Maureen","Mauricette","Maxime","Mlanie","Melissa","Mlissandre","Mlisande","Mlodie","Michel","Micheline","Mireille","Miriam","Mose","Monique","Morgane","Muriel","Mylne","Nadge","Nadine","Nathalie","Nicole","Nicolette","Nine","Nol","Nomie","Ocane","Odette","Odile","Olive","Olivia","Olympe","Ombline","Ombeline","Ophlie","Oriande","Oriane","Ozanne","Pascale","Pascaline","Paule","Paulette","Pauline","Priscille","Prisca","Prisque","Pcine","Plagie","Pnlope","Perrine","Ptronille","Philippine","Philomne","Philothe","Primerose","Prudence","Pulchrie","Quentine","Quita","Quintia","Quintilla","Rachel","Raphalle","Raymonde","Rebecca","Rgine","Rjeanne","Ren","Rita","Rita","Rolande","Romane","Rosalie","Rose","Roseline","Sabine","Salom","Sandra","Sandrine","Sarah","Sgolne","Sverine","Sibylle","Simone","Sixt","Solange","Soline","Solne","Sophie","Stphanie","Suzanne","Sylvain","Sylvie","Tatiana","Thas","Thodora","Thrse","Tiphaine","Ursule","Valentine","Valrie","Vronique","Victoire","Victorine","Vinciane","Violette","Virginie","Viviane","Xavire","Yolande","Ysaline","Yvette","Yvonne","Zlie","Zita","Zo"]}},lastNames:{en:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],it:["Acciai","Aglietti","Agostini","Agresti","Ahmed","Aiazzi","Albanese","Alberti","Alessi","Alfani","Alinari","Alterini","Amato","Ammannati","Ancillotti","Andrei","Andreini","Andreoni","Angeli","Anichini","Antonelli","Antonini","Arena","Ariani","Arnetoli","Arrighi","Baccani","Baccetti","Bacci","Bacherini","Badii","Baggiani","Baglioni","Bagni","Bagnoli","Baldassini","Baldi","Baldini","Ballerini","Balli","Ballini","Balloni","Bambi","Banchi","Bandinelli","Bandini","Bani","Barbetti","Barbieri","Barchielli","Bardazzi","Bardelli","Bardi","Barducci","Bargellini","Bargiacchi","Barni","Baroncelli","Baroncini","Barone","Baroni","Baronti","Bartalesi","Bartoletti","Bartoli","Bartolini","Bartoloni","Bartolozzi","Basagni","Basile","Bassi","Batacchi","Battaglia","Battaglini","Bausi","Becagli","Becattini","Becchi","Becucci","Bellandi","Bellesi","Belli","Bellini","Bellucci","Bencini","Benedetti","Benelli","Beni","Benini","Bensi","Benucci","Benvenuti","Berlincioni","Bernacchioni","Bernardi","Bernardini","Berni","Bernini","Bertelli","Berti","Bertini","Bessi","Betti","Bettini","Biagi","Biagini","Biagioni","Biagiotti","Biancalani","Bianchi","Bianchini","Bianco","Biffoli","Bigazzi","Bigi","Biliotti","Billi","Binazzi","Bindi","Bini","Biondi","Bizzarri","Bocci","Bogani","Bolognesi","Bonaiuti","Bonanni","Bonciani","Boncinelli","Bondi","Bonechi","Bongini","Boni","Bonini","Borchi","Boretti","Borghi","Borghini","Borgioli","Borri","Borselli","Boschi","Bottai","Bracci","Braccini","Brandi","Braschi","Bravi","Brazzini","Breschi","Brilli","Brizzi","Brogelli","Brogi","Brogioni","Brunelli","Brunetti","Bruni","Bruno","Brunori","Bruschi","Bucci","Bucciarelli","Buccioni","Bucelli","Bulli","Burberi","Burchi","Burgassi","Burroni","Bussotti","Buti","Caciolli","Caiani","Calabrese","Calamai","Calamandrei","Caldini","Calo'","Calonaci","Calosi","Calvelli","Cambi","Camiciottoli","Cammelli","Cammilli","Campolmi","Cantini","Capanni","Capecchi","Caponi","Cappelletti","Cappelli","Cappellini","Cappugi","Capretti","Caputo","Carbone","Carboni","Cardini","Carlesi","Carletti","Carli","Caroti","Carotti","Carrai","Carraresi","Carta","Caruso","Casalini","Casati","Caselli","Casini","Castagnoli","Castellani","Castelli","Castellucci","Catalano","Catarzi","Catelani","Cavaciocchi","Cavallaro","Cavallini","Cavicchi","Cavini","Ceccarelli","Ceccatelli","Ceccherelli","Ceccherini","Cecchi","Cecchini","Cecconi","Cei","Cellai","Celli","Cellini","Cencetti","Ceni","Cenni","Cerbai","Cesari","Ceseri","Checcacci","Checchi","Checcucci","Cheli","Chellini","Chen","Cheng","Cherici","Cherubini","Chiaramonti","Chiarantini","Chiarelli","Chiari","Chiarini","Chiarugi","Chiavacci","Chiesi","Chimenti","Chini","Chirici","Chiti","Ciabatti","Ciampi","Cianchi","Cianfanelli","Cianferoni","Ciani","Ciapetti","Ciappi","Ciardi","Ciatti","Cicali","Ciccone","Cinelli","Cini","Ciobanu","Ciolli","Cioni","Cipriani","Cirillo","Cirri","Ciucchi","Ciuffi","Ciulli","Ciullini","Clemente","Cocchi","Cognome","Coli","Collini","Colombo","Colzi","Comparini","Conforti","Consigli","Conte","Conti","Contini","Coppini","Coppola","Corsi","Corsini","Corti","Cortini","Cosi","Costa","Costantini","Costantino","Cozzi","Cresci","Crescioli","Cresti","Crini","Curradi","D'Agostino","D'Alessandro","D'Amico","D'Angelo","Daddi","Dainelli","Dallai","Danti","Davitti","De Angelis","De Luca","De Marco","De Rosa","De Santis","De Simone","De Vita","Degl'Innocenti","Degli Innocenti","Dei","Del Lungo","Del Re","Di Marco","Di Stefano","Dini","Diop","Dobre","Dolfi","Donati","Dondoli","Dong","Donnini","Ducci","Dumitru","Ermini","Esposito","Evangelisti","Fabbri","Fabbrini","Fabbrizzi","Fabbroni","Fabbrucci","Fabiani","Facchini","Faggi","Fagioli","Failli","Faini","Falciani","Falcini","Falcone","Fallani","Falorni","Falsini","Falugiani","Fancelli","Fanelli","Fanetti","Fanfani","Fani","Fantappie'","Fantechi","Fanti","Fantini","Fantoni","Farina","Fattori","Favilli","Fedi","Fei","Ferrante","Ferrara","Ferrari","Ferraro","Ferretti","Ferri","Ferrini","Ferroni","Fiaschi","Fibbi","Fiesoli","Filippi","Filippini","Fini","Fioravanti","Fiore","Fiorentini","Fiorini","Fissi","Focardi","Foggi","Fontana","Fontanelli","Fontani","Forconi","Formigli","Forte","Forti","Fortini","Fossati","Fossi","Francalanci","Franceschi","Franceschini","Franchi","Franchini","Franci","Francini","Francioni","Franco","Frassineti","Frati","Fratini","Frilli","Frizzi","Frosali","Frosini","Frullini","Fusco","Fusi","Gabbrielli","Gabellini","Gagliardi","Galanti","Galardi","Galeotti","Galletti","Galli","Gallo","Gallori","Gambacciani","Gargani","Garofalo","Garuglieri","Gashi","Gasperini","Gatti","Gelli","Gensini","Gentile","Gentili","Geri","Gerini","Gheri","Ghini","Giachetti","Giachi","Giacomelli","Gianassi","Giani","Giannelli","Giannetti","Gianni","Giannini","Giannoni","Giannotti","Giannozzi","Gigli","Giordano","Giorgetti","Giorgi","Giovacchini","Giovannelli","Giovannetti","Giovannini","Giovannoni","Giuliani","Giunti","Giuntini","Giusti","Gonnelli","Goretti","Gori","Gradi","Gramigni","Grassi","Grasso","Graziani","Grazzini","Greco","Grifoni","Grillo","Grimaldi","Grossi","Gualtieri","Guarducci","Guarino","Guarnieri","Guasti","Guerra","Guerri","Guerrini","Guidi","Guidotti","He","Hoxha","Hu","Huang","Iandelli","Ignesti","Innocenti","Jin","La Rosa","Lai","Landi","Landini","Lanini","Lapi","Lapini","Lari","Lascialfari","Lastrucci","Latini","Lazzeri","Lazzerini","Lelli","Lenzi","Leonardi","Leoncini","Leone","Leoni","Lepri","Li","Liao","Lin","Linari","Lippi","Lisi","Livi","Lombardi","Lombardini","Lombardo","Longo","Lopez","Lorenzi","Lorenzini","Lorini","Lotti","Lu","Lucchesi","Lucherini","Lunghi","Lupi","Madiai","Maestrini","Maffei","Maggi","Maggini","Magherini","Magini","Magnani","Magnelli","Magni","Magnolfi","Magrini","Malavolti","Malevolti","Manca","Mancini","Manetti","Manfredi","Mangani","Mannelli","Manni","Mannini","Mannucci","Manuelli","Manzini","Marcelli","Marchese","Marchetti","Marchi","Marchiani","Marchionni","Marconi","Marcucci","Margheri","Mari","Mariani","Marilli","Marinai","Marinari","Marinelli","Marini","Marino","Mariotti","Marsili","Martelli","Martinelli","Martini","Martino","Marzi","Masi","Masini","Masoni","Massai","Materassi","Mattei","Matteini","Matteucci","Matteuzzi","Mattioli","Mattolini","Matucci","Mauro","Mazzanti","Mazzei","Mazzetti","Mazzi","Mazzini","Mazzocchi","Mazzoli","Mazzoni","Mazzuoli","Meacci","Mecocci","Meini","Melani","Mele","Meli","Mengoni","Menichetti","Meoni","Merlini","Messeri","Messina","Meucci","Miccinesi","Miceli","Micheli","Michelini","Michelozzi","Migliori","Migliorini","Milani","Miniati","Misuri","Monaco","Montagnani","Montagni","Montanari","Montelatici","Monti","Montigiani","Montini","Morandi","Morandini","Morelli","Moretti","Morganti","Mori","Morini","Moroni","Morozzi","Mugnai","Mugnaini","Mustafa","Naldi","Naldini","Nannelli","Nanni","Nannini","Nannucci","Nardi","Nardini","Nardoni","Natali","Ndiaye","Nencetti","Nencini","Nencioni","Neri","Nesi","Nesti","Niccolai","Niccoli","Niccolini","Nigi","Nistri","Nocentini","Noferini","Novelli","Nucci","Nuti","Nutini","Oliva","Olivieri","Olmi","Orlandi","Orlandini","Orlando","Orsini","Ortolani","Ottanelli","Pacciani","Pace","Paci","Pacini","Pagani","Pagano","Paggetti","Pagliai","Pagni","Pagnini","Paladini","Palagi","Palchetti","Palloni","Palmieri","Palumbo","Pampaloni","Pancani","Pandolfi","Pandolfini","Panerai","Panichi","Paoletti","Paoli","Paolini","Papi","Papini","Papucci","Parenti","Parigi","Parisi","Parri","Parrini","Pasquini","Passeri","Pecchioli","Pecorini","Pellegrini","Pepi","Perini","Perrone","Peruzzi","Pesci","Pestelli","Petri","Petrini","Petrucci","Pettini","Pezzati","Pezzatini","Piani","Piazza","Piazzesi","Piazzini","Piccardi","Picchi","Piccini","Piccioli","Pieraccini","Pieraccioni","Pieralli","Pierattini","Pieri","Pierini","Pieroni","Pietrini","Pini","Pinna","Pinto","Pinzani","Pinzauti","Piras","Pisani","Pistolesi","Poggesi","Poggi","Poggiali","Poggiolini","Poli","Pollastri","Porciani","Pozzi","Pratellesi","Pratesi","Prosperi","Pruneti","Pucci","Puccini","Puccioni","Pugi","Pugliese","Puliti","Querci","Quercioli","Raddi","Radu","Raffaelli","Ragazzini","Ranfagni","Ranieri","Rastrelli","Raugei","Raveggi","Renai","Renzi","Rettori","Ricci","Ricciardi","Ridi","Ridolfi","Rigacci","Righi","Righini","Rinaldi","Risaliti","Ristori","Rizzo","Rocchi","Rocchini","Rogai","Romagnoli","Romanelli","Romani","Romano","Romei","Romeo","Romiti","Romoli","Romolini","Rontini","Rosati","Roselli","Rosi","Rossetti","Rossi","Rossini","Rovai","Ruggeri","Ruggiero","Russo","Sabatini","Saccardi","Sacchetti","Sacchi","Sacco","Salerno","Salimbeni","Salucci","Salvadori","Salvestrini","Salvi","Salvini","Sanesi","Sani","Sanna","Santi","Santini","Santoni","Santoro","Santucci","Sardi","Sarri","Sarti","Sassi","Sbolci","Scali","Scarpelli","Scarselli","Scopetani","Secci","Selvi","Senatori","Senesi","Serafini","Sereni","Serra","Sestini","Sguanci","Sieni","Signorini","Silvestri","Simoncini","Simonetti","Simoni","Singh","Sodi","Soldi","Somigli","Sorbi","Sorelli","Sorrentino","Sottili","Spina","Spinelli","Staccioli","Staderini","Stefanelli","Stefani","Stefanini","Stella","Susini","Tacchi","Tacconi","Taddei","Tagliaferri","Tamburini","Tanganelli","Tani","Tanini","Tapinassi","Tarchi","Tarchiani","Targioni","Tassi","Tassini","Tempesti","Terzani","Tesi","Testa","Testi","Tilli","Tinti","Tirinnanzi","Toccafondi","Tofanari","Tofani","Tognaccini","Tonelli","Tonini","Torelli","Torrini","Tosi","Toti","Tozzi","Trambusti","Trapani","Tucci","Turchi","Ugolini","Ulivi","Valente","Valenti","Valentini","Vangelisti","Vanni","Vannini","Vannoni","Vannozzi","Vannucchi","Vannucci","Ventura","Venturi","Venturini","Vestri","Vettori","Vichi","Viciani","Vieri","Vigiani","Vignoli","Vignolini","Vignozzi","Villani","Vinci","Visani","Vitale","Vitali","Viti","Viviani","Vivoli","Volpe","Volpi","Wang","Wu","Xu","Yang","Ye","Zagli","Zani","Zanieri","Zanobini","Zecchi","Zetti","Zhang","Zheng","Zhou","Zhu","Zingoni","Zini","Zoppi"],nl:["Albers","Alblas","Appelman","Baars","Baas","Bakker","Blank","Bleeker","Blok","Blom","Boer","Boers","Boldewijn","Boon","Boot","Bos","Bosch","Bosma","Bosman","Bouma","Bouman","Bouwman","Brands","Brouwer","Burger","Buijs","Buitenhuis","Ceder","Cohen","Dekker","Dekkers","Dijkman","Dijkstra","Driessen","Drost","Engel","Evers","Faber","Franke","Gerritsen","Goedhart","Goossens","Groen","Groenenberg","Groot","Haan","Hart","Heemskerk","Hendriks","Hermans","Hoekstra","Hofman","Hopman","Huisman","Jacobs","Jansen","Janssen","Jonker","Jaspers","Keijzer","Klaassen","Klein","Koek","Koenders","Kok","Kool","Koopman","Koopmans","Koning","Koster","Kramer","Kroon","Kuijpers","Kuiper","Kuipers","Kurt","Koster","Kwakman","Los","Lubbers","Maas","Markus","Martens","Meijer","Mol","Molenaar","Mulder","Nieuwenhuis","Peeters","Peters","Pengel","Pieters","Pool","Post","Postma","Prins","Pronk","Reijnders","Rietveld","Roest","Roos","Sanders","Schaap","Scheffer","Schenk","Schilder","Schipper","Schmidt","Scholten","Schouten","Schut","Schutte","Schuurman","Simons","Smeets","Smit","Smits","Snel","Swinkels","Tas","Terpstra","Timmermans","Tol","Tromp","Troost","Valk","Veenstra","Veldkamp","Verbeek","Verheul","Verhoeven","Vermeer","Vermeulen","Verweij","Vink","Visser","Voorn","Vos","Wagenaar","Wiersema","Willems","Willemsen","Witteveen","Wolff","Wolters","Zijlstra","Zwart","de Beer","de Boer","de Bruijn","de Bruin","de Graaf","de Groot","de Haan","de Haas","de Jager","de Jong","de Jonge","de Koning","de Lange","de Leeuw","de Ridder","de Rooij","de Ruiter","de Vos","de Vries","de Waal","de Wit","de Zwart","van Beek","van Boven","van Dam","van Dijk","van Dongen","van Doorn","van Egmond","van Eijk","van Es","van Gelder","van Gelderen","van Houten","van Hulst","van Kempen","van Kesteren","van Leeuwen","van Loon","van Mill","van Noord","van Ommen","van Ommeren","van Oosten","van Oostveen","van Rijn","van Schaik","van Veen","van Vliet","van Wijk","van Wijngaarden","van den Poel","van de Pol","van den Ploeg","van de Ven","van den Berg","van den Bosch","van den Brink","van den Broek","van den Heuvel","van der Heijden","van der Horst","van der Hulst","van der Kroon","van der Laan","van der Linden","van der Meer","van der Meij","van der Meulen","van der Molen","van der Sluis","van der Spek","van der Veen","van der Velde","van der Velden","van der Vliet","van der Wal"],uk:["Smith","Jones","Williams","Taylor","Brown","Davies","Evans","Wilson","Thomas","Johnson","Roberts","Robinson","Thompson","Wright","Walker","White","Edwards","Hughes","Green","Hall","Lewis","Harris","Clarke","Patel","Jackson","Wood","Turner","Martin","Cooper","Hill","Ward","Morris","Moore","Clark","Lee","King","Baker","Harrison","Morgan","Allen","James","Scott","Phillips","Watson","Davis","Parker","Price","Bennett","Young","Griffiths","Mitchell","Kelly","Cook","Carter","Richardson","Bailey","Collins","Bell","Shaw","Murphy","Miller","Cox","Richards","Khan","Marshall","Anderson","Simpson","Ellis","Adams","Singh","Begum","Wilkinson","Foster","Chapman","Powell","Webb","Rogers","Gray","Mason","Ali","Hunt","Hussain","Campbell","Matthews","Owen","Palmer","Holmes","Mills","Barnes","Knight","Lloyd","Butler","Russell","Barker","Fisher","Stevens","Jenkins","Murray","Dixon","Harvey","Graham","Pearson","Ahmed","Fletcher","Walsh","Kaur","Gibson","Howard","Andrews","Stewart","Elliott","Reynolds","Saunders","Payne","Fox","Ford","Pearce","Day","Brooks","West","Lawrence","Cole","Atkinson","Bradley","Spencer","Gill","Dawson","Ball","Burton","O'brien","Watts","Rose","Booth","Perry","Ryan","Grant","Wells","Armstrong","Francis","Rees","Hayes","Hart","Hudson","Newman","Barrett","Webster","Hunter","Gregory","Carr","Lowe","Page","Marsh","Riley","Dunn","Woods","Parsons","Berry","Stone","Reid","Holland","Hawkins","Harding","Porter","Robertson","Newton","Oliver","Reed","Kennedy","Williamson","Bird","Gardner","Shah","Dean","Lane","Cooke","Bates","Henderson","Parry","Burgess","Bishop","Walton","Burns","Nicholson","Shepherd","Ross","Cross","Long","Freeman","Warren","Nicholls","Hamilton","Byrne","Sutton","Mcdonald","Yates","Hodgson","Robson","Curtis","Hopkins","O'connor","Harper","Coleman","Watkins","Moss","Mccarthy","Chambers","O'neill","Griffin","Sharp","Hardy","Wheeler","Potter","Osborne","Johnston","Gordon","Doyle","Wallace","George","Jordan","Hutchinson","Rowe","Burke","May","Pritchard","Gilbert","Willis","Higgins","Read","Miles","Stevenson","Stephenson","Hammond","Arnold","Buckley","Walters","Hewitt","Barber","Nelson","Slater","Austin","Sullivan","Whitehead","Mann","Frost","Lambert","Stephens","Blake","Akhtar","Lynch","Goodwin","Barton","Woodward","Thomson","Cunningham","Quinn","Barnett","Baxter","Bibi","Clayton","Nash","Greenwood","Jennings","Holt","Kemp","Poole","Gallagher","Bond","Stokes","Tucker","Davidson","Fowler","Heath","Norman","Middleton","Lawson","Banks","French","Stanley","Jarvis","Gibbs","Ferguson","Hayward","Carroll","Douglas","Dickinson","Todd","Barlow","Peters","Lucas","Knowles","Hartley","Miah","Simmons","Morton","Alexander","Field","Morrison","Norris","Townsend","Preston","Hancock","Thornton","Baldwin","Burrows","Briggs","Parkinson","Reeves","Macdonald","Lamb","Black","Abbott","Sanders","Thorpe","Holden","Tomlinson","Perkins","Ashton","Rhodes","Fuller","Howe","Bryant","Vaughan","Dale","Davey","Weston","Bartlett","Whittaker","Davison","Kent","Skinner","Birch","Morley","Daniels","Glover","Howell","Cartwright","Pugh","Humphreys","Goddard","Brennan","Wall","Kirby","Bowen","Savage","Bull","Wong","Dobson","Smart","Wilkins","Kirk","Fraser","Duffy","Hicks","Patterson","Bradshaw","Little","Archer","Warner","Waters","O'sullivan","Farrell","Brookes","Atkins","Kay","Dodd","Bentley","Flynn","John","Schofield","Short","Haynes","Wade","Butcher","Henry","Sanderson","Crawford","Sheppard","Bolton","Coates","Giles","Gould","Houghton","Gibbons","Pratt","Manning","Law","Hooper","Noble","Dyer","Rahman","Clements","Moran","Sykes","Chan","Doherty","Connolly","Joyce","Franklin","Hobbs","Coles","Herbert","Steele","Kerr","Leach","Winter","Owens","Duncan","Naylor","Fleming","Horton","Finch","Fitzgerald","Randall","Carpenter","Marsden","Browne","Garner","Pickering","Hale","Dennis","Vincent","Chadwick","Chandler","Sharpe","Nolan","Lyons","Hurst","Collier","Peacock","Howarth","Faulkner","Rice","Pollard","Welch","Norton","Gough","Sinclair","Blackburn","Bryan","Conway","Power","Cameron","Daly","Allan","Hanson","Gardiner","Boyle","Myers","Turnbull","Wallis","Mahmood","Sims","Swift","Iqbal","Pope","Brady","Chamberlain","Rowley","Tyler","Farmer","Metcalfe","Hilton","Godfrey","Holloway","Parkin","Bray","Talbot","Donnelly","Nixon","Charlton","Benson","Whitehouse","Barry","Hope","Lord","North","Storey","Connor","Potts","Bevan","Hargreaves","Mclean","Mistry","Bruce","Howells","Hyde","Parkes","Wyatt","Fry","Lees","O'donnell","Craig","Forster","Mckenzie","Humphries","Mellor","Carey","Ingram","Summers","Leonard"],de:["Mller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Schulz","Hoffmann","Schfer","Koch","Bauer","Richter","Klein","Wolf","Schrder","Neumann","Schwarz","Zimmermann","Braun","Krger","Hofmann","Hartmann","Lange","Schmitt","Werner","Schmitz","Krause","Meier","Lehmann","Schmid","Schulze","Maier","Khler","Herrmann","Knig","Walter","Mayer","Huber","Kaiser","Fuchs","Peters","Lang","Scholz","Mller","Wei","Jung","Hahn","Schubert","Vogel","Friedrich","Keller","Gnther","Frank","Berger","Winkler","Roth","Beck","Lorenz","Baumann","Franke","Albrecht","Schuster","Simon","Ludwig","Bhm","Winter","Kraus","Martin","Schumacher","Krmer","Vogt","Stein","Jger","Otto","Sommer","Gro","Seidel","Heinrich","Brandt","Haas","Schreiber","Graf","Schulte","Dietrich","Ziegler","Kuhn","Khn","Pohl","Engel","Horn","Busch","Bergmann","Thomas","Voigt","Sauer","Arnold","Wolff","Pfeiffer"],jp:["Sato","Suzuki","Takahashi","Tanaka","Watanabe","Ito","Yamamoto","Nakamura","Kobayashi","Kato","Yoshida","Yamada","Sasaki","Yamaguchi","Saito","Matsumoto","Inoue","Kimura","Hayashi","Shimizu","Yamazaki","Mori","Abe","Ikeda","Hashimoto","Yamashita","Ishikawa","Nakajima","Maeda","Fujita","Ogawa","Goto","Okada","Hasegawa","Murakami","Kondo","Ishii","Saito","Sakamoto","Endo","Aoki","Fujii","Nishimura","Fukuda","Ota","Miura","Fujiwara","Okamoto","Matsuda","Nakagawa","Nakano","Harada","Ono","Tamura","Takeuchi","Kaneko","Wada","Nakayama","Ishida","Ueda","Morita","Hara","Shibata","Sakai","Kudo","Yokoyama","Miyazaki","Miyamoto","Uchida","Takagi","Ando","Taniguchi","Ohno","Maruyama","Imai","Takada","Fujimoto","Takeda","Murata","Ueno","Sugiyama","Masuda","Sugawara","Hirano","Kojima","Otsuka","Chiba","Kubo","Matsui","Iwasaki","Sakurai","Kinoshita","Noguchi","Matsuo","Nomura","Kikuchi","Sano","Onishi","Sugimoto","Arai"],es:["Garcia","Fernandez","Lopez","Martinez","Gonzalez","Rodriguez","Sanchez","Perez","Martin","Gomez","Ruiz","Diaz","Hernandez","Alvarez","Jimenez","Moreno","Munoz","Alonso","Romero","Navarro","Gutierrez","Torres","Dominguez","Gil","Vazquez","Blanco","Serrano","Ramos","Castro","Suarez","Sanz","Rubio","Ortega","Molina","Delgado","Ortiz","Morales","Ramirez","Marin","Iglesias","Santos","Castillo","Garrido","Calvo","Pena","Cruz","Cano","Nunez","Prieto","Diez","Lozano","Vidal","Pascual","Ferrer","Medina","Vega","Leon","Herrero","Vicente","Mendez","Guerrero","Fuentes","Campos","Nieto","Cortes","Caballero","Ibanez","Lorenzo","Pastor","Gimenez","Saez","Soler","Marquez","Carrasco","Herrera","Montero","Arias","Crespo","Flores","Andres","Aguilar","Hidalgo","Cabrera","Mora","Duran","Velasco","Rey","Pardo","Roman","Vila","Bravo","Merino","Moya","Soto","Izquierdo","Reyes","Redondo","Marcos","Carmona","Menendez"],fr:["Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lefvre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupont","Lambert","Fontaine","Rousseau","Vincent","Mller","Lefvre","Faure","Andr","Mercier","Blanc","Gurin","Boyer","Garnier","Chevalier","Franois","Legrand","Gauthier","Garcia","Perrin","Robin","Clment","Morin","Nicolas","Henry","Roussel","Matthieu","Gautier","Masson","Marchand","Duval","Denis","Dumont","Marie","Lemaire","Nol","Meyer","Dufour","Meunier","Brun","Blanchard","Giraud","Joly","Rivire","Lucas","Brunet","Gaillard","Barbier","Arnaud","Martnez","Grard","Roche","Renard","Schmitt","Roy","Leroux","Colin","Vidal","Caron","Picard","Roger","Fabre","Aubert","Lemoine","Renaud","Dumas","Lacroix","Olivier","Philippe","Bourgeois","Pierre","Benot","Rey","Leclerc","Payet","Rolland","Leclercq","Guillaume","Lecomte","Lpez","Jean","Dupuy","Guillot","Hubert","Berger","Carpentier","Snchez","Dupuis","Moulin","Louis","Deschamps","Huet","Vasseur","Perez","Boucher","Fleury","Royer","Klein","Jacquet","Adam","Paris","Poirier","Marty","Aubry","Guyot","Carr","Charles","Renault","Charpentier","Mnard","Maillard","Baron","Bertin","Bailly","Herv","Schneider","Fernndez","Le GallGall","Collet","Lger","Bouvier","Julien","Prvost","Millet","Perrot","Daniel","Le RouxRoux","Cousin","Germain","Breton","Besson","Langlois","Rmi","Le GoffGoff","Pelletier","Lvque","Perrier","Leblanc","Barr","Lebrun","Marchal","Weber","Mallet","Hamon","Boulanger","Jacob","Monnier","Michaud","Rodrguez","Guichard","Gillet","tienne","Grondin","Poulain","Tessier","Chevallier","Collin","Chauvin","Da SilvaSilva","Bouchet","Gay","Lematre","Bnard","Marchal","Humbert","Reynaud","Antoine","Hoarau","Perret","Barthlemy","Cordier","Pichon","Lejeune","Gilbert","Lamy","Delaunay","Pasquier","Carlier","LaporteLaporte"]},postcodeAreas:[{code:"AB"},{code:"AL"},{code:"B"},{code:"BA"},{code:"BB"},{code:"BD"},{code:"BH"},{code:"BL"},{code:"BN"},{code:"BR"},{code:"BS"},{code:"BT"},{code:"CA"},{code:"CB"},{code:"CF"},{code:"CH"},{code:"CM"},{code:"CO"},{code:"CR"},{code:"CT"},{code:"CV"},{code:"CW"},{code:"DA"},{code:"DD"},{code:"DE"},{code:"DG"},{code:"DH"},{code:"DL"},{code:"DN"},{code:"DT"},{code:"DY"},{code:"E"},{code:"EC"},{code:"EH"},{code:"EN"},{code:"EX"},{code:"FK"},{code:"FY"},{code:"G"},{code:"GL"},{code:"GU"},{code:"GY"},{code:"HA"},{code:"HD"},{code:"HG"},{code:"HP"},{code:"HR"},{code:"HS"},{code:"HU"},{code:"HX"},{code:"IG"},{code:"IM"},{code:"IP"},{code:"IV"},{code:"JE"},{code:"KA"},{code:"KT"},{code:"KW"},{code:"KY"},{code:"L"},{code:"LA"},{code:"LD"},{code:"LE"},{code:"LL"},{code:"LN"},{code:"LS"},{code:"LU"},{code:"M"},{code:"ME"},{code:"MK"},{code:"ML"},{code:"N"},{code:"NE"},{code:"NG"},{code:"NN"},{code:"NP"},{code:"NR"},{code:"NW"},{code:"OL"},{code:"OX"},{code:"PA"},{code:"PE"},{code:"PH"},{code:"PL"},{code:"PO"},{code:"PR"},{code:"RG"},{code:"RH"},{code:"RM"},{code:"S"},{code:"SA"},{code:"SE"},{code:"SG"},{code:"SK"},{code:"SL"},{code:"SM"},{code:"SN"},{code:"SO"},{code:"SP"},{code:"SR"},{code:"SS"},{code:"ST"},{code:"SW"},{code:"SY"},{code:"TA"},{code:"TD"},{code:"TF"},{code:"TN"},{code:"TQ"},{code:"TR"},{code:"TS"},{code:"TW"},{code:"UB"},{code:"W"},{code:"WA"},{code:"WC"},{code:"WD"},{code:"WF"},{code:"WN"},{code:"WR"},{code:"WS"},{code:"WV"},{code:"YO"},{code:"ZE"}],countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"land Islands",abbreviation:"AX"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua & Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Ascension Island",abbreviation:"AC"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia & Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Brazil",abbreviation:"BR"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canary Islands",abbreviation:"IC"},{name:"Cape Verde",abbreviation:"CV"},{name:"Caribbean Netherlands",abbreviation:"BQ"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Ceuta & Melilla",abbreviation:"EA"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos (Keeling) Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"Cte d'Ivoire",abbreviation:"CI"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Curaao",abbreviation:"CW"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Denmark",abbreviation:"DK"},{name:"Diego Garcia",abbreviation:"DG"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kosovo",abbreviation:"XK"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar (Burma)",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"Runion",abbreviation:"RE"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"So Tom and Prncipe",abbreviation:"ST"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Sint Maarten",abbreviation:"SX"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia & South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"South Sudan",abbreviation:"SS"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"St. Barthlemy",abbreviation:"BL"},{name:"St. Helena",abbreviation:"SH"},{name:"St. Kitts & Nevis",abbreviation:"KN"},{name:"St. Lucia",abbreviation:"LC"},{name:"St. Martin",abbreviation:"MF"},{name:"St. Pierre & Miquelon",abbreviation:"PM"},{name:"St. Vincent & Grenadines",abbreviation:"VC"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard & Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad & Tobago",abbreviation:"TT"},{name:"Tristan da Cunha",abbreviation:"TA"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks & Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Outlying Islands",abbreviation:"UM"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wallis & Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"}],counties:{uk:[{name:"Bath and North East Somerset"},{name:"Aberdeenshire"},{name:"Anglesey"},{name:"Angus"},{name:"Bedford"},{name:"Blackburn with Darwen"},{name:"Blackpool"},{name:"Bournemouth"},{name:"Bracknell Forest"},{name:"Brighton & Hove"},{name:"Bristol"},{name:"Buckinghamshire"},{name:"Cambridgeshire"},{name:"Carmarthenshire"},{name:"Central Bedfordshire"},{name:"Ceredigion"},{name:"Cheshire East"},{name:"Cheshire West and Chester"},{name:"Clackmannanshire"},{name:"Conwy"},{name:"Cornwall"},{name:"County Antrim"},{name:"County Armagh"},{name:"County Down"},{name:"County Durham"},{name:"County Fermanagh"},{name:"County Londonderry"},{name:"County Tyrone"},{name:"Cumbria"},{name:"Darlington"},{name:"Denbighshire"},{name:"Derby"},{name:"Derbyshire"},{name:"Devon"},{name:"Dorset"},{name:"Dumfries and Galloway"},{name:"Dundee"},{name:"East Lothian"},{name:"East Riding of Yorkshire"},{name:"East Sussex"},{name:"Edinburgh?"},{name:"Essex"},{name:"Falkirk"},{name:"Fife"},{name:"Flintshire"},{name:"Gloucestershire"},{name:"Greater London"},{name:"Greater Manchester"},{name:"Gwent"},{name:"Gwynedd"},{name:"Halton"},{name:"Hampshire"},{name:"Hartlepool"},{name:"Herefordshire"},{name:"Hertfordshire"},{name:"Highlands"},{name:"Hull"},{name:"Isle of Wight"},{name:"Isles of Scilly"},{name:"Kent"},{name:"Lancashire"},{name:"Leicester"},{name:"Leicestershire"},{name:"Lincolnshire"},{name:"Lothian"},{name:"Luton"},{name:"Medway"},{name:"Merseyside"},{name:"Mid Glamorgan"},{name:"Middlesbrough"},{name:"Milton Keynes"},{name:"Monmouthshire"},{name:"Moray"},{name:"Norfolk"},{name:"North East Lincolnshire"},{name:"North Lincolnshire"},{name:"North Somerset"},{name:"North Yorkshire"},{name:"Northamptonshire"},{name:"Northumberland"},{name:"Nottingham"},{name:"Nottinghamshire"},{name:"Oxfordshire"},{name:"Pembrokeshire"},{name:"Perth and Kinross"},{name:"Peterborough"},{name:"Plymouth"},{name:"Poole"},{name:"Portsmouth"},{name:"Powys"},{name:"Reading"},{name:"Redcar and Cleveland"},{name:"Rutland"},{name:"Scottish Borders"},{name:"Shropshire"},{name:"Slough"},{name:"Somerset"},{name:"South Glamorgan"},{name:"South Gloucestershire"},{name:"South Yorkshire"},{name:"Southampton"},{name:"Southend-on-Sea"},{name:"Staffordshire"},{name:"Stirlingshire"},{name:"Stockton-on-Tees"},{name:"Stoke-on-Trent"},{name:"Strathclyde"},{name:"Suffolk"},{name:"Surrey"},{name:"Swindon"},{name:"Telford and Wrekin"},{name:"Thurrock"},{name:"Torbay"},{name:"Tyne and Wear"},{name:"Warrington"},{name:"Warwickshire"},{name:"West Berkshire"},{name:"West Glamorgan"},{name:"West Lothian"},{name:"West Midlands"},{name:"West Sussex"},{name:"West Yorkshire"},{name:"Western Isles"},{name:"Wiltshire"},{name:"Windsor and Maidenhead"},{name:"Wokingham"},{name:"Worcestershire"},{name:"Wrexham"},{name:"York"}]},provinces:{ca:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],it:[{name:"Agrigento",abbreviation:"AG",code:84},{name:"Alessandria",abbreviation:"AL",code:6},{name:"Ancona",abbreviation:"AN",code:42},{name:"Aosta",abbreviation:"AO",code:7},{name:"L'Aquila",abbreviation:"AQ",code:66},{name:"Arezzo",abbreviation:"AR",code:51},{name:"Ascoli-Piceno",abbreviation:"AP",code:44},{name:"Asti",abbreviation:"AT",code:5},{name:"Avellino",abbreviation:"AV",code:64},{name:"Bari",abbreviation:"BA",code:72},{name:"Barletta-Andria-Trani",abbreviation:"BT",code:72},{name:"Belluno",abbreviation:"BL",code:25},{name:"Benevento",abbreviation:"BN",code:62},{name:"Bergamo",abbreviation:"BG",code:16},{name:"Biella",abbreviation:"BI",code:96},{name:"Bologna",abbreviation:"BO",code:37},{name:"Bolzano",abbreviation:"BZ",code:21},{name:"Brescia",abbreviation:"BS",code:17},{name:"Brindisi",abbreviation:"BR",code:74},{name:"Cagliari",abbreviation:"CA",code:92},{name:"Caltanissetta",abbreviation:"CL",code:85},{name:"Campobasso",abbreviation:"CB",code:70},{name:"Carbonia Iglesias",abbreviation:"CI",code:70},{name:"Caserta",abbreviation:"CE",code:61},{name:"Catania",abbreviation:"CT",code:87},{name:"Catanzaro",abbreviation:"CZ",code:79},{name:"Chieti",abbreviation:"CH",code:69},{name:"Como",abbreviation:"CO",code:13},{name:"Cosenza",abbreviation:"CS",code:78},{name:"Cremona",abbreviation:"CR",code:19},{name:"Crotone",abbreviation:"KR",code:101},{name:"Cuneo",abbreviation:"CN",code:4},{name:"Enna",abbreviation:"EN",code:86},{name:"Fermo",abbreviation:"FM",code:86},{name:"Ferrara",abbreviation:"FE",code:38},{name:"Firenze",abbreviation:"FI",code:48},{name:"Foggia",abbreviation:"FG",code:71},{name:"Forli-Cesena",abbreviation:"FC",code:71},{name:"Frosinone",abbreviation:"FR",code:60},{name:"Genova",abbreviation:"GE",code:10},{name:"Gorizia",abbreviation:"GO",code:31},{name:"Grosseto",abbreviation:"GR",code:53},{name:"Imperia",abbreviation:"IM",code:8},{name:"Isernia",abbreviation:"IS",code:94},{name:"La-Spezia",abbreviation:"SP",code:66},{name:"Latina",abbreviation:"LT",code:59},{name:"Lecce",abbreviation:"LE",code:75},{name:"Lecco",abbreviation:"LC",code:97},{name:"Livorno",abbreviation:"LI",code:49},{name:"Lodi",abbreviation:"LO",code:98},{name:"Lucca",abbreviation:"LU",code:46},{name:"Macerata",abbreviation:"MC",code:43},{name:"Mantova",abbreviation:"MN",code:20},{name:"Massa-Carrara",abbreviation:"MS",code:45},{name:"Matera",abbreviation:"MT",code:77},{name:"Medio Campidano",abbreviation:"VS",code:77},{name:"Messina",abbreviation:"ME",code:83},{name:"Milano",abbreviation:"MI",code:15},{name:"Modena",abbreviation:"MO",code:36},{name:"Monza-Brianza",abbreviation:"MB",code:36},{name:"Napoli",abbreviation:"NA",code:63},{name:"Novara",abbreviation:"NO",code:3},{name:"Nuoro",abbreviation:"NU",code:91},{name:"Ogliastra",abbreviation:"OG",code:91},{name:"Olbia Tempio",abbreviation:"OT",code:91},{name:"Oristano",abbreviation:"OR",code:95},{name:"Padova",abbreviation:"PD",code:28},{name:"Palermo",abbreviation:"PA",code:82},{name:"Parma",abbreviation:"PR",code:34},{name:"Pavia",abbreviation:"PV",code:18},{name:"Perugia",abbreviation:"PG",code:54},{name:"Pesaro-Urbino",abbreviation:"PU",code:41},{name:"Pescara",abbreviation:"PE",code:68},{name:"Piacenza",abbreviation:"PC",code:33},{name:"Pisa",abbreviation:"PI",code:50},{name:"Pistoia",abbreviation:"PT",code:47},{name:"Pordenone",abbreviation:"PN",code:93},{name:"Potenza",abbreviation:"PZ",code:76},{name:"Prato",abbreviation:"PO",code:100},{name:"Ragusa",abbreviation:"RG",code:88},{name:"Ravenna",abbreviation:"RA",code:39},{name:"Reggio-Calabria",abbreviation:"RC",code:35},{name:"Reggio-Emilia",abbreviation:"RE",code:35},{name:"Rieti",abbreviation:"RI",code:57},{name:"Rimini",abbreviation:"RN",code:99},{name:"Roma",abbreviation:"Roma",code:58},{name:"Rovigo",abbreviation:"RO",code:29},{name:"Salerno",abbreviation:"SA",code:65},{name:"Sassari",abbreviation:"SS",code:90},{name:"Savona",abbreviation:"SV",code:9},{name:"Siena",abbreviation:"SI",code:52},{name:"Siracusa",abbreviation:"SR",code:89},{name:"Sondrio",abbreviation:"SO",code:14},{name:"Taranto",abbreviation:"TA",code:73},{name:"Teramo",abbreviation:"TE",code:67},{name:"Terni",abbreviation:"TR",code:55},{name:"Torino",abbreviation:"TO",code:1},{name:"Trapani",abbreviation:"TP",code:81},{name:"Trento",abbreviation:"TN",code:22},{name:"Treviso",abbreviation:"TV",code:26},{name:"Trieste",abbreviation:"TS",code:32},{name:"Udine",abbreviation:"UD",code:30},{name:"Varese",abbreviation:"VA",code:12},{name:"Venezia",abbreviation:"VE",code:27},{name:"Verbania",abbreviation:"VB",code:27},{name:"Vercelli",abbreviation:"VC",code:2},{name:"Verona",abbreviation:"VR",code:23},{name:"Vibo-Valentia",abbreviation:"VV",code:102},{name:"Vicenza",abbreviation:"VI",code:24},{name:"Viterbo",abbreviation:"VT",code:56}]},nationalities:[{name:"Afghan"},{name:"Albanian"},{name:"Algerian"},{name:"American"},{name:"Andorran"},{name:"Angolan"},{name:"Antiguans"},{name:"Argentinean"},{name:"Armenian"},{name:"Australian"},{name:"Austrian"},{name:"Azerbaijani"},{name:"Bahami"},{name:"Bahraini"},{name:"Bangladeshi"},{name:"Barbadian"},{name:"Barbudans"},{name:"Batswana"},{name:"Belarusian"},{name:"Belgian"},{name:"Belizean"},{name:"Beninese"},{name:"Bhutanese"},{name:"Bolivian"},{name:"Bosnian"},{name:"Brazilian"},{name:"British"},{name:"Bruneian"},{name:"Bulgarian"},{name:"Burkinabe"},{name:"Burmese"},{name:"Burundian"},{name:"Cambodian"},{name:"Cameroonian"},{name:"Canadian"},{name:"Cape Verdean"},{name:"Central African"},{name:"Chadian"},{name:"Chilean"},{name:"Chinese"},{name:"Colombian"},{name:"Comoran"},{name:"Congolese"},{name:"Costa Rican"},{name:"Croatian"},{name:"Cuban"},{name:"Cypriot"},{name:"Czech"},{name:"Danish"},{name:"Djibouti"},{name:"Dominican"},{name:"Dutch"},{name:"East Timorese"},{name:"Ecuadorean"},{name:"Egyptian"},{name:"Emirian"},{name:"Equatorial Guinean"},{name:"Eritrean"},{name:"Estonian"},{name:"Ethiopian"},{name:"Fijian"},{name:"Filipino"},{name:"Finnish"},{name:"French"},{name:"Gabonese"},{name:"Gambian"},{name:"Georgian"},{name:"German"},{name:"Ghanaian"},{name:"Greek"},{name:"Grenadian"},{name:"Guatemalan"},{name:"Guinea-Bissauan"},{name:"Guinean"},{name:"Guyanese"},{name:"Haitian"},{name:"Herzegovinian"},{name:"Honduran"},{name:"Hungarian"},{name:"I-Kiribati"},{name:"Icelander"},{name:"Indian"},{name:"Indonesian"},{name:"Iranian"},{name:"Iraqi"},{name:"Irish"},{name:"Israeli"},{name:"Italian"},{name:"Ivorian"},{name:"Jamaican"},{name:"Japanese"},{name:"Jordanian"},{name:"Kazakhstani"},{name:"Kenyan"},{name:"Kittian and Nevisian"},{name:"Kuwaiti"},{name:"Kyrgyz"},{name:"Laotian"},{name:"Latvian"},{name:"Lebanese"},{name:"Liberian"},{name:"Libyan"},{name:"Liechtensteiner"},{name:"Lithuanian"},{name:"Luxembourger"},{name:"Macedonian"},{name:"Malagasy"},{name:"Malawian"},{name:"Malaysian"},{name:"Maldivan"},{name:"Malian"},{name:"Maltese"},{name:"Marshallese"},{name:"Mauritanian"},{name:"Mauritian"},{name:"Mexican"},{name:"Micronesian"},{name:"Moldovan"},{name:"Monacan"},{name:"Mongolian"},{name:"Moroccan"},{name:"Mosotho"},{name:"Motswana"},{name:"Mozambican"},{name:"Namibian"},{name:"Nauruan"},{name:"Nepalese"},{name:"New Zealander"},{name:"Nicaraguan"},{name:"Nigerian"},{name:"Nigerien"},{name:"North Korean"},{name:"Northern Irish"},{name:"Norwegian"},{name:"Omani"},{name:"Pakistani"},{name:"Palauan"},{name:"Panamanian"},{name:"Papua New Guinean"},{name:"Paraguayan"},{name:"Peruvian"},{name:"Polish"},{name:"Portuguese"},{name:"Qatari"},{name:"Romani"},{name:"Russian"},{name:"Rwandan"},{name:"Saint Lucian"},{name:"Salvadoran"},{name:"Samoan"},{name:"San Marinese"},{name:"Sao Tomean"},{name:"Saudi"},{name:"Scottish"},{name:"Senegalese"},{name:"Serbian"},{name:"Seychellois"},{name:"Sierra Leonean"},{name:"Singaporean"},{name:"Slovakian"},{name:"Slovenian"},{name:"Solomon Islander"},{name:"Somali"},{name:"South African"},{name:"South Korean"},{name:"Spanish"},{name:"Sri Lankan"},{name:"Sudanese"},{name:"Surinamer"},{name:"Swazi"},{name:"Swedish"},{name:"Swiss"},{name:"Syrian"},{name:"Taiwanese"},{name:"Tajik"},{name:"Tanzanian"},{name:"Thai"},{name:"Togolese"},{name:"Tongan"},{name:"Trinidadian or Tobagonian"},{name:"Tunisian"},{name:"Turkish"},{name:"Tuvaluan"},{name:"Ugandan"},{name:"Ukrainian"},{name:"Uruguaya"},{name:"Uzbekistani"},{name:"Venezuela"},{name:"Vietnamese"},{name:"Wels"},{name:"Yemenit"},{name:"Zambia"},{name:"Zimbabwe"}],locale_languages:["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],locale_regions:["agq-CM","asa-TZ","ast-ES","bas-CM","bem-ZM","bez-TZ","brx-IN","cgg-UG","chr-US","dav-KE","dje-NE","dsb-DE","dua-CM","dyo-SN","ebu-KE","ewo-CM","fil-PH","fur-IT","gsw-CH","gsw-FR","gsw-LI","guz-KE","haw-US","hsb-DE","jgo-CM","jmc-TZ","kab-DZ","kam-KE","kde-TZ","kea-CV","khq-ML","kkj-CM","kln-KE","kok-IN","ksb-TZ","ksf-CM","ksh-DE","lag-TZ","lkt-US","luo-KE","luy-KE","mas-KE","mas-TZ","mer-KE","mfe-MU","mgh-MZ","mgo-CM","mua-CM","naq-NA","nmg-CM","nnh-CM","nus-SD","nyn-UG","rof-TZ","rwk-TZ","sah-RU","saq-KE","sbp-TZ","seh-MZ","ses-ML","shi-Latn","shi-Latn-MA","shi-Tfng","shi-Tfng-MA","smn-FI","teo-KE","teo-UG","twq-NE","tzm-Latn","tzm-Latn-MA","vai-Latn","vai-Latn-LR","vai-Vaii","vai-Vaii-LR","vun-TZ","wae-CH","xog-UG","yav-CM","zgh-MA","af-NA","af-ZA","ak-GH","am-ET","ar-001","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as-IN","az-Cyrl","az-Cyrl-AZ","az-Latn","az-Latn-AZ","be-BY","bg-BG","bm-Latn","bm-Latn-ML","bn-BD","bn-IN","bo-CN","bo-IN","br-FR","bs-Cyrl","bs-Cyrl-BA","bs-Latn","bs-Latn-BA","ca-AD","ca-ES","ca-ES-VALENCIA","ca-FR","ca-IT","cs-CZ","cy-GB","da-DK","da-GL","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","dz-BT","ee-GH","ee-TG","el-CY","el-GR","en-001","en-150","en-AG","en-AI","en-AS","en-AU","en-BB","en-BE","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CK","en-CM","en-CX","en-DG","en-DM","en-ER","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SG","en-SH","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo-001","es-419","es-AR","es-BO","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-ES","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et-EE","eu-ES","fa-AF","fa-IR","ff-CM","ff-GN","ff-MR","ff-SN","fi-FI","fo-FO","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-FR","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fy-NL","ga-IE","gd-GB","gl-ES","gu-IN","gv-IM","ha-Latn","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","ig-NG","ii-CN","is-IS","it-CH","it-IT","it-SM","ja-JP","ka-GE","ki-KE","kk-Cyrl","kk-Cyrl-KZ","kl-GL","km-KH","kn-IN","ko-KP","ko-KR","ks-Arab","ks-Arab-IN","kw-GB","ky-Cyrl","ky-Cyrl-KG","lb-LU","lg-UG","ln-AO","ln-CD","ln-CF","ln-CG","lo-LA","lt-LT","lu-CD","lv-LV","mg-MG","mk-MK","ml-IN","mn-Cyrl","mn-Cyrl-MN","mr-IN","ms-Latn","ms-Latn-BN","ms-Latn-MY","ms-Latn-SG","mt-MT","my-MM","nb-NO","nb-SJ","nd-ZW","ne-IN","ne-NP","nl-AW","nl-BE","nl-BQ","nl-CW","nl-NL","nl-SR","nl-SX","nn-NO","om-ET","om-KE","or-IN","os-GE","os-RU","pa-Arab","pa-Arab-PK","pa-Guru","pa-Guru-IN","pl-PL","ps-AF","pt-AO","pt-BR","pt-CV","pt-GW","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu-BO","qu-EC","qu-PE","rm-CH","rn-BI","ro-MD","ro-RO","ru-BY","ru-KG","ru-KZ","ru-MD","ru-RU","ru-UA","rw-RW","se-FI","se-NO","se-SE","sg-CF","si-LK","sk-SK","sl-SI","sn-ZW","so-DJ","so-ET","so-KE","so-SO","sq-AL","sq-MK","sq-XK","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-RS","sr-Latn-XK","sv-AX","sv-FI","sv-SE","sw-CD","sw-KE","sw-TZ","sw-UG","ta-IN","ta-LK","ta-MY","ta-SG","te-IN","th-TH","ti-ER","ti-ET","to-TO","tr-CY","tr-TR","ug-Arab","ug-Arab-CN","uk-UA","ur-IN","ur-PK","uz-Arab","uz-Arab-AF","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","vi-VN","yi-001","yo-BJ","yo-NG","zh-Hans","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zu-ZA"],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],country_regions:{it:[{name:"Valle d'Aosta",abbreviation:"VDA"},{name:"Piemonte",abbreviation:"PIE"},{name:"Lombardia",abbreviation:"LOM"},{name:"Veneto",abbreviation:"VEN"},{name:"Trentino Alto Adige",abbreviation:"TAA"},{name:"Friuli Venezia Giulia",abbreviation:"FVG"},{name:"Liguria",abbreviation:"LIG"},{name:"Emilia Romagna",abbreviation:"EMR"},{name:"Toscana",abbreviation:"TOS"},{name:"Umbria",abbreviation:"UMB"},{name:"Marche",abbreviation:"MAR"},{name:"Abruzzo",abbreviation:"ABR"},{name:"Lazio",abbreviation:"LAZ"},{name:"Campania",abbreviation:"CAM"},{name:"Puglia",abbreviation:"PUG"},{name:"Basilicata",abbreviation:"BAS"},{name:"Molise",abbreviation:"MOL"},{name:"Calabria",abbreviation:"CAL"},{name:"Sicilia",abbreviation:"SIC"},{name:"Sardegna",abbreviation:"SAR"}],mx:[{name:"Aguascalientes",abbreviation:"AGU"},{name:"Baja California",abbreviation:"BCN"},{name:"Baja California Sur",abbreviation:"BCS"},{name:"Campeche",abbreviation:"CAM"},{name:"Chiapas",abbreviation:"CHP"},{name:"Chihuahua",abbreviation:"CHH"},{name:"Ciudad de Mxico",abbreviation:"DIF"},{name:"Coahuila",abbreviation:"COA"},{name:"Colima",abbreviation:"COL"},{name:"Durango",abbreviation:"DUR"},{name:"Guanajuato",abbreviation:"GUA"},{name:"Guerrero",abbreviation:"GRO"},{name:"Hidalgo",abbreviation:"HID"},{name:"Jalisco",abbreviation:"JAL"},{name:"Mxico",abbreviation:"MEX"},{name:"Michoacn",abbreviation:"MIC"},{name:"Morelos",abbreviation:"MOR"},{name:"Nayarit",abbreviation:"NAY"},{name:"Nuevo Len",abbreviation:"NLE"},{name:"Oaxaca",abbreviation:"OAX"},{name:"Puebla",abbreviation:"PUE"},{name:"Quertaro",abbreviation:"QUE"},{name:"Quintana Roo",abbreviation:"ROO"},{name:"San Luis Potos",abbreviation:"SLP"},{name:"Sinaloa",abbreviation:"SIN"},{name:"Sonora",abbreviation:"SON"},{name:"Tabasco",abbreviation:"TAB"},{name:"Tamaulipas",abbreviation:"TAM"},{name:"Tlaxcala",abbreviation:"TLA"},{name:"Veracruz",abbreviation:"VER"},{name:"Yucatn",abbreviation:"YUC"},{name:"Zacatecas",abbreviation:"ZAC"}]},street_suffixes:{us:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],it:[{name:"Accesso",abbreviation:"Acc."},{name:"Alzaia",abbreviation:"Alz."},{name:"Arco",abbreviation:"Arco"},{name:"Archivolto",abbreviation:"Acv."},{name:"Arena",abbreviation:"Arena"},{name:"Argine",abbreviation:"Argine"},{name:"Bacino",abbreviation:"Bacino"},{name:"Banchi",abbreviation:"Banchi"},{name:"Banchina",abbreviation:"Ban."},{name:"Bastioni",abbreviation:"Bas."},{name:"Belvedere",abbreviation:"Belv."},{name:"Borgata",abbreviation:"B.ta"},{name:"Borgo",abbreviation:"B.go"},{name:"Calata",abbreviation:"Cal."},{name:"Calle",abbreviation:"Calle"},{name:"Campiello",abbreviation:"Cam."},{name:"Campo",abbreviation:"Cam."},{name:"Canale",abbreviation:"Can."},{name:"Carraia",abbreviation:"Carr."},{name:"Cascina",abbreviation:"Cascina"},{name:"Case sparse",abbreviation:"c.s."},{name:"Cavalcavia",abbreviation:"Cv."},{name:"Circonvallazione",abbreviation:"Cv."},{name:"Complanare",abbreviation:"C.re"},{name:"Contrada",abbreviation:"C.da"},{name:"Corso",abbreviation:"C.so"},{name:"Corte",abbreviation:"C.te"},{name:"Cortile",abbreviation:"C.le"},{name:"Diramazione",abbreviation:"Dir."},{name:"Fondaco",abbreviation:"F.co"},{name:"Fondamenta",abbreviation:"F.ta"},{name:"Fondo",abbreviation:"F.do"},{name:"Frazione",abbreviation:"Fr."},{name:"Isola",abbreviation:"Is."},{name:"Largo",abbreviation:"L.go"},{name:"Litoranea",abbreviation:"Lit."},{name:"Lungolago",abbreviation:"L.go lago"},{name:"Lungo Po",abbreviation:"l.go Po"},{name:"Molo",abbreviation:"Molo"},{name:"Mura",abbreviation:"Mura"},{name:"Passaggio privato",abbreviation:"pass. priv."},{name:"Passeggiata",abbreviation:"Pass."},{name:"Piazza",abbreviation:"P.zza"},{name:"Piazzale",abbreviation:"P.le"},{name:"Ponte",abbreviation:"P.te"},{name:"Portico",abbreviation:"P.co"},{name:"Rampa",abbreviation:"Rampa"},{name:"Regione",abbreviation:"Reg."},{name:"Rione",abbreviation:"R.ne"},{name:"Rio",abbreviation:"Rio"},{name:"Ripa",abbreviation:"Ripa"},{name:"Riva",abbreviation:"Riva"},{name:"Rond",abbreviation:"Rond"},{name:"Rotonda",abbreviation:"Rot."},{name:"Sagrato",abbreviation:"Sagr."},{name:"Salita",abbreviation:"Sal."},{name:"Scalinata",abbreviation:"Scal."},{name:"Scalone",abbreviation:"Scal."},{name:"Slargo",abbreviation:"Sl."},{name:"Sottoportico",abbreviation:"Sott."},{name:"Strada",abbreviation:"Str."},{name:"Stradale",abbreviation:"Str.le"},{name:"Strettoia",abbreviation:"Strett."},{name:"Traversa",abbreviation:"Trav."},{name:"Via",abbreviation:"V."},{name:"Viale",abbreviation:"V.le"},{name:"Vicinale",abbreviation:"Vic.le"},{name:"Vicolo",abbreviation:"Vic."}],uk:[{name:"Avenue",abbreviation:"Ave"},{name:"Close",abbreviation:"Cl"},{name:"Court",abbreviation:"Ct"},{name:"Crescent",abbreviation:"Cr"},{name:"Drive",abbreviation:"Dr"},{name:"Garden",abbreviation:"Gdn"},{name:"Gardens",abbreviation:"Gdns"},{name:"Green",abbreviation:"Gn"},{name:"Grove",abbreviation:"Gr"},{name:"Lane",abbreviation:"Ln"},{name:"Mount",abbreviation:"Mt"},{name:"Place",abbreviation:"Pl"},{name:"Park",abbreviation:"Pk"},{name:"Ridge",abbreviation:"Rdg"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Valley",abbreviation:"Val"}]},months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"So Tom and Prncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communaut Financire Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communaut Financire Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Franais du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}],colorNames:["AliceBlue","Black","Navy","DarkBlue","MediumBlue","Blue","DarkGreen","Green","Teal","DarkCyan","DeepSkyBlue","DarkTurquoise","MediumSpringGreen","Lime","SpringGreen","Aqua","Cyan","MidnightBlue","DodgerBlue","LightSeaGreen","ForestGreen","SeaGreen","DarkSlateGray","LimeGreen","MediumSeaGreen","Turquoise","RoyalBlue","SteelBlue","DarkSlateBlue","MediumTurquoise","Indigo","DarkOliveGreen","CadetBlue","CornflowerBlue","RebeccaPurple","MediumAquaMarine","DimGray","SlateBlue","OliveDrab","SlateGray","LightSlateGray","MediumSlateBlue","LawnGreen","Chartreuse","Aquamarine","Maroon","Purple","Olive","Gray","SkyBlue","LightSkyBlue","BlueViolet","DarkRed","DarkMagenta","SaddleBrown","Ivory","White","DarkSeaGreen","LightGreen","MediumPurple","DarkViolet","PaleGreen","DarkOrchid","YellowGreen","Sienna","Brown","DarkGray","LightBlue","GreenYellow","PaleTurquoise","LightSteelBlue","PowderBlue","FireBrick","DarkGoldenRod","MediumOrchid","RosyBrown","DarkKhaki","Silver","MediumVioletRed","IndianRed","Peru","Chocolate","Tan","LightGray","Thistle","Orchid","GoldenRod","PaleVioletRed","Crimson","Gainsboro","Plum","BurlyWood","LightCyan","Lavender","DarkSalmon","Violet","PaleGoldenRod","LightCoral","Khaki","AliceBlue","HoneyDew","Azure","SandyBrown","Wheat","Beige","WhiteSmoke","MintCream","GhostWhite","Salmon","AntiqueWhite","Linen","LightGoldenRodYellow","OldLace","Red","Fuchsia","Magenta","DeepPink","OrangeRed","Tomato","HotPink","Coral","DarkOrange","LightSalmon","Orange","LightPink","Pink","Gold","PeachPuff","NavajoWhite","Moccasin","Bisque","MistyRose","BlanchedAlmond","PapayaWhip","LavenderBlush","SeaShell","Cornsilk","LemonChiffon","FloralWhite","Snow","Yellow","LightYellow"],company:["3Com Corp","3M Company","A.G. Edwards Inc.","Abbott Laboratories","Abercrombie & Fitch Co.","ABM Industries Incorporated","Ace Hardware Corporation","ACT Manufacturing Inc.","Acterna Corp.","Adams Resources & Energy, Inc.","ADC Telecommunications, Inc.","Adelphia Communications Corporation","Administaff, Inc.","Adobe Systems Incorporated","Adolph Coors Company","Advance Auto Parts, Inc.","Advanced Micro Devices, Inc.","AdvancePCS, Inc.","Advantica Restaurant Group, Inc.","The AES Corporation","Aetna Inc.","Affiliated Computer Services, Inc.","AFLAC Incorporated","AGCO Corporation","Agilent Technologies, Inc.","Agway Inc.","Apartment Investment and Management Company","Air Products and Chemicals, Inc.","Airborne, Inc.","Airgas, Inc.","AK Steel Holding Corporation","Alaska Air Group, Inc.","Alberto-Culver Company","Albertson's, Inc.","Alcoa Inc.","Alleghany Corporation","Allegheny Energy, Inc.","Allegheny Technologies Incorporated","Allergan, Inc.","ALLETE, Inc.","Alliant Energy Corporation","Allied Waste Industries, Inc.","Allmerica Financial Corporation","The Allstate Corporation","ALLTEL Corporation","The Alpine Group, Inc.","Amazon.com, Inc.","AMC Entertainment Inc.","American Power Conversion Corporation","Amerada Hess Corporation","AMERCO","Ameren Corporation","America West Holdings Corporation","American Axle & Manufacturing Holdings, Inc.","American Eagle Outfitters, Inc.","American Electric Power Company, Inc.","American Express Company","American Financial Group, Inc.","American Greetings Corporation","American International Group, Inc.","American Standard Companies Inc.","American Water Works Company, Inc.","AmerisourceBergen Corporation","Ames Department Stores, Inc.","Amgen Inc.","Amkor Technology, Inc.","AMR Corporation","AmSouth Bancorp.","Amtran, Inc.","Anadarko Petroleum Corporation","Analog Devices, Inc.","Anheuser-Busch Companies, Inc.","Anixter International Inc.","AnnTaylor Inc.","Anthem, Inc.","AOL Time Warner Inc.","Aon Corporation","Apache Corporation","Apple Computer, Inc.","Applera Corporation","Applied Industrial Technologies, Inc.","Applied Materials, Inc.","Aquila, Inc.","ARAMARK Corporation","Arch Coal, Inc.","Archer Daniels Midland Company","Arkansas Best Corporation","Armstrong Holdings, Inc.","Arrow Electronics, Inc.","ArvinMeritor, Inc.","Ashland Inc.","Astoria Financial Corporation","AT&T Corp.","Atmel Corporation","Atmos Energy Corporation","Audiovox Corporation","Autoliv, Inc.","Automatic Data Processing, Inc.","AutoNation, Inc.","AutoZone, Inc.","Avaya Inc.","Avery Dennison Corporation","Avista Corporation","Avnet, Inc.","Avon Products, Inc.","Baker Hughes Incorporated","Ball Corporation","Bank of America Corporation","The Bank of New York Company, Inc.","Bank One Corporation","Banknorth Group, Inc.","Banta Corporation","Barnes & Noble, Inc.","Bausch & Lomb Incorporated","Baxter International Inc.","BB&T Corporation","The Bear Stearns Companies Inc.","Beazer Homes USA, Inc.","Beckman Coulter, Inc.","Becton, Dickinson and Company","Bed Bath & Beyond Inc.","Belk, Inc.","Bell Microproducts Inc.","BellSouth Corporation","Belo Corp.","Bemis Company, Inc.","Benchmark Electronics, Inc.","Berkshire Hathaway Inc.","Best Buy Co., Inc.","Bethlehem Steel Corporation","Beverly Enterprises, Inc.","Big Lots, Inc.","BJ Services Company","BJ's Wholesale Club, Inc.","The Black & Decker Corporation","Black Hills Corporation","BMC Software, Inc.","The Boeing Company","Boise Cascade Corporation","Borders Group, Inc.","BorgWarner Inc.","Boston Scientific Corporation","Bowater Incorporated","Briggs & Stratton Corporation","Brightpoint, Inc.","Brinker International, Inc.","Bristol-Myers Squibb Company","Broadwing, Inc.","Brown Shoe Company, Inc.","Brown-Forman Corporation","Brunswick Corporation","Budget Group, Inc.","Burlington Coat Factory Warehouse Corporation","Burlington Industries, Inc.","Burlington Northern Santa Fe Corporation","Burlington Resources Inc.","C. H. Robinson Worldwide Inc.","Cablevision Systems Corp","Cabot Corp","Cadence Design Systems, Inc.","Calpine Corp.","Campbell Soup Co.","Capital One Financial Corp.","Cardinal Health Inc.","Caremark Rx Inc.","Carlisle Cos. Inc.","Carpenter Technology Corp.","Casey's General Stores Inc.","Caterpillar Inc.","CBRL Group Inc.","CDI Corp.","CDW Computer Centers Inc.","CellStar Corp.","Cendant Corp","Cenex Harvest States Cooperatives","Centex Corp.","CenturyTel Inc.","Ceridian Corp.","CH2M Hill Cos. Ltd.","Champion Enterprises Inc.","Charles Schwab Corp.","Charming Shoppes Inc.","Charter Communications Inc.","Charter One Financial Inc.","ChevronTexaco Corp.","Chiquita Brands International Inc.","Chubb Corp","Ciena Corp.","Cigna Corp","Cincinnati Financial Corp.","Cinergy Corp.","Cintas Corp.","Circuit City Stores Inc.","Cisco Systems Inc.","Citigroup, Inc","Citizens Communications Co.","CKE Restaurants Inc.","Clear Channel Communications Inc.","The Clorox Co.","CMGI Inc.","CMS Energy Corp.","CNF Inc.","Coca-Cola Co.","Coca-Cola Enterprises Inc.","Colgate-Palmolive Co.","Collins & Aikman Corp.","Comcast Corp.","Comdisco Inc.","Comerica Inc.","Comfort Systems USA Inc.","Commercial Metals Co.","Community Health Systems Inc.","Compass Bancshares Inc","Computer Associates International Inc.","Computer Sciences Corp.","Compuware Corp.","Comverse Technology Inc.","ConAgra Foods Inc.","Concord EFS Inc.","Conectiv, Inc","Conoco Inc","Conseco Inc.","Consolidated Freightways Corp.","Consolidated Edison Inc.","Constellation Brands Inc.","Constellation Emergy Group Inc.","Continental Airlines Inc.","Convergys Corp.","Cooper Cameron Corp.","Cooper Industries Ltd.","Cooper Tire & Rubber Co.","Corn Products International Inc.","Corning Inc.","Costco Wholesale Corp.","Countrywide Credit Industries Inc.","Coventry Health Care Inc.","Cox Communications Inc.","Crane Co.","Crompton Corp.","Crown Cork & Seal Co. Inc.","CSK Auto Corp.","CSX Corp.","Cummins Inc.","CVS Corp.","Cytec Industries Inc.","D&K Healthcare Resources, Inc.","D.R. Horton Inc.","Dana Corporation","Danaher Corporation","Darden Restaurants Inc.","DaVita Inc.","Dean Foods Company","Deere & Company","Del Monte Foods Co","Dell Computer Corporation","Delphi Corp.","Delta Air Lines Inc.","Deluxe Corporation","Devon Energy Corporation","Di Giorgio Corporation","Dial Corporation","Diebold Incorporated","Dillard's Inc.","DIMON Incorporated","Dole Food Company, Inc.","Dollar General Corporation","Dollar Tree Stores, Inc.","Dominion Resources, Inc.","Domino's Pizza LLC","Dover Corporation, Inc.","Dow Chemical Company","Dow Jones & Company, Inc.","DPL Inc.","DQE Inc.","Dreyer's Grand Ice Cream, Inc.","DST Systems, Inc.","DTE Energy Co.","E.I. Du Pont de Nemours and Company","Duke Energy Corp","Dun & Bradstreet Inc.","DURA Automotive Systems Inc.","DynCorp","Dynegy Inc.","E*Trade Group, Inc.","E.W. Scripps Company","Earthlink, Inc.","Eastman Chemical Company","Eastman Kodak Company","Eaton Corporation","Echostar Communications Corporation","Ecolab Inc.","Edison International","EGL Inc.","El Paso Corporation","Electronic Arts Inc.","Electronic Data Systems Corp.","Eli Lilly and Company","EMC Corporation","Emcor Group Inc.","Emerson Electric Co.","Encompass Services Corporation","Energizer Holdings Inc.","Energy East Corporation","Engelhard Corporation","Enron Corp.","Entergy Corporation","Enterprise Products Partners L.P.","EOG Resources, Inc.","Equifax Inc.","Equitable Resources Inc.","Equity Office Properties Trust","Equity Residential Properties Trust","Estee Lauder Companies Inc.","Exelon Corporation","Exide Technologies","Expeditors International of Washington Inc.","Express Scripts Inc.","ExxonMobil Corporation","Fairchild Semiconductor International Inc.","Family Dollar Stores Inc.","Farmland Industries Inc.","Federal Mogul Corp.","Federated Department Stores Inc.","Federal Express Corp.","Felcor Lodging Trust Inc.","Ferro Corp.","Fidelity National Financial Inc.","Fifth Third Bancorp","First American Financial Corp.","First Data Corp.","First National of Nebraska Inc.","First Tennessee National Corp.","FirstEnergy Corp.","Fiserv Inc.","Fisher Scientific International Inc.","FleetBoston Financial Co.","Fleetwood Enterprises Inc.","Fleming Companies Inc.","Flowers Foods Inc.","Flowserv Corp","Fluor Corp","FMC Corp","Foamex International Inc","Foot Locker Inc","Footstar Inc.","Ford Motor Co","Forest Laboratories Inc.","Fortune Brands Inc.","Foster Wheeler Ltd.","FPL Group Inc.","Franklin Resources Inc.","Freeport McMoran Copper & Gold Inc.","Frontier Oil Corp","Furniture Brands International Inc.","Gannett Co., Inc.","Gap Inc.","Gateway Inc.","GATX Corporation","Gemstar-TV Guide International Inc.","GenCorp Inc.","General Cable Corporation","General Dynamics Corporation","General Electric Company","General Mills Inc","General Motors Corporation","Genesis Health Ventures Inc.","Gentek Inc.","Gentiva Health Services Inc.","Genuine Parts Company","Genuity Inc.","Genzyme Corporation","Georgia Gulf Corporation","Georgia-Pacific Corporation","Gillette Company","Gold Kist Inc.","Golden State Bancorp Inc.","Golden West Financial Corporation","Goldman Sachs Group Inc.","Goodrich Corporation","The Goodyear Tire & Rubber Company","Granite Construction Incorporated","Graybar Electric Company Inc.","Great Lakes Chemical Corporation","Great Plains Energy Inc.","GreenPoint Financial Corp.","Greif Bros. Corporation","Grey Global Group Inc.","Group 1 Automotive Inc.","Guidant Corporation","H&R Block Inc.","H.B. Fuller Company","H.J. Heinz Company","Halliburton Co.","Harley-Davidson Inc.","Harman International Industries Inc.","Harrah's Entertainment Inc.","Harris Corp.","Harsco Corp.","Hartford Financial Services Group Inc.","Hasbro Inc.","Hawaiian Electric Industries Inc.","HCA Inc.","Health Management Associates Inc.","Health Net Inc.","Healthsouth Corp","Henry Schein Inc.","Hercules Inc.","Herman Miller Inc.","Hershey Foods Corp.","Hewlett-Packard Company","Hibernia Corp.","Hillenbrand Industries Inc.","Hilton Hotels Corp.","Hollywood Entertainment Corp.","Home Depot Inc.","Hon Industries Inc.","Honeywell International Inc.","Hormel Foods Corp.","Host Marriott Corp.","Household International Corp.","Hovnanian Enterprises Inc.","Hub Group Inc.","Hubbell Inc.","Hughes Supply Inc.","Humana Inc.","Huntington Bancshares Inc.","Idacorp Inc.","IDT Corporation","IKON Office Solutions Inc.","Illinois Tool Works Inc.","IMC Global Inc.","Imperial Sugar Company","IMS Health Inc.","Ingles Market Inc","Ingram Micro Inc.","Insight Enterprises Inc.","Integrated Electrical Services Inc.","Intel Corporation","International Paper Co.","Interpublic Group of Companies Inc.","Interstate Bakeries Corporation","International Business Machines Corp.","International Flavors & Fragrances Inc.","International Multifoods Corporation","Intuit Inc.","IT Group Inc.","ITT Industries Inc.","Ivax Corp.","J.B. Hunt Transport Services Inc.","J.C. Penny Co.","J.P. Morgan Chase & Co.","Jabil Circuit Inc.","Jack In The Box Inc.","Jacobs Engineering Group Inc.","JDS Uniphase Corp.","Jefferson-Pilot Co.","John Hancock Financial Services Inc.","Johnson & Johnson","Johnson Controls Inc.","Jones Apparel Group Inc.","KB Home","Kellogg Company","Kellwood Company","Kelly Services Inc.","Kemet Corp.","Kennametal Inc.","Kerr-McGee Corporation","KeyCorp","KeySpan Corp.","Kimball International Inc.","Kimberly-Clark Corporation","Kindred Healthcare Inc.","KLA-Tencor Corporation","K-Mart Corp.","Knight-Ridder Inc.","Kohl's Corp.","KPMG Consulting Inc.","Kroger Co.","L-3 Communications Holdings Inc.","Laboratory Corporation of America Holdings","Lam Research Corporation","LandAmerica Financial Group Inc.","Lands' End Inc.","Landstar System Inc.","La-Z-Boy Inc.","Lear Corporation","Legg Mason Inc.","Leggett & Platt Inc.","Lehman Brothers Holdings Inc.","Lennar Corporation","Lennox International Inc.","Level 3 Communications Inc.","Levi Strauss & Co.","Lexmark International Inc.","Limited Inc.","Lincoln National Corporation","Linens 'n Things Inc.","Lithia Motors Inc.","Liz Claiborne Inc.","Lockheed Martin Corporation","Loews Corporation","Longs Drug Stores Corporation","Louisiana-Pacific Corporation","Lowe's Companies Inc.","LSI Logic Corporation","The LTV Corporation","The Lubrizol Corporation","Lucent Technologies Inc.","Lyondell Chemical Company","M & T Bank Corporation","Magellan Health Services Inc.","Mail-Well Inc.","Mandalay Resort Group","Manor Care Inc.","Manpower Inc.","Marathon Oil Corporation","Mariner Health Care Inc.","Markel Corporation","Marriott International Inc.","Marsh & McLennan Companies Inc.","Marsh Supermarkets Inc.","Marshall & Ilsley Corporation","Martin Marietta Materials Inc.","Masco Corporation","Massey Energy Company","MasTec Inc.","Mattel Inc.","Maxim Integrated Products Inc.","Maxtor Corporation","Maxxam Inc.","The May Department Stores Company","Maytag Corporation","MBNA Corporation","McCormick & Company Incorporated","McDonald's Corporation","The McGraw-Hill Companies Inc.","McKesson Corporation","McLeodUSA Incorporated","M.D.C. Holdings Inc.","MDU Resources Group Inc.","MeadWestvaco Corporation","Medtronic Inc.","Mellon Financial Corporation","The Men's Wearhouse Inc.","Merck & Co., Inc.","Mercury General Corporation","Merrill Lynch & Co. Inc.","Metaldyne Corporation","Metals USA Inc.","MetLife Inc.","Metris Companies Inc","MGIC Investment Corporation","MGM Mirage","Michaels Stores Inc.","Micron Technology Inc.","Microsoft Corporation","Milacron Inc.","Millennium Chemicals Inc.","Mirant Corporation","Mohawk Industries Inc.","Molex Incorporated","The MONY Group Inc.","Morgan Stanley Dean Witter & Co.","Motorola Inc.","MPS Group Inc.","Murphy Oil Corporation","Nabors Industries Inc","Nacco Industries Inc","Nash Finch Company","National City Corp.","National Commerce Financial Corporation","National Fuel Gas Company","National Oilwell Inc","National Rural Utilities Cooperative Finance Corporation","National Semiconductor Corporation","National Service Industries Inc","Navistar International Corporation","NCR Corporation","The Neiman Marcus Group Inc.","New Jersey Resources Corporation","New York Times Company","Newell Rubbermaid Inc","Newmont Mining Corporation","Nextel Communications Inc","Nicor Inc","Nike Inc","NiSource Inc","Noble Energy Inc","Nordstrom Inc","Norfolk Southern Corporation","Nortek Inc","North Fork Bancorporation Inc","Northeast Utilities System","Northern Trust Corporation","Northrop Grumman Corporation","NorthWestern Corporation","Novellus Systems Inc","NSTAR","NTL Incorporated","Nucor Corp","Nvidia Corp","NVR Inc","Northwest Airlines Corp","Occidental Petroleum Corp","Ocean Energy Inc","Office Depot Inc.","OfficeMax Inc","OGE Energy Corp","Oglethorpe Power Corp.","Ohio Casualty Corp.","Old Republic International Corp.","Olin Corp.","OM Group Inc","Omnicare Inc","Omnicom Group","On Semiconductor Corp","ONEOK Inc","Oracle Corp","Oshkosh Truck Corp","Outback Steakhouse Inc.","Owens & Minor Inc.","Owens Corning","Owens-Illinois Inc","Oxford Health Plans Inc","Paccar Inc","PacifiCare Health Systems Inc","Packaging Corp. of America","Pactiv Corp","Pall Corp","Pantry Inc","Park Place Entertainment Corp","Parker Hannifin Corp.","Pathmark Stores Inc.","Paychex Inc","Payless Shoesource Inc","Penn Traffic Co.","Pennzoil-Quaker State Company","Pentair Inc","Peoples Energy Corp.","PeopleSoft Inc","Pep Boys Manny, Moe & Jack","Potomac Electric Power Co.","Pepsi Bottling Group Inc.","PepsiAmericas Inc.","PepsiCo Inc.","Performance Food Group Co.","Perini Corp","PerkinElmer Inc","Perot Systems Corp","Petco Animal Supplies Inc.","Peter Kiewit Sons', Inc.","PETsMART Inc","Pfizer Inc","Pacific Gas & Electric Corp.","Pharmacia Corp","Phar Mor Inc.","Phelps Dodge Corp.","Philip Morris Companies Inc.","Phillips Petroleum Co","Phillips Van Heusen Corp.","Phoenix Companies Inc","Pier 1 Imports Inc.","Pilgrim's Pride Corporation","Pinnacle West Capital Corp","Pioneer-Standard Electronics Inc.","Pitney Bowes Inc.","Pittston Brinks Group","Plains All American Pipeline LP","PNC Financial Services Group Inc.","PNM Resources Inc","Polaris Industries Inc.","Polo Ralph Lauren Corp","PolyOne Corp","Popular Inc","Potlatch Corp","PPG Industries Inc","PPL Corp","Praxair Inc","Precision Castparts Corp","Premcor Inc.","Pride International Inc","Primedia Inc","Principal Financial Group Inc.","Procter & Gamble Co.","Pro-Fac Cooperative Inc.","Progress Energy Inc","Progressive Corporation","Protective Life Corp","Provident Financial Group","Providian Financial Corp.","Prudential Financial Inc.","PSS World Medical Inc","Public Service Enterprise Group Inc.","Publix Super Markets Inc.","Puget Energy Inc.","Pulte Homes Inc","Qualcomm Inc","Quanta Services Inc.","Quantum Corp","Quest Diagnostics Inc.","Questar Corp","Quintiles Transnational","Qwest Communications Intl Inc","R.J. Reynolds Tobacco Company","R.R. Donnelley & Sons Company","Radio Shack Corporation","Raymond James Financial Inc.","Raytheon Company","Reader's Digest Association Inc.","Reebok International Ltd.","Regions Financial Corp.","Regis Corporation","Reliance Steel & Aluminum Co.","Reliant Energy Inc.","Rent A Center Inc","Republic Services Inc","Revlon Inc","RGS Energy Group Inc","Rite Aid Corp","Riverwood Holding Inc.","RoadwayCorp","Robert Half International Inc.","Rock-Tenn Co","Rockwell Automation Inc","Rockwell Collins Inc","Rohm & Haas Co.","Ross Stores Inc","RPM Inc.","Ruddick Corp","Ryder System Inc","Ryerson Tull Inc","Ryland Group Inc.","Sabre Holdings Corp","Safeco Corp","Safeguard Scientifics Inc.","Safeway Inc","Saks Inc","Sanmina-SCI Inc","Sara Lee Corp","SBC Communications Inc","Scana Corp.","Schering-Plough Corp","Scholastic Corp","SCI Systems Onc.","Science Applications Intl. Inc.","Scientific-Atlanta Inc","Scotts Company","Seaboard Corp","Sealed Air Corp","Sears Roebuck & Co","Sempra Energy","Sequa Corp","Service Corp. International","ServiceMaster Co","Shaw Group Inc","Sherwin-Williams Company","Shopko Stores Inc","Siebel Systems Inc","Sierra Health Services Inc","Sierra Pacific Resources","Silgan Holdings Inc.","Silicon Graphics Inc","Simon Property Group Inc","SLM Corporation","Smith International Inc","Smithfield Foods Inc","Smurfit-Stone Container Corp","Snap-On Inc","Solectron Corp","Solutia Inc","Sonic Automotive Inc.","Sonoco Products Co.","Southern Company","Southern Union Company","SouthTrust Corp.","Southwest Airlines Co","Southwest Gas Corp","Sovereign Bancorp Inc.","Spartan Stores Inc","Spherion Corp","Sports Authority Inc","Sprint Corp.","SPX Corp","St. Jude Medical Inc","St. Paul Cos.","Staff Leasing Inc.","StanCorp Financial Group Inc","Standard Pacific Corp.","Stanley Works","Staples Inc","Starbucks Corp","Starwood Hotels & Resorts Worldwide Inc","State Street Corp.","Stater Bros. Holdings Inc.","Steelcase Inc","Stein Mart Inc","Stewart & Stevenson Services Inc","Stewart Information Services Corp","Stilwell Financial Inc","Storage Technology Corporation","Stryker Corp","Sun Healthcare Group Inc.","Sun Microsystems Inc.","SunGard Data Systems Inc.","Sunoco Inc.","SunTrust Banks Inc","Supervalu Inc","Swift Transportation, Co., Inc","Symbol Technologies Inc","Synovus Financial Corp.","Sysco Corp","Systemax Inc.","Target Corp.","Tech Data Corporation","TECO Energy Inc","Tecumseh Products Company","Tektronix Inc","Teleflex Incorporated","Telephone & Data Systems Inc","Tellabs Inc.","Temple-Inland Inc","Tenet Healthcare Corporation","Tenneco Automotive Inc.","Teradyne Inc","Terex Corp","Tesoro Petroleum Corp.","Texas Industries Inc.","Texas Instruments Incorporated","Textron Inc","Thermo Electron Corporation","Thomas & Betts Corporation","Tiffany & Co","Timken Company","TJX Companies Inc","TMP Worldwide Inc","Toll Brothers Inc","Torchmark Corporation","Toro Company","Tower Automotive Inc.","Toys 'R' Us Inc","Trans World Entertainment Corp.","TransMontaigne Inc","Transocean Inc","TravelCenters of America Inc.","Triad Hospitals Inc","Tribune Company","Trigon Healthcare Inc.","Trinity Industries Inc","Trump Hotels & Casino Resorts Inc.","TruServ Corporation","TRW Inc","TXU Corp","Tyson Foods Inc","U.S. Bancorp","U.S. Industries Inc.","UAL Corporation","UGI Corporation","Unified Western Grocers Inc","Union Pacific Corporation","Union Planters Corp","Unisource Energy Corp","Unisys Corporation","United Auto Group Inc","United Defense Industries Inc.","United Parcel Service Inc","United Rentals Inc","United Stationers Inc","United Technologies Corporation","UnitedHealth Group Incorporated","Unitrin Inc","Universal Corporation","Universal Forest Products Inc","Universal Health Services Inc","Unocal Corporation","Unova Inc","UnumProvident Corporation","URS Corporation","US Airways Group Inc","US Oncology Inc","USA Interactive","USFreighways Corporation","USG Corporation","UST Inc","Valero Energy Corporation","Valspar Corporation","Value City Department Stores Inc","Varco International Inc","Vectren Corporation","Veritas Software Corporation","Verizon Communications Inc","VF Corporation","Viacom Inc","Viad Corp","Viasystems Group Inc","Vishay Intertechnology Inc","Visteon Corporation","Volt Information Sciences Inc","Vulcan Materials Company","W.R. Berkley Corporation","W.R. Grace & Co","W.W. Grainger Inc","Wachovia Corporation","Wakenhut Corporation","Walgreen Co","Wallace Computer Services Inc","Wal-Mart Stores Inc","Walt Disney Co","Walter Industries Inc","Washington Mutual Inc","Washington Post Co.","Waste Management Inc","Watsco Inc","Weatherford International Inc","Weis Markets Inc.","Wellpoint Health Networks Inc","Wells Fargo & Company","Wendy's International Inc","Werner Enterprises Inc","WESCO International Inc","Western Digital Inc","Western Gas Resources Inc","WestPoint Stevens Inc","Weyerhauser Company","WGL Holdings Inc","Whirlpool Corporation","Whole Foods Market Inc","Willamette Industries Inc.","Williams Companies Inc","Williams Sonoma Inc","Winn Dixie Stores Inc","Wisconsin Energy Corporation","Wm Wrigley Jr Company","World Fuel Services Corporation","WorldCom Inc","Worthington Industries Inc","WPS Resources Corporation","Wyeth","Wyndham International Inc","Xcel Energy Inc","Xerox Corp","Xilinx Inc","XO Communications Inc","Yellow Corporation","York International Corp","Yum Brands Inc.","Zale Corporation","Zions Bancorporation"],fileExtension:{raster:["bmp","gif","gpl","ico","jpeg","psd","png","psp","raw","tiff"],vector:["3dv","amf","awg","ai","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","odg","svg","xar"],"3d":["3dmf","3dm","3mf","3ds","an8","aoi","blend","cal3d","cob","ctm","iob","jas","max","mb","mdx","obj","x","x3d"],document:["doc","docx","dot","html","xml","odt","odm","ott","csv","rtf","tex","xhtml","xps"]},timezones:[{name:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!1,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{name:"UTC-11",abbr:"U",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{name:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{name:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{name:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{name:"Pacific Standard Time",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{name:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{name:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{name:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{name:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{name:"Central Standard Time",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{name:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{name:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{name:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{name:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:!0,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{name:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:!0,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{name:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{name:"Paraguay Standard Time",abbr:"PST",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{name:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{name:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{name:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{name:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{name:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{name:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{name:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{name:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{name:"Greenland Standard Time",abbr:"GDT",offset:-2,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{name:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{name:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{name:"UTC-02",abbr:"U",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{name:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old"},{name:"Azores Standard Time",abbr:"ADT",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{name:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{name:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{name:"UTC",abbr:"CUT",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{name:"GMT Standard Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Edinburgh, Lisbon, London",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London"]},{name:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{name:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{name:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{name:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{name:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{name:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{name:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{name:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{name:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{name:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{name:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{name:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:!0,text:"(UTC+02:00) E. Europe"},{name:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{name:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{name:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:!0,text:"(UTC+02:00) Istanbul",utc:["Europe/Istanbul"]},{name:"Israel Standard Time",abbr:"JDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{name:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{name:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{name:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{name:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+03:00) Kaliningrad, Minsk",utc:["Europe/Kaliningrad","Europe/Minsk"]},{name:"Arab Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{name:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{name:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{name:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{name:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{name:"Russian Standard Time",abbr:"RST",offset:4,isdst:!1,text:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",utc:["Europe/Moscow","Europe/Samara","Europe/Simferopol","Europe/Volgograd"]},{name:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{name:"Georgian Standard Time",abbr:"GST",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{name:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{name:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{name:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{name:"Pakistan Standard Time",abbr:"PST",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{name:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Calcutta"]},{name:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{name:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Katmandu"]},{name:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Astana",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{name:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{name:"Ekaterinburg Standard Time",abbr:"EST",offset:6,isdst:!1,text:"(UTC+06:00) Ekaterinburg",utc:["Asia/Yekaterinburg"]},{name:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{name:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{name:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{name:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{name:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{name:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{name:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{name:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{name:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{name:"North Asia East Standard Time",abbr:"NAEST",offset:9,isdst:!1,text:"(UTC+09:00) Irkutsk",utc:["Asia/Irkutsk"]},{name:"Tokyo Standard Time",abbr:"TST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{name:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{name:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{name:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{name:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{name:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{name:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{name:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{name:"Yakutsk Standard Time",abbr:"YST",offset:10,isdst:!1,text:"(UTC+10:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{name:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{name:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{name:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{name:"UTC+12",abbr:"U",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{name:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{name:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{name:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:!0,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{name:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{name:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}],profession:["Airline Pilot","Academic Team","Accountant","Account Executive","Actor","Actuary","Acquisition Analyst","Administrative Asst.","Administrative Analyst","Administrator","Advertising Director","Aerospace Engineer","Agent","Agricultural Inspector","Agricultural Scientist","Air Traffic Controller","Animal Trainer","Anthropologist","Appraiser","Architect","Art Director","Artist","Astronomer","Athletic Coach","Auditor","Author","Baker","Banker","Bankruptcy Attorney","Benefits Manager","Biologist","Bio-feedback Specialist","Biomedical Engineer","Biotechnical Researcher","Broadcaster","Broker","Building Manager","Building Contractor","Building Inspector","Business Analyst","Business Planner","Business Manager","Buyer","Call Center Manager","Career Counselor","Cash Manager","Ceramic Engineer","Chief Executive Officer","Chief Operation Officer","Chef","Chemical Engineer","Chemist","Child Care Manager","Chief Medical Officer","Chiropractor","Cinematographer","City Housing Manager","City Manager","Civil Engineer","Claims Manager","Clinical Research Assistant","Collections Manager","Compliance Manager","Comptroller","Computer Manager","Commercial Artist","Communications Affairs Director","Communications Director","Communications Engineer","Compensation Analyst","Computer Programmer","Computer Ops. Manager","Computer Engineer","Computer Operator","Computer Graphics Specialist","Construction Engineer","Construction Manager","Consultant","Consumer Relations Manager","Contract Administrator","Copyright Attorney","Copywriter","Corporate Planner","Corrections Officer","Cosmetologist","Credit Analyst","Cruise Director","Chief Information Officer","Chief Technology Officer","Customer Service Manager","Cryptologist","Dancer","Data Security Manager","Database Manager","Day Care Instructor","Dentist","Designer","Design Engineer","Desktop Publisher","Developer","Development Officer","Diamond Merchant","Dietitian","Direct Marketer","Director","Distribution Manager","Diversity Manager","Economist","EEO Compliance Manager","Editor","Education Adminator","Electrical Engineer","Electro Optical Engineer","Electronics Engineer","Embassy Management","Employment Agent","Engineer Technician","Entrepreneur","Environmental Analyst","Environmental Attorney","Environmental Engineer","Environmental Specialist","Escrow Officer","Estimator","Executive Assistant","Executive Director","Executive Recruiter","Facilities Manager","Family Counselor","Fashion Events Manager","Fashion Merchandiser","Fast Food Manager","Film Producer","Film Production Assistant","Financial Analyst","Financial Planner","Financier","Fine Artist","Wildlife Specialist","Fitness Consultant","Flight Attendant","Flight Engineer","Floral Designer","Food & Beverage Director","Food Service Manager","Forestry Technician","Franchise Management","Franchise Sales","Fraud Investigator","Freelance Writer","Fund Raiser","General Manager","Geologist","General Counsel","Geriatric Specialist","Gerontologist","Glamour Photographer","Golf Club Manager","Gourmet Chef","Graphic Designer","Grounds Keeper","Hazardous Waste Manager","Health Care Manager","Health Therapist","Health Service Administrator","Hearing Officer","Home Economist","Horticulturist","Hospital Administrator","Hotel Manager","Human Resources Manager","Importer","Industrial Designer","Industrial Engineer","Information Director","Inside Sales","Insurance Adjuster","Interior Decorator","Internal Controls Director","International Acct.","International Courier","International Lawyer","Interpreter","Investigator","Investment Banker","Investment Manager","IT Architect","IT Project Manager","IT Systems Analyst","Jeweler","Joint Venture Manager","Journalist","Labor Negotiator","Labor Organizer","Labor Relations Manager","Lab Services Director","Lab Technician","Land Developer","Landscape Architect","Law Enforcement Officer","Lawyer","Lead Software Engineer","Lead Software Test Engineer","Leasing Manager","Legal Secretary","Library Manager","Litigation Attorney","Loan Officer","Lobbyist","Logistics Manager","Maintenance Manager","Management Consultant","Managed Care Director","Managing Partner","Manufacturing Director","Manpower Planner","Marine Biologist","Market Res. Analyst","Marketing Director","Materials Manager","Mathematician","Membership Chairman","Mechanic","Mechanical Engineer","Media Buyer","Medical Investor","Medical Secretary","Medical Technician","Mental Health Counselor","Merchandiser","Metallurgical Engineering","Meteorologist","Microbiologist","MIS Manager","Motion Picture Director","Multimedia Director","Musician","Network Administrator","Network Specialist","Network Operator","New Product Manager","Novelist","Nuclear Engineer","Nuclear Specialist","Nutritionist","Nursing Administrator","Occupational Therapist","Oceanographer","Office Manager","Operations Manager","Operations Research Director","Optical Technician","Optometrist","Organizational Development Manager","Outplacement Specialist","Paralegal","Park Ranger","Patent Attorney","Payroll Specialist","Personnel Specialist","Petroleum Engineer","Pharmacist","Photographer","Physical Therapist","Physician","Physician Assistant","Physicist","Planning Director","Podiatrist","Political Analyst","Political Scientist","Politician","Portfolio Manager","Preschool Management","Preschool Teacher","Principal","Private Banker","Private Investigator","Probation Officer","Process Engineer","Producer","Product Manager","Product Engineer","Production Engineer","Production Planner","Professional Athlete","Professional Coach","Professor","Project Engineer","Project Manager","Program Manager","Property Manager","Public Administrator","Public Safety Director","PR Specialist","Publisher","Purchasing Agent","Publishing Director","Quality Assurance Specialist","Quality Control Engineer","Quality Control Inspector","Radiology Manager","Railroad Engineer","Real Estate Broker","Recreational Director","Recruiter","Redevelopment Specialist","Regulatory Affairs Manager","Registered Nurse","Rehabilitation Counselor","Relocation Manager","Reporter","Research Specialist","Restaurant Manager","Retail Store Manager","Risk Analyst","Safety Engineer","Sales Engineer","Sales Trainer","Sales Promotion Manager","Sales Representative","Sales Manager","Service Manager","Sanitation Engineer","Scientific Programmer","Scientific Writer","Securities Analyst","Security Consultant","Security Director","Seminar Presenter","Ship's Officer","Singer","Social Director","Social Program Planner","Social Research","Social Scientist","Social Worker","Sociologist","Software Developer","Software Engineer","Software Test Engineer","Soil Scientist","Special Events Manager","Special Education Teacher","Special Projects Director","Speech Pathologist","Speech Writer","Sports Event Manager","Statistician","Store Manager","Strategic Alliance Director","Strategic Planning Director","Stress Reduction Specialist","Stockbroker","Surveyor","Structural Engineer","Superintendent","Supply Chain Director","System Engineer","Systems Analyst","Systems Programmer","System Administrator","Tax Specialist","Teacher","Technical Support Specialist","Technical Illustrator","Technical Writer","Technology Director","Telecom Analyst","Telemarketer","Theatrical Director","Title Examiner","Tour Escort","Tour Guide Director","Traffic Manager","Trainer Translator","Transportation Manager","Travel Agent","Treasurer","TV Programmer","Underwriter","Union Representative","University Administrator","University Dean","Urban Planner","Veterinarian","Vendor Relations Director","Viticulturist","Warehouse Manager"],animals:{ocean:["Acantharea","Anemone","Angelfish King","Ahi Tuna","Albacore","American Oyster","Anchovy","Armored Snail","Arctic Char","Atlantic Bluefin Tuna","Atlantic Cod","Atlantic Goliath Grouper","Atlantic Trumpetfish","Atlantic Wolffish","Baleen Whale","Banded Butterflyfish","Banded Coral Shrimp","Banded Sea Krait","Barnacle","Barndoor Skate","Barracuda","Basking Shark","Bass","Beluga Whale","Bluebanded Goby","Bluehead Wrasse","Bluefish","Bluestreak Cleaner-Wrasse","Blue Marlin","Blue Shark","Blue Spiny Lobster","Blue Tang","Blue Whale","Broadclub Cuttlefish","Bull Shark","Chambered Nautilus","Chilean Basket Star","Chilean Jack Mackerel","Chinook Salmon","Christmas Tree Worm","Clam","Clown Anemonefish","Clown Triggerfish","Cod","Coelacanth","Cockscomb Cup Coral","Common Fangtooth","Conch","Cookiecutter Shark","Copepod","Coral","Corydoras","Cownose Ray","Crab","Crown-of-Thorns Starfish","Cushion Star","Cuttlefish","California Sea Otters","Dolphin","Dolphinfish","Dory","Devil Fish","Dugong","Dumbo Octopus","Dungeness Crab","Eccentric Sand Dollar","Edible Sea Cucumber","Eel","Elephant Seal","Elkhorn Coral","Emperor Shrimp","Estuarine Crocodile","Fathead Sculpin","Fiddler Crab","Fin Whale","Flameback","Flamingo Tongue Snail","Flashlight Fish","Flatback Turtle","Flatfish","Flying Fish","Flounder","Fluke","French Angelfish","Frilled Shark","Fugu (also called Pufferfish)","Gar","Geoduck","Giant Barrel Sponge","Giant Caribbean Sea Anemone","Giant Clam","Giant Isopod","Giant Kingfish","Giant Oarfish","Giant Pacific Octopus","Giant Pyrosome","Giant Sea Star","Giant Squid","Glowing Sucker Octopus","Giant Tube Worm","Goblin Shark","Goosefish","Great White Shark","Greenland Shark","Grey Atlantic Seal","Grouper","Grunion","Guineafowl Puffer","Haddock","Hake","Halibut","Hammerhead Shark","Hapuka","Harbor Porpoise","Harbor Seal","Hatchetfish","Hawaiian Monk Seal","Hawksbill Turtle","Hector's Dolphin","Hermit Crab","Herring","Hoki","Horn Shark","Horseshoe Crab","Humpback Anglerfish","Humpback Whale","Icefish","Imperator Angelfish","Irukandji Jellyfish","Isopod","Ivory Bush Coral","Japanese Spider Crab","Jellyfish","John Dory","Juan Fernandez Fur Seal","Killer Whale","Kiwa Hirsuta","Krill","Lagoon Triggerfish","Lamprey","Leafy Seadragon","Leopard Seal","Limpet","Ling","Lionfish","Lions Mane Jellyfish","Lobe Coral","Lobster","Loggerhead Turtle","Longnose Sawshark","Longsnout Seahorse","Lophelia Coral","Marrus Orthocanna","Manatee","Manta Ray","Marlin","Megamouth Shark","Mexican Lookdown","Mimic Octopus","Moon Jelly","Mollusk","Monkfish","Moray Eel","Mullet","Mussel","Megaladon","Napoleon Wrasse","Nassau Grouper","Narwhal","Nautilus","Needlefish","Northern Seahorse","North Atlantic Right Whale","Northern Red Snapper","Norway Lobster","Nudibranch","Nurse Shark","Oarfish","Ocean Sunfish","Oceanic Whitetip Shark","Octopus","Olive Sea Snake","Orange Roughy","Ostracod","Otter","Oyster","Pacific Angelshark","Pacific Blackdragon","Pacific Halibut","Pacific Sardine","Pacific Sea Nettle Jellyfish","Pacific White Sided Dolphin","Pantropical Spotted Dolphin","Patagonian Toothfish","Peacock Mantis Shrimp","Pelagic Thresher Shark","Penguin","Peruvian Anchoveta","Pilchard","Pink Salmon","Pinniped","Plankton","Porpoise","Polar Bear","Portuguese Man o' War","Pycnogonid Sea Spider","Quahog","Queen Angelfish","Queen Conch","Queen Parrotfish","Queensland Grouper","Ragfish","Ratfish","Rattail Fish","Ray","Red Drum","Red King Crab","Ringed Seal","Risso's Dolphin","Ross Seals","Sablefish","Salmon","Sand Dollar","Sandbar Shark","Sawfish","Sarcastic Fringehead","Scalloped Hammerhead Shark","Seahorse","Sea Cucumber","Sea Lion","Sea Urchin","Seal","Shark","Shortfin Mako Shark","Shovelnose Guitarfish","Shrimp","Silverside Fish","Skipjack Tuna","Slender Snipe Eel","Smalltooth Sawfish","Smelts","Sockeye Salmon","Southern Stingray","Sponge","Spotted Porcupinefish","Spotted Dolphin","Spotted Eagle Ray","Spotted Moray","Squid","Squidworm","Starfish","Stickleback","Stonefish","Stoplight Loosejaw","Sturgeon","Swordfish","Tan Bristlemouth","Tasseled Wobbegong","Terrible Claw Lobster","Threespot Damselfish","Tiger Prawn","Tiger Shark","Tilefish","Toadfish","Tropical Two-Wing Flyfish","Tuna","Umbrella Squid","Velvet Crab","Venus Flytrap Sea Anemone","Vigtorniella Worm","Viperfish","Vampire Squid","Vaquita","Wahoo","Walrus","West Indian Manatee","Whale","Whale Shark","Whiptail Gulper","White-Beaked Dolphin","White-Ring Garden Eel","White Shrimp","Wobbegong","Wrasse","Wreckfish","Xiphosura","Yellowtail Damselfish","Yelloweye Rockfish","Yellow Cup Black Coral","Yellow Tube Sponge","Yellowfin Tuna","Zebrashark","Zooplankton"],desert:["Aardwolf","Addax","African Wild Ass","Ant","Antelope","Armadillo","Baboon","Badger","Bat","Bearded Dragon","Beetle","Bird","Black-footed Cat","Boa","Brown Bear","Bustard","Butterfly","Camel","Caracal","Caracara","Caterpillar","Centipede","Cheetah","Chipmunk","Chuckwalla","Climbing Mouse","Coati","Cobra","Cotton Rat","Cougar","Courser","Crane Fly","Crow","Dassie Rat","Dove","Dunnart","Eagle","Echidna","Elephant","Emu","Falcon","Fly","Fox","Frogmouth","Gecko","Geoffroy's Cat","Gerbil","Grasshopper","Guanaco","Gundi","Hamster","Hawk","Hedgehog","Hyena","Hyrax","Jackal","Kangaroo","Kangaroo Rat","Kestrel","Kowari","Kultarr","Leopard","Lion","Macaw","Meerkat","Mouse","Oryx","Ostrich","Owl","Pronghorn","Python","Rabbit","Raccoon","Rattlesnake","Rhinoceros","Sand Cat","Spectacled Bear","Spiny Mouse","Starling","Stick Bug","Tarantula","Tit","Toad","Tortoise","Tyrant Flycatcher","Viper","Vulture","Waxwing","Xerus","Zebra"],grassland:["Aardvark","Aardwolf","Accentor","African Buffalo","African Wild Dog","Alpaca","Anaconda","Ant","Anteater","Antelope","Armadillo","Baboon","Badger","Bandicoot","Barbet","Bat","Bee","Bee-eater","Beetle","Bird","Bison","Black-footed Cat","Black-footed Ferret","Bluebird","Boa","Bowerbird","Brown Bear","Bush Dog","Bushshrike","Bustard","Butterfly","Buzzard","Caracal","Caracara","Cardinal","Caterpillar","Cheetah","Chipmunk","Civet","Climbing Mouse","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Common Genet","Cotton Rat","Cougar","Courser","Coyote","Crane","Crane Fly","Cricket","Crow","Culpeo","Death Adder","Deer","Deer Mouse","Dingo","Dinosaur","Dove","Drongo","Duck","Duiker","Dunnart","Eagle","Echidna","Elephant","Elk","Emu","Falcon","Finch","Flea","Fly","Flying Frog","Fox","Frog","Frogmouth","Garter Snake","Gazelle","Gecko","Geoffroy's Cat","Gerbil","Giant Tortoise","Giraffe","Grasshopper","Grison","Groundhog","Grouse","Guanaco","Guinea Pig","Hamster","Harrier","Hartebeest","Hawk","Hedgehog","Helmetshrike","Hippopotamus","Hornbill","Hyena","Hyrax","Impala","Jackal","Jaguar","Jaguarundi","Kangaroo","Kangaroo Rat","Kestrel","Kultarr","Ladybug","Leopard","Lion","Macaw","Meerkat","Mouse","Newt","Oryx","Ostrich","Owl","Pangolin","Pheasant","Prairie Dog","Pronghorn","Przewalski's Horse","Python","Quoll","Rabbit","Raven","Rhinoceros","Shelduck","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Tamandua","Tasmanian Devil","Thornbill","Thrush","Toad","Tortoise"],forest:["Agouti","Anaconda","Anoa","Ant","Anteater","Antelope","Armadillo","Asian Black Bear","Aye-aye","Babirusa","Baboon","Badger","Bandicoot","Banteng","Barbet","Basilisk","Bat","Bearded Dragon","Bee","Bee-eater","Beetle","Bettong","Binturong","Bird-of-paradise","Bongo","Bowerbird","Bulbul","Bush Dog","Bushbaby","Bushshrike","Butterfly","Buzzard","Caecilian","Cardinal","Cassowary","Caterpillar","Centipede","Chameleon","Chimpanzee","Cicada","Civet","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Colugo","Cotinga","Cotton Rat","Cougar","Crane Fly","Cricket","Crocodile","Crow","Cuckoo","Cuscus","Death Adder","Deer","Dhole","Dingo","Dinosaur","Drongo","Duck","Duiker","Eagle","Echidna","Elephant","Finch","Flat-headed Cat","Flea","Flowerpecker","Fly","Flying Frog","Fossa","Frog","Frogmouth","Gaur","Gecko","Gorilla","Grison","Hawaiian Honeycreeper","Hawk","Hedgehog","Helmetshrike","Hornbill","Hyrax","Iguana","Jackal","Jaguar","Jaguarundi","Kestrel","Ladybug","Lemur","Leopard","Lion","Macaw","Mandrill","Margay","Monkey","Mouse","Mouse Deer","Newt","Okapi","Old World Flycatcher","Orangutan","Owl","Pangolin","Peafowl","Pheasant","Possum","Python","Quokka","Rabbit","Raccoon","Red Panda","Red River Hog","Rhinoceros","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Sun Bear","Tamandua","Tamarin","Tapir","Tarantula","Thrush","Tiger","Tit","Toad","Tortoise","Toucan","Trogon","Trumpeter","Turaco","Turtle","Tyrant Flycatcher","Viper","Vulture","Wallaby","Warbler","Wasp","Waxwing","Weaver","Weaver-finch","Whistler","White-eye","Whydah","Woodswallow","Worm","Wren","Xenops","Yellowjacket","Accentor","African Buffalo","American Black Bear","Anole","Bird","Bison","Boa","Brown Bear","Chipmunk","Common Genet","Copperhead","Coyote","Deer Mouse","Dormouse","Elk","Emu","Fisher","Fox","Garter Snake","Giant Panda","Giant Tortoise","Groundhog","Grouse","Guanaco","Himalayan Tahr","Kangaroo","Koala","Numbat","Quoll","Raccoon dog","Tasmanian Devil","Thornbill","Turkey","Vole","Weasel","Wildcat","Wolf","Wombat","Woodchuck","Woodpecker"],farm:["Alpaca","Buffalo","Banteng","Cow","Cat","Chicken","Carp","Camel","Donkey","Dog","Duck","Emu","Goat","Gayal","Guinea","Goose","Horse","Honey","Llama","Pig","Pigeon","Rhea","Rabbit","Sheep","Silkworm","Turkey","Yak","Zebu"],pet:["Bearded Dragon","Birds","Burro","Cats","Chameleons","Chickens","Chinchillas","Chinese Water Dragon","Cows","Dogs","Donkey","Ducks","Ferrets","Fish","Geckos","Geese","Gerbils","Goats","Guinea Fowl","Guinea Pigs","Hamsters","Hedgehogs","Horses","Iguanas","Llamas","Lizards","Mice","Mule","Peafowl","Pigs and Hogs","Pigeons","Ponies","Pot Bellied Pig","Rabbits","Rats","Sheep","Skinks","Snakes","Stick Insects","Sugar Gliders","Tarantula","Turkeys","Turtles"],zoo:["Aardvark","African Wild Dog","Aldabra Tortoise","American Alligator","American Bison","Amur Tiger","Anaconda","Andean Condor","Asian Elephant","Baby Doll Sheep","Bald Eagle","Barred Owl","Blue Iguana","Boer Goat","California Sea Lion","Caribbean Flamingo","Chinchilla","Collared Lemur","Coquerel's Sifaka","Cuban Amazon Parrot","Ebony Langur","Fennec Fox","Fossa","Gelada","Giant Anteater","Giraffe","Gorilla","Grizzly Bear","Henkel's Leaf-tailed Gecko","Indian Gharial","Indian Rhinoceros","King Cobra","King Vulture","Komodo Dragon","Linne's Two-toed Sloth","Lion","Little Penguin","Madagascar Tree Boa","Magellanic Penguin","Malayan Tapir","Malayan Tiger","Matschies Tree Kangaroo","Mini Donkey","Monarch Butterfly","Nile crocodile","North American Porcupine","Nubian Ibex","Okapi","Poison Dart Frog","Polar Bear","Pygmy Marmoset","Radiated Tortoise","Red Panda","Red Ruffed Lemur","Ring-tailed Lemur","Ring-tailed Mongoose","Rock Hyrax","Small Clawed Asian Otter","Snow Leopard","Snowy Owl","Southern White-faced Owl","Southern White Rhinocerous","Squirrel Monkey","Tufted Puffin","White Cheeked Gibbon","White-throated Bee Eater","Zebra"]},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007],emotions:["love","joy","surprise","anger","sadness","fear"]},g=Object.prototype.hasOwnProperty,y=Object.keys||function(t){var e=[];for(var i in t)g.call(t,i)&&e.push(i);return e};function w(t,e){var i=Array.isArray(t),n=e||(i?new Array(t.length):{});return i?function(t,e){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}(t,n):function(t,e){for(var i,n=y(t),r=0,s=n.length;r<s;r++)e[i=n[r]]=t[i]||e[i]}(t,n),n}l.prototype.get=function(t){return w(b[t])},l.prototype.mac_address=function(t){(t=h(t)).separator||(t.separator=t.networkVersion?".":":");var e="ABCDEF1234567890";return t.networkVersion?this.n(this.string,3,{pool:e,length:4}).join(t.separator):this.n(this.string,6,{pool:e,length:2}).join(t.separator)},l.prototype.normal=function(t){if(c((t=h(t,{mean:0,dev:1,pool:[]})).pool.constructor!==Array,"Chance: The pool option must be a valid array."),c("number"!=typeof t.mean,"Chance: Mean (mean) must be a number"),c("number"!=typeof t.dev,"Chance: Standard deviation (dev) must be a number"),t.pool.length>0)return this.normal_pool(t);var e,i,n,r=t.mean,s=t.dev;do{e=(i=2*this.random()-1)*i+(n=2*this.random()-1)*n}while(e>=1);return s*(i*Math.sqrt(-2*Math.log(e)/e))+r},l.prototype.normal_pool=function(t){var e=0;do{var i=Math.round(this.normal({mean:t.mean,dev:t.dev}));if(i<t.pool.length&&i>=0)return t.pool[i];e++}while(e<100);throw new RangeError("Chance: Your pool is too small for the given mean and standard deviation. Please adjust.")},l.prototype.radio=function(t){var e="";switch((t=h(t,{side:"?"})).side.toLowerCase()){case"east":case"e":e="W";break;case"west":case"w":e="K";break;default:e=this.character({pool:"KW"})}return e+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})},l.prototype.set=function(t,e){"string"==typeof t?b[t]=e:b=w(t,b)},l.prototype.tv=function(t){return this.radio(t)},l.prototype.cnpj=function(){var t=this.n(this.natural,8,{max:9}),e=2+6*t[7]+7*t[6]+8*t[5]+9*t[4]+2*t[3]+3*t[2]+4*t[1]+5*t[0];(e=11-e%11)>=10&&(e=0);var i=2*e+3+7*t[7]+8*t[6]+9*t[5]+2*t[4]+3*t[3]+4*t[2]+5*t[1]+6*t[0];return(i=11-i%11)>=10&&(i=0),""+t[0]+t[1]+"."+t[2]+t[3]+t[4]+"."+t[5]+t[6]+t[7]+"/0001-"+e+i},l.prototype.emotion=function(){return this.pick(this.get("emotions"))},l.prototype.mersenne_twister=function(t){return new S(t)},l.prototype.blueimp_md5=function(){return new x};var S=function(t){void 0===t&&(t=Math.floor(Math.random()*Math.pow(10,13))),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(t)};S.prototype.init_genrand=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++)t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0},S.prototype.init_by_array=function(t,e){var i,n,r=1,s=0;for(this.init_genrand(19650218),i=this.N>e?this.N:e;i;i--)n=this.mt[r-1]^this.mt[r-1]>>>30,this.mt[r]=(this.mt[r]^(1664525*((4294901760&n)>>>16)<<16)+1664525*(65535&n))+t[s]+s,this.mt[r]>>>=0,s++,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),s>=e&&(s=0);for(i=this.N-1;i;i--)n=this.mt[r-1]^this.mt[r-1]>>>30,this.mt[r]=(this.mt[r]^(1566083941*((4294901760&n)>>>16)<<16)+1566083941*(65535&n))-r,this.mt[r]>>>=0,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1);this.mt[0]=2147483648},S.prototype.genrand_int32=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var i;for(this.mti===this.N+1&&this.init_genrand(5489),i=0;i<this.N-this.M;i++)t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK,this.mt[i]=this.mt[i+this.M]^t>>>1^e[1&t];for(;i<this.N-1;i++)t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK,this.mt[i]=this.mt[i+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},S.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},S.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},S.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},S.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},S.prototype.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)};var x=function(){};x.prototype.VERSION="1.0.1",x.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},x.prototype.bit_roll=function(t,e){return t<<e|t>>>32-e},x.prototype.md5_cmn=function(t,e,i,n,r,s){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(e,t),this.safe_add(n,s)),r),i)},x.prototype.md5_ff=function(t,e,i,n,r,s,a){return this.md5_cmn(e&i|~e&n,t,e,r,s,a)},x.prototype.md5_gg=function(t,e,i,n,r,s,a){return this.md5_cmn(e&n|i&~n,t,e,r,s,a)},x.prototype.md5_hh=function(t,e,i,n,r,s,a){return this.md5_cmn(e^i^n,t,e,r,s,a)},x.prototype.md5_ii=function(t,e,i,n,r,s,a){return this.md5_cmn(i^(e|~n),t,e,r,s,a)},x.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var i,n,r,s,a,o=1732584193,u=-271733879,l=-1732584194,h=271733878;for(i=0;i<t.length;i+=16)n=o,r=u,s=l,a=h,o=this.md5_ff(o,u,l,h,t[i],7,-680876936),h=this.md5_ff(h,o,u,l,t[i+1],12,-389564586),l=this.md5_ff(l,h,o,u,t[i+2],17,606105819),u=this.md5_ff(u,l,h,o,t[i+3],22,-1044525330),o=this.md5_ff(o,u,l,h,t[i+4],7,-176418897),h=this.md5_ff(h,o,u,l,t[i+5],12,1200080426),l=this.md5_ff(l,h,o,u,t[i+6],17,-1473231341),u=this.md5_ff(u,l,h,o,t[i+7],22,-45705983),o=this.md5_ff(o,u,l,h,t[i+8],7,1770035416),h=this.md5_ff(h,o,u,l,t[i+9],12,-1958414417),l=this.md5_ff(l,h,o,u,t[i+10],17,-42063),u=this.md5_ff(u,l,h,o,t[i+11],22,-1990404162),o=this.md5_ff(o,u,l,h,t[i+12],7,1804603682),h=this.md5_ff(h,o,u,l,t[i+13],12,-40341101),l=this.md5_ff(l,h,o,u,t[i+14],17,-1502002290),u=this.md5_ff(u,l,h,o,t[i+15],22,1236535329),o=this.md5_gg(o,u,l,h,t[i+1],5,-165796510),h=this.md5_gg(h,o,u,l,t[i+6],9,-1069501632),l=this.md5_gg(l,h,o,u,t[i+11],14,643717713),u=this.md5_gg(u,l,h,o,t[i],20,-373897302),o=this.md5_gg(o,u,l,h,t[i+5],5,-701558691),h=this.md5_gg(h,o,u,l,t[i+10],9,38016083),l=this.md5_gg(l,h,o,u,t[i+15],14,-660478335),u=this.md5_gg(u,l,h,o,t[i+4],20,-405537848),o=this.md5_gg(o,u,l,h,t[i+9],5,568446438),h=this.md5_gg(h,o,u,l,t[i+14],9,-1019803690),l=this.md5_gg(l,h,o,u,t[i+3],14,-187363961),u=this.md5_gg(u,l,h,o,t[i+8],20,1163531501),o=this.md5_gg(o,u,l,h,t[i+13],5,-1444681467),h=this.md5_gg(h,o,u,l,t[i+2],9,-51403784),l=this.md5_gg(l,h,o,u,t[i+7],14,1735328473),u=this.md5_gg(u,l,h,o,t[i+12],20,-1926607734),o=this.md5_hh(o,u,l,h,t[i+5],4,-378558),h=this.md5_hh(h,o,u,l,t[i+8],11,-2022574463),l=this.md5_hh(l,h,o,u,t[i+11],16,1839030562),u=this.md5_hh(u,l,h,o,t[i+14],23,-35309556),o=this.md5_hh(o,u,l,h,t[i+1],4,-1530992060),h=this.md5_hh(h,o,u,l,t[i+4],11,1272893353),l=this.md5_hh(l,h,o,u,t[i+7],16,-155497632),u=this.md5_hh(u,l,h,o,t[i+10],23,-1094730640),o=this.md5_hh(o,u,l,h,t[i+13],4,681279174),h=this.md5_hh(h,o,u,l,t[i],11,-358537222),l=this.md5_hh(l,h,o,u,t[i+3],16,-722521979),u=this.md5_hh(u,l,h,o,t[i+6],23,76029189),o=this.md5_hh(o,u,l,h,t[i+9],4,-640364487),h=this.md5_hh(h,o,u,l,t[i+12],11,-421815835),l=this.md5_hh(l,h,o,u,t[i+15],16,530742520),u=this.md5_hh(u,l,h,o,t[i+2],23,-995338651),o=this.md5_ii(o,u,l,h,t[i],6,-198630844),h=this.md5_ii(h,o,u,l,t[i+7],10,1126891415),l=this.md5_ii(l,h,o,u,t[i+14],15,-1416354905),u=this.md5_ii(u,l,h,o,t[i+5],21,-57434055),o=this.md5_ii(o,u,l,h,t[i+12],6,1700485571),h=this.md5_ii(h,o,u,l,t[i+3],10,-1894986606),l=this.md5_ii(l,h,o,u,t[i+10],15,-1051523),u=this.md5_ii(u,l,h,o,t[i+1],21,-2054922799),o=this.md5_ii(o,u,l,h,t[i+8],6,1873313359),h=this.md5_ii(h,o,u,l,t[i+15],10,-30611744),l=this.md5_ii(l,h,o,u,t[i+6],15,-1560198380),u=this.md5_ii(u,l,h,o,t[i+13],21,1309151649),o=this.md5_ii(o,u,l,h,t[i+4],6,-145523070),h=this.md5_ii(h,o,u,l,t[i+11],10,-1120210379),l=this.md5_ii(l,h,o,u,t[i+2],15,718787259),u=this.md5_ii(u,l,h,o,t[i+9],21,-343485551),o=this.safe_add(o,n),u=this.safe_add(u,r),l=this.safe_add(l,s),h=this.safe_add(h,a);return[o,u,l,h]},x.prototype.binl2rstr=function(t){var e,i="";for(e=0;e<32*t.length;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i},x.prototype.rstr2binl=function(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;for(e=0;e<8*t.length;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i},x.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},x.prototype.rstr_hmac_md5=function(t,e){var i,n,r=this.rstr2binl(t),s=[],a=[];for(s[15]=a[15]=void 0,r.length>16&&(r=this.binl_md5(r,8*t.length)),i=0;i<16;i+=1)s[i]=909522486^r[i],a[i]=1549556828^r[i];return n=this.binl_md5(s.concat(this.rstr2binl(e)),512+8*e.length),this.binl2rstr(this.binl_md5(a.concat(n),640))},x.prototype.rstr2hex=function(t){var e,i,n="0123456789abcdef",r="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),r+=n.charAt(e>>>4&15)+n.charAt(15&e);return r},x.prototype.str2rstr_utf8=function(t){return unescape(encodeURIComponent(t))},x.prototype.raw_md5=function(t){return this.rstr_md5(this.str2rstr_utf8(t))},x.prototype.hex_md5=function(t){return this.rstr2hex(this.raw_md5(t))},x.prototype.raw_hmac_md5=function(t,e){return this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e))},x.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.raw_hmac_md5(t,e))},x.prototype.md5=function(t,e,i){return e?i?this.raw_hmac_md5(e,t):this.hex_hmac_md5(e,t):i?this.raw_md5(t):this.hex_md5(t)},t.exports&&(e=t.exports=l),e.Chance=l,"undefined"!=typeof importScripts&&(chance=new l,self.Chance=l),"object"==typeof window&&"object"==typeof window.document&&(window.Chance=l,window.chance=new l)}()}(FR,FR.exports);class DR extends Error{}class PR extends DR{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class LR extends DR{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class ER extends DR{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class NR extends DR{}class RR extends DR{constructor(t){super(`Invalid unit ${t}`)}}class BR extends DR{}class _R extends DR{constructor(){super("Zone is an abstract class")}}const zR="numeric",VR="short",GR="long",$R={year:zR,month:zR,day:zR},WR={year:zR,month:VR,day:zR},qR={year:zR,month:VR,day:zR,weekday:VR},HR={year:zR,month:GR,day:zR},UR={year:zR,month:GR,day:zR,weekday:GR},KR={hour:zR,minute:zR},JR={hour:zR,minute:zR,second:zR},YR={hour:zR,minute:zR,second:zR,timeZoneName:VR},ZR={hour:zR,minute:zR,second:zR,timeZoneName:GR},XR={hour:zR,minute:zR,hourCycle:"h23"},QR={hour:zR,minute:zR,second:zR,hourCycle:"h23"},tB={hour:zR,minute:zR,second:zR,hourCycle:"h23",timeZoneName:VR},eB={hour:zR,minute:zR,second:zR,hourCycle:"h23",timeZoneName:GR},iB={year:zR,month:zR,day:zR,hour:zR,minute:zR},nB={year:zR,month:zR,day:zR,hour:zR,minute:zR,second:zR},rB={year:zR,month:VR,day:zR,hour:zR,minute:zR},sB={year:zR,month:VR,day:zR,hour:zR,minute:zR,second:zR},aB={year:zR,month:VR,day:zR,weekday:VR,hour:zR,minute:zR},oB={year:zR,month:GR,day:zR,hour:zR,minute:zR,timeZoneName:VR},uB={year:zR,month:GR,day:zR,hour:zR,minute:zR,second:zR,timeZoneName:VR},lB={year:zR,month:GR,day:zR,weekday:GR,hour:zR,minute:zR,timeZoneName:GR},hB={year:zR,month:GR,day:zR,weekday:GR,hour:zR,minute:zR,second:zR,timeZoneName:GR};class cB{get type(){throw new _R}get name(){throw new _R}get ianaName(){return this.name}get isUniversal(){throw new _R}offsetName(t,e){throw new _R}formatOffset(t,e){throw new _R}offset(t){throw new _R}equals(t){throw new _R}get isValid(){throw new _R}}let dB=null;class fB extends cB{static get instance(){return null===dB&&(dB=new fB),dB}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return s_(t,e,i)}formatOffset(t,e){return l_(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return"system"===t.type}get isValid(){return!0}}let mB={};const vB={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pB={};class bB extends cB{static create(t){return pB[t]||(pB[t]=new bB(t)),pB[t]}static resetCache(){pB={},mB={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(t){return!1}}constructor(t){super(),this.zoneName=t,this.valid=bB.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return s_(t,e,i,this.name)}formatOffset(t,e){return l_(this.offset(t),e)}offset(t){const e=new Date(t);if(isNaN(e))return NaN;const i=(n=this.name,mB[n]||(mB[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),mB[n]);var n;let[r,s,a,o,u,l,h]=i.formatToParts?function(t,e){const i=t.formatToParts(e),n=[];for(let t=0;t<i.length;t++){const{type:e,value:r}=i[t],s=vB[e];"era"===e?n[s]=r:VB(s)||(n[s]=parseInt(r,10))}return n}(i,e):function(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,r,s,a,o,u,l,h]=n;return[a,r,s,o,u,l,h]}(i,e);"BC"===o&&(r=1-Math.abs(r));let c=+e;const d=c%1e3;return c-=d>=0?d:1e3+d,(i_({year:r,month:s,day:a,hour:24===u?0:u,minute:l,second:h,millisecond:0})-c)/6e4}equals(t){return"iana"===t.type&&t.name===this.name}get isValid(){return this.valid}}let gB={};let yB={};function wB(t,e={}){const i=JSON.stringify([t,e]);let n=yB[i];return n||(n=new Intl.DateTimeFormat(t,e),yB[i]=n),n}let SB={};let xB={};let CB=null;function OB(t,e,i,n,r){const s=t.listingMode(i);return"error"===s?null:"en"===s?n(e):r(e)}class MB{constructor(t,e,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:r,...s}=i;if(!e||Object.keys(s).length>0){const e={useGrouping:!1,...i};i.padTo>0&&(e.minimumIntegerDigits=i.padTo),this.inf=function(t,e={}){const i=JSON.stringify([t,e]);let n=SB[i];return n||(n=new Intl.NumberFormat(t,e),SB[i]=n),n}(t,e)}}format(t){if(this.inf){const e=this.floor?Math.floor(t):t;return this.inf.format(e)}return KB(this.floor?Math.floor(t):XB(t,3),this.padTo)}}class TB{constructor(t,e,i){let n;if(this.opts=i,t.zone.isUniversal){const e=t.offset/60*-1,r=e>=0?`Etc/GMT+${e}`:`Etc/GMT${e}`;0!==t.offset&&bB.create(r).valid?(n=r,this.dt=t):(n="UTC",i.timeZoneName?this.dt=t:this.dt=0===t.offset?t:MV.fromMillis(t.ts+60*t.offset*1e3))}else"system"===t.zone.type?this.dt=t:(this.dt=t,n=t.zone.name);const r={...this.opts};r.timeZone=r.timeZone||n,this.dtf=wB(e,r)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class kB{constructor(t,e,i){this.opts={style:"long",...i},!e&&WB()&&(this.rtf=function(t,e={}){const{base:i,...n}=e,r=JSON.stringify([t,n]);let s=xB[r];return s||(s=new Intl.RelativeTimeFormat(t,e),xB[r]=s),s}(t,i))}format(t,e){return this.rtf?this.rtf.format(t,e):function(t,e,i="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(t);if("auto"===i&&s){const i="days"===t;switch(e){case 1:return i?"tomorrow":`next ${r[t][0]}`;case-1:return i?"yesterday":`last ${r[t][0]}`;case 0:return i?"today":`this ${r[t][0]}`}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),u=1===o,l=r[t],h=n?u?l[1]:l[2]||l[1]:u?r[t][0]:t;return a?`${o} ${h} ago`:`in ${o} ${h}`}(e,t,this.opts.numeric,"long"!==this.opts.style)}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}class IB{static fromOpts(t){return IB.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,e,i,n=!1){const r=t||zB.defaultLocale,s=r||(n?"en-US":CB||(CB=(new Intl.DateTimeFormat).resolvedOptions().locale,CB)),a=e||zB.defaultNumberingSystem,o=i||zB.defaultOutputCalendar;return new IB(s,a,o,r)}static resetCache(){CB=null,yB={},SB={},xB={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:i}={}){return IB.create(t,e,i)}constructor(t,e,i,n){const[r,s,a]=function(t){const e=t.indexOf("-x-");-1!==e&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(-1===i)return[t];{let e,n;try{e=wB(t).resolvedOptions(),n=t}catch(r){const s=t.substring(0,i);e=wB(s).resolvedOptions(),n=s}const{numberingSystem:r,calendar:s}=e;return[n,r,s]}}(t);this.locale=r,this.numberingSystem=e||s||null,this.outputCalendar=i||a||null,this.intl=function(t,e,i){return i||e?(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`),t):t}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){var t;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(t=this).numberingSystem||"latn"===t.numberingSystem)&&("latn"===t.numberingSystem||!t.locale||t.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),e=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return t&&e?"en":"intl"}clone(t){return t&&0!==Object.getOwnPropertyNames(t).length?IB.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1,i=!0){return OB(this,t,i,m_,(()=>{const i=e?{month:t,day:"numeric"}:{month:t},n=e?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=function(t){const e=[];for(let i=1;i<=12;i++){const n=MV.utc(2016,i,1);e.push(t(n))}return e}((t=>this.extract(t,i,"month")))),this.monthsCache[n][t]}))}weekdays(t,e=!1,i=!0){return OB(this,t,i,g_,(()=>{const i=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=e?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=function(t){const e=[];for(let i=1;i<=7;i++){const n=MV.utc(2016,11,13+i);e.push(t(n))}return e}((t=>this.extract(t,i,"weekday")))),this.weekdaysCache[n][t]}))}meridiems(t=!0){return OB(this,void 0,t,(()=>y_),(()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[MV.utc(2016,11,13,9),MV.utc(2016,11,13,19)].map((e=>this.extract(e,t,"dayperiod")))}return this.meridiemCache}))}eras(t,e=!0){return OB(this,t,e,C_,(()=>{const e={era:t};return this.eraCache[t]||(this.eraCache[t]=[MV.utc(-40,1,1),MV.utc(2017,1,1)].map((t=>this.extract(t,e,"era")))),this.eraCache[t]}))}extract(t,e,i){const n=this.dtFormatter(t,e).formatToParts().find((t=>t.type.toLowerCase()===i));return n?n.value:null}numberFormatter(t={}){return new MB(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new TB(t,this.intl,e)}relFormatter(t={}){return new kB(this.intl,this.isEnglish(),t)}listFormatter(t={}){return function(t,e={}){const i=JSON.stringify([t,e]);let n=gB[i];return n||(n=new Intl.ListFormat(t,e),gB[i]=n),n}(this.intl,t)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let AB=null;class jB extends cB{static get utcInstance(){return null===AB&&(AB=new jB(0)),AB}static instance(t){return 0===t?jB.utcInstance:new jB(t)}static parseSpecifier(t){if(t){const e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new jB(a_(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${l_(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${l_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return l_(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return"fixed"===t.type&&t.fixed===this.fixed}get isValid(){return!0}}class FB extends cB{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function DB(t,e){if(VB(t)||null===t)return e;if(t instanceof cB)return t;if(function(t){return"string"==typeof t}(t)){const i=t.toLowerCase();return"default"===i?e:"local"===i||"system"===i?fB.instance:"utc"===i||"gmt"===i?jB.utcInstance:jB.parseSpecifier(i)||bB.create(t)}return GB(t)?jB.instance(t):"object"==typeof t&&t.offset&&"number"==typeof t.offset?t:new FB(t)}let PB,LB=()=>Date.now(),EB="system",NB=null,RB=null,BB=null,_B=60;class zB{static get now(){return LB}static set now(t){LB=t}static set defaultZone(t){EB=t}static get defaultZone(){return DB(EB,fB.instance)}static get defaultLocale(){return NB}static set defaultLocale(t){NB=t}static get defaultNumberingSystem(){return RB}static set defaultNumberingSystem(t){RB=t}static get defaultOutputCalendar(){return BB}static set defaultOutputCalendar(t){BB=t}static get twoDigitCutoffYear(){return _B}static set twoDigitCutoffYear(t){_B=t%100}static get throwOnInvalid(){return PB}static set throwOnInvalid(t){PB=t}static resetCaches(){IB.resetCache(),bB.resetCache()}}function VB(t){return void 0===t}function GB(t){return"number"==typeof t}function $B(t){return"number"==typeof t&&t%1==0}function WB(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function qB(t,e,i){if(0!==t.length)return t.reduce(((t,n)=>{const r=[e(n),n];return t&&i(t[0],r[0])===t[0]?t:r}),null)[1]}function HB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function UB(t,e,i){return $B(t)&&t>=e&&t<=i}function KB(t,e=2){let i;return i=t<0?"-"+(""+-t).padStart(e,"0"):(""+t).padStart(e,"0"),i}function JB(t){return VB(t)||null===t||""===t?void 0:parseInt(t,10)}function YB(t){return VB(t)||null===t||""===t?void 0:parseFloat(t)}function ZB(t){if(!VB(t)&&null!==t&&""!==t){const e=1e3*parseFloat("0."+t);return Math.floor(e)}}function XB(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function QB(t){return t%4==0&&(t%100!=0||t%400==0)}function t_(t){return QB(t)?366:365}function e_(t,e){const i=function(t,e){return t-e*Math.floor(t/e)}(e-1,12)+1;return 2===i?QB(t+(e-i)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function i_(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function n_(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,n=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return 4===e||3===n?53:52}function r_(t){return t>99?t:t>zB.twoDigitCutoffYear?1900+t:2e3+t}function s_(t,e,i,n=null){const r=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(i,a).formatToParts(r).find((t=>"timezonename"===t.type.toLowerCase()));return o?o.value:null}function a_(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0;return 60*i+(i<0||Object.is(i,-0)?-n:n)}function o_(t){const e=Number(t);if("boolean"==typeof t||""===t||Number.isNaN(e))throw new BR(`Invalid unit value ${t}`);return e}function u_(t,e){const i={};for(const n in t)if(HB(t,n)){const r=t[n];if(null==r)continue;i[e(n)]=o_(r)}return i}function l_(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${KB(i,2)}:${KB(n,2)}`;case"narrow":return`${r}${i}${n>0?`:${n}`:""}`;case"techie":return`${r}${KB(i,2)}${KB(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function h_(t){return function(t,e){return e.reduce(((e,i)=>(e[i]=t[i],e)),{})}(t,["hour","minute","second","millisecond"])}const c_=["January","February","March","April","May","June","July","August","September","October","November","December"],d_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f_=["J","F","M","A","M","J","J","A","S","O","N","D"];function m_(t){switch(t){case"narrow":return[...f_];case"short":return[...d_];case"long":return[...c_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const v_=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],p_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b_=["M","T","W","T","F","S","S"];function g_(t){switch(t){case"narrow":return[...b_];case"short":return[...p_];case"long":return[...v_];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const y_=["AM","PM"],w_=["Before Christ","Anno Domini"],S_=["BC","AD"],x_=["B","A"];function C_(t){switch(t){case"narrow":return[...x_];case"short":return[...S_];case"long":return[...w_];default:return null}}function O_(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const M_={D:$R,DD:WR,DDD:HR,DDDD:UR,t:KR,tt:JR,ttt:YR,tttt:ZR,T:XR,TT:QR,TTT:tB,TTTT:eB,f:iB,ff:rB,fff:oB,ffff:lB,F:nB,FF:sB,FFF:uB,FFFF:hB};class T_{static create(t,e={}){return new T_(t,e)}static parseFormat(t){let e=null,i="",n=!1;const r=[];for(let s=0;s<t.length;s++){const a=t.charAt(s);"'"===a?(i.length>0&&r.push({literal:n,val:i}),e=null,i="",n=!n):n||a===e?i+=a:(i.length>0&&r.push({literal:!1,val:i}),i=a,e=a)}return i.length>0&&r.push({literal:n,val:i}),r}static macroTokenToFormatOpts(t){return M_[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTime(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTimeParts(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).formatToParts()}formatInterval(t,e={}){return this.loc.dtFormatter(t.start,{...this.opts,...e}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return KB(t,e);const i={...this.opts};return e>0&&(i.padTo=e),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,e){const i="en"===this.loc.listingMode(),n=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,r=(e,i)=>this.loc.extract(t,e,i),s=e=>t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):"",a=()=>i?function(t){return y_[t.hour<12?0:1]}(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(e,n)=>i?function(t,e){return m_(e)[t.month-1]}(t,e):r(n?{month:e}:{month:e,day:"numeric"},"month"),u=(e,n)=>i?function(t,e){return g_(e)[t.weekday-1]}(t,e):r(n?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday"),l=e=>{const i=T_.macroTokenToFormatOpts(e);return i?this.formatWithSystemDefault(t,i):e},h=e=>i?function(t,e){return C_(e)[t.year<0?0:1]}(t,e):r({era:e},"era");return O_(T_.parseFormat(e),(e=>{switch(e){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12==0?12:t.hour%12);case"hh":return this.num(t.hour%12==0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?r({day:"numeric"},"day"):this.num(t.day);case"dd":return n?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":case"E":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return n?r({month:"numeric"},"month"):this.num(t.month);case"MM":return n?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return n?r({year:"numeric"},"year"):this.num(t.year);case"yy":return n?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return l(e)}}))}formatDurationFromString(t,e){const i=t=>{switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=T_.parseFormat(e),r=n.reduce(((t,{literal:e,val:i})=>e?t:t.concat(i)),[]),s=t.shiftTo(...r.map(i).filter((t=>t)));return O_(n,(t=>e=>{const n=i(e);return n?this.num(t.get(n),e.length):e})(s))}}class k_{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const I_=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function A_(...t){const e=t.reduce(((t,e)=>t+e.source),"");return RegExp(`^${e}$`)}function j_(...t){return e=>t.reduce((([t,i,n],r)=>{const[s,a,o]=r(e,n);return[{...t,...s},a||i,o]}),[{},null,1]).slice(0,2)}function F_(t,...e){if(null==t)return[null,null];for(const[i,n]of e){const e=i.exec(t);if(e)return n(e)}return[null,null]}function D_(...t){return(e,i)=>{const n={};let r;for(r=0;r<t.length;r++)n[t[r]]=JB(e[i+r]);return[n,null,i+r]}}const P_=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,L_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,E_=RegExp(`${L_.source}${`(?:${P_.source}?(?:\\[(${I_.source})\\])?)?`}`),N_=RegExp(`(?:T${E_.source})?`),R_=D_("weekYear","weekNumber","weekDay"),B_=D_("year","ordinal"),__=RegExp(`${L_.source} ?(?:${P_.source}|(${I_.source}))?`),z_=RegExp(`(?: ${__.source})?`);function V_(t,e,i){const n=t[e];return VB(n)?i:JB(n)}function G_(t,e){return[{hours:V_(t,e,0),minutes:V_(t,e+1,0),seconds:V_(t,e+2,0),milliseconds:ZB(t[e+3])},null,e+4]}function $_(t,e){const i=!t[e]&&!t[e+1],n=a_(t[e+1],t[e+2]);return[{},i?null:jB.instance(n),e+3]}function W_(t,e){return[{},t[e]?bB.create(t[e]):null,e+1]}const q_=RegExp(`^T?${L_.source}$`),H_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function U_(t){const[e,i,n,r,s,a,o,u,l]=t,h="-"===e[0],c=u&&"-"===u[0],d=(t,e=!1)=>void 0!==t&&(e||t&&h)?-t:t;return[{years:d(YB(i)),months:d(YB(n)),weeks:d(YB(r)),days:d(YB(s)),hours:d(YB(a)),minutes:d(YB(o)),seconds:d(YB(u),"-0"===u),milliseconds:d(ZB(l),c)}]}const K_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function J_(t,e,i,n,r,s,a){const o={year:2===e.length?r_(JB(e)):JB(e),month:d_.indexOf(i)+1,day:JB(n),hour:JB(r),minute:JB(s)};return a&&(o.second=JB(a)),t&&(o.weekday=t.length>3?v_.indexOf(t)+1:p_.indexOf(t)+1),o}const Y_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Z_(t){const[,e,i,n,r,s,a,o,u,l,h,c]=t,d=J_(e,r,n,i,s,a,o);let f;return f=u?K_[u]:l?0:a_(h,c),[d,new jB(f)]}const X_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Q_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tz=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ez(t){const[,e,i,n,r,s,a,o]=t;return[J_(e,r,n,i,s,a,o),jB.utcInstance]}function iz(t){const[,e,i,n,r,s,a,o]=t;return[J_(e,o,i,n,r,s,a),jB.utcInstance]}const nz=A_(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,N_),rz=A_(/(\d{4})-?W(\d\d)(?:-?(\d))?/,N_),sz=A_(/(\d{4})-?(\d{3})/,N_),az=A_(E_),oz=j_((function(t,e){return[{year:V_(t,e),month:V_(t,e+1,1),day:V_(t,e+2,1)},null,e+3]}),G_,$_,W_),uz=j_(R_,G_,$_,W_),lz=j_(B_,G_,$_,W_),hz=j_(G_,$_,W_);const cz=j_(G_);const dz=A_(/(\d{4})-(\d\d)-(\d\d)/,z_),fz=A_(__),mz=j_(G_,$_,W_);const vz={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},pz={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...vz},bz={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...vz},gz=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],yz=gz.slice(0).reverse();function wz(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new xz(n)}function Sz(t,e,i,n,r){const s=t[r][i],a=e[i]/s,o=!(Math.sign(a)===Math.sign(n[r]))&&0!==n[r]&&Math.abs(a)<=1?function(t){return t<0?Math.floor(t):Math.ceil(t)}(a):Math.trunc(a);n[r]+=o,e[i]-=o*s}class xz{constructor(t){const e="longterm"===t.conversionAccuracy||!1;let i=e?bz:pz;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||IB.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,e){return xz.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(null==t||"object"!=typeof t)throw new BR("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new xz({values:u_(t,xz.normalizeUnit),loc:IB.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(GB(t))return xz.fromMillis(t);if(xz.isDuration(t))return t;if("object"==typeof t)return xz.fromObject(t);throw new BR(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){const[i]=function(t){return F_(t,[H_,U_])}(t);return i?xz.fromObject(i,e):xz.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){const[i]=function(t){return F_(t,[q_,cz])}(t);return i?xz.fromObject(i,e):xz.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new BR("need to specify a reason the Duration is invalid");const i=t instanceof k_?t:new k_(t,e);if(zB.throwOnInvalid)throw new ER(i);return new xz({invalid:i})}static normalizeUnit(t){const e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!e)throw new RR(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){const i={...e,floor:!1!==e.round&&!1!==e.floor};return this.isValid?T_.create(this.loc,i).formatDurationFromString(this,t):"Invalid Duration"}toHuman(t={}){const e=gz.map((e=>{const i=this.values[e];return VB(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:e.slice(0,-1)}).format(i)})).filter((t=>t));return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return 0!==this.years&&(t+=this.years+"Y"),0===this.months&&0===this.quarters||(t+=this.months+3*this.quarters+"M"),0!==this.weeks&&(t+=this.weeks+"W"),0!==this.days&&(t+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(t+="T"),0!==this.hours&&(t+=this.hours+"H"),0!==this.minutes&&(t+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(t+=XB(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===t&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const e=this.toMillis();if(e<0||e>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let n="basic"===t.format?"hhmm":"hh:mm";t.suppressSeconds&&0===i.seconds&&0===i.milliseconds||(n+="basic"===t.format?"ss":":ss",t.suppressMilliseconds&&0===i.milliseconds||(n+=".SSS"));let r=i.toFormat(n);return t.includePrefix&&(r="T"+r),r}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const e=xz.fromDurationLike(t),i={};for(const t of gz)(HB(e.values,t)||HB(this.values,t))&&(i[t]=e.get(t)+this.get(t));return wz(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const e=xz.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=o_(t(this.values[i],i));return wz(this,{values:e},!0)}get(t){return this[xz.normalizeUnit(t)]}set(t){if(!this.isValid)return this;return wz(this,{values:{...this.values,...u_(t,xz.normalizeUnit)}})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:i,matrix:n}={}){return wz(this,{loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:n,conversionAccuracy:i})}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return function(t,e){yz.reduce(((i,n)=>VB(e[n])?i:(i&&Sz(t,e,i,e,n),n)),null)}(this.matrix,t),wz(this,{values:t},!0)}rescale(){if(!this.isValid)return this;return wz(this,{values:function(t){const e={};for(const[i,n]of Object.entries(t))0!==n&&(e[i]=n);return e}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...t){if(!this.isValid)return this;if(0===t.length)return this;t=t.map((t=>xz.normalizeUnit(t)));const e={},i={},n=this.toObject();let r;for(const s of gz)if(t.indexOf(s)>=0){r=s;let t=0;for(const e in i)t+=this.matrix[e][s]*i[e],i[e]=0;GB(n[s])&&(t+=n[s]);const a=Math.trunc(t);e[s]=a,i[s]=(1e3*t-1e3*a)/1e3;for(const t in n)gz.indexOf(t)>gz.indexOf(s)&&Sz(this.matrix,n,t,e,s)}else GB(n[s])&&(i[s]=n[s]);for(const t in i)0!==i[t]&&(e[r]+=t===r?i[t]:i[t]/this.matrix[r][t]);return wz(this,{values:e},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const e of Object.keys(this.values))t[e]=0===this.values[e]?0:-this.values[e];return wz(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid)return!1;if(!this.loc.equals(t.loc))return!1;for(const n of gz)if(e=this.values[n],i=t.values[n],!(void 0===e||0===e?void 0===i||0===i:e===i))return!1;var e,i;return!0}}const Cz="Invalid Interval";class Oz{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new BR("need to specify a reason the Interval is invalid");const i=t instanceof k_?t:new k_(t,e);if(zB.throwOnInvalid)throw new LR(i);return new Oz({invalid:i})}static fromDateTimes(t,e){const i=TV(t),n=TV(e),r=function(t,e){return t&&t.isValid?e&&e.isValid?e<t?Oz.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null:Oz.invalid("missing or invalid end"):Oz.invalid("missing or invalid start")}(i,n);return null==r?new Oz({start:i,end:n}):r}static after(t,e){const i=xz.fromDurationLike(e),n=TV(t);return Oz.fromDateTimes(n,n.plus(i))}static before(t,e){const i=xz.fromDurationLike(e),n=TV(t);return Oz.fromDateTimes(n.minus(i),n)}static fromISO(t,e){const[i,n]=(t||"").split("/",2);if(i&&n){let t,r,s,a;try{t=MV.fromISO(i,e),r=t.isValid}catch(n){r=!1}try{s=MV.fromISO(n,e),a=s.isValid}catch(n){a=!1}if(r&&a)return Oz.fromDateTimes(t,s);if(r){const i=xz.fromISO(n,e);if(i.isValid)return Oz.after(t,i)}else if(a){const t=xz.fromISO(i,e);if(t.isValid)return Oz.before(s,t)}}return Oz.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const e=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(e,t).get(t))+1}hasSame(t){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,t))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return!!this.isValid&&this.s>t}isBefore(t){return!!this.isValid&&this.e<=t}contains(t){return!!this.isValid&&(this.s<=t&&this.e>t)}set({start:t,end:e}={}){return this.isValid?Oz.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];const e=t.map(TV).filter((t=>this.contains(t))).sort(),i=[];let{s:n}=this,r=0;for(;n<this.e;){const t=e[r]||this.e,s=+t>+this.e?this.e:t;i.push(Oz.fromDateTimes(n,s)),n=s,r+=1}return i}splitBy(t){const e=xz.fromDurationLike(t);if(!this.isValid||!e.isValid||0===e.as("milliseconds"))return[];let i,{s:n}=this,r=1;const s=[];for(;n<this.e;){const t=this.start.plus(e.mapUnits((t=>t*r)));i=+t>+this.e?this.e:t,s.push(Oz.fromDateTimes(n,i)),n=i,r+=1}return s}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return!!this.isValid&&+this.e==+t.s}abutsEnd(t){return!!this.isValid&&+t.e==+this.s}engulfs(t){return!!this.isValid&&(this.s<=t.s&&this.e>=t.e)}equals(t){return!(!this.isValid||!t.isValid)&&(this.s.equals(t.s)&&this.e.equals(t.e))}intersection(t){if(!this.isValid)return this;const e=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return e>=i?null:Oz.fromDateTimes(e,i)}union(t){if(!this.isValid)return this;const e=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Oz.fromDateTimes(e,i)}static merge(t){const[e,i]=t.sort(((t,e)=>t.s-e.s)).reduce((([t,e],i)=>e?e.overlaps(i)||e.abutsStart(i)?[t,e.union(i)]:[t.concat([e]),i]:[t,i]),[[],null]);return i&&e.push(i),e}static xor(t){let e=null,i=0;const n=[],r=t.map((t=>[{time:t.s,type:"s"},{time:t.e,type:"e"}])),s=Array.prototype.concat(...r).sort(((t,e)=>t.time-e.time));for(const t of s)i+="s"===t.type?1:-1,1===i?e=t.time:(e&&+e!=+t.time&&n.push(Oz.fromDateTimes(e,t.time)),e=null);return Oz.merge(n)}difference(...t){return Oz.xor([this].concat(t)).map((t=>this.intersection(t))).filter((t=>t&&!t.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Cz}toLocaleString(t=$R,e={}){return this.isValid?T_.create(this.s.loc.clone(e),t).formatInterval(this):Cz}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Cz}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Cz}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Cz}toFormat(t,{separator:e="  "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:Cz}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):xz.invalid(this.invalidReason)}mapEndpoints(t){return Oz.fromDateTimes(t(this.s),t(this.e))}}class Mz{static hasDST(t=zB.defaultZone){const e=MV.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return bB.isValidZone(t)}static normalizeZone(t){return DB(t,zB.defaultZone)}static months(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||IB.create(e,i,r)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||IB.create(e,i,r)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||IB.create(e,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||IB.create(e,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return IB.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return IB.create(e,null,"gregory").eras(t)}static features(){return{relative:WB()}}}function Tz(t,e){const i=t=>t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor(xz.fromMillis(n).as("days"))}function kz(t,e,i,n){let[r,s,a,o]=function(t,e,i){const n=[["years",(t,e)=>e.year-t.year],["quarters",(t,e)=>e.quarter-t.quarter+4*(e.year-t.year)],["months",(t,e)=>e.month-t.month+12*(e.year-t.year)],["weeks",(t,e)=>{const i=Tz(t,e);return(i-i%7)/7}],["days",Tz]],r={},s=t;let a,o;for(const[u,l]of n)i.indexOf(u)>=0&&(a=u,r[u]=l(t,e),o=s.plus(r),o>e?(r[u]--,t=s.plus(r)):t=o);return[t,r,o,a]}(t,e,i);const u=e-r,l=i.filter((t=>["hours","minutes","seconds","milliseconds"].indexOf(t)>=0));0===l.length&&(a<e&&(a=r.plus({[o]:1})),a!==r&&(s[o]=(s[o]||0)+u/(a-r)));const h=xz.fromObject(s,n);return l.length>0?xz.fromMillis(u,n).shiftTo(...l).plus(h):h}const Iz={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Az={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jz=Iz.hanidec.replace(/[\[|\]]/g,"").split("");function Fz({numberingSystem:t},e=""){return new RegExp(`${Iz[t||"latn"]}${e}`)}function Dz(t,e=(t=>t)){return{regex:t,deser:([t])=>e(function(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(-1!==t[i].search(Iz.hanidec))e+=jz.indexOf(t[i]);else for(const t in Az){const[i,r]=Az[t];n>=i&&n<=r&&(e+=n-i)}}return parseInt(e,10)}return e}(t))}}const Pz=`[ ${String.fromCharCode(160)}]`,Lz=new RegExp(Pz,"g");function Ez(t){return t.replace(/\./g,"\\.?").replace(Lz,Pz)}function Nz(t){return t.replace(/\./g,"").replace(Lz," ").toLowerCase()}function Rz(t,e){return null===t?null:{regex:RegExp(t.map(Ez).join("|")),deser:([i])=>t.findIndex((t=>Nz(i)===Nz(t)))+e}}function Bz(t,e){return{regex:t,deser:([,t,e])=>a_(t,e),groups:e}}function _z(t){return{regex:t,deser:([t])=>t}}const zz={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Vz=null;function Gz(t,e){return Array.prototype.concat(...t.map((t=>function(t,e){if(t.literal)return t;const i=Wz(T_.macroTokenToFormatOpts(t.val),e);return null==i||i.includes(void 0)?t:i}(t,e))))}function $z(t,e,i){const n=Gz(T_.parseFormat(i),t),r=n.map((e=>function(t,e){const i=Fz(e),n=Fz(e,"{2}"),r=Fz(e,"{3}"),s=Fz(e,"{4}"),a=Fz(e,"{6}"),o=Fz(e,"{1,2}"),u=Fz(e,"{1,3}"),l=Fz(e,"{1,6}"),h=Fz(e,"{1,9}"),c=Fz(e,"{2,4}"),d=Fz(e,"{4,6}"),f=t=>{return{regex:RegExp((e=t.val,e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([t])=>t,literal:!0};var e},m=(m=>{if(t.literal)return f(m);switch(m.val){case"G":return Rz(e.eras("short",!1),0);case"GG":return Rz(e.eras("long",!1),0);case"y":return Dz(l);case"yy":case"kk":return Dz(c,r_);case"yyyy":case"kkkk":return Dz(s);case"yyyyy":return Dz(d);case"yyyyyy":return Dz(a);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Dz(o);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Dz(n);case"MMM":return Rz(e.months("short",!0,!1),1);case"MMMM":return Rz(e.months("long",!0,!1),1);case"LLL":return Rz(e.months("short",!1,!1),1);case"LLLL":return Rz(e.months("long",!1,!1),1);case"o":case"S":return Dz(u);case"ooo":case"SSS":return Dz(r);case"u":return _z(h);case"uu":return _z(o);case"uuu":case"E":case"c":return Dz(i);case"a":return Rz(e.meridiems(),0);case"EEE":return Rz(e.weekdays("short",!1,!1),1);case"EEEE":return Rz(e.weekdays("long",!1,!1),1);case"ccc":return Rz(e.weekdays("short",!0,!1),1);case"cccc":return Rz(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Bz(new RegExp(`([+-]${o.source})(?::(${n.source}))?`),2);case"ZZZ":return Bz(new RegExp(`([+-]${o.source})(${n.source})?`),2);case"z":return _z(/[a-z_+-/]{1,256}?/i);default:return f(m)}})(t)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return m.token=t,m}(e,t))),s=r.find((t=>t.invalidReason));if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[t,i]=function(t){const e=t.map((t=>t.regex)).reduce(((t,e)=>`${t}(${e.source})`),"");return[`^${e}$`,t]}(r),s=RegExp(t,"i"),[a,o]=function(t,e,i){const n=t.match(e);if(n){const t={};let e=1;for(const r in i)if(HB(i,r)){const s=i[r],a=s.groups?s.groups+1:1;!s.literal&&s.token&&(t[s.token.val[0]]=s.deser(n.slice(e,e+a))),e+=a}return[n,t]}return[n,{}]}(e,s,i),[u,l,h]=o?function(t){let e,i=null;VB(t.z)||(i=bB.create(t.z)),VB(t.Z)||(i||(i=new jB(t.Z)),e=t.Z),VB(t.q)||(t.M=3*(t.q-1)+1),VB(t.h)||(t.h<12&&1===t.a?t.h+=12:12===t.h&&0===t.a&&(t.h=0)),0===t.G&&t.y&&(t.y=-t.y),VB(t.u)||(t.S=ZB(t.u));const n=Object.keys(t).reduce(((e,i)=>{const n=(t=>{switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(i);return n&&(e[n]=t[i]),e}),{});return[n,i,e]}(o):[null,null,void 0];if(HB(o,"a")&&HB(o,"H"))throw new NR("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:s,rawMatches:a,matches:o,result:u,zone:l,specificOffset:h}}}function Wz(t,e){if(!t)return null;return T_.create(e,t).formatDateTimeParts((Vz||(Vz=MV.fromMillis(1555555555555)),Vz)).map((e=>function(t,e){const{type:i,value:n}=t;if("literal"===i)return{literal:!0,val:n};const r=e[i];let s=zz[i];return"object"==typeof s&&(s=s[r]),s?{literal:!1,val:s}:void 0}(e,t)))}const qz=[0,31,59,90,120,151,181,212,243,273,304,334],Hz=[0,31,60,91,121,152,182,213,244,274,305,335];function Uz(t,e){return new k_("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Kz(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return 0===r?7:r}function Jz(t,e,i){return i+(QB(t)?Hz:qz)[e-1]}function Yz(t,e){const i=QB(t)?Hz:qz,n=i.findIndex((t=>t<e));return{month:n+1,day:e-i[n]}}function Zz(t){const{year:e,month:i,day:n}=t,r=Jz(e,i,n),s=Kz(e,i,n);let a,o=Math.floor((r-s+10)/7);return o<1?(a=e-1,o=n_(a)):o>n_(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...h_(t)}}function Xz(t){const{weekYear:e,weekNumber:i,weekday:n}=t,r=Kz(e,1,4),s=t_(e);let a,o=7*i+n-r-3;o<1?(a=e-1,o+=t_(a)):o>s?(a=e+1,o-=t_(e)):a=e;const{month:u,day:l}=Yz(a,o);return{year:a,month:u,day:l,...h_(t)}}function Qz(t){const{year:e,month:i,day:n}=t;return{year:e,ordinal:Jz(e,i,n),...h_(t)}}function tV(t){const{year:e,ordinal:i}=t,{month:n,day:r}=Yz(e,i);return{year:e,month:n,day:r,...h_(t)}}function eV(t){const e=$B(t.year),i=UB(t.month,1,12),n=UB(t.day,1,e_(t.year,t.month));return e?i?!n&&Uz("day",t.day):Uz("month",t.month):Uz("year",t.year)}function iV(t){const{hour:e,minute:i,second:n,millisecond:r}=t,s=UB(e,0,23)||24===e&&0===i&&0===n&&0===r,a=UB(i,0,59),o=UB(n,0,59),u=UB(r,0,999);return s?a?o?!u&&Uz("millisecond",r):Uz("second",n):Uz("minute",i):Uz("hour",e)}const nV="Invalid DateTime";function rV(t){return new k_("unsupported zone",`the zone "${t.name}" is not supported`)}function sV(t){return null===t.weekData&&(t.weekData=Zz(t.c)),t.weekData}function aV(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new MV({...i,...e,old:i})}function oV(t,e,i){let n=t-60*e*1e3;const r=i.offset(n);if(e===r)return[n,e];n-=60*(r-e)*1e3;const s=i.offset(n);return r===s?[n,r]:[t-60*Math.min(r,s)*1e3,Math.max(r,s)]}function uV(t,e){const i=new Date(t+=60*e*1e3);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function lV(t,e,i){return oV(i_(t),e,i)}function hV(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+3*Math.trunc(e.quarters),s={...t.c,year:n,month:r,day:Math.min(t.c.day,e_(n,r))+Math.trunc(e.days)+7*Math.trunc(e.weeks)},a=xz.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=i_(s);let[u,l]=oV(o,i,t.zone);return 0!==a&&(u+=a,l=t.zone.offset(u)),{ts:u,o:l}}function cV(t,e,i,n,r,s){const{setZone:a,zone:o}=i;if(t&&0!==Object.keys(t).length){const n=e||o,r=MV.fromObject(t,{...i,zone:n,specificOffset:s});return a?r:r.setZone(o)}return MV.invalid(new k_("unparsable",`the input "${r}" can't be parsed as ${n}`))}function dV(t,e,i=!0){return t.isValid?T_.create(IB.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function fV(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=KB(t.c.year,i?6:4),e?(n+="-",n+=KB(t.c.month),n+="-",n+=KB(t.c.day)):(n+=KB(t.c.month),n+=KB(t.c.day)),n}function mV(t,e,i,n,r,s){let a=KB(t.c.hour);return e?(a+=":",a+=KB(t.c.minute),0===t.c.second&&i||(a+=":")):a+=KB(t.c.minute),0===t.c.second&&i||(a+=KB(t.c.second),0===t.c.millisecond&&n||(a+=".",a+=KB(t.c.millisecond,3))),r&&(t.isOffsetFixed&&0===t.offset&&!s?a+="Z":t.o<0?(a+="-",a+=KB(Math.trunc(-t.o/60)),a+=":",a+=KB(Math.trunc(-t.o%60))):(a+="+",a+=KB(Math.trunc(t.o/60)),a+=":",a+=KB(Math.trunc(t.o%60)))),s&&(a+="["+t.zone.ianaName+"]"),a}const vV={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},pV={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},bV={ordinal:1,hour:0,minute:0,second:0,millisecond:0},gV=["year","month","day","hour","minute","second","millisecond"],yV=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wV=["year","ordinal","hour","minute","second","millisecond"];function SV(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new RR(t);return e}function xV(t,e){const i=DB(e.zone,zB.defaultZone),n=IB.fromObject(e),r=zB.now();let s,a;if(VB(t.year))s=r;else{for(const e of gV)VB(t[e])&&(t[e]=vV[e]);const e=eV(t)||iV(t);if(e)return MV.invalid(e);const n=i.offset(r);[s,a]=lV(t,n,i)}return new MV({ts:s,zone:i,loc:n,o:a})}function CV(t,e,i){const n=!!VB(i.round)||i.round,r=(t,r)=>{t=XB(t,n||i.calendary?0:2,!0);return e.loc.clone(i).relFormatter(i).format(t,r)},s=n=>i.calendary?e.hasSame(t,n)?0:e.startOf(n).diff(t.startOf(n),n).get(n):e.diff(t,n).get(n);if(i.unit)return r(s(i.unit),i.unit);for(const t of i.units){const e=s(t);if(Math.abs(e)>=1)return r(e,t)}return r(t>e?-0:0,i.units[i.units.length-1])}function OV(t){let e,i={};return t.length>0&&"object"==typeof t[t.length-1]?(i=t[t.length-1],e=Array.from(t).slice(0,t.length-1)):e=Array.from(t),[i,e]}class MV{constructor(t){const e=t.zone||zB.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new k_("invalid input"):null)||(e.isValid?null:rV(e));this.ts=VB(t.ts)?zB.now():t.ts;let n=null,r=null;if(!i){if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[n,r]=[t.old.c,t.old.o];else{const t=e.offset(this.ts);n=uV(this.ts,t),i=Number.isNaN(n.year)?new k_("invalid input"):null,n=i?null:n,r=i?null:t}}this._zone=e,this.loc=t.loc||IB.create(),this.invalid=i,this.weekData=null,this.c=n,this.o=r,this.isLuxonDateTime=!0}static now(){return new MV({})}static local(){const[t,e]=OV(arguments),[i,n,r,s,a,o,u]=e;return xV({year:i,month:n,day:r,hour:s,minute:a,second:o,millisecond:u},t)}static utc(){const[t,e]=OV(arguments),[i,n,r,s,a,o,u]=e;return t.zone=jB.utcInstance,xV({year:i,month:n,day:r,hour:s,minute:a,second:o,millisecond:u},t)}static fromJSDate(t,e={}){const i=function(t){return"[object Date]"===Object.prototype.toString.call(t)}(t)?t.valueOf():NaN;if(Number.isNaN(i))return MV.invalid("invalid input");const n=DB(e.zone,zB.defaultZone);return n.isValid?new MV({ts:i,zone:n,loc:IB.fromObject(e)}):MV.invalid(rV(n))}static fromMillis(t,e={}){if(GB(t))return t<-864e13||t>864e13?MV.invalid("Timestamp out of range"):new MV({ts:t,zone:DB(e.zone,zB.defaultZone),loc:IB.fromObject(e)});throw new BR(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(GB(t))return new MV({ts:1e3*t,zone:DB(e.zone,zB.defaultZone),loc:IB.fromObject(e)});throw new BR("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};const i=DB(e.zone,zB.defaultZone);if(!i.isValid)return MV.invalid(rV(i));const n=zB.now(),r=VB(e.specificOffset)?i.offset(n):e.specificOffset,s=u_(t,SV),a=!VB(s.ordinal),o=!VB(s.year),u=!VB(s.month)||!VB(s.day),l=o||u,h=s.weekYear||s.weekNumber,c=IB.fromObject(e);if((l||a)&&h)throw new NR("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new NR("Can't mix ordinal dates with month/day");const d=h||s.weekday&&!l;let f,m,v=uV(n,r);d?(f=yV,m=pV,v=Zz(v)):a?(f=wV,m=bV,v=Qz(v)):(f=gV,m=vV);let p=!1;for(const t of f){VB(s[t])?s[t]=p?m[t]:v[t]:p=!0}const b=d?function(t){const e=$B(t.weekYear),i=UB(t.weekNumber,1,n_(t.weekYear)),n=UB(t.weekday,1,7);return e?i?!n&&Uz("weekday",t.weekday):Uz("week",t.week):Uz("weekYear",t.weekYear)}(s):a?function(t){const e=$B(t.year),i=UB(t.ordinal,1,t_(t.year));return e?!i&&Uz("ordinal",t.ordinal):Uz("year",t.year)}(s):eV(s),g=b||iV(s);if(g)return MV.invalid(g);const y=d?Xz(s):a?tV(s):s,[w,S]=lV(y,r,i),x=new MV({ts:w,zone:i,o:S,loc:c});return s.weekday&&l&&t.weekday!==x.weekday?MV.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${x.toISO()}`):x}static fromISO(t,e={}){const[i,n]=function(t){return F_(t,[nz,oz],[rz,uz],[sz,lz],[az,hz])}(t);return cV(i,n,e,"ISO 8601",t)}static fromRFC2822(t,e={}){const[i,n]=function(t){return F_(function(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t),[Y_,Z_])}(t);return cV(i,n,e,"RFC 2822",t)}static fromHTTP(t,e={}){const[i,n]=function(t){return F_(t,[X_,ez],[Q_,ez],[tz,iz])}(t);return cV(i,n,e,"HTTP",e)}static fromFormat(t,e,i={}){if(VB(t)||VB(e))throw new BR("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:r=null}=i,s=IB.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),[a,o,u,l]=function(t,e,i){const{result:n,zone:r,specificOffset:s,invalidReason:a}=$z(t,e,i);return[n,r,s,a]}(s,t,e);return l?MV.invalid(l):cV(a,o,i,`format ${e}`,t,u)}static fromString(t,e,i={}){return MV.fromFormat(t,e,i)}static fromSQL(t,e={}){const[i,n]=function(t){return F_(t,[dz,oz],[fz,mz])}(t);return cV(i,n,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new BR("need to specify a reason the DateTime is invalid");const i=t instanceof k_?t:new k_(t,e);if(zB.throwOnInvalid)throw new PR(i);return new MV({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){const i=Wz(t,IB.fromObject(e));return i?i.map((t=>t?t.val:null)).join(""):null}static expandFormat(t,e={}){return Gz(T_.parseFormat(t),IB.fromObject(e)).map((t=>t.val)).join("")}get(t){return this[t]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?sV(this).weekYear:NaN}get weekNumber(){return this.isValid?sV(this).weekNumber:NaN}get weekday(){return this.isValid?sV(this).weekday:NaN}get ordinal(){return this.isValid?Qz(this.c).ordinal:NaN}get monthShort(){return this.isValid?Mz.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Mz.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Mz.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Mz.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return QB(this.year)}get daysInMonth(){return e_(this.year,this.month)}get daysInYear(){return this.isValid?t_(this.year):NaN}get weeksInWeekYear(){return this.isValid?n_(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:e,numberingSystem:i,calendar:n}=T_.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:i,outputCalendar:n}}toUTC(t=0,e={}){return this.setZone(jB.instance(t),e)}toLocal(){return this.setZone(zB.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:i=!1}={}){if((t=DB(t,zB.defaultZone)).equals(this.zone))return this;if(t.isValid){let n=this.ts;if(e||i){const e=t.offset(this.ts),i=this.toObject();[n]=lV(i,e,t)}return aV(this,{ts:n,zone:t})}return MV.invalid(rV(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:i}={}){return aV(this,{loc:this.loc.clone({locale:t,numberingSystem:e,outputCalendar:i})})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const e=u_(t,SV),i=!VB(e.weekYear)||!VB(e.weekNumber)||!VB(e.weekday),n=!VB(e.ordinal),r=!VB(e.year),s=!VB(e.month)||!VB(e.day),a=r||s,o=e.weekYear||e.weekNumber;if((a||n)&&o)throw new NR("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&n)throw new NR("Can't mix ordinal dates with month/day");let u;i?u=Xz({...Zz(this.c),...e}):VB(e.ordinal)?(u={...this.toObject(),...e},VB(e.day)&&(u.day=Math.min(e_(u.year,u.month),u.day))):u=tV({...Qz(this.c),...e});const[l,h]=lV(u,this.o,this.zone);return aV(this,{ts:l,o:h})}plus(t){if(!this.isValid)return this;return aV(this,hV(this,xz.fromDurationLike(t)))}minus(t){if(!this.isValid)return this;return aV(this,hV(this,xz.fromDurationLike(t).negate()))}startOf(t){if(!this.isValid)return this;const e={},i=xz.normalizeUnit(t);switch(i){case"years":e.month=1;case"quarters":case"months":e.day=1;case"weeks":case"days":e.hour=0;case"hours":e.minute=0;case"minutes":e.second=0;case"seconds":e.millisecond=0}if("weeks"===i&&(e.weekday=1),"quarters"===i){const t=Math.ceil(this.month/3);e.month=3*(t-1)+1}return this.set(e)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,e={}){return this.isValid?T_.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):nV}toLocaleString(t=$R,e={}){return this.isValid?T_.create(this.loc.clone(e),t).formatDateTime(this):nV}toLocaleParts(t={}){return this.isValid?T_.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const s="extended"===t;let a=fV(this,s);return a+="T",a+=mV(this,s,e,i,n,r),a}toISODate({format:t="extended"}={}){return this.isValid?fV(this,"extended"===t):null}toISOWeekDate(){return dV(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:r=!1,format:s="extended"}={}){if(!this.isValid)return null;return(n?"T":"")+mV(this,"extended"===s,e,t,i,r)}toRFC2822(){return dV(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return dV(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?fV(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(e||t)&&(i&&(n+=" "),e?n+="z":t&&(n+="ZZ")),dV(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():nV}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",i={}){if(!this.isValid||!t.isValid)return xz.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=(o=e,Array.isArray(o)?o:[o]).map(xz.normalizeUnit),s=t.valueOf()>this.valueOf(),a=kz(s?this:t,s?t:this,r,n);var o;return s?a.negate():a}diffNow(t="milliseconds",e={}){return this.diff(MV.now(),t,e)}until(t){return this.isValid?Oz.fromDateTimes(this,t):this}hasSame(t,e){if(!this.isValid)return!1;const i=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(e)<=i&&i<=n.endOf(e)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const e=t.base||MV.fromObject({},{zone:this.zone}),i=t.padding?this<e?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(n=t.unit,r=void 0),CV(e,this.plus(i),{...t,numeric:"always",units:n,unit:r})}toRelativeCalendar(t={}){return this.isValid?CV(t.base||MV.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(MV.isDateTime))throw new BR("min requires all arguments be DateTimes");return qB(t,(t=>t.valueOf()),Math.min)}static max(...t){if(!t.every(MV.isDateTime))throw new BR("max requires all arguments be DateTimes");return qB(t,(t=>t.valueOf()),Math.max)}static fromFormatExplain(t,e,i={}){const{locale:n=null,numberingSystem:r=null}=i;return $z(IB.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),t,e)}static fromStringExplain(t,e,i={}){return MV.fromFormatExplain(t,e,i)}static get DATE_SHORT(){return $R}static get DATE_MED(){return WR}static get DATE_MED_WITH_WEEKDAY(){return qR}static get DATE_FULL(){return HR}static get DATE_HUGE(){return UR}static get TIME_SIMPLE(){return KR}static get TIME_WITH_SECONDS(){return JR}static get TIME_WITH_SHORT_OFFSET(){return YR}static get TIME_WITH_LONG_OFFSET(){return ZR}static get TIME_24_SIMPLE(){return XR}static get TIME_24_WITH_SECONDS(){return QR}static get TIME_24_WITH_SHORT_OFFSET(){return tB}static get TIME_24_WITH_LONG_OFFSET(){return eB}static get DATETIME_SHORT(){return iB}static get DATETIME_SHORT_WITH_SECONDS(){return nB}static get DATETIME_MED(){return rB}static get DATETIME_MED_WITH_SECONDS(){return sB}static get DATETIME_MED_WITH_WEEKDAY(){return aB}static get DATETIME_FULL(){return oB}static get DATETIME_FULL_WITH_SECONDS(){return uB}static get DATETIME_HUGE(){return lB}static get DATETIME_HUGE_WITH_SECONDS(){return hB}}function TV(t){if(MV.isDateTime(t))return t;if(t&&t.valueOf&&GB(t.valueOf()))return MV.fromJSDate(t);if(t&&"object"==typeof t)return MV.fromObject(t);throw new BR(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function kV(t,e){const i=function(){const t=MV.now().offset/60;return`${t>0?"+":"-"}INTERVAL '${Math.abs(t)-1}:59:59' HOUR TO SECOND`}(),n=`EXTRACT(YEAR FROM ${t} ${i})`,r=`EXTRACT(MONTH FROM ${t} ${i})`,s=`EXTRACT(DAY FROM ${t} ${i})`,a=`EXTRACT(HOUR FROM ${t} ${i})`,o=`EXTRACT(MINUTE FROM ${t} ${i})`,u=`EXTRACT(SECOND FROM ${t} ${i})`;let l=[];switch(e){case aP:l=[n,r,s,a,o,u];break;case oP:l=[n,r,s,a,o];break;case uP:l=[n,r,s,a];break;case lP:case hP:case cP:case dP:l=[n,r,s]}return l}function IV(t,e,i=vC().formatLocale){let n;switch(t){case DD:n=new gb,n.language.locale=e,n.intlLocales=i;break;case PD:n=new yb,void 0!==n.language&&(n.language.locale=e),n.intlLocales=i}return n}function AV(t=vC().locale){return yd(this,void 0,void 0,(function*(){let e=yield import("./p-a7a118b5.js");switch(t){case hC.Arabic:e=yield import("./p-3b7ccf55.js");break;case hC.Bosnian:e=yield import("./p-d5bccc6a.js");break;case hC.Bulgarian:e=yield import("./p-7f4b5af6.js");break;case hC.Catalan:e=yield import("./p-d1758f2b.js");break;case hC.Czech:e=yield import("./p-04eea20b.js");break;case hC.Danish:e=yield import("./p-8a1c6a43.js");break;case hC.German:e=yield import("./p-5464dc8b.js");break;case hC.Greek:e=yield import("./p-abe6d52c.js");break;case hC.EnglishUSA:e=yield import("./p-5c780c56.js");break;case hC.Spanish:e=yield import("./p-435a184e.js");break;case hC.Estonian:e=yield import("./p-e7829484.js");break;case hC.Finnish:e=yield import("./p-6b28ed76.js");break;case hC.French:e=yield import("./p-3e9a9486.js");break;case hC.Hebrew:e=yield import("./p-c466b693.js");break;case hC.Croatian:e=yield import("./p-20ff4f53.js");break;case hC.Hungarian:e=yield import("./p-6fbe4e1c.js");break;case hC.Indonesian:e=yield import("./p-b5c58833.js");break;case hC.Italian:e=yield import("./p-f52c26d0.js");break;case hC.Japanese:e=yield import("./p-1a38fc5d.js");break;case hC.Korean:e=yield import("./p-8d7bf301.js");break;case hC.Lithuanian:e=yield import("./p-527a997b.js");break;case hC.Latvian:e=yield import("./p-e4f6623a.js");break;case hC.NorwegianBokml:e=yield import("./p-b0a21da1.js");break;case hC.Dutch:e=yield import("./p-f3899a3e.js");break;case hC.Polish:e=yield import("./p-08d1ac1a.js");break;case hC.PortugueseBrazil:e=yield import("./p-6a1c8912.js");break;case hC.PortuguesePortugal:e=yield import("./p-ef6d4976.js");break;case hC.Romanian:e=yield import("./p-29ab1038.js");break;case hC.Russian:e=yield import("./p-c7ac8383.js");break;case hC.Serbian:e=yield import("./p-ac02bf5b.js");break;case hC.Slovak:e=yield import("./p-e83ca619.js");break;case hC.Slovenian:e=yield import("./p-4db92266.js");break;case hC.Swedish:e=yield import("./p-f550f2e2.js");break;case hC.Thai:e=yield import("./p-bb78cd83.js");break;case hC.Turkish:e=yield import("./p-559c6f82.js");break;case hC.Ukrainian:e=yield import("./p-18301fc7.js");break;case hC.Vietnamese:e=yield import("./p-756dad7f.js");break;case hC.ChineseChina:e=yield import("./p-fab5168d.js");break;case hC.ChineseHongKong:e=yield import("./p-7d32c181.js");break;case hC.ChineseTaiwan:e=yield import("./p-f3632f3c.js")}return e}))}function jV(t){return yd(this,void 0,void 0,(function*(){const e=yield AV(),i=e.errors[t];throw new YM(e.modalHeaders.error,null!=i?i:e.errors.simpleError)}))}const FV="XAxisTitle",DV="YAxisTitle",PV="ChartTitle",LV="ChartSubTitle",EV="ChartFooter",NV="GuideLabel";function RV(t=":"){return!0===(!0!==vC().rtl)?`${t}`:`${t}`}function BV(t){let e=t=>t;if(null!=t&&t>0){const i=oR.chartEllipsis;e=e=>{let n="number"==typeof e?`${e}`:e;if(!1===oM(n)&&n!==oR.htmlEmptyContent){const e=hv(n,t,"",!1);n=e.length<n.length?`${e}${i}`:e}return n}}return e}function _V(t){return t=(t=(t=(t=(t=t.replace(/[\[]/g,"[[")).replace(/[\]]/g,"]]")).replace(/[\{]/g,"{{")).replace(/[\}]/g,"}}")).replace(/[\']/g,"''")}function zV(t){var e,i;const{chart:n,label:r,labelType:s}=t;let a=NaN;switch(s){case NV:n instanceof vj==!1&&(a=90===r.rotation||270===r.rotation?n.seriesContainer.measuredHeight:n.seriesContainer.measuredWidth);break;case FV:a=n.seriesContainer.measuredWidth;break;case DV:a=n.seriesContainer.measuredHeight;break;case PV:case LV:case EV:a=n.measuredWidth-20}a>0&&(r.maxWidth=a,n.invalidateLabels(),n instanceof QA&&(null===(e=n.xAxes.getIndex(0))||void 0===e||e.invalidateLabels(),null===(i=n.yAxes.getIndex(0))||void 0===i||i.invalidateLabels()))}function VV(t){const{chart:e,labelType:i}=t;zV(t);const n=i===DV?1:0;e.events.on(wR,QN((()=>zV(t)),oR.debounceTime),n)}const GV=new Map;function $V(t){void 0!==t&&GV.delete(t)}function WV(t,e){var i;const n=null!==(i=GV.get(t))&&void 0!==i?i:{};GV.set(t,Object.assign(Object.assign({},n),e))}function qV(t,e){var i;return null===(i=GV.get(t))||void 0===i?void 0:i[e]}function HV(t,e){return qV(t,e)}function UV(t,e){WV(t,e)}function KV(t,e){return qV(t,e)}function JV(t,e){WV(t,e)}function YV(t,e){return qV(t,e)}function ZV(t,e){WV(t,e)}function XV(t,e){return qV(t,e)}function QV(t,e){WV(t,e)}function tG(t){var e,i,n;return null===(n=null===(i=null===(e=t.axes)||void 0===e?void 0:e[0])||void 0===i?void 0:i.valueFormat)||void 0===n?void 0:n.type}function eG(t){return t.intlOptions}function iG(t){return(null==t?void 0:t.type)===DD}function nG(t){var e;return!0===iG(t)&&"percent"===(null===(e=t.intlOptions)||void 0===e?void 0:e.style)}function rG(t){return(null==t?void 0:t.type)===FD}function sG(t){return(null==t?void 0:t.type)===PD}function aG(t,e){var i;const n=null!==(i=HV(t.chart.uid,"isNonAggregatedChart"))&&void 0!==i&&i,r=!1===n&&sG(e)&&t instanceof WA,s=iG(e)&&t instanceof VA&&t instanceof WA==!1,a=(rG(e)||!0===n)&&t instanceof KA;return!1===r&&!1===s&&!1===a}function oG(t,e){let i="number"==typeof e?`${e}`:e;const n=YV(t.uid,"numberFormatter");return void 0!==n&&(i=n(e)),!0===oM(i)&&(i=oR.htmlEmptyContent),hM(i)}function uG(t){const{axis:e,defaultOutput:i,dataItem:n}=t;let r=i;const s=YV(e.uid,"categoryFormatter");if(void 0!==s&&n instanceof UA){const t=ZG(HV(e.chart.uid,"config"));r=s(kG({value:n.category,dataContext:n.dataContext,specificField:t}))}return!0===oM(r)&&(r=oR.htmlEmptyContent),hM(r)}function lG(t){t.renderer.labels.template.adapter.add("htmlOutput",((e,i)=>function(t){var e;const{axis:i,defaultOutput:n,dataItem:r}=t;let s=n;const a=YV(i.uid,"dateFormatter");return void 0!==a&&r instanceof $A&&(s=a(null!==(e=r.value)&&void 0!==e?e:n)),!0===oM(s)&&(s=oR.htmlEmptyContent),hM(s)}({axis:t,dataItem:null==i?void 0:i.dataItem,defaultOutput:e})),0),t.renderer.labels.template.adapter.disableKey("htmlOutput")}function hG(t){t instanceof VA&&t instanceof WA==!1?function(t){t.renderer.labels.template.html=oR.htmlEmptyContent,t.renderer.labels.template.adapter.add("htmlOutput",((e,i)=>{var n,r;return oG(t,null!==(r=null===(n=null==i?void 0:i.dataItem)||void 0===n?void 0:n.value)&&void 0!==r?r:e)}),0)}(t):t instanceof KA?function(t){t.renderer.labels.template.html=oR.htmlEmptyContent,t.renderer.labels.template.adapter.add("htmlOutput",((e,i)=>uG({axis:t,defaultOutput:e,dataItem:null==i?void 0:i.dataItem})),0)}(t):t instanceof WA&&lG(t),function(t){t.renderer.labels.template.adapter.add("htmlOutput",(e=>{let i=e;const n=YV(t.uid,"fontStyleCallback");return void 0!==n&&(i=n(i)),hM(i)}),1)}(t)}function cG(t,e,i){const n=IV(DD,e);return n.numberFormat=t,e=>{let r="number"==typeof e?e:function(t,e){const[,i,,,,n]=1111.1.toLocaleString(e),r=t.replace(i,"").replace(n,".");return parseFloat(r)}(e,n.intlLocales);return!0===i&&"percent"===t.style&&(r/=100),n.format(r)}}function dG(t){const{axis:e,formatOptions:i,isNonAggregatedChart:n,categoryAxisFormatter:r}=t;let s;s=void 0!==r?r:!0===n&&sG(i)?function(t,e){return i=>{let n=i;return n=IV(PD,e).format(n,t.intlOptions),n}}(i,e.chart.language.locale):BV(i.characterLimit),ZV(e.uid,{categoryFormatter:s})}function fG(t){return yd(this,void 0,void 0,(function*(){const{isNonAggregatedChart:e,axis:i,formatOptions:n,labelsTextSymbol:r,overridePercentMultiplication:s,axisValueFormatter:a}=t;i instanceof VA&&i instanceof WA==!1&&!0===iG(n)?function(t){const{axis:e,formatOptions:i,overridePercentMultiplication:n,valueAxisFormatter:r}=t,s=eG(i);ZV(e.uid,{numberFormatter:null!=r?r:cG(s,e.chart.language.locale,n)})}({axis:i,formatOptions:n,overridePercentMultiplication:s,valueAxisFormatter:a}):i instanceof WA&&!0===sG(n)&&!0!==e?function(t){const{axis:e,formatOptions:i,dateAxisFormatter:n}=t;if(ZV(e.uid,{dateFormatter:n}),void 0===n){e.renderer.labels.template.adapter.isEnabled("htmlOutput")&&(e.renderer.labels.template.adapter.disableKey("htmlOutput"),e.renderer.labels.each((t=>{t.element instanceof Fp&&t.element.removeChildren()})));const t=eG(i);if(0!==Object.keys(t).length){const i=["year","month","week","day","hour","minute","second","millisecond"];for(let n=0;n<i.length;n+=1)e.dateFormats.setKey(i[n],t),e.periodChangeDateFormats.setKey(i[n],t)}}else e.renderer.labels.template.html=oR.htmlEmptyContent,e.renderer.labels.template.adapter.enableKey("htmlOutput")}({axis:i,formatOptions:n,dateAxisFormatter:a}):i instanceof KA&&(!0===rG(n)||!0===e)?dG({axis:i,formatOptions:n,isNonAggregatedChart:e,categoryAxisFormatter:a}):yield jV("mismatchAxisAndValueFormat"),function(t){const{axis:e,labelsTextSymbol:i,axisValueFormatter:n}=t;if(void 0!==n)ZV(e.uid,{fontStyleCallback:void 0});else if(void 0===YV(e.uid,"fontStyleCallback")){const t=t=>l$({textSymbol:i,placeholderString:t,format:"html"});ZV(e.uid,{fontStyleCallback:t})}}({axis:i,labelsTextSymbol:r,axisValueFormatter:a}),i.invalidateLabels()}))}function mG(t){var e,i,n;const{queryObject:r,chartConfig:s,options:a}=t,{runtimeDataFilters:o}=null!=a?a:{},{series:u,dataFilters:l}=s,{where:h,gdbVersion:c,timeExtent:d,geometry:f,distance:m,units:v}=null!=l?l:{},{where:p,gdbVersion:b,timeExtent:g,geometry:y,distance:w,units:S}=null!=o?o:{},x=u[0],{query:C}=x,{where:O}=null!=C?C:{},M=kM(u),T=Object.assign({},C);return T.where=VM([h,p]),M!==WC&&(T.where=VM([T.where,O])),T.gdbVersion=null!=b?b:c,T.timeExtent=null!=g?g:d,T.geometry=function(t,e){let i=e;if(!0==(!1===bM(t))&&void 0!==t){const e=t.view.extent,{xmin:n,xmax:r,ymin:s,ymax:a,zmin:o,zmax:u,spatialReference:l}=e;i={xmin:n,ymin:s,zmin:o,xmax:r,ymax:a,zmax:u,spatialReference:l}}return i}(r,null!=y?y:f),T.distance=null!=w?w:m,T.units=null!=S?S:v,(null===(i=null===(e=null==C?void 0:C.outStatistics)||void 0===e?void 0:e[0])||void 0===i?void 0:i.statisticType)===_F&&(T.returnDistinctValues=null!==(n=null==C?void 0:C.returnDistinctValues)&&void 0!==n&&n),T}function vG(t){var e;const{whereValue:i,outStatistics:n,y:r}=t;let s=null!==(e=bC.outStatistics.outStatisticFieldName)&&void 0!==e?e:"";return void 0!==(null==n?void 0:n.outStatisticFieldName)?s=n.outStatisticFieldName:void 0!==(null==n?void 0:n.onStatisticField)&&void 0!==n.statisticType?s=`${n.statisticType}_${n.onStatisticField}_${i}`:void 0!==r&&(s=r),s}function pG(t){return t.statisticType===HF||t.statisticType===UF}function bG(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{uniqueQuery:r,y:s,queryObject:a,isPieFromFields:o,isTimeBinningSeries:u,returnFeaturesExtent:l}=t,h=bC.outStatistics;if(void 0!==(null===(e=r.outStatistics)||void 0===e?void 0:e[0])){!0!==o&&(r.outStatistics[0].outStatisticFieldName=null!=s?s:h.outStatisticFieldName);const{outStatistics:t}=r;for(let e=0;e<t.length;e+=1){const n=r.outStatistics[e];void 0!==n&&!0===pG(n)&&(!0===u?(t[e].statisticType=_F,delete t[e].statisticParameters):t[e]=Object.assign(Object.assign({},t[e]),{statisticParameters:null!==(i=t[e].statisticParameters)&&void 0!==i?i:{value:oR.defaultStatParameterValue}}))}}else if(void 0!==a){const t=SM(yield yM(a));r.outStatistics=[{statisticType:h.statisticType,onStatisticField:t,outStatisticFieldName:null!=s?s:h.outStatisticFieldName}]}!0===l&&(null===(n=r.outStatistics)||void 0===n||n.push({statisticType:KF,onStatisticField:"1"}))}))}function gG(t){var e,i;const{chartConfig:n,options:r,uniqueQuery:s}=t;if((null===(e=null==r?void 0:r.chartLimits)||void 0===e?void 0:e.behaviorAfterLimit)===lC){const t=VG(n,null==r?void 0:r.chartLimits);if(void 0!==t)if(!0===LM(n.series)){if(void 0!==(null===(i=s.outStatistics)||void 0===i?void 0:i[0])){const e=(t,e)=>t.statisticType===KF===e,i=s.outStatistics.filter((t=>e(t,!0))),n=s.outStatistics.filter((t=>e(t,!1)));n.splice(t),s.outStatistics=[...n,...i]}}else s.num=t}}function yG(t){var e;return yd(this,void 0,void 0,(function*(){const{chartConfig:i,queryConfig:n,options:r,queryObject:s,timeIntervalInfo:a}=t,{setTimeBinningInfoWhenNotProvided:o,returnFeaturesExtent:u}=null!=r?r:{},l=i.series,h=kM(l),c=!0===FM({xAxisValueFormatType:tG(i),setTimeBinningInfoWhenNotProvided:o,seriesConfig:l[0]});let d={},f=new Map;const{query:m,x:v,y:p}=l[0];if(void 0!==m){d=ON(m);let t=!0===n.fetchNullValues?"":`${v} IS NOT NULL`;switch(h){case WC:{const e=CM(m.where);""!==e&&(f=function(t){var e,i,n;const r=new Map;for(let s=0;s<t.length;s+=1){const a=ON(t[s]),o=null===(e=a.query)||void 0===e?void 0:e.where;if(void 0!==o){const e=OM({where:o});if(""!==e){const o=vG({whereValue:e,outStatistics:null===(n=null===(i=a.query)||void 0===i?void 0:i.outStatistics)||void 0===n?void 0:n[0],y:a.y});t[s].y=o,r.set(e,o)}}}return r}(l),!0!==n.fetchNullValues&&(t=VM([t,`${e} IS NOT NULL`])),function(t){const{uniqueQuery:e,splitByField:i,x:n}=t;void 0!==e.groupByFieldsForStatistics?!1===e.groupByFieldsForStatistics.includes(i)&&e.groupByFieldsForStatistics.push(i):e.groupByFieldsForStatistics=n===i?[n]:[n,i]}({uniqueQuery:d,splitByField:e,x:v}),yield bG({uniqueQuery:d,queryObject:s,isTimeBinningSeries:c,returnFeaturesExtent:u}));break}case qC:!function(t,e){var i,n;for(let r=1;r<e.length;r+=1){const s=Object.assign({},null===(n=null===(i=e[r].query)||void 0===i?void 0:i.outStatistics)||void 0===n?void 0:n[0]);void 0!==s&&void 0!==t.outStatistics&&t.outStatistics.push(s)}}(d,l),yield bG({uniqueQuery:d,y:p,isTimeBinningSeries:c,returnFeaturesExtent:u});break;case HC:t="",function(t){void 0!==t.orderByFields&&(t.orderByFields=void 0)}(d),yield bG({uniqueQuery:d,y:p,isTimeBinningSeries:c,returnFeaturesExtent:u,isPieFromFields:!0});break;case GC:yield bG({uniqueQuery:d,y:p,isTimeBinningSeries:c,returnFeaturesExtent:u})}if(!0===c){const t=gM(s),{objectIdField:i}=t;!function(t){const{uniqueQuery:e,x:i,splitByField:n,timeIntervalUnits:r,queryType:s,objectIdField:a}=t;if(void 0!==r){const t=kV(i,r);e.orderByFields=t,e.groupByFieldsForStatistics=t,s===WC&&!1===oM(n)?e.groupByFieldsForStatistics.push(n):s===$C&&(e.groupByFieldsForStatistics.push(a),e.outStatistics=[{onStatisticField:a,outStatisticFieldName:`COUNT_${a}`,statisticType:_F}])}}({uniqueQuery:d,x:v,splitByField:CM(m.where),timeIntervalUnits:null!==(e=null==a?void 0:a.timeIntervalUnits)&&void 0!==e?e:l[0].timeIntervalUnits,queryType:h,objectIdField:i})}d.where=t}gG({chartConfig:i,options:r,uniqueQuery:d});const{gdbVersion:b,geometry:g,distance:y,units:w,timeExtent:S,where:x}=n;return void 0!==b&&(d.gdbVersion=b),void 0!==g&&(d.geometry=g),void 0!==y&&(d.distance=y),void 0!==w&&(d.units=w),void 0!==S&&(d.timeExtent=S),void 0!==x&&(d.where=VM([d.where,x])),{uniqueQuery:d,mapToStatField:f}}))}function wG(t){const{queryCalculatedExpr:e}=oR;return uM(t,e)}function SG(t){var e,i,n,r,s,a,o,u;let l="";return t instanceof YA?l=null!==(a=null!==(r=null!==(i=null===(e=t.dataFields)||void 0===e?void 0:e.categoryX)&&void 0!==i?i:null===(n=t.dataFields)||void 0===n?void 0:n.dateX)&&void 0!==r?r:null===(s=t.dataFields)||void 0===s?void 0:s.valueX)&&void 0!==a?a:"":t instanceof xj&&(l=null!==(u=null===(o=t.dataFields)||void 0===o?void 0:o.category)&&void 0!==u?u:""),l}function xG(t){var e,i,n,r,s,a,o,u;let l="";return t instanceof YA?l=null!==(a=null!==(r=null!==(i=null===(e=t.dataFields)||void 0===e?void 0:e.categoryY)&&void 0!==i?i:null===(n=t.dataFields)||void 0===n?void 0:n.dateY)&&void 0!==r?r:null===(s=t.dataFields)||void 0===s?void 0:s.valueY)&&void 0!==a?a:"":t instanceof xj&&(l=null!==(u=null===(o=t.dataFields)||void 0===o?void 0:o.value)&&void 0!==u?u:""),l}function CG(t){return!0===HV(t.chart.uid,"isRotated")?xG(t):SG(t)}function OG(t){return!0===HV(t.chart.uid,"isRotated")?SG(t):xG(t)}function MG(t,e=0){const i=HV(t.chart.uid,"config");return iM(null==i?void 0:i.series,e)}function TG(t){let e;return void 0!==(null==t?void 0:t[0])&&(e=t.reduce(((t,e)=>Object.assign(Object.assign({},t),{xmin:Math.min(t.xmin,e.xmin),xmax:Math.max(t.xmax,e.xmax),ymin:Math.min(t.ymin,e.ymin),ymax:Math.max(t.ymax,e.ymax)})),t[0])),e}function kG(t){const{value:e,dataContext:i,specificField:n,keepNullValues:r=!1}=t;let s=e;const{originalCategoryValue:a,originalDateValue:o}=oR;return void 0!==i&&(void 0!==n&&n in i?s=i[n]:o in i?s=i[o]:a in i?s=i[a]:kP in i&&(s=i[kP]),!1===r&&null===s&&(s="null")),s}function IG(t){const{arrayToSort:e,orderByFields:i,forceAscendingOrder:n,isNonAggregated:r,sortByXAxisField:s,seriesType:a}=t;void 0!==e&&e.sort(((t,e)=>{let o=0;for(let u=0;u<i.length;u+=1){const[l,h=oR.seriesSort]=i[u].split(" "),c=h.toLowerCase()===QD.Descending.toLowerCase()&&!0!==n;let d=!0===s&&a!==ND?kG({value:`${t[l]}`,dataContext:t}):t[l],f=!0===s&&a!==ND?kG({value:`${e[l]}`,dataContext:e}):e[l];if(!0===r&&!0===c&&!0===s&&(d=!1===Number.isNaN(parseFloat(`${d}`))?parseFloat(d):d,f=!1===Number.isNaN(parseFloat(`${f}`))?parseFloat(f):f),!0===s&&(null===t[oR.originalCategoryValue]||null===d)||!0===t[yC])o=1;else if(!0===s&&(null===e[oR.originalCategoryValue]||null===f)||!0===e[yC])o=-1;else if("string"==typeof d&&"string"==typeof f)o=d.localeCompare(f,void 0,{numeric:!0}),!0===c&&(o*=-1);else if(void 0===d)o=!1===c?1:-1;else if(void 0===f)o=!1===c?-1:1;else if(null!==d&&null!==f){if(d>f){o=!1===c?1:-1;break}if(d<f){o=!1===c?-1:1;break}}}return o}))}function AG(t,e){let i=t;if(void 0!==(null==e?void 0:e[0])&&!0===LM(e)){const{x:n,y:r}=e[0];let s=!0===(!0===$P(t))?i:i.dataItems;s=s.map((t=>(kP in t!==void 0&&(t[n]=void 0!==t[n]?t[n]:t[kP],delete t[kP]),IP in t!==void 0&&(t[r]=void 0!==t[r]?t[r]:t[IP],delete t[IP]),t)))}return i}function jG(t,e){var i;const n=iM(e,0);let r=t;const s=null==e?void 0:e[0];if((n===ND||n===BD||n===_D||n===VD)&&void 0!==s){const a=!0===$P(t);let o=!0===a?t:t.dataItems;if(void 0!==t){const u=kM(e);if(n===ND||u===$C){const{originalCategoryValue:t,originalDateValue:e}=oR,{x:i}=s;o=o.map((n=>{let r=n[i];void 0!==n[e]?r=n[e]:void 0!==n[t]&&(r=n[t]);const s=Object.assign(Object.assign({},n),{[i]:r});return delete s[e],delete s[t],s}))}if(!0===a)r=o;else{r={dataItems:o};const{timeIntervalInfo:e}=null!==(i=t)&&void 0!==i?i:{};!1===eR(e)&&(r.timeIntervalInfo=e)}}}return r}function FG(t){var e;const i=Object.assign({},t);delete i[oR.technicalSortingFieldBySum],delete i[oR.technicalSortingFieldByPercent],delete i[oR.pieChart.technicalFieldSlicePercent],delete i[oR.pieChart.technicalFieldGroupedSlices],delete i[bC.uniqueIdsName];const n=wG(i);return!0===n.isInItem&&delete i[null!==(e=n.expr)&&void 0!==e?e:""],i}function DG(t){const{data:e,seriesConfig:i}=t;let n=ON(e);return void 0!==n&&(n=jG(n,i),n=function(t,e){var i;let n=t;const r=iM(e);let s=NM({fetchedData:n,seriesType:r});if(void 0!==s)switch(r){case VD:case _D:case BD:case ND:{s=s.map(FG),n={dataItems:s};const{timeIntervalInfo:e}=null!==(i=t)&&void 0!==i?i:{};!1===eR(e)&&(n.timeIntervalInfo=e)}break;case ED:n=Object.assign(Object.assign({},n),{dataItems:s.map(FG)})}return n}(n,i),n=AG(n,i)),n}function PG(t){var e;const{statsMap:i,dataContext:n,chartLimits:r}=t;let s=!1;if(void 0!==i){const{maxScatterPointsBeforeAggregation:t}=DC(r),{queryNumberOfFeatures:n}=oR.scatterPlotAggregationFields;s=(null!==(e=i.get(n))&&void 0!==e?e:NaN)>=t}else void 0!==n&&(s=!0===wG(n).isInItem);return s}function LG(t){const{dataContext:e,chartConfig:i,chartLimits:n}=t;let r=!0;if(void 0!==i){switch(iM(i.series,0)){case _D:case BD:r=function(t){let e=!0;const i=iM(t.series,0);i!==_D&&i!==BD||(e=kM(t.series)!==$C);return e}(i);break;case ED:r=PG({dataContext:e,chartLimits:n});break;case ND:r=function(t){return kM(t.series)!==$C}(i)}}return r}function EG(t){let e=new Date(t).valueOf();return!1===Number.isNaN(e)&&(e=new Intl.DateTimeFormat("en-US",oR.dateFormatUTC).format(t).replace(",","")),e}function NG(t){const e=[],i=t[pC];for(const n in t)if(""!==n&&n!==pC&&n in t){const r={[kP]:n,[oR.originalCategoryValue]:n,[IP]:t[n]};void 0!==i&&(r[pC]=i),e.push(r)}return e}function RG(t){const{oldConfig:e,newConfig:i}=t;let n=!1;const r=e.series[0],s=i.series[0],a=iM([r]),o=iM([s]);if(a===ND&&o===ND){const{slices:t,sliceGrouping:e}=r,{slices:i,sliceGrouping:a}=s,o=null==t?void 0:t.map((t=>({sliceId:t.sliceId,label:t.label}))),u=null==i?void 0:i.map((t=>({sliceId:t.sliceId,label:t.label}))),l=null==e?void 0:e.label,h=null==a?void 0:a.label;n=JSON.stringify(o)!==JSON.stringify(u)||JSON.stringify(l)!==JSON.stringify(h)}return n}function BG(t){var e;const{forceDataUpdate:i,oldConfig:n,newConfig:r,options:s,filterBySelection:a,timeIntervalInfo:o,currentSelectionDataItems:u,currentSelectionOIDs:l,currentSelectionIndexes:h}=t,{series:c}=r,{series:d}=n,f=iM(c);let m=!1,v=!1,p=!1;const b={common:{queryChanged:!1,xOrYChanged:!1,numberOfSeriesChanged:!1,configFiltersChanged:!1,filterBySelectionChanged:!1,dataForFilterBySelectionChanged:!1},lineChart:{timeBinningChanged:!1,timeIntervalUnitChanged:!1,newTimeBinningWillBeCalculated:!1},histogram:{dataPropsChanged:!1},gauge:{valueConversionChanged:!1}};b.common.queryChanged=function(t){const{oldSeries:e,newSeries:i,behaviorAfterLimit:n}=t;let r=!1;return r=!1===iR(aR(e.map((t=>n===lC?t.query:Object.assign(Object.assign({},t.query),{orderByFields:void 0}))),["where","outStatistics[0].outStatisticFieldName","outStatistics[0].onStatisticField"]),aR(i.map((t=>n===lC?t.query:Object.assign(Object.assign({},t.query),{orderByFields:void 0}))),["where","outStatistics[0].outStatisticFieldName","outStatistics[0].onStatisticField"])),r}({oldSeries:d,newSeries:c,behaviorAfterLimit:null===(e=null==s?void 0:s.chartLimits)||void 0===e?void 0:e.behaviorAfterLimit}),b.common.configFiltersChanged=function(t,e){return JSON.stringify(t.dataFilters)!==JSON.stringify(e.dataFilters)}(n,r),b.common.xOrYChanged=function(t,e){let i=!1;if(e[0].x!==t[0].x)i=!0;else{const n=iM(t,0);if(n!==zD&&n!==RD){const n=Math.min(t.length,e.length);for(let r=0;r<n;r+=1)if(t[r].y!==e[r].y){i=!0;break}}}return i}(d,c),b.common.filterBySelectionChanged=function(t,e){return t!==(null==e?void 0:e.filterBySelection)}(a,s),b.common.dataForFilterBySelectionChanged=function(t){var e,i,n,r;const{currentSelectionDataItems:s,currentSelectionOIDs:a,currentSelectionIndexes:o,options:u,chartConfig:l}=t;let h=!1;return!0===(null==u?void 0:u.filterBySelection)&&(h=(null===(e=l.dataSource)||void 0===e?void 0:e.type)===tP?!1===iR(s,null===(i=null==u?void 0:u.selectionData)||void 0===i?void 0:i.selectionItems)||!1===iR(o,null===(n=null==u?void 0:u.selectionData)||void 0===n?void 0:n.selectionIndexes):!1===iR(a,null===(r=null==u?void 0:u.selectionData)||void 0===r?void 0:r.selectionOIDs)),h}({currentSelectionDataItems:u,currentSelectionOIDs:l,currentSelectionIndexes:h,options:s,chartConfig:r});const{queryChanged:g,configFiltersChanged:y,xOrYChanged:w,filterBySelectionChanged:S,dataForFilterBySelectionChanged:x}=b.common;switch(v=!0===g||!0===y||!0===w||!0===S||!0===x,f){case zD:b.histogram.dataPropsChanged=function(t,e){return t[0].binCount!==e[0].binCount}(d,c)||function(t,e){return t[0].dataTransformationType!==e[0].dataTransformationType}(d,c);break;case BD:b.lineChart=function(t){var e;const{oldSeries:i,newConfig:n,oldTimeIntervalInfo:r,setTimeBinningInfoWhenNotProvided:s}=t,a=null===(e=n.series)||void 0===e?void 0:e[0];let o=!1,u=!1,l=!1;if(!0===FM({seriesConfig:a,xAxisValueFormatType:tG(n),setTimeBinningInfoWhenNotProvided:s})){const t=i[0];o=(null==r?void 0:r.timeIntervalSize)!==a.timeIntervalSize||(null==t?void 0:t.timeAggregationType)!==a.timeAggregationType||(null==t?void 0:t.trimIncompleteTimeInterval)!==a.trimIncompleteTimeInterval||(null==t?void 0:t.nullPolicy)!==a.nullPolicy,u=(null==r?void 0:r.timeIntervalUnits)!==a.timeIntervalUnits,l=!0===s&&0===a.timeIntervalSize}return{timeBinningChanged:o,timeIntervalUnitChanged:u,newTimeBinningWillBeCalculated:l}}({oldSeries:d,newConfig:r,oldTimeIntervalInfo:o,setTimeBinningInfoWhenNotProvided:null==s?void 0:s.setTimeBinningInfoWhenNotProvided});case _D:case VD:b.common.numberOfSeriesChanged=function(t,e){return e.length!==t.length}(d,c);break;case RD:b.gauge.valueConversionChanged=function(t,e){var i,n;return JSON.stringify(null===(i=t.series[0])||void 0===i?void 0:i.valueConversion)!==JSON.stringify(null===(n=e.series[0])||void 0===n?void 0:n.valueConversion)}(n,r)}return!0!==b.gauge.valueConversionChanged&&!0!==b.histogram.dataPropsChanged&&!0!==b.lineChart.timeBinningChanged&&!0!==b.lineChart.timeIntervalUnitChanged&&!0!==b.lineChart.newTimeBinningWillBeCalculated&&!0!==b.common.numberOfSeriesChanged||(p=!0),m=!0===i||!0===v||!0===p,{dataUpdateNeeded:m,updateNeededDetails:b}}function _G(t,e){let i=!0;if(void 0!==t&&t.length>1&&!1===oM(e)){let n=0,r=0,s=0;t.forEach((t=>{const i=t[e];!1===function(t){return null!=t&&!1===Number.isNaN(t)&&!0===Number.isFinite(t)}(i)||0===i?s+=1:i>0?n+=1:r+=1})),i=s===t.length||n>=0&&0===r||0===n&&r>=0}return i}function zG(t){const{countTotal:e,countPerSeries:i,numberOfSeries:n}=t;let r;const s=[];return!0===Number.isFinite(e)&&s.push(e),!0===Number.isFinite(i)&&s.push(i*n),s.length>0&&(r=Math.min(...s)),r}function VG(t,e){let i;const{maxBarUniqueSeriesCountTotal:n,maxBarTwoSeriesCountPerSeries:r,maxBarTwoSeriesCountTotal:s,maxBarThreePlusSeriesCountPerSeries:a,maxBarThreePlusSeriesCountTotal:o,maxLineChartMarkersCountTotal:u,maxLineChartSeriesCount:l,maxPieChartSliceCountTotal:h,maxGaugeByFeaturesLimit:c}=DC(e),d=iM(t.series),f=0===t.series.length?1:t.series.length,m=kM(t.series);switch(d){case VD:case _D:1===f?i=n:2===f?i=zG({countTotal:s,countPerSeries:r,numberOfSeries:f}):f>2&&(i=zG({countTotal:o,countPerSeries:a,numberOfSeries:f}));break;case BD:i=zG({countTotal:u,countPerSeries:l,numberOfSeries:f});break;case ND:i=h;break;case RD:i=c}return m!==$C&&m!==qC||void 0===i||(i=Math.ceil(i/f)),i}function GG(t,e,i){let n=null==t?void 0:t.toString();const r=IV(e.type,i);return("number"==typeof t&&e.type===DD||("number"==typeof t||t instanceof Date)&&e.type===PD)&&(n=r.format(t,eG(e))),n}function $G(t){const{chart:e,config:i}=t;let n=i;return void 0===i&&void 0!==e&&(n=HV(e.uid,"config")),function(t){var e,i;let n=!1;if(void 0!==t){const r=iM(t.series);r!==ky&&r!==Ty&&r!==Ay||(n=!0===(null!==(i=null!==(e=t.rotated)&&void 0!==e?e:t.series[0].rotated)&&void 0!==i&&i))}return n}(n)}function WG(t){return"number"==typeof t?t:t.value}function qG(t,e){!1===e&&!1===t.isHiding?(t.visible=!1,t.hide()):!1===t.isShowing&&(t.visible=!0,t.show())}function HG(t){return t.x}function UG(t,e){var i,n,r,s,a,o,u;const l=iM(e)!==ND&&(null===(i=t[0])||void 0===i?void 0:i.stackedType)!==(null===(n=e[0])||void 0===n?void 0:n.stackedType),h=function(t,e){var i,n,r;let s=iM(e)===ND&&void 0!==(null===(i=null==e?void 0:e[0].query)||void 0===i?void 0:i.orderByFields);if(!0===s){const i=null===(n=t[0])||void 0===n?void 0:n.sortLabelsBy,a=null===(r=e[0])||void 0===r?void 0:r.sortLabelsBy;s=i===TP&&i!==a||a===TP&&a!==i}return s}(t,e),[c]=null!==(u=null===(o=null===(a=null===(s=null===(r=e[0])||void 0===r?void 0:r.query)||void 0===s?void 0:s.orderByFields)||void 0===a?void 0:a[0])||void 0===o?void 0:o.split(" "))&&void 0!==u?u:[],d=void 0!==c&&c!==e[0].x&&!0===l||!0===h||!0===function(t,e){var i,n,r,s;const a=null===(n=null===(i=t[0])||void 0===i?void 0:i.query)||void 0===n?void 0:n.orderByFields,o=null===(s=null===(r=e[0])||void 0===r?void 0:r.query)||void 0===s?void 0:s.orderByFields;return JSON.stringify(a)!==JSON.stringify(o)}(t,e);return d}function KG(t){const e=null!=t?t:[0,0,0,255];return new Jm({a:e[3]/255,b:e[2],g:e[1],r:e[0]})}function JG(t){return t.bullets.values.find((t=>qV(t.uid,"isBulletMarker")))}function YG(t){return new FR.exports.Chance(t.uid).guid()}function ZG(t){var e,i;return(null===(e=null==t?void 0:t.dataSource)||void 0===e?void 0:e.type)===tP?null===(i=null==t?void 0:t.dataSource.configFields)||void 0===i?void 0:i.displayLabel:void 0}function XG(t){return null!=t&&!0!==t.isDisposed()}function QG(t){return(!0===t.isShowing||!0===t.visible)&&!1===t.isHidden&&!1===t.isHiding&&!1===t.disabled&&!1===t.__disabled}function t$(t,e){var i,n;return t.pixelX<0||t.pixelX>(null===(i=null==e?void 0:e.plotContainer)||void 0===i?void 0:i.measuredWidth)||t.pixelY<0||t.pixelY>(null===(n=null==e?void 0:e.plotContainer)||void 0===n?void 0:n.measuredHeight)}function e$(t,e){let i=t;if(!0===Number.isFinite(t)){const{factor:t,offset:n}=null!=e?e:{};!0===Number.isFinite(t)&&(i*=t),!0===Number.isFinite(n)&&(i+=n)}return i}function i$(t){let e=NaN;if("number"==typeof t)e=t;else if(t.includes("%")){const i=Number.parseFloat(t.trim().replace("%","").trim());Number.isFinite(i)&&(e=Ad(i))}return e}function n$(t,e){let i,n,r=!0;switch(e){case dD:n=0;break;case fD:n=90;break;case cD:n=45;break;case uD:n=135;break;case hD:case lD:n=0,r=!1}return void 0!==n&&(i=function(t){var e,i,n,r,s,a,o,u,l,h;const{fill:c,rotation:d,isLinePattern:f}=t;let m;return!1!==f?(m=new Qg,m.width=null!==(e=oR.patternLineProperties.width)&&void 0!==e?e:NaN,m.height=null!==(i=oR.patternLineProperties.height)&&void 0!==i?i:NaN,m.strokeWidth=null!==(n=oR.patternLineProperties.strokeWidth)&&void 0!==n?n:NaN,m.stroke=c,m.rotation=null!=d?d:NaN):(m=new ey,m.rectWidth=null!==(r=oR.patternRectProperties.rectWidth)&&void 0!==r?r:NaN,m.rectHeight=null!==(s=oR.patternRectProperties.rectHeight)&&void 0!==s?s:NaN,m.width=null!==(a=oR.patternRectProperties.width)&&void 0!==a?a:NaN,m.height=null!==(o=oR.patternRectProperties.height)&&void 0!==o?o:NaN,m.backgroundOpacity=null!==(u=oR.patternRectProperties.backgroundOpacity)&&void 0!==u?u:NaN,m.fillOpacity=null!==(l=oR.patternRectProperties.fillOpacity)&&void 0!==l?l:NaN,m.strokeWidth=null!==(h=oR.patternRectProperties.strokeWidth)&&void 0!==h?h:NaN,m.fill=KG(oR.color),m.backgroundFill=c,m.rotation=null!=d?d:NaN),m}({fill:t,rotation:n,isLinePattern:r})),i}function r$(t){let e=new Jm({r:0,g:0,b:0,a:0});if(null!=t){const[i,n,r,s]=t;e=new Jm({r:i,g:n,b:r,a:s/255})}return e}function s$(t,e=0){return(null!=t?t:e)%360}function a$(t,e){let i="none";switch(null!=t?t:e){case bD:case pD:i="center";break;case mD:i="left";break;case vD:i="right"}return i}function o$(t,e){let i="middle";switch(null!=t?t:e){case vD:i="left";break;case mD:i="right"}return i}function u$(t,e){let i=wD;switch(null!=t?t:e){case yD:i="bottom";break;case SD:i="top";break;default:i="middle"}return i}function l$(t){var e;const{textSymbol:i,placeholderString:n,format:r,defaults:s}=t,a=function(t){let e="";return void 0!==(null==t?void 0:t.style)&&(e=`font-style:${t.style};`),e}(null==i?void 0:i.font),o=!0===(null==i?void 0:i.kerning)?"letter-spacing:1px;":"";let u=null!==(e=null!=n?n:null==i?void 0:i.text)&&void 0!==e?e:"";if("html"===r){const{wrap:t,maxWidth:e}=null!=s?s:{};u=`<p style="margin:0;${a}${o}${!0===t&&!0===Number.isFinite(e)?`max-width: ${e}; word-break: break-word;`:""}">${u}</p>`}else u=_V(u),""===a&&""===o||(u=`[${a}${o}]${u}[/]`);return u}function h$(t,e){const i=new Eb;return function(t,e){void 0!==e&&(void 0!==e.layout&&(t.layout=e.layout),void 0!==e.width&&(t.width=i$(e.width)),void 0!==e.height&&(t.height=i$(e.height)),void 0!==e.paddingTop&&(t.paddingTop=e.paddingTop),void 0!==e.paddingBottom&&(t.paddingBottom=e.paddingBottom))}(i,t),i.parent=e,i}function c$(t,e){t.disabled=!0===e}function d$(t,e){e.events.on(yR,(()=>{((t,e)=>{var i,n,r,s,a,o,u,l,h;const{chartContainer:c,chartAndLegendContainer:d}=oR,f=HV(t.uid,"config");if(void 0!==f){const m=function(t){var e,i,n,r,s;let a=!1;const o=null===(e=t.legend)||void 0===e?void 0:e.visible,u=null===(n=null===(i=t.legend)||void 0===i?void 0:i.title)||void 0===n?void 0:n.content.text,l=null===(s=null===(r=t.legend)||void 0===r?void 0:r.title)||void 0===s?void 0:s.visible;return a=!1!==o&&!1!==l&&void 0!==u&&u.length>0,a}(f),v=null===(i=f.legend)||void 0===i?void 0:i.position;if(!0===m)switch(v){case KD:t.chartAndLegendContainer.paddingTop=null!==(n=e.bbox.height)&&void 0!==n?n:0,t.chartContainer.paddingBottom=null!==(r=c.paddingBottom)&&void 0!==r?r:0;break;case JD:t.chartContainer.paddingBottom=null!==(s=e.bbox.height)&&void 0!==s?s:0,t.chartAndLegendContainer.paddingTop=null!==(a=d.paddingTop)&&void 0!==a?a:0;break;default:t.chartAndLegendContainer.paddingTop=null!==(o=d.paddingTop)&&void 0!==o?o:0,t.chartContainer.paddingBottom=null!==(u=c.paddingBottom)&&void 0!==u?u:0}else t.chartAndLegendContainer.paddingTop=null!==(l=d.paddingTop)&&void 0!==l?l:0,t.chartContainer.paddingBottom=null!==(h=c.paddingBottom)&&void 0!==h?h:0}})(t,e)}))}function f$(t,e){const i={stroke:r$(),strokeWidth:oR.lineWidth,strokeDasharray:"",strokeLinecap:!0!==e?"round":"square",strokeOpacity:1};return null!=t&&(i.stroke=r$(t.color),i.strokeOpacity=1,void 0!==t.width&&(i.strokeWidth=t.width),void 0!==t.style&&t.style!==tD&&(i.strokeDasharray=function(t,e){var i,n;const r=null!==(i=t)&&void 0!==i?i:eD,s=null!=e?e:oR.lineWidth,a={[eD]:"none",[QF]:[1,s],[XF]:[4*s,s,1,s,1,s],[YF]:[4*s,3*s],[ZF]:[4*s,3*s,1,3*s],[tD]:"none"};return(null!==(n=a[r])&&void 0!==n?n:a[tD]).toString()}(t.style,i.strokeWidth),i.strokeLinecap=function(t,e){return!0!==e||!0===(null==t?void 0:t.includes("Dot"))?"round":"square"}(t.style,e))),i}function m$(t,e){var i,n;let r=t;const[s,a,o,u]=null!==(n=null!==(i=null==t?void 0:t.color)&&void 0!==i?i:e)&&void 0!==n?n:oR.color,l=[s,a,o,u];return null==r?r={type:xD,color:l}:void 0===r.color&&(r.color=l),f$(r,!1)}function v$(t){const{color:e,outline:i,xoffset:n,yoffset:r,style:s,size:a,angle:o}=t,u=void 0!==s?function(t,e){let i="";const n=(null!=e?e:0)/2,r=0-n,s=0+n,a=0-n,o=0+n;switch(t){case iD:i=`M ${r},0 a ${n},${n} 0 1,0 ${2*n},0 a ${n},${n} 0 1,0 ${2*-n},0`;break;case nD:i=`M ${r},0 L ${s},0 M 0,${a} L 0,${o} E`;break;case rD:i=`M ${r},0 L 0,${a} L ${s},0 L 0,${o} L ${r},0 Z`;break;case sD:i=`M ${r},${o} L ${r},${a} L ${s},${a} L ${s},${o} L ${r},${o} Z`;break;case oD:i=`M ${r},${o} L 0,${a} L ${s},${o} L ${r},${o} Z`;break;case aD:i=`M ${r},${o} L ${s},${a} M ${r},${a} L ${s},${o} E`}return i}(s,a):"",l=s$(o);return{path:u,fill:r$(e),outline:m$(i,e),xOffset:null!=n?n:0,yOffset:null!=r?r:0,angle:l}}function p$(t){var e,i;const{symbol:n,defaultToColorFromRamp:r,colorRampIndex:s,isChartFillSymbol:a=!1}=t;let o;if(!0===r){const t=a?.7:1;if(n.color=null!==(e=n.color)&&void 0!==e?e:TC({colorIndex:s,opacity:t}),cM(n)||dM(n)){const{outline:t}=n;void 0!==t&&(t.color=null!==(i=null==t?void 0:t.color)&&void 0!==i?i:TC({colorIndex:s}),n.outline=Object.assign({},t))}}return!function(t){return t.type===gy}(n)?dM(n)?o=v$(n):cM(n)&&(o=function(t){const{color:e,outline:i,style:n}=t,r=r$(e);return{pattern:n$(r,n),fill:r,outline:m$(i,e)}}(n)):o=f$(n,!0),o}function b$(t,e){var i,n,r,s,a,o,u,l,h,c,d,f,m,v,p,b,g;const y=o$(t.horizontalAlignment,null==e?void 0:e.horizontalCenter),w=a$(t.horizontalAlignment,null==e?void 0:e.align),S=u$(t.verticalAlignment,null==e?void 0:e.verticalCenter),x=function(t,e){let i="none";switch(null!=t?t:e){case gD:case wD:i="middle";break;case yD:i="top";break;case SD:i="bottom"}return i}(t.verticalAlignment,null==e?void 0:e.valign);return{fill:r$(t.color),fontFamily:null!==(n=null===(i=t.font)||void 0===i?void 0:i.family)&&void 0!==n?n:"Arial, Helvetica, sans-serif",fontSize:null!==(s=null===(r=t.font)||void 0===r?void 0:r.size)&&void 0!==s?s:oR.generalFontSize,fontWeight:null!==(o=null===(a=t.font)||void 0===a?void 0:a.weight)&&void 0!==o?o:"400",textDecoration:null!==(l=null===(u=t.font)||void 0===u?void 0:u.decoration)&&void 0!==l?l:"none",align:w,valign:x,verticalCenter:S,horizontalCenter:y,text:l$({textSymbol:t}),angle:s$(t.angle,null==e?void 0:e.rotation),xOffset:null!==(c=null!==(h=t.xoffset)&&void 0!==h?h:null==e?void 0:e.dx)&&void 0!==c?c:0,yOffset:null!==(f=null!==(d=t.yoffset)&&void 0!==d?d:null==e?void 0:e.dy)&&void 0!==f?f:0,backgroundFill:r$(t.backgroundColor),borderFill:r$(t.borderLineColor),borderWidth:null!==(m=t.borderLineSize)&&void 0!==m?m:1,haloSize:null!==(v=t.haloSize)&&void 0!==v?v:-1,haloColor:r$(t.haloColor),rtl:null!==(p=t.rightToLeft)&&void 0!==p?p:vC().rtl,wrap:null!==(b=null==e?void 0:e.wrap)&&void 0!==b&&b,maxWidth:null!==(g=null==e?void 0:e.maxWidth)&&void 0!==g?g:NaN}}function g$(t,e){void 0!==e&&(void 0!==e.marginBottom&&(t.marginBottom=e.marginBottom),void 0!==e.marginTop&&(t.marginTop=e.marginTop),void 0!==e.marginRight&&(t.marginRight=e.marginRight),void 0!==e.marginLeft&&(t.marginLeft=e.marginLeft),void 0!==e.verticalCenter&&(t.verticalCenter=u$(e.verticalCenter)),void 0!==e.horizontalCenter&&(t.horizontalCenter=o$(e.horizontalCenter)),void 0!==e.strokeWidth&&(t.strokeWidth=e.strokeWidth),void 0!==e.wrap&&(t.wrap=e.wrap),void 0!==e.truncate&&(t.truncate=e.truncate),void 0!==e.maxWidth&&(t.maxWidth=e.maxWidth),void 0!==e.applyOnClones&&(t.applyOnClones=e.applyOnClones,t.background.applyOnClones=e.applyOnClones))}function y$(t,e){var i;const n=null!==(i=null==e?void 0:e.createChild(Yb))&&void 0!==i?i:new Yb;return g$(n,t),n}function w$(t,e,i){if(i.alpha>0&&e>=0){0===t.length&&function(t){const e=t.push(new Ig);e.dx=1,e.dy=1,e.opacity=1}(t);const n=t.getIndex(0);n.blur=e,n.color=i}else t.clear()}function S$(t,e,i){if(void 0!==e){const n=b$(e.content,i);t.fill=n.fill,t.fontFamily=n.fontFamily,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.textDecoration=n.textDecoration,t.align=n.align,t.valign=n.valign,t.verticalCenter=n.verticalCenter,t.horizontalCenter=n.horizontalCenter,t.text=n.text,t.background.fill=n.backgroundFill,t.background.stroke=n.borderFill,t.background.strokeWidth=n.borderWidth,t.rotation=n.angle,t.dx=n.xOffset,t.dy=n.yOffset,t.rtl=n.rtl,t.wrap=n.wrap,t.maxWidth=n.maxWidth,w$(t.filters,n.haloSize,n.haloColor);const r=function(t,e){const i=XV(t.uid,"isGuide");let n=!1===e.visible;return!1!==n||!0!==i&&t instanceof PA==1||""===e.content.text&&(n=!0),n}(t,e);t.disabled=r,qG(t,!1!==e.visible&&!1===r)}else t.disabled=!0}function x$(t,e){const{title:i,subTitle:n,headerContainer:r}=t;S$(i,null==e?void 0:e.title,oR.titleLabel),S$(n,null==e?void 0:e.subTitle,oR.titleLabel),c$(r,i.disabled&&n.disabled),zV({chart:i.parent,label:i,labelType:PV}),zV({chart:n.parent,label:n,labelType:LV})}function C$(t,e){const{footer:i,footerContainer:n}=t;S$(i,e,oR.footer),c$(n,i.disabled||""===(null==e?void 0:e.content.text)),zV({chart:i.parent,label:i,labelType:EV})}function O$(t,e){void 0!==e&&(t!==_D&&t!==BD&&t!==zD||e.adapter.add("dy",((t,e)=>{const i=e.dataItem,{chart:n}=null==i?void 0:i.component;return e.visible=!1===t$(e,n),t})))}function M$(t,e){void 0!==e&&(t===_D&&e.adapter.add("dx",((t,e)=>{var i;let n=t;const r=e.dataItem,{chart:s}=null==r?void 0:r.component;if(!0===(void 0!==s&&HV(s.uid,"isRotated"))){(null!==(i=r.valueX)&&void 0!==i?i:r.valueY)<0&&(n-=e.measuredWidth+oR.dataLabelNegative.paddingRight)}return n})),t!==_D&&t!==BD||e.adapter.add("dy",((t,e)=>{var i;let n=t;const r=e.dataItem,{chart:s}=null==r?void 0:r.component;if(!0!==(void 0!==s&&HV(s.uid,"isRotated"))){(null!==(i=r.valueX)&&void 0!==i?i:r.valueY)<0&&(n+=e.measuredHeight+oR.dataLabelNegative.paddingTop)}return n})))}function T$(t){var e;t.bulletsContainer.invalidateLabels(),t instanceof Hj&&(null===(e=t.columns)||void 0===e||e.template.invalidateLabels())}function k$(t){const{dataValue:e,series:i,seriesType:n,stackedType:r,axisMin:s}=t;let a=void 0===e;return void 0!==e&&(void 0!==s&&e<s?a=!0:i instanceof Hj&&(n===_D||n===VD)&&(a=0===e&&void 0!==r&&r!==YD)),a}function I$(t,e){let i;const n=t=>{var e;return null!==(e=XV(t.uid,"isDataLabel"))&&void 0!==e&&e};return"bullets"===e?i=t.bullets.values.find(n):t instanceof Hj&&(i=t.columns.template.children.values.find(n)),i}function A$(t,e){t.adapter.add("htmlOutput",((t,i)=>{var n,r,s,a,o,u;let l=t;const{dataItem:h}=i;if(!0===QG(i)&&(e instanceof Hj&&h instanceof qj||e instanceof rj&&h instanceof nj)){const t=KV(e.uid,e instanceof Hj?"barSeriesDataLabelFormatter":"lineSeriesDataLabelFormatter");if(void 0!==t){const i=HV(e.chart.uid,"isRotated"),c=KV(e.uid,"stackedType"),d=!0===i?h.valueX:h.valueY,f=!0===i?null===(r=null===(n=h.values)||void 0===n?void 0:n.valueX)||void 0===r?void 0:r.totalPercent:null===(a=null===(s=h.values)||void 0===s?void 0:s.valueY)||void 0===a?void 0:a.totalPercent,m=!0===i?(null===(o=h.component)||void 0===o?void 0:o.xAxis).min:(null===(u=h.component)||void 0===u?void 0:u.yAxis).min;l=!0===k$({dataValue:d,series:e,seriesType:e instanceof Hj?_D:BD,stackedType:c,axisMin:m})?"":t(d,f)}}return hM(l)}),0)}function j$(t){const{numberFormatter:e,dataLabelsConfigContent:i,stackedType:n}=t;return(t,r)=>{let s=n===XD&&void 0!==r?r:t;return"percent"===e.numberFormat.style&&(s/=100),l$({textSymbol:Object.assign(Object.assign({},i),{text:e.format(s)}),format:"html"})}}function F$(t){var e;const{series:i,seriesType:n,dataLabel:r,labelDefaults:s,dataLabelsConfig:a,yAxisValueFormat:o,stackedType:u,isRotated:l,defaultDataLabelFormatter:h,customDataLabelFormatter:c}=t;if(void 0!==r){let t=c;const d=null!==(e=null==a?void 0:a.content)&&void 0!==e?e:{type:MD};if(void 0===c&&void 0!==h&&(null==o?void 0:o.type)===DD){const e=IV(o.type,i.chart.language.locale);e.numberFormat=o.intlOptions,t=h({numberFormatter:e,dataLabelsConfigContent:d,stackedType:u})}let f;switch(n){case _D:f="barSeriesDataLabelFormatter";break;case BD:f="lineSeriesDataLabelFormatter";break;case zD:f="histogramDataLabelFormatter";break;case ED:f="scatterPlotDataLabelFormatter"}void 0!==f&&JV(i.uid,{[f]:t}),void 0!==a&&(a.content.text=!0===l?"{valueX}":"{valueY}",a.visible=!1!==a.visible),S$(r,a,null!=s?s:oR.dataLabel),T$(i)}}function D$(t){return(null!=t?t:"sideBySide")===YD}function P$(t,e){let i,n;const r=I$(t,"bullets"),s=I$(t,"columns"),a=D$(e);return!0===a&&void 0!==r?(i=r,n=s):!1===a&&(i=s,n=r),{labelToRender:i,labelToHide:n}}function L$(t){const{series:e,stackedType:i,isRotated:n}=t;let{labelToRender:r,labelToHide:s}=P$(e,i);if(void 0===r){const{newLabelToRender:t,newLabelToHide:n}=function(t,e){let i,n;const r=y$(oR.dataLabelInitialize);QV(r.uid,{isDataLabel:!0}),t.bullets.push(r);const s=y$(oR.dataLabelInitialize,t.columns.template);return QV(s.uid,{isDataLabel:!0}),A$(s,t),A$(r,t),t.events.on(wR,QN((()=>{!0===QG(s)&&s.clones.each((t=>{!0===QG(t)&&t.validate()}))}),oR.debounceTime)),s.html="{valueX}",r.html="{valueX}",!0===D$(e)?(i=r,n=s):(i=s,n=r),O$(_D,r),M$(_D,i),{newLabelToRender:i,newLabelToHide:n}}(e,i);r=t,s=n}let a=oR.dataLabel;a=!1===D$(i)?!0===n?oR.dataLabelStackedRotated:oR.dataLabelStackedNonRotated:!0===n?oR.dataLabelRotated:oR.dataLabel,void 0!==s&&(s.visible=!1,s.disabled=!0),r.html="{valueX}",F$(Object.assign(Object.assign({},t),{dataLabel:r,labelDefaults:a,defaultDataLabelFormatter:j$,seriesType:_D}))}const E$={DataProcessComplete:"arcgisChartsJSDataProcessComplete",LegendItemVisibilityChange:"arcgisChartsJSLegendItemVisibilityChange",UpdateComplete:"arcgisChartsJSUpdateComplete",RenderingComplete:"arcgisChartsJSRenderingComplete",SelectionChange:"arcgisChartsJSSelectionChange",SeriesColorsChange:"arcgisChartsJSSeriesColorChange",AxesMinMaxChange:"arcgisChartsJSAxesMinMaxChange",SelectionComplete:"arcgisChartsJSSelectionComplete",TooManySelectedElements:"arcgisChartsJSTooManySelectedElements",BadDataWarningRaise:"arcgisChartsJSBadDataWarningRaise"};function N$(t){return{detail:t,composed:!0,cancelable:!0,bubbles:!0}}function R$(t){const{data:e,seriesConfig:i,htmlContainer:n}=t;if(void 0!==n&&void 0!==e){const t=DG({data:e,seriesConfig:i});n.dispatchEvent(new window.CustomEvent(E$.DataProcessComplete,N$(t)))}}function B$(t,e){void 0!==e&&e.dispatchEvent(new window.CustomEvent(E$.UpdateComplete,N$(t)))}function _$(t){void 0!==t&&t.dispatchEvent(new window.CustomEvent(E$.RenderingComplete,N$()))}function z$(t){const{data:e,seriesConfig:i,htmlContainer:n}=t;if(void 0!==n){const t=e;let r=ON(e.selectionItems);void 0!==r&&(r=jG(r,i),r=r.map(FG),r=AG(r,i),t.selectionItems=r),n.dispatchEvent(new window.CustomEvent(E$.SelectionComplete,N$(t)))}}function V$(t,e){void 0!==e&&e.dispatchEvent(new window.CustomEvent(E$.SeriesColorsChange,N$(t)))}function G$(t){const e=function(t){const e=new Eb;return e.width=Ad(100),e.height=Ad(100),e.background.fill=r$(oR.loaderBackground),e.parent=t,e}(t);!function(t){const e=new Yb;e.valign=wD,e.align=pD,e.fontSize=oR.loaderLabelFontSize,e.dy=40,e.text="",e.parent=t}(e);return{loaderPolygon:function(t){const e=new bg;return e.parent=t,e.align=pD,e.valign=wD,e.path="M2.2 16A13.81 13.81 0 0 1 14 2.362v1.01a12.8 12.8 0 1 0 4 0v-1.01A13.792 13.792 0 1 1 2.2 16z",e.stroke=Ym("#007ac2"),e.strokeWidth=2,e}(e),loaderContainer:e,closeLoaderButton:function(t){const e=new Xb;return e.parent=t,e.align="right",e.marginRight=4,e.icon=new Pb,e.icon.path="M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",e}(e)}}function $$(t){let e,i,n,r;if(void 0!==t.preloader&&(t.preloader.disabled=!0),void 0!==t.tooltipContainer){const r=G$(t.tooltipContainer);e=r.loaderContainer,i=r.loaderPolygon,n=r.closeLoaderButton}function s(){void 0!==r&&(window.clearInterval(r),r=void 0),void 0!==e&&(qG(e,!1),t instanceof QA&&(t.zoomOutButton.disabled=!1))}return s(),void 0!==n&&n.events.on(cR,(()=>{s()})),{hideLoader:s,showLoader:function(n){var s;!0===n&&(void 0===r&&void 0!==i&&(s=i,r=window.setInterval((()=>{s.animate({from:0,to:360,property:"rotation"},oR.loaderRotationSpeed)}),oR.loaderIntervalTimeout)),void 0!==e&&(qG(e),t instanceof QA&&(t.zoomOutButton.disabled=!0)))}}}function W$(t){return t.values.every((t=>t.isReady()))}function q$(t,e){t.events.on(uR,(()=>{void 0!==t.chart&&!0===W$(t.chart.series)&&(e(),_$(t.chart.htmlContainer))}))}const H$="custom-active",U$="custom-inactive",K$="default",J$="active",Y$="_esriFillColor",Z$="_esriFillOpacity",X$="_esriFillStyle",Q$="_esriLineColor",tW="_esriLineOpacity",eW="_esriLineWidth",iW="_esriLineStyle",nW="_esriOutline",rW="_esriOutlineWidth",sW="_esriOutlineOpacity",aW="_esriOutlineStyle",oW="_esriMarkerSize";function uW(t){var e,i,n,r,s,a,o,u,l,h,c,d;const{y:f,keys:m}=t;let v="";return void 0!==f&&(v=`_${f}`),{fillColor:`${null!==(e=null==m?void 0:m.fillColor)&&void 0!==e?e:Y$}${v}`,fillOpacity:`${null!==(i=null==m?void 0:m.fillOpacity)&&void 0!==i?i:Z$}${v}`,fillStyle:`${null!==(n=null==m?void 0:m.fillStyle)&&void 0!==n?n:X$}${v}`,lineColor:`${null!==(r=null==m?void 0:m.lineColor)&&void 0!==r?r:Q$}${v}`,lineOpacity:`${null!==(s=null==m?void 0:m.lineOpacity)&&void 0!==s?s:tW}${v}`,lineWidth:`${null!==(a=null==m?void 0:m.lineWidth)&&void 0!==a?a:eW}${v}`,lineStyle:`${null!==(o=null==m?void 0:m.lineStyle)&&void 0!==o?o:iW}${v}`,outlineColor:`${null!==(u=null==m?void 0:m.outlineColor)&&void 0!==u?u:nW}${v}`,outlineWidth:`${null!==(l=null==m?void 0:m.outlineWidth)&&void 0!==l?l:rW}${v}`,outlineOpacity:`${null!==(h=null==m?void 0:m.outlineOpacity)&&void 0!==h?h:sW}${v}`,outlineStyle:`${null!==(c=null==m?void 0:m.outlineStyle)&&void 0!==c?c:aW}${v}`,markerSize:`${null!==(d=null==m?void 0:m.markerSize)&&void 0!==d?d:oW}${v}`}}function lW(t,e=!1,i){let n;if(!0===e?n=i:void 0!==t.defaultSymbol.color&&(n=t.defaultSymbol.color.toRgba()),void 0!==n){const[t,e,i]=n;n=[t,e,i,178.5]}return n}function hW(t){const{series:e,layer:i,queryType:n,mapRendererColorToSeries:r}=t;if(void 0!==(null==i?void 0:i.renderer)){const t=i.renderer.type,s=iM([e]);switch(t){case TD:!function(t){var e,i,n,r;const{flRenderer:s,series:a,queryType:o,seriesType:u,mapRendererColorToSeries:l}=t;if(void 0!==o&&(u===_D||u===BD||u===ND)){const{rendererField:t}=mM(s);if(o===GC){if(a.x===t){if(void 0!==s.defaultSymbol&&null!==s.defaultSymbol){const t=lW(s);void 0!==t&&l.set(oR.rendererOtherValue,t)}s.uniqueValueInfos.forEach((t=>{var e,i;const n=lW(s,!0,null===(i=null===(e=t.symbol)||void 0===e?void 0:e.color)||void 0===i?void 0:i.toRgba());void 0!==n&&l.set(rM({value:`${t.value}`}),n)}))}}else if(o===WC){const o=CM(null===(e=a.query)||void 0===e?void 0:e.where),u=OM({where:null===(i=a.query)||void 0===i?void 0:i.where});if(o===t){const t=s.uniqueValueInfos.find((t=>rM({value:`${t.value}`})===u)),e=null!==(n=null==t?void 0:t.symbol)&&void 0!==n?n:s.defaultSymbol;if(void 0!==e){const t=lW(s,!0,null===(r=e.color)||void 0===r?void 0:r.toRgba());void 0!==t&&l.set(a.id,t)}}}}}({flRenderer:i.renderer,series:e,queryType:n,seriesType:s,mapRendererColorToSeries:r});break;case kD:s===ND||void 0!==n&&n!==GC||function(t){var e,i;const{flRenderer:n,series:r,mapRendererColorToSeries:s}=t;let a;const o=null===(i=null===(e=n.symbol)||void 0===e?void 0:e.color)||void 0===i?void 0:i.toRgba();if(null!=o){const[t,e,i]=o;a=[t,e,i,178.5]}void 0!==a&&s.set(r.id,a)}({flRenderer:i.renderer,series:e,mapRendererColorToSeries:r});break;case ID:!0!==LM([e])&&(s!==_D&&s!==BD&&s!==VD||n!==qC&&n!==GC)||function(t){const{flRenderer:e,mapRendererColorToSeries:i}=t;e.attributes.forEach((t=>{const{field:e,color:n}=t;i.set(rM({value:`${e}`}),null==n?void 0:n.toRgba())}))}({flRenderer:i.renderer,mapRendererColorToSeries:r})}}}function cW(t){return yd(this,void 0,void 0,(function*(){let e;try{const i=yield qn(t);e=null==i?void 0:i.toJSON(),void 0!==e&&(e[3]=178.5)}catch(t){}return e}))}function dW(t){const{element:e,seriesConfig:i,mapRendererColorToSeries:n,rendererInfo:r,rendererElementColor:s}=t,{rendererType:a,rendererField:o}=null!=r?r:{},u=iM([i]),l=kM([i]);let h;return void 0!==s?h=s:void 0===n||a!==TD&&a!==kD&&a!==ID||u!==_D&&u!==zD&&u!==BD&&u!==ND||(h=a===ID?function(t){var e,i,n,r,s,a,o,u,l;const{element:h,mapRendererColorToSeries:c}=t;let d="";if(h instanceof yg)d=kG({value:"",dataContext:null===(e=h.dataItem)||void 0===e?void 0:e.dataContext,specificField:oR.originalCategoryValue});else{const t=null===(i=h.dataItem)||void 0===i?void 0:i.component;if(t instanceof Hj||t instanceof rj){const e=HV(t.chart.uid,"config");d=null!==(u=null===(o=null===(a=null===(s=null===(r=null===(n=null==e?void 0:e.series)||void 0===n?void 0:n.find((e=>e.id===t.id)))||void 0===r?void 0:r.query)||void 0===s?void 0:s.outStatistics)||void 0===a?void 0:a[0])||void 0===o?void 0:o.onStatisticField)&&void 0!==u?u:""}}return null!==(l=c.get(rM({value:`${d}`})))&&void 0!==l?l:c.get(oR.rendererOtherValue)}({element:e,mapRendererColorToSeries:n}):void 0!==l&&l!==GC||!1!==oM(o)?function(t){const{seriesId:e,mapRendererColorToSeries:i}=t;return i.get(e)}({seriesId:i.id,mapRendererColorToSeries:n}):function(t){var e,i,n;const{element:r,mapRendererColorToSeries:s,rendererField:a}=t;let o;const u=null===(e=r.dataItem)||void 0===e?void 0:e.dataContext;if(void 0!==u){const t=kG({value:null!==(i=u[oR.originalCategoryValue])&&void 0!==i?i:u[a],dataContext:u,specificField:r.baseSprite instanceof Oj?oR.typeOrDomainIdValue:u[oR.typeOrDomainFieldName]});"number"!=typeof t&&"string"!=typeof t||(o=null!==(n=s.get(rM({value:`${t}`})))&&void 0!==n?n:s.get(oR.rendererOtherValue))}return o}({element:e,mapRendererColorToSeries:n,rendererField:o})),h}function fW(t,e){var i,n,r,s;if(null!=e)if(Array.isArray(e)){if(e.length>=3&&"number"==typeof e[0]&&Number.isFinite(e[0])){const[r,s,a]=e,o=4===e.length?e[3]:null!==(n=null===(i=null==t?void 0:t.color)||void 0===i?void 0:i[3])&&void 0!==n?n:255;t.color=[r,s,a,o]}}else if("string"==typeof e){const i=Ym(e).rgb;if(void 0!==i){const{r:e,g:n,b:a}=i,o=void 0!==i.a?255*i.a:null!==(s=null===(r=null==t?void 0:t.color)||void 0===r?void 0:r[3])&&void 0!==s?s:255;t.color=[e,n,a,o]}}}function mW(t){var e;const{currentSymbol:i,dataKeys:n,dataItem:r,seriesIndex:s}=t;let a=ON(i);if(void 0===a.color&&(a.color=TC({colorIndex:s})),a=function(t){const{dataKeys:e,dataItem:i,currentSymbol:n}=t,r=Object.assign({},n);void 0!==e.fillColor&&fW(r,i[e.fillColor]);const s=e.fillOpacity;if(void 0!==s){const t=i[s];"number"==typeof t&&Number.isFinite(t)&&void 0!==(null==r?void 0:r.color)&&(r.color[3]=t)}return r}({dataKeys:n,dataItem:r,currentSymbol:a}),a.type!==xD&&(a.outline=function(t){const{dataKeys:e,dataItem:i,outline:n}=t,r=Object.assign({},n);if(void 0!==e.outlineColor&&fW(r,i[e.outlineColor]),void 0!==e.outlineWidth){const t=i[e.outlineWidth];"number"==typeof t&&Number.isFinite(t)&&(r.width=t)}if(void 0!==e.outlineOpacity){const t=i[e.outlineOpacity];"number"==typeof t&&Number.isFinite(t)&&void 0!==r.color&&(r.color[3]=t)}return r}({dataKeys:n,dataItem:r,outline:null!==(e=a.outline)&&void 0!==e?e:{type:xD}})),void 0!==n.markerSize&&i.type===CD){const t=r[n.markerSize];"number"==typeof t&&Number.isFinite(t)&&(a.size=t)}return a}function vW(t){var e,i,n;const{element:r,y:s,seriesSymbol:a,seriesConfig:o,dataSource:u,seriesIndex:l}=t,{configFields:h}=u;let c;switch(iM([o])){case ED:case _D:case BD:case ND:c=null===(e=r.dataItem)||void 0===e?void 0:e.dataContext;break;case zD:c=null===(n=null===(i=r.dataItem)||void 0===i?void 0:i.dataContext)||void 0===n?void 0:n.symbol}const d=function(t){const{configFields:e,dataItem:i,currentSymbol:n,y:r,seriesIndex:s}=t;let a=Object.assign({},n);void 0!==e&&void 0!==i&&(a=mW({currentSymbol:n,dataKeys:uW({y:r,keys:e}),dataItem:i,seriesIndex:s}));return a}({y:s,configFields:h,dataItem:c,seriesIndex:l,currentSymbol:a});if(void 0===d.color){const t=TC({colorIndex:l,opacity:1});d.color=t}return d}function pW(t,e,i){void 0!==i&&void 0!==t.tooltip&&(t.tooltip.getFillFromObject=!1,t.tooltip.background.fill=e),t.fill=null!=i?i:e,t.fillOpacity=1}function bW(t,e){t.stroke=e.stroke,t.strokeOpacity=1,t.strokeDasharray=e.strokeDasharray,t.strokeLinecap=e.strokeLinecap,t.strokeWidth=e.strokeWidth}function gW(t){var e;const{element:i,markerSymbol:n,visible:r,defaultToColorFromRamp:s,colorRampIndex:a}=t;let o;return void 0!==n?(o=p$({symbol:Object.assign(Object.assign({},n),{size:null!==(e=i.minWidth)&&void 0!==e?e:n.size}),defaultToColorFromRamp:s,colorRampIndex:a}),void 0!==o&&(i.path=o.path,i.rotation=o.angle,i.dx=o.xOffset,i.dy=o.yOffset,pW(i,o.fill),bW(i,o.outline)),qG(i,r),i.disabled=!1===r):i.disabled=!0,o}function yW(t){const{element:e,lineSymbol:i,visible:n,defaultToColorFromRamp:r,colorRampIndex:s}=t;let a;return void 0!==i?(a=p$({symbol:i,defaultToColorFromRamp:r,colorRampIndex:s}),void 0!==a&&bW(e,a),qG(e,n)):qG(e,!1),a}function wW(t){const{element:e,fillSymbol:i,visible:n,defaultToColorFromRamp:r,colorRampIndex:s,isChartFillSymbol:a}=t;let o;return void 0!==i?(o=p$({symbol:i,defaultToColorFromRamp:r,colorRampIndex:s,isChartFillSymbol:a}),void 0!==o&&(pW(e,o.fill,o.pattern),bW(e,o.outline)),e.disabled=!1===n):e.disabled=!0,o}function SW(t){const{element:e,seriesConfig:i,dataSource:n,seriesIndex:r,seriesSymbol:s,isChartFillSymbol:a}=t;let o,u;if(i.colorType===qD)if(n.type===eP){const e=dW(t);void 0!==e&&(o=function(t){var e;const{symbol:i,color:n,colorIndex:r}=t,s=i,a=i.type!==xD;let[o,u,l,h]=TC({colorIndex:r});h*=.7;let[c,d,f,m]=[void 0,void 0,void 0,void 0];if(!0===a){const t=null===(e=s.outline)||void 0===e?void 0:e.color;void 0!==t&&([c,d,f,m]=t)}null!=n?([o,u,l,h]=n,[c,d,f]=n,h=178.5):void 0!==s.color&&([o,u,l,h]=s.color);let v=Object.assign(Object.assign({},s),{color:[o,u,l,h]});return!0===a&&(v=Object.assign(Object.assign({},v),{outline:Object.assign(Object.assign({},v.outline),{type:xD,color:[null!=c?c:o,null!=d?d:u,null!=f?f:l,null!=m?m:255]})})),v}({color:e,symbol:s,colorIndex:r}))}else o=vW(t);const l={element:e,defaultToColorFromRamp:!0,colorRampIndex:r},h=null!=o?o:Object.assign({},s);switch(s.type){case xD:u=yW(Object.assign(Object.assign({},l),{lineSymbol:h}));break;case OD:u=wW(Object.assign(Object.assign({},l),{fillSymbol:h,isChartFillSymbol:a}));break;case CD:u=gW(Object.assign(Object.assign({},l),{markerSymbol:h}))}return{symbolWithColorInfo:h,stylingInfo:u}}function xW(t,e){var i;if(void 0!==e){const n=t.properties,{elementColor:r,elementOutlineColor:s,elementOutlineWidth:a,rotation:o,transformation:u}=e,{opacity:l,scale:h}=null!=u?u:{};void 0!==r&&(n.fill=KG(r),n.fillOpacity=1),void 0!==s&&(n.stroke=KG(s)),void 0!==a&&(n.strokeWidth=a),void 0!==o&&(n.rotation=o),void 0!==h&&(n.scale=h),void 0!==l&&(n.fillOpacity=(null!==(i=n.fillOpacity)&&void 0!==i?i:1)*l,void 0!==n.strokeOpacity&&(n.strokeOpacity*=l))}}function CW(t){var e,i,n;const{element:r,customSelectionTheme:s,useNativeState:a}=t,o=!0===a?J$:H$,u=null!==(e=r.states.getKey(o))&&void 0!==e?e:r.states.create(o),l=null!==(i=r.states.getKey(U$))&&void 0!==i?i:r.states.create(U$),{selectedElementsTheme:h,nonSelectedElementsTheme:c}=null!==(n=null!=s?s:oR.selectionTheme)&&void 0!==n?n:{};xW(u,h),xW(l,c)}function OW(t){var e;const{element:i,selected:n,multiSelect:r,isDateOrCategoryAxis:s,useNativeState:a,backToDefaultState:o}=t;if(void 0!==i){let t=i.isActive;t=!0!==r?!0===s?!0!==i.isActive&&i.isActive!==n:n:i.isActive!==n,t!==i.isActive&&(i.isActive=t);const e=!0===a?J$:H$,u=!0===o?K$:U$;i.setState(!0===i.isActive?e:u,0)}return null!==(e=null==i?void 0:i.isActive)&&void 0!==e&&e}function MW(t){var e,i,n,r,s;let a=!1;const o=(null==t?void 0:t.target)instanceof PA?null===(n=null===(i=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.dataItem)||void 0===i?void 0:i.component)||void 0===n?void 0:n.chart:null==t?void 0:t.target;if(o instanceof QA||o instanceof Oj){const e=HV(o.uid,"actionMode");void 0!==e&&(a=e===cA||e===dA&&(!0===(null===(r=null==t?void 0:t.event)||void 0===r?void 0:r.ctrlKey)||!0===(null===(s=null==t?void 0:t.event)||void 0===s?void 0:s.metaKey)))}return a}function TW(t){const e=t instanceof QA&&!0===t.zoomOutButton.isHover,i=!0===t.legend.isHover;let n=!1,r=!1,s=!1;return t instanceof QA&&(n=t.xAxes.values.some((t=>t.renderer.labels.template.events.has(cR)&&t.renderer.isHover)),r=t.yAxes.values.some((t=>t.renderer.labels.template.events.has(cR)&&t.renderer.isHover)),s=!0===n||!0===r),!1===e&&!1===i&&!1===s}function kW(t){let e=t;const i=t.toString().split(".");if(void 0!==i[1]){const n=i[1].length;e=t-Math.pow(10,-n)}return e}function IW(t){let e="field";switch(t){case $D:e="natural-log";break;case WD:e="square-root"}return e}function AW(t){return yd(this,void 0,void 0,(function*(){const{queryConfig:e,chartConfig:i,queryObject:n,abortKey:r}=t,s=i.series[0],{x:a,dataTransformationType:o}=s;const{countIncludingNulls:u,countExcludingNulls:l,min:h,max:c}=yield function(t){var e,i,n,r;return yd(this,void 0,void 0,(function*(){const{queryObject:s,fieldName:a,queryConfig:o,abortKey:u}=t,l=SM(yield yM(s)),h=`${_F}_${l}`,c=`${_F}_${a}`,d=`${VF}_${a}`,f=`${GF}_${a}`,m=Object.assign(Object.assign({},o),{outStatistics:[{statisticType:_F,onStatisticField:l,outStatisticFieldName:h},{statisticType:_F,onStatisticField:a,outStatisticFieldName:c},{statisticType:VF,onStatisticField:a,outStatisticFieldName:d},{statisticType:GF,onStatisticField:a,outStatisticFieldName:f}]}),v=yield XM({queryObject:s,queryConfig:m,abortKey:u}),p=null!==(e=v.get(h))&&void 0!==e?e:NaN;return{countExcludingNulls:null!==(i=v.get(c))&&void 0!==i?i:NaN,countIncludingNulls:p,min:null!==(n=v.get(d))&&void 0!==n?n:NaN,max:null!==(r=v.get(f))&&void 0!==r?r:NaN}}))}({queryObject:n,queryConfig:e,fieldName:a,abortKey:r}),d=OT(o,h),f=l<2||h===c,m=Object.assign({},e);return m.where=VM([m.where,`${a} is not null`]),{rawData:[],dataCompatibleWithTransformation:d,dataCountIncompatible:f,countExcludingNulls:l,countIncludingNulls:u}}))}function jW(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{chartConfig:r,queryConfig:s,rawData:a,queryObject:o,countExcludingNulls:u,countIncludingNulls:l,options:h}=t,c=r.series[0],{dataTransformationType:d}=c;let f={valid:!0};if(void 0!==o){const t=gM(o),r=null===(i=null===(e=$M(null==s?void 0:s.geometry))||void 0===e?void 0:e.extent)||void 0===i?void 0:i.toJSON(),m=void 0!==r,v=null!==(n=null==h?void 0:h.view)&&void 0!==n?n:function(t){const e=new Vs({layers:[]});return new cd({map:e,extent:t})}(r),p=function(t){const{seriesConfig:e,rawData:i,layer:n,useFeaturesInView:r,view:s,queryConfig:a}=t,{x:o,dataTransformationType:u}=e;let l={layer:n,view:s,field:o,sqlWhere:a.where,useFeaturesInView:r};return u!==GD&&(l=Object.assign(Object.assign({},l),{normalizationType:IW(u)})),l}({seriesConfig:c,rawData:a,layer:t,view:v,useFeaturesInView:m,queryConfig:s}),b=new Ae({geometry:v.extent});if(void 0!==v.extent&&!0===PM(t)){const{distance:t,units:e}=s;void 0!==t&&(b.distance=t),void 0!==e&&(b.units=e)}let g;p.filter=b;try{g=yield gd(p)}catch(t){const e=yield AV();throw new YM(KM,e.errors.queryError,t)}g=function(t){var e,i,n,r,s,a,o,u;const l=Object.assign({},t);return l.avg=null!==(e=l.avg)&&void 0!==e?e:NaN,l.count=null!==(i=l.count)&&void 0!==i?i:NaN,l.max=null!==(n=l.max)&&void 0!==n?n:NaN,l.min=null!==(r=l.min)&&void 0!==r?r:NaN,l.stddev=null!==(s=l.stddev)&&void 0!==s?s:NaN,l.sum=null!==(a=l.sum)&&void 0!==a?a:NaN,l.variance=null!==(o=l.variance)&&void 0!==o?o:NaN,l.median=null!==(u=l.median)&&void 0!==u?u:NaN,l}(g);const{avg:y,count:w,stddev:S,min:x,max:C,sum:O,median:M}=g;if(0===w)f=Object.assign({},MT(d));else{const e=function(t){const{seriesConfig:e,rawData:i,layer:n,useFeaturesInView:r,view:s,minValue:a,maxValue:o,valueExpression:u,queryConfig:l}=t,{x:h,binCount:c,dataTransformationType:d}=e;let f={layer:n,view:s,field:h,minValue:a,maxValue:o,numBins:null!=c?c:32,classificationMethod:"equal-interval",sqlWhere:l.where,useFeaturesInView:r};return d!==GD&&(f=Object.assign(Object.assign({},f),{normalizationType:IW(d)})),f}({seriesConfig:c,layer:t,view:v,useFeaturesInView:m,rawData:a,minValue:kW(x),maxValue:C,valueExpression:p.valueExpression,queryConfig:s});let i;e.filter=b;try{i=yield Is(e)}catch(t){const e=yield AV();throw new YM(KM,e.errors.queryError,t)}const n=function(t,e){let i=NaN;return void 0!==t&&void 0!==e&&(i=t-e),i}(l,u);f.data={mean:y,stddev:S,min:x,max:C,median:M,bins:null==i?void 0:i.bins,count:u,nulls:n,sum:O}}}return f}))}function FW(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryConfig:i,queryObject:n,options:r,abortKey:s}=t,{dataSource:a,series:o}=e,u=o[0],{rawData:l,dataCompatibleWithTransformation:h,dataCountIncompatible:c,countIncludingNulls:d,countExcludingNulls:f}=a.type===tP?function(t,e){const{x:i,dataTransformationType:n}=e,r=t.length,{transformedData:s,nonNullCount:a,min:o}=function(t){const{field:e,data:i,transformation:n}=t;let r=0,s=Number.MAX_SAFE_INTEGER;const a=[...i];for(let t=0;t<a.length;t+=1){let i=a[t][e];"number"==typeof i&&(s=Math.min(s,i),i=kT(i,n),a[t][e]=i,r+=1)}return{transformedData:a,nonNullCount:r,min:s}}({field:i,data:t,transformation:n}),u=a<2;return{rawData:s,dataCompatibleWithTransformation:OT(n,o),dataCountIncompatible:u,countExcludingNulls:a,countIncludingNulls:r}}(a.data.dataItems,u):yield AW({queryObject:n,chartConfig:e,queryConfig:i,abortKey:s});let m={valid:!0};return m=!1===h||!0===c?MT(u.dataTransformationType,c):a.type===tP?function(t,e){var i,n,r,s;const{x:a,binCount:o}=t,u={valid:!0};if(void 0!==e){const t=e.map((t=>t[a]));let l=[];l=TT(null!=o?o:32)(t).map((t=>{var e,i;return{count:t.length,minValue:null!==(e=t.x0)&&void 0!==e?e:NaN,maxValue:null!==(i=t.x1)&&void 0!==i?i:NaN}}));const h=null!==(i=function(t,e){let i=0,n=0;for(let e of t)null!=e&&(e=+e)>=e&&(++i,n+=e);if(i)return n/i}(t))&&void 0!==i?i:NaN,c=null!==(n=function(t,e){const i=function(t,e){let i,n=0,r=0,s=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(i=e-r,r+=i/++n,s+=i*(e-r));else{let a=-1;for(let o of t)null!=(o=e(o,++a,t))&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r))}if(n>1)return s/(n-1)}(t,void 0);return i?Math.sqrt(i):i}(t))&&void 0!==n?n:NaN,d=null!==(r=ew(t))&&void 0!==r?r:NaN,f=l[0].minValue,m=l[l.length-1].maxValue,v=null!==(s=iw(t))&&void 0!==s?s:NaN,p=iw(l,(t=>t.count));u.data={mean:h,median:d,stddev:c,min:f,max:m,bins:l,count:e.length,nulls:e.length-p,sum:v}}return u}(u,l):yield jW({chartConfig:e,rawData:l,queryObject:n,queryConfig:i,countIncludingNulls:d,countExcludingNulls:f,options:r,abortKey:s}),m}))}function DW(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,queryConfig:i,chartConfig:n,x:r}=t,{series:s}=n,{dataTransformationType:a}=s[0],o=Object.assign(Object.assign({},i),{orderByFields:[r]});return{valid:!0,data:{dataItems:(yield eT({queryObject:e,queryConfig:o,outFields:[r]})).map((t=>({[r]:kT(t.attributes[r],a)})))}}}))}const PW={groupByCaseBegin:"CASE",groupByOutKeyword:"OUT",groupByCaseEnd:"ELSE 'OUT' END"};function LW(t){const{groupByFieldsForStatistics:e,x:i,y:n,xValue:r,yValue:s,xStep:a,yStep:o,endOfRow:u,endOfColumn:l}=t;let h=""===e?PW.groupByCaseBegin:e;return h=fC("${ groupByFieldsForStatistics } WHEN (${ y } ${ yMinOperand } ${ yValue } AND ${ y } ${ yMaxOperand } ${ yValuePlusStep } AND ${ x } ${ xMinOperand } ${ xValue } AND ${ x } ${ xMaxOperand } ${ xValuePlusStep }) THEN '${ xValue }|${ xValuePlusStep}|${ yValue }|${ yValuePlusStep }'",{groupByFieldsForStatistics:h,x:i,y:n,xValue:`${r}`,yValue:`${s}`,xValuePlusStep:`${r+(!0===l?0:a)}`,yValuePlusStep:`${s+(!0===u?0:o)}`,xMinOperand:!0===l?"=":">=",yMinOperand:!0===u?"=":">=",xMaxOperand:!0===l?"=":"<",yMaxOperand:!0===u?"=":"<"}),h}function EW(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryConfig:i,queryObject:n,xMin:r,xMax:s,yMin:a,yMax:o,abortKey:u}=t,l=e.series[0],{x:h,y:c}=l,d=Object.assign({},i);return d.where=VM([d.where,`${h}>=${r}`,`${h}<=${s}`]),h!==c&&(d.where=VM([d.where,`${c}>=${a}`,`${c}<=${o}`])),eT({queryObject:n,queryConfig:d,noBatch:!0,featureCount:1,abortKey:u})}))}function NW(t){var e,i,n,r,s,a,o;return yd(this,void 0,void 0,(function*(){const{statsMap:u,chartConfig:l,queryObject:h,queryConfig:c,options:d,abortKey:m}=t,v=l.series[0],{x:p,y:b}=v,{dataContextXMinField:g,dataContextXMaxField:y,dataContextYMinField:w,dataContextYMaxField:S,dataContextCountDistinctX:x,dataContextCountDistinctY:C,queryNumberOfFeatures:O,queryNumberOfAggregatedFeatures:M}=oR.scatterPlotAggregationFields;let T=[];const k=null!==(e=null==u?void 0:u.get(g))&&void 0!==e?e:NaN,I=null!==(i=null==u?void 0:u.get(y))&&void 0!==i?i:NaN,A=null!==(n=null==u?void 0:u.get(O))&&void 0!==n?n:NaN,j=null!==(r=null==u?void 0:u.get(w))&&void 0!==r?r:k,F=null!==(s=null==u?void 0:u.get(S))&&void 0!==s?s:I;if(!1===Number.isNaN(k+I+j+F)){const t=gM(h),{maxScatterPointsAfterAggregation:e}=DC(null==d?void 0:d.chartLimits),{maxScatterCellsPerQuery:i,maxScatterCellsPerQueryForStandard:n}={maxScatterCellsPerQuery:500,maxScatterCellsPerQueryForStandard:175,maxElementsPerSelectionQuery:25,maxOIDsPerSelectionQuery:2e3},r=yield function(t){return nw(this,void 0,void 0,(function*(){let e=!0;if(1==(!0===t.url.includes(".arcgis.com/"))&&void 0!==t.sourceJSON.serviceItemId){const i=function(t){let e=t.toLowerCase();const i=e.indexOf("/rest/services");return e=i>-1?t.substring(0,i):t,`${e}/rest/info`}(t.url);try{const t=(yield f(i,{query:{f:"json"}})).data;if(void 0!==t.owningTenant&&void 0!==t.owningSystemUrl){const i=`${t.owningSystemUrl}/sharing/rest/portals/${t.owningTenant}`,n=(yield f(i,{authMode:"immediate",query:{f:"json"}})).data,r=new je({sourceJSON:n});yield r.load(),e=void 0===r.sourceJSON.subscriptionInfo.dataStoreLevel}}catch(t){}}return e}))}(t),s=!0===r?n:i,u=e,v=Math.floor(Math.sqrt(u)),g=yield function(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryObject:i,queryConfig:n,abortKey:r}=t,s=e.series[0],{x:a,y:o}=s,{dataContextCountDistinctX:u,dataContextCountDistinctY:l}=oR.scatterPlotAggregationFields,h=Object.assign(Object.assign({},n),{outStatistics:[{statisticType:_F,outStatisticFieldName:u,onStatisticField:a},{statisticType:_F,outStatisticFieldName:l,onStatisticField:o}],returnDistinctValues:!0});return yield XM({queryObject:i,queryConfig:h,abortKey:r})}))}({queryObject:h,chartConfig:l,queryConfig:c,abortKey:m}),y=Math.min(null!==(a=g.get(C))&&void 0!==a?a:NaN,v),w=Math.min(null!==(o=g.get(x))&&void 0!==o?o:NaN,v),S=w*y,O=I===k?0:(I-k)/(w-1),D=F===j?0:(F-j)/(y-1);let P=0;const{objectIdField:L}=t,E=new Map,N=yield yM(h);null==N||N.forEach((t=>{!0===xM(t)&&E.set(t.name,{onStatisticField:t.name,outStatisticFieldName:t.name,statisticType:GF})}));const R=yield function(t){return nw(this,void 0,void 0,(function*(){const e=new Set;return!1===t.isTable&&(yield t.renderer.collectRequiredFields(e,t.fieldsIndex)),[...e]}))}(t);R.forEach((t=>{E.set(t,{onStatisticField:t,outStatisticFieldName:t,statisticType:GF})})),E.set(L,{onStatisticField:L,outStatisticFieldName:M,statisticType:_F}).set(p,{onStatisticField:p,outStatisticFieldName:p,statisticType:GF}).set(b,{onStatisticField:b,outStatisticFieldName:b,statisticType:GF});const B=[];let _=!0,z=k,V=j,G="",$=1,W=1,q=Number.MAX_SAFE_INTEGER,H=Number.MIN_SAFE_INTEGER,U=Number.MAX_SAFE_INTEGER,K=Number.MIN_SAFE_INTEGER;for(;W<=w&&!0===_;){for(V=j,$=1;$<=y&&!0===_;){if(G=LW({groupByFieldsForStatistics:G,x:p,y:b,xValue:z,yValue:V,xStep:O,yStep:D,endOfRow:$===y,endOfColumn:W===w}),z<q&&(q=z),z+O>H&&(H=z+O),V<U&&(U=V),V+O>K&&(K=V+D),P+=1,P%s==0||P===S||P===A){G=`${G} ${PW.groupByCaseEnd}`;const t=Object.assign(Object.assign({},c),{groupByFieldsForStatistics:[G],outStatistics:[...E.values()]});B.push(EW({chartConfig:l,queryConfig:t,queryObject:h,xMin:q,xMax:H,yMin:U,yMax:K,abortKey:m})),q=Number.MAX_SAFE_INTEGER,H=Number.MIN_SAFE_INTEGER,U=Number.MAX_SAFE_INTEGER,K=Number.MIN_SAFE_INTEGER,G="",P===S&&(_=!1)}V+=D,$+=1}z+=O,W+=1}T=(yield Promise.all(B)).flat()}return T}))}var RW={exports:{}};!function(t){function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r={order:2,precision:2,period:null};function s(t,e){var i=[],n=[];t.forEach((function(t,r){null!==t[1]&&(n.push(t),i.push(e[r]))}));var r=n.reduce((function(t,e){return t+e[1]}),0),s=r/n.length,a=n.reduce((function(t,e){var i=e[1]-s;return t+i*i}),0);return 1-n.reduce((function(t,e,n){var r=i[n],s=e[1]-r[1];return t+s*s}),0)/a}function a(t,e){for(var i=t,n=t.length-1,r=[e],s=0;s<n;s++){for(var a=s,o=s+1;o<n;o++)Math.abs(i[s][o])>Math.abs(i[s][a])&&(a=o);for(var u=s;u<n+1;u++){var l=i[u][s];i[u][s]=i[u][a],i[u][a]=l}for(var h=s+1;h<n;h++)for(var c=n;c>=s;c--)i[c][h]-=i[c][s]*i[s][h]/i[s][s]}for(var d=n-1;d>=0;d--){for(var f=0,m=d+1;m<n;m++)f+=i[m][d]*r[m];r[d]=(i[n][d]-f)/i[d][d]}return r}function o(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var u={linear:function(t,e){for(var i=[0,0,0,0,0],n=0,r=0;r<t.length;r++)null!==t[r][1]&&(n++,i[0]+=t[r][0],i[1]+=t[r][1],i[2]+=t[r][0]*t[r][0],i[3]+=t[r][0]*t[r][1],i[4]+=t[r][1]*t[r][1]);var a=n*i[2]-i[0]*i[0],u=n*i[3]-i[0]*i[1],l=0===a?0:o(u/a,e.precision),h=o(i[1]/n-l*i[0]/n,e.precision),c=function(t){return[o(t,e.precision),o(l*t+h,e.precision)]},d=t.map((function(t){return c(t[0])}));return{points:d,predict:c,equation:[l,h],r2:o(s(t,d),e.precision),string:0===h?"y = "+l+"x":"y = "+l+"x + "+h}},exponential:function(t,e){for(var i=[0,0,0,0,0,0],n=0;n<t.length;n++)null!==t[n][1]&&(i[0]+=t[n][0],i[1]+=t[n][1],i[2]+=t[n][0]*t[n][0]*t[n][1],i[3]+=t[n][1]*Math.log(t[n][1]),i[4]+=t[n][0]*t[n][1]*Math.log(t[n][1]),i[5]+=t[n][0]*t[n][1]);var r=i[1]*i[2]-i[5]*i[5],a=Math.exp((i[2]*i[3]-i[5]*i[4])/r),u=(i[1]*i[4]-i[5]*i[3])/r,l=o(a,e.precision),h=o(u,e.precision),c=function(t){return[o(t,e.precision),o(l*Math.exp(h*t),e.precision)]},d=t.map((function(t){return c(t[0])}));return{points:d,predict:c,equation:[l,h],string:"y = "+l+"e^("+h+"x)",r2:o(s(t,d),e.precision)}},logarithmic:function(t,e){for(var i=[0,0,0,0],n=t.length,r=0;r<n;r++)null!==t[r][1]&&(i[0]+=Math.log(t[r][0]),i[1]+=t[r][1]*Math.log(t[r][0]),i[2]+=t[r][1],i[3]+=Math.pow(Math.log(t[r][0]),2));var a=o((n*i[1]-i[2]*i[0])/(n*i[3]-i[0]*i[0]),e.precision),u=o((i[2]-a*i[0])/n,e.precision),l=function(t){return[o(t,e.precision),o(o(u+a*Math.log(t),e.precision),e.precision)]},h=t.map((function(t){return l(t[0])}));return{points:h,predict:l,equation:[u,a],string:"y = "+u+" + "+a+" ln(x)",r2:o(s(t,h),e.precision)}},power:function(t,e){for(var i=[0,0,0,0,0],n=t.length,r=0;r<n;r++)null!==t[r][1]&&(i[0]+=Math.log(t[r][0]),i[1]+=Math.log(t[r][1])*Math.log(t[r][0]),i[2]+=Math.log(t[r][1]),i[3]+=Math.pow(Math.log(t[r][0]),2));var a=(n*i[1]-i[0]*i[2])/(n*i[3]-Math.pow(i[0],2)),u=(i[2]-a*i[0])/n,l=o(Math.exp(u),e.precision),h=o(a,e.precision),c=function(t){return[o(t,e.precision),o(o(l*Math.pow(t,h),e.precision),e.precision)]},d=t.map((function(t){return c(t[0])}));return{points:d,predict:c,equation:[l,h],string:"y = "+l+"x^"+h,r2:o(s(t,d),e.precision)}},polynomial:function(t,e){for(var i=[],r=[],u=0,l=0,h=t.length,c=e.order+1,d=0;d<c;d++){for(var f=0;f<h;f++)null!==t[f][1]&&(u+=Math.pow(t[f][0],d)*t[f][1]);i.push(u),u=0;for(var m=[],v=0;v<c;v++){for(var p=0;p<h;p++)null!==t[p][1]&&(l+=Math.pow(t[p][0],d+v));m.push(l),l=0}r.push(m)}r.push(i);for(var b=a(r,c).map((function(t){return o(t,e.precision)})),g=function(t){return[o(t,e.precision),o(b.reduce((function(e,i,n){return e+i*Math.pow(t,n)}),0),e.precision)]},y=t.map((function(t){return g(t[0])})),w="y = ",S=b.length-1;S>=0;S--)w+=S>1?b[S]+"x^"+S+" + ":1===S?b[S]+"x + ":b[S];return{string:w,points:y,predict:g,equation:[].concat(n(b)).reverse(),r2:o(s(t,y),e.precision)}}};function l(){var t=function(t,n){return i({_round:o},t,e({},n,(function(t,e){return u[n](t,i({},r,e))})))};return Object.keys(u).reduce(t,{})}t.exports=l()}(RW);const BW={dataFormat:"json",outputFormat:"json",typeKey:"analyticType",typeValue:"LinRegR2",fieldValue:"onAnalyticField",slopePropertyList:["Slope","slope"],interceptPropertyList:["Intercept","intercept"],r2PropertyList:["R2","r2"]};function _W(t){var e,i,n,r;return yd(this,void 0,void 0,(function*(){const{statsMap:s,queryObject:a,chartConfig:o,queryConfig:u}=t,l=o.series[0],{x:h,y:c}=l;let d=NaN,m=[{[h]:NaN,[c]:NaN},{[h]:NaN,[c]:NaN}];const{dataFormat:v,outputFormat:p,typeKey:b,typeValue:g,fieldValue:y,slopePropertyList:w,interceptPropertyList:S,r2PropertyList:x}=BW,C=`[{"${b}": "${g}", "${y}":"${h},${c}"}]`,O=yield function(t){var e,i,n,r,s,a;return nw(this,void 0,void 0,(function*(){const{queryObject:o,queryConfig:u,outputFormat:l,dataFormat:h,outAnalytics:c}=t,{where:d,geometry:m,distance:v,units:p}=u;let b;const g=gM(o),y={query:{where:VM([d,g.definitionExpression])}},w=null===(i=null===(e=yield $M(m))||void 0===e?void 0:e.extent)||void 0===i?void 0:i.toJSON();if(void 0!==w){const t=function(t){let e;switch(t){case"feet":e="esriSRUnit_Foot";break;case"miles":e="esriSRUnit_StatuteMile";break;case"nautical-miles":e="esriSRUnit_NauticalMile";break;case"us-nautical-miles":e="esriSRUnit_USNauticalMile";break;case"meters":e="esriSRUnit_Meter";break;case"kilometers":e="esriSRUnit_Kilometer"}return e}(p),{xmin:e,ymin:i,xmax:r,ymax:s}=w;y.query=Object.assign(Object.assign({},y.query),{geometryType:"esriGeometryEnvelope",geometry:`${e},${i},${r},${s}`,distance:v,units:t,inSR:null===(n=null==m?void 0:m.spatialReference)||void 0===n?void 0:n.wkid})}const S=`${g.url}/${g.layerId}/queryAnalytic?f=${l}&dataFormat=${h}&outAnalytics=${c}`;try{const t=yield f(S,y);b=null===(a=null===(s=null===(r=t.data)||void 0===r?void 0:r.features)||void 0===s?void 0:s[0])||void 0===a?void 0:a.attributes}catch(t){const e=yield ZM();throw new YM(KM,e.queryError,t)}return b}))}({queryObject:a,queryConfig:u,outputFormat:p,dataFormat:v,outAnalytics:C});if(void 0!==O){let t=NaN,a=NaN;const{expr:o}=uM(O,w),{expr:u}=uM(O,S),{expr:l}=uM(O,x);void 0!==o&&Number.isFinite(O[o])&&(t=O[o]),void 0!==u&&Number.isFinite(O[u])&&(a=O[u]),void 0!==l&&Number.isFinite(O[l])&&(d=O[l]);const{dataContextXMinField:f,dataContextXMaxField:v,dataContextYMinField:p,dataContextYMaxField:b}=oR.scatterPlotAggregationFields,g=null!==(e=s.get(f))&&void 0!==e?e:NaN,y=null!==(i=s.get(v))&&void 0!==i?i:NaN,C=null!==(n=s.get(p))&&void 0!==n?n:NaN,M=null!==(r=s.get(b))&&void 0!==r?r:NaN,T=(y-g)/100;let k=g-T,I=NaN;for(;!1==(I>=C&&I<=M)&&k<=y;)k+=T,I=t*k+a;let A=y+T,j=NaN;for(;!1==(j>=C&&j<=M)&&A>=g;)A-=T,j=t*A+a;m=[{[h]:k,[c]:I},{[h]:A,[c]:j}]}return{r2:d,trendLinePoints:m}}))}function zW(t,e=!0){const{data:i,chartConfig:n,statsMap:r}=t,s=n.series[0],{x:a,y:o}=s;let{r2:u,trendLinePoints:l}=oR.scatterPlotSeries;const h=function(t){const{data:e,x:i,y:n}=t;let r=[];return void 0!==e&&(r=e.filter((t=>!0===Number.isFinite(t[i])&&!0===Number.isFinite(t[n]))).map((t=>[t[i],t[n]]))),r}({data:i,x:a,y:o});if(void 0!==h){const t=RW.exports.linear(h,{precision:oR.scatterPlotSeries.regressionPrecision});u=t.r2;const{points:i}=t;l=function(t){var e,i,n,r,s,a,o,u,l,h,c,d;const{x:f,y:m,statsMap:v,fullTrendlinePoints:p,securePoints:b}=t,{dataContextXMinField:g,dataContextXMaxField:y,dataContextYMinField:w,dataContextYMaxField:S}=oR.scatterPlotAggregationFields,x=null!==(e=v.get(g))&&void 0!==e?e:NaN,C=null!==(i=v.get(y))&&void 0!==i?i:NaN,O=null!==(n=v.get(w))&&void 0!==n?n:NaN,M=null!==(r=v.get(S))&&void 0!==r?r:NaN,T=!0===b?p.filter((t=>t[0]>=x&&t[1]>=O&&t[0]<=C&&t[1]<=M)):p;return[{[f]:null!==(a=null===(s=null==T?void 0:T[0])||void 0===s?void 0:s[0])&&void 0!==a?a:NaN,[m]:null!==(u=null===(o=null==T?void 0:T[0])||void 0===o?void 0:o[1])&&void 0!==u?u:NaN},{[f]:null!==(h=null===(l=null==T?void 0:T[T.length-1])||void 0===l?void 0:l[0])&&void 0!==h?h:NaN,[m]:null!==(d=null===(c=null==T?void 0:T[T.length-1])||void 0===c?void 0:c[1])&&void 0!==d?d:NaN}]}({x:a,y:o,fullTrendlinePoints:i,statsMap:r,securePoints:e})}return{r2:u,trendLinePoints:l}}function VW(t){return yd(this,void 0,void 0,(function*(){const e=yield function(t){var e;return yd(this,void 0,void 0,(function*(){const{chartConfig:i,queryObject:n}=t,{dataSource:r}=i;let s=!1;const a=bM(n),o=gM(n);if(!0===a&&r.type===eP&&o.source instanceof G==0){const t=gM(n),i=`${t.url}/${t.layerId}?f=json`;try{const n=(yield f(i)).data,r=!0===(null===(e=null==n?void 0:n.advancedQueryCapabilities)||void 0===e?void 0:e.supportsQueryAnalytic),a=void 0===(null==n?void 0:n.sqlParserVersion)||t.version>=10.91;s=!0===r&&!0===a}catch(t){}}return s}))}(t),{chartConfig:i,statsMap:n,options:r}=t,s=i.series[0],{x:a,y:o}=s,{r2:u}=oR.scatterPlotSeries;let l={r2:u,trendLinePoints:[{[a]:NaN,[o]:NaN},{[a]:NaN,[o]:NaN}]},h=!1;if(!0===e)try{l=yield _W(t)}catch(t){h=!0}return!1!==e&&!0!==h||!1!==PG({statsMap:n,chartLimits:null==r?void 0:r.chartLimits})||(l=zW(t)),l}))}function GW(t){var e,i;return yd(this,void 0,void 0,(function*(){const{chartConfig:n,queryConfig:r,queryObject:s,abortKey:a}=t,{dataSource:o}=n,u=n.series[0],{x:l,y:h}=u;let c=new Map;const{dataContextXMinField:d,dataContextXMaxField:f,dataContextYMinField:m,dataContextYMaxField:v,queryNumberOfFeatures:p}=oR.scatterPlotAggregationFields;if(o.type===eP){const{objectIdField:t}=gM(s),n=[{statisticType:_F,onStatisticField:t,outStatisticFieldName:p},{statisticType:VF,outStatisticFieldName:d,onStatisticField:l},{statisticType:GF,outStatisticFieldName:f,onStatisticField:l}];l!==h&&n.push({statisticType:VF,outStatisticFieldName:m,onStatisticField:h},{statisticType:GF,outStatisticFieldName:v,onStatisticField:h});const o=Object.assign({},r);o.outStatistics=n,c=yield XM({queryObject:s,queryConfig:o,abortKey:a}),l===h&&(c.set(m,null!==(e=c.get(d))&&void 0!==e?e:NaN),c.set(v,null!==(i=c.get(f))&&void 0!==i?i:NaN))}else if(!1===o.processed){const{dataItems:t}=o.data,{minX:e,maxX:i,minY:n,maxY:r}=function(t){const{data:e,x:i,y:n}=t;let r=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;return e.forEach((t=>{Number.isFinite(t[i])&&(r=Math.min(t[i],r)),Number.isFinite(t[i])&&(s=Math.max(t[i],s)),Number.isFinite(t[n])&&(a=Math.min(t[n],a)),Number.isFinite(t[n])&&(o=Math.max(t[n],o))})),{minX:r,maxX:s,minY:a,maxY:o}}({data:t,x:l,y:h});c.set(p,t.length),c.set(d,e),c.set(f,i),c.set(m,n),c.set(v,r)}return c}))}function $W(t){var e;return yd(this,void 0,void 0,(function*(){let i=!1,n=[];const{chartConfig:r,queryConfig:s,queryObject:a,statsMap:o,options:u,abortKey:l}=t,{dataSource:h}=r,c=r.series[0],{x:d,y:f}=c;if(h.type===eP){const{queryNumberOfFeatures:t}=oR.scatterPlotAggregationFields,h=null!==(e=null==o?void 0:o.get(t))&&void 0!==e?e:NaN;if(!1===Number.isNaN(h)&&h>0){const t=Object.assign({},s);t.where=VM([t.where,`${d} IS NOT NULL AND ${f} IS NOT NULL`]);const{maxScatterPointsBeforeAggregation:e}=DC(null==u?void 0:u.chartLimits);h<e?n=yield function(t){var e,i;return yd(this,void 0,void 0,(function*(){const{queryObject:n,queryConfig:r,chartConfig:s,featureCount:a,abortKey:o}=t,u=s.series[0],{x:l,y:h}=u,c=gM(n);let d=[];const f=yield yM(n),m=null!==(i=(null!==(e=null==f?void 0:f.filter((t=>!0===xM(t)&&t.name!==l&&t.name!==h)))&&void 0!==e?e:[]).map((t=>t.name)))&&void 0!==i?i:[],v=[l,h,c.objectIdField,...m];if(!1===c.isTable){const{rendererField:t,rendererNormalizationField:e}=mM(c.renderer);!1===oM(t)&&v.push(t),!1===oM(e)&&v.push(e)}const p=Object.assign(Object.assign({},r),{orderByFields:[`${l} ${QD.Ascending}`]});return d=yield eT({queryObject:n,queryConfig:p,outFields:v,featureCount:a,abortKey:o}),d}))}({queryObject:a,chartConfig:r,queryConfig:t,featureCount:h,abortKey:l}):(i=!0,n=yield NW({chartConfig:r,queryObject:a,queryConfig:t,options:u,statsMap:o,abortKey:l}))}}else n=h.data.dataItems;return{rawData:n,hasBeenAggregated:i}}))}function WW(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryConfig:i,queryObject:n,sortData:r,calculateTrendline:s,options:a,abortKey:o}=t,u=yield GW(t),{rawData:l,hasBeenAggregated:h}=yield $W({queryObject:n,chartConfig:e,queryConfig:i,options:a,statsMap:u,abortKey:o}),c=yield function(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,chartConfig:i,rawData:n,hasBeenAggregated:r}=t,{dataSource:s}=i,a=i.series[0],{x:o,y:u}=a;let l=[];if(s.type===eP){const t=gM(e),{rendererType:i}=mM(t.renderer),s=t.objectIdField,{groupByOutKeyword:a}=PW,h=new FR.exports.Chance("arcgis-charts-scatter-seed"),{dataContextXMinField:c,dataContextXMaxField:d,dataContextYMinField:f,dataContextYMaxField:m}=oR.scatterPlotAggregationFields;l=yield Promise.all(n.map((t=>yd(this,void 0,void 0,(function*(){let e=Object.assign({},t.attributes);if(!0===r){const{expr:t,isInItem:i}=wG(e);if(!0===i&&e[t]!==a){let[i,n,r,s]=e[t].split("|");i=Math.min(i,n),n=Math.max(i,n),r=Math.min(r,s),s=Math.max(r,s),e=Object.assign(Object.assign({},e),{[c]:i,[d]:n,[f]:r,[m]:s}),e[o]!==i&&e[o]!==n&&(e[o]=h.floating({min:0,max:1})*(n-i)+i),e[u]!==r&&e[u]!==s&&(e[u]=h.floating({min:0,max:1})*(s-r)+r)}}else e[bC.uniqueIdsName]=e[s];if(i!==ID){const i=yield cW(t);void 0!==i&&(e[Y$]=i)}return e}))))),l=l.filter((t=>{const{expr:e}=wG(t);return void 0===e||t[e]!==a}))}else l=n;return l}))}({queryObject:n,chartConfig:e,rawData:l,hasBeenAggregated:h});!1!==r&&IG({arrayToSort:c,orderByFields:[`${e.series[0].x} ASC`]});const{r2:d,trendLinePoints:f}=!1!==s?yield VW({data:c,statsMap:u,queryConfig:i,options:a,queryObject:n,chartConfig:e}):oR.scatterPlotSeries;return{dataItems:c,r2:d,trendLinePoints:f}}))}function qW(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function HW(t,e){let i,n=0,r=0,s=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(i=e-r,r+=i/++n,s+=i*(e-r));else{let a=-1;for(let o of t)null!=(o=e(o,++a,t))&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r))}if(n>1)return s/(n-1)}class UW extends Map{constructor(t,e=JW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,i]of t)this.set(e,i)}get(t){return super.get(KW(this,t))}has(t){return super.has(KW(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},i){const n=e(i);t.has(n)&&(i=t.get(i),t.delete(n));return i}(this,t))}}function KW({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):i}function JW(t){return null!==t&&"object"==typeof t?t.valueOf():t}function YW(t){return t}function ZW(t,e,i,n){return function t(r,s){if(s>=n.length)return i(r);const a=new UW,o=n[s++];let u=-1;for(const t of r){const e=o(t,++u,r),i=a.get(e);i?i.push(t):a.set(e,[t])}for(const[e,i]of a)a.set(e,t(i,s));return e(a)}(t,0)}function XW(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i<e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(i<r||void 0===i&&r>=r)&&(i=r)}return i}function QW(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i>e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(i>r||void 0===i&&r>=r)&&(i=r)}return i}function tq(t,e,i=0,n=t.length-1,r=qW){for(;n>i;){if(n-i>600){const s=n-i+1,a=e-i+1,o=Math.log(s),u=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*u*(s-u)/s)*(a-s/2<0?-1:1);tq(t,e,Math.max(i,Math.floor(e-a*u/s+l)),Math.min(n,Math.floor(e+(s-a)*u/s+l)),r)}const s=t[e];let a=i,o=n;for(eq(t,i,e),r(t[n],s)>0&&eq(t,i,n);a<o;){for(eq(t,a,o),++a,--o;r(t[a],s)<0;)++a;for(;r(t[o],s)>0;)--o}0===r(t[i],s)?eq(t,i,o):(++o,eq(t,o,n)),o<=e&&(i=o+1),e<=o&&(n=o-1)}return t}function eq(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function iq(t,e,i){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(n=+n)>=n&&(yield n)}}(t,i)),n=t.length){if((e=+e)<=0||n<2)return QW(t);if(e>=1)return XW(t);var n,r=(n-1)*e,s=Math.floor(r),a=XW(tq(t,s).subarray(0,s+1));return a+(QW(t.subarray(s+1))-a)*(r-s)}}function nq(t,e){let i=0,n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++i,n+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++i,n+=s)}if(i)return n/i}function rq(t,e,i){t=+t,e=+e,i=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+i;for(var n=-1,r=0|Math.max(0,Math.ceil((e-t)/i)),s=new Array(r);++n<r;)s[n]=t+n*i;return s}function sq(t,e){let i=0;if(void 0===e)for(let e of t)(e=+e)&&(i+=e);else{let n=-1;for(let r of t)(r=+e(r,++n,t))&&(i+=r)}return i}function aq(t){return yd(this,void 0,void 0,(function*(){const{seriesData:e,chartConfig:i,queryConfig:n,queryObject:r,categoryOrDateCount:s,behaviorAfterLimit:a,abortKey:o}=t,{dataSource:u}=i,{series:l}=i;let h=e;const c=kM(l),d=tG(i);if(a!==lC&&u.type===eP&&void 0!==r&&void 0!==s&&s>e.length&&c!==$C&&d===FD){const{x:t}=l[0],i=Object.assign(Object.assign({},n),{returnDistinctValues:!0});delete i.outStatistics,delete i.orderByFields,delete i.groupByFieldsForStatistics;const a=(yield eT({queryObject:r,queryConfig:i,outFields:[t],featureCount:s,abortKey:o})).map((e=>e.attributes[t])).filter((t=>null!=t));a.length>e.length&&(h=function(t,e,i){const n=new Map;for(let e=0;e<t.length;e+=1)n.set(t[e],{[i]:t[e]});for(let t=0;t<e.length;t+=1){const r=e[t][i];"string"!=typeof r&&"number"!=typeof r||n.set(r,e[t])}return[...n.values()]}(a,e,t))}return h}))}function oq(t,e){let i=t;return e===hP?i/=7:e===cP?i/=30:e===dP&&(i/=365),i=Math.ceil(i),i}function uq(t){const{date:e,timeIntervalUnits:i,nextOrPrevious:n,timeIntervalSize:r}=t;if(void 0!==r&&!0===Number.isFinite(r)){const t="next"===n?r:-r;switch(i){case aP:return MV.fromMillis(e).plus({seconds:t}).valueOf();case oP:return MV.fromMillis(e).plus({minutes:t}).valueOf();case uP:return MV.fromMillis(e).plus({hours:t}).valueOf();case hP:case lP:return MV.fromMillis(e).plus({days:t}).valueOf();case cP:return MV.fromMillis(e).plus({months:t}).valueOf();case dP:return MV.fromMillis(e).plus({years:t}).valueOf()}}return e}function lq(t){var e;const{binFirstOrLastIndex:i,data:n,x:r,timeIntervalInfo:s}=t,{timeIntervalUnits:a,timeIntervalSize:o}=s,u=a===hP?7*(null!=o?o:1):o,l=n[i][r];let h=i;const c=uq({date:l,timeIntervalUnits:a,timeIntervalSize:u,nextOrPrevious:"next"});let d=n[h][r];for(;h+1<n.length&&d<c;)h+=1,d=null===(e=n[h])||void 0===e?void 0:e[r];const f=h+1>=n.length;let m=h;!0===f&&void 0!==n[m]&&(m+=1);return{binStartDate:l,binEndDate:!0===f?uq({date:l,timeIntervalUnits:a,timeIntervalSize:u,nextOrPrevious:"next"}):n[h][r]-1,last:f,nextBinFirstOrLastIndex:h,sliceStartIndex:i,sliceEndIndex:m}}function hq(t){var e;const{binFirstOrLastIndex:i,data:n,x:r,timeIntervalInfo:s}=t,{timeIntervalUnits:a,timeIntervalSize:o}=s,u=a===hP?7*(null!=o?o:1):o,l=n[i][r];let h=i;const c=uq({date:l,timeIntervalUnits:a,timeIntervalSize:u,nextOrPrevious:"previous"});let d=n[h][r];for(;h-1>=0&&d>c;)h-=1,d=null===(e=n[h])||void 0===e?void 0:e[r];const f=h-1<=0;let m=i;!0===f&&void 0!==n[m]&&(m-=1),!0===f&&(h=0);let v=!0===f?uq({date:l,timeIntervalUnits:a,timeIntervalSize:u,nextOrPrevious:"previous"}):n[h][r];return v+=1e3,{binStartDate:v,binEndDate:l,nextBinFirstOrLastIndex:h,sliceStartIndex:h,sliceEndIndex:m,last:f}}function cq(t){const{binsToRegroup:e,statisticType:i,y:n,nullPolicy:r}=t;let s;r!==vP&&(s=r===mP?0:null);const a=e.filter((t=>Number.isFinite(t[n])));if(a.length>0)switch(i){case _F:case zF:s=sq(a,(t=>t[n]));break;case VF:s=QW(a,(t=>t[n]));break;case GF:s=XW(a,(t=>t[n]));break;case $F:s=nq(a,(t=>t[n]))}return s}function dq(t){const{dateMinTimestamp:e,dateMaxTimestamp:i,timeIntervalInfo:n}=t,{timeIntervalSize:r,timeIntervalUnits:s}=n;let a=0,o=0;if(void 0!==r&&!0===Number.isFinite(r)&&!0===Number.isFinite(e)&&!0===Number.isFinite(i)){let t=-1;const n=MV.fromMillis(e),u=MV.fromMillis(i);switch(s){case aP:t=u.diff(n,"seconds").get("seconds");break;case oP:t=u.diff(n,"minutes").get("minutes");break;case uP:t=u.diff(n,"hours").get("hours");break;case lP:case cP:case dP:t=u.diff(n,"days").get("days");break;case hP:t=u.diff(n,"weeks").get("weeks")}!0===Number.isFinite(t)&&(o=Math.ceil(t)+1,a=1===r?o:Math.ceil(o/r))}return{numberOfFinalBinsWithinDataRange:a,numberOfSingleBinsWithinDataRange:o}}function fq(t){const{nullPolicy:e}=t[0],i=t.reduce(((t,i)=>{var n,r,s;t[oR.dateBinModel]=void 0;const a=null!==(s=null===(r=null===(n=i.query)||void 0===n?void 0:n.outStatistics)||void 0===r?void 0:r[0].outStatisticFieldName)&&void 0!==s?s:i.y;return e!==vP&&(t[a]=e===mP?0:null),t}),{});return i}function mq(t){const{newDateMin:e,newDateMax:i,seriesConfig:n,data:r,numberOfSingleBinsWithinDataRange:s,initialNumberOfBins:a,timeIntervalInfo:o}=t,{timeIntervalUnits:u}=o,l=r,h=!1===function(t){const{numberOfSingleBinsWithinDataRange:e,dataLength:i,timeIntervalUnits:n}=t;return oq(i,n)>=e}({numberOfSingleBinsWithinDataRange:s,dataLength:a,timeIntervalUnits:u});if(!0===h){const{x:t,timeAggregationType:s}=n[0],a=fq(n);let o=s===pP?i:e,h=s===pP?r.length-1:0;for(;s===pP&&o>e||s!==pP&&o<i;)o!==r[h][t]?l.push(Object.assign(Object.assign({},a),{[t]:o})):h=s===pP?h-1:h+1,o=uq({date:o,timeIntervalUnits:u===cP||u===dP?lP:u,timeIntervalSize:1,nextOrPrevious:s===pP?"previous":"next"})}return l}function vq(t){const{groupByFieldsForStatistics:e,dateField:i,queryStartDate:n,queryEndDate:r,y:s,binIndex:a,lastBin:o}=t;let u=""===e?PW.groupByCaseBegin:e;return u=fC("${ groupByFieldsForStatistics } WHEN ${ dateField }>='${ startDate }' AND ${ dateField }${ endDateOperand }'${ endDate }' THEN '${ y }|${ binIndex}'",{groupByFieldsForStatistics:u,dateField:i,startDate:`${n}`,endDate:`${r}`,y:s,binIndex:`${a}`,endDateOperand:!0===o?"<=":"<"}),u}function pq(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{queryObject:r,data:s,seriesConfig:a,queryConfig:o}=t,u=s,{statisticType:l}=null!==(n=null===(i=null===(e=a[0].query)||void 0===e?void 0:e.outStatistics)||void 0===i?void 0:i[0])&&void 0!==n?n:iP;if(l===HF&&u.length>0){const t=function*(t){var e,i,n;const{queryObject:r,seriesConfig:s,queryConfig:a,completeData:o}=t;for(let t=0;t<s.length;t+=1){const u=s[t],{query:l,x:h,y:c}=u,d=[{onStatisticField:null!==(n=null===(i=null===(e=null==l?void 0:l.outStatistics)||void 0===e?void 0:e[0])||void 0===i?void 0:i.onStatisticField)&&void 0!==n?n:"",outStatisticFieldName:HF,statisticType:HF,statisticParameters:{value:.5}}];let f=`${PW.groupByCaseBegin}`;for(let t=0;t<o.length;t+=1){const e=o[t],[i,n]=e[oR.dateBinningRange];f=vq({groupByFieldsForStatistics:f,queryStartDate:EG(i),queryEndDate:EG(n),dateField:h,y:c,binIndex:t,lastBin:t===o.length-1})}f=`${f} ${PW.groupByCaseEnd}`;const m=Object.assign(Object.assign({},a),{groupByFieldsForStatistics:[f],outStatistics:d,orderByFields:void 0});yield eT({queryObject:r,queryConfig:m,noBatch:!0})}}({queryObject:r,completeData:u,seriesConfig:a,queryConfig:o}),e=(yield Promise.all(t)).flat();if(e.length>0){const{isInItem:t,expr:i}=wG(e[0].attributes);!0===t&&e.forEach((t=>{const e=t.attributes[`${i}`];if(void 0!==e){const[i,n]=e.split("|");if(void 0!==n){const e=t.attributes[HF];u[n][`${i}`]=e}}}))}}return u}))}function bq(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,data:i,x:n,queryConfig:r,seriesConfig:s,dateRange:a,timeIntervalInfo:o}=t,{dateMinTimestamp:u,dateMaxTimestamp:l}=a;let h=i;const c=i.length;if(IG({arrayToSort:h,orderByFields:[n]}),c>1){const{numberOfFinalBinsWithinDataRange:t,numberOfSingleBinsWithinDataRange:i}=dq({dateMinTimestamp:u,dateMaxTimestamp:l,timeIntervalInfo:o}),{newDateMin:a,newDateMax:d}=function(t){const{dateMaxTimestamp:e,numberOfFinalBinsWithinDataRange:i,numberOfSingleBinsWithinDataRange:n,data:r,seriesConfig:s,timeIntervalInfo:a}=t,{timeIntervalSize:o,timeIntervalUnits:u}=a,{timeAggregationType:l,x:h}=s[0];let c=r[0][h],d=e;if(void 0!==o&&!0===Number.isFinite(o)&&!0==(n/i!==o)){let t=Math.ceil(n/i)*i-n;u===hP&&(t*=7);const e=fq(s);if(l===pP){let i=r[0][h];for(let n=0;n<t;n+=1)i=uq({date:i,timeIntervalUnits:u,timeIntervalSize:1,nextOrPrevious:"previous"}),r.push(Object.assign(Object.assign({},e),{[h]:i}));t>0&&(c=r[r.length-1][h])}else{let i=r[r.length-1][h];for(let n=0;n<t;n+=1)i=uq({date:i,timeIntervalUnits:u,timeIntervalSize:1,nextOrPrevious:"next"}),r.push(Object.assign(Object.assign({},e),{[h]:i}));d=r[r.length-1][h]}}return{newDateMin:c,newDateMax:d}}({dateMaxTimestamp:l,data:h,numberOfFinalBinsWithinDataRange:t,numberOfSingleBinsWithinDataRange:i,seriesConfig:s,timeIntervalInfo:o});h=mq({newDateMin:a,newDateMax:d,seriesConfig:s,data:h,initialNumberOfBins:c,numberOfSingleBinsWithinDataRange:i,timeIntervalInfo:o}),IG({arrayToSort:h,orderByFields:[n]}),h=function(t){var e,i,n;const{data:r,seriesConfig:s,timeIntervalInfo:a,newDateMin:o,newDateMax:u,dateMinTimestamp:l,dateMaxTimestamp:h}=t;let c=[];const{timeIntervalUnits:d}=a,f=null!==(e=a.timeIntervalSize)&&void 0!==e?e:1,{x:m,timeAggregationType:v,nullPolicy:p}=s[0];if(f>1||d===hP||d===cP||d===dP){const{query:t}=s[0],e=BM(s),{statisticType:d}=null!==(n=null===(i=null==t?void 0:t.outStatistics)||void 0===i?void 0:i[0])&&void 0!==n?n:iP;let f=!1,b=v===pP?r.length-1:0;const g={binFirstOrLastIndex:b,data:r,x:m,timeIntervalInfo:a,newDateMin:o,newDateMax:u};for(;!1===f;){let t={};const{binStartDate:i,binEndDate:n,last:s,nextBinFirstOrLastIndex:a,sliceStartIndex:o,sliceEndIndex:u}=v===pP?hq(g):lq(g);if(f=s,t=t=v===pP?r[u-1]:r[b],n>h&&i<h||i<l&&n>l||i>=l&&n<=h){const s=r.slice(o,u).filter((t=>oR.dateBinModel in t==0));e.forEach((e=>{t[e]=cq({binsToRegroup:s,statisticType:d,y:e,nullPolicy:p})}));const a=TG(s.map((t=>t[pC])).filter((t=>void 0!==t)));void 0!==a&&(t[pC]=a),t[m]=i,t[oR.dateBinningRange]=[i,n],delete t[oR.dateBinModel],c.push(t)}else!0===s&&v!==pP&&(c[c.length-1][oR.dateBinningRange][1]=c[c.length-1][oR.dateBinningRange][1]+1);b=a,g.binFirstOrLastIndex=a}v===pP&&(c=c.reverse())}else c=1===f?r.map(((t,e)=>{var i;const n=t[m];let s=null===(i=r[e+1])||void 0===i?void 0:i[m];return s="number"==typeof s?s-1:uq({date:n,timeIntervalUnits:d,timeIntervalSize:f,nextOrPrevious:"next"}),Object.assign(Object.assign({},t),{[oR.dateBinningRange]:[n,s]})})):r;return c}({data:h,seriesConfig:s,dateMinTimestamp:u,dateMaxTimestamp:l,newDateMin:a,newDateMax:d,timeIntervalInfo:o}),h=function(t){var e,i;const{data:n,seriesConfig:r,dateMinTimestamp:s,dateMaxTimestamp:a}=t,{timeAggregationType:o}=r[0],u=n;if(!1!==r[0].trimIncompleteTimeInterval){const t=n[0][oR.dateBinningRange][0],r=n[n.length-1][oR.dateBinningRange][1];if(!0==(o===pP?t<s:r>a))if(o===pP){let i=t;for(;i<s&&n.length>0;)n.shift(),n.length>0&&(i=null===(e=n[0][oR.dateBinningRange])||void 0===e?void 0:e[0])}else{let t=r;for(;t>a&&n.length>0;)n.pop(),n.length>0&&(t=null===(i=n[n.length-1][oR.dateBinningRange])||void 0===i?void 0:i[1])}}return u}({data:h,seriesConfig:s,dateMinTimestamp:u,dateMaxTimestamp:l}),h=yield pq({queryObject:e,data:h,seriesConfig:s,queryConfig:r})}return h}))}function gq(t){const{dateRange:e,numberOfFeatures:i}=t,{dateMinTimestamp:n,dateMaxTimestamp:r}=e,s=function(t){return Math.floor(Math.min(Math.max(8,Math.sqrt(null!=t?t:8)),128)+.5)}(i),a=(r-n)/s,o=IT.findIndex((t=>t.threshold>a)),u=IT[o],{unitMs:l,preferredIntervalSize:h,unit:c}=u,d=a/l,f=h.findIndex((t=>t>=d)),m=h[f],v=0===f?h[0]:h[f-1];return{timeIntervalSize:m-d<d-v?m:v,timeIntervalUnits:c}}function yq(t,e){switch(t.valid=!1,e){case _D:t.invalidType=bT;break;case BD:t.invalidType=gT;break;case ND:t.invalidType=yT;break;case RD:t.invalidType=wT}}function wq(t,e){t.valid=!1,t.invalidType=e}function Sq(t){const{data:e,statType:i,onStatisticField:n,seriesX:r,seriesY:s,propertyFields:a}=t,o=t=>{var e;return null!==(e=t[n])&&void 0!==e?e:t[null!=s?s:""]};return e.map((function(t){let e;switch(i){case _F:e=t[1].length;break;case zF:e=sq(t[1],o);break;case HF:e=iq(t[1],.5,o);break;case VF:e=QW(t[1],o);break;case GF:e=XW(t[1],o);break;case WF:e=function(t,e){const i=HW(t,e);return i?Math.sqrt(i):i}(t[1],o);break;case $F:e=nq(t[1],o);break;case qF:e=HW(t[1],o)}let n;if(void 0!==s){if(n={[r]:t[0],[s]:e},void 0!==a){const e=uW({y:s,keys:a});!function(t,e,i){Object.keys(e).forEach((n=>{var r;void 0!==i[n]&&void 0!==e[n]&&(t[i[n]]=null!==(r=t[e[n]])&&void 0!==r?r:e[n])}))}(t[1][0],a,e),n=Object.assign(Object.assign({},n),t[1][0])}}else n={[r]:null!=e?e:0};return n}))}function xq(t){var e,i,n,r;const{query:s,data:a,statType:o,series:u,propertyFields:l}=t;let h=null===(i=null===(e=s.outStatistics)||void 0===e?void 0:e[0])||void 0===i?void 0:i.onStatisticField;void 0===h&&(h=u.type===RD?u.x:u.y);const c=null!==(r=null===(n=s.groupByFieldsForStatistics)||void 0===n?void 0:n[0])&&void 0!==r?r:u.x,d=function(t,...e){return ZW(t,YW,YW,e)}(a,(t=>t[c]));return Sq({data:Array.from(d),statType:o,onStatisticField:h,propertyFields:l,seriesX:u.x,seriesY:u.type===RD?void 0:u.y})}function Cq(t,e){let i=t;if(void 0!==t&&t.length>0){const n=function(t,e,...i){return ZW(t,YW,e,i)}(t,(t=>t.reduce(((t,e)=>Object.assign(t,e)),{})),(t=>t[e]));i=[...n.values()]}return i}function Oq(t,e){return function(i){var n;return(null===(n=i[t])||void 0===n?void 0:n.toString())===e}}function Mq(t,e){const i=t;if(iM(e)!==ND){const i=BM(e),n=e[0].y;t.forEach((t=>{let e=0;if(i.forEach((i=>{const n=t[i];!0===Number.isFinite(n)&&(e+=n)})),t[oR.technicalSortingFieldBySum]=e,!0===Number.isFinite(e)&&e>0){const i=t[n];if(!0===Number.isFinite(i)){const n=i/e;t[oR.technicalSortingFieldByPercent]=n}}}))}return i}function Tq(t){var e,i,n;const r=t.dataSource,s=t.series,a=iM(s),o=r.data.dataItems;let u="";const l=[];for(let t=0;t<s.length;t+=1){const h=s[t],{query:c}=h;if(void 0!==c){let t=o;const s=c.where;if(!1===TM(s)){u=CM(s);const e=OM({where:s});t=t.filter(Oq(u,e))}const d=t;void 0!==c.orderByFields&&IG({arrayToSort:d,orderByFields:c.orderByFields,forceAscendingOrder:!0,seriesType:a});const f=null!==(n=null===(i=null===(e=c.outStatistics)||void 0===e?void 0:e[0])||void 0===i?void 0:i.statisticType)&&void 0!==n?n:iP.statisticType;l.push(xq({query:c,data:d,statType:f,series:h,propertyFields:r.configFields}))}}let h=l.flat();return""!==u&&(h=Cq(h,s[0].x)),h=Mq(h,s),h}function kq(t,e){var i,n;void 0!==t&&void 0!==e&&(t[e]=null!==(n=null!==(i=t[e])&&void 0!==i?i:t[e.toUpperCase()])&&void 0!==n?n:t[e.toLowerCase()],void 0!==t[e]?(e!==e.toUpperCase()&&delete t[e.toUpperCase()],e!==e.toLowerCase()&&delete t[e.toLowerCase()]):delete t[e])}function Iq(t){return yd(this,void 0,void 0,(function*(){const{queryResponse:e,chartConfig:i,mapToStatField:n,splitByField:r,fieldOID:s,isDateField:a,isTimeBinningSeries:o,rendererType:u,subtypeInfo:l,fieldList:h}=t,{series:c}=i,d=c.length,f=kM(c),m=iM(c),{x:v}=c[0],p=tG(i),b=c[0].y,{originalCategoryValue:g,originalDateValue:y,typeOrDomainFieldName:w,typeOrDomainIdValue:S}=oR;return Promise.all(e.map(((t,e)=>yd(this,void 0,void 0,(function*(){var i,x,C,O,M;const T=Object.assign({},t.attributes),k=function(t){var e,i;const{extent:n}=null!==(i=null!==(e=t.aggregateGeometries)&&void 0!==e?e:t.geometry)&&void 0!==i?i:{};return null==n?void 0:n.toJSON()}(t);void 0!==k&&(T[pC]=k),void 0!==b&&f!==HC&&kq(T,b);let I=T[v];null===I&&!0===(null===(x=null===(i=c[0])||void 0===i?void 0:i.query)||void 0===x?void 0:x.fetchNullValues)&&f!==HC&&(T[g]=null,I="null"),!0===o&&(I=function(t){var e,i,n,r,s,a,o,u,l;const h=[];for(let r=1;r<=6;r+=1){const s=null!==(n=null!==(i=null!==(e=t[`EXPR_${r}`])&&void 0!==e?e:t[`Expr${r}`])&&void 0!==i?i:t[`expr${r}`])&&void 0!==n?n:t[`EXPR${r}`];null!==s&&h.push(s)}return MV.local(Number(null!==(r=h[0])&&void 0!==r?r:1969),Number(null!==(s=h[1])&&void 0!==s?s:1),Number(null!==(a=h[2])&&void 0!==a?a:1),Number(null!==(o=h[3])&&void 0!==o?o:0),Number(null!==(u=h[4])&&void 0!==u?u:0),Number(null!==(l=h[5])&&void 0!==l?l:0)).valueOf()}(T));const{outStatisticFieldName:A}=null!==(C=bC.outStatistics)&&void 0!==C?C:{};if(f===WC&&void 0!==A){const t=rM({value:null!==(M=null===(O=T[r])||void 0===O?void 0:O.toString())&&void 0!==M?M:""}),e=n.get(t);void 0!==e&&(kq(T,A),T[e]=T[A],delete T[A])}else if(f===$C){if(1===d&&!1===o&&u!==ID){const e=yield cW(t);void 0!==e&&(T[Y$]=e)}!0===a?T[y]=I:"null"!==I&&(T[g]=I),p!==FD&&p!==PD||(I=`${I}-${e}`),T[bC.uniqueIdsName]=T[s]}const j=jM({subtypeInfo:l,fieldList:h,fieldName:v,fieldValueToMatch:f===$C?T[g]:I});return void 0!==j&&j!==I&&f!==HC&&(T[g]=j,T[w]=v,T[S]=I),m===ND&&"number"==typeof I&&(void 0===T[g]&&(T[g]=I),I=`${I}`),void 0!==I&&(void 0===T[g]&&(T[g]=T[v]),T[v]=I),T})))))}))}function Aq(t){var e;return yd(this,void 0,void 0,(function*(){const{queryObject:i,uniqueQuery:n,chartConfig:r,mapToStatField:s,abortKey:a,elementCount:o,isTimeBinningSeries:u}=t,{series:l}=r;let h=[];const c=kM(l)===WC?CM(null===(e=null==l?void 0:l[0].query)||void 0===e?void 0:e.where):"",d=yield eT({queryObject:i,queryConfig:n,featureCount:o,abortKey:a}),f=yield yM(i),m=SM(f),v=function(t){return t.filter((t=>"esriFieldTypeDate"===t.type)).map((t=>t.name))}(f),{x:p}=l[0],b=v.includes(p),g=gM(i),{rendererType:y}=mM(g.renderer),w=AM(i);return h=yield Iq({queryResponse:d,chartConfig:r,mapToStatField:s,splitByField:c,fieldOID:m,isDateField:b,isTimeBinningSeries:u,rendererType:y,subtypeInfo:w,fieldList:f}),""!==c&&(h=Cq(h,p)),h=Mq(h,l),h}))}function jq(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{chartConfig:r,queryObject:s,queryConfig:a,numberMaxOfFeaturesToFetch:o,behaviorAfterLimit:u,isGaugeByFeature:l}=t,{series:h}=r,c=kM(h),{x:d}=h[0],f=h.length;let m,v;return!0===LM(h)?(v=null!==(n=null===(i=null===(e=h[0].query)||void 0===e?void 0:e.outStatistics)||void 0===i?void 0:i.filter((t=>t.statisticType!==KF)).length)&&void 0!==n?n:0,m=v):m=yield function(t){return nw(this,void 0,void 0,(function*(){const{queryConfig:e,x:i,queryObject:n,queryType:r,isGaugeByFeature:s}=t;let a;if(void 0!==n){const t=gM(n),o=SM(yield yM(n)),{where:u,gdbVersion:l,timeExtent:h,geometry:c,distance:d,units:f}=e,m=GM(h),v=$M(c),p=VM([u,t.definitionExpression]),b={returnDistinctValues:!0,outFields:!0===s||r===$C?[o]:[i],where:p,gdbVersion:null!=l?l:t.gdbVersion,timeExtent:null!=m?m:t.timeExtent,geometry:v,cacheHint:!0};void 0!==b.geometry&&!0===PM(t)&&(void 0!==d&&(b.distance=d),void 0!==f&&(b.units=f));try{a=yield n.queryFeatureCount(b)}catch(t){a=NaN}}return a}))}({queryObject:s,x:d,queryType:c,queryConfig:a,isGaugeByFeature:l}),void 0!==m&&(v=m*f),u===lC&&void 0!==v&&void 0!==o&&o<v&&(v=o,m=Math.ceil(v/f)),{categoryOrDateCount:m,elementCount:v}}))}function Fq(t){const{arrayToSort:e,chartConfig:i,orderByFieldsConfig:n}=t,{series:r,dataSource:s}=i;if(!1==((null==s?void 0:s.type)===tP&&!0===s.processed)){const t=kM(r),s=iM(r),a=tG(i),{x:o}=r[0],{sortOrder:u,sortingField:l}=function(t,e){const i=t[0],{x:n,y:r}=i,s=iM([i]),a=nM(i);let o,u,l=null==e?void 0:e[0];if(s===ND)void 0!==l&&!1===oM(l)&&([o,u]=l.split(" "),u=null!=u?u:QD.Ascending,o!==n&&o!==kP||i.sortLabelsBy!==TP||(o=oR.originalCategoryValue));else if(l=null!=l?l:`${n}`,void 0!==(null==l?void 0:l[0])&&([o,u]=l.split(" "),u=null!=u?u:QD.Ascending,t.length>1&&o!==n))switch(a){case ZD:o=oR.technicalSortingFieldBySum;break;case XD:o=oR.technicalSortingFieldByPercent;break;case YD:void 0!==r&&(o=r)}return{sortOrder:u,sortingField:o}}(r,n);IG({arrayToSort:e,orderByFields:void 0!==l?[`${l} ${u}`]:[],isNonAggregated:t===$C,sortByXAxisField:l===o,forceAscendingOrder:a===PD&&l===o,seriesType:s})}}function Dq(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryConfig:i,options:n,queryObject:r,abortKey:s}=t,{chartLimits:a}=null!=n?n:{},{behaviorAfterLimit:o}=null!=a?a:{},u={valid:!0};let l;const h=e.series,c=h[0];if(void 0!==c&&void 0!==r){const t=iM(h,0),{uniqueQuery:d,mapToStatField:f}=yield yG({chartConfig:e,queryObject:r,queryConfig:i,options:n});let{categoryOrDateCount:m,elementCount:v}=yield jq({chartConfig:e,queryObject:r,queryConfig:i,behaviorAfterLimit:o,numberMaxOfFeaturesToFetch:d.num});const p=!1===Number.isFinite(v);let b=!0===p||sM({count:null!=v?v:0,seriesCount:h.length,seriesType:t,chartLimits:a});if(!0===b&&(l=yield Aq({queryObject:r,uniqueQuery:d,chartConfig:e,mapToStatField:f,elementCount:v,isTimeBinningSeries:!1,abortKey:s}),!0===p&&(m=l.length,v=m*h.length,b=sM({count:v,seriesCount:h.length,seriesType:t,chartLimits:a})),!0===b))if(t===ND){const t=LM(h);!0===t&&(l=NG(l[0]));!0===_G(l,!0===t?IP:c.y)?u.data={dataItems:l}:wq(u,ST)}else t!==_D&&t!==BD||(l=yield aq({queryObject:r,seriesData:l,chartConfig:e,queryConfig:i,categoryOrDateCount:m,behaviorAfterLimit:o,abortKey:s}),v=l.length*h.length,b=sM({count:v,seriesCount:h.length,seriesType:t,chartLimits:a}),!0===b&&(l=function(t,e){var i,n;const r=t;if((null===(n=null===(i=e[0].query)||void 0===i?void 0:i.outStatistics)||void 0===n?void 0:n[0].statisticType)===_F){const i=e.reduce(((t,e)=>{var i,n,r;return t[null!==(r=null===(n=null===(i=e.query)||void 0===i?void 0:i.outStatistics)||void 0===n?void 0:n[0].outStatisticFieldName)&&void 0!==r?r:e.y]=0,t}),{});for(let e=0;e<t.length;e+=1)t[e]=Object.assign(Object.assign({},i),t[e])}return r}(l,h),Fq({arrayToSort:l,orderByFieldsConfig:d.orderByFields,chartConfig:e}),u.data={dataItems:l,timeIntervalInfo:{}}));!1===b&&yq(u,t),u.count=v}return u}))}function Pq(t){var e,i;return yd(this,void 0,void 0,(function*(){const{chartConfig:n,queryConfig:r,queryObject:s,abortKey:a,binnedServerData:o,options:u}=t,{chartLimits:l}=null!=u?u:{},{behaviorAfterLimit:h}=null!=l?l:{},c=n.series,d=c[0],f={valid:!0};let m;if(void 0!==s){const{x:t,timeIntervalUnits:v,timeIntervalSize:p}=d,b=function(t){const{series:e,isTimeBinningSeries:i,setTimeBinningInfoWhenNotProvided:n}=t;let r=!1;if(iM([e])===BD&&!0===i){const{timeIntervalUnits:t,timeIntervalSize:i}=e,s=function(t,e){return void 0!==t&&void 0!==e&&e>0}(t,i);r=!1===s&&!0===n}return r}({series:d,isTimeBinningSeries:!0,setTimeBinningInfoWhenNotProvided:null==u?void 0:u.setTimeBinningInfoWhenNotProvided}),g=null!==(e=null==o?void 0:o.timeBinningStats)&&void 0!==e?e:yield function(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,queryConfig:i,x:n}=t,r=`MIN_${n}`,s=`MAX_${n}`,a=`COUNT_${n}`,o=Object.assign(Object.assign({},i),{outStatistics:[{statisticType:VF,onStatisticField:n,outStatisticFieldName:r},{statisticType:GF,onStatisticField:n,outStatisticFieldName:s},{statisticType:_F,onStatisticField:n,outStatisticFieldName:a}]});delete o.groupByFieldsForStatistics,delete o.orderByFields;const u=yield XM({queryObject:e,queryConfig:o});return{dateRange:{dateMinTimestamp:u.get(r),dateMaxTimestamp:u.get(s)},numberOfFeatures:u.get(a)}}))}({queryObject:s,queryConfig:r,x:t}),y=!0===b?gq(g):{timeIntervalUnits:v,timeIntervalSize:p},{uniqueQuery:w,mapToStatField:S}=yield yG({chartConfig:n,queryConfig:r,queryObject:s,timeIntervalInfo:y,options:u}),{numberOfFinalBinsWithinDataRange:x}=dq({dateMinTimestamp:g.dateRange.dateMinTimestamp,dateMaxTimestamp:g.dateRange.dateMaxTimestamp,timeIntervalInfo:y});let C=x*c.length;C=oq(C,y.timeIntervalUnits);const{elementCount:O}=yield jq({chartConfig:n,queryObject:s,queryConfig:r,behaviorAfterLimit:h,numberMaxOfFeaturesToFetch:w.num});if(!0===sM({count:null!=C?C:0,seriesCount:c.length,seriesType:BD,chartLimits:l})){if(m=null!==(i=null==o?void 0:o.data)&&void 0!==i?i:yield Aq({queryObject:s,uniqueQuery:w,chartConfig:n,mapToStatField:S,elementCount:O,abortKey:a,isTimeBinningSeries:!0}),f.binnedServerData={data:ON(m),timeBinningStats:g},m=yield bq({queryObject:s,queryConfig:r,data:m,x:t,seriesConfig:c,dateRange:g.dateRange,timeIntervalInfo:y}),h===lC){const t=VG(n,null==u?void 0:u.chartLimits);void 0!==t&&m.splice(t)}}else f.valid=!1,f.invalidType=gT;f.data={dataItems:m,timeIntervalInfo:y},f.count=C}return f}))}function Lq(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryConfig:i,queryObject:n,abortKey:r,options:s}=t,{setTimeBinningInfoWhenNotProvided:a}=null!=s?s:{},o={valid:!0};if(void 0!==n){const t=FM({seriesConfig:e.series[0],xAxisValueFormatType:tG(e),setTimeBinningInfoWhenNotProvided:a}),{uniqueQuery:u,mapToStatField:l}=yield yG({chartConfig:e,queryObject:n,queryConfig:i,setTimeBinningInfoWhenNotProvided:a,options:s}),h=yield Aq({queryObject:n,uniqueQuery:u,elementCount:1,chartConfig:e,mapToStatField:l,isTimeBinningSeries:t,abortKey:r});o.data={dataItems:h}}return o}))}function Eq(t,e){let i;return void 0!==e&&e.length>0&&(i=`${t} IN (${e.join(",")})`),i}function Nq(t){return yd(this,void 0,void 0,(function*(){const{chartData:e,queryConfig:i,chartConfig:n,options:r,queryObject:s,selectionData:a}=t,{dataSource:o,series:u}=n;let l;if(o.type===eP&&void 0!==a){const{selectionOIDs:t}=a;if(void 0!==e&&!1===LG({dataContext:e[0],chartConfig:n,chartLimits:null==r?void 0:r.chartLimits}))l=e.filter((e=>{const i=e[bC.uniqueIdsName];return null==t?void 0:t.includes(i)}));else if(void 0!==t&&t.length>0&&void 0!==i){const{maxOIDsPerSelectionQuery:e}={maxScatterCellsPerQuery:500,maxScatterCellsPerQueryForStandard:175,maxElementsPerSelectionQuery:25,maxOIDsPerSelectionQuery:2e3},a=Math.ceil(t.length/e),o=yield function(t){return yd(this,void 0,void 0,(function*(){const{numberOfQueries:e,selectionOIDs:i,chartConfig:n,queryConfig:r,options:s,queryObject:a}=t,{series:o}=n,u=iM(o),l=[],h=gM(a),{objectIdField:c}=h,{maxOIDsPerSelectionQuery:d}={maxScatterCellsPerQuery:500,maxScatterCellsPerQueryForStandard:175,maxElementsPerSelectionQuery:25,maxOIDsPerSelectionQuery:2e3};for(let t=0;t<e;t+=1){const e=t*d,h=(t+1)*d-1,f=Eq(c,i.slice(0===e?0:e-1,h)),m=Object.assign({},r);switch(m.where=VM([m.where,f]),u){case ND:case _D:case BD:case VD:l.push(Lq({queryObject:a,chartConfig:n,options:s,queryConfig:m}));break;case ED:l.push(WW({queryObject:a,chartConfig:n,queryConfig:m,options:s,sortData:!1,calculateTrendline:!1}));break;case zD:l.push(DW({queryObject:a,queryConfig:m,chartConfig:n,x:o[0].x}))}}return yield Promise.all(l)}))}({numberOfQueries:a,selectionOIDs:t,queryConfig:i,queryObject:s,options:r,chartConfig:n});l=function(t){const{dataFetchingResults:e,numberOfQueries:i,series:n}=t,r=iM(n);let s=[];for(let t=0;t<i;t+=1){const i=e[t],{dataItems:a}=r===ED?i:i.data;switch(r){case _D:case BD:case VD:case zD:case ND:!0===i.valid&&void 0!==a&&(!0===LM(n)?s=NG(a[0]):s.push(...a));break;case ED:{const{x:t,y:e}=n[0];s.push(...a.map((i=>({[t]:i[t],[e]:i[e]}))))}}}return s}({dataFetchingResults:o,numberOfQueries:a,series:u})}}return l}))}function Rq(t){return yd(this,void 0,void 0,(function*(){const{whereList:e,queryObject:i,queryFilter:n,queryConfig:r}=t;let s=[];if(e.length>0){const t=25,a=[],o=Math.ceil(e.length/t);for(let i=0;i<o;i+=1){const r=i*t,s=(i+1)*t;let o=VM(e.slice(0===r?0:r-1,s),"OR");o=VM([n,o]),a.push(o)}const u=function*(t){const{filterList:e,queryObject:i,queryConfig:n}=t;for(let t=0;t<e.length;t+=1){const r=Object.assign({},n);r.where=VM([r.where,e[t]]),yield iT({queryObject:i,queryConfig:r,uniqueFeature:!0})}}({filterList:a,queryObject:i,queryConfig:r});s=(yield Promise.all(u)).flat(),s=Array.from(new Set(s))}return s}))}function Bq(t,e){let i;return i=t instanceof WA?!0===e?"dateY":"dateX":t instanceof KA?!0===e?"categoryY":"categoryX":!0===e?"valueY":"valueX",i}function _q(t,e){t.name=e}function zq(t){const{axes:e,currentSeries:i,tooltipValueFormat:n}=t,r=e[1].valueFormat,s=e[0].valueFormat;if((null==r?void 0:r.type)===DD){const t=IV(r.type,i.chart.language.locale);t.numberFormat=r.intlOptions,JV(i.uid,{tooltipValueYNumberFormatCallback:e=>t.format(e,null==n?void 0:n.intlOptions)})}if((null==s?void 0:s.type)===DD){const t=IV(s.type,i.chart.language.locale);t.numberFormat=s.intlOptions,JV(i.uid,{tooltipValueXNumberFormatCallback:e=>t.format(e,null==n?void 0:n.intlOptions)})}}function Vq(t){const{chart:e,lineSeries:i,applyPropertiesToClones:n}=t,r=i.bullets.push(new Pb);return WV(r.uid,{isBulletMarker:!0}),!1!==n&&(r.applyOnClones=!0),i.bulletsContainer.parent=e.seriesContainer,r}function Gq(t){var e;const{series:i,seriesConfig:n,rotationChanged:r,isRotated:s}=t;switch(n.stackedType){case ZD:i.stacked=!0,i instanceof rj&&(i.stackToNegative=null!==(e=n.stackNegativeValuesToBaseline)&&void 0!==e?e:oR.lineSeries.stackNegativeValuesToBaseline),r===s?i.dataFields.valueYShow=void 0:i.dataFields.valueXShow=void 0,i.updateStacking();break;case XD:i.stacked=!0,!0===s?i.dataFields.valueXShow="totalPercent":i.dataFields.valueYShow="totalPercent",i.updateStacking();break;default:i.stacked=!1,r===s?i.dataFields.valueYShow=void 0:i.dataFields.valueXShow=void 0}}function $q(t){var e,i,n,r;const{chart:s,series:a,seriesType:o,marker:u,numberOfChartSeries:l,ignoreSmoothRenderingLimit:h}=t;let c=function(t){return()=>{const{chart:e,marker:i}=t;i.clones.each((t=>{qG(t,!1===t$(t,e))}))}}({marker:u,chart:s});const d=null!=l?l:1,f=s.data.length*d+d;!0!==h&&f>oR.elementLimitForSmoothRendering&&(c=QN(c,oR.debounceTime)),null===(e=s.xAxes.getIndex(0))||void 0===e||e.events.on(wR,c),null===(i=s.yAxes.getIndex(0))||void 0===i||i.events.on(wR,c),o===BD&&(null===(n=s.xAxes.getIndex(0))||void 0===n||n.events.on(wR,(()=>{T$(a)})),null===(r=s.yAxes.getIndex(0))||void 0===r||r.events.on(wR,(()=>{T$(a)})))}function Wq(t,e){let i;return void 0!==t&&void 0!==e&&(i=t.find((t=>t.sliceId===e))),i}function qq(t){t.series.each((t=>{const e=KV(t.uid,"updateStyleAndSelectionCallbackDisposer");void 0!==e&&!1===e.isDisposed()&&e.dispose()}))}function Hq(t){const{chart:e,selectionSource:i,clearOnlyVisibleSeries:n,disposeStyleAndSelection:r}=t;!1!==r&&qq(e),UV(e.uid,{currentSelectionDataItems:void 0,currentSelectionOIDs:void 0,currentSelectionIndexes:void 0,computedSelectionDataItems:void 0,computedSelectionIndexes:void 0,pendingSelectionQueries:!1}),XG(e)&&(e instanceof QA?function(t,e=!0){let i;t.series.each(((t,n)=>{var r,s,a;if((!1===e||!0===t.visible)&&(void 0===i||i!==zD&&i!==ED)){let e;i=MG(t,n),i===zD||i===_D?e=null===(r=t.columns)||void 0===r?void 0:r.values:i!==ED&&i!==BD||(e=null===(a=null===(s=JG(t))||void 0===s?void 0:s.clones)||void 0===a?void 0:a.values),void 0!==e&&e.forEach((t=>{OW({element:t,selected:!1,backToDefaultState:!0})}))}}))}(e,null==n||n):e instanceof Oj&&function(t){const e=t.series.getIndex(0);void 0!==e&&e.slices.each((t=>{OW({element:t,selected:!1,backToDefaultState:!0})}))}(e)),z$({data:{selectionSource:null!=i?i:lA},htmlContainer:e.htmlContainer})}function Uq(t){var e;nT(),void 0!==(e=t.htmlContainer)&&e.dispatchEvent(new window.CustomEvent(E$.TooManySelectedElements,N$())),Hq({chart:t})}function Kq(t,e){let i="";if(""!==t.trim()&&void 0!==e)if(null===e)i=`${t} IS NULL`;else{const n="number"!=typeof e?"'":"";i=`${t}=${n}${e}${n}`}return i}function Jq(t,e){let i="";const n=e[oR.dateBinningRange];if($P(n)&&2===n.length){const[e,r]=n;if(Number.isFinite(e)&&Number.isFinite(r)){i=`${t}>='${EG(e)}' AND ${t}<='${EG(r)}'`}}return i}function Yq(t){const{xAxisField:e,splitBy:i,dataContext:n,isDateAxis:r,isXAxisFieldDouble:s}=t;let a="";if(oR.dateBinningRange in n)a=Jq(e,n);else{let t=kG({value:n[e],dataContext:n,keepNullValues:!0,specificField:oR.typeOrDomainIdValue});!0===s?a=function(t,e){let i="";if(!0===Number.isFinite(t)){const n=1/Math.pow(10,oR.queryMaxFloatPrecision);i=`${e}>=${t-n} AND ${e}<=${t+n}`}return i}(t,e):(!0===r&&(t=EG(t)),a=MM(Kq(e,t),!1))}return a=VM([a,MM(null!=i?i:"",!1)]),a}function Zq(t){const{xAxisField:e,dataContext:i,dataTransformationType:n}=t;let r="";const{minValue:s,maxValue:a}=i;if(Number.isFinite(s)&&Number.isFinite(a)){const t=function(t,e){let i=t;switch(e){case $D:i=`log(${t})`;break;case WD:i=`power(CAST(${t} AS FLOAT),0.5)`}return i}(e,n);r=VM([`${t}>=${s}`,`${t}<=${a}`])}return r}function Xq(t){const{chartType:e}=t;let i="";switch(e){case ED:i=function(t){const{dataContext:e,xAxisField:i,yAxisField:n,options:r}=t;let s="";const{dataContextXMinField:a,dataContextXMaxField:o,dataContextYMinField:u,dataContextYMaxField:l}=oR.scatterPlotAggregationFields;if(!0===PG({dataContext:e,chartLimits:null==r?void 0:r.chartLimits})){const{[a]:t,[o]:r}=e,h=i!==n?e[u]:t,c=i!==n?e[l]:r;if(!1===Number.isNaN(t)&&!1===Number.isNaN(r)&&!1===Number.isNaN(h)&&!1===Number.isNaN(c)){const e=[];t===r?e.push(`${i}=${t}`):(e.push(`${i}>=${t}`),e.push(`${i}<${r}`)),h===c?e.push(`${n}=${h}`):(e.push(`${n}>=${h}`),e.push(`${n}<${c}`)),s=VM(e)}}else s=VM([MM(Kq(i,e[i])),void 0!==n?MM(Kq(n,e[n])):""]);return s}(t);break;case _D:case BD:i=Yq(t);break;case zD:i=Zq(t);break;case ND:i=function(t){const{xAxisField:e,dataContext:i,queryType:n}=t;let r=oR.typeOrDomainIdValue in i?i[oR.typeOrDomainIdValue]:i[oR.originalCategoryValue];return void 0===r&&(r=i[e]),n===HC?"":MM(Kq(e,r),!1)}(t)}return i}function Qq(t){var e;const{groupOfSlicesDataContext:i,chart:n}=t,r=null!=i?i:null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.find((t=>!0===t[yC]));return null==r?void 0:r[oR.pieChart.technicalFieldGroupedSlices]}function tH(t){return!0===(null==t?void 0:t[yC])}function eH(t){var e,i,n,r,s,a;const{chart:o,seriesConfig:u,commonStrings:l}=t,h=u[0],c=o.data.reduce(((t,e)=>{var i;let n=null!==(i=e[IP])&&void 0!==i?i:e[h.y];return!1===Number.isFinite(n)&&(n=0),n+t}),0),d=null!==(i=null===(e=null==h?void 0:h.sliceGrouping)||void 0===e?void 0:e.percentageThreshold)&&void 0!==i?i:0,f=[];let m,v=0;const p=null!==(r=null===(n=o.data.find((t=>!0===t[yC])))||void 0===n?void 0:n[oR.pieChart.technicalFieldGroupedSlices])&&void 0!==r?r:[],b=[...o.data,...p].filter((t=>{var e;let i=!0;const n=null!==(e=t[IP])&&void 0!==e?e:t[h.y];if(!0===Number.isFinite(n)){const e=n/c*100;t[oR.pieChart.technicalFieldSlicePercent]=e,e<=d&&!0!==t[yC]&&(v+=n,f.push(t),i=!1)}return!0===t[yC]&&(m=t,i=!1),i}));if(d>0&&f.length>0){const t=v/c*100,e=LM(u),i=Object.assign(Object.assign({},m),{[yC]:!0,[!0===e?kP:h.x]:null!==(a=null===(s=h.sliceGrouping)||void 0===s?void 0:s.label)&&void 0!==a?a:null==l?void 0:l.pieChart.defaultSliceGroupingLabel,[!0===e?IP:h.y]:v,[oR.pieChart.technicalFieldSlicePercent]:t,[oR.pieChart.technicalFieldGroupedSlices]:f});b.push(i)}o.data=b}function iH(t){const{options:e,elementDataContext:i,selectionDataItems:n,layerOidField:r,xAxisField:s,yAxisField:a,seriesType:o}=t,{originalCategoryValue:u}=oR;let l,h=!1,c=i;if(void 0!==i&&void 0!==n)switch(o){case _D:case BD:if(void 0!==s&&void 0!==a){const t=i;l=e=>{var i,n;let o;if(void 0!==r&&r in e&&r in t)o=e[r]===t[r];else if(oR.dateBinningRange in t&&"number"==typeof e[s]){const i=e[s],[n,r]=t[oR.dateBinningRange];o=i>=n&&i<=r&&a in e}else{const r=null!==(i=t[u])&&void 0!==i?i:t[s];o=(null!==(n=e[u])&&void 0!==n?n:e[s])===r&&a in e}return o}}break;case ED:if(void 0!==s&&void 0!==a){const t=i;if(!1===PG({dataContext:t,chartLimits:null==e?void 0:e.chartLimits}))l=e=>{let i;return i=void 0!==r&&r in t&&r in e?e[r]===t[r]:e[s]===t[s]&&e[a]===t[a],i};else{const{dataContextXMinField:e,dataContextXMaxField:i,dataContextYMinField:n,dataContextYMaxField:r}=oR.scatterPlotAggregationFields,{[e]:o,[i]:u}=t,h=s!==a?t[n]:o,c=s!==a?t[r]:u,d=t=>{var e;const i=null!==(e=t[s])&&void 0!==e?e:NaN,n=null!=o?o:NaN;return o===u?i===n:(null!=i?i:NaN)>=n&&(null!=i?i:NaN)<(null!=u?u:NaN)},f=t=>{var e;const i=null!==(e=t[a])&&void 0!==e?e:NaN,n=null!=h?h:NaN;return h===c?i===n:i>=n&&i<(null!=c?c:NaN)};l=t=>d(t)&&f(t)}}break;case zD:l=t=>{let e=!1;const{minValue:n,maxValue:r}=i;if(void 0!==s&&s in t){const i=t[s];e="number"==typeof i&&i>=n&&i<=r}else if("minValue"in t&&"maxValue"in t){const{minValue:i,maxValue:s}=t;e=!1==(n>=s||r<=i)}return e};break;case ND:void 0!==s&&(l=t=>{var e;const n=i,a=(null!==(e=!0===tH(n)?Qq({groupOfSlicesDataContext:n}):[n])&&void 0!==e?e:[]).some((e=>{var i,a;let o;if(void 0!==r&&r in e&&r in n)o=t[r]===e[r];else{o=(null!==(i=e[u])&&void 0!==i?i:e[s])===(null!==(a=t[u])&&void 0!==a?a:t[s])}return!0===o&&(c=e),o}));return a})}return void 0!==l&&(h=!0===n.some(l)),{isPartOfIt:h,selectedDataContext:c}}function nH(t,e){const i=HV(t.uid,"actionMode");if(!0===((i===hA||i===mA)&&e.length>1))Hq({chart:t});else{const i=t instanceof Oj;e.forEach((t=>{OW({element:t,useNativeState:i,selected:!0})}))}}function rH(t){const{dataContext:e,yAxisField:i,yList:n,xAxisField:r,splitBy:s,chartType:a}=t;let o=Object.assign({},e);if(void 0!==e&&(a===_D||a===BD||a===ND)){a!==ND&&n.forEach((t=>{t!==i&&delete o[t]}));const t=kG({value:e[r],dataContext:e});o[r]=t,!1===oM(s)&&(o[CM(s)]=OM({where:s,escape:!1})),o=FG(o)}return o}function sH(t){var e,i,n,r,s;return yd(this,void 0,void 0,(function*(){const{series:a,seriesIndex:o,queryObject:u,elementsToApplySelectionTo:l,options:h,dataWasUpdated:c,sortChanged:d,groupOfSlicesWasUpdated:f,xAxisField:m,yAxisField:v,rotationChanged:p}=t,{filterBySelection:b,selectionData:g,returnSelectionIndexes:y,returnSelectionOIDs:w}=null!=h?h:{},{selectionIndexes:S}=null!=g?g:{},{chart:x}=a,C=HV(x.uid,"config"),O=HV(x.uid,"queryConfig");if(!0!==b&&void 0!==(null==l?void 0:l[0])&&void 0!==C){const t=iM(null==C?void 0:C.series);let b;if(void 0!==u){const t=gM(u);b=t.objectIdField}const M=HV(x.uid,"currentSelectionDataItems"),T=HV(x.uid,"currentSelectionOIDs");let k,I=!1,A=!1,j=!1;if(!0!==(null==h?void 0:h.viewExtentUpdated)){k=yield function(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,dataWasUpdated:i,currentSelectionOIDs:n,currentSelectionDataItems:r,selectionData:s,xAxisField:a,returnSelectionOIDs:o}=t,{selectionItems:u,selectionOIDs:l}=null!=s?s:{};let h;const c=iM(e.series)!==zD&&void 0!==u&&u.length>0&&a in u[0]==0;return!0==(!1!==o&&void 0!==l&&l.length>0&&(!0===i||!0===c||!1===iR(l,n)))?h=yield Nq(t):void 0!==u?h=u:void 0!==r&&(h=r),h}))}({currentSelectionDataItems:M,currentSelectionOIDs:T,chartData:x.data,chartConfig:C,queryConfig:O,options:h,queryObject:u,dataWasUpdated:c,selectionData:g,xAxisField:m,returnSelectionOIDs:w});const t=HV(x.uid,"currentSelectionIndexes");j=!1===iR(k,M);const i=!1===iR(S,t);I=!0===d||!0===c||!0===f||!0===p||void 0!==k&&!0===j;let n=!0;if(void 0!==S&&S.size>0){const{indexesToSelect:t}=null!==(e=S.get(null!=o?o:0))&&void 0!==e?e:{};n=void 0!==t&&void 0===t[0]}A=!0===c||!0===f||!0===p||!1===n&&!0===i}if(!0===I&&void 0!==k&&k.length>0){const{selectedIndexes:t,newSelectionDataItems:e}=function(t){var e,i;const{chart:n,chartConfig:r,series:s,options:a,elementsToApplySelectionTo:o,selectionDataItems:u,layerOidField:l,xAxisField:h,yAxisField:c}=t,d=iM(r.series),f=[],m=[],v=[],p=BM(r.series),b=s instanceof YA&&null!==(i=null===(e=s.dataFields)||void 0===e?void 0:e.customValue)&&void 0!==i?i:"";return o.forEach((t=>{var e,i,r;if(t instanceof yA==0){let s=!1,o=null===(e=t.dataItem)||void 0===e?void 0:e.dataContext;const{isPartOfIt:g,selectedDataContext:y}=iH({elementDataContext:null===(i=t.dataItem)||void 0===i?void 0:i.dataContext,options:a,selectionDataItems:u,layerOidField:l,xAxisField:h,yAxisField:c,seriesType:d});s=g,o=y,!0===s?(f.push(t),void 0!==t.dataItem&&m.push(null===(r=t.dataItem)||void 0===r?void 0:r.index),v.push(rH({dataContext:o,yAxisField:c,yList:p,xAxisField:h,splitBy:b,chartType:d}))):OW({element:t,useNativeState:n instanceof Oj,selected:!1})}})),nH(n,f),{selectedIndexes:m,newSelectionDataItems:v}}({chart:x,chartConfig:C,options:h,series:a,elementsToApplySelectionTo:l,selectionDataItems:k,layerOidField:b,xAxisField:m,yAxisField:v}),n=null!==(i=HV(x.uid,"computedSelectionDataItems"))&&void 0!==i?i:[];if(n.push(...e),UV(x.uid,{computedSelectionDataItems:n}),!0===y){const e=Array.from(new Set(t));let i=HV(x.uid,"computedSelectionIndexes");void 0===i&&(i=new Map),e.length===l.length?i.set(null!=o?o:0,{}):i.set(null!=o?o:0,{indexesToSelect:e}),UV(x.uid,{computedSelectionIndexes:i})}}else if(void 0!==S&&!0===A)k=function(t,e){var i;const n=[],r=[],s=HV(t.uid,"config"),a=BM(null!==(i=null==s?void 0:s.series)&&void 0!==i?i:[]);return t.series.each(((i,s)=>{var o,u,l;if(!0===i.visible&&!0!==KV(i.uid,"isOverlay")){const h=CG(i),c=OG(i),d=i instanceof YA&&null!==(u=null===(o=i.dataFields)||void 0===o?void 0:o.customValue)&&void 0!==u?u:"",f=MG(i,s),m=e.get(s);if(void 0!==m){let e;if(e=i instanceof Hj?i.columns:i instanceof xj?i.slices:null===(l=JG(i))||void 0===l?void 0:l.clones,void 0!==e){const{indexesToSelect:i}=m;e.each(((e,s)=>{var o;void 0===i||i.includes(s)?(n.push(rH({dataContext:null===(o=e.dataItem)||void 0===o?void 0:o.dataContext,yList:a,yAxisField:c,xAxisField:h,splitBy:d,chartType:f})),r.push(e)):OW({element:e,useNativeState:t instanceof Oj,selected:!1})}))}}}})),nH(t,r),n}(x,S);else{const e=void 0===k||0===k.length,i=e=>{var i,n;const{isPartOfIt:r}=iH({elementDataContext:null===(i=e.dataItem)||void 0===i?void 0:i.dataContext,options:h,selectionDataItems:null!==(n=null!=k?k:M)&&void 0!==n?n:[],layerOidField:b,xAxisField:m,yAxisField:v,seriesType:t});return r};l.forEach((t=>{OW({element:t,selected:!0===t.isActive||!0===i(t),useNativeState:x instanceof Oj,backToDefaultState:e})}))}if(JV(a.uid,{isSelectionApplied:!0}),!0===function(t){var e;return(null===(e=t.series)||void 0===e?void 0:e.values).filter((t=>!0!==KV(t.uid,"isOverlay"))).every((t=>!0===KV(t.uid,"isSelectionApplied")))}(x)&&(function(t){t.series.each((t=>JV(t.uid,{isSelectionApplied:void 0})))}(x),!0===j||!0===A)){const t=null!==(n=HV(x.uid,"computedSelectionDataItems"))&&void 0!==n?n:k;let e;if(void 0!==k&&UV(x.uid,{currentSelectionDataItems:t}),void 0!==(null==g?void 0:g.selectionOIDs)&&UV(x.uid,{currentSelectionOIDs:g.selectionOIDs}),!0===y&&(e=null!==(r=HV(x.uid,"computedSelectionIndexes"))&&void 0!==r?r:S,void 0!==e&&UV(x.uid,{currentSelectionIndexes:e})),void 0===k||0===k.length)Hq({chart:x,selectionSource:uA});else{const i={selectionItems:t,selectionSource:uA};!0===y&&(i.selectionIndexes=e),!1!==w&&(i.selectionOIDs=null!==(s=null==g?void 0:g.selectionOIDs)&&void 0!==s?s:HV(x.uid,"currentSelectionOIDs")),z$({data:i,seriesConfig:C.series,htmlContainer:x.htmlContainer})}UV(x.uid,{computedSelectionIndexes:void 0,computedSelectionDataItems:void 0})}}}))}function aH(t){var e,i,n,r,s;return yd(this,void 0,void 0,(function*(){const{chart:a,listSelectedElements:o,selectionSource:u}=t,l=HV(a.uid,"options"),h=HV(a.uid,"config");if(0===o.length)UV(a.uid,{currentSelectionDataItems:void 0,currentSelectionOIDs:void 0,currentSelectionIndexes:void 0,computedSelectionDataItems:void 0,computedSelectionIndexes:void 0}),z$({data:{selectionSource:u},seriesConfig:null==h?void 0:h.series,htmlContainer:a.htmlContainer});else try{qq(a);const t=[],r=[];let s=[];const u=new Map,{queryObject:c,xAxisField:d}=null!==(e=o[0])&&void 0!==e?e:{},f=kM(null==h?void 0:h.series),m=BM(null!==(i=null==h?void 0:h.series)&&void 0!==i?i:[]),v=function(t){let e=!1;t instanceof QA&&(e=!0===HV(t.uid,"isRotated")?t.yAxes.getIndex(0)instanceof WA:t.xAxes.getIndex(0)instanceof WA);return e}(a);let p=!1;if(void 0!==c){const t=yield yM(c);p=(null===(n=t.find((t=>t.name===d)))||void 0===n?void 0:n.type)===BF}if(o.forEach((e=>{var i,n,a;const{element:o,elementDataContext:h,yAxisField:c,chartType:b,splitBy:g,dataTransformationType:y}=e,w=null!=h?h:null===(i=null==o?void 0:o.dataItem)||void 0===i?void 0:i.dataContext;r.push(rH({dataContext:w,yAxisField:c,yList:m,xAxisField:d,splitBy:g,chartType:b}));const{seriesIndex:S,elementIndex:x}=e;if(void 0!==x){const t=null!==(a=null===(n=u.get(S))||void 0===n?void 0:n.indexesToSelect)&&void 0!==a?a:[];t.push(x),u.set(S,{indexesToSelect:Array.from(new Set(t))})}if(void 0!==w){const e=w[bC.uniqueIdsName];if("number"==typeof e)s.push(e);else{const e=Xq({chartType:b,dataContext:w,options:l,xAxisField:d,yAxisField:null!=c?c:"",splitBy:g,dataTransformationType:y,isDateAxis:v,isXAxisFieldDouble:p,queryType:f});t.push(e)}}})),!1!==(null==l?void 0:l.returnSelectionOIDs)&&void 0!==c&&t.length>0){const e=HV(a.uid,"queryConfig"),i=Object.assign({},e);delete i.groupByFieldsForStatistics,delete i.orderByFields,delete i.outStatistics;const n=yield Rq({whereList:t,queryObject:c,queryConfig:i});if(t.length===o.length)s=n;else for(let t=0;t<n.length;t+=1)s.push(n[t])}UV(a.uid,{currentSelectionDataItems:r,currentSelectionOIDs:s,currentSelectionIndexes:u});const b={selectionItems:r,selectionSource:oA};!0===(null==l?void 0:l.returnSelectionIndexes)&&(b.selectionIndexes=u),!1!==(null==l?void 0:l.returnSelectionOIDs)&&(b.selectionOIDs=s),z$({data:b,seriesConfig:null==h?void 0:h.series,htmlContainer:a.htmlContainer})}catch(t){UV(a.uid,{pendingSelectionQueries:!1});const{httpStatus:e}=t instanceof YM?null===(r=t.details)||void 0===r?void 0:r.details:null!==(s=t.details)&&void 0!==s?s:{};if(429!==e)throw t;Uq(a)}UV(a.uid,{pendingSelectionQueries:!1})}))}function oH(t,e){var i;if(void 0!==t&&void 0!==e){const n=t.defaultState.properties;if(n.fill=null!==(i=e.pattern)&&void 0!==i?i:e.fill,n.fillOpacity=1,void 0!==e.outline){const{outline:t}=e;n.stroke=t.stroke,n.strokeOpacity=1,n.strokeDasharray=t.strokeDasharray,n.strokeLinecap=t.strokeLinecap,n.strokeWidth=t.strokeWidth}}}function uH(t,e){return!0===nv(e)?e:t}function lH(t){const{series:e,callbackName:i,value:n}=t,r=KV(e.uid,i);return void 0!==r?r(n):n.toString()}function hH(t){t instanceof vj==!1&&t.series.each((t=>{!0!==KV(t.uid,"isOverlay")&&function(t){const e=new Ag;t.tooltip=e,t instanceof xj==0&&(e.label.maxWidth=oR.tooltipWidth,e.label.wrap=!0);const{dataTooltipStyle:i,dataTooltipStyleReversed:n}=oR;e.events.on(hR,(r=>{var s,a,o,u,l;const h=HV(t.chart.uid,"config");if(void 0!==h){const c=h.series.find((e=>e.id===t.id)),{dataTooltipReverseColor:d}=null!=c?c:{};if(!0===d){const t=r.target,i=t.background.fill;if(void 0!==i){t.background.stroke=i,t.background.strokeWidth=null!==(a=null===(s=null==n?void 0:n.outline)||void 0===s?void 0:s.width)&&void 0!==a?a:NaN,t.background.fill=r$(null==n?void 0:n.color);const r=t.background.fill.rgb;if(void 0!==r){const i=e.label.fill;t.label.fill=!0===Km(r)?null==i?void 0:i.darkColor:null==i?void 0:i.lightColor}}}else e.getStrokeFromObject=!0,e.getFillFromObject=!0,e.background.strokeWidth=null!==(u=null===(o=null==i?void 0:i.outline)||void 0===o?void 0:o.width)&&void 0!==u?u:NaN,e.background.stroke=r$(null===(l=null==i?void 0:i.outline)||void 0===l?void 0:l.color)}}))}(t)}))}function cH(t,e){t.tooltipHTML=oR.htmlEmptyContent,t.adapter.add("tooltipHTML",((t,i)=>{var n,r;let s=t;const{chart:a}=e;if(void 0!==a){const t=HV(a.uid,"config"),{dataTooltipVisible:o}=null!==(n=null==t?void 0:t.series[0])&&void 0!==n?n:{};if(!1===o)s="";else{const n=KV(e.uid,"barAndLineTooltipFormatter");if(void 0!==n&&e.isReady()){const{dataItem:a}=i;if(a instanceof qj||a instanceof nj){const i=ZG(t),o=null==t?void 0:t.series.find((t=>t.id===e.id));if(void 0!==o){const u=$G({config:t}),l=!0===u?a.valueX:a.valueY,h=(!0===u?a.values.valueX.totalPercent:a.values.valueY.totalPercent)/100,c=null!==(r=null==a?void 0:a.dataContext)&&void 0!==r?r:{};if(void 0!==c){const t=kG({value:c[o.x],dataContext:c,specificField:i}),r=c[oR.dateBinningRange];s=n({seriesName:e.name,xValue:t,dateBinningRange:r,statValue:l,percentValue:h})}}}}}}return hM(s)})),t.tooltipPosition=e instanceof rj?oR.markerTooltipPosition:oR.columnTooltipPosition,e.cursorTooltipEnabled=!1}function dH(t){const{isStacked100:e,series:i,statValue:n,percentValue:r,dataTooltipValueFormat:s,dataTooltipPercentFormat:a}=t,o=void 0!==n?GG(n,null!=s?s:{type:xy,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3}},i.chart.language.locale):"";let u="";if(!0===e&&void 0!==r){let t=a;void 0===t&&(t={type:xy,intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}},t.intlOptions.minimumFractionDigits=2,t.intlOptions.maximumFractionDigits=2),u=GG(r,t,i.chart.language.locale)}return{formattedStatValue:o,formattedPercentValue:u}}function fH(t){const{seriesConfig:e,xAxisValueFormat:i,setTimeBinningInfoWhenNotProvided:n,dataTooltipValueFormat:r,dataTooltipDateFormat:s,series:a,xValue:o,dateBinningRange:u}=t;let l;return l=!0===FM({seriesConfig:e,xAxisValueFormatType:null==i?void 0:i.type,setTimeBinningInfoWhenNotProvided:n})&&void 0!==u?function(t,e){let i;const n=HV(t.chart.uid,"timeIntervalInfo");if(void 0!==e&&e.length>0){let r={};switch(null==n?void 0:n.timeIntervalUnits){case aP:r={month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};break;case oP:case uP:r={month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"};break;case lP:case hP:case cP:case dP:r={month:"numeric",day:"numeric",year:"numeric"}}const s=new Date(e[0]),a=new Date(e[1]);if(!1===Number.isNaN(null==s?void 0:s.valueOf())){const e=IV(PD,t.chart.language.locale),n=e.format(s,r);if(i=n,!1===Number.isNaN(null==a?void 0:a.valueOf())){const t=e.format(a,r);t!==n&&(i=`${i} - ${t}`)}}}return`${null!=i?i:""}`}(a,u):!0===sG(i)&&void 0!==o?GG(o,null!=s?s:i,a.chart.language.locale):"number"==typeof o&&!0===iG(i)?GG(o,null!=r?r:i,a.chart.language.locale):o,`${null!=l?l:""}`}function mH(t){var e,i,n,r,s,a,o,u,l;const{config:h,fieldList:c,seriesIndex:d,isStacked100:f,commonStrings:m}=t;let v="";const p=h.series[d].name;if((null===(e=h.dataSource)||void 0===e?void 0:e.type)===tP)v=p;else{const t=h.series[d],e=h.axes,b=kM(h.series),g=void 0!==c?SM(c):bC.outStatistics.onStatisticField,y=null!==(r=null===(n=null===(i=t.query)||void 0===i?void 0:i.outStatistics)||void 0===n?void 0:n[0].onStatisticField)&&void 0!==r?r:g,w=aM(c,y),S=null!==(o=null===(a=null===(s=t.query)||void 0===s?void 0:s.outStatistics)||void 0===a?void 0:a[0].statisticType)&&void 0!==o?o:iP.statisticType,x=function(t,e){let i;switch(t){case $F:i=e.statistics.mean;break;case HF:i=e.statistics.median;break;case zF:i=e.statistics.sum;break;case VF:i=e.statistics.minimum;break;case GF:i=e.statistics.maximum;break;case qF:i=e.statistics.variance;break;case UF:i=e.statistics.discretePercentitle;break;case JF:i=e.statistics.noAggregation;break;default:i=e.statistics.count}return i}(S,m);b===$C?v=null!=p?p:aM(c,t.y):(v=S===_F&&y===g?m.statistics.count:fC(m.statistics.aggregation,{statistics:x,fieldName:null!=w?w:p}),b===GC&&!1===f&&(v=uH(v,null===(l=null===(u=e[1].title)||void 0===u?void 0:u.content)||void 0===l?void 0:l.text)))}return v}function vH(t){var e,i,n;const{series:r,fieldList:s,setTimeBinningInfoWhenNotProvided:a,seriesIndex:o,seriesConfig:u,commonStrings:l}=t,{dataTooltipValueFormat:h,dataTooltipPercentFormat:c,dataTooltipDateFormat:d}=u;let f=()=>"";const{chart:m}=r;if(void 0!==m){const t=HV(m.uid,"config");if(void 0!==t){const u=t.series[o],{dataTooltipVisible:m}=u,v=r instanceof rj?u.markerVisible:void 0;if(!1===m||!1===v)f=()=>"";else{const m=t.axes,v=m[0].valueFormat,p=kM(t.series),b=nM(u)===XD,g=aM(s,u.x),y=null!==(e=ZG(t))&&void 0!==e?e:uH(g,null===(n=null===(i=m[0].title)||void 0===i?void 0:i.content)||void 0===n?void 0:n.text),w=mH({config:t,fieldList:s,seriesIndex:o,commonStrings:l,isStacked100:b}),S=RV();f=t=>{var e;const{statValue:i,percentValue:n,xValue:o,dateBinningRange:f}=t,m=fH({seriesConfig:u,xAxisValueFormat:v,dataTooltipValueFormat:h,dataTooltipDateFormat:d,setTimeBinningInfoWhenNotProvided:a,series:r,xValue:o,dateBinningRange:f}),{formattedStatValue:g,formattedPercentValue:x}=dH({isStacked100:b,dataTooltipValueFormat:h,dataTooltipPercentFormat:c,series:r,statValue:i,percentValue:n}),C=[`<b>${y}${S} </b>${m}`];switch(p){case GC:case $C:case qC:C.push(`<b>${w}${S} </b>${g}`);break;case WC:{const t=CM(null===(e=u.query)||void 0===e?void 0:e.where,!1),i=rM({value:aM(s,t)});C.push(`<b>${i}${S} </b>${r.name}<br /><b>${w}${S} </b>${g}`);break}}return!0===b&&C.push(`<b>${l.statistics.percent}${S} </b>${x}`),C.join("<br />")}}}}return f}function pH(t){const{series:e,tooltipFormatter:i}=t;JV(e.uid,{barAndLineTooltipFormatter:null!=i?i:vH(t)})}function bH(t){const{locale:e,valueIntlOptions:i,percentageIntlOptions:n,displayNumericValue:r,displayPercentage:s,valuePrefix:a,valueSuffix:o,percentagePrefix:u,percentageSuffix:l}=t,h=IV(DD,e),c=IV(DD,e);h.numberFormat=Object.assign({},i),c.numberFormat=Object.assign(Object.assign({},n),{style:"percent"});const d=RV(" ");return(t,e,i)=>{let n="";if(void 0!==e&&void 0!==i){const t=`${null!=a?a:""}${h.format(e)}${null!=o?o:""}`,f=`${null!=u?u:""}${c.format(Math.abs(i/100))}${null!=l?l:""}`;!0===Number.isFinite(e)?!0===r&&!0===s?n=`${f}${d}(${t})`:!0===r?n=t:!0===s&&(n=f):n=""}return n}}function gH(t){var e,i;let n=!1;if(t.position===UD||t.position===HD)n=!0;else{const r=null===(i=null===(e=t.labels.getIndex(0))||void 0===e?void 0:e.parent)||void 0===i?void 0:i.x;void 0!==r&&(n=!1===t.labels.values.some((t=>{var e;return(null===(e=t.parent)||void 0===e?void 0:e.x)!==r})))}return n}function yH(t){QV(t.valueLabels.template.uid,{isLegendValueLabel:!0}),t.valueLabels.template.adapter.add("htmlOutput",((e,i)=>{var n,r,s,a,o,u,l,h,c;let d=e;const f=qV(t.uid,"pieChartLegendValueLabelsFormatter");if(void 0!==f&&(d=f(null!==(a=null===(s=null===(r=null===(n=i.dataItem)||void 0===n?void 0:n.values)||void 0===r?void 0:r.value)||void 0===s?void 0:s.value)&&void 0!==a?a:0,null!==(h=null===(l=null===(u=null===(o=i.dataItem)||void 0===o?void 0:o.values)||void 0===u?void 0:u.value)||void 0===l?void 0:l.percent)&&void 0!==h?h:0)),!0===oM(d)&&(d=oR.htmlEmptyContent),t.baseSprite instanceof MA){const e=HV(t.baseSprite.uid,"config");void 0!==(null===(c=null==e?void 0:e.legend)||void 0===c?void 0:c.body)&&(d=l$({textSymbol:Object.assign(Object.assign({},e.legend.body),{text:d}),format:"html"}))}return hM(d)})),t.valueLabels.template.html=oR.htmlEmptyContent,function(t){t.events.on(kR,(()=>{const e=gH(t),i=function(t){var e,i;let n=!1;const r=null===(i=null===(e=t.labels.getIndex(0))||void 0===e?void 0:e.parent)||void 0===i?void 0:i.y;return void 0!==r&&(n=!1===t.labels.values.some((t=>{var e;return(null===(e=t.parent)||void 0===e?void 0:e.y)!==r}))),n}(t),n=!0===e||!1===i?vD:pD;t.valueLabels.template.horizontalCenter=o$(n),t.valueLabels.template.align=a$(n)}))}(t)}function wH(t){var e;const{legendElements:{legend:i},seriesConfig:n,webChartLegend:r,seriesType:s,pieChartLegendValueLabelFormatter:a}=t,{visible:o,body:u,displayNumericValue:l,displayPercentage:h}=null!==(e=r)&&void 0!==e?e:{};if((null!=s?s:iM(n))===ND){const{numericValueFormat:t,percentValueFormat:e,valuePrefix:r,valueSuffix:s,percentagePrefix:c,percentageSuffix:d}=n[0],f=null!=l?l:oR.pieChart.displayNumericValueOnLegend,m=null!=h?h:oR.pieChart.displayPercentageOnLegend;let v=a;if(void 0===a){const n=bH({locale:i.language.locale,valueIntlOptions:null==t?void 0:t.intlOptions,percentageIntlOptions:null==e?void 0:e.intlOptions,displayNumericValue:f,displayPercentage:m,valuePrefix:r,valueSuffix:s,percentagePrefix:c,percentageSuffix:d});v=(t,e)=>n("",t,e)}WV(i.uid,{pieChartLegendValueLabelsFormatter:v});const p=gH(i),b={type:AD,visible:o,content:Object.assign(Object.assign({},u),{type:MD,text:".",verticalAlignment:wD,horizontalAlignment:!0===p?vD:pD})};S$(i.valueLabels.template,b,oR.legendProperties.valueLabels),i.valueLabels.template.disabled=!1===f&&!1===m}}function SH(t,e){const{legendLabelReducedOpacity:i}=oR.legendProperties;void 0!==t&&(t.fillOpacity=!1===e?i:1)}function xH(t){const{labels:e,seriesId:i,sliceCategory:n}=t;e.each((t=>{var e,r,s,a,o,u;void 0!==n?n===t.dataItem.category&&SH(t,null===(e=t.dataItem.slice.visible)||void 0===e||e):i===(null===(s=null===(r=t.dataItem)||void 0===r?void 0:r.component)||void 0===s?void 0:s.id)&&SH(t,null===(u=null===(o=null===(a=t.dataItem)||void 0===a?void 0:a.component)||void 0===o?void 0:o.visible)||void 0===u||u)}))}function CH(t){t instanceof xj?(t.slices.template.events.on(hR,(e=>{var i,n,r,s;const a=e.target.dataItem.category;xH({labels:null===(n=null===(i=t.chart)||void 0===i?void 0:i.legend)||void 0===n?void 0:n.labels,sliceCategory:a}),xH({labels:null===(s=null===(r=t.chart)||void 0===r?void 0:r.legend)||void 0===s?void 0:s.valueLabels,sliceCategory:a})})),t.slices.template.events.on(lR,(e=>{var i,n,r,s;const a=e.target.dataItem.category;xH({labels:null===(n=null===(i=t.chart)||void 0===i?void 0:i.legend)||void 0===n?void 0:n.labels,sliceCategory:a}),xH({labels:null===(s=null===(r=t.chart)||void 0===r?void 0:r.legend)||void 0===s?void 0:s.valueLabels,sliceCategory:a})}))):t.events.on(gR,(e=>{var i,n;const r=e.target.id;xH({labels:null===(n=null===(i=t.chart)||void 0===i?void 0:i.legend)||void 0===n?void 0:n.labels,seriesId:r})}))}function OH(t){var e,i;const{legendElements:{legend:n,legendTitle:r},firstSeries:s}=t,a=n.baseSprite,o=$G({chart:a}),u=nM(s),l=u===ZD||u===XD;let h=!1;if(a instanceof QA){const t=!0===o?a.yAxes.getIndex(0):a.xAxes.getIndex(0);h=null!==(i=null===(e=null==t?void 0:t.renderer)||void 0===e?void 0:e.inversed)&&void 0!==i&&i,h=!0===o?!0!==h:h}n.reverseOrder=!0===l&&!1===o,!0===h&&!1===l&&(n.reverseOrder=!0!==n.reverseOrder),!0===(null==a?void 0:a.rtl)&&a instanceof Oj==!1&&(n.reverseOrder=!1===n.reverseOrder);const c=!0===n.reverseOrder?n.children.length-1:0;n.children.moveValue(r,c)}function MH(t,e){const i=t.target.dataItem;if(void 0!==(null==i?void 0:i.dataContext)){const{dataContext:s}=i,a={visible:t.target.isActive};if(!0===KV(s.uid,"isOverlay"))a.overlayType=KV(s.uid,"type");else if(s instanceof Sj){const t=HV(e.uid,"isNonAggregatedChart"),i=function(t){let e=!1;const i=HV(t.uid,"config"),{dataSource:n}=null!=i?i:{};return(null==n?void 0:n.type)===tP&&void 0!==(null==n?void 0:n.data)&&(e=!0),e}(e);!0===t||!0===i?a.sliceData=s.dataContext:a.sliceId=s.category}else a.seriesId=s.id;const o=s instanceof Sj?s.component:s;void 0!==o&&!0!==KV(o.uid,"isOverlay")&&o.events.once(wR,(()=>{var t,i;const n=o instanceof xj,r=HV(e.uid,"currentSelectionDataItems"),s=void 0!==r&&r.length>0,a=null!==(t=HV(e.uid,"actionMode"))&&void 0!==t?t:oR.actionMode;let u;o instanceof Hj?u=o.columns:!0===n?u=o.slices:o instanceof rj&&(!function(t){if(!0===t.visible){const e=HV(t.chart.uid,"config"),i=null==e?void 0:e.series.find((e=>e.id===t.id));if(void 0!==i&&iM([i])===BD){const{markerVisible:e}=i;!1!==e&&t.bulletsContainer.show()}}}(o),u=null===(i=JG(o))||void 0===i?void 0:i.clones),null==u||u.each((t=>{t.dataItem instanceof yA==!1&&(OW({element:t,selected:!0===t.isActive,useNativeState:!0===n,backToDefaultState:!1===s}),!0===n&&a===mA&&(t.clickable=!1))}))})),n=a,void 0!==(r=e.htmlContainer)&&r.dispatchEvent(new window.CustomEvent(E$.LegendItemVisibilityChange,N$(n)))}var n,r}function TH(t,e){t.itemContainers.template.events.on(cR,(t=>MH(t,e))),e instanceof Oj&&t.itemContainers.template.events.on(vR,(t=>function(t){var e;const{dataContext:i}=null!==(e=t.target.dataItem)&&void 0!==e?e:{};if(i instanceof Sj){const{component:t}=i;t instanceof xj&&t.showTooltip()}}(t)))}function kH(t,e){!1===t.adapter.keys().includes(e)&&t.adapter.add(e,(e=>{var i,n,r;let s=e;const a=null===(i=t.dataItem)||void 0===i?void 0:i.dataContext;if(void 0!==a){const t=a instanceof Sj?null===(n=a.component)||void 0===n?void 0:n.chart:a.chart;if(void 0!==t){const e=HV(t.uid,"config"),{rectangleMarkerRadius:i,roundedMarkerRadius:n}=oR.legendProperties;s=!0===(null===(r=null==e?void 0:e.legend)||void 0===r?void 0:r.roundMarkers)?n:i}}return s}))}function IH(t){t.markers.each((t=>{const e=t.children.getIndex(0);e instanceof Zb&&(kH(e,"cornerRadiusBottomLeft"),kH(e,"cornerRadiusBottomRight"),kH(e,"cornerRadiusTopLeft"),kH(e,"cornerRadiusTopRight"),e.validate())}))}function AH(t,e){let i=fb.pointer;!0===e?(t.itemContainers.template.clickable=!1,t.itemContainers.template.focusable=!1,i=fb.notAllowed):(t.itemContainers.template.clickable=!0,t.itemContainers.template.focusable=!0),t.itemContainers.values.forEach((t=>{t.cursorOverStyle=i}))}function jH(t){const e=new SA;t.legend=e,function(t){t.scrollable=!0}(e);const i=function(t){const e=y$(void 0,t);return e.adapter.add("paddingTop",(t=>{let i=t;const n=e.bbox.height;return n>0&&(i=-n),i})),e.adapter.add("x",(i=>{var n,r,s,a,o;let u=i;const{marginLeft:l,marginRight:h}=oR.legendProperties.legendTitle,c=HV(t.baseSprite.uid,"config");switch(null===(s=null===(r=null===(n=null==c?void 0:c.legend)||void 0===n?void 0:n.title)||void 0===r?void 0:r.content)||void 0===s?void 0:s.horizontalAlignment){case mD:u=e.measuredWidth+(null!==(a=l)&&void 0!==a?a:0);break;case vD:u=t.measuredWidth-e.measuredWidth-(null!==(o=h)&&void 0!==o?o:0);break;default:u=t.measuredWidth/2}return u})),e}(e);return function(t){const e=oR.legendProperties;t.labels.template=y$(e.legendLabels),t.valueLabels.template=y$(e.legendLabels),t.markers.template.width=e.legendMarkersSize,t.markers.template.height=e.legendMarkersSize,t.labels.template.adapter.add("wrap",(()=>!0)),t.labels.template.adapter.add("maxWidth",(e=>{var i;let n,r=e;if(t.baseSprite instanceof Oj){const e=HV(t.baseSprite.uid,"config");n=null===(i=null==e?void 0:e.legend)||void 0===i?void 0:i.labelMaxWidth}if(t.position===UD||t.position===HD)r=null!=n?n:oR.legendProperties.legendLabels.maxWidth;else if(void 0!==n)r=n;else{let e=0;!1===t.valueLabels.template.disabled&&t.valueLabels.each((t=>{e=Math.max(e,t.measuredWidth)})),r=t.measuredWidth-e-45}return r})),t.labels.template.adapter.add("textOutput",((e,i)=>{var n,r,s,a,o;const u=null===(r=null===(n=i.dataItem)||void 0===n?void 0:n.label)||void 0===r?void 0:r.currentText;let l;const h=HV(t.baseSprite.uid,"config");if(void 0!==h){const{series:t}=h;if(iM(t)===ND){const e=!0===LM(t)?kP:t[0].x;l=null===(a=null===(s=i.dataItem)||void 0===s?void 0:s.dataContext)||void 0===a?void 0:a[e]}else l=(null===(o=i.dataItem)||void 0===o?void 0:o.component).name}return null!=l?l:u})),t.valueLabels.template.adapter.add("maxWidth",(e=>{var i;let n,r=e;if(t.baseSprite instanceof Oj){const e=HV(t.baseSprite.uid,"config");n=null===(i=null==e?void 0:e.legend)||void 0===i?void 0:i.valueLabelMaxWidth}return r=t.position===UD||t.position===HD?null!=n?n:oR.legendProperties.valueLabels.maxWidth:null!=n?n:NaN,r}))}(e),yH(e),TH(e,t),function(t){t.itemContainers.template.reverseOrder=vC().rtl}(e),function(t){const{legendProperties:e,legendProperties:i}=oR;t.adapter.add("paddingRight",(()=>!0===t.scrollbar.visible?i.legendPaddingRightWithScrollbarVisible:e.paddingRight)),t.adapter.add("paddingLeft",(()=>e.paddingLeft)),t.adapter.add("paddingTop",(()=>e.paddingTop)),t.adapter.add("paddingBottom",(()=>e.paddingBottom))}(e),function(t,e){e.chartContainer.events.on(bR,QN((()=>{var i,n,r;const s=HV(e.uid,"config");let a=null!==(n=null===(i=null==s?void 0:s.legend)||void 0===i?void 0:i.maxHeight)&&void 0!==n?n:NaN;!1===Number.isFinite(a)&&(a=t.position===KD||t.position===JD?null!==(r=oR.legendProperties.maxHeight)&&void 0!==r?r:NaN:e instanceof Oj?e.chartContainer.measuredHeight:e.seriesContainer.measuredHeight-5),t.maxHeight=a,t.invalidateLayout()})),oR.debounceTime)}(e,t),d$(t,i),function(t){const e=()=>{var e;const i=t.children.values.find((t=>"Container"===t.className));if(3===(null==i?void 0:i.children.length)){const n=i.children.values.findIndex((t=>"Container"===t.className));if(-1!==n){const r=!0==(0!==n)?0:2,s=null===(e=i.children.getIndex(r))||void 0===e?void 0:e.clonedFrom;void 0!==s&&!0!==XV(s.uid,"isLegendValueLabel")&&t.children.each((t=>{"Container"===t.className&&t.children.swap(1,r)}))}}};t.events.on(wR,e),e()}(e),t.legend.events.on(MR,(()=>{const i=HV(t.uid,"options");AH(e,null==i?void 0:i.disableTogglingLegendItems)})),{legend:e,legendTitle:i}}function FH(t){const{legendElements:e,seriesConfig:i,webChartLegend:n}=t,{legend:r,legendTitle:s}=e,a=r.baseSprite,o=void 0===a||function(t){let e=!1;switch(iM(t)){case Oy:e=!0;break;case ky:case Ty:case Ay:e=t.length>1;break;case Iy:case Cy:{const i=t[0];e=Object.values(i.overlays).some((t=>!0===t.created));break}}return e}(i),u=!0===o&&!1!==(null==n?void 0:n.visible);if(void 0!==a&&void 0!==n&&!0===u){const{position:o}=n;qG(r,!0),function(t,e){var i,n;const{title:r,visible:s,position:a}=t,{legendTitle:o}=oR.legendProperties;void 0!==r&&(S$(e,Object.assign(Object.assign({},r),{visible:!1!==s&&!1!==(null==r?void 0:r.visible)}),o),e.marginLeft=null!==(i=o.marginLeft)&&void 0!==i?i:0);a===KD||a===JD?(e.maxWidth=NaN,e.isMeasured=!1):(e.maxWidth=null!==(n=o.maxWidth)&&void 0!==n?n:NaN,e.marginTop=0,e.isMeasured=!0)}(n,s),function(t){t.markers.template.events.on(xR,(()=>{IH(t)})),t.events.once(wR,(()=>{IH(t)}))}(r),function(t){const{legendElements:{legend:e},seriesConfig:i,webChartLegend:n,seriesType:r}=t,{visible:s,body:a}=null!=n?n:{},o=null!=r?r:iM(i),u={type:AD,visible:s,content:Object.assign(Object.assign({},a),{type:MD,text:" "})};S$(e.labels.template,u,oR.legendProperties.legendLabels),e.labels.template.valign=wD,e.valueLabels.template.valign=wD,o===ND&&wH(t),e.valueLabels.template.width=NaN}(t),function(t,e){const{position:i}=e;t.contentAlign=i===KD||i===JD?pD:"none"}(r,n),function(t,e){const{legend:i}=t;!0===i.markers.template.events.has(xR)&&OH({legendElements:t,firstSeries:e}),i.markers.template.events.on(xR,(n=>{0===i.markers.indexOf(n.target)&&OH({legendElements:t,firstSeries:e})}))}(e,i[0]),r.position=o,function(t,e){e===UD||e===HD?t.width=NaN:t.maxWidth=Number.MAX_SAFE_INTEGER}(r,o),function(t){var e,i;const{legendProperties:n}=oR;t.position===JD?(t.marginTop=null!==(e=n.marginTop)&&void 0!==e?e:0,t.marginBottom=0):t.position===KD?(t.marginBottom=null!==(i=n.marginBottom)&&void 0!==i?i:0,t.marginTop=0):(t.marginTop=0,t.marginBottom=0)}(r);const u=HV(a.uid,"options");AH(r,null==u?void 0:u.disableTogglingLegendItems),r.events.once(wR,(()=>{r.baseSprite instanceof Oj&&r.invalidateDataItems()}))}else r.position=UD,r.width=0,qG(r,!1)}function DH(t){var e,i;const{series:n,symbolProps:r,iSeries:s,numberOfSeries:a}=t,{dataSource:o,seriesConfig:u}=r,l=new Set;let h,c,d=!1;const f=null!==(e=u.fillSymbol)&&void 0!==e?e:function(t,e=!1){return{type:wy,style:"esriSFSSolid",color:!0===e?kC(.7):TC({colorIndex:null!=t?t:0,opacity:.7}),outline:{type:gy,color:!0===e?kC(.7):TC({colorIndex:null!=t?t:0,opacity:.7})}}}(s);if(0===n.columns.length){const t=SW(Object.assign(Object.assign({},r),{dataSource:o,seriesConfig:u,seriesIndex:s,seriesSymbol:f,element:new Pb,dataIndex:0,isChartFillSymbol:!0}));h=t.symbolWithColorInfo,c=t.stylingInfo}else n.columns.each(((t,e)=>{var i,n;let a;u.colorType===qD&&(a=null===(n=null===(i=t.dataItem)||void 0===i?void 0:i.dataContext)||void 0===n?void 0:n[Y$]);const d=SW(Object.assign(Object.assign({},r),{dataSource:o,seriesConfig:u,seriesIndex:s,seriesSymbol:f,element:t,dataIndex:e,rendererElementColor:a,isChartFillSymbol:!0}));h=d.symbolWithColorInfo,c=d.stylingInfo,oH(t,c),l.add(JSON.stringify(h))}));if(d=l.size>1,a>1)if(!1===d){const t=null===(i=n.legendDataItem)||void 0===i?void 0:i.marker.children.getIndex(0);void 0!==t?oH(t,c):n.chart.legend.events.once(wR,(()=>{var t;oH(null===(t=n.legendDataItem)||void 0===t?void 0:t.marker.children.getIndex(0),c),n.chart.legend.invalidate()}))}else SW(Object.assign(Object.assign({},r),{dataSource:o,seriesConfig:u,seriesIndex:s,seriesSymbol:f,element:n.columns.template,dataIndex:0,isChartFillSymbol:!0}));return!0===d?void 0:h}function PH(t){var e;return yd(this,void 0,void 0,(function*(){const{updateBarSeriesProps:i,mapRendererColorToSeries:n,rendererInfo:r,queryType:s}=t,{seriesConfig:a,series:o,numberOfSeries:u,seriesIndex:l,dataSource:h,queryObject:c,rotationChanged:d,options:f,seriesSymbolMapForEvent:m,dataWasUpdated:v,sortChanged:p}=i;!function(t){const{series:e,seriesSymbolMapForEvent:i,numberOfSeries:n,iSeries:r}=t,s=DH(t);i.set(r,s),i.size===n&&V$(i,e.chart.htmlContainer)}({series:o,iSeries:l,symbolProps:{seriesConfig:a,seriesSymbol:a.fillSymbol,y:a.y,dataSource:h,mapRendererColorToSeries:n,rendererInfo:r,queryType:s,seriesIndex:l},numberOfSeries:u,seriesSymbolMapForEvent:m}),yield sH({series:o,seriesIndex:l,queryObject:c,elementsToApplySelectionTo:o.columns.values,options:null!==(e=HV(o.chart.uid,"options"))&&void 0!==e?e:f,dataWasUpdated:v,sortChanged:p,rotationChanged:d,xAxisField:CG(o),yAxisField:OG(o)})}))}function LH(t){var e,i;return yd(this,void 0,void 0,(function*(){const{seriesConfig:n,series:r,rendererInfo:s,mapRendererColorToSeries:a,rotationChanged:o,subtypeInfo:u,fieldList:l}=t,{name:h}=n,c=HV(r.chart.uid,"config"),d=$G({config:c}),f=kM(null==c?void 0:c.series);qG(r,n.visible);let m=h;const v=null!==(i=null===(e=r.dataFields)||void 0===e?void 0:e.customValue)&&void 0!==i?i:"";f===WC&&(m=jM({subtypeInfo:u,fieldList:l,fieldName:CM(v),fieldValueToMatch:m})),_q(r,m),Gq({series:r,seriesConfig:n,rotationChanged:o,isRotated:d}),yield PH({updateBarSeriesProps:t,mapRendererColorToSeries:a,rendererInfo:s,queryType:f}),JV(r.uid,{barSeriesLastUpdate:{numberOfColumnsUpdated:r.columns.length,updateProps:t}})}))}function EH(t){var e;const{seriesConfig:i,axisPair:n,hideLoaderHandle:r,selectionTheme:s}=t,{x:a,y:o}=i,u=new Hj;q$(u,r),u.id=i.id,[u.xAxis,u.yAxis]=n;const l=$G({chart:n[0].chart});!0===l?u.dataFields.valueX=o:u.dataFields.valueY=o;const h=!0===l?n[1]:n[0];if(void 0!==h){const t=Bq(h,l);u.dataFields[t]=a,u.baseAxis=h}var c;return u.dataFields.customValue=null===(e=null==i?void 0:i.query)||void 0===e?void 0:e.where,cH(u.columns.template,u),u.columns.template.width=Ad(100),CW({element:u.columns.template,customSelectionTheme:s}),CH(u),(c=u).events.on(wR,(()=>{const t=KV(c.uid,"barSeriesLastUpdate");if(void 0!==t){const{numberOfColumnsUpdated:e,updateProps:i}=t;1==c.columns.length>e&&LH(i)}})),u}function NH(t){var e,i;return yd(this,void 0,void 0,(function*(){const{seriesConfig:n,series:r,seriesIndex:s,axes:a,commonStrings:o,inlineDisplayLabelField:u,fieldList:l,options:h}=t,c=$G({chart:r.chart});L$({series:r,seriesType:_D,isRotated:c,stackedType:n.stackedType,dataLabelsConfig:n.dataLabels,yAxisValueFormat:a[1].valueFormat,customDataLabelFormatter:null==h?void 0:h.dataLabelFormatter});let d=KV(r.uid,"updateStyleAndSelectionCallbackDisposer");void 0!==d&&d.dispose();let f=0;null===(i=null===(e=r.chart)||void 0===e?void 0:e.data)||void 0===i||i.forEach((t=>{Number.isFinite(t[n.y])&&(f+=1)})),d=r.events.on(wR,(()=>yd(this,void 0,void 0,(function*(){r.columns.length===f&&(void 0!==d&&d.dispose(),yield LH(t))})))),r.validate(),JV(r.uid,{updateStyleAndSelectionCallbackDisposer:d}),pH({series:r,seriesConfig:n,fieldList:l,inlineDisplayLabelField:u,commonStrings:o,seriesIndex:s,tooltipFormatter:null==h?void 0:h.tooltipFormatter})}))}const RH="count",BH="minValue",_H="maxValue",zH="Mean",VH="Median",GH="Standard Deviation",$H="Normal Distribution",WH="Trendline";function qH({x:t,mean:e,stddev:i,scalingFactor:n}){const r=-1/(2*Math.pow(i,2));return(null!=n?n:1)*Math.exp(r*Math.pow(t-e,2))}function HH(t){const e=y$(oR.dataLabelInitialize);return QV(e.uid,{isDataLabel:!0}),t.bullets.push(e),O$(zD,e),function(t,e){t.adapter.add("htmlOutput",((t,i)=>{let n=t;const r=KV(e.uid,"histogramDataLabelFormatter"),{dataItem:s}=i;if(void 0!==r&&s instanceof qj){const{valueY:t,openValueX:e,valueX:i}=s;n=r(t,e,i)}return hM(n)}),0)}(e,t),e.html="{valueX}",e}function UH(t){const{numberFormatter:e,dataLabelsConfigContent:i}=t;return(t,n,r)=>l$({textSymbol:Object.assign(Object.assign({},i),{text:e.format(t)}),format:"html"})}function KH(t){const{series:e}=t,i=I$(e,"bullets");F$(Object.assign(Object.assign({},t),{dataLabel:i,defaultDataLabelFormatter:UH,seriesType:zD}))}const JH={mean:"Mean",median:"Median",sum:"Sum",discretePercentitle:"Discrete percentile",minimum:"Minimum",maximum:"Maximum",variance:"Variance",count:"Count",aggregation:"${ statistics } of ${ fieldName }",percent:"Percent",noAggregation:"No aggregation"},YH={mean:"Mean",median:"Median",stdDev:"Standard Deviation",normal:"Normal Distribution",trendline:"Trendline"},ZH={defaultSliceGroupingLabel:"Other"};var XH={statistics:JH,overlays:YH,guideTooltipLabel:"From ${ guideStart } to ${ guideEnd }",pieChart:ZH,notAvailable:"Not Available"},QH=Object.freeze({__proto__:null,statistics:JH,overlays:YH,guideTooltipLabel:"From ${ guideStart } to ${ guideEnd }",pieChart:ZH,notAvailable:"Not Available",default:XH});function tU(t){const{axes:e,seriesConfig:i,series:n,fieldList:r}=t,{dataTooltipVisible:s}=i;let a;const o=RV();return a=!1===s?(t,e,i)=>"":(t,s,a)=>{var u,l,h,c;const d=uH(aM(r,i.x),null===(l=null===(u=null==e?void 0:e[0].title)||void 0===u?void 0:u.content)||void 0===l?void 0:l.text),f=uH(XH.statistics.count,null===(c=null===(h=null==e?void 0:e[1].title)||void 0===h?void 0:h.content)||void 0===c?void 0:c.text),m=lH({series:n,callbackName:"tooltipValueYNumberFormatCallback",value:t}),v=lH({series:n,callbackName:"tooltipValueXNumberFormatCallback",value:s}),p=lH({series:n,callbackName:"tooltipValueXNumberFormatCallback",value:a});return`<b>${d}${o} </b>${v} - ${p}<br /><b>${f}${o} </b>${m}`},a}function eU(t){const{series:e,tooltipFormatter:i}=t;JV(e.uid,{histogramTooltipFormatter:null!=i?i:tU(t)})}function iU(t){return yd(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,type:n,hideLoaderHandle:r}=t;e instanceof VA!=!1&&i instanceof VA!=!1||(yield jV("invalidAxesForHistogram"));const s=new rj;return s.id=n,q$(s,r),JV(s.uid,{isOverlay:!0,type:n}),s.dataFields.valueX="x",s.dataFields.valueY="y",void 0!==e&&(s.xAxis=e),void 0!==i&&(s.yAxis=i),s.hidden=!0,s}))}function nU(t){var e;const{lineSeries:i,valueFormat:n,overlay:r,chartData:s,commonStrings:a}=t,{symbol:o,created:u,visible:l}=r,h=!0===u&&!1!==l,c=KV(i.uid,"type"),d=KV(i.uid,"upper");if(yW({element:i,lineSymbol:o,visible:h}),i.hiddenInLegend=!0!==u||!0===d,void 0!==s){const t=s.bins.map((t=>t.count)),e=Math.max(...t),{mean:n,stddev:r,median:a}=s,o=n-r,u=n+r;let l={x:NaN,y:NaN},h={x:NaN,y:NaN};switch(c){case zH:l={x:n,y:0},h={x:n,y:e};break;case VH:l={x:a,y:0},h={x:a,y:e};break;case GH:!0===d?(l={x:u,y:0},h={x:u,y:e}):(l={x:o,y:0},h={x:o,y:e})}const f={data:[l,h]};i.data=f.data}let f=i.data[0].x;if(c===GH&&(f=null!==(e=null==s?void 0:s.stddev)&&void 0!==e?e:KV(i.uid,"stddev"),JV(i.uid,{stddev:f})),void 0!==f){let t=c;switch(c){case zH:t=a.overlays.mean;break;case VH:t=a.overlays.median;break;case GH:t=a.overlays.stdDev;break;case WH:t=a.overlays.trendline}_q(i,`${t}: ${GG(f,n,i.chart.language.locale)}`)}}function rU(t){const{lineSeries:e,overlay:i,seriesData:n,numberOfPoints:r}=t,{symbol:s,created:a,visible:o}=i;if(yW({element:e,lineSymbol:s,visible:!0===a&&!1!==o}),e.hiddenInLegend=!0!==a,void 0!==n){const{mean:t,stddev:i,min:s,max:a}=n,o=function(t){let e=0;if(t.length>0)for(let i=0;i<t.length;i+=1)t[i].count>e&&(e=t[i].count);return e}(n.bins),u=function(t,e,i){const n=e-t;let r=[];0!==n&&(1===i?r=[t]:i>1&&(r=[...rq(t,e,n/(i-1)),e]));return r}(s,a,null!=r?r:oR.histogramSeries.normalDistribNumberOfPoints).map((e=>({x:e,y:qH({x:e,mean:t,stddev:i,scalingFactor:o})})));e.data=u}}function sU(t){return yd(this,void 0,void 0,(function*(){const{seriesConfig:e,axisPair:i,hideLoaderHandle:n,commonStrings:r,selectionTheme:s}=t;!1==(i[0]instanceof VA&&i[1]instanceof VA)&&(yield jV("invalidAxesForHistogram"));const a=[],o=new Hj;q$(o,n),o.id=e.id,o.hiddenInLegend=!0;const u=i[0],l=i[1];o.xAxis=u,o.yAxis=l,function(t){const e=t.columns.template;e.tooltipPosition=oR.columnTooltipPosition,e.tooltipHTML=oR.htmlEmptyContent,e.adapter.add("tooltipHTML",((e,i)=>{var n;let r=e;const{chart:s}=t;if(void 0!==s){const e=HV(s.uid,"config"),{dataTooltipVisible:a}=null!==(n=null==e?void 0:e.series[0])&&void 0!==n?n:{};if(!1===a)r="";else{const e=KV(t.uid,"histogramTooltipFormatter");if(void 0!==e){const{dataItem:t}=i;if(t instanceof qj){const{valueY:i,openValueX:n,valueX:s}=t;r=e(i,n,s)}}}}return hM(r)}))}(o),HH(o),o.dataItems.template.locations.valueX=1,o.dataItems.template.locations.openValueX=0,o.dataFields.openValueX=BH,o.dataFields.valueX=_H,o.dataFields.valueY=RH,o.dataFields.customValue=e.x,CW({element:o.columns.template,customSelectionTheme:s}),a.push(o),a.push(yield iU({xAxis:u,yAxis:l,type:zH,hideLoaderHandle:n})),a.push(yield iU({xAxis:u,yAxis:l,type:VH,hideLoaderHandle:n}));const h=yield iU({xAxis:u,yAxis:l,type:GH,hideLoaderHandle:n});JV(h.uid,{upper:!1});const c=yield iU({xAxis:u,yAxis:l,type:GH,hideLoaderHandle:n});return JV(c.uid,{upper:!0}),h.events.on(lR,(()=>{qG(c,!1)})),h.events.on(hR,(()=>{qG(c)})),a.push(h),a.push(c),a.push(yield function(t,e,i){return yd(this,void 0,void 0,(function*(){t instanceof VA!=0&&e instanceof VA!=0||(yield jV("invalidAxesForHistogram"));const n=new rj;return JV(n.uid,{isOverlay:!0,type:$H}),n.xAxis=t,n.yAxis=e,n.dataFields.valueX="x",n.dataFields.valueY="y",_q(n,i.overlays.normal),n.hidden=!0,n.id=$H,n}))}(u,l,r)),a.forEach((t=>{const e=KV(t.uid,"isOverlay"),i=KV(t.uid,"upper");!0===e&&!0!==i&&CH(t)})),a}))}function aU(t){var e;return yd(this,void 0,void 0,(function*(){const{updateHistogramSeriesProps:i,currentSeries:n,layer:r}=t,{seriesConfig:s,dataSource:a,options:o,queryObject:u,dataWasUpdated:l}=i;!function(t){const{currentColumnSeries:e,dataSource:i,seriesConfig:n,layer:r}=t;let s;const a=new Map;let o={};if(i.type===eP&&n.colorType===qD&&void 0!==r&&!1===r.isTable&&(o=mM(r.renderer),hW({series:n,layer:r,mapRendererColorToSeries:a})),e.columns.each(((t,e)=>{const r=SW({element:t,seriesConfig:n,seriesSymbol:n.fillSymbol,dataIndex:e,dataSource:i,rendererInfo:o,mapRendererColorToSeries:a,isChartFillSymbol:!0});s=r.symbolWithColorInfo,oH(t,r.stylingInfo)})),void 0!==s){const t=new Map;t.set(0,s),V$(t,e.chart.htmlContainer)}}({currentColumnSeries:n,seriesConfig:s,dataSource:a,layer:r}),yield sH({series:n,queryObject:u,elementsToApplySelectionTo:n.columns.values,options:null!==(e=HV(n.chart.uid,"options"))&&void 0!==e?e:o,dataWasUpdated:l,xAxisField:s.x})}))}function oU(t){return yd(this,void 0,void 0,(function*(){const{seriesConfig:e,chartSeries:i,axes:n,chartData:r,queryObject:s,options:a,commonStrings:o,tooltipFormatter:u,dataLabelFormatter:l}=t,h=e.overlays;let c,d=[];void 0!==s&&(d=yield yM(s,null==a?void 0:a.usePopupTemplateFieldsInfo),c=gM(s));for(let s=0;s<6;s+=1){const a=i[s];if(!0===KV(a.uid,"isOverlay")){const t=KV(a.uid,"type");let e={type:jD,created:!1,symbol:{type:xD}};if(t===$H){if(void 0===h.comparisonDistribution.symbol.color){const e=lM(t);h.comparisonDistribution.symbol.color=TC({colorIndex:e,histogramOverlays:!0})}rU({lineSeries:a,overlay:h.comparisonDistribution,seriesData:r})}else{switch(t){case zH:e=h.mean;break;case VH:e=h.median;break;case GH:e=h.standardDeviation}if(void 0===e.symbol.color){const i=lM(t);e.symbol.color=TC({colorIndex:i,histogramOverlays:!0})}nU({lineSeries:a,valueFormat:AC(),overlay:e,chartData:r,commonStrings:o})}a.events.once(wR,(()=>{var t,e;!0!==KV(a.uid,"upper")&&xH({labels:null===(e=null===(t=a.chart)||void 0===t?void 0:t.legend)||void 0===e?void 0:e.labels,seriesId:a.id})}))}else{qG(a,e.visible),_q(a,e.name);const i={updateHistogramSeriesProps:t,currentSeries:a,layer:c};a.columns.length>0?yield aU(i):a.events.once(wR,(()=>yd(this,void 0,void 0,(function*(){yield aU(i)})))),KH({series:a,seriesType:zD,dataLabelsConfig:e.dataLabels,yAxisValueFormat:n[1].valueFormat,customDataLabelFormatter:l}),eU({axes:n,series:a,seriesConfig:e,fieldList:d,tooltipFormatter:u}),zq({axes:n,currentSeries:a,tooltipValueFormat:e.dataTooltipValueFormat})}}}))}function uU(t){const e=y$(oR.dataLabelInitialize);return QV(e.uid,{isDataLabel:!0}),t.bullets.push(e),function(t,e){t.adapter.add("htmlOutput",((t,i)=>{var n,r;let s=t;const a=KV(e.uid,"scatterPlotDataLabelFormatter"),{dataItem:o}=i;if(o instanceof nj&&void 0!==a){const{valueX:t,valueY:i,customValue:u}=o,l=(null===(n=o.component)||void 0===n?void 0:n.xAxis).min,h=(null===(r=o.component)||void 0===r?void 0:r.yAxis).min;s=!0==(!0===k$({dataValue:t,series:e,seriesType:ED,axisMin:l})||!0===k$({dataValue:i,series:e,seriesType:ED,axisMin:h}))?"":a(t,i,u)}return hM(s)}),0)}(e,t),e.html="{valueX} - {valueY}",e}function lU(t){const{numberFormatter:e,dataLabelsConfigContent:i}=t;return(t,n)=>l$({textSymbol:Object.assign(Object.assign({},i),{text:`${e.format(t)} - ${e.format(n)}`}),format:"html"})}function hU(t){const{series:e}=t,i=I$(e,"bullets");F$(Object.assign(Object.assign({},t),{dataLabel:i,defaultDataLabelFormatter:lU,seriesType:ED}))}function cU(t){const{axes:e,seriesConfig:i,series:n,fieldList:r}=t,{dataTooltipVisible:s}=i;let a;const o=RV();return a=!1===s?(t,e,i)=>"":(t,s,a)=>{var u,l,h,c,d,f;const m=uH(aM(r,i.x),null===(l=null===(u=null==e?void 0:e[0].title)||void 0===u?void 0:u.content)||void 0===l?void 0:l.text),v=uH(aM(r,i.y),null===(c=null===(h=null==e?void 0:e[1].title)||void 0===h?void 0:h.content)||void 0===c?void 0:c.text),p=lH({series:n,callbackName:"tooltipValueXNumberFormatCallback",value:t}),b=lH({series:n,callbackName:"tooltipValueYNumberFormatCallback",value:s});let g=`<b>${m}${o} </b>${p}<br /><b>${v}${o} </b>${b}`;if(void 0!==a&&void 0!==(null===(d=i.sizePolicy)||void 0===d?void 0:d.field)){const t=aM(r,null===(f=i.sizePolicy)||void 0===f?void 0:f.field),e=lH({series:n,callbackName:"tooltipValueYNumberFormatCallback",value:a});g+=`<br /><b>${t}${o} </b>${e}<br /><b>`}return g},a}function dU(t){const{series:e,tooltipFormatter:i}=t;JV(e.uid,{scatterPlotTooltipFormatter:null!=i?i:cU(t)})}function fU(t){const e=t.renderer.labels.values.filter((t=>!0!==XV(t.uid,"isGuide")&&t.measuredWidth>0)).length;return t.pixelWidth/e}function mU(t){var e;const{target:i}=t,n=HV(i.chart.uid,"config"),r=null!==(e=null==n?void 0:n.horizontalAxisLabelsBehavior)&&void 0!==e?e:gP;if(r===wP){let t=Number.MAX_SAFE_INTEGER;i.renderer.labels.each((e=>{!0!==XV(e.uid,"isGuide")&&e.measuredWidth>0&&(t=Math.min(t,e.bbox.width))})),i.renderer.minGridDistance=t}else if(r!==gP){let t=0;if(i.renderer.labels.each((e=>{if(!0!==XV(e.uid,"isGuide")&&e.measuredWidth>0){const i=e.bbox.width;i>t&&(t=i)}})),t>0){r===yP&&(t*=.6),i.renderer.minGridDistance=t;const e=YV(i.uid,"debouncedSizechangedForMinGridDistanceCallBack");void 0!==e&&(i.events.off(bR,e),ZV(i.uid,{debouncedSizechangedForMinGridDistanceCallBack:void 0}))}}}function vU(t){var e,i,n;const{target:r}=t;if(void 0!==r.chart){const t=HV(r.chart.uid,"config"),s=null===(e=null==t?void 0:t.axes)||void 0===e?void 0:e[0].labels;if(void 0!==s&&r.renderer.labels.length>1){let t=0;r.renderer.labels.each((e=>{if(!0!==XV(e.uid,"isGuide")&&e.measuredWidth>0){const i=e.bbox.width;i>t&&(t=i)}}));const e=null!==(n=null===(i=YV(r.uid,"labelsSymbol"))||void 0===i?void 0:i.angle)&&void 0!==n?n:0,a=fU(r)>=t+5;if(!1===a&&0===e||!0===a&&e===oR.rotatedAxisLabel.rotation){const t=!1===a?b$({type:MD},oR.rotatedAxisLabel):b$(s.content,oR.axisLabel);ZV(r.uid,{labelsSymbol:t}),r.renderer.invalidateLabels()}}}}function pU(t){const{target:e}=t,i=fU(e);!0===Number.isFinite(i)&&(e.renderer.labels.template.maxWidth=i)}function bU(t){var e;const{target:i}=t,n=HV(i.chart.uid,"config"),r=null===(e=null==n?void 0:n.axes)||void 0===e?void 0:e[0].labels;!1!==(null==r?void 0:r.visible)&&(i.dataItems.each((t=>{const{tick:e,label:i,itemIndex:n}=t;if(!0!==XV(i.uid,"isGuide")&&void 0!==i.currentText&&i.measuredWidth>0){const t=i.bbox.height,r=n%2==1;e.length=!0===r?t+5:oR.axisTickLength,e.dataItem.label.dy=oR.axisLabel.dy+(!0===r?t:0)}})),i.validate())}function gU(t){t.renderer.labels.template.maxWidth=NaN,t.renderer.labels.template.wrap=!1,t.renderer.labels.template.textAlign="start"}function yU(t){!function(t){var e;const{chart:i}=t;t.renderer.labels.template.paddingLeft=NaN,t.renderer.labels.template.paddingRight=NaN;const n=YV(t.uid,"debouncedAxisLabelRotationCallback");if(void 0!==n&&(t.events.off(wR,n),ZV(t.uid,{debouncedAxisLabelRotationCallback:void 0})),void 0!==i){const n=HV(i.uid,"config"),r=null===(e=null==n?void 0:n.axes)||void 0===e?void 0:e[0].labels;if(void 0!==r){const e=b$(r.content,oR.axisLabel),i=t.renderer.labels.template;i.rotation=e.angle,i.verticalCenter=e.verticalCenter,i.horizontalCenter=e.horizontalCenter,i.dy=e.yOffset}ZV(t.uid,{labelsSymbol:void 0})}}(t),function(t){gU(t),t.renderer.labels.template.paddingLeft=NaN,t.renderer.labels.template.paddingRight=NaN;const e=YV(t.uid,"debouncedAxisLabelWrapCallback");void 0!==e&&(t.events.off(TR,e),ZV(t.uid,{debouncedAxisLabelWrapCallback:void 0}))}(t),function(t){const e=YV(t.uid,"debouncedAxisLabelStaggerCallback");void 0!==e&&(t.events.off(TR,e),ZV(t.uid,{debouncedAxisLabelStaggerCallback:void 0}));const i=YV(t.uid,"debouncedSizechangedForMinGridDistanceCallBack");void 0!==i&&(t.events.off(bR,i),ZV(t.uid,{debouncedSizechangedForMinGridDistanceCallBack:void 0})),t.renderer.ticks.each((t=>{var e;t.length=oR.axisTickLength,t.dataItem.label.dy=null!==(e=oR.axisLabel.dy)&&void 0!==e?e:0}))}(t)}function wU(t){!function(t){const e=t.renderer.labels.template;XG(e)&&(e.adapter.add("rotation",((e,i)=>{var n,r;return!0!==XV(i.uid,"isGuide")&&null!==(r=null===(n=YV(t.uid,"labelsSymbol"))||void 0===n?void 0:n.angle)&&void 0!==r?r:e})),e.adapter.add("verticalCenter",((e,i)=>{var n,r;return!0!==XV(i.uid,"isGuide")&&null!==(r=null===(n=YV(t.uid,"labelsSymbol"))||void 0===n?void 0:n.verticalCenter)&&void 0!==r?r:e})),e.adapter.add("horizontalCenter",((e,i)=>{var n,r;return!0!==XV(i.uid,"isGuide")&&null!==(r=null===(n=YV(t.uid,"labelsSymbol"))||void 0===n?void 0:n.horizontalCenter)&&void 0!==r?r:e})),e.adapter.add("dy",((e,i)=>{var n,r,s,a,o;let u=null!==(n=oR.axisLabel.dy)&&void 0!==n?n:e;return u=(null===(s=null===(r=i.dataItem)||void 0===r?void 0:r.tick)||void 0===s?void 0:s.length)>oR.axisTickLength?e:!0!==XV(i.uid,"isGuide")&&null!==(o=null===(a=YV(t.uid,"labelsSymbol"))||void 0===a?void 0:a.yOffset)&&void 0!==o?o:u,u})))}(t),t.renderer.labels.template.paddingLeft=0,t.renderer.labels.template.paddingRight=0;const e=QN(vU,oR.debounceTime,{leading:!0});ZV(t.uid,{debouncedAxisLabelRotationCallback:e}),t.events.on(wR,e),t.dispatchImmediately(wR)}function SU(t){const{axis:e,horizontalAxisLabelsBehavior:i,verticalAxisLabelsBehavior:n,labelsConfig:r,axisLabelsBehaviorChanged:s}=t;if(e.renderer instanceof qA&&!0===(null==s?void 0:s[0]))switch(yU(e),i){case bP:break;case yP:!function(t){const e=QN(bU,oR.debounceTime);ZV(t.uid,{debouncedAxisLabelStaggerCallback:e}),t.events.on(TR,e)}(e);break;case wP:!function(t){t.renderer.labels.template.wrap=!0,t.renderer.labels.template.paddingLeft=0,t.renderer.labels.template.paddingRight=0;const e=QN(pU,oR.debounceTime);ZV(t.uid,{debouncedAxisLabelWrapCallback:e}),t.events.on(TR,e)}(e);break;case gP:wU(e);break;default:null!==r.content.angle&&void 0===r.content.angle&&wU(e)}else e.renderer instanceof BA&&!0===(null==s?void 0:s[1])&&(n!==bP?function(t){t.renderer.labels.template.maxWidth=oR.yAxisLabelMaxWidth,t.renderer.labels.template.wrap=!0,t.renderer.labels.template.textAlign="end"}(e):function(t){gU(t)}(e))}function xU(t,e){const i=t.renderer instanceof hj?new lj:new PA;return i.disabled=!0,i.axis=t,g$(i),QV(i.uid,{isGuide:e}),VV({chart:t.chart,label:i,labelType:NV}),!0===e&&function(t,e){t.chart instanceof vj==0&&(e.adapter.add("dx",(t=>{let i=t;return 90!==e.rotation&&270!==e.rotation||(i=e.bbox.height,e.dataItem.value!==e.dataItem.endValue&&(i/=2)),i})),e.padding(0,10,0,10))}(t,i),i}const CU="guides",OU="ticks",MU="firstAndLast",TU="gaugeTicksWithLabels";function kU(t,e){return i=>{var n,r,s,a,o;const{guideName:u,start:l,end:h,guideIndex:c}=i,{chart:d}=t;let f="";if(void 0!==d){const i=HV(d.uid,"config"),m=HV(d.uid,"isRotated"),v=!0===(!1===nK(t.renderer,m))?1:0,p=null===(n=null==i?void 0:i.axes)||void 0===n?void 0:n[v],b=null==p?void 0:p.guides;let g=l,y=h;if(t instanceof WA){let t,e=new yb;void 0!==d&&(e=IV(PD,d.language.locale),t=null===(a=null===(s=null===(r=null==i?void 0:i.axes)||void 0===r?void 0:r[0])||void 0===s?void 0:s.valueFormat)||void 0===a?void 0:a.intlOptions),g=e.format(l,t),void 0!==h&&(y=e.format(h,t))}else if(t instanceof VA&&l instanceof Date==!1&&h instanceof Date==!1){const{start:e,end:i}=AU(t,null==b?void 0:b[c]);!0===Number.isFinite(e)&&(g=e),!0===Number.isFinite(i)&&(y=i);const n=null!==(o=YV(t.uid,"numberFormatter"))&&void 0!==o?o:t=>(new gb).format(t);g=n(g),void 0!==y&&(y=n(y))}else t instanceof KA&&(g=l,y=h);void 0!==g&&(g=`${g}`),void 0!==y&&(y=`${y}`),f=!1===oM(y)&&g!==y?fC(null==e?void 0:e.guideTooltipLabel,{guideStart:g,guideEnd:y}):`${g}`;f=`${u}${RV()} ${f}`}return f}}function IU(t){var e;const{inputValue:i,axisType:n,axisMin:r,axisMax:s,isRTL:a}=t;let o=i;if(null!=i)switch(n){case xP:o=i instanceof Date?i:new Date(i);break;case CP:o=i.toString();break;case SP:if("number"!=typeof i){const t=i.toString().trim();if(!0===function(t,e=!1){let i=!1;void 0!==t&&(i=(!0===e?/^%(0*100{1,1}\.?((?:\.)0*)?$)|(^%0*\d{0,2}\.?((?:\.)\d*)?)$/:/^(0*100{1,1}\.?((?:\.)0*)?%$)|(^0*\d{0,2}\.?((?:\.)\d*)?%)$/).test(t.replace(" ","")));return i}(t,a))if(void 0!==r&&void 0!==s){const i=null===(e=(!0===a?/%(\d{1,3}(.\d+)?)$/:/(\d{1,3}(.\d+)?)%$/).exec(t.replace(" ","")))||void 0===e?void 0:e[1];void 0!==i&&(o=Number(i)/100*(s-r)+r)}else o=null;else o=parseFloat(t)}}return o}function AU(t,e){var i;const{start:n,end:r}=null!=e?e:{};let s;if(void 0!==e&&null!=n){const a=function(t){let e=SP;return t instanceof WA?e=xP:t instanceof KA&&(e=CP),e}(t),o=t instanceof VA?t.min:void 0,u=t instanceof VA?t.max:void 0,l=t instanceof VA&&t.chart.rtl,h=IU({inputValue:n,axisType:a,axisMin:o,axisMax:u,isRTL:l}),c=(null===(i=e.style)||void 0===i?void 0:i.type)===OD&&null!=r?IU({inputValue:r,axisType:a,axisMin:o,axisMax:u,isRTL:l}):h;s={isValidGuide:null!=h&&null!=c,start:h,end:c}}else s={isValidGuide:!1,start:void 0,end:void 0};return s}function jU(t){var e,i;const{axis:n,tickOrGuide:r,numberOfElementsToBeDeleted:s}=t,a=[];let o=n.axisRanges.length-1,u=s;for(;u>0&&o>=0;){const t=n.axisRanges.getIndex(o);if(void 0!==t){const n=null!==(i=XV(null===(e=t.label)||void 0===e?void 0:e.uid,"isGuide"))&&void 0!==i&&i;(!0!==n&&r===OU||!0===n&&r===CU)&&(a.push(t),u-=1)}o-=1}for(let t=0;t<a.length;t+=1)n.axisRanges.removeValue(a[t])}function FU(t,e){var i,n;const r=null===(n=null===(i=t.axisRanges)||void 0===i?void 0:i.values)||void 0===n?void 0:n.filter((t=>{var i,n,r,s;const a=null!==(n=XV(null===(i=t.label)||void 0===i?void 0:i.uid,"isGuide"))&&void 0!==n&&n,o=null!==(s=XV(null===(r=t.label)||void 0===r?void 0:r.uid,"isGaugeAxisLabel"))&&void 0!==s&&s;let u=!1;switch(e){case OU:u=!1===a;break;case CU:u=!0===a;break;case TU:u=!0===o&&void 0!==t.value;break;case MU:u=!0===a&&(t.id===oR.gaugeFirstLabelId||t.id===oR.gaugeLastLabelId)}return u}));return null!=r?r:[]}function DU(t,e){let i,n=t.axisRanges.length;if(!0===e){const e=t.axisRanges.values.findIndex((t=>t.id===oR.gaugeFirstLabelId));-1!==e&&(n=e)}return i=t instanceof KA?new UA:t instanceof WA?new $A:new zA,t.axisRanges.insertIndex(n,i),i.label=xU(t,e),i.axisFill.fillOpacity=1,i.axisFill.disabled=!0,i.grid.strokeOpacity=1,i}function PU(t,e){const i=DU(t,!0);!function(t,e){t.axisFill.tooltip=new Ag,t.axisFill.interactionsEnabled=!0,t.axisFill.tooltipPosition="pointer",t.axisFill.adapter.add("tooltipHTML",((t,i)=>{var n;let r=t;const{dataItem:s,axis:a}=i;if(a.renderer instanceof hj==0){const t=YV(a.uid,"guideTooltipFormatter");if(void 0!==t){let i,a="";s instanceof zA?(a=s.value,i=s.endValue):s instanceof UA?(a=s.category,i=s.endCategory):s instanceof $A&&(a=s.date,i=s.endDate),r=t({guideName:null!==(n=s.id)&&void 0!==n?n:"",start:a,end:i,guideIndex:e})}!0===oM(r)&&(r="<p></p>")}return r}))}(i,e),void 0!==i.tick&&(i.tick.disabled=!0),void 0!==i.label&&(i.label.inside=!0),void 0!==i.grid&&(i.grid.disabled=!0)}function LU(t,e){var i;const{start:n,end:r}=e;if(void 0!==n){const{chart:s}=null!==(i=null==t?void 0:t.component)&&void 0!==i?i:{};let a;if(t instanceof UA&&s instanceof QA&&!0===HV(s.uid,"isNonAggregatedChart")){const{modifiedStart:t,modifiedEnd:i}=function(t,e){var i;const{start:n,end:r}=e,s=HV(t.uid,"config"),a=HG(null==s?void 0:s.series[0]);let o=null!==n?n:void 0;const u=t.data.find((t=>t[oR.originalCategoryValue]===n));o=null!==(i=null==u?void 0:u[a])&&void 0!==i?i:o;let l=null!==r?r:void 0;if(void 0!==l)for(let e=t.data.length-1;e>=0;e-=1){const i=t.data[e];if(i[oR.originalCategoryValue]===r){l=i[a];break}}return{modifiedStart:o,modifiedEnd:l}}(s,e);a={isValidGuide:!0,start:null!=t?t:n,end:null!=i?i:r}}else a=AU(t.axisFill.axis,e);!0===a.isValidGuide&&(t instanceof UA?(t.category=`${a.start}`,t.endCategory=`${a.end}`):t instanceof $A?(t.date=a.start,t.endDate=a.end):(t.value=a.start,t.endValue=a.end))}}function EU(t,e){var i,n;const{axisFill:r,label:s}=t;if(void 0!==e){if(t.id=e.name,t.visible=void 0!==e.visible?e.visible:t.visible,LU(t,e),e.style.type===xD?wW({element:r,fillSymbol:{type:OD,color:null===(i=e.style)||void 0===i?void 0:i.color,outline:e.style},visible:e.visible}):e.style.type===OD&&wW({element:r,fillSymbol:e.style,visible:e.visible}),a=t,o=e.above,a.axisFill.above=null!=o?o:oR.guideAbove,a.grid.above=null!=o?o:oR.guideAbove,void 0!==e.label){!function(t){const{label:e,labelConfig:i,guideType:n}=t,r=e.axis.renderer instanceof qA;let s;e instanceof lj==0&&(s=!0===r?n===OD?oR.verticalSurfaceGuideLabels:oR.verticalLineGuideLabels:n===OD?oR.horizontalSurfaceGuideLabels:oR.horizontalLineGuideLabels),S$(e,i,s),e.axis.invalidateLabels()}({label:s,labelConfig:{type:AD,visible:e.visible,content:e.label},guideType:e.style.type})}zV({chart:null===(n=t.component)||void 0===n?void 0:n.chart,label:s,labelType:NV})}else r.disabled=!0,s.disabled=!0;var a,o}function NU(t){const{axis:e,guides:i,guideTooltipFormatter:n,commonStrings:r}=t;if(void 0!==i){for(let t=0;t<i.length;t+=1){const n=FU(e,CU)[t];void 0!==n&&EU(n,i[t])}!function(t){const{axis:e,guideTooltipFormatter:i,commonStrings:n}=t;ZV(e.uid,{guideTooltipFormatter:null!=i?i:kU(e,n)})}({axis:e,guideTooltipFormatter:n,commonStrings:r})}}function RU(t){const{axis:e,guides:i}=t;!function(t,e){var i;const n=FU(t,CU).length,r=(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:n)-n;for(let e=0;e<r;e+=1)PU(t,e)}(e,i),NU(t),function(t,e){var i;jU({axis:t,numberOfElementsToBeDeleted:FU(t,CU).length-(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0),tickOrGuide:CU})}(e,i)}function BU(t){const e=DU(t,!1);e.label.inside=!1,e.grid.disabled=!0,e.label.html="<p></p>",e.label.adapter.add("htmlOutput",((e,i)=>{var n,r;return oG(t,null!==(r=null===(n=null==i?void 0:i.dataItem)||void 0===n?void 0:n.value)&&void 0!==r?r:e)}))}function _U(t){const{axisTick:e,value:i,axisConfig:n,numberFormatter:r}=t;e.value=i,n.labels.content.text=r.format(i),yW({element:e.tick,lineSymbol:n.lineSymbol,visible:n.visible})}function zU(t){const{valueAxis:e,axisConfig:i,ticks:n}=t;!function(t,e){var i;const n=FU(t,OU).length,r=(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:n)-n;for(let e=0;e<r;e+=1)BU(t)}(e,n),function(t){const{valueAxis:e,axisConfig:i,ticks:n}=t,r=IV(i.valueFormat.type,e.chart.language.locale);if(r.numberFormat=eG(i.valueFormat),void 0!==n){const t=FU(e,OU);for(let e=0;e<n.length;e+=1){const s=t[e];void 0!==s&&_U({axisTick:s,value:n[e],axisConfig:i,numberFormatter:r})}}}({valueAxis:e,axisConfig:i,ticks:n}),function(t,e){var i;jU({axis:t,numberOfElementsToBeDeleted:FU(t,OU).length-(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0),tickOrGuide:OU})}(e,n)}const VU="selectXY",GU="selectX",$U="selectY",WU="zoomXY",qU="zoomX",HU="zoomY",UU="none";function KU(t){t instanceof vj==!1&&t instanceof Oj==!1&&(t.cursor=new EF)}function JU(t,e){var i;if(t instanceof vj==!1&&t instanceof Oj==!1){const n=t,r=null!==(i=n.cursor)&&void 0!==i?i:new EF;void 0!==(null==e?void 0:e.style)&&function(t,e){var i,n,r;const s=oR.cursorCrosshair.style,a={type:xD,style:null!==(i=e.style)&&void 0!==i?i:s.style,color:null!==(n=e.color)&&void 0!==n?n:s.color,width:null!==(r=e.width)&&void 0!==r?r:s.width};yW({element:t.cursor.lineX,lineSymbol:a}),yW({element:t.cursor.lineY,lineSymbol:a})}(n,e.style);const s=oR.cursorCrosshair;r.lineX.disabled=!1===s.verticalLineVisible?!0!==(null==e?void 0:e.verticalLineVisible):!1===(null==e?void 0:e.verticalLineVisible),r.lineY.disabled=!1===s.horizontalLineVisible?!0!==(null==e?void 0:e.horizontalLineVisible):!1===(null==e?void 0:e.horizontalLineVisible),n.cursor=r}}function YU(t,e){const i=t.renderer.labels.template;!0===i.events.hasListenersByType(cR)&&(i.cursorOverStyle=e),t.renderer.labels.each((t=>{t.cursorOverStyle=e}))}function ZU(t,e){var i,n,r,s,a,o,u;const l=HV(t.uid,"isRotated"),h=HV(t.uid,"config"),c=iM(null==h?void 0:h.series),d=c===ED,f=c===BD&&iG(null===(n=null===(i=null==h?void 0:h.axes)||void 0===i?void 0:i[0])||void 0===n?void 0:n.valueFormat),m=c===BD&&rG(null===(s=null===(r=null==h?void 0:h.axes)||void 0===r?void 0:r[0])||void 0===s?void 0:s.valueFormat),v=c===BD&&sG(null===(o=null===(a=null==h?void 0:h.axes)||void 0===a?void 0:a[0])||void 0===o?void 0:o.valueFormat);let p,b=!1;if(!0===HV(t.uid,"filterBySelection"))p=UU,b=!1;else{switch(null!==(u=null!=e?e:HV(t.uid,"actionMode"))&&void 0!==u?u:oR.actionMode){case fA:p=!0===d||!0===f||!0===v?WU:!0===l?HU:qU,b=!1;break;case cA:case dA:p=!0===m?!0===l?$U:GU:VU,b=!0;break;case hA:p=UU,b=!0;break;case mA:p=UU,b=!1}}t instanceof QA&&void 0!==t.cursor&&void 0!==p&&(t.cursor.behavior=p),function(t){const{chart:e,seriesType:i,enabled:n}=t,r=!0===n?fb.pointer:fb.default;switch(i){case zD:case VD:case _D:case ND:e.series.each((t=>{(t instanceof Hj||t instanceof xj)&&(t.cursorOverStyle=r)}));break;case BD:case ED:e.series.each((t=>{if(!0!==KV(t.uid,"isOverlay")){const e=JG(t);void 0!==e&&(e.cursorOverStyle=r,e.clones.each((t=>{t.cursorOverStyle=r})))}}))}}({chart:t,seriesType:c,enabled:b})}function XU(t){var e;return yd(this,void 0,void 0,(function*(){const i=t.target,{axis:n,chart:r,queryObject:s}=function(t){const{axis:e}=t,i=e.chart;return{axis:e,chart:i,queryObject:HV(i.uid,"queryObject")}}(i),a=n instanceof WA,o=[];let u,l;if(!0===a){const{date:t,endDate:n}=null===(e=i.dataItem)||void 0===e?void 0:e.dates;u=t,l=n}else{const{seriesDataItems:e}=t.target.dataItem;for(const t in e)if(!0===Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];for(const t of i)if(t instanceof qj)o.push(t.column);else{const e=t.sprites.find((t=>t instanceof Yb==!1));void 0!==e&&o.push(e)}}}const h=MW(t),c=n instanceof WA==!0||n instanceof KA==!0,d=[];r.series.each(((t,e)=>{var i,r,f;let m;if(m=t instanceof Hj?t.columns:null===(i=JG(t))||void 0===i?void 0:i.clones,!0===t.visible){const i=CG(t),v=OG(t),p=null!==(f=null===(r=t.dataFields)||void 0===r?void 0:r.customValue)&&void 0!==f?f:"",b=MG(t,e);null==m||m.each(((t,r)=>{let f=!1;f=!0===a?function(t){var e;const{axis:i,elementDataItem:n,selectedStartDate:r,selectedEndDate:s}=t;let a=!1;if(void 0!==r&&void 0!==s){const t=Bq(i,HV(i.chart.uid,"isRotated")),o=null===(e=null==n?void 0:n.dates)||void 0===e?void 0:e[t];a=null!=o&&r<=o&&o<=s}return a}({axis:n,elementDataItem:t.dataItem,selectedStartDate:u,selectedEndDate:l}):o.includes(t);!0===OW({element:t,selected:f,multiSelect:h,isDateOrCategoryAxis:c})&&d.push({queryObject:s,element:t,yAxisField:v,xAxisField:i,splitBy:p,chartType:b,seriesIndex:e,elementIndex:r})}))}})),yield aH({chart:r,listSelectedElements:d,selectionSource:oA})}))}function QU(t,e){var i,n;if(XG(null===(n=null===(i=null==t?void 0:t.renderer)||void 0===i?void 0:i.labels)||void 0===n?void 0:n.template)&&(t instanceof KA||t instanceof WA))if(!0===e)t.renderer.labels.template.events.disableType(cR),YU(t,fb.default);else{t.renderer.labels.template.events.enableType(cR);YU(t,!0===HV(t.chart.uid,"filterBySelection")?fb.default:fb.pointer)}}function tK(t){const{axis:e,start:i,end:n}=t;e.zoom({start:null!=i?i:0,end:null!=n?n:1})}function eK(t){void 0!==t&&(t.start=0,t.end=1)}function iK(t){void 0!==t&&(void 0!==t.xAxes&&t.xAxes.each((t=>tK({axis:t}))),void 0!==t.yAxes&&t.yAxes.each((t=>tK({axis:t}))),eK(t.scrollbarX),eK(t.scrollbarY),qG(t.zoomOutButton,!1))}function nK(t,e){return t instanceof qA&&!0!==e||t instanceof BA&&!0===e}function rK(t){const{axis:e,valueFormat:i,axisRenderer:n}=t;n.grid.template.applyOnClones=!0,n.ticks.template.applyOnClones=!0,n.labels.template.applyOnClones=!0,n.hoverable=!0,n.line.strokeOpacity=1,n.grid.template.strokeOpacity=1,n.ticks.template.strokeOpacity=1,g$(n.labels.template,oR.axisLabel),n.ticks.template.disabled=!1,n.labels.template.disabled=!0,function(t){const e=t.tooltip;void 0!==e&&t instanceof WA==0&&(e.label.adapter.add("html",((i,n)=>{var r,s;let a=i;return t instanceof VA?a=oG(t,null!==(s=null===(r=n.properties)||void 0===r?void 0:r.text)&&void 0!==s?s:i):t instanceof KA&&(a=uG({axis:t,defaultOutput:i,dataItem:e.dataItem})),hM(a)})),e.label.html=oR.htmlEmptyContent)}(e),!0!==rG(i)&&!0!==sG(i)||(function(t){XG(t.labels.template)&&(t.labels.template.events.on(vR,(t=>{var e;const{axisLabelOveredOpacity:i}=oR;t.target.fillOpacity=(null!==(e=t.target.fillOpacity)&&void 0!==e?e:1)*i})),t.labels.template.events.on(pR,(t=>{var e;const{axisLabelOveredOpacity:i}=oR;t.target.fillOpacity=(null!==(e=t.target.fillOpacity)&&void 0!==e?e:.5)/i})))}(n),function(t){if(XG(t.renderer.labels.template)){t.renderer.labels.template.events.on(cR,(e=>yd(this,void 0,void 0,(function*(){!0===t.renderer.labels.template.events.isEnabled(cR)&&(yield XU(e))}))));const e=!0===HV(t.chart.uid,"filterBySelection")?fb.default:fb.pointer;YU(t,e)}}(e)),VV({chart:e.chart,label:e.title,labelType:e.renderer instanceof qA?FV:DV})}function sK(t){const e=t.target,i=HV(e.chart.uid,"isRotated");if(e instanceof VA&&e.renderer instanceof(!0!==i?BA:qA)){const e=t.target,s=e.chart,a=!0!==i?s.xAxes.getIndex(0):s.yAxes.getIndex(0),o=[{isXAxis:!1,minimum:e.min,maximum:e.max},{isXAxis:!0,minimum:a instanceof VA&&a instanceof WA==!1?a.min:void 0,maximum:a instanceof VA&&a instanceof WA==!1?a.max:void 0}];!1===Number.isNaN(o[0].minimum)&&!1===Number.isNaN(o[0].maximum)&&!1===Number.isNaN(o[1].minimum)&&!1===Number.isNaN(o[1].maximum)&&(n=o,void 0!==(r=e.chart.htmlContainer)&&r.dispatchEvent(new window.CustomEvent(E$.AxesMinMaxChange,N$(n))))}var n,r}function aK(t){var e,i,n,r,s;const{axis:a,axisMinimum:o,axisMaximum:u}=t;let l;if(a instanceof VA&&void 0!==u&&void 0!==o){const t=a.axisRanges.values,h=HV(a.chart.uid,"config"),c=HV(a.chart.uid,"isRotated"),d=!0===(!1===nK(a.renderer,c))?1:0,f=null===(e=null==h?void 0:h.axes)||void 0===e?void 0:e[d],m=null==f?void 0:f.guides;for(let e=0;e<t.length;e+=1){const h=t[e],{value:c,endValue:d,axisFill:f,grid:v,label:p}=h;if(!0===XV(null==p?void 0:p.uid,"isGuide")){if(l=h.visible,!0===l&&h instanceof zA){const{start:t,end:f}=AU(a,null==m?void 0:m[e]),v=Math.min(c,d,null!==(i=t)&&void 0!==i?i:c,null!==(n=f)&&void 0!==n?n:d),p=Math.max(c,d,null!==(r=t)&&void 0!==r?r:c,null!==(s=f)&&void 0!==s?s:d);v<o&&p<o||v>u&&p>u?l=!1:(h.value=v<o?o:v,h.endValue=p>u?u:p)}qG(f,l),qG(v,l),qG(p,l)}}}}function oK(t){t instanceof VA?(t.adapter.add("min",(e=>(aK({axis:t,axisMinimum:e,axisMaximum:t.max}),e))),t.adapter.add("max",(e=>(aK({axis:t,axisMinimum:t.min,axisMaximum:e}),e)))):t instanceof KA&&t.events.on("validated",(()=>{const e=HV(t.chart.uid,"isNonAggregatedChart");!function(t){const{axis:e,isNonAggregatedChart:i}=t;let n,r,s;const a=e.dataItems.values,o=e.axisRanges.values;if(e instanceof KA)for(let t=0;t<o.length;t+=1){n=!1,r=!1,s=!1;const e=o[t],{category:u,endCategory:l,axisFill:h,grid:c,label:d}=e;if(e instanceof UA&&!0===e.visible)for(let t=0;t<a.length;t+=1){let e;e=!0===i?kG({value:a[t].category,dataContext:a[t].dataContext}):a[t].category.toString(),u===e&&(r=!0),l===e&&(s=!0)}!0===r&&!0===s&&(n=!0),qG(h,n),qG(c,n),qG(d,n)}}({axis:t,isNonAggregatedChart:e})}))}function uK(t){const{axes:e,valueFormat:i,isNonAggregatedChart:n}=t;let r;!function(t){for(var e;t.length>0;)null===(e=t.pop())||void 0===e||e.dispose()}(e),!0===sG(i)&&!0!==n?r=e.push(new WA):!0===iG(i)?(r=e.push(new VA),r.numberFormatter=IV(DD,r.chart.language.locale),r.numberFormatter.numberFormat="#",function(t){t.events.on(wR,QN(sK,oR.debounceTime))}(r)):!0!==rG(i)&&!0!==n||(r=e.push(new KA)),void 0!==r&&(hG(r),rK({axis:r,valueFormat:i,axisRenderer:r.renderer}),oK(r))}function lK(t){const{chart:e,axesTypes:i,isRotated:n}=t,r=HV(e.uid,"isNonAggregatedChart");UV(e.uid,{isRotated:!0===n}),uK({axes:e.xAxes,valueFormat:!0===n?i[1]:i[0],isNonAggregatedChart:r}),uK({axes:e.yAxes,valueFormat:!0===n?i[0]:i[1],isNonAggregatedChart:r})}function hK(t){const{axis:e}=t;let i=!1;return e instanceof VA&&e instanceof WA==!1&&(i=function(t){const{axis:e,buffer:i,isLogarithmic:n}=t;return e instanceof VA&&e instanceof WA==0&&!0!==n&&!0!==i}(t),e.strictMinMax=i),i}function cK(t){const{axis:e,minimumFromConfig:i,maximumFromConfig:n,bufferFromConfig:r,isLogarithmic:s,seriesType:a}=t;if(!0===hK({axis:e,buffer:null!=r?r:oR.buffer,isLogarithmic:s})&&(e instanceof VA||e instanceof WA)){let t=i,r=n;if(a!==zD&&!0===e.strictMinMax&&(!1===Number.isFinite(i)||!1===Number.isFinite(n))){const s=function(t){const{axis:e,minimumFromConfig:i,maximumFromConfig:n,seriesType:r}=t;let s=i,a=n;const{chart:o}=e,u=HV(o.uid,"isRotated"),l=HV(o.uid,"config");if(o instanceof QA&&void 0!==l){const t=nM(null==l?void 0:l.series[0]),i=!0===nK(e.renderer,u),n=function(t){let e=[];return void 0!==t&&(e=t.series.values.map((t=>!1!==t.visible?`${t.id}`:"")).filter((t=>""!==t))),e}(o),h=_M({chartConfig:l,chartData:o.data,visibleSeriesId:n}),{minX:c,maxX:d,minY:f,maxY:m}=h,[v,p]=!0===i?[null!=c?c:NaN,null!=d?d:NaN]:[f,m];r===_D||r===zD||r===VD||r===BD&&t===ZD&&!1===i?(s=Math.min(v,0),a=Math.max(p,0)):(s=v,a=p)}return s=null!=i?i:s,a=null!=n?n:a,{min:s,max:a}}({axis:e,minimumFromConfig:i,maximumFromConfig:n,seriesType:a});t=s.min,r=s.max}t=null!=t?t:NaN,r=null!=r?r:NaN,!0===Number.isNaN(t)||!0===Number.isNaN(r)||t<r?(e.min=t,e.max=r):(e.min=NaN,e.max=NaN),a===RD&&e.validate()}}function dK(t){const e=QN((()=>{var e,i;const{chart:n}=t,r=HV(n.uid,"config");if(void 0!==n&&void 0!==r){const s=HV(n.uid,"isRotated"),a=KV(t.uid,"stackedType");!0===(a===XD)&&!1===t.visible&&qG(t,!1);const o=iM(null==r?void 0:r.series),u=n.xAxes.getIndex(0),l=!0===s?1:0,h=null===(e=r.axes)||void 0===e?void 0:e[l],c=!0===s?0:1,d=null===(i=r.axes)||void 0===i?void 0:i[c];if(void 0!==u){const{minimum:t,maximum:e,buffer:i,isLogarithmic:n}=null!=h?h:{};cK({axis:u,seriesType:o,minimumFromConfig:t,maximumFromConfig:e,bufferFromConfig:i,isLogarithmic:n})}const f=n.yAxes.getIndex(0);if(void 0!==f){const{minimum:e,maximum:i,buffer:n,isLogarithmic:r}=null!=d?d:{};cK({axis:f,seriesType:o,minimumFromConfig:e,maximumFromConfig:i,bufferFromConfig:n,isLogarithmic:r}),f.events.once(wR,(()=>{const{labelToRender:e}=P$(t,a);e&&(e.html=!0===s?"{valueX}":"{valueY}")}))}}}),oR.debounceTime);t.events.on(wR,e)}function fK(t){return yd(this,void 0,void 0,(function*(){const{axis:e,axisConfig:i,isNonAggregatedChart:n,timeIntervalInfo:r,seriesType:s,horizontalAxisLabelsBehavior:a,verticalAxisLabelsBehavior:o,axisLabelsBehaviorChanged:u,guideTooltipFormatter:l,stackedType:h,axisValueFormatter:c,commonStrings:d}=t,{visible:f,isLogarithmic:m,title:v,grid:p,lineSymbol:b,labels:g,guides:y,valueFormat:w,minimum:S,maximum:x,displayZeroLine:C,displayCursorTooltip:O,buffer:M}=i;!function(t,e){if(t instanceof WA){const{timeIntervalSize:i,timeIntervalUnits:n}=null!=e?e:{};if(void 0!==i&&void 0!==n){let e;const r=i;switch(n){case aP:e="second";break;case oP:e="minute";break;case uP:e="hour";break;case lP:e="day";break;case hP:e="week";break;case cP:e="month";break;case dP:e="year"}void 0!==e&&(t.baseInterval={timeUnit:e,count:r})}}}(e,r),yW({element:e.renderer.grid.template,lineSymbol:p,visible:f}),yW({element:e.renderer.line,lineSymbol:b,visible:f}),yW({element:e.renderer.ticks.template,lineSymbol:b,visible:f}),function(t){const{axis:e,axisConfig:i,seriesType:n,horizontalAxisLabelsBehavior:r,verticalAxisLabelsBehavior:s,axisLabelsBehaviorChanged:a}=t;if(e.renderer instanceof BA||n!==zD){const t=e.renderer.labels.template;t.axis=e;const{labels:n}=i,o=e.renderer instanceof qA&&t.rotation===oR.rotatedAxisLabel.rotation,u=n;!0===o&&(u.content.angle=void 0,u.content.horizontalAlignment=void 0,u.content.verticalAlignment=void 0,u.content.yoffset=void 0),S$(t,u,!0===o?oR.rotatedAxisLabel:void 0),e.renderer.labels.template.paddingTop=e.renderer instanceof qA?0:oR.axisLabel.dy,t.align="none",t.valign="none",SU({axis:e,horizontalAxisLabelsBehavior:r,verticalAxisLabelsBehavior:s,labelsConfig:n,axisLabelsBehaviorChanged:a}),t.axis.invalidateLabels()}}({axis:e,axisConfig:i,seriesType:s,horizontalAxisLabelsBehavior:a,verticalAxisLabelsBehavior:o,axisLabelsBehaviorChanged:u}),function(t,e){if(t instanceof VA){const{integerOnlyValues:i,valueFormat:n}=e,{maximumFractionDigits:r}=n.intlOptions;t.maxPrecision=!0===i||0===r?0:NaN}}(e,i),function(t){var e,i;const{axis:n,labelsConfig:r,horizontalAxisLabelsBehavior:s}=t;let a=n.renderer.minGridDistance;if(n.renderer instanceof qA)if(void 0===s||s===gP)a=(null!==(i=null===(e=r.content.font)||void 0===e?void 0:e.size)&&void 0!==i?i:oR.generalFontSize)*(n instanceof KA?oR.categoryAxisLabelPadding:oR.axisLabelPadding);else{const t=QN(mU,oR.debounceTime);ZV(n.uid,{debouncedSizechangedForMinGridDistanceCallBack:t}),n.events.on(bR,t),n.dispatchImmediately(bR)}else a=n.renderer instanceof hj?oR.gauge.gaugeMinGridDistance:oR.yAxisMinGridDistance;n.renderer.minGridDistance=a}({axis:e,labelsConfig:g,horizontalAxisLabelsBehavior:a}),yield fG({isNonAggregatedChart:n,axis:e,labelsTextSymbol:i.labels.content,formatOptions:w,overridePercentMultiplication:h===XD,axisValueFormatter:c}),s!==zD&&s!==RD||cK({axis:e,minimumFromConfig:S,maximumFromConfig:x,seriesType:s,bufferFromConfig:M,isLogarithmic:m}),RU({axis:e,guides:y,guideTooltipFormatter:l,commonStrings:d}),function(t,e){(t instanceof WA||t instanceof VA)&&t.events.on(SR,(()=>{t.logarithmic=!0===e}))}(e,m),function(t){const{axis:e,title:i,horizontalAxisLabelsBehavior:n}=t,r=e.renderer instanceof qA;e.events.once(wR,(()=>{var t;let s=e.renderer instanceof BA?oR.yAxisTitleLabel:oR.xAxisTitleLabel;if(!0===r){const e=n===yP?10:null!==(t=s.dy)&&void 0!==t?t:0;s=Object.assign(Object.assign({},s),{dy:e})}S$(e.title,i,s),zV({chart:e.chart,label:e.title,labelType:e.renderer instanceof qA?FV:DV})}))}({axis:e,title:v,horizontalAxisLabelsBehavior:a}),function(t,e){t instanceof VA&&(t.renderer.baseGrid.disabled=!0!==e)}(e,C),function(t,e){t.cursorTooltipEnabled=!0===e}(e,O)}))}function mK(t){return yd(this,void 0,void 0,(function*(){const{chart:e,axes:i,rotationChanged:n,axisLabelsBehaviorChanged:r,isRotated:s,timeIntervalInfo:a,guideTooltipFormatter:o,xAxisLabelFormatter:u,yAxisLabelFormatter:l,commonStrings:h}=t,c=HV(e.uid,"isNonAggregatedChart"),d=HV(e.uid,"config"),{horizontalAxisLabelsBehavior:f,verticalAxisLabelsBehavior:m}=d,v=iM(d.series),p=nM(d.series[0]);let b=s;!0===n&&(b=!0!==b);let g=0,y=1;(!0===n&&!0===s||!0!==n&&!0===b)&&(g=1,y=0);let w=e.xAxes.getIndex(0),S=e.yAxes.getIndex(0);const x=w.start,C=w.end,O=S.start,M=S.end;!0!==n&&!0!==aG(w,i[g].valueFormat)||uK({axes:e.xAxes,valueFormat:i[g].valueFormat,isNonAggregatedChart:c}),!0!==n&&!0!==aG(S,i[y].valueFormat)||uK({axes:e.yAxes,valueFormat:i[y].valueFormat,isNonAggregatedChart:c}),w=e.xAxes.getIndex(0),S=e.yAxes.getIndex(0),yield fK({axis:w,axisConfig:i[g],isNonAggregatedChart:c,timeIntervalInfo:a,seriesType:v,horizontalAxisLabelsBehavior:f,verticalAxisLabelsBehavior:m,axisLabelsBehaviorChanged:r,guideTooltipFormatter:o,stackedType:p,axisValueFormatter:0===g?u:l,commonStrings:h}),yield fK({axis:S,axisConfig:i[y],isNonAggregatedChart:c,timeIntervalInfo:a,seriesType:v,horizontalAxisLabelsBehavior:f,verticalAxisLabelsBehavior:m,axisLabelsBehaviorChanged:r,guideTooltipFormatter:o,stackedType:p,axisValueFormatter:1===y?l:u,commonStrings:h}),!0===n&&(w.events.once(wR,(()=>{tK({axis:w,start:O,end:M})})),S.events.once(wR,(()=>{tK({axis:S,start:x,end:C})}))),w.ghostLabel.setPropertyValue("disabled",!0),S.ghostLabel.setPropertyValue("disabled",!0)}))}function vK(t){var e,i;void 0!==t&&t.validateData();const n=null===(i=null===(e=null==t?void 0:t.series)||void 0===e?void 0:e.values)||void 0===i?void 0:i.find((t=>!0===KV(t.uid,"isOverlay")));void 0!==n&&n.validateData()}function pK(t,e){const{sizePolicy:i}=t,{chart:n}=e,r=e.heatRules.getIndex(0);if(void 0!==i){const{scaleType:s,field:a,minSize:o,maxSize:u}=i,l=JG(e);if(void 0!==l){let i=!1;const h={type:"sizeScale",field:"",scaleType:"linear",minSize:5,maxSize:30},c=null!=o?o:h.minSize,d=null!=u?u:h.maxSize;void 0!==r?!0===function(t){var e,i,n;const{series:r,seriesConfig:s,newMin:a,newMax:o}=t,u=r.heatRules.getIndex(0);let l=void 0===u&&void 0!==s.sizePolicy||void 0!==u&&void 0===s.sizePolicy;if(!1===l&&void 0!==u){const t=u.min===a&&u.max===o,h=r.dataFields.customValue===(null===(e=s.sizePolicy)||void 0===e?void 0:e.field),c=(null===(i=s.sizePolicy)||void 0===i?void 0:i.scaleType)===OP&&!0!==u.logarithmic||(null===(n=s.sizePolicy)||void 0===n?void 0:n.scaleType)===MP&&!0===u.logarithmic;l=!1===(t&&h&&c)}return l}({series:e,seriesConfig:t,newMin:c,newMax:d})&&(i=!0,r.min=c,r.max=d,r.logarithmic=s===MP):(i=!0,e.heatRules.push({target:l,property:"minWidth",min:c,max:d,dataField:"customValue",logarithmic:s===MP})),e.dataFields.customValue=a,!0===i&&vK(n)}}else void 0!==r&&(e.heatRules.pop(),e.dataFields.customValue=void 0,vK(n))}function bK(t){var e,i;const{trendLine:n,seriesConfig:r,valueFormat:s,chartData:a,defaultR2Value:o}=t,u=oR.scatterPlotSeries;if(void 0!==a){n.data=null!==(e=a.trendLinePoints)&&void 0!==e?e:u.trendLinePoints;const t=!0===Number.isFinite(a.r2)?`${GG(null!==(i=a.r2)&&void 0!==i?i:u.r2,s,n.chart.language.locale)}`:void 0;_q(n,void 0!==t?`R = ${t}`:o)}n.hiddenInLegend=!0!==r.overlays.trendLine.created;const l=!0===r.overlays.trendLine.created&&!1!==r.overlays.trendLine.visible,h=r.overlays.trendLine.symbol;void 0===h.color&&(h.color=TC({colorIndex:1})),yW({element:n,lineSymbol:r.overlays.trendLine.symbol,visible:l})}function gK(t){return yd(this,void 0,void 0,(function*(){const{chart:e,seriesConfig:i,axisPair:n,hideLoaderHandle:r,selectionTheme:s,ignoreSmoothRenderingLimit:a}=t;n[0]instanceof VA!=!1&&n[1]instanceof VA!=!1||(yield jV("invalidAxesForScatterPlot"));const o=oR.scatterPlotSeries,[u,l]=n,{x:h,y:c,overlays:d,name:f,id:m}=i,v=[],p=new rj;JV(p.uid,{type:ED}),p.id=m,q$(p,r),p.hiddenInLegend=!0,p.dataFields.valueX=h,p.dataFields.valueY=c,[p.xAxis]=n,void 0!==n[1]&&([,p.yAxis]=n);const b=Vq({chart:e,lineSeries:p});!function(t,e){t.tooltipHTML=oR.htmlEmptyContent,t.adapter.add("tooltipHTML",((t,i)=>{var n;let r=t;const{chart:s}=e;if(void 0!==s){const t=HV(s.uid,"config"),{dataTooltipVisible:a}=null!==(n=null==t?void 0:t.series[0])&&void 0!==n?n:{};if(!1===a)r="";else{const t=KV(e.uid,"scatterPlotTooltipFormatter");if(!1===i.isHidden&&void 0!==t){const{dataItem:e}=i;if(e instanceof nj){const{valueX:i,valueY:n,customValue:s}=e;r=t(i,n,s)}}}}return hM(r)}))}(b,p),uU(p),p.strokeOpacity=o.strokeOpacity,p.minDistance*=Math.ceil(p.data.length/1e4),p.hidden=!0,CW({element:b,customSelectionTheme:s}),dK(p),$q({chart:e,series:p,seriesType:ED,marker:b,ignoreSmoothRenderingLimit:a}),v.push(p);const g=d.trendLine,y=yield function(t){return yd(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,x:n,y:r,name:s,hideLoaderHandle:a}=t;0==(e instanceof VA&&i instanceof VA)&&(yield jV("invalidAxesForScatterPlot"));const o=new rj;return _q(o,s),q$(o,a),o.ignoreMinMax=!0,JV(o.uid,{isOverlay:!0,type:WH}),o.dataFields.valueX=n,o.dataFields.valueY=r,o.xAxis=e,o.yAxis=i,o.hidden=!0,o}))}({xAxis:u,yAxis:l,x:h,y:c,hideLoaderHandle:r,name:f,visible:g.visible});return CH(y),v.push(y),v}))}function yK(t){const{marker:e,seriesConfig:i,dataSource:n,currentSeries:r}=t;let s,a;if(e.clones.each(((t,e)=>{var r,o;let u;i.colorType===qD&&(u=null===(o=null===(r=t.dataItem)||void 0===r?void 0:r.dataContext)||void 0===o?void 0:o[Y$]);const l=SW({element:t,seriesSymbol:i.markerSymbol,dataIndex:e,seriesConfig:i,dataSource:n,rendererElementColor:u});s=l.symbolWithColorInfo,a=l.stylingInfo,oH(t,a)})),void 0!==s){const t=new Map;t.set(0,s),V$(t,r.chart.htmlContainer)}}function wK(t){return yd(this,void 0,void 0,(function*(){const{seriesConfig:e,dataSource:i,chartSeries:n,axes:r,chartData:s,options:a,queryObject:o,dataWasUpdated:u,commonStrings:l,tooltipFormatter:h,dataLabelFormatter:c}=t,d=void 0!==o?yield yM(o,null==a?void 0:a.usePopupTemplateFieldsInfo):[],f=l.notAvailable;for(let t=0;t<2;t+=1){const l=n[t];if(!0===KV(l.uid,"isOverlay")){let t=KV(l.uid,"updateStyleAndSelectionCallbackDisposer");void 0!==t&&t.dispose(),t=l.events.on(wR,(()=>{!0===l.chart.appeared&&l.chart.isReady()&&(bK({trendLine:l,seriesConfig:e,valueFormat:AC(),chartData:s,defaultR2Value:f}),void 0!==t&&t.dispose())})),l.validate(),JV(l.uid,{updateStyleAndSelectionCallbackDisposer:t})}else{qG(l,e.visible);const t=JG(l);if(void 0!==t){let n=KV(l.uid,"updateStyleAndSelectionCallbackDisposer");void 0!==n&&n.dispose(),n=l.events.on(wR,(()=>yd(this,void 0,void 0,(function*(){var r;!0===l.chart.appeared&&l.chart.isReady()&&t.clones.length>0&&(void 0!==n&&n.dispose(),qG(l,e.visible),yK({marker:t,seriesConfig:e,currentSeries:l,dataSource:i}),yield sH({series:l,queryObject:o,elementsToApplySelectionTo:t.clones.values,options:null!==(r=HV(l.chart.uid,"options"))&&void 0!==r?r:a,dataWasUpdated:u,xAxisField:e.x,yAxisField:e.y}))})))),l.validate(),JV(l.uid,{updateStyleAndSelectionCallbackDisposer:n}),zq({axes:r,currentSeries:l,tooltipValueFormat:e.dataTooltipValueFormat}),dU({axes:r,seriesConfig:e,series:l,fieldList:d,tooltipFormatter:h}),pK(e,l)}hU({series:l,seriesType:ED,dataLabelsConfig:e.dataLabels,yAxisValueFormat:r[1].valueFormat,customDataLabelFormatter:c})}}}))}function SK(t){let e="";for(let i=0;i<t.length;i+=1){e+=`<li>${t[i].message}</li>`}return`<ol>${e}</ol>`}function xK(t){void 0!==t.modal&&(t.modal.closable=!0,t.modal.content="",t.closeModal())}function CK(t){return yd(this,void 0,void 0,(function*(){const{chart:e,chartConfig:i,queryObject:n,createMessage:r}=t;let s;void 0!==(null==i?void 0:i.series)&&(s=iM(i.series,0));const a=yield QI({input:i,seriesType:s,queryObject:n}),o=yield AV(),{schemaErrors:u,customErrors:l,warnings:h}=a;if(void 0!==e.modal)if(e.modal.closable=!1,void 0===i){const t=void 0===r?o.modalHeaders.newChart:void 0,i=null!=r?r:o.errors.newChartRequest;e.modal.events.once("opened",(()=>{var t,i,n,s;if(void 0!==r){const r=null!==(s=null===(n=null===(i=null===(t=e.modal)||void 0===t?void 0:t.elements)||void 0===i?void 0:i.title)||void 0===n?void 0:n.parentElement)&&void 0!==s?s:null;null!==r&&(r.style.visibility="hidden")}})),e.openModal(i,t)}else if(u.length>0){const t=o.errors.simpleError;e.openModal(t,o.modalHeaders.error)}else if(l.length>0){const t=SK(l);e.openModal(t,o.modalHeaders.error)}else if(h.length>0){const t=SK(h),i=`<p>${o.errors.warningRequest}</p>${t}`;e.openModal(i,o.modalHeaders.warning)}return a}))}function OK(t){var e,i,n,r;return yd(this,void 0,void 0,(function*(){const{chart:s,options:a,invalidType:o,elementCount:u,seriesCount:l}=t;if(void 0!==s.modal&&XG(s)){s.modal.closable=!1;const t=yield tA({invalidType:o,elementCount:u,seriesCount:l,chartLimits:null==a?void 0:a.chartLimits}),d=yield AV();let f=d.modalHeaders.invalidChart;switch(t.keyword){case bT:case gT:case yT:case wT:f=d.modalHeaders.tooManyFeatures;break;case ST:f=d.modalHeaders.cannotCombineNegativeAndPositiveSlices;break;case xT:case CT:f=d.modalHeaders.invalidData;break;case vT:f=null!==(i=null===(e=null==a?void 0:a.noDataOptions)||void 0===e?void 0:e.noDataTitle)&&void 0!==i?i:f,t.message=null!==(r=null===(n=null==a?void 0:a.noDataOptions)||void 0===n?void 0:n.noDataTitle)&&void 0!==r?r:t.message}s.openModal(t.message,f),h=t,void 0!==(c=s.htmlContainer)&&c.dispatchEvent(new window.CustomEvent(E$.BadDataWarningRaise,N$(h)))}var h,c}))}function MK(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{chart:r,chartConfig:s,options:a}=t;!1===(null===(e=null==a?void 0:a.noDataOptions)||void 0===e?void 0:e.displayMessageWhenNoData)||void 0!==(null===(i=r.modal)||void 0===i?void 0:i.content)&&""!==(null===(n=r.modal)||void 0===n?void 0:n.content)||!0!==function(t,e){let i=!0;if(void 0!==t){const n=iM(t.series);i=void 0===e||0===e.length||!1===e.some((e=>{let i=!1;switch(n){case Iy:{const t=e;i=!0===Number.isFinite(t.minValue)&&!0===Number.isFinite(t.maxValue)}break;case Cy:{const n=e,{x:r,y:s}=t.series[0];i=!0===Number.isFinite(n[r])&&Number.isFinite(n[s])}break;case Ay:case Ty:case ky:{const n=e,{x:r}=t.series[0];i=BM(t.series).some((t=>void 0!==n[r]&&null!==n[r]&&("number"!=typeof n[r]||!0===Number.isFinite(n[r]))&&!0===Number.isFinite(n[t])));break}case Oy:{const n=e;let{x:r,y:s}=t.series[0];!0===LM(t.series)&&(r="arcgis_charts_pie_from_fields_name",s="arcgis_charts_pie_from_fields_value"),i=void 0!==n[r]&&null!==n[r]&&Number.isFinite(n[s])}break;case My:{const{x:n}=t.series[0],r=e;i=!0===Number.isFinite(r[n])}}return i}))}return i}(s,r.data)||(yield OK({chart:r,invalidType:vT,options:a}))}))}function TK(t){var e,i;const n=t.labels.template;n.maxWidth=null!==(e=oR.pieChart.dataLabels.maxWidth)&&void 0!==e?e:NaN,n.wrap=null===(i=oR.pieChart.dataLabels.wrap)||void 0===i||i,t.alignLabels=oR.pieChart.alignDataLabels,n.events.on(vR,(t=>{var e;const{dataItem:i}=null!==(e=t.target)&&void 0!==e?e:{};i instanceof Sj&&i.slice.showTooltip()})),n.events.on(cR,(t=>{var e;const{dataItem:i}=null!==(e=t.target)&&void 0!==e?e:{};i instanceof Sj&&(i.slice.isActive=!0!==i.slice.isActive)})),function(t){t.labels.template.adapter.add("html",((e,i)=>{var n,r,s,a;const o=KV(t.uid,"pieChartDataLabelFormatter");let u=e;const{dataItem:l}=i;if(l instanceof Sj){const{slice:t}=l;if(void 0!==t&&!1===QG(t))u="";else if(void 0!==o){const{value:t,percent:i}=null!==(r=null===(n=l.values)||void 0===n?void 0:n.value)&&void 0!==r?r:{};void 0!==t&&0!==t&&(u=o(`${null!==(a=null===(s=l.properties)||void 0===s?void 0:s.category)&&void 0!==a?a:e}`,t,i))}}return!0===oM(u)&&(u=oR.htmlEmptyContent),hM(u)}))}(t)}function kK(t,e){const{numericValueFormat:i,percentValueFormat:n,displayNumericValueOnDataLabel:r,displayPercentageOnDataLabel:s,valuePrefix:a,valueSuffix:o,percentagePrefix:u,percentageSuffix:l,dataLabelsCharacterLimit:h}=e,c=bH({locale:t.chart.language.locale,valueIntlOptions:null==i?void 0:i.intlOptions,percentageIntlOptions:null==n?void 0:n.intlOptions,displayNumericValue:null!=r?r:oR.pieChart.displayNumericValueOnDataLabel,displayPercentage:null!=s?s:oR.pieChart.displayPercentageOnDataLabel,valuePrefix:a,valueSuffix:o,percentagePrefix:u,percentageSuffix:l}),d=BV(h),f=RV(" ");return(t,i,n)=>{var r,s;const a=c(t,i,n),o=d(t);let u=!1===oM(o)?`${o}${f}`:"";return u=`${u}${a}`,void 0!==(null===(r=e.dataLabels)||void 0===r?void 0:r.content)&&(u=l$({textSymbol:Object.assign(Object.assign({},e.dataLabels.content),{text:u}),format:"html",defaults:Object.assign(Object.assign({},oR.pieChart.dataLabels),{wrap:null!==(s=e.optimizeDataLabelsOverlapping)&&void 0!==s?s:oR.pieChart.dataLabels.wrap})})),u}}function IK(t,e){let i=(t,e,i)=>oR.htmlEmptyContent;const{numericValueFormat:n,percentValueFormat:r,dataTooltipValueFormat:s,dataTooltipPercentFormat:a,displayNumericValueOnTooltip:o,displayPercentageOnTooltip:u,valuePrefix:l,valueSuffix:h,percentagePrefix:c,percentageSuffix:d}=e;return i=(e,i,f)=>{var m,v;let p=oR.htmlEmptyContent;const b=bH({locale:t.chart.language.locale,valueIntlOptions:null===(m=null!=s?s:n)||void 0===m?void 0:m.intlOptions,percentageIntlOptions:null===(v=null!=a?a:r)||void 0===v?void 0:v.intlOptions,displayNumericValue:null!=o?o:oR.pieChart.displayNumericValueOnTooltip,displayPercentage:null!=u?u:oR.pieChart.displayPercentageOnTooltip,valuePrefix:l,valueSuffix:h,percentagePrefix:c,percentageSuffix:d})("",i,f);if(!1===oM(e)&&(p=`<b>${e}</b>`),!1===oM(b)){const t=_V(b);p=!1===oM(e)?`${p}<br />${t}`:`${t}`}return p},i}function AK(t){const e=t.slices.template;e.tooltipHTML=oR.htmlEmptyContent,e.adapter.add("tooltipHTML",((e,i)=>{var n,r,s,a,o,u,l,h;let c=e;const{chart:d}=t;if(void 0!==d&&void 0!==i.tooltip){const e=HV(d.uid,"config"),{dataTooltipVisible:f}=null!==(n=null==e?void 0:e.series[0])&&void 0!==n?n:{};if(!1===f)i.tooltip.disabled=!0;else{const n=KV(t.uid,"pieChartTooltipFormatter");if(void 0!==n){const{dataItem:t}=i;if(t instanceof Sj){const d=null!==(r=t.properties.category)&&void 0!==r?r:"",f=null===(a=null===(s=t.values)||void 0===s?void 0:s.value)||void 0===a?void 0:a.value,m=null===(u=null===(o=t.values)||void 0===o?void 0:o.value)||void 0===u?void 0:u.percent;"number"==typeof f&&0!==f&&!1!==(null===(h=null===(l=null==e?void 0:e.series)||void 0===l?void 0:l[0])||void 0===h?void 0:h.dataTooltipVisible)?(i.tooltip.disabled=!1,function(t){if(void 0!==t.tooltip){let e=t.fill;e instanceof Qg?e=e.stroke:e instanceof ey&&(e=e.backgroundFill),t.tooltip.background.fill=e}}(i),c=n(`${d}`,f,m)):i.tooltip.disabled=!0}}}}return hM(c)}))}function jK(t){var e,i;const{dataContext:n,isNonAggregatedChart:r,x:s,dataIndex:a,objectIdField:o,isPieFromFields:u}=t;let l="";return!0===u?l=null!==(e=n[oR.originalCategoryValue])&&void 0!==e?e:n[kP]:!0===r?l=function(t){var e;const{dataContext:i,dataIndex:n,objectIdField:r}=t;return`${wC}-${null!==(e=i[null!=r?r:""])&&void 0!==e?e:n}`}({dataContext:n,dataIndex:a,objectIdField:o}):(l=null!==(i=n[oR.typeOrDomainIdValue])&&void 0!==i?i:n[oR.originalCategoryValue],""===l?l=CC:null===l&&(l=xC),l=null!=l?l:n[s]),void 0===l&&(l=SC),`${l}`}function FK(t){var e,i,n;const{seriesConfig:r,hideLoaderHandle:s,selectionTheme:a}=t,{x:o,y:u,id:l,visible:h}=r,c=new xj;c.id=l,q$(c,s),c.dataFields.value=u,c.dataFields.category=o;const d=oR.pieChart;c.startAngle=d.min,c.endAngle=360+c.startAngle,function(t){t.ticks.template.adapter.add("disabled",((t,e)=>{var i,n,r,s,a,o;return!0==(0===(null===(r=null===(n=null===(i=e.dataItem)||void 0===i?void 0:i.values)||void 0===n?void 0:n.value)||void 0===r?void 0:r.value)||!1===Number.isFinite(null===(o=null===(a=null===(s=e.dataItem)||void 0===s?void 0:s.values)||void 0===a?void 0:a.value)||void 0===o?void 0:o.value))||t}))}(c),AK(c),TK(c);const f=void 0!==a&&void 0===(null===(i=null===(e=a.selectedElementsTheme)||void 0===e?void 0:e.transformation)||void 0===i?void 0:i.opacity)?Object.assign(Object.assign({},a),{selectedElementsTheme:Object.assign(Object.assign({},null==a?void 0:a.selectedElementsTheme),{transformation:Object.assign(Object.assign({},null===(n=null==a?void 0:a.selectedElementsTheme)||void 0===n?void 0:n.transformation),{opacity:1})})}):a;return CW({element:c.slices.template,useNativeState:!0,customSelectionTheme:f}),c.slices.template.states.removeKey("hover"),c.hidden=!1===h,CH(c),c}function DK(t){const{chart:e,newChartConfig:i,pieSlicesSymbols:n}=t,r=i.series[0],s=!0===LM(i.series)?kP:r.x;e.data.forEach((t=>{var e,i;const a=tH(t),o=t[oR.pieChart.technicalFieldSliceId],u=!0===a?null===(e=r.sliceGrouping)||void 0===e?void 0:e.label:null===(i=Wq(null==n?void 0:n.slices,o))||void 0===i?void 0:i.label;!function(t){const{dataContext:e,newLabel:i,x:n}=t;void 0===i?void 0!==e[oR.originalCategoryValue]&&(e[n]=e[oR.originalCategoryValue]):e[n]!==i&&(void 0===e[oR.originalCategoryValue]&&(e[oR.originalCategoryValue]=e[n]),e[n]=i)}({dataContext:t,x:s,newLabel:u})})),function(t){var e;const{chart:i,chartConfig:n}=t;let r=null===(e=n.series[0].query)||void 0===e?void 0:e.orderByFields;if(void 0!==r){Fq({arrayToSort:i.data,orderByFieldsConfig:r,chartConfig:n});const{slices:t}=n.series[0];void 0!==t&&t.sort(((t,e)=>i.data.findIndex((e=>e[oR.pieChart.technicalFieldSliceId]===t.sliceId))-i.data.findIndex((t=>t[oR.pieChart.technicalFieldSliceId]===e.sliceId))))}i.invalidateData()}({chart:e,chartConfig:i})}function PK(t,e){const{x:i,isNonAggregatedChart:n,objectIdField:r,isPieFromFields:s,seriesConfig:a,dataSource:o,mapRendererColorToSeries:u,rendererInfo:l,fieldList:h,labelUpdateNeeded:c,queryType:d,commonStrings:f}=e,m=[];let v,p;return t.forEach(((t,e)=>{var b,g;const y=jK({dataContext:t,x:i,isNonAggregatedChart:n,dataIndex:e,objectIdField:r,isPieFromFields:s});t[oR.pieChart.technicalFieldSliceId]=y;const w=Wq(a.slices,y),S=tH(t),x=function(t){var e;const{dataContext:i,seriesConfig:n,isGroupOfSlices:r,sliceFromConfig:s,dataIndex:a,dataSource:o,mapRendererColorToSeries:u,rendererInfo:l,queryType:h}=t,{y:c}=n,d=new yg;d.dataItem={dataContext:i};const f=null==s?void 0:s.fillSymbol,m=!1===r?ON(null!=f?f:n.fillSymbol):Object.assign(Object.assign({},oR.pieChart.sliceGrouping.fillSymbol),null===(e=n.sliceGrouping)||void 0===e?void 0:e.fillSymbol),{symbolWithColorInfo:v}=SW({element:d,seriesConfig:n,y:c,seriesSymbol:m,dataIndex:a,seriesIndex:a,dataSource:o,mapRendererColorToSeries:u,rendererInfo:l,queryType:h,isChartFillSymbol:!0});return v}({dataContext:t,seriesConfig:a,isGroupOfSlices:S,sliceFromConfig:w,dataIndex:e,dataSource:o,mapRendererColorToSeries:u,rendererInfo:l,queryType:d}),C=function(t){var e,i,n,r,s;const{dataContext:a,sliceFromConfig:o,isGroupOfSlices:u,seriesConfig:l,fieldList:h,isPieFromFields:c,labelUpdateNeeded:d,commonStrings:f}=t,{sliceGrouping:m}=l;let{x:v}=l;!0===c&&(v=kP);const p=null!==(e=a[v])&&void 0!==e?e:a[oR.originalCategoryValue],b=null!==(i=a[oR.originalCategoryValue])&&void 0!==i?i:p;let g=p;if(!0===d)if(!0===u)g=null!==(r=null!==(n=null==m?void 0:m.label)&&void 0!==n?n:null==m?void 0:m.originalLabel)&&void 0!==r?r:null==f?void 0:f.pieChart.defaultSliceGroupingLabel;else if(void 0!==o||void 0!==h){g=null!==(s=null==o?void 0:o.label)&&void 0!==s?s:b;const t=a[oR.typeOrDomainIdValue];void 0!==t&&`${g}`==`${t}`?g=`${b}`:g===b&&(g=aM(h,`${b}`))}else void 0===o&&(g=b);return`${null!=g?g:""}`}({dataContext:t,sliceFromConfig:w,isGroupOfSlices:S,seriesConfig:a,fieldList:h,isPieFromFields:s,labelUpdateNeeded:c,commonStrings:f}),O={sliceId:y,label:C,fillSymbol:x};O.originalLabel=null!==(b=null==w?void 0:w.originalLabel)&&void 0!==b?b:void 0!==(null==t?void 0:t[oR.originalCategoryValue])?null==t?void 0:t[oR.originalCategoryValue]:O.label,!1===S?m.push(O):(p=t[oR.pieChart.technicalFieldGroupedSlices],void 0!==a.sliceGrouping&&(v={sliceId:a.sliceGrouping.sliceId,percentageThreshold:a.sliceGrouping.percentageThreshold,label:C,originalLabel:null!==(g=a.sliceGrouping.originalLabel)&&void 0!==g?g:C,fillSymbol:x}))})),{slices:m,groupOfSlicesSymbols:v,groupOfSlices:p}}function LK(t){return yd(this,void 0,void 0,(function*(){const{chart:e}=t,i=yield function(t){return yd(this,void 0,void 0,(function*(){const{chartConfig:e,queryObject:i,usePopupTemplateFieldsInfo:n,labelUpdateNeeded:r,commonStrings:s}=t,{series:a,dataSource:o}=e,u=a[0],{x:l}=u,h=!1===LG({chartConfig:e}),c=kM([u]),d=LM(a),f=new Map;let m,v,p={};if(o.type===eP){const t=gM(i);m=t.objectIdField,v=yield yM(i,n),u.colorType===qD&&!1===t.isTable&&(p=mM(t.renderer),hW({series:u,layer:t,queryType:c,mapRendererColorToSeries:f}))}return{x:l,isNonAggregatedChart:h,objectIdField:m,isPieFromFields:d,seriesConfig:u,dataSource:o,mapRendererColorToSeries:f,rendererInfo:p,fieldList:v,labelUpdateNeeded:r,queryType:c,commonStrings:s}}))}(t),{slices:n,groupOfSlicesSymbols:r,groupOfSlices:s}=PK(e.data,i),{slices:a}=PK(null!=s?s:[],i);return{slices:n,groupedSlices:a,groupOfSlices:r}}))}function EK(t){const{pieSeries:e,seriesConfig:i,pieSlicesSymbols:n,queryObject:r,dataWasUpdated:s,sortChanged:a,groupOfSlicesWasUpdated:o,options:u}=t,l=()=>yd(this,void 0,void 0,(function*(){var t;e.slices.length>0&&(qq(e.chart),function(t){const{pieSeries:e,pieSlicesSymbols:i,seriesConfig:n}=t;null==e||e.slices.each(((t,e)=>{var r,s,a,o,u;const l=(null===(r=t.dataItem)||void 0===r?void 0:r.dataContext)[oR.pieChart.technicalFieldSliceId],h=null===(s=null==i?void 0:i.slices)||void 0===s?void 0:s.find((t=>t.sliceId===l));wW({element:t,fillSymbol:!1===tH(null===(a=t.dataItem)||void 0===a?void 0:a.dataContext)?ON(null!==(o=null==h?void 0:h.fillSymbol)&&void 0!==o?o:n.fillSymbol):Object.assign(Object.assign({},oR.pieChart.sliceGrouping.fillSymbol),null===(u=null==i?void 0:i.groupOfSlices)||void 0===u?void 0:u.fillSymbol),defaultToColorFromRamp:!0,colorRampIndex:e,isChartFillSymbol:!0})}))}({pieSeries:e,seriesConfig:i,pieSlicesSymbols:n}),yield sH({series:e,queryObject:r,elementsToApplySelectionTo:e.slices.values,options:null!==(t=HV(e.chart.uid,"options"))&&void 0!==t?t:u,dataWasUpdated:s,sortChanged:a,groupOfSlicesWasUpdated:o,xAxisField:CG(e)}))}));l();const h=e.events.on(wR,l);JV(e.uid,{updateStyleAndSelectionCallbackDisposer:h})}function NK(t){const{chart:e,seriesConfig:i,pieSeries:n,tooltipFormatter:r,dataLabelFormatter:s}=t,{innerRadius:a,startAngle:o,endAngle:u}=i,l=kM([i]),{x:h,y:c}=i,d=oR.pieChart;n.dataFields.value=l!==HC?c:IP,n.dataFields.category=l!==HC?h:kP;const f=e.radius instanceof Id?e.radius.value:e.radius;e.innerRadius=Ad((null!=a?a:d.innerRadius)*f),n.startAngle=null!=o?o:d.min,n.endAngle=null!=u?u:360+n.startAngle,function(t){var e,i,n;const{pieSeries:r,seriesConfig:s,dataLabelFormatter:a}=t,{dataLabels:o}=s,u=null!==(e=s.dataLabelsOffset)&&void 0!==e?e:oR.pieChart.dataLabelsOffset;JV(r.uid,{pieChartDataLabelFormatter:null!=a?a:kK(r,s)}),S$(r.labels.template,o,Object.assign(Object.assign({},oR.pieChart.dataLabels),{wrap:null!==(i=s.optimizeDataLabelsOverlapping)&&void 0!==i?i:oR.pieChart.alignDataLabels})),r.alignLabels=null!==(n=s.alignDataLabels)&&void 0!==n?n:oR.pieChart.alignDataLabels;const l="number"==typeof r.labels.template.radius?r.labels.template.radius:r.labels.template.radius.percent;r.chart.invalidateData(),void 0!==u&&!0===Number.isFinite(u)&&l!==u&&(r.labels.template.radius=u,r.invalidate())}({pieSeries:n,seriesConfig:i,dataLabelFormatter:s}),EK(t),function(t,e){var i,n;const{ticks:r}=e,s=!1===(null==r?void 0:r.visible)||void 0===e.dataLabels||!1===(null===(i=e.dataLabels)||void 0===i?void 0:i.visible)||void 0!==e.dataLabelsOffset&&e.dataLabelsOffset<=0;t.ticks.template.disabled=s,t.ticks.template.strokeOpacity=oR.pieChart.ticksOpacity,yW({element:t.ticks.template,lineSymbol:null!==(n=null==r?void 0:r.lineSymbol)&&void 0!==n?n:IC({color:gC}),visible:!1===s})}(n,i),function(t){const{series:e,seriesConfig:i,tooltipFormatter:n}=t;JV(e.uid,{pieChartTooltipFormatter:null!=n?n:IK(e,i)})}({series:n,seriesConfig:i,tooltipFormatter:r})}function RK(t){var e;const{chart:i,seriesConfig:n,axisPair:r,hideLoaderHandle:s,selectionTheme:a,numberOfChartSeries:o,ignoreSmoothRenderingLimit:u}=t,{x:l,y:h,name:c,id:d}=n,f=new rj;f.id=d,q$(f,s),_q(f,c),[f.xAxis,f.yAxis]=r;const m=$G({chart:i});!0===m?f.dataFields.valueX=h:f.dataFields.valueY=h;const v=!0===m?r[1]:r[0];if(void 0!==v){const t=Bq(v,m);f.dataFields[t]=l,f.baseAxis=v}f.dataFields.customValue=null===(e=null==n?void 0:n.query)||void 0===e?void 0:e.where;const p=Vq({chart:i,lineSeries:f,applyPropertiesToClones:!1});return cH(p,f),function(t){const e=y$(oR.dataLabelInitialize);QV(e.uid,{isDataLabel:!0}),t.bullets.push(e),O$(BD,e),M$(BD,e),A$(e,t),e.html="{valueX}"}(f),CW({element:p,customSelectionTheme:a}),$q({chart:i,numberOfChartSeries:o,series:f,seriesType:BD,marker:p,ignoreSmoothRenderingLimit:u}),CH(f),f}function BK(t){const e=function(t){const{series:e,iSeries:i,symbolProps:n}=t,r=e,s=SW(Object.assign(Object.assign({},n),{element:r,dataIndex:0,seriesIndex:i}));return qG(r,n.seriesConfig.visible),s.symbolWithColorInfo}(t),{series:i,seriesSymbolMapForEvent:n,numberOfSeries:r,iSeries:s}=t,a=t.symbolProps.seriesConfig;let{markerSymbol:o}=a;void 0===(null==o?void 0:o.color)&&(void 0===o&&(o=jC()),o.color=e.color,t.symbolProps.seriesSymbol=o);const u=function(t){var e;const{series:i,symbolProps:n,iSeries:r}=t,{seriesConfig:s,dataSource:a}=n,o=JG(i);let u,l=!1;if(void 0!==o){!1!==s.markerVisible&&!1!==s.visible?i.bulletsContainer.show():i.bulletsContainer.hide();const t=null!==(e=s.markerSymbol)&&void 0!==e?e:jC(),h=new Set;let c;gW({element:o,markerSymbol:t}),o.clones.each(((e,i)=>{var o,l,d,f;if(e.dataItem instanceof yA==0){let d;s.colorType===qD&&(d=null===(l=null===(o=e.dataItem)||void 0===o?void 0:o.dataContext)||void 0===l?void 0:l[Y$]);const f=SW(Object.assign(Object.assign({},n),{dataSource:a,seriesConfig:s,seriesIndex:r,seriesSymbol:t,element:e,dataIndex:i,rendererElementColor:d}));u=f.symbolWithColorInfo,c=f.stylingInfo,oH(e,c),h.add(JSON.stringify(c))}else null===(d=e.states.getKey(H$))||void 0===d||d.reset(),null===(f=e.states.getKey(U$))||void 0===f||f.reset()})),l=h.size>1,!1===l&&oH(o,c)}return!1===l?u:void 0}(t);n.set(s,{lineSymbol:e,markerSymbol:u}),function(t,e){var i;!0===t.showArea?(e.fill=void 0!==t.areaColor?r$(t.areaColor):e.stroke,e.fillOpacity=void 0!==(null===(i=t.areaColor)||void 0===i?void 0:i[3])?t.areaColor[3]/255:oR.lineSeries.areaOpacity):e.fillOpacity=0}(a,i),n.size===r&&V$(n,i.chart.htmlContainer)}function _K(t,e){const{nullPolicy:i}=e;t.connect=i!==fP}function zK(t){var e,i;return yd(this,void 0,void 0,(function*(){const{seriesConfig:n,series:r,axes:s,rotationChanged:a,inlineDisplayLabelField:o,rendererInfo:u,mapRendererColorToSeries:l,seriesIndex:h,subtypeInfo:c,fieldList:d,options:f,commonStrings:m}=t,{visible:v,name:p,stackedType:b}=n,g=s[1].valueFormat,y=HV(r.chart.uid,"config"),w=$G({config:y}),S=kM(null==y?void 0:y.series);qG(r,v);let x=p;const C=null!==(i=null===(e=r.dataFields)||void 0===e?void 0:e.customValue)&&void 0!==i?i:"";S===WC&&(x=jM({subtypeInfo:c,fieldList:d,fieldName:CM(C),fieldValueToMatch:x})),_q(r,x),_K(r,n),Gq({series:r,seriesConfig:n,rotationChanged:a,isRotated:w}),_K(r,n);const O={updateLineSeriesProps:t,mapRendererColorToSeries:l,rendererInfo:u,queryType:S};r.events.once(wR,(()=>{!function(t){var e;yd(this,void 0,void 0,(function*(){const{updateLineSeriesProps:i,mapRendererColorToSeries:n,rendererInfo:r,queryType:s}=t,{seriesConfig:a,series:o,numberOfSeries:u,seriesIndex:l,dataSource:h,queryObject:c,rotationChanged:d,sortChanged:f,options:m,seriesSymbolMapForEvent:v,dataWasUpdated:p}=i;qG(o,a.visible);const b=JG(o);BK({series:o,iSeries:l,numberOfSeries:u,symbolProps:{seriesConfig:a,seriesSymbol:a.lineSymbol,y:a.y,dataSource:h,mapRendererColorToSeries:n,rendererInfo:r,queryType:s,seriesIndex:l},seriesSymbolMapForEvent:v}),void 0!==b&&(yield sH({series:o,seriesIndex:l,queryObject:c,elementsToApplySelectionTo:b.clones.values,options:null!==(e=HV(o.chart.uid,"options"))&&void 0!==e?e:m,dataWasUpdated:p,sortChanged:f,rotationChanged:d,xAxisField:CG(o),yAxisField:OG(o)}))}))}(O)})),function(t,e){!0===t.lineSmoothed?e.smoothing=!0===t.rotated?sP:rP:e.smoothing=oR.lineSeries.lineSmoothedKind}(n,r),pH({series:r,seriesConfig:n,fieldList:d,inlineDisplayLabelField:o,seriesIndex:h,setTimeBinningInfoWhenNotProvided:null==f?void 0:f.setTimeBinningInfoWhenNotProvided,commonStrings:m,tooltipFormatter:null==f?void 0:f.tooltipFormatter}),function(t){const{series:e}=t,i=I$(e,"bullets");F$(Object.assign(Object.assign({},t),{dataLabel:i,defaultDataLabelFormatter:j$,seriesType:BD}))}({series:r,seriesType:BD,stackedType:b,dataLabelsConfig:n.dataLabels,yAxisValueFormat:g,customDataLabelFormatter:null==f?void 0:f.dataLabelFormatter})}))}function VK(t){var e,i,n,r;let s=t.axisRanges.length-1;if(!0===t.isReady()){const a=FU(t,OU),o=null!==(i=null===(e=a[0])||void 0===e?void 0:e.point.x)&&void 0!==i?i:0,u=(null!==(r=null===(n=a[1])||void 0===n?void 0:n.point.x)&&void 0!==r?r:0)-o,l=function(t){let e=0;return t.forEach((t=>{const{label:i}=t;e=Math.max(e,null==i?void 0:i.bbox.width,i.measuredWidth)})),e}(a);if(0!==l){const t=oR.histogramAxisLabelPadding;for(let e=0;e<a.length;e+=1)if(e*u-l-t>0){s=e;break}}}return s}function GK(t){var e,i;const n=HV(t.chart.uid,"config"),{horizontalAxisLabelsBehavior:r,axes:s}=n,a=null==s?void 0:s[0];if(void 0!==a){const{visible:n,labels:s,guides:o}=a,{visible:u}=s;let l=VK(t);const h=FU(t,OU),c=function(t,e){let i=!1;if(e.length>0){const n=e[e.length-1].label,r=n.x,s=Math.max(1,n.measuredWidth)/2,a=t.chart.leftAxesContainer.measuredWidth;Number.isFinite(r)&&Number.isFinite(s)&&Number.isFinite(a)&&(i=r+s+a>t.chart.measuredWidth)}return i}(t,h),d=(h.length-1)%l==0&&!0===u,f=r!==bP&&!0===d&&!0===c,m=!0===f?oR.rotatedHistogramAxisLabel:oR.nonRotatedHistogramAxisLabel;!0===f&&1!==l&&(l=Math.ceil(l/2));for(let t=0;t<h.length;t+=1){const e=h[t],i=t%l==0&&!0===n,r=t%l==0&&!0===u,s=Object.assign({},a.labels);s.content.angle=void 0,s.content.yoffset=void 0,s.content.horizontalAlignment=void 0,s.content.verticalAlignment=void 0,S$(e.label,s,m),qG(e.tick,i),qG(e.label,r)}const v=FU(t,CU);for(let t=0;t<v.length;t+=1){const n=null===(i=null===(e=null==o?void 0:o[t])||void 0===e?void 0:e.visible)||void 0===i||i;qG(v[t].label,n),v[t].label.disabled=!0!==n}t.invalidateLabels()}}function $K(t,e){return yd(this,void 0,void 0,(function*(){switch(t){case BD:!1===function(t){return(rG(t[0])||iG(t[0])||sG(t[0]))&&iG(t[1])}(e)&&(yield jV("invalidAxesForLineChart"));break;case _D:!1===function(t){return(rG(t[0])||sG(t[0]))&&iG(t[1])}(e)&&(yield jV("invalidAxesForBarChart"));break;case VD:!1===function(t){return(rG(t[0])||sG(t[0]))&&iG(t[1])}(e)&&(yield jV("invalidAxesForComboBarLineChart"))}}))}const WK=0,qK=1,HK=2;function UK(t,e){let i;switch(e){case WK:i="gaugeAutoResizeInnerLabelDisposer";break;case qK:i="gaugeAutoResizeAxisLabelsDisposer";break;case HK:i="gaugeAutoResizeFirstAndLastLabelsDisposer"}if(void 0!==i){let e=HV(t.uid,i);void 0!==e&&(e.dispose(),e=void 0,UV(t.uid,{[i]:void 0}))}}function KK(t){var e,i,n,r,s,a,o,u;const{chart:l,type:h,labelList:c,currentScale:d,currentFontSize:f}=t;let m=NaN,v=NaN;if(h===WK){const t="number"==typeof l.innerRadius?l.innerRadius:l.innerRadius.value;v=(null!==(i=null===(e=l.xAxes.getIndex(0))||void 0===e?void 0:e.measuredWidth)&&void 0!==i?i:0)*t}else v=null!==(r=null===(n=l.xAxes.getIndex(0))||void 0===n?void 0:n.measuredHeight)&&void 0!==r?r:0;if(v>1){const t=h===WK?null!==(a=null===(s=c[0])||void 0===s?void 0:s.measuredWidth)&&void 0!==a?a:0:null!==(u=null===(o=c.find((t=>t.measuredWidth>0&&t.measuredHeight>0)))||void 0===o?void 0:o.measuredHeight)&&void 0!==u?u:0;if(t>0){const e=t/v;if(e>0){const{axisLabelToInnerChartRatio:t,innerLabelToInnerChartRatio:i}=oR.gauge;m=d*((h===WK?i:t)/e),m=function(t){const{scaleToAdjust:e,fontSize:i,type:n}=t;let r=NaN,s=NaN;n===WK?(r=oR.gauge.innerLabelAutoMinFontSize,s=oR.gauge.innerLabelAutoMaxFontSize):(r=oR.gauge.axisLabelAutoMinFontSize,s=oR.gauge.axisLabelAutoMaxFontSize);let a=e;const o=i*a;return o<r?a*=r/o:o>s&&(a*=s/o),a}({scaleToAdjust:m,fontSize:f,type:h}),m=Number(m.toFixed(2))}}}return!1===Number.isFinite(m)&&(m=d),m}function JK(t){return t.some((t=>void 0!==t.value))}function YK(t){const{value:e,axisMin:i,axisMax:n}=t;let r=NaN;const s=n-i;return 0!==s&&(r=(e-i)/s),r}function ZK(t,e){var i,n,r,s,a;const o=t.xAxes.getIndex(0);if(void 0!==o){const u=null!=e?e:HV(t.uid,"config"),{onlyShowFirstAndLastLabels:l}=null!==(n=null===(i=null==u?void 0:u.axes)||void 0===i?void 0:i[0])&&void 0!==n?n:{};if(!1===o.renderer.labels.template.visible||!0===l)t.radius=new Id(oR.gauge.radius);else{const e=null===(r=FU(o,TU).reverse().find((t=>{var e;return!0===t.label.visible&&(null===(e=t.label)||void 0===e?void 0:e.measuredWidth)>0})))||void 0===r?void 0:r.label;if(void 0!==e){const i=null!==(s=e.measuredWidth)&&void 0!==s?s:1,n=null!==(a=e.measuredHeight)&&void 0!==a?a:1,r=2*i+t.radarContainer.measuredWidth,o=t.plotContainer.measuredWidth,u=t.radarContainer.measuredHeight+2*n,l=o/r,h=(t.plotContainer.measuredHeight+WG(t.paddingTop)+WG(t.paddingBottom))/u,c=100*("number"==typeof t.radius?t.radius:t.radius.value),d=Number((c*l).toFixed(2)),f=Number((c*h).toFixed(2)),m=d/c,v=f/c,p=t.radarContainer.measuredWidth*m,b=t.radarContainer.measuredWidth*v,[g,y]=p<b?[d,m]:[f,v];!0===Number.isFinite(g)&&g>=10&&(y<.98||y>1.02)&&(t.radius=new Id(g))}}}}function XK(t){const e=t.hands.push(new mj),i=oR.gaugeNeedle,{startWidth:n,endWidth:r,innerRadius:s}=i;e.pin.disabled=!0,e.startWidth=null!=n?n:NaN,e.endWidth=null!=r?r:NaN,e.innerRadius=Ad(null!=s?s:NaN);const a=t.xAxes.getIndex(0);return void 0!==a&&(e.axis=a),e}function QK(t){var e,i,n,r;const{chart:s,needle:a,gaugeValue:o}=t,u=null!==(e=s.hands.getIndex(0))&&void 0!==e?e:XK(s);if(void 0!==u){wW({element:u,fillSymbol:null==a?void 0:a.symbol});const{startWidth:t,endWidth:e,innerRadius:l}=oR.gaugeNeedle;u.value=function(t,e){var i,n,r,s,a,o;let u=null!=e?e:null;if(null!=e){const l=t.xAxes.getIndex(0),h=HV(t.uid,"config"),c=null!==(r=null!==(i=l.min)&&void 0!==i?i:null===(n=null==h?void 0:h.axes)||void 0===n?void 0:n[0].minimum)&&void 0!==r?r:oR.gauge.axisMinimum,d=null!==(o=null!==(s=l.max)&&void 0!==s?s:null===(a=null==h?void 0:h.axes)||void 0===a?void 0:a[0].maximum)&&void 0!==o?o:oR.gauge.axisMaximum;e<c?u=c:e>d&&(u=d)}return u}(s,o),u.pin.disabled=!0!==(null==a?void 0:a.displayPin),u.visible=!0===(null==a?void 0:a.visible),u.startWidth=null!==(i=null==a?void 0:a.startWidth)&&void 0!==i?i:t,u.endWidth=null!==(n=null==a?void 0:a.endWidth)&&void 0!==n?n:e,u.innerRadius=Ad(null!==(r=null==a?void 0:a.innerRadius)&&void 0!==r?r:l)}}function tJ(t,e){var i,n,r,s,a,o,u;const l=HV(t.uid,"config"),h=null==l?void 0:l.axes[0],c=null!==(r=null===(n=null===(i=null==h?void 0:h.innerLabel)||void 0===i?void 0:i.content)||void 0===n?void 0:n.verticalAlignment)&&void 0!==r?r:wD,{paddingBottom:d}=oR.gauge;let f=d,m=d;if(!1!==(null===(s=null==h?void 0:h.innerLabel)||void 0===s?void 0:s.visible)&&c===SD){const i=t.radarContainer.measuredWidth/2+e.measuredHeight,n=t.radarContainer.measuredHeight;f=Math.round(i-n-d)}if(!0===(null==h?void 0:h.onlyShowFirstAndLastLabels)&&!1!==(null==h?void 0:h.labels.visible)){const e=FU(t.xAxes.getIndex(0),MU);m=null!==(u=null===(o=null===(a=e[e.length-1])||void 0===a?void 0:a.label)||void 0===o?void 0:o.measuredHeight)&&void 0!==u?u:0}const v=Math.max(f,m)+d,p=WG(t.paddingBottom);Math.round(p)!==v&&(t.paddingBottom=v)}function eJ(t){const e=y$(void 0,t.radarContainer);e.isMeasured=!1,function(t,e){const i=t.xAxes.getIndex(0);void 0!==i&&(i.events.on(bR,(()=>{tJ(t,e)})),i.events.on(wR,QN((()=>{tJ(t,e)}),oR.debounceTime)))}(t,e),QV(e.uid,{isGaugeAxisInnerLabel:!0})}function iJ(t){const{chart:e,innerLabelConfig:i,valueFormat:n,gaugeValue:r,gaugeInnerLabelFormatter:s}=t,a=e.radarContainer.children.values.find((t=>!0===XV(t.uid,"isGaugeAxisInnerLabel")));void 0!==a&&(S$(a,i,oR.gaugeInnerLabel),a.html=function(t){const{valueFormat:e,locale:i,innerLabelConfigContent:n,gaugeValue:r,gaugeInnerLabelFormatter:s}=t;let a="";if(!0===Number.isFinite(r))if(void 0!==s)a=s(r);else{const t=eG(e),s=IV(DD,i);s.numberFormat=t,a=s.format(`${r}`),a=l$({textSymbol:Object.assign(Object.assign({type:MD},n),{text:a}),format:"html"}),a=hM(a)}return a}({valueFormat:n,locale:e.language.locale,gaugeValue:r,innerLabelConfigContent:null==i?void 0:i.content,gaugeInnerLabelFormatter:s}),function(t){var e;const{chart:i,innerLabel:n,innerLabelConfig:r}=t;if(UK(i,WK),void 0===(null===(e=null==r?void 0:r.content.font)||void 0===e?void 0:e.size)){const t=()=>{const t=KK({chart:i,type:WK,labelList:[n],currentScale:n.scale,currentFontSize:n.fontSize});!0===Number.isFinite(t)&&n.scale!==t&&(n.scale=t,n.validate())};i.events.once(wR,t);const e=i.events.on(bR,t);UV(i.uid,{gaugeAutoResizeInnerLabelDisposer:e}),t()}else n.scale=1}({chart:e,innerLabel:a,innerLabelConfig:i}),e.radarContainer.invalidateLabels())}function nJ(t){return null!=t&&0!==t}function rJ(t){const e=t.axisRanges.create();return e.axisFill.fillOpacity=1,e.axisFill.disabled=!0,e.grid.strokeOpacity=1,e.grid.disabled=!1,e.tick.length=oR.gaugeTicksLength,e}function sJ(t){const e=new lj;return e.disabled=!0,e.axis=t,g$(e),e.padding(10,10,10,10),QV(e.uid,{isGaugeAxisLabel:!0}),e}function aJ(t){const{valueFormat:e,locale:i,gaugeLabelConfigContent:n,itemLabelValue:r,axisValueFormatter:s}=t;let a="";if(!0===Number.isFinite(r))if(void 0!==s)a=s(r);else{const t=eG(e),s=IV(DD,i);s.numberFormat=t,a=s.format(`${r}`),a=l$({textSymbol:Object.assign(Object.assign({type:MD},n),{text:a}),format:"html"}),a=hM(a)}return a}function oJ(t){const{chart:e,axis:i,onlyShowFirstAndLastLabels:n,valueFormat:r,gaugeLabelConfigContent:s,axisValueFormatter:a}=t;if(!0===n){FU(i,MU).forEach((t=>{void 0!==t&&void 0!==t.label&&(t.label.html=aJ({valueFormat:r,locale:e.language.locale,gaugeLabelConfigContent:null==s?void 0:s.content,itemLabelValue:t.value,axisValueFormatter:a}))})),function(t){FU(t,MU).forEach((t=>{!1===t.label.adapter.keys().includes("dx")&&t.label.adapter.add("dx",(e=>{let i=e;return i=t.label.measuredWidth/2,t.id===oR.gaugeLastLabelId&&(i*=-1),i})),!1===t.label.adapter.keys().includes("dy")&&t.label.adapter.add("dy",(e=>{let i=e;return 0!==t.label.measuredHeight&&(i=t.label.measuredHeight/2),i}))}))}(i)}}function uJ(t,e){return yd(this,void 0,void 0,(function*(){e.type!==DD&&(yield jV("invalidValueFormatForGauge")),uK({axes:t.xAxes,valueFormat:e});const i=t.xAxes.getIndex(0);i instanceof VA&&(i.renderer.labels.template.disabled=!0,i.renderer.ticks.template.disabled=!0,XK(t),eJ(t),function(t){const e=t.xAxes.getIndex(0);void 0!==e&&(e.events.on(bR,(()=>ZK(t))),e.events.on(wR,QN((()=>ZK(t)),oR.debounceTime)))}(t),i.maxZoomFactor=1)}))}function lJ(t){var e;return yd(this,void 0,void 0,(function*(){const{chart:i,chartConfig:n,data:r,axisValueFormatter:s,gaugeInnerLabelFormatter:a}=t,{axes:o,series:u}=n,{featureIndex:l,x:h}=u[0],c=null==o?void 0:o[0],d=i.xAxes.getIndex(0),f=EM(n),m=Object.assign({},c);if(void 0!==d&&void 0!==m){const{valueFormat:t,needle:o,innerLabel:u,onlyShowFirstAndLastLabels:c}=m;let v;!0===aG(d,t)&&uK({axes:i.xAxes,valueFormat:t}),!0===f&&(v=function(t){var e,i,n,r;const s=oR.gauge,{featureIndex:a,chart:o,config:u}=t,{minimum:l,minimumFromField:h,maximum:c,maximumFromField:d}=null!==(i=null===(e=null==u?void 0:u.axes)||void 0===e?void 0:e[0])&&void 0!==i?i:{},{x:f}=null!==(r=null===(n=null==u?void 0:u.series)||void 0===n?void 0:n[0])&&void 0!==r?r:{};let m=-1,v=null!=l?l:s.axisMinimum,p=null!=c?c:s.axisMaximum;if(a>=0&&a<o.data.length){const t=o.data[a];void 0!==h&&!1===oM(h)&&!0===Number.isFinite(t[h])&&(v=t[h]),void 0!==d&&!1===oM(d)&&!0===Number.isFinite(t[d])&&(p=t[d]),void 0!==f&&!1===oM(f)&&!0===Number.isFinite(t[f])&&(m=t[f])}return{minimum:v,maximum:p,dataValue:m}}({featureIndex:null!==(e=l)&&void 0!==e?e:0,chart:i,config:n}),m.minimum=v.minimum,m.maximum=v.maximum);const{min:p,max:b,labelsIncrement:g,numberOfIntervals:y}=function(t){const{minimum:e,maximum:i,labelsIncrement:n,minimumValueConversion:r,maximumValueConversion:s}=t;let a=null!=e?e:oR.gauge.axisMinimum,o=null!=i?i:oR.gauge.axisMaximum;a=e$(a,r),o=e$(o,s);const u=nJ(n);let l=nJ(n)?n:Math.abs(o-a)/oR.gauge.numberOfLabelIntervals,h=!0===u?Math.round(Math.abs(o-a)/l):oR.gauge.numberOfLabelIntervals;if(!0===u)if(h>oR.gauge.maximumNumberOfLabelIntervals)l=Math.abs(o-a),h=1;else{const t=a+h*l;t<o?(h+=1,o=a+h*l):t>o&&(o=t)}return{min:a,max:o,labelsIncrement:l,numberOfIntervals:h}}(m),w=function(t){var e,i,n;const{axis:r,min:s,max:a,labelsIncrement:o,numberOfIntervals:u,valueFormat:l,minimumFromField:h}=t,c=!0===nG(l);let d=!0;const f=HV(r.chart.uid,"config");if(void 0!==f){const{minimum:t,minimumFromField:m,labelsIncrement:v,valueFormat:p}=null===(e=f.axes)||void 0===e?void 0:e[0],b=(null===(i=null==p?void 0:p.intlOptions)||void 0===i?void 0:i.style)!==(null===(n=null==l?void 0:l.intlOptions)||void 0===n?void 0:n.style),g=!0===nJ(v)?v!==o:u!==oR.gauge.numberOfLabelIntervals;d=!0===b||s!==t||h!==m||!1===c&&a!==r.max||!0===g}return d}({axis:d,min:p,max:b,labelsIncrement:g,numberOfIntervals:y,valueFormat:t});!0===w&&function(t){var e;const{axis:i,min:n,max:r,labelsIncrement:s,numberOfIntervals:a,valueFormat:o}=t,u=!0===nG(o);let l=1;const h=FU(i,OU);h.length>0&&(l=null===(e=h[0].label)||void 0===e?void 0:e.scale,h.forEach((t=>{const e=i.axisRanges.values.indexOf(t);e>=0&&i.axisRanges.removeIndex(e)})));const c=oR.gauge.numberOfTicksBetweenTwoLabels+1,d=a*c+1;for(let t=0;t<d;t+=1){const e=t===d-1,a=rJ(i),o=!0===e?r:n+t/c*s;a.value=!0===u?YK({value:o,axisMin:n,axisMax:r}):o,t%c==0&&(a.label=sJ(i),a.label.text=String(o),a.grid.disabled=!0,!0===Number.isFinite(l)&&(a.label.scale=l))}}({axis:d,min:p,max:b,labelsIncrement:g,numberOfIntervals:y,valueFormat:t});const S=Object.assign({},m);!0===nG(t)?(S.minimum=0,S.maximum=1,function(t){var e;const{axisConfig:i,axisMin:n,axisMax:r}=t;null!=n&&null!=r&&0!=r-n&&(null===(e=i.guides)||void 0===e||e.forEach((t=>{const{start:e,end:i}=t;"number"==typeof e&&(t.start=YK({value:e,axisMin:n,axisMax:r})),"number"==typeof i&&(t.end=YK({value:i,axisMin:n,axisMax:r}))})))}({axisConfig:S,axisMin:m.minimum,axisMax:m.maximum})):(S.minimum=p,S.maximum=b),function(t){var e,i;const{labels:n,guides:r,onlyShowFirstAndLastLabels:s}=t,a=null!=r?r:[];if(!0===s){const r={type:LD,start:NaN,style:{type:"esriSLS"},name:""};a.push(Object.assign(Object.assign({},r),{start:null!==(e=t.minimum)&&void 0!==e?e:NaN,name:oR.gaugeFirstLabelId,label:Object.assign(Object.assign({},n.content),{text:`${t.minimum}`})}),Object.assign(Object.assign({},r),{start:null!==(i=t.maximum)&&void 0!==i?i:NaN,name:oR.gaugeLastLabelId,label:Object.assign(Object.assign({},n.content),{text:`${t.maximum}`})}))}t.guides=a}(S),yield fK({axis:d,axisConfig:S,seriesType:RD,axisValueFormatter:s}),!0!==d.renderer.labels.template.disabled&&(d.renderer.labels.template.disabled=!0),!0!==d.renderer.ticks.template.disabled&&(d.renderer.ticks.template.disabled=!0),function(t){var e;const{chart:i,axisConfig:n,axis:r}=t;if(void 0===(null===(e=n.labels.content.font)||void 0===e?void 0:e.size)&&!0!==n.onlyShowFirstAndLastLabels){UK(i,qK),UK(i,HK);const t=()=>{r.events.once(wR,(()=>{const t=FU(r,TU);if(!0===JK(t)){const e=t.map((t=>t.label)),n=e[0].scale,r=e[0].fontSize,s=KK({chart:i,type:qK,labelList:e,currentScale:n,currentFontSize:r}),a=s/n;!0===Number.isFinite(s)&&s>0&&(a<=.98||a>1.02)&&e.forEach((t=>{t.scale=s}))}})),r.validate()};i.events.once(wR,t);const e=i.events.on(bR,t);UV(i.uid,{gaugeAutoResizeAxisLabelsDisposer:e}),t()}else{UK(i,qK);const t=FU(r,TU);t.length>0&&t.map((t=>t.label)).forEach((t=>{t.scale=1}))}}({chart:d.chart,axis:d,axisConfig:m}),function(t){var e;const{chart:i,axisConfig:n,axis:r}=t;if(void 0===(null===(e=n.labels.content.font)||void 0===e?void 0:e.size)&&!0===n.onlyShowFirstAndLastLabels){UK(i,qK),UK(i,HK);const t=()=>{const t=FU(r,MU);if(!0===JK(t)){const e=t.map((t=>t.label)),n=e[0].scale,r=e[0].fontSize,s=KK({chart:i,type:HK,labelList:e,currentScale:n,currentFontSize:r}),a=s/n;!0===Number.isFinite(s)&&s>0&&(a<=.98||a>1.02)&&e.forEach((t=>{t.scale=s}))}};i.events.once(wR,t);const e=i.events.on(bR,t);UV(i.uid,{gaugeAutoResizeFirstAndLastLabelsDisposer:e}),t()}else UK(i,HK),FU(r,MU).map((t=>t.label)).forEach((t=>{t.scale=1}))}({chart:i,axis:d,axisConfig:m}),function(t,e){var i,n;const r=null===(n=null===(i=null==e?void 0:e.ticks)||void 0===i?void 0:i.visible)||void 0===n||n,s=FU(t,OU);for(let t=0;t<s.length;t+=1)qG(s[t].tick,r)}(d,m),function(t){const{chart:e,axis:i,onlyShowFirstAndLastLabels:n,valueFormat:r,axisLabelConfigContent:s,axisValueFormatter:a}=t;if(!0!==n){const t=FU(i,TU);!0===JK(t)&&t.forEach((t=>{S$(t.label,s),t.label.html=aJ({valueFormat:r,locale:e.language.locale,gaugeLabelConfigContent:null==s?void 0:s.content,itemLabelValue:t.value,axisValueFormatter:a})}))}}({chart:i,axis:d,onlyShowFirstAndLastLabels:null!=c&&c,valueFormat:t,axisLabelConfigContent:m.labels,axisValueFormatter:s}),oJ({chart:i,axis:d,onlyShowFirstAndLastLabels:null!=c&&c,valueFormat:t,gaugeLabelConfigContent:m.labels,axisValueFormatter:s});const x=!0===f?null==v?void 0:v.dataValue:function(t){const{x:e,data:i,chart:n,valueFormat:r,minimum:s,maximum:a}=t;let o=NaN;if(void 0!==i&&void 0!==e){const t=i.find((t=>e in t)),r=Number.parseFloat(t[e]);!0===Number.isFinite(r)&&(o=r,UV(n.uid,{gaugeData:o}))}else{const t=HV(n.uid,"gaugeData");!0===Number.isFinite(t)&&(o=t)}!0===nG(r)&&void 0!==s&&void 0!==a&&null!==s&&null!==a&&null!==o&&0!=a-s&&(o=YK({value:o,axisMin:s,axisMax:a}));return o}({x:h,data:r,chart:i,minimum:m.minimum,maximum:m.maximum,valueFormat:t});QK({chart:i,needle:o,gaugeValue:x}),iJ({chart:i,innerLabelConfig:u,valueFormat:t,gaugeValue:x,gaugeInnerLabelFormatter:a}),function(t,e){var i;if(t instanceof VA&&t.chart instanceof vj){const n=FU(t,TU);if(!0===JK(n)){const{onlyShowFirstAndLastLabels:t,labels:r}=e,s=(null===(i=null==r?void 0:r.visible)||void 0===i||i)&&!0!==t;n.forEach((t=>{qG(t.label,s)}))}}}(d,m),ZK(i,n),i.validateData()}}))}function hJ(t,e){t.background.fill=r$(null!=e?e:oR.backgroundColor)}function cJ(t){t instanceof QA&&(t.scrollbarX=new Og,t.scrollbarY=new Og,t.scrollbarX.disabled=!0,t.scrollbarY.disabled=!0)}function dJ(t){const{chart:e,scrollbarXVisible:i,scrollbarYVisible:n}=t;if(e instanceof QA){const t=HV(e.uid,"isRotated");void 0!==e.scrollbarX&&void 0!==e.scrollbarY||cJ(e),e.scrollbarX.disabled=!0!==t?!0!==i:!0!==n,e.scrollbarY.disabled=!0!==t?!0!==n:!0!==i}}function fJ(t,e){return t.values.filter((t=>{let i=!1;const n=!1===t.isActive;if(t.dataItem instanceof yA==!1){t.isActive=!0!==t.isActive;OW({element:t,selected:!0!==HV(e.uid,"filterBySelection")&&!0===n}),i=n}return i}))}function mJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,cursorSelectionRectangle:i,multiSelect:n,mode:r}=t,s=HV(e.uid,"config"),a=HV(e.uid,"queryObject");let o=[];UV(e.uid,{pendingSelectionQueries:!0});let u=[],l=!0;e.series.each(((t,e)=>{var h,c,d,f,m;if(!0===t.visible&&!0!==KV(t.uid,"isOverlay")){const v=CG(t),p=OG(t),b=null!==(c=null===(h=t.dataFields)||void 0===h?void 0:h.customValue)&&void 0!==c?c:"",g=MG(t,e),y={queryObject:a,element:{},yAxisField:p,xAxisField:v,splitBy:b,chartType:g,seriesIndex:e};let w;t instanceof Hj?(w=null===(d=t.columns)||void 0===d?void 0:d.values,g===zD&&(y.xAxisField=b,y.dataTransformationType=(null==s?void 0:s.series[0]).dataTransformationType)):t instanceof rj&&(w=null===(m=null===(f=JG(t))||void 0===f?void 0:f.clones)||void 0===m?void 0:m.values,y.uniqueFeature=!0),void 0!==w&&(u=[...u,...w],w.forEach(((t,e)=>{if(t.dataItem instanceof yA==!1){const s=!0===t.isActive,a=function(t,e){let i=!1;if(void 0!==e&&!0===QG(t)){const n=jv(t.bbox,t),r=e.x,s=e.y,a=e.x+e.width,o=e.y+e.height,u=n.x,l=n.y,h=n.x+n.width,c=n.y+n.height;i=0==(u>a||h<r||l>o||c<s)}return i}(t,i);!0===a&&(l=!1);let u=!1;u=!1===s?a:!0===a?"hit"!==r:!0===n,!0===u&&o.push(Object.assign(Object.assign({},y),{element:t,elementIndex:e})),OW({element:t,selected:u})}})))}})),!0!==l&&0!==o.length||(u.forEach((t=>{OW({element:t,selected:!1,backToDefaultState:!0})})),o=[]),yield aH({chart:e,listSelectedElements:o,selectionSource:oA})}))}function vJ(t){XG(t)&&t.events.on(fR,(e=>{const i=e.target.cursor,n=qV(t.uid,"selectEndedCallbackDisposer");void 0!==n&&n.dispose();const r=i.events.once(mR,(()=>yd(this,void 0,void 0,(function*(){if(void 0!==i.xRange){i.selection.isMeasured=!0,i.validate(),i.selection.validate();const n=jv(i.selection.bbox,i.selection);if(i.selection.hide(),n.width>0||n.height>0){const i=MW(e);yield mJ({chart:t,cursorSelectionRectangle:n,multiSelect:i,mode:"range"})}}i.selection.hide()}))));!function(t,e){WV(t,e)}(t.uid,{selectEndedCallbackDisposer:r})}))}function pJ(t){return yd(this,void 0,void 0,(function*(){const{series:e}=t;if(e.length>0){UV(t.uid,{pendingSelectionQueries:!0});const i=HV(t.uid,"config"),n=e.values.map(((t,e)=>{let n=[];if(!0===t.visible&&!0!==KV(t.uid,"isOverlay")){const r=iM(null==i?void 0:i.series,e);r===_D||r===zD?n=function(t,e){var i,n;let r=[];const{columns:s}=t;if(void 0!==s&&!0===t.visible){const{chart:a}=t,o=HV(a.uid,"config"),u=CG(t),l=OG(t),h=HV(a.uid,"queryObject"),c=null!==(n=null===(i=null==t?void 0:t.dataFields)||void 0===i?void 0:i.customValue)&&void 0!==n?n:"",d=MG(t,e),f={queryObject:h,element:{},yAxisField:l,xAxisField:u,splitBy:c,chartType:d,seriesIndex:e};d===zD&&0===e&&(f.xAxisField=c,f.dataTransformationType=(null==o?void 0:o.series[0]).dataTransformationType),r=fJ(s,a).map((t=>{var e;return Object.assign(Object.assign({},f),{element:t,elementIndex:null===(e=t.dataItem)||void 0===e?void 0:e.index})}))}return r}(t,e):r===BD||r===ED&&!0!==KV(t.uid,"isOverlay")?n=function(t,e){var i,n,r;let s=[];if(!0===t.visible){const a=null===(i=JG(t))||void 0===i?void 0:i.clones;if(void 0!==a){const{chart:i}=t,o=HV(i.uid,"config"),u=iM(null==o?void 0:o.series,e),l={queryObject:HV(i.uid,"queryObject"),element:{},xAxisField:CG(t),yAxisField:OG(t),splitBy:u===BD&&null!==(r=null===(n=null==t?void 0:t.dataFields)||void 0===n?void 0:n.customValue)&&void 0!==r?r:"",chartType:u,uniqueFeature:u===ED,seriesIndex:e};s=fJ(a,i).map((t=>{var e;return Object.assign(Object.assign({},l),{element:t,elementIndex:null===(e=t.dataItem)||void 0===e?void 0:e.index})}))}}return s}(t,e):r===ND&&(n=function(t){let e=[];if(!0===t.visible){const{chart:i}=t,n={queryObject:HV(i.uid,"queryObject"),element:{},xAxisField:CG(t),yAxisField:OG(t),chartType:ND,seriesIndex:0};let r;e=fJ(t.slices,i).map((t=>{var e,i,s,a;const o=null!==(i=null===(e=t.dataItem)||void 0===e?void 0:e.dataContext)&&void 0!==i?i:{};return!0===tH(o)&&(r=Qq({groupOfSlicesDataContext:o})),Object.assign(Object.assign({},n),{element:t,elementIndex:null===(s=t.dataItem)||void 0===s?void 0:s.index,elementDataContext:null===(a=t.dataItem)||void 0===a?void 0:a.dataContext})})),void 0!==r&&r.forEach(((t,i)=>{e.push(Object.assign(Object.assign({},n),{elementIndex:i,elementDataContext:t}))}))}return e}(t))}return n})),r=n.flat();yield aH({chart:t,listSelectedElements:r,selectionSource:uA}),t instanceof Oj&&t.feedLegend()}}))}function bJ(t){if(XG(t))if(t.events.disableType(cR),t.events.disableType(dR),t instanceof Oj){const e=t.series.getIndex(0);void 0!==e&&(e.slices.template.clickable=!1,e.labels.template.clickable=!1,e.slices.each((t=>{t.clickable=!1})))}else t instanceof QA&&(t.xAxes.each((t=>QU(t,!0))),t.yAxes.each((t=>QU(t,!0))),t.events.disableType(fR))}function gJ(t=vC().locale){return yd(this,void 0,void 0,(function*(){let e=yield Promise.resolve().then((function(){return QH}));switch(t){case hC.Arabic:e=yield import("./p-4733a0d5.js");break;case hC.Bosnian:e=yield import("./p-7a5d17a0.js");break;case hC.Bulgarian:e=yield import("./p-86bee32c.js");break;case hC.Catalan:e=yield import("./p-962b62e9.js");break;case hC.Czech:e=yield import("./p-5934c32d.js");break;case hC.Danish:e=yield import("./p-9767168c.js");break;case hC.German:e=yield import("./p-29c89525.js");break;case hC.Greek:e=yield import("./p-43eb5540.js");break;case hC.EnglishUSA:e=yield import("./p-7a553696.js");break;case hC.Spanish:e=yield import("./p-b7af1caa.js");break;case hC.Estonian:e=yield import("./p-0a5a7049.js");break;case hC.Finnish:e=yield import("./p-dc5d28fc.js");break;case hC.French:e=yield import("./p-0df500af.js");break;case hC.Hebrew:e=yield import("./p-49792b59.js");break;case hC.Croatian:e=yield import("./p-bb52f33a.js");break;case hC.Hungarian:e=yield import("./p-ee9a16c7.js");break;case hC.Indonesian:e=yield import("./p-35657bc4.js");break;case hC.Italian:e=yield import("./p-dd0313fb.js");break;case hC.Japanese:e=yield import("./p-f23cd8b7.js");break;case hC.Korean:e=yield import("./p-656ec2bd.js");break;case hC.Lithuanian:e=yield import("./p-7f8ad28f.js");break;case hC.Latvian:e=yield import("./p-5fca4321.js");break;case hC.NorwegianBokml:e=yield import("./p-af3503a3.js");break;case hC.Dutch:e=yield import("./p-e4cfae5f.js");break;case hC.Polish:e=yield import("./p-7a784cd5.js");break;case hC.PortugueseBrazil:e=yield import("./p-7a6cb95b.js");break;case hC.PortuguesePortugal:e=yield import("./p-6b1d5bc8.js");break;case hC.Romanian:e=yield import("./p-0798528c.js");break;case hC.Russian:e=yield import("./p-7cd6d924.js");break;case hC.Serbian:e=yield import("./p-6b8091cc.js");break;case hC.Slovak:e=yield import("./p-671827bd.js");break;case hC.Slovenian:e=yield import("./p-d6ef7e93.js");break;case hC.Swedish:e=yield import("./p-7343da60.js");break;case hC.Thai:e=yield import("./p-a35bdaaa.js");break;case hC.Turkish:e=yield import("./p-b01e82cf.js");break;case hC.Ukrainian:e=yield import("./p-7c8902b5.js");break;case hC.Vietnamese:e=yield import("./p-3961b6a0.js");break;case hC.ChineseChina:e=yield import("./p-86204f78.js");break;case hC.ChineseHongKong:e=yield import("./p-d060c555.js");break;case hC.ChineseTaiwan:e=yield import("./p-b2c0d7a6.js")}return e}))}function yJ(t){return void 0!==t&&null!==t.offsetParent}function wJ(t,e){var i;if(!0===XG(t)&&void 0!==e){const{series:n}=e,{dataLabels:r,optimizeDataLabelsOverlapping:s}=n[0],{paddingWithLabels:a,defaultPadding:o}=oR.pieChart,u=null!==(i=n[0].dataLabelsOffset)&&void 0!==i?i:oR.pieChart.dataLabelsOffset,l=!0===(null==r?void 0:r.visible)&&!0===s?a+u:o;t.chartContainer.paddingRight=Math.max(o,l),t.chartContainer.paddingLeft=Math.max(o,l),t.validate()}}function SJ(t,e){if(t instanceof Oj)wJ(t,e);else if(t instanceof vj==!1){const e=()=>{var e,i,n,r,s,a;const o=HV(t.uid,"config"),{chartPaddingMinSize:u,chartPaddingRightWhenLegendNotOnRight:l,chartContainerPaddingTopWhenRotated:h,chartContainer:c}=oR,d=null==o?void 0:o.series,f=iM(d),m=$G({config:o}),v=null===(n=null===(i=null===(e=null==d?void 0:d[0])||void 0===e?void 0:e.dataLabels)||void 0===i?void 0:i.visible)||void 0===n||n;let p=oR.chartDefaultPaddingRight;if(!0===m&&!0===v&&(f===BD||f===VD||f===_D&&(null!==(r=(null==d?void 0:d[0]).stackedType)&&void 0!==r?r:"sideBySide")===YD)){let e=0;const i=t=>{var e;return null!==(e=XV(t.uid,"isDataLabel"))&&void 0!==e&&e};t.series.each((t=>{const n=t.bullets.values.find(i);void 0!==n&&n.clones.each((t=>{let i=t.measuredWidth;switch(t.horizontalCenter){case wD:i/=2;break;case vD:i*=-1}const n=t.pixelX+i;n>e&&(e=n,p=i)}))}))}p>=0&&(t.chartContainer.paddingRight=p),t.chartContainer.paddingTop=!0===m?h:c.paddingTop;const b=!1!==(null===(s=null==o?void 0:o.legend)||void 0===s?void 0:s.visible)&&(null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.position)===UD;t.paddingRight=!0===b?u:l};e();let i=0;t.series.each((n=>{n.events.once(wR,(()=>{i+=1,i===t.series.length&&e()}))}))}}function xJ(t){var e,i;return!0===t.isHover||!0===(null===(i=null===(e=t.dataItem)||void 0===e?void 0:e.label)||void 0===i?void 0:i.isHover)}function CJ(t){const e=e=>yd(this,void 0,void 0,(function*(){if(!0===TW(t)){const i=MW(e);yield function(t,e){return yd(this,void 0,void 0,(function*(){let i=[];const n=t.series.getIndex(0);if(void 0!==n){const r=n.slices.values.some((t=>!0===xJ(t))),s=n.slices.values.every((t=>t.isHover!==t.isActive));if(!0==(!0===r&&!0===s)||!1===r)i=[];else{const r={queryObject:HV(t.uid,"queryObject"),element:{},xAxisField:CG(n),yAxisField:OG(n),chartType:ND,seriesIndex:0};n.slices.each(((t,n)=>{var s,a,o;!0==(!0===t.isActive&&(!0===xJ(t)||!0===e))?!0===tH(null===(s=t.dataItem)||void 0===s?void 0:s.dataContext)?(null!==(o=Qq({groupOfSlicesDataContext:null===(a=t.dataItem)||void 0===a?void 0:a.dataContext}))&&void 0!==o?o:[]).forEach((t=>{i.push(Object.assign(Object.assign({},r),{element:void 0,elementDataContext:t,elementIndex:n}))})):i.push(Object.assign(Object.assign({},r),{element:t,elementIndex:n})):OW({element:t,selected:!1,useNativeState:!0})})),i.forEach((t=>{OW({element:t.element,selected:!0,useNativeState:!0})}))}!1===r||0===i.length?Hq({chart:t,selectionSource:oA}):yield aH({chart:t,listSelectedElements:i,selectionSource:oA})}t instanceof Oj&&t.feedLegend()}))}(t,i)}}));t.events.on(cR,e),t.events.on(dR,e)}function OJ(t){var e,i,n;const r=t.dataSource,{dataItems:s}=r.data,a=t.series[0];let o=[];const{query:u}=a;if(void 0!==u){o=xq({query:u,data:s,statType:null!==(n=null===(i=null===(e=u.outStatistics)||void 0===e?void 0:e[0])||void 0===i?void 0:i.statisticType)&&void 0!==n?n:iP.statisticType,series:a,propertyFields:r.configFields})}return o}function MJ(t){var e,i;return yd(this,void 0,void 0,(function*(){const{queryObject:n,chartConfig:r,queryConfig:s,options:a,abortKey:o}=t,{chartLimits:u}=null!=a?a:{},l={valid:!0};if((null===(e=r.dataSource)||void 0===e?void 0:e.type)===tP)l.data={dataItems:OJ(r)};else if(void 0!==n){const{behaviorAfterLimit:t,maxGaugeByFeaturesLimit:e}=null!=u?u:{},h=EM(r);let c,d=!0;if(!0===h&&(gG({chartConfig:r,options:a,uniqueQuery:s}),(null===(i=null==a?void 0:a.chartLimits)||void 0===i?void 0:i.behaviorAfterLimit)!==lC&&(c=(yield jq({chartConfig:r,queryObject:n,queryConfig:s,behaviorAfterLimit:t,numberMaxOfFeaturesToFetch:e,isGaugeByFeature:h})).elementCount,d=sM({count:null!=c?c:0,seriesCount:r.series.length,seriesType:RD,chartLimits:u}))),!0===Number.isNaN(d)||!0===d){const t=yield function(t){var e,i,n;return yd(this,void 0,void 0,(function*(){const{queryObject:r,queryConfig:s,chartConfig:a,abortKey:o}=t,u=a.series[0],{x:l,valueConversion:h}=u,c=EM(a),d=yield eT({queryObject:r,queryConfig:s,outFields:["*"],abortKey:o,featureCount:null!==(e=s.num)&&void 0!==e?e:1});let f=[{[l]:null}];if(!0===c)f=d.map((t=>{const e=e$(t.attributes[l],h);return Object.assign(Object.assign({},t.attributes),{[l]:e})}));else if(d.length>0){let t=null!==(n=null!==(i=d[0].attributes[l])&&void 0!==i?i:d[0].attributes[l.toUpperCase()])&&void 0!==n?n:d[0].attributes[l.toLowerCase()];t=e$(t,h),f=[{[l]:t}]}return f}))}({queryObject:n,chartConfig:r,queryConfig:s,abortKey:o});l.data={dataItems:t},l.count=t.length}else l.count=c,yq(l,RD)}return l}))}function TJ(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,queryConfig:i,chartConfig:n,currentSelectionDataItems:r,options:s,abortKey:a}=t,{series:o}=n,u=iM(o),l=tG(n);let h={valid:!0};const c=yield function(t){var e;return yd(this,void 0,void 0,(function*(){const{chartConfig:i,currentSelectionDataItems:n,options:r,queryConfig:s,queryObject:a}=t,{selectionData:o}=null!=r?r:{};let u=[];if(void 0!==i){const t=i.series,{selectionItems:l}=null!=o?o:{};u=null!==(e=null!=l?l:n)&&void 0!==e?e:[],t.length>1&&(u=Cq(u,t[0].x));const{uniqueQuery:h}=yield yG({chartConfig:i,queryConfig:s,queryObject:a,setTimeBinningInfoWhenNotProvided:null==r?void 0:r.setTimeBinningInfoWhenNotProvided});Fq({arrayToSort:u,orderByFieldsConfig:h.orderByFields,chartConfig:i})}return null!=u?u:[]}))}({chartConfig:n,currentSelectionDataItems:r,options:s,queryObject:e,queryConfig:i});let d=!1;switch(u){case _D:case VD:h.data={dataItems:c},h.count=c.length*o.length,d=!0;break;case BD:if(0===c.length||!1===FM({xAxisValueFormatType:l,setTimeBinningInfoWhenNotProvided:null==s?void 0:s.setTimeBinningInfoWhenNotProvided,seriesConfig:o[0]}))h.data={dataItems:c},h.count=c.length*o.length,d=!0;else{const t=Object.assign({},i);if(void 0!==r&&r.length>0){const e=VM(r.map((t=>Jq(o[0].x,t))),"OR");t.where=VM([t.where,e])}const a={queryObject:e,queryConfig:t,chartConfig:n,options:s};h=yield Pq(a)}break;case ND:h.data={dataItems:c},h.count=c.length,d=!0;break;case zD:if(0===c.length)h.data={mean:NaN,median:NaN,stddev:NaN,max:NaN,min:NaN,bins:[]},h.count=0;else{const{x:t}=o[0],r=VM(c.map(((e,i)=>{const{minValue:n,maxValue:r}=e,s=i===c.length-1?"<=":"<";return`${t} >= ${n} AND ${t} ${s} ${r}`})),"OR"),u=Object.assign({},i);u.where=VM([u.where,r]),h=yield FW({queryObject:e,chartConfig:n,queryConfig:u,options:s,abortKey:a})}break;case ED:if(0===c.length){const{r2:t,trendLinePoints:e}=oR.scatterPlotSeries;h.data={dataItems:[],r2:t,trendLinePoints:e,count:0},h.count=0}else{const t=new Map,{r2:e,trendLinePoints:r}=zW({data:c,queryConfig:i,chartConfig:n,statsMap:t},!1);h.data={dataItems:c,r2:e,trendLinePoints:r},h.count=c.length}}return!0===d&&void 0!==h.data&&Fq({arrayToSort:"dataItems"in h.data?h.data.dataItems:h.data,orderByFieldsConfig:i.orderByFields,chartConfig:n}),h}))}function kJ(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,chartConfig:i,queryConfig:n,binnedServerData:r,options:s,abortKey:a}=t,{dataSource:o,series:u}=i,{filterBySelection:l}=null!=s?s:{},h=iM(u,0);let c={valid:!0};if(!0===l)c=yield TJ(t);else switch(h){case _D:o.type===tP?!1===o.processed&&(c.data={dataItems:Tq(i)}):c=yield Dq({queryObject:e,queryConfig:n,options:s,chartConfig:i});break;case BD:if(o.type===tP&&!1===o.processed)c.data={dataItems:Tq(i)};else{const t={queryObject:e,queryConfig:n,chartConfig:i,options:s};!0===FM({xAxisValueFormatType:tG(i),setTimeBinningInfoWhenNotProvided:null==s?void 0:s.setTimeBinningInfoWhenNotProvided,seriesConfig:u[0]})?(void 0!==r&&(t.binnedServerData=r),c=yield Pq(t)):c=yield Dq(t)}break;case ED:c.data=yield WW({queryObject:e,queryConfig:n,options:s,chartConfig:i,abortKey:a});break;case zD:c=yield FW({queryObject:e,queryConfig:n,chartConfig:i,options:s,abortKey:a});break;case ND:o.type===tP?c.data={dataItems:Tq(i)}:c=yield Dq({queryConfig:n,queryObject:e,chartConfig:i,options:s,abortKey:a});break;case RD:c=yield MJ({queryObject:e,chartConfig:i,queryConfig:n,options:s,abortKey:a})}return c}))}function IJ(t){return yd(this,void 0,void 0,(function*(){const{queryObject:e,chartConfig:i,abortKey:n,currentSelectionDataItems:r,binnedServerData:s,options:a}=t,{dataSource:o,series:u}=i;let l={valid:!0};const h=mG({queryObject:e,chartConfig:i,options:a});return o.type===tP&&!0===o.processed?(!function(t){var e,i;const{dataInfo:n,dataSource:r,seriesConfig:s,chartLimits:a}=t,o=iM(s,0);o===_D||o===BD?n.count=r.data.dataItems.length*s.length:o===ND&&(n.count=null===(e=r.data)||void 0===e?void 0:e.dataItems.length),!1===sM({count:null!==(i=n.count)&&void 0!==i?i:0,seriesCount:s.length,seriesType:o,chartLimits:a})?yq(n,o):o===ND&&!1===_G(r.data.dataItems,s[0].y)&&wq(n,ST);!0===n.valid&&(n.data=r.data)}({dataInfo:l,dataSource:o,seriesConfig:u,chartLimits:null==a?void 0:a.chartLimits}),!0===l.valid&&!0===(null==a?void 0:a.filterBySelection)&&iM(u,0)!==RD&&(l=yield kJ({queryConfig:h,chartConfig:i,currentSelectionDataItems:r,options:a}))):(nT(n),l=yield kJ({chartConfig:i,queryObject:e,queryConfig:h,currentSelectionDataItems:r,binnedServerData:s,options:a,abortKey:n})),l.queryConfig=h,l}))}function AJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,data:i,chartConfig:n,pieSlicesSymbols:r,queryObject:s,options:a,currentValidationStatus:o,commonStrings:u}=t,{slices:l}=null!=r?r:{},{chartWillRender:h,createMessage:c}=null!=a?a:{};let d=o,f=n,m=ON(r);if(void 0!==h){f=ON(n);const t=DG({data:i,seriesConfig:n.series});f=yield h({chartConfig:f,data:t,slices:l}),d=yield CK({chart:e,chartConfig:f,queryObject:s,createMessage:c}),e instanceof Oj&&(m=yield LK({chart:e,chartConfig:f,queryObject:s,labelUpdateNeeded:!0,commonStrings:u}))}return{alteredConfig:f,newValidationStatus:d,alteredPieSlicesSymbols:m}}))}function jJ(t){return yd(this,void 0,void 0,(function*(){const e=vC(),i=yield function(t=vC().locale){return yd(this,void 0,void 0,(function*(){let e=yield import("./p-b7554c76.js");switch(t){case hC.Arabic:e=yield import("./p-7224b313.js");break;case hC.Bosnian:e=yield import("./p-1d20c263.js");break;case hC.Bulgarian:e=yield import("./p-7523b932.js");break;case hC.Catalan:e=yield import("./p-1c3a5337.js");break;case hC.Czech:e=yield import("./p-5dca7d2d.js");break;case hC.Danish:e=yield import("./p-e5ac78c6.js");break;case hC.German:e=yield import("./p-c675d0b5.js");break;case hC.Greek:e=yield import("./p-6d2dd9de.js");break;case hC.EnglishUSA:e=yield import("./p-b7554c76.js");break;case hC.Spanish:e=yield import("./p-a96def61.js");break;case hC.Estonian:e=yield import("./p-83b00d19.js");break;case hC.Finnish:e=yield import("./p-ed74e4b3.js");break;case hC.French:e=yield import("./p-962eeac9.js");break;case hC.Hebrew:e=yield import("./p-f4e1ccc9.js");break;case hC.Croatian:e=yield import("./p-04a4e5b6.js");break;case hC.Hungarian:e=yield import("./p-9789b598.js");break;case hC.Indonesian:e=yield import("./p-76a90d8b.js");break;case hC.Italian:e=yield import("./p-9c92a216.js");break;case hC.Japanese:e=yield import("./p-ac67acce.js");break;case hC.Korean:e=yield import("./p-d3796bc4.js");break;case hC.Lithuanian:e=yield import("./p-ab917cf8.js");break;case hC.Latvian:e=yield import("./p-663eb3a4.js");break;case hC.NorwegianBokml:e=yield import("./p-9c40f661.js");break;case hC.Dutch:e=yield import("./p-e13d9662.js");break;case hC.Polish:e=yield import("./p-51f799f1.js");break;case hC.PortugueseBrazil:e=yield import("./p-f0de3684.js");break;case hC.PortuguesePortugal:e=yield import("./p-3fc61945.js");break;case hC.Romanian:e=yield import("./p-bfaeb02d.js");break;case hC.Russian:e=yield import("./p-7ee7cf6f.js");break;case hC.Serbian:e=yield import("./p-0fcbfbe6.js");break;case hC.Slovak:e=yield import("./p-9b7397b3.js");break;case hC.Slovenian:e=yield import("./p-ebafdb1a.js");break;case hC.Swedish:e=yield import("./p-5f83b460.js");break;case hC.Thai:e=yield import("./p-9df529eb.js");break;case hC.Turkish:e=yield import("./p-16ef79de.js");break;case hC.Ukrainian:e=yield import("./p-8d9d65d3.js");break;case hC.Vietnamese:e=yield import("./p-505341e4.js");break;case hC.ChineseChina:e=yield import("./p-5f256dfb.js");break;case hC.ChineseHongKong:case hC.ChineseTaiwan:e=yield import("./p-b2173f66.js")}return e.default}))}(e.locale);rp.defaultLocale=i,t.language.locale=i,t.rtl=!0===e.rtl}))}function FJ(t,e){var i;if(XG(t)){const n=null!==(i=null!=e?e:HV(t.uid,"actionMode"))&&void 0!==i?i:oR.actionMode;UV(t.uid,{actionMode:n});const r=HV(t.uid,"filterBySelection");switch(n){case hA:case cA:case dA:!0!==r?function(t){if(XG(t))if(t.events.enableType(cR),t.events.enableType(dR),t instanceof Oj){const e=t.series.getIndex(0);void 0!==e&&(e.slices.template.clickable=!0,e.labels.template.clickable=!0,e.slices.each((t=>{t.clickable=!0})))}else t instanceof QA&&(t.xAxes.each((t=>QU(t,!1))),t.yAxes.each((t=>QU(t,!1))),t.events.enableType(fR))}(t):bJ(t);break;case fA:bJ(t);break;case mA:Hq({chart:t,selectionSource:lA,clearOnlyVisibleSeries:!1,disposeStyleAndSelection:!1}),bJ(t)}ZU(t,n)}}function DJ(t,e){var i;const n=null===(i=t.svgContainer)||void 0===i?void 0:i.SVGContainer;void 0!==n&&(n.style.position=null!=e?e:"relative")}function PJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,axesTypes:i,chartType:n,isRotated:r}=t;switch(n){case ED:!function(t,e){lK({chart:t,axesTypes:e})}(e,i);break;case zD:!function(t){const{chart:e,axesTypes:i}=t;lK({chart:e,axesTypes:i});const n=e.xAxes.getIndex(0);if(void 0!==n){n.renderer.ticks.template.disabled=!0;const t=()=>GK(n);n.events.once(SR,t),e.chartContainer.events.on(bR,QN(t,oR.debounceTime))}}({chart:e,axesTypes:i});break;case _D:case BD:case VD:yield function(t){return yd(this,void 0,void 0,(function*(){const{chart:e,chartType:i,axesTypes:n,isRotated:r}=t;yield $K(i,n),lK({chart:e,axesTypes:n,isRotated:r})}))}({chart:e,chartType:n,axesTypes:i,isRotated:r});break;case RD:yield uJ(e,i[0])}}))}function LJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,chartConfig:i,chartConfig:{axes:n},rotationChanged:r,axisLabelsBehaviorChanged:s,chartType:a,isRotated:o,data:u,timeIntervalInfo:l,guideTooltipFormatter:h,xAxisLabelFormatter:c,yAxisLabelFormatter:d,gaugeInnerLabelFormatter:f,commonStrings:m}=t;switch(a){case ED:yield function(t){return yd(this,void 0,void 0,(function*(){yield mK(t)}))}({chart:e,axes:n,axisLabelsBehaviorChanged:s,guideTooltipFormatter:h,xAxisLabelFormatter:c,yAxisLabelFormatter:d,commonStrings:m});break;case zD:void 0!==e.data&&(yield function(t){return yd(this,void 0,void 0,(function*(){const{chart:e,axes:i,histogramBins:n,guideTooltipFormatter:r,xAxisLabelFormatter:s,yAxisLabelFormatter:a,commonStrings:o}=t,u=function(t){let e=[];if(t.length>0){e=t.map((t=>t.minValue));const i=t[t.length-1].maxValue;e.push(i)}return e}(n),l=i[0];yield mK({chart:e,axes:i,guideTooltipFormatter:r,xAxisLabelFormatter:s,yAxisLabelFormatter:a,commonStrings:o});const h=e.xAxes.getIndex(0);void 0!==h&&(function(t,e){if(t.renderer.labels.template.disabled=!0,0!==e.length){t.strictMinMax=!0;const{0:i,[e.length-1]:n}=e;t.min=i,t.max=n}else t.min=NaN,t.max=NaN,t.strictMinMax=!1}(h,u),zU({valueAxis:h,axisConfig:l,ticks:u}),GK(h))}))}({chart:e,axes:n,histogramBins:e.data,guideTooltipFormatter:h,xAxisLabelFormatter:c,yAxisLabelFormatter:d,commonStrings:m}));break;case _D:case BD:case VD:yield function(t){var e,i,n,r,s;return yd(this,void 0,void 0,(function*(){const{chart:a,chartConfig:o,rotationChanged:u,axisLabelsBehaviorChanged:l,isRotated:h,timeIntervalInfo:c,guideTooltipFormatter:d,xAxisLabelFormatter:f,yAxisLabelFormatter:m,commonStrings:v}=t,p=o.axes,b=HG(o.series[0]),g=nM(o.series[0]);$K(null!==(e=iM(o.series))&&void 0!==e?e:_D,[p[0].valueFormat,p[1].valueFormat]),yield mK({chart:a,axes:p,rotationChanged:u,axisLabelsBehaviorChanged:l,isRotated:h,timeIntervalInfo:c,guideTooltipFormatter:d,xAxisLabelFormatter:f,yAxisLabelFormatter:m,commonStrings:v});const y=!0===h?a.yAxes.getIndex(0):a.xAxes.getIndex(0);if(void 0!==y){y instanceof KA&&(y.dataFields.category=`${b}`);const t=y.renderer;t.grid.template.location=0,t.cellStartLocation=.1,t.cellEndLocation=.9;let e=!0===h;!0===(null!==(s=null===(r=null===(n=null===(i=o.series[0].query)||void 0===i?void 0:i.orderByFields)||void 0===n?void 0:n[0])||void 0===r?void 0:r.includes(QD.Descending))&&void 0!==s&&s)&&y instanceof WA&&(e=!1===e),t.inversed=e}(!0===h?a.xAxes.getIndex(0):a.yAxes.getIndex(0)).calculateTotals=g===XD}))}({chart:e,chartConfig:i,rotationChanged:r,axisLabelsBehaviorChanged:s,isRotated:o,timeIntervalInfo:l,guideTooltipFormatter:h,xAxisLabelFormatter:c,yAxisLabelFormatter:d,commonStrings:m});break;case RD:yield lJ({chart:e,chartConfig:i,data:(null!=u?u:e.data).dataItems,axisValueFormatter:c,gaugeInnerLabelFormatter:f})}}))}function EJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,chartConfig:i,hideLoaderHandle:n,options:r,commonStrings:s}=t,{selectionTheme:a,ignoreSmoothRenderingLimit:o}=null!=r?r:{};let u,l,h;for(let t=e.series.length-1;t>=0;t-=1)e.series.removeIndex(t).dispose();const c=[];for(const t of i.series)switch(h=iM([t]),h){case _D:u=[e.xAxes.getIndex(0),e.yAxes.getIndex(0)],l=EH({seriesConfig:t,axisPair:u,hideLoaderHandle:n,selectionTheme:a}),dK(l),e.series.push(l);break;case BD:u=[e.xAxes.getIndex(0),e.yAxes.getIndex(0)],l=RK({chart:e,numberOfChartSeries:i.series.length,seriesConfig:t,axisPair:u,selectionTheme:a,ignoreSmoothRenderingLimit:o,hideLoaderHandle:n}),dK(l),e.series.push(l);break;case ED:u=[e.xAxes.getIndex(0),e.yAxes.getIndex(0)],c.push(gK({chart:e,seriesConfig:t,axisPair:u,selectionTheme:a,ignoreSmoothRenderingLimit:o,hideLoaderHandle:n})),e.bulletsContainer.zIndex=1,e.seriesContainer.zIndex=2;break;case zD:u=[e.xAxes.getIndex(0),e.yAxes.getIndex(0)],c.push(sU({seriesConfig:t,axisPair:u,selectionTheme:a,hideLoaderHandle:n,commonStrings:s}));break;case ND:l=FK({seriesConfig:t,hideLoaderHandle:n,selectionTheme:a}),e.series.push(l)}if(c.length>0){const t=yield Promise.all(c);e.series.pushAll(t.flat())}hH(e)}))}function NJ(t){return yd(this,void 0,void 0,(function*(){const{chart:e,chartConfig:i,chartConfig:{series:n,axes:r},rotationChanged:s,chartData:a,newSeries:o,queryObject:u,options:l,dataWasUpdated:h,sortChanged:c,groupOfSlicesWasUpdated:d,pieSlicesSymbols:f,commonStrings:m}=t,v=e.series.values,p=new Map;let b=new Map,g={};const y=i.series.length,w=ZG(i),S=AM(u),x=yield yM(u,null==l?void 0:l.usePopupTemplateFieldsInfo),C=iM(i.series);if(C===_D||C===BD||C===VD){const t=kM(i.series),e=function(t){const{chartConfig:e,dataSource:i,numberOfSeries:n,queryObject:r,queryType:s}=t,a=new Map;let o={};if(i.type===eP){const t=gM(r);if(!1===t.isTable){o=mM(t.renderer);for(let i=0;i<n;i+=1)hW({series:e.series[i],layer:t,queryType:s,mapRendererColorToSeries:a})}}return{rendererInfo:o,mapRendererColorToSeries:a}}({chartConfig:i,dataSource:i.dataSource,numberOfSeries:y,queryObject:u,queryType:t});g=e.rendererInfo,b=e.mapRendererColorToSeries}for(const[t,C]of n.entries()){switch(iM([C])){case _D:yield NH({seriesConfig:C,series:v[t],newSeries:o,numberOfSeries:y,seriesIndex:t,dataSource:i.dataSource,queryObject:u,axes:r,rotationChanged:s,sortChanged:c,options:l,dataWasUpdated:h,inlineDisplayLabelField:w,seriesSymbolMapForEvent:p,rendererInfo:g,mapRendererColorToSeries:b,subtypeInfo:S,fieldList:x,commonStrings:m});break;case BD:yield zK({seriesConfig:C,series:v[t],newSeries:o,numberOfSeries:y,seriesIndex:t,dataSource:i.dataSource,queryObject:u,axes:r,rotationChanged:s,options:l,dataWasUpdated:h,sortChanged:c,inlineDisplayLabelField:w,seriesSymbolMapForEvent:p,rendererInfo:g,subtypeInfo:S,fieldList:x,mapRendererColorToSeries:b,commonStrings:m});break;case ED:yield wK({seriesConfig:C,dataSource:i.dataSource,chartSeries:v,axes:r,chartData:a,queryObject:u,options:l,dataWasUpdated:h,tooltipFormatter:null==l?void 0:l.tooltipFormatter,dataLabelFormatter:null==l?void 0:l.dataLabelFormatter,commonStrings:m});break;case zD:yield oU({seriesConfig:C,chartSeries:v,axes:r,dataSource:i.dataSource,chartData:a,queryObject:u,options:l,dataWasUpdated:h,tooltipFormatter:null==l?void 0:l.tooltipFormatter,dataLabelFormatter:null==l?void 0:l.dataLabelFormatter,commonStrings:m});break;case ND:NK({chart:e,seriesConfig:C,pieSeries:v[t],newSeries:o,options:l,queryObject:u,dataWasUpdated:h,sortChanged:c,groupOfSlicesWasUpdated:d,pieSlicesSymbols:f,tooltipFormatter:null==l?void 0:l.tooltipFormatter,dataLabelFormatter:null==l?void 0:l.dataLabelFormatter,commonStrings:m})}}e instanceof QA&&1===v.length&&(v[0].hiddenInLegend=!0)}))}function RJ(t){var e,i,n,r,s;return yd(this,void 0,void 0,(function*(){const{chartConfig:a,chart:o,options:u,globalOptions:l,queryObject:h,commonStrings:c}=t;let d,f,m,v;const p=$$(o);p.showLoader(!0!==(null==u?void 0:u.hideLoaderAnimation));const b=iM(a.series),{valid:g,invalidType:y,data:w,count:S,binnedServerData:x,queryConfig:C}=yield IJ({chartConfig:a,queryObject:h,abortKey:YG(o),options:u});R$({data:w,seriesConfig:a.series,htmlContainer:o.htmlContainer}),UV(o.uid,{elementCount:S,initialized:g,binnedServerData:x,queryConfig:C,timeIntervalInfo:b===BD?null==w?void 0:w.timeIntervalInfo:void 0});const O=NM({seriesType:b,fetchedData:w});if(!1===g)yield OK({chart:o,invalidType:y,elementCount:S,seriesCount:a.series.length,options:u}),p.hideLoader();else{let t;void 0!==O&&(o.data=O),o instanceof Oj&&(eH({chart:o,seriesConfig:a.series,commonStrings:c}),t=yield LK({chart:o,chartConfig:a,queryObject:h,labelUpdateNeeded:!0,commonStrings:c}));const g=yield AJ({chart:o,data:w,chartConfig:a,pieSlicesSymbols:t,queryObject:h,options:u,commonStrings:c});v=g.newValidationStatus;const{alteredConfig:y,alteredPieSlicesSymbols:S}=g;if(t=S,o instanceof Oj&&(DK({chart:o,newChartConfig:y,pieSlicesSymbols:t}),V$(t,o.htmlContainer)),!1!==(null==v?void 0:v.valid)){const{title:a,subTitle:v,footer:g,dataSource:S,series:x,background:C}=y;d=function(t){const e=h$(oR.headerContainer,t),i=y$(oR.title,e),n=y$(oR.subtitle,e);var r;return VV({chart:t,label:i,labelType:PV}),VV({chart:t,label:n,labelType:LV}),r=e,r.toBack(),{headerContainer:e,title:i,subTitle:n}}(o),x$(d,{title:a,subTitle:v}),f=function(t){const e=h$(oR.footerContainer,t),i=y$(oR.footer,e);return VV({chart:t,label:i,labelType:EV}),{footerContainer:e,footer:i}}(o),C$(f,g),m=jH(o),function(t){if(t instanceof vj==1){const{paddingTop:e,paddingRight:i,paddingBottom:n,paddingLeft:r}=oR.gauge;t.padding(e,i,n,r)}else{const{paddingMinSize:e,marginMinSize:i,chartPaddingMinSize:n,chartContainer:r}=oR;t.padding(n,n,n,n),t.chartAndLegendContainer.margin(i,i,i,i),t.chartAndLegendContainer.padding(e,e,e,e),t.chartContainer.margin(i,i,i,i),t.chartContainer.padding(r.paddingTop,e,e,e)}}(o);const O=$G({config:y});let M;b!==_D&&b!==BD&&b!==VD&&b!==ND||(M=kM(x)),UV(o.uid,{config:y,isRotated:O,isNonAggregatedChart:M===$C&&S.type!==tP}),void 0!==y.axes&&(yield PJ({chart:o,axesTypes:[y.axes[0].valueFormat,null===(e=y.axes[1])||void 0===e?void 0:e.valueFormat],chartType:b,isRotated:O}),yield LJ({chart:o,chartConfig:y,chartType:b,isRotated:O,axisLabelsBehaviorChanged:[!0,!0],data:w,timeIntervalInfo:b===BD?null==w?void 0:w.timeIntervalInfo:void 0,guideTooltipFormatter:null==u?void 0:u.guideTooltipFormatter,xAxisLabelFormatter:null==u?void 0:u.xAxisLabelFormatter,yAxisLabelFormatter:null==u?void 0:u.yAxisLabelFormatter,gaugeInnerLabelFormatter:null==u?void 0:u.gaugeInnerLabelFormatter,commonStrings:c})),yield EJ({chart:o,chartConfig:y,hideLoaderHandle:p.hideLoader,commonStrings:c,options:u}),yield NJ({chart:o,chartConfig:y,rotationChanged:!1,queryObject:h,chartData:w,newSeries:x,groupOfSlicesWasUpdated:!0,pieSlicesSymbols:t,dataWasUpdated:!0,options:u,commonStrings:c}),FH({legendElements:m,seriesConfig:x,webChartLegend:y.legend,seriesType:b,disableTogglingLegendItems:null==u?void 0:u.disableTogglingLegendItems,pieChartLegendValueLabelFormatter:null==u?void 0:u.pieChartLegendValueLabelFormatter}),cJ(o),function(t){t.background.fill=r$(oR.backgroundColor)}(o),hJ(o,C),dJ({chart:o,scrollbarXVisible:null===(n=null===(i=y.axes)||void 0===i?void 0:i[0])||void 0===n?void 0:n.scrollbarVisible,scrollbarYVisible:null===(s=null===(r=y.axes)||void 0===r?void 0:r[1])||void 0===s?void 0:s.scrollbarVisible}),KU(o),JU(o,null==y?void 0:y.cursorCrosshair),FJ(o,null==u?void 0:u.actionMode);const T=vC();o.dateFormatter.intlLocales=T.formatLocale,function(t,e){!0===e&&(t.tapToActivate=!0,t.tapTimeout=3e3,t.responsive.enabled=!0)}(o,null==l?void 0:l.enableResponsiveFeatures),o instanceof vj!=!0&&!0!==W$(o.series)||(p.hideLoader(),_$(o.htmlContainer)),SJ(o,y)}}return{chartElements:void 0!==d&&void 0!==f&&void 0!==m?{headerElements:d,footerElements:f,legendElements:m,loaderHandle:p}:void 0,validationStatus:v}}))}function BJ(t){t.series.each((e=>{e.events.on(uR,(()=>{!0===W$(t.series)&&iK(t)}))}))}function _J(t){void 0!==t.modal&&(t.modal.classPrefix="modal",DJ(t,"static"),t.modal.events.on(CR,(()=>{DJ(t,"relative"),function(t){var e;const i=null===(e=t.svgContainer)||void 0===e?void 0:e.SVGContainer;void 0!==i&&(i.style.display="flex")}(t)})),t.modal.events.on(OR,(()=>{DJ(t,"static")})))}function zJ(t){return yd(this,void 0,void 0,(function*(){const{chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s}=t,{createMessage:a}=null!=r?r:{},o=yield gJ();void 0===e&&(yield jV("divNode"));const u=dy(e,QA);yield jJ(u),_J(u),u.events.on(xR,(()=>u.zoomOutButton.deepInvalidate()));const l=yield CK({chart:u,chartConfig:i,queryObject:n,createMessage:a});let h;return!0===l.valid&&(u instanceof QA&&(u.maskBullets=!1),h=(yield RJ({chartConfig:i,chart:u,queryObject:n,options:r,globalOptions:s,commonStrings:o})).chartElements,UV(u.uid,{config:ON(i)}),BJ(u),vJ(u),function(t){if(XG(t)){t.zoomOutButton.hoverable=!0;const e=e=>yd(this,void 0,void 0,(function*(){if(!0===TW(t)){const i={x:e.svgPoint.x,y:e.svgPoint.y,width:0,height:0},n=MW(e);yield mJ({chart:t,cursorSelectionRectangle:i,multiSelect:n,mode:"hit"})}}));t.events.on(cR,e),t.events.on(dR,e)}}(u)),B$(l,u.htmlContainer),{chart:u,chartElements:h}}))}function VJ(t){return yd(this,void 0,void 0,(function*(){const{chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s}=t;void 0===e&&(yield jV("divNode"));const a=yield gJ(),o=dy(e,Oj);yield jJ(o),_J(o);const u=yield CK({chart:o,chartConfig:i,queryObject:n,createMessage:null==r?void 0:r.createMessage});let l;return!0===u.valid&&(l=(yield RJ({chartConfig:i,chart:o,queryObject:n,options:r,globalOptions:s,commonStrings:a})).chartElements,UV(o.uid,{config:ON(i),filterBySelection:null==r?void 0:r.filterBySelection}),CJ(o)),B$(u,e),{chart:o,chartElements:l}}))}function GJ(t){var e;return yd(this,void 0,void 0,(function*(){const{chartContainer:i,chartConfig:n,queryObject:r,options:s,globalOptions:a}=t;void 0===i&&(yield jV("divNode"));const o=dy(i,vj);yield jJ(o),_J(o),o.maskBullets=!1;let u,l=yield CK({chart:o,chartConfig:n,queryObject:r,createMessage:null==s?void 0:s.createMessage});if(!0===l.valid){const t=oR.gauge,i=!0===Number.isFinite(null==n?void 0:n.innerRadius)?null==n?void 0:n.innerRadius:t.innerRadius,h=!0===Number.isFinite(null==n?void 0:n.startAngle)?null==n?void 0:n.startAngle:t.startAngle,c=!0===Number.isFinite(null==n?void 0:n.endAngle)?null==n?void 0:n.endAngle:t.endAngle;o.radius=Ad(t.radius),o.innerRadius=Ad(i),o.startAngle=h,o.endAngle=c;const d=yield RJ({chartConfig:n,chart:o,queryObject:r,options:s,globalOptions:a});u=d.chartElements,l=null!==(e=d.validationStatus)&&void 0!==e?e:l,UV(o.uid,{config:ON(n)})}return BJ(o),B$(l,o.htmlContainer),{chart:o,chartElements:u}}))}function $J(t){var e,i,n,r,s,a,o;return yd(this,void 0,void 0,(function*(){const{chart:u,chartElements:l,newConfig:h,options:c,queryObject:d,forceDataUpdate:f,commonStrings:m}=t,{createMessage:v,chartLimits:p}=null!=c?c:{};xK(u);const b=yield CK({chart:u,chartConfig:h,queryObject:d,createMessage:v});if(!0===b.valid&&void 0!==h){l.loaderHandle.showLoader(!0!==(null==c?void 0:c.hideLoaderAnimation));const t=HV(u.uid,"config"),v=null==t?void 0:t.series,{dataSource:b}=h,y=h.series,w=iM(y),S=$G({config:h});UV(u.uid,{config:ON(h),isRotated:S});const{dataUpdateNeeded:x,updateNeededDetails:C}=BG({forceDataUpdate:f,options:c,oldConfig:t,newConfig:h,filterBySelection:HV(u.uid,"filterBySelection"),timeIntervalInfo:HV(u.uid,"timeIntervalInfo"),currentSelectionDataItems:HV(u.uid,"currentSelectionDataItems"),currentSelectionOIDs:HV(u.uid,"currentSelectionDataItems"),currentSelectionIndexes:HV(u.uid,"currentSelectionDataItems")});UV(u.uid,{filterBySelection:null==c?void 0:c.filterBySelection}),FJ(u,null==c?void 0:c.actionMode);const{xOrYChanged:O,numberOfSeriesChanged:M}=C.common,T=function(t,e){return $G({config:t})!==$G({config:e})}(t,h),k=UG(v,y),I=function(t){const{oldConfig:e,newConfig:i,dataUpdateNeeded:n,rotationChanged:r}=t;return!0===n||!0===r?[!0,!0]:[e.horizontalAxisLabelsBehavior!==i.horizontalAxisLabelsBehavior,e.verticalAxisLabelsBehavior!==i.verticalAxisLabelsBehavior]}({oldConfig:t,newConfig:h,dataUpdateNeeded:x,rotationChanged:T});let A,j,F=w!==_D&&w!==BD&&w!==VD&&w!==zD;const D=kM(y);if(UV(u.uid,{isNonAggregatedChart:D===$C&&b.type!==tP}),!0===x){!0!==f&&!0!=(!0===(g=C).lineChart.timeIntervalUnitChanged||!0===g.lineChart.newTimeBinningWillBeCalculated||!0===g.common.dataForFilterBySelectionChanged||!0===g.common.filterBySelectionChanged||!0===g.common.configFiltersChanged||!0===g.common.numberOfSeriesChanged||!0===g.common.queryChanged||!0===g.common.xOrYChanged)||UV(u.uid,{binnedServerData:void 0});const{count:t,valid:e,invalidType:i,data:n,binnedServerData:r,queryConfig:s}=yield IJ({chartConfig:h,queryObject:d,abortKey:YG(u),currentSelectionDataItems:HV(u.uid,"currentSelectionDataItems"),binnedServerData:HV(u.uid,"binnedServerData"),options:c});UV(u.uid,{elementCount:t,initialized:e,binnedServerData:r,queryConfig:s,timeIntervalInfo:w===BD?null==n?void 0:n.timeIntervalInfo:void 0}),F=e,!0===F?(xK(u),A=n,j=NM({seriesType:w,fetchedData:A})):(yield OK({chart:u,invalidType:i,elementCount:t,seriesCount:y.length,options:c}),l.loaderHandle.hideLoader())}else if(w===_D||w===BD||w===VD){const t=HV(u.uid,"elementCount");if(void 0!==t&&(F=sM({count:t,seriesCount:h.series.length,seriesType:w,chartLimits:p})),!0===F){const t=function(t,e){const i=[],n=new Map,r=new Map;return t.forEach(((t,e)=>r.set(t.id,e))),e.forEach(((t,e)=>{var s;let a=r.get(t.id);void 0!==a&&(a=null!==(s=n.get(a))&&void 0!==s?s:a,a!==e&&(i.push([a,e]),n.set(e,a)))})),i}(v,y);t.length>0&&(!function(t,e){for(let i=0;i<e.length;i+=1){const n=e[i][0],r=e[i][1],s=t.length;n>=0&&n<s&&r>=0&&r<s&&t.swap(e[i][0],e[i][1])}}(u.series,t),u.feedLegend()),!0===k&&(Fq({arrayToSort:u.data,chartConfig:h,orderByFieldsConfig:null===(i=null===(e=y[0])||void 0===e?void 0:e.query)||void 0===i?void 0:i.orderByFields}),u.validateData())}else{let e;switch(w){case _D:case VD:e=bT;break;case BD:e=gT}yield OK({chart:u,invalidType:e,elementCount:t,seriesCount:y.length,options:c}),l.loaderHandle.hideLoader()}A={dataItems:u.data,timeIntervalInfo:HV(u.uid,"timeIntervalInfo")}}!0!==x&&!0!==k||R$({data:A,seriesConfig:h.series,htmlContainer:u.htmlContainer}),!1!==x&&!0!==F||(void 0!==j&&(u.data=j),void 0!==h.axes&&(yield LJ({chart:u,chartConfig:h,rotationChanged:T,axisLabelsBehaviorChanged:I,chartType:w,isRotated:S,timeIntervalInfo:null!==(n=null==A?void 0:A.timeIntervalInfo)&&void 0!==n?n:HV(u.uid,"timeIntervalInfo"),xAxisLabelFormatter:null==c?void 0:c.xAxisLabelFormatter,yAxisLabelFormatter:null==c?void 0:c.yAxisLabelFormatter,commonStrings:m})),void 0!==u.series&&0!==u.series.length&&!0!==O&&!0!==M&&!0!==T||(!0===T&&u.invalidateData(),yield EJ({chart:u,chartConfig:h,hideLoaderHandle:l.loaderHandle.hideLoader,commonStrings:m,options:c})),yield NJ({chart:u,chartConfig:h,rotationChanged:T,queryObject:d,chartData:A,newSeries:y,options:c,dataWasUpdated:x,sortChanged:k,timeIntervalInfo:w===BD?null==A?void 0:A.timeIntervalInfo:void 0,commonStrings:m}),x$(l.headerElements,{title:h.title,subTitle:h.subTitle}),C$(l.footerElements,h.footer),FH({legendElements:l.legendElements,seriesConfig:h.series,webChartLegend:h.legend,seriesType:w,disableTogglingLegendItems:null==c?void 0:c.disableTogglingLegendItems}),hJ(u,h.background),dJ({chart:u,scrollbarXVisible:null===(s=null===(r=h.axes)||void 0===r?void 0:r[0])||void 0===s?void 0:s.scrollbarVisible,scrollbarYVisible:null===(o=null===(a=h.axes)||void 0===a?void 0:a[1])||void 0===o?void 0:o.scrollbarVisible})),!0===W$(u.series)&&(l.loaderHandle.hideLoader(),_$(u.htmlContainer))}var g;B$(b,u.htmlContainer),JU(u,null==h?void 0:h.cursorCrosshair);const y=function(t){return t instanceof vj==0&&void 0===t.cursor&&KU(t),t.cursor}(u);y.behavior!==GU&&y.behavior!==VU&&y.behavior!==$U&&y.behavior!==UU||iK(u),SJ(u,h)}))}function WJ(t){var e,i,n,r;return yd(this,void 0,void 0,(function*(){const{chart:s,chartElements:a,newConfig:o,queryObject:u,forceDataUpdate:l,options:h,commonStrings:c}=t;xK(s);let d=yield CK({chart:s,chartConfig:o,queryObject:u,createMessage:null==h?void 0:h.createMessage});if(!0===d.valid&&void 0!==o){a.loaderHandle.showLoader(!0!==(null==h?void 0:h.hideLoaderAnimation)),qq(s);const t=HV(s.uid,"config"),v=null==t?void 0:t.series,p=null==o?void 0:o.series,{dataUpdateNeeded:b}=BG({forceDataUpdate:l,oldConfig:t,newConfig:o,options:h,filterBySelection:HV(s.uid,"filterBySelection"),currentSelectionDataItems:HV(s.uid,"currentSelectionDataItems"),currentSelectionOIDs:HV(s.uid,"currentSelectionDataItems"),currentSelectionIndexes:HV(s.uid,"currentSelectionDataItems")}),g=!0===UG(v,p);UV(s.uid,{filterBySelection:null==h?void 0:h.filterBySelection,config:ON(o)});let y,w,S=!0,x=!1;if(!0===b){const{count:t,valid:e,invalidType:i,data:n,queryConfig:r}=yield IJ({chartConfig:o,currentSelectionDataItems:HV(s.uid,"currentSelectionDataItems"),options:h,queryObject:u,abortKey:YG(s)});y=n,UV(s.uid,{elementCount:t,queryConfig:r,initialized:e}),S=e,w=NM({seriesType:ND,fetchedData:y}),!0===S?void 0!==w&&!0==(f=s.data,m=w,!1===iR(f.filter((t=>!1===tH(t))),m))&&(s.data=w,x=!0):(yield OK({chart:s,invalidType:i,elementCount:t,seriesCount:p.length,options:h}),a.loaderHandle.hideLoader())}if(!1===x||!0===S){const l=function(t,e){var i,n,r,s;return(null===(n=null===(i=t[0])||void 0===i?void 0:i.sliceGrouping)||void 0===n?void 0:n.percentageThreshold)!==(null===(s=null===(r=e[0])||void 0===r?void 0:r.sliceGrouping)||void 0===s?void 0:s.percentageThreshold)}(v,p);!0!==x&&!0!==l||eH({chart:s,seriesConfig:p,commonStrings:c}),!0!==g&&!0!==l||(Fq({arrayToSort:null!=w?w:s.data,chartConfig:o,orderByFieldsConfig:null===(i=null===(e=p[0])||void 0===e?void 0:e.query)||void 0===i?void 0:i.orderByFields}),s.validateData());const f=!0===RG({oldConfig:t,newConfig:o});let m=yield LK({chart:s,chartConfig:o,queryObject:u,labelUpdateNeeded:!0===x||!0===f,commonStrings:c});!0!==x&&!0!==g||R$({data:{dataItems:s.data},seriesConfig:o.series,htmlContainer:s.htmlContainer});const S=yield AJ({chart:s,data:{dataItems:s.data},chartConfig:o,pieSlicesSymbols:m,queryObject:u,options:h,currentValidationStatus:d,commonStrings:c});d=null!==(n=S.newValidationStatus)&&void 0!==n?n:d;const{alteredPieSlicesSymbols:C,alteredConfig:O}=S;m=C;const M=!0===RG({oldConfig:o,newConfig:O});!0!==b&&!0!==f&&!0!==M||DK({chart:s,newChartConfig:O,pieSlicesSymbols:m}),V$(m,s.htmlContainer),yield NJ({chart:s,queryObject:u,chartConfig:O,options:h,dataWasUpdated:x,sortChanged:g,chartData:y,groupOfSlicesWasUpdated:l,pieSlicesSymbols:m,newSeries:p,commonStrings:c}),x$(a.headerElements,{title:O.title,subTitle:O.subTitle}),C$(a.footerElements,O.footer),FH({legendElements:a.legendElements,seriesConfig:O.series,webChartLegend:O.legend,disableTogglingLegendItems:null==h?void 0:h.disableTogglingLegendItems,pieChartLegendValueLabelFormatter:null==h?void 0:h.pieChartLegendValueLabelFormatter}),hJ(s,O.background),null===(r=s.series.getIndex(0))||void 0===r||r.events.once(wR,(()=>{FJ(s,null==h?void 0:h.actionMode)})),wJ(s,O)}!0===W$(s.series)&&(a.loaderHandle.hideLoader(),_$(s.htmlContainer))}var f,m;B$(d,s.htmlContainer)}))}function qJ(t){return yd(this,void 0,void 0,(function*(){const{chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s}=t;var a;let o;rp.commercialLicense=!1!==(null==s?void 0:s.hideLicenceWatermark),rp.queue=!1!==(null==s?void 0:s.queueChartCreation),rp.autoDispose=!0===(null==s?void 0:s.autoDisposeChart),!0===(null==s?void 0:s.useAnimatedCharts)?(a=RF,-1===Om.themes.indexOf(a)&&Om.themes.push(a)):function(t){Af(Om.themes,t)}(RF);switch(iM(null==i?void 0:i.series)){case ND:o=yield VJ({chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s});break;case RD:o=yield GJ({chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s});break;default:o=yield zJ({chartContainer:e,chartConfig:i,queryObject:n,options:r,globalOptions:s})}return o}))}function HJ(t){var e;return yd(this,void 0,void 0,(function*(){const{chartContainer:i,chartConfig:n,options:r,globalOptions:s}=t,{layer:a,view:o,inlineData:u}=null!=r?r:{};let l,h=n;void 0!==h&&!1===fM(h)&&(h=KI({chartConfig:h,layer:a,inlineData:u})),h=yield aA(h,a),(null===(e=null==h?void 0:h.dataSource)||void 0===e?void 0:e.type)!==eP&&void 0===a||(l=yield pM({chartConfig:h,layer:a,view:o}));const c=yield qJ({chartContainer:i,chartConfig:h,queryObject:l,options:r,globalOptions:s}),{chart:d,chartElements:f}=c,m=!1===yJ(i);function v(t){return yd(this,void 0,void 0,(function*(){const{newConfig:e,forceDataUpdate:i,updateOptions:n,updateGlobalOptions:r}=t;let{commonStrings:s}=t;s=null!=s?s:yield gJ();const a=HV(d.uid,"initialized"),o=HV(d.uid,"config");let u;const h=null==o?void 0:o.series;void 0!==h&&(u=iM(h));const c=null==e?void 0:e.series,m=void 0!==c?iM(c):void 0;if(!0===d.isDisposed()||void 0===f||!1===a||u!==m)throw new YM(JM);switch(u){case _D:case BD:case VD:case ED:case zD:yield $J({chart:d,chartElements:f,queryObject:l,newConfig:e,forceDataUpdate:i,options:n,globalOptions:r,commonStrings:s});break;case ND:yield WJ({chart:d,chartElements:f,queryObject:l,forceDataUpdate:i,newConfig:e,options:n,globalOptions:r,commonStrings:s});break;case RD:yield function(t){var e;return yd(this,void 0,void 0,(function*(){const{chart:i,chartElements:n,newConfig:r,queryObject:s,forceDataUpdate:a,options:o,commonStrings:u}=t;xK(i);let l=yield CK({chart:i,chartConfig:r,queryObject:s,createMessage:null==o?void 0:o.createMessage});if(!0===l.valid&&void 0!==r){n.loaderHandle.showLoader(!0!==(null==o?void 0:o.hideLoaderAnimation));const t=HV(i.uid,"config"),h=iM(r.series),{dataUpdateNeeded:c}=BG({forceDataUpdate:a,oldConfig:t,newConfig:r});let d;if(!0===c){const{count:t,valid:e,invalidType:a,data:u,queryConfig:l}=yield IJ({chartConfig:r,queryObject:s,options:o,abortKey:YG(i)});d=u,void 0!==(null==d?void 0:d.dataItems)&&(i.data=null==d?void 0:d.dataItems),R$({data:{dataItems:i.data},seriesConfig:r.series,htmlContainer:i.htmlContainer}),UV(i.uid,{elementCount:t,queryConfig:l,initialized:e}),!1===e&&(yield OK({chart:i,invalidType:a,elementCount:t,seriesCount:1,options:o}),n.loaderHandle.hideLoader())}const f=yield AJ({chart:i,data:{dataItems:i.data},chartConfig:r,queryObject:s,options:o,currentValidationStatus:l,commonStrings:u});l=null!==(e=f.newValidationStatus)&&void 0!==e?e:l;const m=f.alteredConfig;if(!1!==l.valid){void 0!==m.axes&&(yield LJ({chart:i,chartConfig:m,chartType:h,data:d,xAxisLabelFormatter:null==o?void 0:o.xAxisLabelFormatter,gaugeInnerLabelFormatter:null==o?void 0:o.gaugeInnerLabelFormatter}));const t=oR.gauge,e=!0===Number.isFinite(null==m?void 0:m.innerRadius)?null==m?void 0:m.innerRadius:t.innerRadius,r=!0===Number.isFinite(null==m?void 0:m.startAngle)?null==m?void 0:m.startAngle:t.startAngle,s=!0===Number.isFinite(null==m?void 0:m.endAngle)?null==m?void 0:m.endAngle:t.endAngle;i.innerRadius=Ad(e),i.startAngle=r,i.endAngle=s,x$(n.headerElements,{title:m.title,subTitle:m.subTitle}),C$(n.footerElements,m.footer),hJ(i,m.background),UV(i.uid,{config:ON(m)}),n.loaderHandle.hideLoader(),_$(i.htmlContainer)}}B$(l,i.htmlContainer)}))}({chart:d,chartElements:f,newConfig:e,queryObject:l,forceDataUpdate:i,options:n,globalOptions:r,commonStrings:s})}}))}return UV(d.uid,{chartWasCreatedWhileHidden:m,queryObject:l,filterBySelection:null==r?void 0:r.filterBySelection,options:r}),function(t,e){if(void 0!==t&&void 0!==e&&void 0!==window.IntersectionObserver){const i=new IntersectionObserver((e=>{e[0].intersectionRatio>0&&(!0===HV(t.uid,"chartWasCreatedWhileHidden")?t.events.once(wR,(()=>{t.reinit()})):!0===HV(t.uid,"chartWasUpdatedWhileHidden")&&t.reinit(),UV(t.uid,{chartWasUpdatedWhileHidden:!1,chartWasCreatedWhileHidden:!1}))}),{root:null});i.observe(e)}}(d,i),yield MK({chart:d,chartConfig:h,options:r}),{update:function(t){return yd(this,void 0,void 0,(function*(){const{newChartConfig:e,updateOptions:n,updateGlobalOptions:r}=t,{layer:s,view:a,dataUpdated:o,inlineData:u}=null!=n?n:{},h=yield gJ(),c=!1===yJ(i);UV(d.uid,{chartWasUpdatedWhileHidden:c,options:n});let f=e;void 0!==f&&!1===fM(f)&&(f=KI({chartConfig:f,layer:s,inlineData:u})),f=yield aA(f,s);const m=bM(l);yield function(t){var e;return yd(this,void 0,void 0,(function*(){const{layerUpdate:i,newConfig:n,viewUpdate:r}=t;void 0===i&&(null===(e=null==n?void 0:n.dataSource)||void 0===e?void 0:e.type)!==eP||(l=yield pM({layer:i,view:r,chartConfig:n}),UV(d.uid,{queryObject:l}))}))}({layerUpdate:s,newConfig:f,viewUpdate:a});const p=bM(l),b=!0===o||m!==p;yield v({newConfig:f,updateOptions:n,forceDataUpdate:b,updateGlobalOptions:r,commonStrings:h}),d.interactionsEnabled=-1===navigator.userAgent.search("Firefox")||!0!==(null==n?void 0:n.disableInteractions),yield MK({chart:d,chartConfig:f,options:n})}))},dispose:function(){HM.delete(YG(d)),!0!==d.isDisposed()&&(!function(t){var e,i,n,r,s,a,o,u,l,h,c,d;t instanceof MA&&t.series.each((t=>{var e;$V(t.uid),t instanceof rj&&$V(null===(e=JG(t))||void 0===e?void 0:e.uid),t.bullets.each((t=>{$V(t.uid)})),t instanceof Hj&&t.columns.template.children.each((t=>{$V(t.uid)}))})),t instanceof QA&&($V(null!==(i=null===(e=null==t?void 0:t.xAxes.getIndex(0))||void 0===e?void 0:e.uid)&&void 0!==i?i:""),$V(null!==(r=null===(n=null==t?void 0:t.yAxes.getIndex(0))||void 0===n?void 0:n.uid)&&void 0!==r?r:""),null===(s=t.xAxes.getIndex(0))||void 0===s||s.axisRanges.each((t=>{var e;$V(null===(e=t.label)||void 0===e?void 0:e.uid)})),null===(a=t.yAxes.getIndex(0))||void 0===a||a.axisRanges.each((t=>{var e;$V(null===(e=t.label)||void 0===e?void 0:e.uid)}))),t instanceof vj&&t.radarContainer.children.each((t=>{$V(t.uid)})),t instanceof Oj&&(null===(o=t.series.getIndex(0))||void 0===o||o.slices.each((t=>{$V(t.uid)}))),"cursor"in t&&$V(null===(u=null==t?void 0:t.cursor)||void 0===u?void 0:u.uid),"legend"in t&&($V(null===(l=null==t?void 0:t.legend)||void 0===l?void 0:l.uid),$V(null===(d=null===(c=null===(h=null==t?void 0:t.legend)||void 0===h?void 0:h.valueLabels)||void 0===c?void 0:c.template)||void 0===d?void 0:d.uid)),$V(null==t?void 0:t.uid)}(d),void 0!==f&&(f.loaderHandle.hideLoader(),c.chartElements=void 0),d.dispose())},notify:function(t,e,i){var n;void 0!==d.modal&&!0!==d.isDisposed()&&(d.modal.closable=null!==(n=null==i?void 0:i.closable)&&void 0!==n&&n,void 0!==t?d.openModal(t,e):d.closeModal())},resetZoom:function(){iK(d)},clearSelection:()=>Hq({chart:d}),switchSelection:function(){return yd(this,void 0,void 0,(function*(){if(XG(d)&&(d instanceof QA||d instanceof Oj)){const t=HV(d.uid,"actionMode");t!==hA&&t!==mA&&(yield pJ(d))}}))},setActionMode:t=>FJ(d,t)}}))}rp.classNamePrefix="arcgis-charts-";function UJ(t){var e=new t;var i=e;function n(){var n=e;if(n.next){e=n.next}else{e=new t;i=e}n.next=null;return n}function r(t){i.next=t;i=t}return{get:n,release:r}}var KJ=UJ;function JJ(t,e,i){if(typeof t==="function"){i=e;e=t;t=null}if(i<1){throw new Error("fastqueue concurrency must be greater than 1")}var n=KJ(ZJ);var r=null;var s=null;var a=0;var o=null;var u={push:v,drain:YJ,saturated:YJ,pause:h,paused:false,concurrency:i,running:l,resume:f,idle:m,length:c,getQueue:d,unshift:p,empty:YJ,kill:g,killAndDrain:y,error:w};return u;function l(){return a}function h(){u.paused=true}function c(){var t=r;var e=0;while(t){t=t.next;e++}return e}function d(){var t=r;var e=[];while(t){e.push(t.value);t=t.next}return e}function f(){if(!u.paused)return;u.paused=false;for(var t=0;t<u.concurrency;t++){a++;b()}}function m(){return a===0&&u.length()===0}function v(i,l){var h=n.get();h.context=t;h.release=b;h.value=i;h.callback=l||YJ;h.errorHandler=o;if(a===u.concurrency||u.paused){if(s){s.next=h;s=h}else{r=h;s=h;u.saturated()}}else{a++;e.call(t,h.value,h.worked)}}function p(i,o){var l=n.get();l.context=t;l.release=b;l.value=i;l.callback=o||YJ;if(a===u.concurrency||u.paused){if(r){l.next=r;r=l}else{r=l;s=l;u.saturated()}}else{a++;e.call(t,l.value,l.worked)}}function b(i){if(i){n.release(i)}var o=r;if(o){if(!u.paused){if(s===r){s=null}r=o.next;o.next=null;e.call(t,o.value,o.worked);if(s===null){u.empty()}}else{a--}}else if(--a===0){u.drain()}}function g(){r=null;s=null;u.drain=YJ}function y(){r=null;s=null;u.drain();u.drain=YJ}function w(t){o=t}}function YJ(){}function ZJ(){this.value=null;this.callback=YJ;this.next=null;this.release=YJ;this.context=null;this.errorHandler=null;var t=this;this.worked=function e(i,n){var r=t.callback;var s=t.errorHandler;var a=t.value;t.value=null;t.callback=YJ;if(t.errorHandler){s(i,a)}r.call(t.context,i,n);t.release(t)}}function XJ(t,e,i){if(typeof t==="function"){i=e;e=t;t=null}function n(t,i){e.call(this,t).then((function(t){i(null,t)}),i)}var r=JJ(t,n,i);var s=r.push;var a=r.unshift;r.push=o;r.unshift=u;r.drained=l;return r;function o(t){var e=new Promise((function(e,i){s(t,(function(t,n){if(t){i(t);return}e(n)}))}));e.catch(YJ);return e}function u(t){var e=new Promise((function(e,i){a(t,(function(t,n){if(t){i(t);return}e(n)}))}));e.catch(YJ);return e}function l(){var t=r.drain;var e=new Promise((function(e){r.drain=function(){t();e()}}));return e}}var QJ=JJ;var tY=XJ;QJ.promise=tY;
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v1.0.0-beta.532
 */const eY=({message:e,heading:i,options:n})=>{var r,s,a,o;const u=t("calcite-alert",{icon:(r=n===null||n===void 0?void 0:n.icon)!==null&&r!==void 0?r:"exclamationMarkTriangle",open:(n===null||n===void 0?void 0:n.active)===true,autoClose:(s=n===null||n===void 0?void 0:n.autoClose)!==null&&s!==void 0?s:false,autoCloseDuration:(a=n===null||n===void 0?void 0:n.duration)!==null&&a!==void 0?a:"medium",scale:"m",kind:(o=n===null||n===void 0?void 0:n.kind)!==null&&o!==void 0?o:"danger","aria-hidden":(n===null||n===void 0?void 0:n.active)!==true,dir:"ltr",role:"alertdialog",label:"arcgis charts notify panel"},i!==undefined?t("div",{slot:"title"},i):null,e!==undefined?t("div",{slot:"message"},e):null);return u};
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v1.0.0-beta.532
 */const iY=1;const nY='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.lineSeries{flex-grow:1;overflow-y:hidden}.lineSeries>div{justify-content:center;align-items:center}.lineSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.lineSeries .arcgis-charts-modal-inside ol{padding-left:2em}.lineSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.lineSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.lineSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.lineSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.lineSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-line-chart-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-line-chart-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const rY=class{constructor(t){e(this,t);this.arcgisChartsDataProcessError=i(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=i(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsLegendItemVisibilityChange=i(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=i(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsSeriesColorChange=i(this,"arcgisChartsSeriesColorChange",7);this.arcgisChartsAxesMinMaxChange=i(this,"arcgisChartsAxesMinMaxChange",7);this.arcgisChartsSelectionComplete=i(this,"arcgisChartsSelectionComplete",7);this.arcgisChartsNoRenderPropChange=i(this,"arcgisChartsNoRenderPropChange",7);this.skipNextUpdate=false;this.noRenderProps=["rotation","legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.rotation=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.returnFeaturesExtent=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.guideTooltipFormatter=undefined;this.xAxisLabelFormatter=undefined;this.yAxisLabelFormatter=undefined;this.setTimeBinningInfoWhenNotProvided=undefined;this.selectionTheme=undefined;this.chartLimits=undefined;this.ignoreSmoothRenderingLimit=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.disableTogglingLegendItems=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(t){this.arcgisChartsDataProcessComplete.emit(t.detail)}handleLegendItemVisibilityChanged(t){this.arcgisChartsLegendItemVisibilityChange.emit(t.detail)}handleUpdateCompleted(t){this.arcgisChartsUpdateComplete.emit(t.detail)}handleSeriesColorsChange(t){this.arcgisChartsSeriesColorChange.emit(t.detail)}handleSelection(t){this.arcgisChartsSelectionComplete.emit(t.detail)}handleTooManySelectedElements(){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.tooManySelectedElements.title;this.notifyMessage=this.strings.tooManySelectedElements.message;this.notifyOptions={kind:"warning",autoClose:true,duration:"fast",active:true};this.showNotifyPanel=true}}handleAlertClosed(t){if(t.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}handleAxesMinMaxChange(t){this.arcgisChartsAxesMinMaxChange.emit(t.detail)}async viewChange(t,e){await this.addExtentChangeListener();if(e!==undefined&&t===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}rotationChange(t){this.config=Fe(t,this.config)}legendPositionChange(t){this.config=fY(t,this.config)}legendVisibilityChange(t){this.config=mY(t,this.config)}async notify(t,e,i){if(this.chart!==undefined){this.chart.notify(t,e,i)}return Promise.resolve(undefined)}async errorAlert(t){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=t;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async resetZoom(){if(this.chart!==undefined)this.chart.resetZoom();return Promise.resolve(undefined)}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(t){var e,i,n,r,s,a,o,u,l,h,c,d;const{updateData:f=true,resetAxesBounds:m=false,updateExtent:v=false}=t!==null&&t!==void 0?t:{};this.viewExtentUpdated=v;if(f===true)this.dataUpdateIsNeeded();if(m===true){(n=(i=(e=this.config)===null||e===void 0?void 0:e.axes)===null||i===void 0?void 0:i[0])===null||n===void 0?true:delete n.minimum;(a=(s=(r=this.config)===null||r===void 0?void 0:r.axes)===null||s===void 0?void 0:s[0])===null||a===void 0?true:delete a.maximum;(l=(u=(o=this.config)===null||o===void 0?void 0:o.axes)===null||u===void 0?void 0:u[1])===null||l===void 0?true:delete l.minimum;(d=(c=(h=this.config)===null||h===void 0?void 0:h.axes)===null||c===void 0?void 0:c[1])===null||d===void 0?true:delete d.maximum}await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...t){const[e,,i]=t;this.updatedProps.add(i);const n=this.noRenderProps.includes(i);if(n===true){this.arcgisChartsNoRenderPropChange.emit({propName:i,value:e})}const r=this.skipNextUpdate===false&&n===false;this.skipNextUpdate=false;return r}async componentWillLoad(){({strings:this.strings}=await De(this.el,n(`.`)));this.debouncedChartUpdate=tY((async()=>{if(this.chart!==undefined){const t=Array.from(this.updatedProps);const e=t.some((t=>this.dataUpdateNeededProps.includes(t)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:gY({component:this,dataUpdated:e,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:pY(this)})}}),iY)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var t;if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await Pe([Rn.LineSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const e=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(yY(this.inlineData,e)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(t){if(this.chartRef!==undefined&&this.config!==undefined){if(t.name===Le.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(t===null||t===void 0?void 0:t.message);if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}render(){var e;const i=this.showNotifyPanel===true?t(eY,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const n=this.showNotifyPanel===true&&((e=this.notifyOptions)===null||e===void 0?void 0:e.kind)==="danger"?"hide":`${Rn.LineSeries} show`;const s=this.showNotifyPanel===true?"show notifyPanel":"hide";return t(r,null,t("slot",{name:Ee.actionBar}),t("div",{class:n,ref:t=>{this.chartRef=t}}),t("div",{class:s},i))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await aY({layer:this.layer,component:this});this.layerRendererListener=await oY({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await uY({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var t;const e=(t=this.config)===null||t===void 0?void 0:t.version;if(this.displayErrorAlert!==false&&Ne(e).versionStatus===zn.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=Re(this.strings.incompatibleChartVersion.message,{chartVersion:e!==null&&e!==void 0?e:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(t=true){var e,i;await Pe([Rn.LineSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const i=(e=this.config)===null||e===void 0?void 0:e.dataSource;if(yY(this.inlineData,i)){this.chartCreationProcessing=HJ({chartContainer:this.chartRef,chartConfig:this.config,options:gY({component:this}),globalOptions:pY(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(t===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(t){if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}this.errorAlert(t===null||t===void 0?void 0:t.message);(i=this.chart)===null||i===void 0?void 0:i.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return s(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],rotation:["rotationChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"]}}};rY.style=nY;
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v1.0.0-beta.532
 */function sY(t){var e;const{chartConfig:i,setTimeBinningInfoWhenNotProvided:n,rendererType:r}=t;let s=false;const{series:a}=i;const o=_e(a);const u=ze(a);const l=Ve({seriesConfig:a[0],xAxisValueFormatType:(e=i.axes)===null||e===void 0?void 0:e[0].valueFormat.type,setTimeBinningInfoWhenNotProvided:n});s=o===Rn.ScatterSeries||(o===Rn.BarSeries||o===Rn.LineSeries||o===Rn.PieSeries||o===Rn.ComboLineAndBarSeries)&&r!==Nn.PieChart&&u===Ge.NoAggregation&&a.length===1&&l===false;return s}async function aY(t){const{layer:e,component:i}=t;let n;if(e!==undefined){const t=$e(e);n=await ht((()=>t.definitionExpression),(async()=>{await i.refresh({updateData:true,resetAxesBounds:true})}))}return n}async function oY(t){const{layer:e,component:i}=t;let n;if(e!==undefined){const t=$e(e);const{rendererType:r}=We(t.renderer);n=await ht((()=>t.renderer),(async()=>{var t;if(((t=i.config)===null||t===void 0?void 0:t.series[0].colorType)===Bn.Match){const t=sY({chartConfig:i.config,setTimeBinningInfoWhenNotProvided:i instanceof rY?i.setTimeBinningInfoWhenNotProvided:undefined,rendererType:r});await i.refresh({updateData:t})}}))}return n}async function uY(t){const{view:e,layer:i,component:n}=t;let r;if(e!==undefined&&n.config!==undefined){const t=await Be({chartConfig:n.config,view:e,layer:i});await A((()=>t.updating===false));let s="";const a=async()=>{if(t.updating===true)await A((()=>t.updating===false));const{extent:i}=e;const{xmin:r,xmax:a,ymin:o,ymax:u}=i;const l=`${r}${a}${o}${u}`;if(s!==l){s=l;await n.refresh({updateData:true,resetAxesBounds:true,updateExtent:true})}};r=Zt((()=>e.stationary===true),a);await a()}return r}const lY='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.gaugeSeries{flex-grow:1;overflow-y:hidden}.gaugeSeries>div{justify-content:center;align-items:center}.gaugeSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.gaugeSeries .arcgis-charts-modal-inside ol{padding-left:2em}.gaugeSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.gaugeSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.gaugeSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.gaugeSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.gaugeSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-gauge-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-gauge-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const hY=class{constructor(t){e(this,t);this.arcgisChartsDataProcessError=i(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=i(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsUpdateComplete=i(this,"arcgisChartsUpdateComplete",7);this.skipNextUpdate=false;this.noRenderProps=["view","featureIndex"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.view=undefined;this.layer=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.featureIndex=undefined;this.placeholder=undefined;this.chartLimits=undefined;this.axisLabelFormatter=undefined;this.gaugeInnerLabelFormatter=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.chartWillRender=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(t){this.arcgisChartsDataProcessComplete.emit(t.detail)}handleUpdateCompleted(t){this.arcgisChartsUpdateComplete.emit(t.detail)}handleAlertClosed(t){if(t.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}async viewChange(t,e){await this.addExtentChangeListener();if(e!==undefined&&t===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}featureIndexChange(t,e){if(e===undefined&&t!==undefined){this.dataUpdateIsNeeded()}this.config=this.updateFeatureIndex(t,this.config)}async notify(t,e,i){if(this.chart!==undefined){this.chart.notify(t,e,i)}return Promise.resolve(undefined)}async errorAlert(t){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=t;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async refresh(t){const{updateData:e=true,updateExtent:i=false}=t!==null&&t!==void 0?t:{};this.viewExtentUpdated=i;if(e===true)this.dataUpdateIsNeeded();await this.componentDidUpdate();this.viewExtentUpdated=false}async componentWillLoad(){({strings:this.strings}=await De(this.el,n(`.`)));this.debouncedChartUpdate=tY((async()=>{if(this.chart!==undefined){const t=Array.from(this.updatedProps);const e=t.some((t=>this.dataUpdateNeededProps.includes(t)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:gY({component:this,dataUpdated:e,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:pY(this)})}}),iY)}componentShouldUpdate(...t){const[,,e]=t;this.updatedProps.add(e);const i=this.skipNextUpdate===false&&this.noRenderProps.includes(e)===false;this.skipNextUpdate=false;return i}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var t;if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await Pe([Rn.GaugeSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const e=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(yY(this.inlineData,e)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(t){if(this.chartRef!==undefined&&this.config!==undefined){if(t.name===Le.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(t===null||t===void 0?void 0:t.message);if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}render(){var e;const i=this.showNotifyPanel===true?t(eY,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const n=this.showNotifyPanel===true&&((e=this.notifyOptions)===null||e===void 0?void 0:e.kind)==="danger"?"hide":`${Rn.GaugeSeries} show`;const s=this.showNotifyPanel===true?"show notifyPanel":"hide";return t(r,null,t("slot",{name:Ee.actionBar}),t("div",{class:n,ref:t=>{this.chartRef=t}}),t("div",{class:s},i))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await aY({layer:this.layer,component:this});this.layerRendererListener=await oY({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await uY({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var t;const e=(t=this.config)===null||t===void 0?void 0:t.version;if(this.displayErrorAlert!==false&&Ne(e).versionStatus===zn.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=Re(this.strings.incompatibleChartVersion.message,{chartVersion:e!==null&&e!==void 0?e:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(t=true){var e,i;await Pe([Rn.GaugeSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const i=(e=this.config)===null||e===void 0?void 0:e.dataSource;if(yY(this.inlineData,i)){this.chartCreationProcessing=HJ({chartContainer:this.chartRef,chartConfig:this.config,options:gY({component:this}),globalOptions:pY(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(t===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(t){if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}this.errorAlert(t===null||t===void 0?void 0:t.message);(i=this.chart)===null||i===void 0?void 0:i.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}updateFeatureIndex(t,e){let i;if(e!==undefined){i=Object.assign({},e);if((i===null||i===void 0?void 0:i.series)!==undefined)i.series[0].featureIndex=t}return i}static get assetsDirs(){return["t9n"]}get el(){return s(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],featureIndex:["featureIndexChange"]}}};hY.style=lY;const cY='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.pieSeries{flex-grow:1;overflow-y:hidden}.pieSeries>div{justify-content:center;align-items:center}.pieSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.pieSeries .arcgis-charts-modal-inside ol{padding-left:2em}.pieSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.pieSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.pieSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.pieSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.pieSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-pie-chart-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-pie-chart-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row;overflow-y:hidden}';const dY=class{constructor(t){e(this,t);this.arcgisChartsDataProcessError=i(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=i(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsLegendItemVisibilityChange=i(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=i(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsSeriesColorChange=i(this,"arcgisChartsSeriesColorChange",7);this.arcgisChartsSelectionComplete=i(this,"arcgisChartsSelectionComplete",7);this.skipNextUpdate=false;this.noRenderProps=["legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.returnFeaturesExtent=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.legendValueLabelFormatter=undefined;this.selectionTheme=undefined;this.chartLimits=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.disableTogglingLegendItems=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.chartWillRender=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(t){this.arcgisChartsDataProcessComplete.emit(t.detail)}handleLegendItemVisibilityChanged(t){this.arcgisChartsLegendItemVisibilityChange.emit(t.detail)}handleUpdateCompleted(t){this.arcgisChartsUpdateComplete.emit(t.detail)}handleSeriesColorsChange(t){this.arcgisChartsSeriesColorChange.emit(t.detail)}handleSelection(t){this.arcgisChartsSelectionComplete.emit(t.detail)}handleAlertClosed(t){if(t.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}async viewChange(t,e){await this.addExtentChangeListener();if(e!==undefined&&t===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}legendPositionChange(t){this.config=fY(t,this.config)}legendVisibilityChange(t){this.config=mY(t,this.config)}async notify(t,e,i){if(this.chart!==undefined){this.chart.notify(t,e,i)}return Promise.resolve(undefined)}async errorAlert(t){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=t;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(t){const{updateData:e=true,updateExtent:i=false}=t!==null&&t!==void 0?t:{};this.viewExtentUpdated=i;if(e===true)this.dataUpdateIsNeeded();await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...t){const[,,e]=t;this.updatedProps.add(e);const i=this.skipNextUpdate===false&&this.noRenderProps.includes(e)===false;this.skipNextUpdate=false;return i}async componentWillLoad(){({strings:this.strings}=await De(this.el,n(`.`)));this.debouncedChartUpdate=tY((async()=>{if(this.chart!==undefined){const t=Array.from(this.updatedProps);const e=t.some((t=>this.dataUpdateNeededProps.includes(t)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:gY({component:this,dataUpdated:e,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:pY(this)})}}),iY)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var t;if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await Pe([Rn.PieSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const e=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(yY(this.inlineData,e)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(t){if(this.chartRef!==undefined&&this.config!==undefined){if(t.name===Le.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(t===null||t===void 0?void 0:t.message);if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}render(){var e;const i=this.showNotifyPanel===true?t(eY,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const n=this.showNotifyPanel===true&&((e=this.notifyOptions)===null||e===void 0?void 0:e.kind)==="danger"?"hide":`${Rn.PieSeries} show`;const s=this.showNotifyPanel===true?"show notifyPanel":"hide";return t(r,null,t("slot",{name:Ee.actionBar}),t("div",{class:n,ref:t=>{this.chartRef=t}}),t("div",{class:s},i))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await aY({layer:this.layer,component:this});this.layerRendererListener=await oY({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await uY({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var t;const e=(t=this.config)===null||t===void 0?void 0:t.version;if(this.displayErrorAlert!==false&&Ne(e).versionStatus===zn.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=Re(this.strings.incompatibleChartVersion.message,{chartVersion:e!==null&&e!==void 0?e:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(t=true){var e,i;await Pe([Rn.PieSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const i=(e=this.config)===null||e===void 0?void 0:e.dataSource;if(yY(this.inlineData,i)){this.chartCreationProcessing=HJ({chartContainer:this.chartRef,chartConfig:this.config,options:gY({component:this}),globalOptions:pY(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(t===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(t){if(t.name===Le.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}this.errorAlert(t===null||t===void 0?void 0:t.message);(i=this.chart)===null||i===void 0?void 0:i.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return s(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"]}}};dY.style=cY;
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v1.0.0-beta.532
 */function fY(t,e){let i;if(e!==undefined){i=Object.assign({},e);if(i.legend!==undefined)i.legend.position=t}return i}function mY(t,e){let i;if(e!==undefined){i=Object.assign({},e);if(i.legend!==undefined)i.legend.visible=t}return i}function vY(t){var e,i,n,r,s,a,o,u;let l;if(t!==undefined){l=Object.assign({},t);(i=(e=l.axes)===null||e===void 0?void 0:e[0])===null||i===void 0?true:delete i.minimum;(r=(n=l.axes)===null||n===void 0?void 0:n[0])===null||r===void 0?true:delete r.maximum;(a=(s=l.axes)===null||s===void 0?void 0:s[1])===null||a===void 0?true:delete a.minimum;(u=(o=l.axes)===null||o===void 0?void 0:o[1])===null||u===void 0?true:delete u.maximum}return l}function pY(t){return{queueChartCreation:t.queueChartCreation,useAnimatedCharts:t.useAnimatedCharts,hideLicenceWatermark:t.hideLicenceWatermark,enableResponsiveFeatures:t.enableResponsiveFeatures,autoDisposeChart:t.autoDisposeChart}}function bY(t){const{chartOptions:e,propertyNames:i,component:n}=t;let r=e;i.forEach((t=>{if(t in n){r=Object.assign(Object.assign({},r),{[t]:n[t]})}}));return r}function gY(t){const{component:e,dataUpdated:i,viewExtentUpdated:n}=t;let r={layer:e.layer,view:e.view,createMessage:e.placeholder,inlineData:e.inlineData,hideLoaderAnimation:e.hideLoaderAnimation,runtimeDataFilters:e.runtimeDataFilters,noDataOptions:e.noDataOptions,dataUpdated:i,viewExtentUpdated:n,usePopupTemplateFieldsInfo:e.usePopupTemplateFieldsInfo};const s=["chartLimits","guideTooltipFormatter","xAxisLabelFormatter","yAxisLabelFormatter","tooltipFormatter","dataLabelFormatter","selectionData","filterBySelection","disableInteractions","actionMode","selectionTheme","gaugeInnerLabelFormatter","setTimeBinningInfoWhenNotProvided","ignoreSmoothRenderingLimit","returnSelectionOIDs","returnSelectionIndexes","returnFeaturesExtent","disableTogglingLegendItems"];r=bY({chartOptions:r,component:e,propertyNames:s});if(e instanceof hY){r=Object.assign(Object.assign({},r),{chartWillRender:e.chartWillRender,xAxisLabelFormatter:e.axisLabelFormatter})}else if(e instanceof dY){r=Object.assign(Object.assign({},r),{chartWillRender:e.chartWillRender,pieChartLegendValueLabelFormatter:e.legendValueLabelFormatter})}return r}function yY(t,e){const i=e===undefined||(e===null||e===void 0?void 0:e.type)===_n.Layer||(t===null||t===void 0?void 0:t.inputData)!==undefined&&(t===null||t===void 0?void 0:t.processed)!==undefined||(e===null||e===void 0?void 0:e.data)!==undefined&&(e===null||e===void 0?void 0:e.processed)!==undefined;return i}export{eY as A,Wn as B,vc as C,jR as D,yh as E,AR as F,Su as G,Eu as R,Rn as W,ou as X,HJ as Y,Ma as _,mY as a,aY as b,oY as c,uY as d,zn as e,pY as f,gY as g,hY as h,yY as i,rY as j,dY as k,IR as l,iY as m,Sh as n,Us as o,tY as p,cu as q,vY as r,Fu as s,ku as t,fY as u,Cu as v,Dh as w,Du as x,Kh as y,xc as z};
//# sourceMappingURL=p-d46be2b1.js.map