{"version":3,"names":["c","e","s","m","l","pixelType","_","n","FLOAT","UNSIGNED_BYTE","p","pixels","length","getAsRGBAFloat","getAsRGBA","g","capabilities","textureFloat","textureFloatLinear","A","f","width","height","internalFormat","type","t","WEBGL2","r","RGBA32F","a","RGBA","samplingMode","i","NEAREST","LINEAR","dataType","wrapMode","o","CLAMP_TO_EDGE","u","spacing","offsets","coefficients","size","T","Float32Array","u_flipY","u_applyTransform","u_opacity","u_transformSpacing","u_transformGridSize","u_targetImageSize","u_srcImageSize","u_colormapOffset","u_colormapMaxIndex","u_scale","u_offset","u_bandCount","bandCount","u_minOutput","outMin","u_maxOutput","outMax","u_minCutOff","minCutOff","u_maxCutOff","maxCutOff","u_factor","factor","u_useGamma","useGamma","u_gamma","gamma","u_gammaCorrection","gammaCorrection","u_hillshadeType","hillshadeType","u_sinZcosAs","sinZcosAs","u_sinZsinAs","sinZsinAs","u_cosZs","cosZs","u_weights","weights","u_minValue","minValue","u_maxValue","maxValue","h","gl","glName","Map","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","set","name","location","getUniformLocation","info","E","Object","keys","forEach","get","x","O","some","setUniform1i","bindTexture","setUniform1fv","setUniform1f","FLOAT_VEC2","setUniform2fv","FLOAT_VEC3","setUniform3fv","FLOAT_VEC4","setUniform4fv","FLOAT_MAT3","setUniformMatrix3fv","FLOAT_MAT4","setUniformMatrix4fv","INT","setUniform1iv","BOOL","INT_VEC2","BOOL_VEC2","setUniform2iv","INT_VEC3","BOOL_VEC3","setUniform3iv","INT_VEC4","BOOL_VEC4","setUniform4iv"],"sources":["./node_modules/@arcgis/core/views/webgl/rasterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{Z as e}from\"../../chunks/vec2f64.js\";import{ContextType as t}from\"./contextUtils.js\";import{PixelType as n,SizedPixelFormat as r,PixelFormat as a,TextureSamplingMode as i,TextureWrapMode as o,UniformType as s}from\"./enums.js\";import{Texture as u}from\"./Texture.js\";import{TextureDescriptor as f}from\"./TextureDescriptor.js\";function c(e,s,c=\"nearest\",m=!1){const l=!(m&&\"u8\"===s.pixelType),_=l?n.FLOAT:n.UNSIGNED_BYTE,p=null==s.pixels||0===s.pixels.length?null:l?s.getAsRGBAFloat():s.getAsRGBA(),g=e.capabilities.textureFloat?.textureFloatLinear,A=new f;return A.width=s.width,A.height=s.height,A.internalFormat=e.type===t.WEBGL2&&l?r.RGBA32F:a.RGBA,A.samplingMode=!g||\"bilinear\"!==c&&\"cubic\"!==c?i.NEAREST:i.LINEAR,A.dataType=_,A.wrapMode=o.CLAMP_TO_EDGE,new u(e,A,p)}function m(e,s){const{spacing:c,offsets:m,coefficients:l,size:[_,p]}=s,g=c[0]>1,A=new f;A.width=g?4*_:_,A.height=p,A.internalFormat=e.type===t.WEBGL2?r.RGBA32F:a.RGBA,A.dataType=n.FLOAT,A.samplingMode=i.NEAREST,A.wrapMode=o.CLAMP_TO_EDGE;const T=new Float32Array(g?_*p*16:2*m.length);if(g&&null!=l)for(let t=0,n=0;t<l.length;t++)T[n++]=l[t],t%3==2&&(T[n++]=1);else for(let t=0;t<p;t++)for(let e=0;e<_;e++){const n=4*(t*_+e),r=2*(e*p+t);T[n]=m[r],T[n+1]=m[r+1],T[n+3]=-1===m[r]?0:1}return new u(e,A,T)}function l(e,t){const n=new f;return n.internalFormat=a.RGBA,n.width=t.length/4,n.height=1,n.samplingMode=i.NEAREST,n.wrapMode=o.CLAMP_TO_EDGE,new u(e,n,t)}function _(t,n,r,a=1,i=!0){return{u_flipY:i,u_applyTransform:!!t,u_opacity:a,u_transformSpacing:t?t.spacing:e,u_transformGridSize:t?t.size:e,u_targetImageSize:n,u_srcImageSize:r}}function p(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function g(e,t){return{u_scale:e,u_offset:t}}function A(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function T(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function h(e,t){const n=e.gl,r=t.glName,a=new Map;if(null==r)return a;const i=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);let o;for(let s=0;s<i;s++)o=n.getActiveUniform(r,s),o&&a.set(o.name,{location:n.getUniformLocation(r,o.name),info:o});return a}function E(e,t,n){Object.keys(n).forEach((r=>{const a=t.get(r)||t.get(r+\"[0]\");a&&x(e,r,n[r],a)}))}function O(e,t,n,r){n.length===r.length&&(r.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,a)=>{t.setUniform1i(n,a),e.bindTexture(r[a],a)})))}function x(e,t,n,r){if(null===r||null==n)return!1;const{info:a}=r;switch(a.type){case s.FLOAT:a.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case s.FLOAT_VEC2:e.setUniform2fv(t,n);break;case s.FLOAT_VEC3:e.setUniform3fv(t,n);break;case s.FLOAT_VEC4:e.setUniform4fv(t,n);break;case s.FLOAT_MAT3:e.setUniformMatrix3fv(t,n);break;case s.FLOAT_MAT4:e.setUniformMatrix4fv(t,n);break;case s.INT:a.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case s.BOOL:e.setUniform1i(t,n?1:0);break;case s.INT_VEC2:case s.BOOL_VEC2:e.setUniform2iv(t,n);break;case s.INT_VEC3:case s.BOOL_VEC3:e.setUniform3iv(t,n);break;case s.INT_VEC4:case s.BOOL_VEC4:e.setUniform4iv(t,n);break;default:return!1}return!0}export{l as createColormapTexture,c as createRasterTexture,m as createTransformTexture,g as getBasicGridUniforms,p as getColormapUniforms,_ as getCommonUniforms,T as getShadedReliefUniforms,A as getStretchUniforms,h as getUniformLocationInfos,O as setTextures,E as setUniforms};\n"],"mappings":"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"}