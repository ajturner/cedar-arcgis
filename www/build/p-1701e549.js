import{n as t}from"./p-2a2efb66.js";import{l as e,y as s,n as r,V as i,T as n,bS as o,aZ as a,b as l}from"./p-b54724b6.js";function h(e){return new t({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const e=[];return"tables"in t&&e.push(t.tables),"layers"in t&&e.push(t.layers),e},itemFilterFunction:t=>{const e=t.parent;return!!e&&"tables"in e&&e.tables.includes(t)}})}function d(t){for(const e of t.values())e?.destroy();t.clear()}function u(t,e,s){let r,i;if(t)for(let n=0,o=t.length;n<o;n++){if(r=t.at(n),r?.[e]===s)return r;if("group"===r?.type&&(i=u(r.layers,e,s),i))return i}}const f=t=>{let h=class extends t{constructor(...t){super(...t),this.layers=new i;const e=t=>{t.parent&&"remove"in t.parent&&t.parent.remove(t)},s=t=>{t.parent=this,this.layerAdded(t),"elevation"!==t.type&&"base-elevation"!==t.type||l.getLogger(this).error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as an operational layer and will therefore be ignored.`)},r=t=>{t.parent=null,this.layerRemoved(t)};this.addHandles([this.layers.on("before-add",(t=>e(t.item))),this.layers.on("after-add",(t=>s(t.item))),this.layers.on("after-remove",(t=>r(t.item)))])}destroy(){const t=this.layers.toArray();for(const e of t)e.destroy();this.layers.destroy()}set layers(t){this._set("layers",n(t,this._get("layers")))}add(t,e){const s=this.layers;if(e=s.getNextIndex(e),t instanceof o){const r=t;r.parent===this?this.reorder(r,e):s.add(r,e)}else a(t)?t.then((t=>{this.destroyed||this.add(t,e)})):l.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(t,e){const s=this.layers;let r=s.getNextIndex(e);t.slice().forEach((t=>{t.parent!==this?(s.add(t,r),r+=1):this.reorder(t,r)}))}findLayerById(t){return u(this.layers,"id",t)}findLayerByUid(t){return u(this.layers,"uid",t)}remove(t){return this.layers.remove(t)}removeMany(t){return this.layers.removeMany(t)}removeAll(){return this.layers.removeAll()}reorder(t,e){return this.layers.reorder(t,e)}layerAdded(t){}layerRemoved(t){}};return e([s()],h.prototype,"layers",null),h=e([r("esri.support.LayersMixin")],h),h};function c(t,e,s){if(t)for(let r=0,i=t.length;r<i;r++){const i=t.at(r);if(i[e]===s)return i;if("group"===i?.type){const t=c(i.tables,e,s);if(t)return t}}}const y=t=>{let o=class extends t{constructor(...t){super(...t),this.tables=new i,this.addHandles([this.tables.on("after-add",(t=>{const e=t.item;e.parent&&e.parent!==this&&"tables"in e.parent&&e.parent.tables.remove(e),e.parent=this,"feature"!==e.type&&l.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set("tables",n(t,this._get("tables")))}findTableById(t){return c(this.tables,"id",t)}findTableByUid(t){return c(this.tables,"uid",t)}};return e([s()],o.prototype,"tables",null),o=e([r("esri.support.TablesMixin")],o),o};export{f as d,y as l,d as n,h as t};
//# sourceMappingURL=p-1701e549.js.map