import{s as e,dt as t,du as n,bP as s,dv as o,dw as l,ck as r,bn as a,dx as m,bv as i,dy as u,dz as y,dA as b,dB as c,dC as f}from"./p-b54724b6.js";import{c as d,a as p}from"./p-21ae9bf7.js";function g(t,n,s,o){const a=t.name;return null==a?Promise.reject(new e("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?P(a,n,o):l(t,n,o).then((e=>w(r(e),a,n,s,f,o)))}function S(e,t){return t.items.find((t=>t.name===e))}function w(l,r,b,f,g,w){const P=b&&null!=b.portal?b.portal:a.getDefault(),v={portal:P,url:s(l.baseUrl),origin:"portal-item"},N=S(r,l.data);if(!N){const t=`The symbol name '${r}' could not be found`;return Promise.reject(new e("symbolstyleutils:symbol-name-not-found",t,{symbolName:r}))}let h=m(g(N,f),v),j=N.thumbnail?.href??null;const x=N.thumbnail&&N.thumbnail.imageData;d()&&(h=p(h)??"",j=p(j));const F={portal:P,url:s(o(h)),origin:"portal-item"};return t(h,w).then((e=>{const t="cimRef"===f?c(e.data):e.data,s=n(t,F);if(s&&i(s)){if(j){const e=m(j,v);s.thumbnail=new u({url:e})}else x&&(s.thumbnail=new u({url:`data:image/png;base64,${x}`}));l.styleUrl?s.styleOrigin=new y({portal:b.portal,styleUrl:l.styleUrl,name:r}):l.styleName&&(s.styleOrigin=new y({portal:b.portal,styleName:l.styleName,name:r}))}return s}))}function P(e,l,r){const m=b.replaceAll(/\{SymbolName\}/gi,e),i=null!=l.portal?l.portal:a.getDefault();return t(m,r).then((e=>{const t=c(e.data);return n(t,{portal:i,url:s(o(m)),origin:"portal-item"})}))}export{w as fetchSymbolFromStyle,S as getStyleItemFromStyle,g as resolveWebStyleSymbol};
//# sourceMappingURL=p-2a6d626a.js.map