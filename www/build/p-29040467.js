import{b as n,s as t}from"./p-b54724b6.js";import{e,n as r}from"./p-0e94eaa4.js";import{U as s,F as a,C as i}from"./p-13e550f5.js";import{t as c}from"./p-795f7c81.js";var u,o,f,l,I,d,S;!function(n){n[n.FILL=0]="FILL",n[n.LINE=1]="LINE",n[n.MARKER=2]="MARKER",n[n.TEXT=3]="TEXT",n[n.LABEL=4]="LABEL"}(u||(u={})),function(n){n[n.NONE=0]="NONE",n[n.MAP=1]="MAP",n[n.LABEL=2]="LABEL",n[n.LABEL_ALPHA=4]="LABEL_ALPHA",n[n.HITTEST=8]="HITTEST",n[n.HIGHLIGHT=16]="HIGHLIGHT",n[n.CLIP=32]="CLIP",n[n.DEBUG=64]="DEBUG",n[n.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(o||(o={})),function(n){n[n.SIZE=0]="SIZE",n[n.COLOR=1]="COLOR",n[n.OPACITY=2]="OPACITY",n[n.ROTATION=3]="ROTATION"}(f||(f={})),function(n){n[n.NONE=0]="NONE",n[n.OPACITY=1]="OPACITY",n[n.COLOR=2]="COLOR",n[n.ROTATION=4]="ROTATION",n[n.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",n[n.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",n[n.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",n[n.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(l||(l={})),function(n){n[n.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",n[n.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",n[n.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",n[n.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(I||(I={})),function(n){n[n.SPRITE=0]="SPRITE",n[n.GLYPH=1]="GLYPH"}(d||(d={})),function(n){n[n.DEFAULT=0]="DEFAULT",n[n.SIMPLE=1]="SIMPLE",n[n.DOT_DENSITY=2]="DOT_DENSITY",n[n.OUTLINE_FILL=3]="OUTLINE_FILL",n[n.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",n[n.HEATMAP=5]="HEATMAP",n[n.PIE_CHART=6]="PIE_CHART"}(S||(S={}));const E=n.getLogger("esri.views.2d.engine.webgl.Utils"),T="geometry",L=[{name:T,strideInBytes:12}],m=[{name:T,strideInBytes:36}],A=[{name:T,strideInBytes:24}],p=[{name:T,strideInBytes:12}],w=[{name:T,strideInBytes:40}],y=[{name:T,strideInBytes:36}],g=[{name:T,strideInBytes:36}];function M(n){const t={};for(const e of n)t[e.name]=e.strideInBytes;return t}const _=M([{name:T,strideInBytes:36}]),h=M(L),U=M(m),N=M(A),O=M(p),b=M(w),C=M(y),P=M(g);function v(n,t){switch(n){case u.MARKER:return t===S.HEATMAP?h:_;case u.FILL:switch(t){case S.DOT_DENSITY:return O;case S.SIMPLE:case S.OUTLINE_FILL_SIMPLE:return N;default:return U}case u.LINE:return b;case u.TEXT:return C;case u.LABEL:return P}}const D=[T],R=[T],B=[T],F=[T],H=[T];function G(n){switch(n){case u.MARKER:return D;case u.FILL:return R;case u.LINE:return B;case u.TEXT:return F;case u.LABEL:return H}}function $(n){switch(n%4){case 0:case 2:return 4;case 1:case 3:return 1}}function k(n,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(n*t/4));case 1:case 3:return new Uint8Array(n*t)}}function z(n,t){switch(t%4){case 0:case 2:return new Uint32Array(n);case 1:case 3:return new Uint8Array(n)}}function V(n){return null!=n}function Z(n){return"number"==typeof n}function j(n){switch(n){case"butt":return e.BUTT;case"round":return e.ROUND;case"square":return e.SQUARE;default:return E.error(new t("mapview-invalid-type",`Cap type ${n} is not a valid option. Defaulting to round`)),e.ROUND}}function x(n){switch(n){case"miter":return r.MITER;case"bevel":return r.BEVEL;case"round":return r.ROUND;default:return E.error(new t("mapview-invalid-type",`Join type ${n} is not a valid option. Defaulting to round`)),r.ROUND}}function Y(n){switch(n){case"opacity":return f.OPACITY;case"color":return f.COLOR;case"rotation":return f.ROTATION;case"size":return f.SIZE;default:return E.error(`Cannot interpret unknown vv: ${n}`),null}}function q(n,t,e,r,s,a,i){for(const t in a){const r=a[t].stride,i=$(r),c=a[t].data,u=e[t].data;if(null==c||null==u)continue;const o=r*s.vertexCount/i,f=r*n/i,l=r*s.vertexFrom/i;for(let n=0;n<o;++n)u[n+f]=c[n+l]}if(null!=i&&null!=r){const e=s.indexCount;for(let a=0;a<e;++a)r[a+t]=i[a+s.indexFrom]-s.vertexFrom+n}}const X={[T]:a.STATIC_DRAW};function J(n,t){const e=[];for(let r=0;r<5;++r){const s=G(r),a={};for(const n of s)a[n]={data:t(r,n)};e.push({data:n(r),buffers:a})}return e}function K(n){switch(n){case i.BYTE:case i.UNSIGNED_BYTE:return 1;case i.SHORT:case i.UNSIGNED_SHORT:return 2;case i.FLOAT:case i.INT:case i.UNSIGNED_INT:return 4}}function W(n){switch(n){case s.UNSIGNED_BYTE:return 1;case s.UNSIGNED_SHORT_4_4_4_4:return 2;case s.FLOAT:return 4;default:return void E.error(new t("webgl-utils",`Unable to handle type ${n}`))}}function Q(n){switch(n){case s.UNSIGNED_BYTE:return Uint8Array;case s.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case s.FLOAT:return Float32Array;default:return void E.error(new t("webgl-utils",`Unable to handle type ${n}`))}}function nn(n){const t={};for(const e in n){const r=n[e];let s=0;t[e]=r.map((n=>{const t=new c(n.name,n.count,n.type,s,0,n.normalized||!1);return s+=n.count*K(n.type),t})),t[e]?.forEach((n=>n.stride=s))}return t}const tn=n=>{const t=new Map;for(const e in n)for(const r of n[e])t.set(r.name,r.location);return t},en=n=>{const t={};for(const e in n){const r=n[e];t[e]=r?.length?r[0].stride:0}return t},rn=new Map,sn=(n,t)=>{if(!rn.has(n)){const e=nn(t),r={strides:en(e),bufferLayouts:e,attributes:tn(t)};rn.set(n,r)}return rn.get(n)};function an(n){n(u.FILL),n(u.LINE),n(u.MARKER),n(u.TEXT),n(u.LABEL)}const cn=n=>"path"in n&&pn(n.path),un=n=>"url"in n&&n.url||"imageData"in n&&n.imageData,on=n=>"imageData"in n&&n.imageData&&"contentType"in n&&n.contentType?`data:${n.contentType};base64,${n.imageData}`:"url"in n?n.url:null,fn=n=>null!=n&&n.startsWith("data:image/gif"),ln=n=>"url"in n&&n.url&&(n.url.includes(".gif")||fn(n.url))||"contentType"in n&&"image/gif"===n.contentType||"imageData"in n&&fn(n.imageData),In=n=>null!=n&&n.startsWith("data:image/png"),dn=n=>"url"in n&&n.url&&(n.url.includes(".png")||In(n.url))||"contentType"in n&&"image/png"===n.contentType||"imageData"in n&&In(n.imageData),Sn=n=>n.type&&n.type.toLowerCase().includes("3d");function En(n){switch(n.type){case"line":{const t=n;return"CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return"CIMSolidFill"===n.cim.type;case"esriSFS":return"esriSFSSolid"===n.style||"esriSFSNull"===n.style;case"esriSLS":return"esriSLSSolid"===n.style||"esriSLSNull"===n.style;default:return!1}}const Tn=n=>n.includes("data:image/svg+xml");function Ln(n){switch("cim"in n?n.cim.type:n.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":return!1;case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":return wn(n);default:return!0}}function mn(n){const t="maxVVSize"in n&&n.maxVVSize,e="width"in n&&n.width||"size"in n&&n.size||0;return t||e}function An(n){const t=[];for(let e=0;e<n.length;e++)t.push(n.charCodeAt(e));return t}const pn=n=>!!n&&(n=n.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(n)&&/[\dz]$/i.test(n)&&n.length>4)),wn=n=>"fill"===n.type&&"CIMMarkerPlacementInsidePolygon"===n?.cim?.markerPlacement?.type;function yn(n){return[255&n,(65280&n)>>>8,(16711680&n)>>>16,(4278190080&n)>>>24]}function gn(n,t){return 65535&n|t<<16}function Mn(n,t,e,r){return 255&n|(255&t)<<8|(255&e)<<16|r<<24}function _n(n,t=0,e=!1){const r=n[t+3];return n[t]*=r,n[t+1]*=r,n[t+2]*=r,e||(n[t+3]*=255),n}function hn(n){if(!n)return 0;const{r:t,g:e,b:r,a:s}=n;return Mn(t*s,e*s,r*s,255*s)}function Un(n){if(!n)return 0;const[t,e,r,s]=n;return Mn(t*(s/255),e*(s/255),r*(s/255),s)}function Nn(n,t,e=0){if(null==t)return n[e]=0,n[e+1]=0,n[e+2]=0,void(n[e+3]=0);const{r,g:s,b:a,a:i}=t;n[e]=r*i/255,n[e+1]=s*i/255,n[e+2]=a*i/255,n[e+3]=i}export{Z as $,I as A,u as E,$ as F,x as G,J as H,wn as I,W as K,l as L,yn as M,z as P,v as R,S,o as T,Y as V,Q as W,X as Y,d as _,un as a,Nn as b,Mn as c,mn as d,sn as e,Ln as f,Un as g,hn as h,ln as i,q as j,j as k,En as l,Tn as m,cn as n,dn as o,An as p,_n as r,on as s,an as t,Sn as u,gn as w,k as x,V as z};
//# sourceMappingURL=p-29040467.js.map