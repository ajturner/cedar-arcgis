{"version":3,"names":["j","h","_","p","constructor","s","super","this","elementView","isWrapAround","perspectiveTransform","c","_vertices","Float32Array","_handles","push","n","element","opacity","e","m","coords","requestRender","a","loaded","ready","type","content","t","load","catch","r","getLogger","error","destroy","forEach","remove","texture","i","dvsMat3","parent","beforeRender","context","HTMLImageElement","HTMLVideoElement","o","naturalWidth","videoWidth","width","naturalHeight","videoHeight","height","_updatePerspectiveTransform","paused","setData","d","WEBGL2","generateMipmap","v","wrapMode","f","CLAMP_TO_EDGE","preMultiplyAlpha","g","_createTransforms","updateDrawCoords","rings","x","y","l","set","getVAO","_vao","_geometryVbo","u","createVertex","w","DYNAMIC_DRAW","STATIC_DRAW","Uint16Array","geometry","tex","arguments","_localOrigin","_viewStateId","_dvsMat3","requiresDedicatedFBO","_updateMatrices","_updateOverlays","children","prepareRenderPasses","registerRenderPass","name","brushes","overlay","target","drawPhase","MAP","state","id","size","pixelRatio","resolution","rotation","viewpoint","displayMat3","M","Math","PI","targetGeometry","spatialReference","R","b","O","worldScreenWidth","isWrappable","abs","cos","sin","round","valid","toScreen","P","floor","C","D","toMap","bounds","_overlayContainer","_fetchQueue","_tileStrategy","_elementReferences","Map","_debugGraphicsView","layer","elements","attach","addAttachHandles","effectiveSource","refresh","_updateTile","requestUpdate","_elementUpdateHandler","container","addChild","tileInfoView","view","featuresTilingScheme","concurrency","process","_queryElements","cachePolicy","resampling","acquireTile","_acquireTile","releaseTile","_releaseTile","detach","removeAll","removeAllChildren","clear","supportsSpatialReference","moveStart","viewChange","moveEnd","update","async","normalize","projectedElement","normalizedCoords","values","mapPoint","reverse","canResume","source","reset","T","clone","updatingHandles","addPromise","key","then","setElements","_referenceElements","_dereferenceElements","abort","getTileBounds","xmin","ymin","xmax","ymax","queryElements","_referenceElement","uid","add","tiles","Set","debugGraphic","_dereferenceElement","get","delete","removeChild","graphics","has","graphicUpdateHandler","graphic","property","prototype","readOnly","isReady","visible","Array","from"],"sources":["./node_modules/@arcgis/core/views/2d/engine/webgl/Overlay.js","./node_modules/@arcgis/core/views/2d/engine/webgl/OverlayContainer.js","./node_modules/@arcgis/core/views/2d/layers/MediaLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{on as t}from\"../../../../core/events.js\";import r from\"../../../../core/Logger.js\";import{isPowerOfTwo as s}from\"../../../../core/mathUtils.js\";import{disposeMaybe as i}from\"../../../../core/maybe.js\";import{getProjectiveTransform as o}from\"../../../../core/perspectiveUtils.js\";import{watch as n,when as a,initial as m}from\"../../../../core/reactiveUtils.js\";import{c as h}from\"../../../../chunks/mat3f64.js\";import{s as l}from\"../../../../chunks/vec2.js\";import{a as c}from\"../../../../chunks/vec2f64.js\";import{DisplayObject as p}from\"../DisplayObject.js\";import{BufferObject as u}from\"../../../webgl/BufferObject.js\";import{ContextType as d}from\"../../../webgl/contextUtils.js\";import{TextureWrapMode as f,Usage as w}from\"../../../webgl/enums.js\";import{Texture as g}from\"../../../webgl/Texture.js\";import{TextureDescriptor as v}from\"../../../webgl/TextureDescriptor.js\";import{VertexArrayObject as y}from\"../../../webgl/VertexArrayObject.js\";const j=h();class _ extends p{constructor(s){super(),this.elementView=s,this.isWrapAround=!1,this.perspectiveTransform=c(),this._vertices=new Float32Array(20),this._handles=[],this._handles.push(n((()=>this.elementView.element.opacity),(e=>this.opacity=e),m),n((()=>[this.elementView.coords]),(()=>{this.requestRender()}),m),a((()=>this.elementView.element.loaded),(()=>{const e=this.elementView.element;this.ready(),\"video\"===e.type&&null!=e.content&&this._handles.push(t(e.content,\"play\",(()=>this.requestRender())))}),m)),s.element.load().catch((t=>{r.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new e(\"element-load-error\",\"Element cannot be displayed\",{element:s,error:t}))}))}destroy(){this._handles.forEach((e=>e.remove())),this.texture=i(this.texture)}get dvsMat3(){return this.parent.dvsMat3}beforeRender(e){const{context:t}=e,r=this.elementView.element.content;if(null!=r){const e=r instanceof HTMLImageElement,i=r instanceof HTMLVideoElement,o=e?r.naturalWidth:i?r.videoWidth:r.width,n=e?r.naturalHeight:i?r.videoHeight:r.height;if(this._updatePerspectiveTransform(o,n),this.texture)i&&!r.paused&&(this.texture.setData(r),this.requestRender(),(t.type===d.WEBGL2||s(o)&&s(n))&&this.texture.generateMipmap());else{const e=new v;e.wrapMode=f.CLAMP_TO_EDGE,e.preMultiplyAlpha=!0,e.width=o,e.height=n,this.texture=new g(t,e,r),(t.type===d.WEBGL2||s(o)&&s(n))&&this.texture.generateMipmap(),i&&!r.paused&&this.requestRender()}}super.beforeRender(e)}_createTransforms(){return null}updateDrawCoords(e,t){const r=this.elementView.coords;if(null==r)return;const[s,i,o,n]=r.rings[0],a=this._vertices,{x:m,y:h}=e,l=0!==t;l?a.set([i[0]-m,i[1]-h,s[0]-m,s[1]-h,o[0]-m,o[1]-h,n[0]-m,n[1]-h,n[0]-m,n[1]-h,i[0]+t-m,i[1]-h,i[0]+t-m,i[1]-h,s[0]+t-m,s[1]-h,o[0]+t-m,o[1]-h,n[0]+t-m,n[1]-h]):a.set([i[0]-m,i[1]-h,s[0]-m,s[1]-h,o[0]-m,o[1]-h,n[0]-m,n[1]-h]),this.isWrapAround=l}getVAO(e,t,r){if(null==this.elementView.coords)return null;const s=this._vertices;if(this._vao)this._geometryVbo.setData(s);else{this._geometryVbo=u.createVertex(e,w.DYNAMIC_DRAW,s);const i=u.createVertex(e,w.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new y(e,r,t,{geometry:this._geometryVbo,tex:i})}return this._vao}_updatePerspectiveTransform(e,t){const r=this._vertices;o(j,[0,0,e,0,0,t,e,t],[r[0],r[1],r[4],r[5],r[2],r[3],r[6],r[7]]),l(this.perspectiveTransform,j[6]/j[8]*e,j[7]/j[8]*t)}}export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{createScreenPoint as t}from\"../../../../core/screenUtils.js\";import{g as e,m as s,h as r,d as o,r as a}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{f as n}from\"../../../../chunks/vec2f32.js\";import{f as c}from\"../../../../chunks/vec3f32.js\";import{normalizeMapX as p}from\"../../../../geometry/support/normalizeUtils.js\";import{getInfo as d}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getWorldWidth as l}from\"../../viewpointUtils.js\";import{brushes as h}from\"../brushes.js\";import{WGLDrawPhase as m}from\"./enums.js\";import f from\"./WGLContainer.js\";class u extends f{constructor(){super(...arguments),this._localOrigin=t(0,0),this._viewStateId=-1,this._dvsMat3=i(),this.requiresDedicatedFBO=!1}get dvsMat3(){return this._dvsMat3}beforeRender(t){this._updateMatrices(t),this._updateOverlays(t,this.children);for(const e of this.children)e.beforeRender(t)}prepareRenderPasses(t){const e=t.registerRenderPass({name:\"overlay\",brushes:[h.overlay],target:()=>this.children,drawPhase:m.MAP});return[...super.prepareRenderPasses(t),e]}_updateMatrices(t){const{state:i}=t,{id:d,size:l,pixelRatio:h,resolution:m,rotation:f,viewpoint:u,displayMat3:M}=i;if(this._viewStateId===d)return;const v=Math.PI/180*f,_=h*l[0],w=h*l[1],{x:g,y}=u.targetGeometry,j=p(g,i.spatialReference);this._localOrigin.x=j,this._localOrigin.y=y;const R=m*_,b=m*w,O=e(this._dvsMat3);s(O,O,M),r(O,O,n(_/2,w/2)),o(O,O,c(_/R,-w/b,1)),a(O,O,-v),this._viewStateId=d}_updateOverlays(t,e){const{state:s}=t,{rotation:r,spatialReference:o,worldScreenWidth:a,size:i,viewpoint:n}=s,c=this._localOrigin;let p=0;const h=d(o);if(h&&o.isWrappable){const t=i[0],d=i[1],m=180/Math.PI*r,f=Math.abs(Math.cos(m)),u=Math.abs(Math.sin(m)),M=Math.round(t*f+d*u),[v,_]=h.valid,w=l(o),{x:g,y}=n.targetGeometry,j=[g,y],R=[0,0];s.toScreen(R,j);const b=[0,0];let O;O=M>a?.5*a:.5*M;const P=Math.floor((g+.5*w)/w),x=v+P*w,C=_+P*w,D=[R[0]+O,0];s.toMap(b,D),b[0]>C&&(p=w),D[0]=R[0]-O,s.toMap(b,D),b[0]<x&&(p=-w);for(const s of e){const t=s.elementView.bounds;if(null==t)continue;const[e,,r]=t;e<v&&r>v?s.updateDrawCoords(c,w):r>_&&e<_?s.updateDrawCoords(c,-w):s.updateDrawCoords(c,p)}}else for(const d of e)d.updateDrawCoords(c,p)}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import\"../../../Graphic.js\";import\"../../../renderers/ClassBreaksRenderer.js\";import\"../../../renderers/DictionaryRenderer.js\";import\"../../../renderers/DotDensityRenderer.js\";import\"../../../renderers/HeatmapRenderer.js\";import\"../../../renderers/PieChartRenderer.js\";import\"../../../renderers/Renderer.js\";import\"../../../renderers/SimpleRenderer.js\";import\"../../../renderers/UniqueValueRenderer.js\";import\"../../../renderers/support/jsonUtils.js\";import\"../../../symbols.js\";import t from\"../../../core/Collection.js\";import\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{getOrCreateMapValue as i}from\"../../../core/MapUtils.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{on as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{create as a}from\"../../../geometry/support/aaBoundingRect.js\";import{ringsContainsCoords as m}from\"../../../geometry/support/contains.js\";import{extentIntersectsPolygon as p}from\"../../../geometry/support/intersectsBase.js\";import{MediaElementView as c}from\"../../../layers/support/MediaElementView.js\";import\"../../../core/Error.js\";import\"../../../core/scheduling.js\";import\"../../../request.js\";import\"../../../config.js\";import\"../../../chunks/index2.js\";import\"../../../core/urlUtils.js\";import\"../../../chunks/index3.js\";import\"../../../layers/effects/EffectView.js\";import\"../engine/DisplayObject.js\";import\"../engine/webgl/effects/highlight/HighlightGradient.js\";import\"../engine/webgl/BufferPool.js\";import\"../engine/webgl/enums.js\";import\"../engine/webgl/brushes/BrushBitmap.js\";import\"../../../chunks/vec4f32.js\";import\"../engine/webgl/Utils.js\";import\"../engine/webgl/shaders/BackgroundPrograms.js\";import\"../../webgl/enums.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/contextUtils.js\";import\"../../../chunks/builtins.js\";import\"../engine/webgl/definitions.js\";import\"../../../core/RandomLCG.js\";import\"../engine/webgl/materialKey/MaterialKey.js\";import\"../engine/webgl/techniques/Technique.js\";import\"../engine/webgl/techniques/dotDensity/TechniqueDotDensity.js\";import\"../engine/webgl/techniques/heatmap/TechniqueHeatmap.js\";import\"../engine/webgl/techniques/pieChart/TechniquePieChart.js\";import\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/GLObjectType.js\";import\"../../webgl/Texture.js\";import\"../../webgl/VertexArrayObject.js\";import\"../engine/webgl/brushes/WGLBrushHeatmap.js\";import\"../engine/webgl/DefaultVertexAttributeLayouts.js\";import\"../engine/webgl/shaders/TileInfoPrograms.js\";import\"../engine/webgl/brushes/WGLGeometryBrushMarker.js\";import\"../../../core/mathUtils.js\";import\"../engine/webgl/number.js\";import\"../engine/vectorTiles/style/StyleDefinition.js\";import\"../../../chunks/vec2f32.js\";import\"../engine/vectorTiles/enums.js\";import\"../engine/vectorTiles/shaders/sources/resolver.js\";import\"../engine/webgl/shaders/BitBlitPrograms.js\";import\"../engine/webgl/shaders/sources/resolver.js\";import\"../engine/webgl/TextureManager.js\";import\"../engine/webgl/shaders/StencilPrograms.js\";import\"../engine/webgl/effects/BlendEffect.js\";import\"../engine/webgl/shaders/HighlightPrograms.js\";import\"../engine/webgl/Profiler.js\";import\"../../webgl/renderState.js\";import\"../../3d/webgl-engine/core/shaderModules/interfaces.js\";import\"../../../core/floatRGBA.js\";import\"../../3d/webgl-engine/lib/OrderIndependentTransparency.js\";import\"../../webgl/testSVGPremultipliedAlpha.js\";import\"../LabelManager.js\";import\"./graphics/GraphicsView2D.js\";import\"../../../core/accessorSupport/tracking/Flags.js\";import\"../engine/webgl/AttributeStoreView.js\";import\"../../../chunks/earcut.js\";import\"../../../layers/graphics/featureConversionUtils.js\";import\"../../../core/unitUtils.js\";import\"../../../renderers/support/lengthUtils.js\";import\"../../../chunks/vec3f32.js\";import\"../../../geometry/support/normalizeUtils.js\";import\"../navigation/MapViewNavigation.js\";import\"../../../core/asyncUtils.js\";import\"../engine/webgl/shaders/MagnifierPrograms.js\";import\"../tiling/PagedTileQueue.js\";import\"../tiling/TileInfoView.js\";import\"../tiling/TileKey.js\";import h from\"../tiling/TileQueue.js\";import u from\"../tiling/TileStrategy.js\";import g from\"../engine/webgl/Overlay.js\";import d from\"../engine/webgl/OverlayContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import j from\"../../layers/LayerView.js\";import y from\"../../../geometry/Extent.js\";let w=class extends(f(j)){constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this._debugGraphicsView=null,this.layer=null,this.elements=new t}attach(){this.addAttachHandles([n((()=>this.layer.effectiveSource),\"refresh\",(()=>{this._tileStrategy.refresh((e=>this._updateTile(e))),this.requestUpdate()})),n((()=>this.layer.effectiveSource),\"change\",(({element:e})=>this._elementUpdateHandler(e)))]),this._overlayContainer=new d,this.container.addChild(this._overlayContainer),this._fetchQueue=new h({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t)}),this._tileStrategy=new u({cachePolicy:\"purge\",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear(),this._debugGraphicsView?.destroy()}supportsSpatialReference(e){return!0}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){this._tileStrategy.update(e),this._debugGraphicsView?.update(e)}async hitTest(e,t){const r=[],i=e.normalize(),s=[i.x,i.y];for(const{projectedElement:{normalizedCoords:n,element:o}}of this._elementReferences.values())null!=n&&m(n.rings,s)&&r.push({type:\"media\",element:o,layer:this.layer,mapPoint:e});return r.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updateTile(e)))}_acquireTile(e){const t=new T(e.clone());return this._updateTile(t),t}_updateTile(e){this.updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[r,i]=e.setElements(t);this._referenceElements(e,r),this._dereferenceElements(e,i),this.requestUpdate()}),(e=>{s(e)||r.getLogger(this).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._dereferenceElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const r=this.layer.effectiveSource;if(null==r)return[];this.view.featuresTilingScheme.getTileBounds(b,e,!0);const i=new y({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:this.view.spatialReference});return r.queryElements(i,t)}_referenceElements(e,t){if(null!=this.layer.source)for(const r of t)this._referenceElement(e,r)}_referenceElement(e,t){i(this._elementReferences,t.uid,(()=>{const e=new c({element:t,spatialReference:this.view.spatialReference}),r=new g(e);this._overlayContainer.addChild(r),this.elements.add(t);let i=null;return{tiles:new Set,projectedElement:e,overlay:r,debugGraphic:i}})).tiles.add(e)}_dereferenceElements(e,t){for(const r of t)this._dereferenceElement(e,r)}_dereferenceElement(e,t){const r=this._elementReferences.get(t.uid);r.tiles.delete(e),r.tiles.size||(this._overlayContainer.removeChild(r.overlay),r.overlay.destroy(),r.projectedElement.destroy(),this._elementReferences.delete(t.uid),this.elements.remove(t),this._debugGraphicsView?.graphics.remove(r.debugGraphic))}_elementUpdateHandler(e){let t=this._elementReferences.get(e.uid);if(t){const r=t.projectedElement.normalizedCoords;if(null==r)return this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.projectedElement.destroy(),this._elementReferences.delete(e.uid),this.elements.remove(e),void this._debugGraphicsView?.graphics.remove(t.debugGraphic);const i=[],s=[];for(const e of this._tileStrategy.tiles){const n=v(this.view.featuresTilingScheme,e,r);t.tiles.has(e)?n||s.push(e):n&&i.push(e)}for(const t of i)this._referenceElement(t,e);for(const t of s)this._dereferenceElement(t,e);return t=this._elementReferences.get(e.uid),void(t?.debugGraphic&&(t.debugGraphic.geometry=t.projectedElement.normalizedCoords,this._debugGraphicsView.graphicUpdateHandler({graphic:t.debugGraphic,property:\"geometry\"})))}const r=new c({element:e,spatialReference:this.view.spatialReference}).normalizedCoords;if(null!=r)for(const i of this._tileStrategy.tiles){v(this.view.featuresTilingScheme,i,r)&&this._referenceElement(i,e)}}};e([o()],w.prototype,\"_fetchQueue\",void 0),e([o()],w.prototype,\"layer\",void 0),e([o({readOnly:!0})],w.prototype,\"elements\",void 0),w=e([l(\"esri.views.2d.layers.MediaLayerView2D\")],w);const b=a(),_={xmin:0,ymin:0,xmax:0,ymax:0};function v(e,t,r){return e.getTileBounds(b,t.key,!0),_.xmin=b[0],_.ymin=b[1],_.xmax=b[2],_.ymax=b[3],p(_,r)}class T{constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}setElements(e){const t=[],r=new Set(this.elements);this.elements=e;for(const i of e)r.has(i)?r.delete(i):t.push(i);return this.isReady=!0,[t,Array.from(r)]}destroy(){}}const R=w;export{R as default};\n"],"mappings":"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"}