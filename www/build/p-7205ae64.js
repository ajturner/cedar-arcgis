import{Q as n,E as r,ap as t,d as a,A as e,aq as i,S as o,V as u,ar as s,as as c,at as f,au as d,av as m,aw as p,ax as w,ay as l,I as v}from"./p-122f2dcc.js";import{t as y,e as h}from"./p-623dbe5e.js";import"./p-b54724b6.js";import"./p-2f568dc7.js";import"./p-70146138.js";import"./p-a3f0a5f3.js";import"./p-e6a64715.js";import"./p-dc29c329.js";function j(n,r){return n&&n.domain?"coded-value"===n.domain.type||"codedValue"===n.domain.type?e.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:i[n.field.type],codedValues:n.domain.codedValues.map((n=>({name:n.name,code:n.code})))},o(r)):e.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:i[n.field.type],min:n.domain.min,max:n.domain.max},o(r)):null}function x(i){"async"===i.mode&&(i.functions.domain=function(e,o){return i.standardFunctionAsync(e,o,(async(i,c,f)=>{if(n(f,2,3,e,o),r(f[0])){return j(t(f[0],a(f[1]),void 0===f[2]?void 0:f[2]),e)}if(u(f[0])){await f[0]._ensureLoaded();return j(s(a(f[1]),f[0],null,void 0===f[2]?void 0:f[2]),e)}throw new y(e,h.InvalidParameter,o)}))},i.functions.subtypes=function(t,a){return i.standardFunctionAsync(t,a,(async(i,s,f)=>{if(n(f,1,1,t,a),r(f[0])){const n=c(f[0]);return n?e.convertObjectToArcadeDictionary(n,o(t)):null}if(u(f[0])){await f[0]._ensureLoaded();const n=f[0].subtypes();return n?e.convertObjectToArcadeDictionary(n,o(t)):null}throw new y(t,h.InvalidParameter,a)}))},i.functions.domainname=function(t,e){return i.standardFunctionAsync(t,e,(async(i,o,c)=>{if(n(c,2,4,t,e),r(c[0]))return f(c[0],a(c[1]),c[2],void 0===c[3]?void 0:c[3]);if(u(c[0])){await c[0]._ensureLoaded();const n=s(a(c[1]),c[0],null,void 0===c[3]?void 0:c[3]);return d(n,c[2])}throw new y(t,h.InvalidParameter,e)}))},i.signatures.push({name:"domainname",min:2,max:4}),i.functions.domaincode=function(t,e){return i.standardFunctionAsync(t,e,(async(i,o,c)=>{if(n(c,2,4,t,e),r(c[0]))return m(c[0],a(c[1]),c[2],void 0===c[3]?void 0:c[3]);if(u(c[0])){await c[0]._ensureLoaded();const n=s(a(c[1]),c[0],null,void 0===c[3]?void 0:c[3]);return p(n,c[2])}throw new y(t,h.InvalidParameter,e)}))},i.signatures.push({name:"domaincode",min:2,max:4})),i.functions.text=function(r,t){return i.standardFunctionAsync(r,t,((a,e,i)=>{if(n(i,1,2,r,t),!u(i[0]))return w(i[0],i[1]);{const n=v(i[1],"");if(""===n)return i[0].castToText();if("schema"===n.toLowerCase())return i[0].convertToText("schema",a.abortSignal);if("featureset"===n.toLowerCase())return i[0].convertToText("featureset",a.abortSignal)}}))},i.functions.gdbversion=function(t,a){return i.standardFunctionAsync(t,a,(async(e,i,o)=>{if(n(o,1,1,t,a),r(o[0]))return o[0].gdbVersion();if(u(o[0])){return(await o[0].load()).gdbVersion}throw new y(t,h.InvalidParameter,a)}))},i.functions.schema=function(t,a){return i.standardFunctionAsync(t,a,(async(i,s,c)=>{if(n(c,1,1,t,a),u(c[0]))return await c[0].load(),e.convertObjectToArcadeDictionary(c[0].schema(),o(t));if(r(c[0])){const n=l(c[0]);return n?e.convertObjectToArcadeDictionary(n,o(t)):null}throw new y(t,h.InvalidParameter,a)}))}}export{x as registerFunctions};
//# sourceMappingURL=p-7205ae64.js.map