{"version":3,"names":["n","t","I","o","u","l","lengths","length","N","originPosition","coords","s","c","f","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","i","h","g","e","push","sort","r","b","E","m","Math","sqrt","x","y","z","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","rings","paths","points","p","async","Array","isArray","map","geometry","spatialReference","filter","source","dest","bind","a","_","constructor","this","_jobs","_timer","_process","geometries","inSpatialReference","outSpatialReference","resolve","Promise","setTimeout","shift","j","M"],"sources":["./node_modules/@arcgis/core/layers/graphics/centroid.js","./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(t,I,o,u,l){if(null==I||!I.lengths.length)return null;const N=\"upperLeft\"===l?.originPosition?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:i}=I,h=n(o,u);let g=0;for(const n of T){const t=e(f,i,g,n,o,u,N);t&&c.push(t),g+=n*h}if(c.sort(((n,t)=>{let e=N*n[2]-N*t[2];return 0===e&&o&&(e=n[4]-t[4]),e})),c.length){let n=6*c[0][2];s[0]=c[0][0]/n,s[1]=c[0][1]/n,o&&(n=6*c[0][4],s[2]=0!==n?c[0][3]/n:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const n=I.lengths[0]?r(i,0,T[0],o,u):null;if(!n)return null;s[0]=n[0],s[1]=n[1],o&&n.length>2&&(s[2]=n[2])}return t}function e(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,T=0,i=0,h=0,g=0;for(let n=0,b=I-1;n<b;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,T+=(r+l)*E,o&&(E=n*N-u*I,i+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,T,.5*h];return o&&(E[3]=i,E[4]=.5*g),E}function r(t,e,r,N,s){const c=n(N,s);let f=e,T=e+c,i=0,h=0,g=0,E=0;for(let n=0,b=r-1;n<b;n++,f+=c,T+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[T],c=t[T+1],b=t[T+2],m=N?o(n,e,r,s,c,b):I(n,e,s,c);if(m)if(i+=m,N){const t=l(n,e,r,s,c,b);h+=m*t[0],g+=m*t[1],E+=m*t[2]}else{const t=u(n,e,s,c);h+=m*t[0],g+=m*t[1]}}return i>0?N?[h/i,g/i,E/i]:[h/i,g/i]:r>0?N?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function I(n,t,e,r){const I=e-n,o=r-t;return Math.sqrt(I*I+o*o)}function o(n,t,e,r,I,o){const u=r-n,l=I-t,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function u(n,t,e,r){return[n+.5*(e-n),t+.5*(r-t)]}function l(n,t,e,r,I,o){return[n+.5*(r-n),t+.5*(I-t),e+.5*(o-e)]}export{t as getCentroidOptimizedGeometry,r as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isSome as s}from\"../../../core/arrayUtils.js\";import{initializeProjection as t,projectMany as e}from\"../../../geometry/projection.js\";import{jsonAdapter as n}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as r,equals as i,isWebMercator as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as a,xyToLngLat as m,canProject as u}from\"../../../geometry/support/webMercatorUtils.js\";const l=[0,0];function h(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,l),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,l),[e.xmax,e.ymax]=s(t.xmax,t.ymax,l),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:c(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:c(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:p(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function c(s,t){const e=[];for(const n of s)e.push(p(n,t));return e}function p(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function f(e,n){if(!e||!n)return;const r=Array.isArray(e)?e.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(s):[e];await t(r.map((s=>({source:s,dest:n}))))}const x=h.bind(null,a),y=h.bind(null,m);function g(s,t,a,m){if(!s)return s;if(a||(a=t,t=s.spatialReference),!r(t)||!r(a)||i(t,a))return s;if(u(t,a)){const t=o(a)?x(s):y(s);return t.spatialReference=a,t}return e(n,[s],t,a,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,e){if(!s||!s.length||!t||!e||i(t,e))return s;const n={geometries:s,inSpatialReference:t,outSpatialReference:e,resolve:null};return this._jobs.push(n),new Promise((s=>{n.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:a}=s;u(r,i)?o(i)?a(t.map(x)):a(t.map(y)):a(e(n,t,r,i,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const j=new _;function M(s,t,e){return j.push(s,t,e)}export{f as checkProjectionSupport,g as project,M as projectMany};\n"],"mappings":"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"}