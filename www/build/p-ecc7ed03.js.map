{"version":3,"names":["e","t","r","n","o","length","includes","charAt","i","indexOf","substr","push","l","attributes","s","c","String","toLowerCase","toUpperCase","a","Math","ceil","u","f","y","M","C","m","b","p","d","I","h","floor","abs","sqrt","g","data","symbol","type","isNaN","tintColor","import","S","style","weight","k","underline","strikethrough","P","symbolLayers","color","w","L","width","x","G","A","Object","keys","map","name","alias","F"],"sources":["./node_modules/@arcgis/core/symbols/cim/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction e(e){return\"function\"==typeof e}function t(t,r,n,o){return e(t)?t(r,n,o):t}function r(e){return[e.r,e.g,e.b,e.a]}const n=\" /-,\\n\";function o(e){let t=e.length;for(;t--;)if(!n.includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf(\"[\",n),i>=n){if(i>n){const t=e.substr(n,i-n);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf(\"]\",n),i>=n){if(i>n){const o=t[e.substr(n,i-n)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length-1){const t=e.substr(n);r.push([t,null,o(t)])}return r}function l(e,t,r){let n=\"\",o=null;for(const i of t){const[t,r,l]=i;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{const t=e.attributes[r];t&&(o&&(n+=o,o=null),n+=t)}}return s(n,r)}function c(e,t,r){const n=i(t,e);return e=>l(e,n,r)}function s(e,t){switch(\"string\"!=typeof e&&(e=String(e)),t){case\"LowerCase\":return e.toLowerCase();case\"Allcaps\":return e.toUpperCase();default:return e}}function a(e,t,r,n,o,i,l=!0){const c=t/o,s=r/i,a=Math.ceil(c/2),u=Math.ceil(s/2);for(let f=0;f<i;f++)for(let r=0;r<o;r++){const y=4*(r+(l?i-f-1:f)*o);let M=0,C=0,m=0,b=0,p=0,d=0,I=0;const h=(f+.5)*s;for(let n=Math.floor(f*s);n<(f+1)*s;n++){const o=Math.abs(h-(n+.5))/u,i=(r+.5)*c,l=o*o;for(let s=Math.floor(r*c);s<(r+1)*c;s++){let r=Math.abs(i-(s+.5))/a;const o=Math.sqrt(l+r*r);o>=-1&&o<=1&&(M=2*o*o*o-3*o*o+1,M>0&&(r=4*(s+n*t),I+=M*e[r+3],m+=M,e[r+3]<255&&(M=M*e[r+3]/250),b+=M*e[r],p+=M*e[r+1],d+=M*e[r+2],C+=M))}}n[y]=b/C,n[y+1]=p/C,n[y+2]=d/C,n[y+3]=I/m}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function f(e){return e.data?.symbol??null}function y(e){return\"CIMVectorMarker\"===e.type||\"CIMPictureMarker\"===e.type||\"CIMBarChartMarker\"===e.type||\"CIMCharacterMarker\"===e.type||\"CIMPieChartMarker\"===e.type||\"CIMStackedBarChartMarker\"===e.type}function M(e){return\"CIMGradientStroke\"===e.type||\"CIMPictureStroke\"===e.type||\"CIMSolidStroke\"===e.type}function C(e){return null!=e&&(\"CIMGradientFill\"===e.type||\"CIMHatchFill\"===e.type||\"CIMPictureFill\"===e.type||\"CIMSolidFill\"===e.type||\"CIMWaterFill\"===e.type)}function m(e){return null!=e&&(\"CIMMarkerPlacementAlongLineRandomSize\"===e.type||\"CIMMarkerPlacementAlongLineSameSize\"===e.type||\"CIMMarkerPlacementAlongLineVariableSize\"===e.type||\"CIMMarkerPlacementAtExtremities\"===e.type||\"CIMMarkerPlacementAtMeasuredUnits\"===e.type||\"CIMMarkerPlacementAtRatioPositions\"===e.type||\"CIMMarkerPlacementOnLine\"===e.type||\"CIMMarkerPlacementOnVertices\"===e.type)}const b=(e,t=0)=>null==e||isNaN(e)?t:e,p=e=>e.tintColor?u(e.tintColor):{r:255,g:255,b:255,a:1},d=e=>{if(!e)return!1;for(const t of e)switch(t.type){case\"CIMGeometricEffectBuffer\":case\"CIMGeometricEffectOffset\":case\"CIMGeometricEffectDonut\":return!0}return!1};function I(){return import(\"../../geometry/geometryEngineJSON.js\")}function h(e){if(!e)return\"normal\";switch(e.toLowerCase()){case\"italic\":return\"italic\";case\"oblique\":return\"oblique\";default:return\"normal\"}}function g(e){if(!e)return\"normal\";switch(e.toLowerCase()){case\"bold\":return\"bold\";case\"bolder\":return\"bolder\";case\"lighter\":return\"lighter\";default:return\"normal\"}}function S(e){let t=\"normal\",r=\"normal\";if(e){const n=e.toLowerCase();n.includes(\"italic\")?t=\"italic\":n.includes(\"oblique\")&&(t=\"oblique\"),n.includes(\"bold\")?r=\"bold\":n.includes(\"light\")&&(r=\"lighter\")}return{style:t,weight:r}}function k(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function P(e){if(!e)return null;switch(e.type){case\"CIMPolygonSymbol\":if(e.symbolLayers)for(const t of e.symbolLayers){const e=P(t);if(null!=e)return e}break;case\"CIMTextSymbol\":return P(e.symbol);case\"CIMSolidFill\":return e.color}}function w(e){if(e)switch(e.type){case\"CIMPolygonSymbol\":case\"CIMLineSymbol\":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case\"CIMTextSymbol\":return w(e.symbol);case\"CIMSolidStroke\":return e.color}}function L(e){if(e)switch(e.type){case\"CIMPolygonSymbol\":case\"CIMLineSymbol\":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(void 0!==e)return e}break;case\"CIMTextSymbol\":return L(e.symbol);case\"CIMSolidStroke\":case\"CIMGradientStroke\":case\"CIMPictureStroke\":return e.width}}function x(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":case\"Justify\":return\"center\"}}function G(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function A(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}const F=e=>e.includes(\"data:image/svg+xml\");function O(e){if(!e)return null;switch(e.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}export{s as adjustTextCase,i as analyzeTextParts,l as assignTextValuesFromFeature,A as attributesToFields,r as colorToArray,c as createLabelOverrideFunction,t as evaluateValueOrFunction,u as fromCIMColor,k as fromCIMFontDecoration,S as fromCIMFontStyle,x as fromCIMHorizontalAlignment,G as fromCIMVerticalAlignment,P as getFillColor,h as getFontStyle,g as getFontWeight,w as getStrokeColor,L as getStrokeWidth,p as getTintColor,b as getValue,I as importGeometryEngine,C as isCIMFill,y as isCIMMarker,m as isCIMMarkerStrokePlacement,M as isCIMStroke,e as isFeatureValueFn,d as isGeometryEngineRequired,F as isSVGImage,O as mapCIMSymbolToGeometryType,a as resampleHermite,f as toCIMSymbolJSON};\n"],"mappings":"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"}