{"version":3,"names":["j","t","e","r","n","s","name","Promise","reject","l","styleName","U","p","then","d","o","b","h","items","find","c","portal","m","getDefault","N","url","baseUrl","origin","w","data","symbolName","S","i","D","thumbnail","href","O","imageData","P","f","y","a","g","styleUrl","styleOrigin","u","replaceAll"],"sources":["./node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import l from\"../../core/Error.js\";import{unwrapOrThrow as o}from\"../../core/maybe.js\";import{urlToObject as n,removeFile as s}from\"../../core/urlUtils.js\";import m from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as a}from\"./jsonUtils.js\";import u from\"./StyleOrigin.js\";import{fetchStyle as p,requestJSON as f,makeCIMSymbolRef as y,Style2DUrlTemplate as c,symbolUrlFromStyleItem as b}from\"./styleUtils.js\";import{Thumbnail as g}from\"./Thumbnail.js\";function j(t,e,r,n){const s=t.name;return null==s?Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?U(s,e,n):p(t,e,n).then((t=>d(o(t),s,e,r,b,n)))}function h(t,e){return e.items.find((e=>e.name===t))}function d(o,p,c,b,j,d){const U=c&&null!=c.portal?c.portal:m.getDefault(),N={portal:U,url:n(o.baseUrl),origin:\"portal-item\"},w=h(p,o.data);if(!w){const t=`The symbol name '${p}' could not be found`;return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:p}))}let S=i(j(w,b),N),D=w.thumbnail?.href??null;const O=w.thumbnail&&w.thumbnail.imageData;e()&&(S=r(S)??\"\",D=r(D));const P={portal:U,url:n(s(S)),origin:\"portal-item\"};return f(S,d).then((e=>{const r=\"cimRef\"===b?y(e.data):e.data,l=a(r,P);if(l&&t(l)){if(D){const t=i(D,N);l.thumbnail=new g({url:t})}else O&&(l.thumbnail=new g({url:`data:image/png;base64,${O}`}));o.styleUrl?l.styleOrigin=new u({portal:c.portal,styleUrl:o.styleUrl,name:p}):o.styleName&&(l.styleOrigin=new u({portal:c.portal,styleName:o.styleName,name:p}))}return l}))}function U(t,e,r){const l=c.replaceAll(/\\{SymbolName\\}/gi,t),o=null!=e.portal?e.portal:m.getDefault();return f(l,r).then((t=>{const e=y(t.data);return a(e,{portal:o,url:n(s(l)),origin:\"portal-item\"})}))}export{d as fetchSymbolFromStyle,h as getStyleItemFromStyle,j as resolveWebStyleSymbol};\n"],"mappings":"+LAIkoB,SAASA,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEJ,EAAEK,KAAK,OAAO,MAAMD,EAAEE,QAAQC,OAAO,IAAIC,EAAE,uDAAuD,2CAA2CR,EAAES,WAAW,4BAA4BT,EAAES,UAAUC,EAAEN,EAAEH,EAAEE,GAAGQ,EAAEX,EAAEC,EAAEE,GAAGS,MAAMZ,GAAGa,EAAEC,EAAEd,GAAGI,EAAEH,EAAEC,EAAEa,EAAEZ,IAAI,CAAC,SAASa,EAAEhB,EAAEC,GAAG,OAAOA,EAAEgB,MAAMC,MAAMjB,GAAGA,EAAEI,OAAOL,GAAG,CAAC,SAASa,EAAEC,EAAEH,EAAEQ,EAAEJ,EAAEhB,EAAEc,GAAG,MAAMH,EAAES,GAAG,MAAMA,EAAEC,OAAOD,EAAEC,OAAOC,EAAEC,aAAaC,EAAE,CAACH,OAAOV,EAAEc,IAAIrB,EAAEW,EAAEW,SAASC,OAAO,eAAeC,EAAEX,EAAEL,EAAEG,EAAEc,MAAM,IAAID,EAAE,CAAC,MAAM3B,EAAE,oBAAoBW,wBAAwB,OAAOL,QAAQC,OAAO,IAAIC,EAAE,yCAAyCR,EAAE,CAAC6B,WAAWlB,IAAI,CAAC,IAAImB,EAAEC,EAAEhC,EAAE4B,EAAEZ,GAAGQ,GAAGS,EAAEL,EAAEM,WAAWC,MAAM,KAAK,MAAMC,EAAER,EAAEM,WAAWN,EAAEM,UAAUG,UAAUnC,MAAM6B,EAAE5B,EAAE4B,IAAI,GAAGE,EAAE9B,EAAE8B,IAAI,MAAMK,EAAE,CAACjB,OAAOV,EAAEc,IAAIrB,EAAEC,EAAE0B,IAAIJ,OAAO,eAAe,OAAOY,EAAER,EAAEjB,GAAGD,MAAMX,IAAI,MAAMC,EAAE,WAAWa,EAAEwB,EAAEtC,EAAE2B,MAAM3B,EAAE2B,KAAKpB,EAAEgC,EAAEtC,EAAEmC,GAAG,GAAG7B,GAAGR,EAAEQ,GAAG,CAAC,GAAGwB,EAAE,CAAC,MAAMhC,EAAE+B,EAAEC,EAAET,GAAGf,EAAEyB,UAAU,IAAIQ,EAAE,CAACjB,IAAIxB,GAAG,MAAMmC,IAAI3B,EAAEyB,UAAU,IAAIQ,EAAE,CAACjB,IAAI,yBAAyBW,OAAOrB,EAAE4B,SAASlC,EAAEmC,YAAY,IAAIC,EAAE,CAACxB,OAAOD,EAAEC,OAAOsB,SAAS5B,EAAE4B,SAASrC,KAAKM,IAAIG,EAAEL,YAAYD,EAAEmC,YAAY,IAAIC,EAAE,CAACxB,OAAOD,EAAEC,OAAOX,UAAUK,EAAEL,UAAUJ,KAAKM,IAAI,CAAC,OAAOH,CAAE,GAAE,CAAC,SAASE,EAAEV,EAAEC,EAAEC,GAAG,MAAMM,EAAEW,EAAE0B,WAAW,mBAAmB7C,GAAGc,EAAE,MAAMb,EAAEmB,OAAOnB,EAAEmB,OAAOC,EAAEC,aAAa,OAAOgB,EAAE9B,EAAEN,GAAGU,MAAMZ,IAAI,MAAMC,EAAEsC,EAAEvC,EAAE4B,MAAM,OAAOY,EAAEvC,EAAE,CAACmB,OAAON,EAAEU,IAAIrB,EAAEC,EAAEI,IAAIkB,OAAO,eAAgB,GAAE,Q"}