import{aI as t,aL as n,aT as e,aK as o,a$ as r,R as s,b7 as i,a6 as l,aJ as a,s as f,fq as c,fr as u,fs as h,ft as x,fu as m,aU as M,fv as p}from"./p-b54724b6.js";var y;function w(t,n,e){return!a(t,n,e)}function d(n,e,o){const r=w(n,e,o);if(r&&!t())throw new f("rasterprojectionhelper-project","projection engine is not loaded");return r}!function(t){t[t.None=0]="None",t[t.North=1]="North",t[t.South=2]="South",t[t.Both=3]="Both"}(y||(y={}));const R=(t,n,e,o=0)=>{if(1===e[0])return[0,0];let r=1,s=-1,i=1,l=-1;for(let n=0;n<t.length;n+=2)isNaN(t[n])||(r=r>t[n]?t[n]:r,s=s>t[n]?s:t[n],i=i>t[n+1]?t[n+1]:i,l=l>t[n+1]?l:t[n+1]);const{cols:a,rows:f}=n,c=(s-r)/a/e[0],u=(l-i)/f/e[1],h=2*o;let x=0,m=!1,M=[0,0];for(let n=0;n<a-3;n++){for(let e=0;e<f-3;e++){const o=n*f*2+2*e,r=(t[o]+t[o+4]+t[o+4*f]+t[o+4*f+4])/4,s=(t[o+1]+t[o+5]+t[o+4*f+1]+t[o+4*f+5])/4,i=Math.abs((r-t[o+2*f+2])/c),l=Math.abs((s-t[o+2*f+3])/u);if(i+l>x&&(x=i+l,M=[i,l]),h&&x>h){m=!0;break}}if(m)break}return M},g={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},N=32,S=4,b=S,v=new Map,P=new Map,C=500;async function k(){t()||await n()}function T(t,n,e){d(t.spatialReference,n);return e?p(n,t.spatialReference,t):p(t.spatialReference,n,t)}function j(t,n,s,i=null){const l=t.spatialReference;if(l.equals(n))return t;d(l,n,i);const a=s.center,f=new e({xmin:a.x-t.x/2,xmax:a.x+t.x/2,ymin:a.y-t.y/2,ymax:a.y+t.y/2,spatialReference:l}),c=o(f,n,i),u=D(n);let h;if(null==c||null!=u&&c.width>=u){const e=r(l)/r(n);h={x:t.x*e,y:t.y*e}}else h={x:c.width,y:c.height};return h}function z(t,n=.01){return r(t)?n/r(t):0}function E(t,n,e=null,r=!0){const s=t.spatialReference;if(s.equals(n))return t;d(s,n,e);const i=o(t,n,e);return r&&i?(L([t],[i],s,n),i):i}function L(t,n,e,o){const r=H(e,!0),s=H(o,!0),i=z(e,C),l=z(o,C);if(i&&null!=r&&null!=s)for(let e=0;e<t.length;e++){const o=n[e];if(!o)continue;const{x:a}=t[e],{x:f}=o;f>=s[1]-l&&Math.abs(a-r[0])<i?o.x-=s[1]-s[0]:f<=s[0]+l&&Math.abs(a-r[1])<i&&(o.x+=s[1]-s[0])}}function W(t){const{inSR:n,outSR:e,datumTransformation:o,preferPE:r}=t;if(n.equals(e)){const{points:n}=O(t,null);return n}if(n.isWebMercator&&e.isWGS84||n.isWGS84&&e.isWebMercator)return A(t);if(d(n,e,o)&&r){if(n.isGeographic)return I(t);if(null!=B(n))return I(t)}return F(t)}function F(t){const{points:n}=O(t,null),{inSR:e,outSR:r,datumTransformation:s}=t,i=n.map((t=>new l(t[0],t[1],e))),a=o(i,r,s);return s&&L(i,a,e,r),a.map((t=>t?[t.x,t.y]:[NaN,NaN]))}function I(t){const{inSR:n,outSR:e,datumTransformation:o}=t,r=B(n),{points:s,mask:i}=O(t,r);if(!n.isGeographic){const t=n.wkid?c.coordsys(n.wkid):c.fromString(n.isGeographic?u.PE_TYPE_GEOGCS:u.PE_TYPE_PROJCS,n.wkt);h.projToGeog(t,s.length,s)}if(null!=o&&o.steps.length){let t;const n=179.9955;if(e.isGeographic&&(t=s.map((([t])=>t>n?1:t<-n?-1:0))),o.steps.forEach((t=>{const n=t.wkid?c.geogtran(t.wkid):c.fromString(u.PE_TYPE_GEOGTRAN,t.wkt);x.geogToGeog(n,s.length,s,null,t.isInverse?u.PE_TRANSFORM_2_TO_1:u.PE_TRANSFORM_1_TO_2)})),t)for(let e=0;e<s.length;e++){const o=t[e],r=s[e][0],i=r>n?1:r<-n?-1:0;o&&i&&o!==i&&(s[e][0]=o>0?r+360:r-360)}}if(!e.isGeographic){const t=B(e,!0),n=null!=t&&t.isEnvelope?[t.bbox[1],t.bbox[3]]:[-90,90];U(s,n);const o=e.wkid?c.coordsys(e.wkid):c.fromString(e.isGeographic?u.PE_TYPE_GEOGCS:u.PE_TYPE_PROJCS,e.wkt);h.geogToProj(o,s.length,s)}let l=s;if(i&&s.length!==i.length){l=[];for(let t=0,n=0;t<i.length;t++)i[t]?l.push(s[n++]):l.push([NaN,NaN])}return l}function A(t){const{cols:n,rows:e,xres:r,yres:s,usePixelCenter:i,inSR:a,outSR:f}=t;let{xmin:c,ymax:u}=t;i&&(c+=r/2,u-=s/2);const h=[],x=[],m=Math.max(n,e);for(let t=0;t<m;t++){const i=c+r*Math.min(n,t),m=u-s*Math.min(e,t),M=o(new l({x:i,y:m,spatialReference:a}),f);t<=n&&h.push(M.x),t<=e&&x.push(M.y)}const M=[];for(let t=0;t<n;t++)for(let n=0;n<e;n++)M.push([h[t],x[n]]);return M}function B(t,n=!1){let e=t.wkid||t.wkt;if(!e||t.isGeographic)return null;if(e=String(e),v.has(e)){const t=v.get(e);return n?t?.gcs:t?.pcs}const o=t.wkid?c.coordsys(t.wkid):c.fromString(t.isGeographic?u.PE_TYPE_GEOGCS:u.PE_TYPE_PROJCS,t.wkt),r=X(o,z(t,1e-4)),s=X(o,0,!0);return v.set(e,{pcs:r,gcs:s}),n?s:r}function X(t,n=0,e=!1){const o=m.generate(t),r=e?t.horizonGcsGenerate():t.horizonPcsGenerate();if(!o||!r?.length)return null;let s=!1,i=r.find((t=>1===t.getInclusive()&&1===t.getKind()));if(!i){if(i=r.find((t=>1===t.getInclusive()&&0===t.getKind())),!i)return null;s=!0}const l=e?0:(2===o.getNorthPoleLocation()?1:0)|(2===o.getSouthPoleLocation()?2:0),a=o.isPannableRectangle(),f=i.getCoord();if(s)return{isEnvelope:s,isPannable:a,vertices:f,coef:null,bbox:[f[0][0]-n,f[0][1]-n,f[1][0]+n,f[1][1]+n],poleLocation:l};let c=0;const u=[];let[h,x]=f[0],[M,p]=f[0];for(let t=0,n=f.length;t<n;t++){c++,c===n&&(c=0);const[e,o]=f[t],[r,s]=f[c];if(s===o)u.push([e,r,o,s,2]);else{const t=(r-e)/(s-o||1e-4),n=e-t*o;o<s?u.push([t,n,o,s,0]):u.push([t,n,s,o,1])}h=h<e?h:e,x=x<o?x:o,M=M>e?M:e,p=p>o?p:o}return{isEnvelope:!1,isPannable:a,vertices:f,coef:u,bbox:[h,x,M,p],poleLocation:l}}function O(t,n){const e=[],{cols:o,rows:r,xres:s,yres:i,usePixelCenter:l}=t;let{xmin:a,ymax:f}=t;if(l&&(a+=s/2,f-=i/2),null==n){for(let t=0;t<o;t++)for(let n=0;n<r;n++)e.push([a+s*t,f-i*n]);return{points:e}}const c=new Uint8Array(o*r);if(n.isEnvelope){const{bbox:[t,l,u,h]}=n;for(let x=0,m=0;x<o;x++){const o=a+s*x,M=n.isPannable||o>=t&&o<=u;for(let t=0;t<r;t++,m++){const n=f-i*t;M&&n>=l&&n<=h&&(e.push([o,n]),c[m]=1)}}return{points:e,mask:c}}const u=n.coef,h=[];for(let t=0;t<r;t++){const n=f-i*t,e=[],o=[];for(let t=0;t<u.length;t++){const[r,s,i,l,a]=u[t];if(n===i&&i===l)e.push(r),e.push(s),o.push(2),o.push(2);else if(n>=i&&n<=l){const t=r*n+s;e.push(t),o.push(a)}}let r=e;if(e.length>2){let t=2===o[0]?0:o[0],n=e[0];r=[];for(let s=1;s<o.length;s++)2===o[s]&&s!==o.length-1||(o[s]!==t&&(r.push(0===t?Math.min(n,e[s-1]):Math.max(n,e[s-1])),t=o[s],n=e[s]),s===o.length-1&&r.push(0===o[s]?Math.min(n,e[s]):Math.max(n,e[s])));r.sort(((t,n)=>t-n))}else e[0]>e[1]&&(r=[e[1],e[0]]);h.push(r)}for(let t=0,n=0;t<o;t++){const o=a+s*t;for(let t=0;t<r;t++,n++){const r=f-i*t,s=h[t];if(2===s.length)o>=s[0]&&o<=s[1]&&(e.push([o,r]),c[n]=1);else if(s.length>2){let t=!1;for(let n=0;n<s.length;n+=2)if(o>=s[n]&&o<=s[n+1]){t=!0;break}t&&(e.push([o,r]),c[n]=1)}}}return{points:e,mask:c}}function U(t,n){const[e,o]=n;for(let n=0;n<t.length;n++){const r=t[n][1];(r<e||r>o)&&(t[n]=[NaN,NaN])}}function q(t){const n=D(t[0].spatialReference);if(t.length<2||null==n)return t[0];const o=z(t[0].spatialReference);if(1===(t=t.filter((t=>t.width>o))).length)return t[0];let{xmin:r,xmax:s,ymin:i,ymax:l}=t[0];for(let e=1;e<t.length;e++){const o=t[e];s=o.xmax+n*e,i=Math.min(i,o.ymin),l=Math.max(l,o.ymax)}return new e({xmin:r,xmax:s,ymin:i,ymax:l,spatialReference:t[0].spatialReference})}function G(n,o,r=null,i=!0){const l=n.spatialReference;if(l.equals(o))return n;const a=V(n),f=D(l,!0),c=D(o);if(0===a||null==f||null==c){const e=$(n,o,r,i);if(null==f&&null!=c&&Math.abs(e.width-c)<z(o)&&t()){const t=B(l);if(null!=t&&t.poleLocation===y.None&&n.width<(t.bbox[2]-t.bbox[0])/2)return K(n,o)||e}return e}const u=n.clone().normalize();if(1===u.length&&n.xmax<f&&n.xmax-f/2>z(l)){const{xmin:t,xmax:o}=n;for(let r=0;r<=a;r++){const s=0===r?t:-f/2,i=r===a?o-f*r:f/2;u[r]=new e({xmin:s,xmax:i,ymin:n.ymin,ymax:n.ymax,spatialReference:l})}}return q(u.map((t=>$(t,o,r,i))).filter(s))}function J(t,n,e){if("extent"===t.type){const{xmin:n,ymin:e,xmax:o,ymax:r,spatialReference:s}=t;t=new i({rings:[[[n,r],[o,r],[o,e],[n,e],[n,r]]],spatialReference:s})}return t.spatialReference.equals(n)?t:(d(t.spatialReference,n,e),o(t,n,e))}function K(t,n){const r=D(n);if(null==r)return null;let{xmin:s,ymin:l,xmax:a,ymax:f}=t;const c=t.spatialReference,u=new i({spatialReference:c,rings:[[[s,l],[a,l],[a,f],[s,f],[s,l]]]}),h=o(u,n);if(2!==h.rings.length||!h.rings[0].length||!h.rings[1].length)return null;const{rings:x}=h,m=z(c),M=new e({spatialReference:n});for(let t=0;t<2;t++){s=a=x[t][0][0],l=f=x[t][0][1];for(let n=0;n<x[t].length;n++)s=s>x[t][n][0]?x[t][n][0]:s,a=a<x[t][n][0]?x[t][n][0]:a,l=l>x[t][n][1]?x[t][n][1]:l,f=f<x[t][n][1]?x[t][n][1]:f;if(0===t)M.ymin=l,M.ymax=f,M.xmin=s,M.xmax=a;else if(M.ymin=Math.min(M.ymin,l),M.ymax=Math.max(M.ymax,f),Math.abs(a-r/2)<m)M.xmin=s,M.xmax=M.xmax+r;else{if(!(Math.abs(s+r/2)<m))return null;M.xmax=a+r}}return M}function $(t,n,e=null,r=!0,s=!0){const i=t.spatialReference;if(i.equals(n)||!n)return t;d(i,n,e);const a=o(t,n,e);if(s&&n.isWebMercator&&a&&(a.ymax=Math.min(20037508.342787,a.ymax),a.ymin=Math.max(-20037508.342787,a.ymin),a.ymin>=a.ymax))return null;if(!r||!a)return a;const f=H(i,!0),c=H(n,!0);if(null==f||null==c)return a;const u=z(i,.001),h=z(i,C),x=z(n,.001);if(Math.abs(a.xmin-c[0])<x&&Math.abs(a.xmax-c[1])<x){const o=Math.abs(t.xmin-f[0]),r=Math.abs(f[1]-t.xmax);if(o<u&&r>h){a.xmin=c[0];const o=[];o.push(new l(t.xmax,t.ymin,i)),o.push(new l(t.xmax,(t.ymin+t.ymax)/2,i)),o.push(new l(t.xmax,t.ymax,i));const r=o.map((t=>E(t,n,e))).filter((t=>!isNaN(t?.x))).map((t=>t.x));a.xmax=Math.max.apply(null,r)}if(r<u&&o>h){a.xmax=c[1];const o=[];o.push(new l(t.xmin,t.ymin,i)),o.push(new l(t.xmin,(t.ymin+t.ymax)/2,i)),o.push(new l(t.xmin,t.ymax,i));const r=o.map((t=>E(t,n,e))).filter((t=>!isNaN(t?.x))).map((t=>t.x));a.xmin=Math.min.apply(null,r)}}else{const t=z(n,.001);Math.abs(a.xmin-c[0])<t&&(a.xmin=c[0]),Math.abs(a.xmax-c[1])<t&&(a.xmax=c[1])}return a}function D(t,n=!1){if(!t)return null;const e=n?20037508.342787:20037508.342788905;return t.isWebMercator?2*e:t.wkid&&t.isGeographic?360:2*g[t.wkid]||null}function H(t,n=!1){if(t.isGeographic)return[-180,180];const e=D(t,n);return null!=e?[-e/2,e/2]:null}function Q(t,n,e,o){let r=(t-n)/e;return r-Math.floor(r)!=0?r=Math.floor(r):o&&(r-=1),r}function V(t,n=!1){const e=D(t.spatialReference);if(null==e)return 0;const o=n?0:-(e/2),r=z(t.spatialReference),s=!n&&Math.abs(t.xmax-e/2)<r?e/2:t.xmax,i=!n&&Math.abs(t.xmin+e/2)<r?-e/2:t.xmin;return Q(s,o,e,!0)-Q(i,o,e,!1)}function Y(t){const n=t.storageInfo.origin.x,e=D(t.spatialReference,!0);if(null==e)return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const o=e/2,{nativePixelSize:r,storageInfo:s,extent:i}=t,{maximumPyramidLevel:l,blockWidth:a,pyramidScalingFactor:f}=s;let c=r.x;const u=[],h=null!=t.transform&&"gcs-shift"===t.transform.type,x=n+(h?0:o),m=h?e-n:o-n;for(let t=0;t<=l;t++){const t=(i.xmax-n)/c/a,e=t-Math.floor(t)==0?t:Math.ceil(t),o=m/c/a,r=o-Math.floor(o)==0?o:Math.ceil(o),s=Math.floor(x/c/a),l=Math.round(x/c)%a,h=(a-Math.round(m/c)%a)%a;u.push({resolutionX:c,blockWidth:a,datsetColumnCount:e,worldColumnCountFromOrigin:r,leftMargin:l,rightPadding:h,originColumnOffset:s}),c*=f}return{originX:n,halfWorldWidth:o,pyramidsInfo:u,hasGCSSShiftTransform:h}}function Z(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let e;if(P.has(n))e=P.get(n);else{e=(t.wkid?c.coordsys(t.wkid):c.fromString(u.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),P.set(n,e)}return new M({wkid:e})}function _(t){const n=t.isAdaptive&&null==t.spacing;let e=t.spacing||[N,N],o=tt(t),r={cols:o.size[0]+1,rows:o.size[1]+1};const s=o.outofBoundPointCount>0&&o.outofBoundPointCount<o.offsets.length/2;let i=o.outofBoundPointCount===o.offsets.length/2||n&&s?[0,0]:R(o.offsets,r,e,b);const l=(i[0]+i[1])/2,a=t.projectedExtent.spatialReference,f=t.srcBufferExtent.spatialReference;if(n&&(s||l>b)){w(a,f,t.datumTransformation)&&(a.isGeographic||B(a)),e=[S,S],o=tt({...t,spacing:e}),r={cols:o.size[0]+1,rows:o.size[1]+1},i=R(o.offsets,r,e,b)}if(o.error=i,e[0]>1&&(o.coefficients=nt(o.offsets,r,s)),t.includeGCSGrid&&!a.isGeographic&&!a.isWebMercator)if(f.isGeographic)o.gcsGrid={offsets:o.offsets,coefficients:o.coefficients,spacing:e};else{const n=B(a);if(null!=n&&!n.isEnvelope){const n=Z(a),i=G(t.projectedExtent,n),{offsets:l}=tt({...t,srcBufferExtent:i,spacing:e}),f=nt(l,r,s);o.gcsGrid={offsets:l,coefficients:f,spacing:e}}}return o}function tt(t){const{projectedExtent:n,srcBufferExtent:e,pixelSize:o,datumTransformation:r,rasterTransform:s}=t,i=n.spatialReference,a=e.spatialReference,f=d(i,a),{xmin:c,ymin:u,xmax:h,ymax:x}=n,m=D(a),M=null!=m&&(t.hasWrapAround||"gcs-shift"===s?.type),p=t.spacing||[N,N],y=p[0]*o.x,w=p[1]*o.y,R=1===p[0],g=Math.ceil((h-c)/y-.1/p[0])+(R?0:1),b=Math.ceil((x-u)/w-.1/p[1])+(R?0:1),v=W({cols:g,rows:b,xmin:c,ymax:x,xres:y,yres:w,inSR:i,outSR:a,datumTransformation:r,preferPE:p[0]<=S,usePixelCenter:R}),P=[];let k,T=0;const j=R?-1:NaN,{xmin:E,xmax:L,ymax:F,width:I,height:A}=e,X=z(a,C),O=null!=m&&E>0&&L>m/2;let U=!1;if(f){const t=B(i);U=null!=t&&t.poleLocation>0}for(let t=0;t<g;t++){const n=[];for(let e=0;e<b;e++){let o=v[t*b+e];if(M&&o[0]>L&&o[0]>m/2-X?o[0]-=m:M&&0===t&&o[0]<0&&O&&!s&&(o[0]+=m),!o||isNaN(o[0])||isNaN(o[1]))P.push(j),P.push(j),n.push(null),T++;else{if(s){const t=s.inverseTransform(new l({x:o[0],y:o[1],spatialReference:a}));o=[t.x,t.y]}n.push(o),t>0&&M&&k[e]&&o[0]<k[e][0]&&(o[0]+=m,U&&o[0]>L&&o[0]>m&&(o[0]-=m)),P.push((o[0]-E)/I),P.push((F-o[1])/A)}}k=n}return{offsets:P,error:null,coefficients:null,outofBoundPointCount:T,spacing:p,size:R?[g,b]:[g-1,b-1]}}function nt(t,n,e){const{cols:o,rows:r}=n,s=new Float32Array((o-1)*(r-1)*2*6),i=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),l=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let n=0;n<o-1;n++){for(let e=0;e<r-1;e++){let a=n*r*2+2*e;const f=t[a],c=t[a+1],u=t[a+2],h=t[a+3];a+=2*r;const x=t[a],m=t[a+1],M=t[a+2],p=t[a+3];let y=0,w=12*(e*(o-1)+n);for(let t=0;t<3;t++)s[w++]=i[y++]*f+i[y++]*u+i[y++]*M;y=0;for(let t=0;t<3;t++)s[w++]=i[y++]*c+i[y++]*h+i[y++]*p;y=0;for(let t=0;t<3;t++)s[w++]=l[y++]*f+l[y++]*x+l[y++]*M;y=0;for(let t=0;t<3;t++)s[w++]=l[y++]*c+l[y++]*m+l[y++]*p}if(e)for(let t=0;t<s.length;t++)isNaN(s[t])&&(s[t]=-1)}return s}function et(t){const n=t.clone().normalize();return 1===n.length?n[0]:q(n)}function ot(t,n,e){const{storageInfo:o,pixelSize:s}=n;let i=0,a=!1;const{pyramidResolutions:f}=o,c="mixed"===o.tileInfo.format?.toLowerCase()?Math.max(1,Math.min(3,o.tileInfo.dpi/96)):1,u=(t.x+t.y)/2/c;if(null!=f&&f.length){const t=f[f.length-1],o=(t.x+t.y)/2,c=(s.x+s.y)/2;if(u<=c)i=0;else if(u>=o)i=f.length,a=u/o>8;else{let t,n=c;for(let o=1;o<=f.length;o++){if(t=(f[o-1].x+f[o-1].y)/2,u<=t){u===t?i=o:"down"===e?(i=o-1,a=u/n>8):i="up"===e||u-n>t-u||u/n>2?o:o-1;break}n=t}}const h=0===i?s:f[i-1];if(a){Math.min(h.x,h.y)*r(n.spatialReference)>19567&&(a=!1)}return{pyramidLevel:i,pyramidResolution:new l({x:h.x,y:h.y,spatialReference:n.spatialReference}),excessiveReading:a}}const h=Math.log(t.x/s.x)/Math.LN2,x=Math.log(t.y/s.y)/Math.LN2,m=n.storageInfo.maximumPyramidLevel||0;i="down"===e?Math.floor(Math.min(h,x)):"up"===e?Math.ceil(Math.max(h,x)):Math.round((h+x)/2),i<0?i=0:i>m&&(a=i>m+3,i=m);const M=2**i;return{pyramidLevel:i,pyramidResolution:new l({x:M*n.nativePixelSize.x,y:M*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:a}}function rt(t,n,e){const o=e?.tileSize??512,s=e?.alignGlobalDatasetWithAGOL??!0,i=!!e?.limitToSrcResolution,{extent:a,spatialReference:f,pixelSize:c}=t,u=j(new l({x:c.x,y:c.y,spatialReference:f}),n,a);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const h=(u.x+u.y)/2,x=r(n),m=h*x*96*39.37,M=n.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let p="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const y=G(a,n),w=Math.min(Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2),Math.ceil(Math.log(M/2/m)/Math.LN2));if(!p&&s&&(n.isGeographic||n.isWebMercator)&&(p=y.xmin*y.xmax<0,!p&&w<3)){const t=D(n);if(null!=t){const n=2**w*h*o,e=Math.ceil(t/n);p=1===e||2===e&&t/2-y.xmax<n}}let d,R=m;const g=1.001,N=Math.min(2,Math.max(1.414,t.storageInfo?.pyramidScalingFactor||2));if(p){R=M;const t=n.isGeographic?1341104507446289e-21:.29858214164761665,e=t*(96*x*39.37),o=n.isGeographic?4326:3857;d=j(new l({x:t,y:t,spatialReference:{wkid:o}}),f,y),d.x*=R/e,d.y*=R/e}else{d={x:c.x,y:c.y};let t=0;for(;R<M*(g/2)&&t<w;)t++,R*=N,d.x*=N,d.y*=N;Math.max(R,M)/Math.min(R,M)<=g&&(R=M)}const S=[R],b=[{x:d.x,y:d.y}],v=70.5310735,P=Math.min(v,m)/g;for(;R>=P;)R/=N,d.x/=N,d.y/=N,S.push(R),b.push({x:d.x,y:d.y});if(i){const t=.001*c.x;let n=b.findIndex((n=>n.x>=c.x-t&&n.x<=c.x+t));n>-1?(b.length=n+1,S.length=n+1):(n=b.findIndex((n=>n.x<=c.x+t)),n>0&&(b.length=n,S.length=n))}return{projectedPixelSize:u,scales:S,srcResolutions:b,isCustomTilingScheme:!p}}export{_ as $,j as C,J,D as K,V as Q,T,Y as V,E as _,w as d,ot as i,k,et as n,rt as o,G as q};
//# sourceMappingURL=p-22a6b5ef.js.map