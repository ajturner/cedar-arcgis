import{l as i,y as s,c7 as t,n as p,V as r,ad as e,aW as a,T as o}from"./p-b54724b6.js";import{r as m}from"./p-1aba1165.js";import{d as h,f as j}from"./p-5f5f43c2.js";import"./p-0fe6a545.js";import"./p-07f12c16.js";import"./p-570a8a46.js";import"./p-1fd43aa6.js";import"./p-49f0006c.js";import"./p-541ec65c.js";import"./p-13e550f5.js";import"./p-795f7c81.js";import"./p-29040467.js";import"./p-0e94eaa4.js";import"./p-33c0f331.js";import"./p-9f1a0adc.js";import"./p-5b0b1d68.js";import"./p-4f76b2d1.js";import"./p-2d1dac84.js";import"./p-42c332a2.js";import"./p-843f0c78.js";import"./p-38e70926.js";import"./p-74887bd8.js";import"./p-783b6965.js";import"./p-a3f0a5f3.js";import"./p-e6a64715.js";import"./p-dc29c329.js";import"./p-6ffbaa7a.js";import"./p-fc9cd10b.js";import"./p-fdc41b20.js";import"./p-ecc7ed03.js";import"./p-05938a61.js";import"./p-8043ab9b.js";import"./p-faf4e331.js";import"./p-cd4a8b9a.js";import"./p-cae2235f.js";import"./p-9a4094ba.js";import"./p-1184cc61.js";import"./p-98e621d1.js";import"./p-1b31d781.js";import"./p-f7f8e6f9.js";import"./p-a779e49b.js";import"./p-7572c366.js";import"./p-832f907c.js";import"./p-5abe9c67.js";import"./p-0856fe30.js";import"./p-a5e3ec2a.js";import"./p-80be55a5.js";import"./p-b88ddb1e.js";import"./p-8dc3148c.js";import"./p-ca5fb53c.js";import"./p-d7fc78fa.js";import"./p-581eca80.js";import"./p-2a2efb66.js";import"./p-1701e549.js";import"./p-07a1e707.js";import"./p-8bc47c76.js";import"./p-c19b935f.js";import"./p-c8e3775b.js";import"./p-e75aa2b5.js";import"./p-f5f26b1f.js";import"./p-52a9dec5.js";import"./p-a379c2ce.js";let c=class extends h{constructor(i){super(i),this.type="group",this.layerViews=new r}destroy(){this.handles.removeAll(),this.layerViews.length=0}_allLayerViewVisibility(i){this.layerViews.forEach((s=>{s.visible=i}))}initialize(){this.handles.add([this.layerViews.on("change",(i=>this._layerViewsChangeHandler(i))),e((()=>this.layer?.visibilityMode),(()=>{this.layer&&this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))}),a),e((()=>this.visible),(i=>{this._applyVisibility((()=>this._allLayerViewVisibility(i)),(()=>{}))}),a)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(i){this._set("layerViews",o(i,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((i,s)=>i+s.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.layerViews.some((i=>i.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((i=>i._isOverridden("visible")))}_findLayerViewForLayer(i){return i&&this.layerViews.find((s=>s.layer===i))}_firstVisibleOnLayerOrder(){const i=this.layer.layers.find((i=>{const s=this._findLayerViewForLayer(i);return!!s?.visible}));return i&&this._findLayerViewForLayer(i)}_applyExclusiveVisibility(i){null==i&&null==(i=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(i=this._findLayerViewForLayer(this.layer.layers.at(0))),this.layerViews.forEach((s=>{s.visible=s===i}))}_layerViewsChangeHandler(i){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map((i=>e((()=>i.visible),(s=>this._applyVisibility((()=>{s!==this.visible&&(i.visible=this.visible)}),(()=>this._applyExclusiveVisibility(s?i:null)))),a))).toArray(),"grouplayerview:visible");const s=i.added[i.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(s?.visible?s:null)))}_applyVisibility(i,s){this._hasLayerViewVisibleOverrides()&&("inherited"===this.layer?.visibilityMode?i():"exclusive"===this.layer?.visibilityMode&&s())}};i([s({cast:t})],c.prototype,"layerViews",null),i([s({readOnly:!0})],c.prototype,"updatingProgress",null),i([s()],c.prototype,"view",void 0),c=i([p("esri.views.layers.GroupLayerView")],c);const l=c;let d=class extends(j(l)){constructor(){super(...arguments),this.container=new m}attach(){this._updateStageChildren(),this.addAttachHandles(this.layerViews.on("after-changes",(()=>this._updateStageChildren())))}detach(){this.container.removeAllChildren()}update(i){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((i,s)=>this.container.addChildAt(i.container,s)))}};d=i([p("esri.views.2d.layers.GroupLayerView2D")],d);const f=d;export default f;
//# sourceMappingURL=p-705fbe20.js.map