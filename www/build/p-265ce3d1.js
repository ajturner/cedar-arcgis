import{s as n,gA as e,cR as t}from"./p-b54724b6.js";function a(n){const e=o(n);return null!=e?e.toDataURL():""}async function i(e){const t=o(e);if(null==t)throw new n("imageToArrayBuffer","Unsupported image type");const a=await r(e),i=await new Promise((n=>t.toBlob(n,a)));if(!i)throw new n("imageToArrayBuffer","Failed to encode image");return{data:await i.arrayBuffer(),type:a}}async function r(n){if(!(n instanceof HTMLImageElement))return"image/png";const a=n.src;if(e(a)){const n=t(a);return"image/jpeg"===n?.mediaType?n.mediaType:"image/png"}return/\.png$/i.test(a)?"image/png":/\.(jpg|jpeg)$/i.test(a)?"image/jpeg":"image/png"}function o(n){if(n instanceof HTMLCanvasElement)return n;if(n instanceof HTMLVideoElement)return null;const e=document.createElement("canvas");e.width=n.width,e.height=n.height;const t=e.getContext("2d");return n instanceof HTMLImageElement?t.drawImage(n,0,0,n.width,n.height):n instanceof ImageData&&t.putImageData(n,0,0),e}function c(n){const e=[],t=new Uint8Array(n);for(let n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return"data:application/octet-stream;base64,"+btoa(e.join(""))}function s(n){if(n.byteLength<8)return!1;const e=new Uint8Array(n);return 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]}export{a,c,s as g,o,i as r};
//# sourceMappingURL=p-265ce3d1.js.map