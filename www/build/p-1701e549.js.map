{"version":3,"names":["t","e","getCollections","tables","layers","getChildrenFunction","push","itemFilterFunction","parent","includes","n","values","destroy","clear","l","r","s","o","a","i","length","at","type","d","y","constructor","super","this","remove","layerAdded","getLogger","error","title","id","layerRemoved","addHandles","on","item","toArray","_set","_get","add","getNextIndex","reorder","then","destroyed","addMany","slice","forEach","findLayerById","findLayerByUid","removeMany","removeAll","prototype","findTableById","findTableByUid"],"sources":["./node_modules/@arcgis/core/support/collectionUtils.js","./node_modules/@arcgis/core/support/LayersMixin.js","./node_modules/@arcgis/core/support/TablesMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../core/CollectionFlattener.js\";function t(t){return new e({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const t=[];return\"tables\"in e&&t.push(e.tables),\"layers\"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&\"tables\"in t&&t.tables.includes(e)}})}function n(e){for(const t of e.values())t?.destroy();e.clear()}export{t as createFlattenedTablesCollection,n as destroyMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../layers/Layer.js\";function l(e,r,t){let s,o;if(e)for(let a=0,i=e.length;a<i;a++){if(s=e.at(a),s?.[r]===t)return s;if(\"group\"===s?.type&&(o=l(s.layers,r,t),o))return o}}const d=d=>{let y=class extends d{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&\"remove\"in e.parent&&e.parent.remove(e)},o=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on(\"before-add\",(e=>t(e.item))),this.layers.on(\"after-add\",(e=>o(e.item))),this.layers.on(\"after-remove\",(e=>a(e.item)))])}destroy(){const e=this.layers.toArray();for(const r of e)r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof n){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):s.getLogger(this).error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;let s=t.getNextIndex(r);e.slice().forEach((e=>{e.parent!==this?(t.add(e,s),s+=1):this.reorder(e,s)}))}findLayerById(e){return l(this.layers,\"id\",e)}findLayerByUid(e){return l(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([a()],y.prototype,\"layers\",null),y=e([i(\"esri.support.LayersMixin\")],y),y};export{d as LayersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/Collection.js\";import{referenceSetter as r}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";function a(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.at(s);if(o[e]===r)return o;if(\"group\"===o?.type){const t=a(o.tables,e,r);if(t)return t}}}const l=l=>{let n=class extends l{constructor(...t){super(...t),this.tables=new e,this.addHandles([this.tables.on(\"after-add\",(t=>{const e=t.item;e.parent&&e.parent!==this&&\"tables\"in e.parent&&e.parent.tables.remove(e),e.parent=this,\"feature\"!==e.type&&s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on(\"after-remove\",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set(\"tables\",r(t,this._get(\"tables\")))}findTableById(t){return a(this.tables,\"id\",t)}findTableByUid(t){return a(this.tables,\"uid\",t)}};return t([o()],n.prototype,\"tables\",null),n=t([i(\"esri.support.TablesMixin\")],n),n};export{l as TablesMixin};\n"],"mappings":"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"}