import{gV as t}from"./p-b54724b6.js";import{U as e,D as i,B as s,V as a,k as n}from"./p-1e9adf97.js";import{q as r,Q as l,R as o,G as h,a as c,m as u,W as p,M as d,K as b,b as f,h as m,o as g,i as v,c as j,J as y,l as x,N as T,d as w,e as k,z as R,t as _,U as A,f as O}from"./p-3ebb370e.js";import{s as L}from"./p-c5707bbd.js";import"./p-73062657.js";import"./p-05938a61.js";import"./p-8043ab9b.js";import"./p-fc9cd10b.js";import"./p-52d8e383.js";import"./p-07a1e707.js";import"./p-581eca80.js";import"./p-724753fd.js";import"./p-fdc41b20.js";import"./p-ecc7ed03.js";import"./p-0856fe30.js";import"./p-a5e3ec2a.js";import"./p-80be55a5.js";import"./p-b88ddb1e.js";import"./p-8dc3148c.js";import"./p-ca5fb53c.js";import"./p-e6a64715.js";import"./p-dc29c329.js";import"./p-a3f0a5f3.js";import"./p-6ffbaa7a.js";import"./p-faf4e331.js";import"./p-74887bd8.js";import"./p-cd4a8b9a.js";import"./p-cae2235f.js";import"./p-9a4094ba.js";import"./p-9f1a0adc.js";import"./p-1184cc61.js";import"./p-98e621d1.js";import"./p-1b31d781.js";import"./p-f7f8e6f9.js";import"./p-a779e49b.js";import"./p-7572c366.js";import"./p-832f907c.js";import"./p-5abe9c67.js";import"./p-d7fc78fa.js";import"./p-2a2efb66.js";import"./p-1701e549.js";import"./p-8bc47c76.js";import"./p-c19b935f.js";import"./p-c8e3775b.js";import"./p-e75aa2b5.js";import"./p-f5f26b1f.js";import"./p-783b6965.js";import"./p-52a9dec5.js";import"./p-07f12c16.js";import"./p-2d1dac84.js";import"./p-a379c2ce.js";import"./p-541ec65c.js";class S extends r{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*v,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(S,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.classNames.concat([S.className])});class N extends l{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(S.new(this._root,{}))}baseRadius(){const t=this.getPrivate("radius",0),e=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return e+u(i,t-e)}radius(){const t=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(t?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const t=this.get("textType","adjusted"),e=this.get("inside",!1),i=this.get("orientation");let s=j(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",e);const a=g(s),n=m(s);let r=this.baseRadius(),l=this.radius();if(this._display.angle=0,"circular"==t)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this._text.set("orientation",i),this._text.set("radius",l);else{0==r&&(s=0,l=0);let e=l*n,o=l*a;"radial"==t?(this.setRaw("x",e),this.setRaw("y",o),s<90||s>270||"auto"!=i?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==t?(this.setRaw("centerX",h),this.setRaw("centerY",h),this.setRaw("x",e),this.setRaw("y",o)):"regular"==t&&(this.setRaw("x",e),this.setRaw("y",o))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const t=this.get("textType","regular"),e=this.get("inside",!1);let i=0,s=0,a=this.get("labelAngle",0),n=this.localBounds(),r=n.right-n.left,l=n.bottom-n.top;if("radial"==t){if(this._flipped){let t=this.get("centerX");t instanceof c&&(r*=1-2*t.value),i=r*m(a),s=r*g(a)}}else e||"adjusted"!=t||(i=r/2*m(a),s=l/2*g(a));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Object.defineProperty(N,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(N,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.classNames.concat([N.className])});const P=Math.abs,M=Math.atan2,D=Math.cos,C=Math.max,I=Math.min,F=Math.sin,X=Math.sqrt,Y=1e-12,B=Math.PI,z=B/2,W=2*B;function U(t){return t>1?0:t<-1?B:Math.acos(t)}function V(t){return t>=1?z:t<=-1?-z:Math.asin(t)}function E(t){return t.innerRadius}function q(t){return t.outerRadius}function G(t){return t.startAngle}function J(t){return t.endAngle}function K(t){return t&&t.padAngle}function H(t,e,i,s,a,n,r,l){var o=i-t,h=s-e,c=r-a,u=l-n,p=u*o-c*h;if(!(p*p<Y))return[t+(p=(c*(e-n)-u*(t-a))/p)*o,e+p*h]}function Q(t,e,i,s,a,n,r){var l=t-i,o=e-s,h=(r?n:-n)/X(l*l+o*o),c=h*o,u=-h*l,p=t+c,d=e+u,b=i+c,f=s+u,m=(p+b)/2,g=(d+f)/2,v=b-p,j=f-d,y=v*v+j*j,x=a-n,T=p*f-b*d,w=(j<0?-1:1)*X(C(0,x*x*y-T*T)),k=(T*j-v*w)/y,R=(-T*v-j*w)/y,_=(T*j+v*w)/y,A=(-T*v+j*w)/y,O=k-m,L=R-g,S=_-m,N=A-g;return O*O+L*L>S*S+N*N&&(k=_,R=A),{cx:k,cy:R,x01:-c,y01:-u,x11:k*(a/x-1),y11:R*(a/x-1)}}function Z(){var t=E,e=q,i=n(0),s=null,r=G,l=J,o=K,h=null,c=a(u);function u(){var a,n,u=+t.apply(this,arguments),p=+e.apply(this,arguments),d=r.apply(this,arguments)-z,b=l.apply(this,arguments)-z,f=P(b-d),m=b>d;if(h||(h=a=c()),p<u&&(n=p,p=u,u=n),p>Y)if(f>W-Y)h.moveTo(p*D(d),p*F(d)),h.arc(0,0,p,d,b,!m),u>Y&&(h.moveTo(u*D(b),u*F(b)),h.arc(0,0,u,b,d,m));else{var g,v,j=d,y=b,x=d,T=b,w=f,k=f,R=o.apply(this,arguments)/2,_=R>Y&&(s?+s.apply(this,arguments):X(u*u+p*p)),A=I(P(p-u)/2,+i.apply(this,arguments)),O=A,L=A;if(_>Y){var S=V(_/u*F(R)),N=V(_/p*F(R));(w-=2*S)>Y?(x+=S*=m?1:-1,T-=S):(w=0,x=T=(d+b)/2),(k-=2*N)>Y?(j+=N*=m?1:-1,y-=N):(k=0,j=y=(d+b)/2)}var C=p*D(j),E=p*F(j),q=u*D(T),G=u*F(T);if(A>Y){var J,K=p*D(y),Z=p*F(y),$=u*D(x),tt=u*F(x);if(f<B)if(J=H(C,E,$,tt,K,Z,q,G)){var et=C-J[0],it=E-J[1],st=K-J[0],at=Z-J[1],nt=1/F(U((et*st+it*at)/(X(et*et+it*it)*X(st*st+at*at)))/2),rt=X(J[0]*J[0]+J[1]*J[1]);O=I(A,(u-rt)/(nt-1)),L=I(A,(p-rt)/(nt+1))}else O=L=0}k>Y?L>Y?(g=Q($,tt,C,E,p,L,m),v=Q(K,Z,q,G,p,L,m),h.moveTo(g.cx+g.x01,g.cy+g.y01),L<A?h.arc(g.cx,g.cy,L,M(g.y01,g.x01),M(v.y01,v.x01),!m):(h.arc(g.cx,g.cy,L,M(g.y01,g.x01),M(g.y11,g.x11),!m),h.arc(0,0,p,M(g.cy+g.y11,g.cx+g.x11),M(v.cy+v.y11,v.cx+v.x11),!m),h.arc(v.cx,v.cy,L,M(v.y11,v.x11),M(v.y01,v.x01),!m))):(h.moveTo(C,E),h.arc(0,0,p,j,y,!m)):h.moveTo(C,E),u>Y&&w>Y?O>Y?(g=Q(q,G,K,Z,u,-O,m),v=Q(C,E,$,tt,u,-O,m),h.lineTo(g.cx+g.x01,g.cy+g.y01),O<A?h.arc(g.cx,g.cy,O,M(g.y01,g.x01),M(v.y01,v.x01),!m):(h.arc(g.cx,g.cy,O,M(g.y01,g.x01),M(g.y11,g.x11),!m),h.arc(0,0,u,M(g.cy+g.y11,g.cx+g.x11),M(v.cy+v.y11,v.cx+v.x11),m),h.arc(v.cx,v.cy,O,M(v.y11,v.x11),M(v.y01,v.x01),!m))):h.arc(0,0,u,T,x,m):h.lineTo(q,G)}else h.moveTo(0,0);if(h.closePath(),a)return h=null,a+""||null}return u.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,s=(+r.apply(this,arguments)+ +l.apply(this,arguments))/2-B/2;return[D(s)*i,F(s)*i]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),u):e},u.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),u):i},u.padRadius=function(t){return arguments.length?(s=null==t?null:"function"==typeof t?t:n(+t),u):s},u.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),u):r},u.endAngle=function(t){return arguments.length?(l="function"==typeof t?t:n(+t),u):l},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),u):o},u.context=function(t){return arguments.length?(h=t??null,u):h},u}class $ extends o{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:Z()})}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),i=0,s=0;x(t)&&(i=t),x(e)&&(s=e);let a=this.get("radius",0),n=this.get("innerRadius",0);return a+=this.get("dRadius",0),n+=this.get("dInnerRadius",0),n<0&&(n=a+n),t instanceof c&&(i=this.ix*(n+(a-n)*t.value)),e instanceof c&&(s=this.iy*(n+(a-n)*e.value)),this.get("arc")>=360&&0==n&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let t=this.get("startAngle",0),e=this.get("arc",0);const i=this._generator;e<0&&(t+=e,e*=-1),e>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),a=this.get("innerRadius",0);s+=this.get("dRadius",0),a+=this.get("dInnerRadius",0),a<0&&(a=s+a),i({innerRadius:a,outerRadius:s,startAngle:(t+90)*v,endAngle:(t+e+90)*v});let n=t+e/2;this.ix=m(n),this.iy=g(n)}if(this.isDirty("shiftRadius")){const t=this.get("shiftRadius",0);this.setRaw("dx",this.ix*t),this.setRaw("dy",this.iy*t),this.markDirtyPosition()}}}Object.defineProperty($,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty($,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.classNames.concat([$.className])});class tt extends _{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:L.new(this._root,{}),width:R,height:R}),e("PieChart").setAll({radius:A(80),startAngle:-90,endAngle:270}),e("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),e("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),e("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),e("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),e("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),e("Slice",["pie"]).states.create("hover",{scale:1.04}),e("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),e("Tick",["pie"]).setAll({location:1}),e("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),e("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),e("FunnelSlice").setAll({interactive:!0,expandDistance:0}),e("FunnelSlice").states.create("hover",{expandDistance:.15}),e("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:h}),e("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:h,rotation:-90}),e("Label",["funnel","vertical"]).setAll({centerY:h,centerX:0}),e("Tick",["funnel"]).setAll({location:1}),e("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),e("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),e("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),e("PyramidSeries").setAll({valueIs:"area"}),e("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),e("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),e("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),e("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),e("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),e("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:h}),e("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:h,rotation:-90}),e("Label",["pyramid","vertical"]).setAll({centerY:h,centerX:0}),e("Tick",["pyramid"]).setAll({location:1}),e("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),e("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:h}),e("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:h,rotation:-90}),e("Label",["pictorial","vertical"]).setAll({centerY:h,centerX:0}),e("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),e("Tick",["pictorial"]).setAll({location:.5});{const i=e("Graphics",["pictorial","background"]);i.setAll({fillOpacity:.2}),O(i,"fill",t,"alternativeBackground")}}}class et extends e{_afterNew(){this._defaultThemes.push(tt.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(t){super._processSeries(t),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(et,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"}),Object.defineProperty(et,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:e.classNames.concat([et.className])});class it extends i{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this._makeSlices()}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this._makeLabels()}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this._makeTicks()})}makeSlice(t){const e=this.slicesContainer.children.push(this.slices.make());return e.on("fill",(()=>{this.updateLegendMarker(t)})),e.on("stroke",(()=>{this.updateLegendMarker(t)})),e._setDataItem(t),t.set("slice",e),this.slices.push(e),e}makeLabel(t){const e=this.labelsContainer.children.push(this.labels.make());return e._setDataItem(t),t.set("label",e),this.labels.push(e),e}_shouldMakeBullet(t){return null!=t.get("value")}makeTick(t){const e=this.ticksContainer.children.push(this.ticks.make());return e._setDataItem(t),t.set("tick",e),this.ticks.push(e),e}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const t=this.get("colors");t&&t.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let t=0,e=0,i=0,s=1/0,a=0;f(this._dataItems,(i=>{let s=i.get("valueWorking",0);t+=s,e+=Math.abs(s)})),f(this._dataItems,(t=>{let n=t.get("valueWorking",0);n>i&&(i=n),n<s&&(s=n),a++;let r=n/e;0==e&&(r=0),t.setRaw("valuePercentTotal",100*r)})),this.setPrivateRaw("valueLow",s),this.setPrivateRaw("valueHigh",i),this.setPrivateRaw("valueSum",t),this.setPrivateRaw("valueAverage",t/a),this.setPrivateRaw("valueAbsoluteSum",e)}}show(e){const i=Object.create(null,{show:{get:()=>super.show}});return t(this,void 0,void 0,(function*(){let t=[];t.push(i.show.call(this,e)),t.push(this._sequencedShowHide(!0,e)),yield Promise.all(t)}))}hide(e){const i=Object.create(null,{hide:{get:()=>super.hide}});return t(this,void 0,void 0,(function*(){let t=[];t.push(i.hide.call(this,e)),t.push(this._sequencedShowHide(!1,e)),yield Promise.all(t)}))}_updateChildren(){super._updateChildren(),this._valuesDirty&&f(this._dataItems,(t=>{t.get("label").text.markDirtyText()})),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&f(this._dataItems,(t=>{this.updateLegendValue(t)})),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),f(this.dataItems,(t=>{this._updateTick(t)}))}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(t){if(super.processDataItem(t),null==t.get("fill")){let e=this.get("colors");e&&t.setRaw("fill",e.next())}}showDataItem(e,i){const s=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return t(this,void 0,void 0,(function*(){const t=[s.showDataItem.call(this,e,i)];x(i)||(i=this.get("stateAnimationDuration",0));const a=this.get("stateAnimationEasing");let n=e.get("value");const r=e.animate({key:"valueWorking",to:n,duration:i,easing:a});r&&t.push(r.waitForStop());const l=e.get("tick");l&&t.push(l.show(i));const o=e.get("label");o&&t.push(o.show(i));const h=e.get("slice");h&&t.push(h.show(i)),h.get("active")&&h.states.applyAnimate("active"),yield Promise.all(t)}))}hideDataItem(e,i){const s=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return t(this,void 0,void 0,(function*(){const t=[s.hideDataItem.call(this,e,i)],a=this.states.create("hidden",{});x(i)||(i=a.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const n=a.get("stateAnimationEasing",this.get("stateAnimationEasing")),r=e.animate({key:"valueWorking",to:0,duration:i,easing:n});r&&t.push(r.waitForStop());const l=e.get("tick");l&&t.push(l.hide(i));const o=e.get("label");o&&t.push(o.hide(i));const h=e.get("slice");h.hideTooltip(),h&&t.push(h.hide(i)),yield Promise.all(t)}))}disposeDataItem(t){super.disposeDataItem(t);let e=t.get("label");e&&(this.labels.removeValue(e),e.dispose());let i=t.get("tick");i&&(this.ticks.removeValue(i),i.dispose());let s=t.get("slice");s&&(this.slices.removeValue(s),s.dispose())}hoverDataItem(t){const e=t.get("slice");e&&!e.isHidden()&&e.hover()}unhoverDataItem(t){const e=t.get("slice");e&&e.unhover()}updateLegendMarker(t){const e=t.get("slice");if(e){const i=t.get("legendDataItem");if(i){const t=i.get("markerRectangle");f(T,(i=>{null!=e.get(i)&&t.set(i,e.get(i))}))}}}_arrangeDown(t){if(t){let e=this._getNextDown();t.sort(((t,e)=>t.y>e.y?1:t.y<e.y?-1:0)),f(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.top;t.y+s<e&&(t.y=e-s),t.label.set("y",t.y),e=t.y+i.bottom}))}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(t){if(t){let e=this._getNextUp();t.sort(((t,e)=>t.y<e.y?1:t.y>e.y?-1:0)),f(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.bottom;t.y+s>e&&(t.y=e-s),t.label.set("y",t.y),e=t.y+i.top}))}}_arrangeRight(t){if(t){let e=0;t.sort(((t,e)=>t.y>e.y?1:t.y<e.y?-1:0)),f(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.left;t.y+s<e&&(t.y=e-s),t.label.set("x",t.y),e=t.y+i.right}))}}_arrangeLeft(t){if(t){let e=this.labelsContainer.maxWidth();t.sort(((t,e)=>t.y<e.y?1:t.y>e.y?-1:0)),f(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.right;t.y+s>e&&(t.y=e-s),t.label.set("x",t.y),e=t.y+i.left}))}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(t){}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}}Object.defineProperty(it,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"}),Object.defineProperty(it,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:i.classNames.concat([it.className])});class st extends et{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:h,y:h})}_prepareChildren(){super._prepareChildren();const t=this.chartContainer,e=t.innerWidth(),i=t.innerHeight(),s=this.get("startAngle",0),a=this.get("endAngle",0),n=this.get("innerRadius");let r=w(0,0,s,a,1);const l=e/(r.right-r.left),o=i/(r.bottom-r.top);let h={left:0,right:0,top:0,bottom:0};if(n instanceof c){let t=n.value,r=Math.min(l,o);t=Math.max(r*t,r-Math.min(i,e))/r,h=w(0,0,s,a,t),this.setPrivateRaw("irModifyer",t/n.value)}r=k([r,h]);const p=this._maxRadius;this._maxRadius=Math.min(l,o);const d=u(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-d*(r.bottom+r.top)/2,dx:-d*(r.right+r.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||p!=this._maxRadius)&&this.series.each((t=>{t._markDirtyKey("startAngle")})),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each((t=>{t._markDirtyKey("innerRadius")}))}radius(t){let e=u(this.get("radius",0),this._maxRadius),i=u(this.get("innerRadius",0),e);if(t){let s=this.series.indexOf(t),a=this.series.length,n=t.get("radius");return null!=n?i+u(n,e-i):i+(e-i)/a*(s+1)}return e}innerRadius(t){const e=this.radius();let i=u(this.get("innerRadius",0),e);if(i<0&&(i=e+i),t){let s=this.series.indexOf(t),a=this.series.length,n=t.get("innerRadius");return null!=n?i+u(n,e-i):i+(e-i)/a*s}return i}}Object.defineProperty(st,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"}),Object.defineProperty(st,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:et.classNames.concat([st.className])});class at extends it{_makeSlices(){return new p(d.new({}),(()=>$._new(this._root,{themeTags:b(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template])))}_makeLabels(){return new p(d.new({}),(()=>N._new(this._root,{themeTags:b(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template])))}_makeTicks(){return new p(d.new({}),(()=>s._new(this._root,{themeTags:b(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template])))}processDataItem(t){super.processDataItem(t);const e=this.makeSlice(t);e.on("scale",(()=>{this._updateTick(t)})),e.on("shiftRadius",(()=>{this._updateTick(t)})),e.events.on("positionchanged",(()=>{this._updateTick(t)}));const i=this.makeLabel(t);i.events.on("positionchanged",(()=>{this._updateTick(t)})),this.makeTick(t),e.events.on("positionchanged",(()=>{i.markDirty()}))}_getNextUp(){const t=this.chart;return t?t._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const t=this.chart;return t?-t._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const t=this.chart;if(t){if(this.isDirty("alignLabels")){let t=this.labels.template;if(this.get("alignLabels"))t.set("textType","aligned");else{let e=t.get("textType");null!=e&&"aligned"!=e||t.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const e=this.get("startAngle",t.get("startAngle",-90)),i=this.get("endAngle",t.get("endAngle",270))-e;let s=e;const a=t.radius(this);this.setPrivateRaw("radius",a);let n=t.innerRadius(this)*t.getPrivate("irModifyer",1);n<0&&(n=a+n),f(this._dataItems,(t=>{this.updateLegendValue(t);let e=i*t.get("valuePercentTotal")/100;const r=t.get("slice");if(r){r.set("radius",a),r.set("innerRadius",n),r.set("startAngle",s),r.set("arc",e);const i=t.get("fill");r._setDefault("fill",i),r._setDefault("stroke",i)}let l=j(s+e/2);const o=t.get("label");if(o&&(o.setPrivate("radius",a),o.setPrivate("innerRadius",n),o.set("labelAngle",l),"aligned"==o.get("textType"))){let t=a+o.get("radius",0),e=a*g(l);l>90&&l<=270?(o.isHidden()||o.isHiding()||this._lLabels.push({label:o,y:e}),t*=-1,t-=this.labelsContainer.get("paddingLeft",0),o.set("centerX",R),o.setPrivateRaw("left",!0)):(o.isHidden()||o.isHiding()||this._rLabels.push({label:o,y:e}),t+=this.labelsContainer.get("paddingRight",0),o.set("centerX",0),o.setPrivateRaw("left",!1)),o.set("x",t),o.set("y",a*g(l))}s+=e,this._updateTick(t)}))}}}_updateTick(t){const e=t.get("tick"),i=t.get("label"),s=t.get("slice"),a=e.get("location",1);if(e&&i&&s){const t=(s.get("shiftRadius",0)+s.get("radius",0))*s.get("scale",1)*a,n=i.get("labelAngle",0),r=m(n),l=g(n),o=this.labelsContainer,h=o.get("paddingLeft",0),c=o.get("paddingRight",0);let u=0,p=0;if(u=i.x(),p=i.y(),"circular"==i.get("textType")){const t=i.radius()-i.get("paddingBottom",0),e=i.get("labelAngle",0);u=t*m(e),p=t*g(e)}let d=-c;i.getPrivate("left")&&(d=h),e.set("points",[{x:s.x()+t*r,y:s.y()+t*l},{x:u+d,y:p},{x:u,y:p}])}}_positionBullet(t){const e=t.get("sprite");if(e){const i=e.dataItem.get("slice");if(i){const s=i.get("innerRadius",0),a=i.get("radius",0),n=i.get("startAngle",0)+i.get("arc",0)*t.get("locationX",.5),r=s+(a-s)*t.get("locationY",.5);e.setAll({x:m(n)*r,y:g(n)*r})}}}}Object.defineProperty(at,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"}),Object.defineProperty(at,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:it.classNames.concat([at.className])});export{st as PieChartAm5,at as PieSeriesAm5};
//# sourceMappingURL=p-d51f11a1.js.map