{"version":3,"names":["a","e","t","o","toDataURL","async","r","n","i","Promise","toBlob","data","arrayBuffer","type","HTMLImageElement","src","mediaType","test","HTMLCanvasElement","HTMLVideoElement","document","createElement","width","height","getContext","drawImage","ImageData","putImageData","c","Uint8Array","length","push","String","fromCharCode","btoa","join","g","byteLength"],"sources":["./node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import e from\"../../../../../core/Error.js\";import{isDataProtocol as t,dataComponents as n}from\"../../../../../core/urlUtils.js\";function a(e){const t=o(e);return null!=t?t.toDataURL():\"\"}async function r(t){const n=o(t);if(null==n)throw new e(\"imageToArrayBuffer\",\"Unsupported image type\");const a=await i(t),r=await new Promise((e=>n.toBlob(e,a)));if(!r)throw new e(\"imageToArrayBuffer\",\"Failed to encode image\");return{data:await r.arrayBuffer(),type:a}}async function i(e){if(!(e instanceof HTMLImageElement))return\"image/png\";const a=e.src;if(t(a)){const e=n(a);return\"image/jpeg\"===e?.mediaType?e.mediaType:\"image/png\"}return/\\.png$/i.test(a)?\"image/png\":/\\.(jpg|jpeg)$/i.test(a)?\"image/jpeg\":\"image/png\"}function o(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement(\"canvas\");t.width=e.width,t.height=e.height;const n=t.getContext(\"2d\");return e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),t}function c(e){const t=[],n=new Uint8Array(e);for(let a=0;a<n.length;a++)t.push(String.fromCharCode(n[a]));return\"data:application/octet-stream;base64,\"+btoa(t.join(\"\"))}function g(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}export{c as encodeBase64DataUri,r as imageToArrayBuffer,a as imageToDataURI,o as imageTypeToCanvas,g as isArrayBufferPNG};\n"],"mappings":"oDAIoK,SAASA,EAAEC,GAAG,MAAMC,EAAEC,EAAEF,GAAG,OAAO,MAAMC,EAAEA,EAAEE,YAAY,EAAE,CAACC,eAAeC,EAAEJ,GAAG,MAAMK,EAAEJ,EAAED,GAAG,GAAG,MAAMK,EAAE,MAAM,IAAIN,EAAE,qBAAqB,0BAA0B,MAAMD,QAAQQ,EAAEN,GAAGI,QAAQ,IAAIG,SAASR,GAAGM,EAAEG,OAAOT,EAAED,KAAK,IAAIM,EAAE,MAAM,IAAIL,EAAE,qBAAqB,0BAA0B,MAAM,CAACU,WAAWL,EAAEM,cAAcC,KAAKb,EAAE,CAACK,eAAeG,EAAEP,GAAG,KAAKA,aAAaa,kBAAkB,MAAM,YAAY,MAAMd,EAAEC,EAAEc,IAAI,GAAGb,EAAEF,GAAG,CAAC,MAAMC,EAAEM,EAAEP,GAAG,MAAM,eAAeC,GAAGe,UAAUf,EAAEe,UAAU,WAAW,CAAC,MAAM,UAAUC,KAAKjB,GAAG,YAAY,iBAAiBiB,KAAKjB,GAAG,aAAa,WAAW,CAAC,SAASG,EAAEF,GAAG,GAAGA,aAAaiB,kBAAkB,OAAOjB,EAAE,GAAGA,aAAakB,iBAAiB,OAAO,KAAK,MAAMjB,EAAEkB,SAASC,cAAc,UAAUnB,EAAEoB,MAAMrB,EAAEqB,MAAMpB,EAAEqB,OAAOtB,EAAEsB,OAAO,MAAMhB,EAAEL,EAAEsB,WAAW,MAAM,OAAOvB,aAAaa,iBAAiBP,EAAEkB,UAAUxB,EAAE,EAAE,EAAEA,EAAEqB,MAAMrB,EAAEsB,QAAQtB,aAAayB,WAAWnB,EAAEoB,aAAa1B,EAAE,EAAE,GAAGC,CAAC,CAAC,SAAS0B,EAAE3B,GAAG,MAAMC,EAAE,GAAGK,EAAE,IAAIsB,WAAW5B,GAAG,IAAI,IAAID,EAAE,EAAEA,EAAEO,EAAEuB,OAAO9B,IAAIE,EAAE6B,KAAKC,OAAOC,aAAa1B,EAAEP,KAAK,MAAM,wCAAwCkC,KAAKhC,EAAEiC,KAAK,IAAI,CAAC,SAASC,EAAEnC,GAAG,GAAGA,EAAEoC,WAAW,EAAE,OAAO,EAAE,MAAMnC,EAAE,IAAI2B,WAAW5B,GAAG,OAAO,MAAMC,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,EAAE,Q"}