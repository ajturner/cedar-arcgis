{"version":3,"names":["n","t","vertexSpace","isRelative","clone","anchor","i","c","a","e","s","x","y","z","m","r","origin","p","cloneWithVertexSpace","position","f","vertexAttributes","o","Float64Array","length","vertexAttributesChanged","U","originalAndCurrentFeatures","none","k","Set","Q","Started","Publishing","Stopped","C","u","constructor","super","arguments","this","type","refresh","load","sourceJSON","editingInfo","lastEditDate","dataChanged","updates","_fetchService","extent","_ongoingAssetUploads","Map","signal","layer","addResolvingPromise","Promise","resolve","queryTask","capabilities","parsedUrl","dynamicDataSource","infoFor3D","gdbVersion","spatialReference","fieldsIndex","has","query","supportsFormatPBF","operations","supportsQueryAttachments","j","url","path","pbfSupported","sourceSpatialReference","queryAttachmentsSupported","async","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","_createFeatureEditResult","data","addAttachmentResult","_createAttachmentErrorResult","attachmentId","updateAttachmentResult","globalIdUsed","l","_uploadMeshesAndGetAssetMapEditsJSON","d","addFeatures","map","_getFeatureJSON","all","filter","updateFeatures","h","_getFeatureIds","deleteFeatures","v","_getAttachmentEditsJSON","editing","supportsAsyncApplyEdits","g","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","adds","deletes","attachments","assetMaps","toJSON","returnServiceEditsInSourceSR","join","R","method","S","b","_asyncApplyEdits","supportsEditing","effectiveCapabilities","findCredential","refreshToken","_createEditsResult","attachmentIds","deleteAttachmentResults","fetchRecomputedExtents","then","returnUpdates","fullExtent","timeExtent","fromJSON","start","end","executeAttachmentQuery","execute","_createRequestQueryOptions","executeJSON","executeForIds","executeForCount","executeForExtent","executeRelationshipQuery","executeRelationshipQueryForCount","executeTopFeaturesQuery","executeForTopIds","executeForTopExtents","executeForTopCount","status","uploadAssets","import","ongoingUploads","statusUrl","responseType","resultUrl","D","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","_patchServiceJSON","geometryType","drawingInfo","renderer","defaultSymbol","I","xmin","ymin","xmax","ymax","geometry","transformFieldRoles","transform","F","E","originX","originY","originZ","translation","scale","rotation","isGeoreferenced","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","addAttachments","_getAttachmentEditJSON","updateAttachments","deleteAttachments","feature","attachment","globalId","name","contentType","uploadId","parentGlobalId","globalIdField","mediaType","File","addAssetFeatures","_filterRedundantAssetMaps","Array","push","q","set","addExternalSources","metadata","externalSources","items","_getAssetMapEditsJSON","getExternalSourcesOnService","getAttribute","getLogger","error","source","find","_","parts","assetName","assetHash","partHash","flags","O","A","objectId","isArray","editedFeatures","addResults","updateResults","deleteResults","editMoment","success","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","M","_createEditedFeature","original","current","w","code","description","details","messages","message","httpStatus","messageCode","FormData","elements","append","T","assetMapFieldRoles","J","where","outFields","returnGeometry","N","features","flatMap","some","every","prototype","constructOnly","readOnly","L"],"sources":["./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js","./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../chunks/mat4.js\";import{c as t}from\"../../chunks/mat4f64.js\";import r from\"./MeshGeoreferencedRelativeVertexSpace.js\";import{t as o}from\"../../chunks/vec32.js\";function n(t){const{vertexSpace:n}=t;if(n.isRelative)return t.clone();const{anchor:i}=t,c=i.clone(),a=e(s,[-c.x,-c.y,-c.z]),m=new r({origin:[c.x,c.y,c.z]}),p=t.cloneWithVertexSpace(m),{position:f}=p.vertexAttributes;return p.vertexAttributes.position=o(new Float64Array(f.length),f,a),p.vertexAttributesChanged(),p}const s=t();export{n as toRelativeVertexSpace};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import{id as s}from\"../../../kernel.js\";import r from\"../../../request.js\";import a from\"../../../TimeExtent.js\";import{isSome as i}from\"../../../core/arrayUtils.js\";import o from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as n}from\"../../../core/jsonMap.js\";import u from\"../../../core/Loadable.js\";import l from\"../../../core/Logger.js\";import{setDeepValue as d}from\"../../../core/object.js\";import{debounce as c,after as p,throwIfAbortError as h}from\"../../../core/promiseUtils.js\";import{getMetersPerCartesianUnitForSR as y}from\"../../../core/unitUtils.js\";import{join as m,parseData as f}from\"../../../core/urlUtils.js\";import{generateBracedUUID as g}from\"../../../core/uuid.js\";import{property as R}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as S}from\"../../../core/accessorSupport/decorators/subclass.js\";import b from\"../../../geometry/Extent.js\";import{initializeProjection as F,project as E}from\"../../../geometry/projection.js\";import{fromJSON as w}from\"../../../geometry/support/jsonUtils.js\";import{toRelativeVertexSpace as q}from\"../../../geometry/support/meshVertexSpaceUtils.js\";import{isOriginalExternal as _}from\"../../../geometry/support/meshUtils/External.js\";import{isFeatureIdentifierArrayWithGlobalId as O,isFeatureIdentifierArrayWithObjectId as A}from\"../editingSupport.js\";import{createDrawingInfo as I}from\"./support/clientSideDefaults.js\";import j from\"./support/QueryTask.js\";import{isHostedAgolService as x}from\"../../support/arcgisLayerUrl.js\";import{getAssetMapTable as T}from\"../../support/infoFor3D.js\";import{executeQueryJSON as N}from\"../../../rest/query/executeQueryJSON.js\";import{unapplyEditsZUnitScaling as v}from\"../../../rest/query/operations/editsZScale.js\";import J from\"../../../rest/support/Query.js\";import M from\"../../../geometry/SpatialReference.js\";const U=new n({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"}),k=new Set([\"Feature Layer\",\"Oriented Imagery Layer\",\"Table\"]),Q=new n({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let C=class extends u{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=null!=e?e.signal:null,s=this.layer.sourceJSON;return this.addResolvingPromise(this._fetchService(s,t)),Promise.resolve(this)}get queryTask(){const{capabilities:e,parsedUrl:t,dynamicDataSource:s,infoFor3D:r,gdbVersion:a,spatialReference:i,fieldsIndex:o}=this.layer,n=has(\"featurelayer-pbf\")&&e?.query.supportsFormatPBF&&null==r,u=e?.operations?.supportsQueryAttachments??!1;return new j({url:t.path,pbfSupported:n,fieldsIndex:o,infoFor3D:r,dynamicDataSource:s,gdbVersion:a,sourceSpatialReference:i,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/addAttachment\",i=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,i.query);try{const e=await r(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(s,n)}}async updateAttachment(e,t,s){await this.load();const a=e.attributes[this.layer.objectIdField],i=this.layer.parsedUrl.path+\"/\"+a+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(s,o.query);try{const e=await r(i,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async applyEdits(e,t){await this.load();const{layer:a}=this,o=a.infoFor3D,n=null!=o,u=n||(t?.globalIdUsed??!1),l=n?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,d=e.addFeatures?.map((e=>this._getFeatureJSON(e,o)))??[],c=(await Promise.all(d)).filter(i),p=e.updateFeatures?.map((e=>this._getFeatureJSON(e,o)))??[],h=(await Promise.all(p)).filter(i),y=this._getFeatureIds(e.deleteFeatures,u);v(c,h,a.spatialReference);const m=await this._getAttachmentEditsJSON(e),f=a.capabilities.editing.supportsAsyncApplyEdits&&n,g={gdbVersion:t?.gdbVersion||a.gdbVersion,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,sessionId:t?.sessionId,async:f};t?.returnServiceEditsOption?(g.edits=JSON.stringify([{id:a.layerId,adds:c,updates:h,deletes:y,attachments:m,assetMaps:l}]),g.returnServiceEditsOption=U.toJSON(t?.returnServiceEditsOption),g.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(g.adds=c.length?JSON.stringify(c):null,g.updates=h.length?JSON.stringify(h):null,g.deletes=y.length?u?JSON.stringify(y):y.join(\",\"):null,g.attachments=m&&JSON.stringify(m),g.assetMaps=null!=l?JSON.stringify(l):void 0);const R=this._getLayerRequestOptions({method:\"post\",query:g}),S=t?.returnServiceEditsOption?a.url:a.parsedUrl.path,b=f?await this._asyncApplyEdits(S+\"/applyEdits\",R):await r(S+\"/applyEdits\",R);if(!a.capabilities.operations?.supportsEditing&&a.effectiveCapabilities?.operations?.supportsEditing){const e=s?.findCredential(a.url);await(e?.refreshToken())}return this._createEditsResult(b)}async deleteAttachments(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/deleteAttachments\";try{return(await r(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(i){throw this._createAttachmentErrorResult(s,i)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:s,url:i}=this.layer,{data:o}=await r(`${i}/${s}`,t),{id:n,extent:u,fullExtent:l,timeExtent:d}=o,c=u||l;return{id:n,fullExtent:c&&b.fromJSON(c),timeExtent:d&&a.fromJSON({start:d[0],end:d[1]})}}))}async queryAttachments(e,t={}){await this.load();const s=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!x(this.layer.url))return\"unavailable\";const e=m(this.layer.url,\"status\"),t=await r(e,{query:{f:\"json\"}});return Q.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:s}=await import(\"./support/uploadAssets.js\");return s(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}async _asyncApplyEdits(e,t){const s=(await r(e,t)).data.statusUrl;for(;;){const e=(await r(s,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return r(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new o(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed.\");case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new o(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed (undefined response status)\")}await p(D)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:s}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:has(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:t}));e=s}this.sourceJSON=await this._patchServiceJSON(e,t);const s=e.type;if(!k.has(s))throw new o(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}async _patchServiceJSON(e,t){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=I(e.geometryType).renderer;d(\"drawingInfo.renderer\",t,e)}if(\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),null==e.extent)try{const{data:s}=await r(this.layer.url,this._getLayerRequestOptions({signal:t}));s.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:s.spatialReference})}catch(s){h(s)}return e}async _getFeatureJSON(e,t){const{geometry:s}=e,r={...e.attributes};if(null!=t&&\"mesh\"===s?.type){const{transformFieldRoles:e}=t,{origin:a,spatialReference:i,transform:o}=s,n=this.layer.spatialReference;await F(i,n);const u=E(a,n);if(r[e.originX]=u.x,r[e.originY]=u.y,r[e.originZ]=u.z??0,null!=o){const{translation:t,scale:a,rotation:u}=o,{vertexSpace:l}=s,d=l.isGeoreferenced?1:y(i)/y(n);r[e.translationX]=t[0]*d,r[e.translationY]=-t[2]*d,r[e.translationZ]=t[1]*d,r[e.scaleX]=a[0],r[e.scaleY]=a[2],r[e.scaleZ]=a[1],r[e.rotationX]=u[0],r[e.rotationY]=u[2],r[e.rotationZ]=u[1],r[e.rotationDeg]=u[3]}return{geometry:null,attributes:r}}return null==s?{attributes:r}:\"mesh\"===s.type||\"extent\"===s.type?null:{geometry:s.toJSON(),attributes:r}}async _getAttachmentEditsJSON(e){const t=await Promise.all((e.addAttachments??[]).map((e=>this._getAttachmentEditJSON(e)))),s=await Promise.all((e.updateAttachments??[]).map((e=>this._getAttachmentEditJSON(e)))),r=e.deleteAttachments??[];return t.length||s.length||r.length?{adds:t,updates:s,deletes:[...r]}:null}async _getAttachmentEditJSON(e){const{feature:t,attachment:s}=e,{globalId:r,name:a,contentType:i,data:o,uploadId:n}=s,u={globalId:r,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(o){const e=await f(o);e&&(u.contentType=e.mediaType,u.data=e.data),o instanceof File&&(u.name=o.name)}return a&&(u.name=a),i&&(u.contentType=i),u}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;const s=await this._filterRedundantAssetMaps(t);if(!t?.length)return null;const r=new Array,a=new Map;for(const i of s){const{geometry:e}=i,{vertexSpace:t}=e;if(t.isRelative)r.push(e);else{const t=q(e);a.set(t,e),i.geometry=t,r.push(t)}}await this.uploadAssets(r);for(const[i,o]of a)o.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(s),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,s=this.layer.globalIdField,r=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,o=i.getExternalSourcesOnService(r),n=a.getAttribute(s);if(0===o.length){l.getLogger(this).error(`Skipping feature ${n}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:u}=o.find(_)??o[0],{vertexSpace:d}=e,c=d.isGeoreferenced?[\"PROJECT_VERTICES\"]:[];for(const s of u)1===s.parts.length?t.push({globalId:g(),parentGlobalId:n,assetName:s.assetName,assetHash:s.parts[0].partHash,flags:c}):l.getLogger(this).error(`Skipping asset ${s.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_getFeatureIds(e,t){if(!e||0===e.length)return[];if(t&&O(e))return e.map((e=>e.globalId));if(A(e))return e.map((e=>e.objectId));const{layer:s}=this,r=t?s.globalIdField:s.objectIdField;return r?e.map((e=>e.getAttribute(r))):[]}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,r=[];let a=null;if(Array.isArray(t))for(const u of t)r.push({id:u.id,editedFeatures:u.editedFeatures}),u.id===s&&(a={addResults:u.addResults??[],updateResults:u.updateResults??[],deleteResults:u.deleteResults??[],attachments:u.attachments,editMoment:u.editMoment});else a=t;const i=a?.assetMaps;if(i){for(const e of i.addResults)e.success||l.getLogger(this).error(`Failed to map asset to feature with globalId ${e.globalId}.`);for(const e of i.updateResults)e.success||l.getLogger(this).error(`Failed to map asset to feature with globalId ${e.globalId}.`)}const o=a?.attachments,n={addFeatureResults:a?.addResults?.map(this._createFeatureEditResult,this)??[],updateFeatureResults:a?.updateResults?.map(this._createFeatureEditResult,this)??[],deleteFeatureResults:a?.deleteResults?.map(this._createFeatureEditResult,this)??[],addAttachmentResults:o&&o.addResults?o.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:o&&o.updateResults?o.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:o&&o.deleteResults?o.deleteResults.map(this._createFeatureEditResult,this):[]};if(a?.editMoment&&(n.editMoment=a.editMoment),r.length>0){n.editedFeatureResults=[];for(const e of r){const{editedFeatures:t}=e,s=t?.spatialReference?new M(t.spatialReference):null;n.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:t?.adds?.map((e=>this._createEditedFeature(e,s)))||[],updates:t?.updates?.map((e=>({original:this._createEditedFeature(e[0],s),current:this._createEditedFeature(e[1],s)})))||[],deletes:t?.deletes?.map((e=>this._createEditedFeature(e,s)))||[],spatialReference:s}})}}return n}_createEditedFeature(e,s){return new t({attributes:e.attributes,geometry:w({...e.geometry,spatialReference:s})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new o(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const s=t.details.messages&&t.details.messages[0]||t.message,r=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new o(\"feature-layer-source:attachment-failure\",s,{code:r})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const r in t){const e=t[r];null!=e&&(s.set?s.set(r,e):s.append(r,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:r}=this.layer;return{...e,query:{gdbVersion:s,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}async _filterRedundantAssetMaps(e){const{layer:t}=this,{globalIdField:s,infoFor3D:r,parsedUrl:a}=t;if(null==r||null==s)return e;const o=T(r);if(null==o)return e;const n=m(a.path,`../${o.id}`),u=new Array,l=new Array;for(const i of e)i.geometry.metadata.getExternalSourcesOnService(a).length>0?l.push(i):u.push(i);const d=l.map((e=>e.getAttribute(s))).filter(i);if(0===d.length)return e;const{assetMapFieldRoles:{parentGlobalId:c,assetHash:p}}=r,h=new J;h.where=`${c} IN (${d.map((e=>`'${e}'`))})`,h.outFields=[p,c],h.returnGeometry=!1;const y=await N(n,h),{features:f}=y;return 0===f.length?e:[...u,...l.filter((e=>{const t=e.getAttribute(s);if(!t)return!0;const{metadata:r}=e.geometry,i=f.filter((e=>e.getAttribute(c)===t));if(0===i.length)return!0;const o=i.map((e=>e.getAttribute(p)));return r.getExternalSourcesOnService(a).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>o.every((t=>e!==t))))}))]}};e([R()],C.prototype,\"type\",void 0),e([R({constructOnly:!0})],C.prototype,\"layer\",void 0),e([R({readOnly:!0})],C.prototype,\"queryTask\",null),C=e([S(\"esri.layers.graphics.sources.FeatureLayerSource\")],C);const D=1e3,L=C;export{L as default};\n"],"mappings":"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"}