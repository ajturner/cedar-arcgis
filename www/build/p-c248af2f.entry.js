import{r as t,c as i,g as e,h as s,H as a,a as n}from"./p-fc9cd10b.js";import{u as r,a as h,r as o,p as d,W as l,i as c,b as u,c as f,d as p,e as g,U as m,g as y,f as v,A as b,m as w}from"./p-6ffbaa7a.js";export{j as arcgis_charts_line_chart,k as arcgis_charts_pie_chart}from"./p-6ffbaa7a.js";import{a as C,I as S,v as x,m as I,S as L,p as D,C as M}from"./p-b54724b6.js";import"./p-fdc41b20.js";import"./p-05938a61.js";import"./p-1b31d781.js";import"./p-faf4e331.js";import"./p-74887bd8.js";import"./p-cd4a8b9a.js";import"./p-cae2235f.js";import"./p-9a4094ba.js";import"./p-9f1a0adc.js";import"./p-1184cc61.js";import"./p-98e621d1.js";import"./p-f7f8e6f9.js";import"./p-a779e49b.js";import"./p-7572c366.js";import"./p-832f907c.js";import"./p-5abe9c67.js";import"./p-0856fe30.js";import"./p-a5e3ec2a.js";import"./p-80be55a5.js";import"./p-b88ddb1e.js";import"./p-8dc3148c.js";import"./p-ca5fb53c.js";import"./p-e6a64715.js";import"./p-dc29c329.js";import"./p-d7fc78fa.js";import"./p-a3f0a5f3.js";import"./p-581eca80.js";import"./p-2a2efb66.js";import"./p-1701e549.js";import"./p-07a1e707.js";import"./p-8bc47c76.js";import"./p-c19b935f.js";import"./p-c8e3775b.js";import"./p-e75aa2b5.js";import"./p-f5f26b1f.js";import"./p-783b6965.js";import"./p-52a9dec5.js";import"./p-07f12c16.js";import"./p-2d1dac84.js";import"./p-a379c2ce.js";import"./p-541ec65c.js";import"./p-ecc7ed03.js";import"./p-8043ab9b.js";const T='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.barSeries{flex-grow:1}.barSeries>div{justify-content:center;align-items:center}.barSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.barSeries .arcgis-charts-modal-inside ol{padding-left:2em}.barSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.barSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.barSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.barSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.barSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-bar-chart-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-bar-chart-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const N=class{constructor(e){t(this,e);this.arcgisChartsDataProcessError=i(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=i(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsLegendItemVisibilityChange=i(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=i(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsSeriesColorChange=i(this,"arcgisChartsSeriesColorChange",7);this.arcgisChartsAxesMinMaxChange=i(this,"arcgisChartsAxesMinMaxChange",7);this.arcgisChartsSelectionComplete=i(this,"arcgisChartsSelectionComplete",7);this.arcgisChartsNoRenderPropChange=i(this,"arcgisChartsNoRenderPropChange",7);this.skipNextUpdate=false;this.noRenderProps=["rotation","legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.rotation=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.returnFeaturesExtent=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.selectionTheme=undefined;this.chartLimits=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.guideTooltipFormatter=undefined;this.xAxisLabelFormatter=undefined;this.yAxisLabelFormatter=undefined;this.noDataOptions=undefined;this.disableTogglingLegendItems=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(t){this.arcgisChartsDataProcessComplete.emit(t.detail)}handleLegendItemVisibilityChanged(t){this.arcgisChartsLegendItemVisibilityChange.emit(t.detail)}handleUpdateCompleted(t){this.arcgisChartsUpdateComplete.emit(t.detail)}handleSeriesColorsChange(t){this.arcgisChartsSeriesColorChange.emit(t.detail)}handleSelection(t){this.arcgisChartsSelectionComplete.emit(t.detail)}handleTooManySelectedElements(){this.notifyHeading=this.strings.tooManySelectedElements.title;this.notifyMessage=this.strings.tooManySelectedElements.message;this.notifyOptions={kind:"warning",autoClose:true,duration:"fast",active:true};this.showNotifyPanel=true}handleAlertClosed(t){if(t.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}handleAxesMinMaxChange(t){this.arcgisChartsAxesMinMaxChange.emit(t.detail)}async viewChange(t,i){await this.addExtentChangeListener();if(i!==undefined&&t===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}rotationChange(t){this.config=C(t,this.config)}legendPositionChange(t){this.config=r(t,this.config)}legendVisibilityChange(t){this.config=h(t,this.config)}filterBySelectionChanged(){this.config=o(this.config)}async notify(t,i,e){if(this.chart!==undefined){this.chart.notify(t,i,e)}return Promise.resolve(undefined)}async errorAlert(t){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=t;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}async resetZoom(){if(this.chart!==undefined)this.chart.resetZoom();return Promise.resolve(undefined)}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(t){var i,e,s,a,n,r,h,o,d,l,c,u;const{updateData:f=true,resetAxesBounds:p=false,updateExtent:g=false}=t!==null&&t!==void 0?t:{};if(f===true)this.dataUpdateIsNeeded();this.viewExtentUpdated=g;if(p===true){(s=(e=(i=this.config)===null||i===void 0?void 0:i.axes)===null||e===void 0?void 0:e[0])===null||s===void 0?true:delete s.minimum;(r=(n=(a=this.config)===null||a===void 0?void 0:a.axes)===null||n===void 0?void 0:n[0])===null||r===void 0?true:delete r.maximum;(d=(o=(h=this.config)===null||h===void 0?void 0:h.axes)===null||o===void 0?void 0:o[1])===null||d===void 0?true:delete d.minimum;(u=(c=(l=this.config)===null||l===void 0?void 0:l.axes)===null||c===void 0?void 0:c[1])===null||u===void 0?true:delete u.maximum}await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...t){const[i,,e]=t;this.updatedProps.add(e);const s=this.noRenderProps.includes(e);if(s===true){this.arcgisChartsNoRenderPropChange.emit({propName:e,value:i})}const a=this.skipNextUpdate===false&&s===false;this.skipNextUpdate=false;return a}async componentWillLoad(){({strings:this.strings}=await S(this.el,e(`.`)));this.debouncedChartUpdate=d((async()=>{if(this.chart!==undefined){const t=Array.from(this.updatedProps);const i=t.some((t=>this.dataUpdateNeededProps.includes(t)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:y({component:this,dataUpdated:i,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:v(this)})}}),w)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var t;if(this.chart===undefined&&this.chartCreationProcessing!==undefined)await this.chartCreationProcessing;await x([l.BarSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const i=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(c(this.inlineData,i)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(t){if(this.chartRef!==undefined&&this.config!==undefined){if(t.name===I.ChartDisposed){this.chart.dispose();this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(t===null||t===void 0?void 0:t.message);if(t.name===I.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}render(){var t;const i=this.showNotifyPanel===true?s(b,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const e=this.showNotifyPanel===true&&((t=this.notifyOptions)===null||t===void 0?void 0:t.kind)==="danger"?"hide":`${l.BarSeries} show`;const n=this.showNotifyPanel===true?"show notifyPanel":"hide";return s(a,null,s("slot",{name:L.actionBar}),s("div",{class:e,ref:t=>{this.chartRef=t}}),s("div",{class:n},i))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await u({layer:this.layer,component:this});this.layerRendererListener=await f({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await p({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var t;const i=(t=this.config)===null||t===void 0?void 0:t.version;if(D(i).versionStatus===g.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=M(this.strings.incompatibleChartVersion.message,{chartVersion:i!==null&&i!==void 0?i:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(t=true){var i,e;await x([l.BarSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const e=(i=this.config)===null||i===void 0?void 0:i.dataSource;if(c(this.inlineData,e)){this.chartCreationProcessing=m({chartContainer:this.chartRef,chartConfig:this.config,options:y({component:this}),globalOptions:v(this)})}this.chart=await this.chartCreationProcessing;if(t===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(t){if(t.name===I.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}this.errorAlert(t===null||t===void 0?void 0:t.message);(e=this.chart)===null||e===void 0?void 0:e.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return n(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],rotation:["rotationChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"],filterBySelection:["filterBySelectionChanged"]}}};N.style=T;const P='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.scatterSeries{flex-grow:1}.scatterSeries>div{justify-content:center;align-items:center}.scatterSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.scatterSeries .arcgis-charts-modal-inside ol{padding-left:2em}.scatterSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.scatterSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.scatterSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.scatterSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.scatterSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-scatter-plot-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-scatter-plot-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const U=class{constructor(e){t(this,e);this.arcgisChartsDataProcessError=i(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=i(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsLegendItemVisibilityChange=i(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=i(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsAxesMinMaxChange=i(this,"arcgisChartsAxesMinMaxChange",7);this.arcgisChartsSelectionComplete=i(this,"arcgisChartsSelectionComplete",7);this.skipNextUpdate=false;this.noRenderProps=["legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.disableTogglingLegendItems=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.selectionTheme=undefined;this.ignoreSmoothRenderingLimit=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.guideTooltipFormatter=undefined;this.xAxisLabelFormatter=undefined;this.yAxisLabelFormatter=undefined;this.noDataOptions=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.usePopupTemplateFieldsInfo=undefined;this.showNotifyPanel=false}handleChartOutputDataChange(t){this.arcgisChartsDataProcessComplete.emit(t.detail)}handleLegendItemVisibilityChanged(t){this.arcgisChartsLegendItemVisibilityChange.emit(t.detail)}handleUpdateCompleted(t){this.arcgisChartsUpdateComplete.emit(t.detail)}handleAxesMinMaxChange(t){this.arcgisChartsAxesMinMaxChange.emit(t.detail)}handleSelection(t){this.arcgisChartsSelectionComplete.emit(t.detail)}handleTooManySelectedElements(){this.notifyHeading=this.strings.tooManySelectedElements.title;this.notifyMessage=this.strings.tooManySelectedElements.message;this.notifyOptions={kind:"warning",autoClose:true,duration:"fast",active:true};this.showNotifyPanel=true}handleAlertClosed(t){if(t.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}async viewChange(t,i){await this.addExtentChangeListener();if(i!==undefined&&t===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}legendPositionChange(t){this.config=r(t,this.config)}legendVisibilityChange(t){this.config=h(t,this.config)}filterBySelectionChanged(){this.config=o(this.config)}async notify(t,i,e){if(this.chart!==undefined){this.chart.notify(t,i,e)}return Promise.resolve(undefined)}async errorAlert(t){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=t;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}async resetZoom(){if(this.chart!==undefined)this.chart.resetZoom();return Promise.resolve(undefined)}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(t){var i,e,s,a,n,r,h,o,d,l,c,u;const{updateData:f=true,resetAxesBounds:p=false,updateExtent:g=false}=t!==null&&t!==void 0?t:{};this.viewExtentUpdated=g;if(f===true)this.dataUpdateIsNeeded();if(p===true){(s=(e=(i=this.config)===null||i===void 0?void 0:i.axes)===null||e===void 0?void 0:e[0])===null||s===void 0?true:delete s.minimum;(r=(n=(a=this.config)===null||a===void 0?void 0:a.axes)===null||n===void 0?void 0:n[0])===null||r===void 0?true:delete r.maximum;(d=(o=(h=this.config)===null||h===void 0?void 0:h.axes)===null||o===void 0?void 0:o[1])===null||d===void 0?true:delete d.minimum;(u=(c=(l=this.config)===null||l===void 0?void 0:l.axes)===null||c===void 0?void 0:c[1])===null||u===void 0?true:delete u.maximum}await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...t){const[,,i]=t;this.updatedProps.add(i);const e=this.skipNextUpdate===false&&this.noRenderProps.includes(i)===false;this.skipNextUpdate=false;return e}async componentWillLoad(){({strings:this.strings}=await S(this.el,e(`.`)));this.debouncedChartUpdate=d((async()=>{if(this.chart!==undefined){const t=Array.from(this.updatedProps);const i=t.some((t=>this.dataUpdateNeededProps.includes(t)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:y({component:this,dataUpdated:i,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:v(this)})}}),w)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){var t;if(this.chart===undefined&&this.chartCreationProcessing!==undefined)await this.chartCreationProcessing;await x([l.ScatterSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const i=(t=this.config)===null||t===void 0?void 0:t.dataSource;if(c(this.inlineData,i)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push({})}}catch(t){if(this.chartRef!==undefined&&this.config!==undefined){if(t.name===I.ChartDisposed){this.chart.dispose();this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(t===null||t===void 0?void 0:t.message);if(t.name===I.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListener();this.chart.dispose()}}render(){var t;const i=this.showNotifyPanel===true?s(b,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const e=this.showNotifyPanel===true&&((t=this.notifyOptions)===null||t===void 0?void 0:t.kind)==="danger"?"hide":`${l.ScatterSeries} show`;const n=this.showNotifyPanel===true?"show notifyPanel":"hide";return s(a,null,s("slot",{name:L.actionBar}),s("div",{class:e,ref:t=>{this.chartRef=t}}),s("div",{class:n},i))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await u({layer:this.layer,component:this});this.layerRendererListener=await f({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListener();this.extentChangeListener=await p({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListener(){if(this.extentChangeListener!==undefined)this.extentChangeListener.remove()}checkForIncompatibleChartVersion(){var t;const i=(t=this.config)===null||t===void 0?void 0:t.version;if(D(i).versionStatus===g.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=M(this.strings.incompatibleChartVersion.message,{chartVersion:i!==null&&i!==void 0?i:""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(t=true){var i,e;await x([l.ScatterSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const e=(i=this.config)===null||i===void 0?void 0:i.dataSource;if(c(this.inlineData,e)){this.chartCreationProcessing=m({chartContainer:this.chartRef,chartConfig:this.config,options:y({component:this}),globalOptions:v(this)})}this.chart=await this.chartCreationProcessing;if(t===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(t){if(t.name===I.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(t.details)}this.errorAlert(t===null||t===void 0?void 0:t.message);(e=this.chart)===null||e===void 0?void 0:e.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return n(this)}static get watchers(){return{view:["viewChange"],layer:["layerChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"],filterBySelection:["filterBySelectionChanged"]}}};U.style=P;const A={blue:[0,121,193,255],gray:[128,128,128,200],red:[255,0,0,200],white:[255,255,255,255]};function E(t,i=""){const e={version:"1.0.0",type:"chart",dataSource:Q(t),id:"Chart",background:A.white,cursorCrosshair:{type:"cursorCrosshair",style:{type:"esriSLS",style:"esriSLSDash",color:A.red,width:1},horizontalLineVisible:true,verticalLineVisible:true},title:{type:"chartText",content:{type:"esriTS",color:A.gray,text:i,font:{size:20}}},series:[],axes:[]};e.axes=V(t);t.series.map(((i,s)=>{e.series.push(z(t,i,s))}));e.legend=O(t);return e}function O(t){return{type:"chartLegend",visible:true,title:{type:"chartText",visible:true,content:{type:"esriTS",color:A.white,text:t.series[0].category.label,font:{size:14,weight:"bold"}}},body:{type:"esriTS",color:A.white,font:{size:12}},position:"right"}}function z(t,i,e){return{type:B(t),id:i.source||`chart${e}`,name:i.value.label,query:t.datasets[0].query||{},x:i.category.field,y:i.value.field,colorType:"singleColor",markerSymbol:{type:"esriSMS",style:"esriSMSCircle",size:5},fillSymbol:{type:"esriSFS",color:[0,121,193,200],outline:{type:"esriSLS",color:A.white,width:1}},lineSymbol:{type:"esriSLS",width:1},dataLabels:{type:"chartText",visible:false,content:{type:"esriTS",color:A.blue,font:{size:14}}}}}function V(t){return[{type:"chartAxis",visible:_(t),title:{type:"chartText",visible:_(t),content:{type:"esriTS",color:A.gray,text:t.series[0].category.label,font:H()}},labels:{type:"chartText",visible:_(t),content:{type:"esriTS",color:A.gray,font:H()}},valueFormat:Z(t.series[0].category),lineSymbol:{type:"esriSLS",color:A.gray,width:2}},{type:"chartAxis",visible:_(t),title:{type:"chartText",visible:_(t),content:{type:"esriTS",color:A.gray,text:t.series[0].value.label,font:H()}},labels:{type:"chartText",visible:_(t),content:{type:"esriTS",color:A.gray,font:H()}},valueFormat:Z(t.series[0].value),grid:{type:"esriSLS",color:A.gray,width:1},lineSymbol:{type:"esriSLS",color:A.gray,width:2}}]}function Q(t){let i={};if(!!t.datasets[0].url){i={type:"layer",layer:{layerType:"ArcGISFeatureLayer",id:"",url:t.datasets[0].url}}}if(!!t.datasets[0].data){i={type:"inline",processed:true,data:{dataItems:t.datasets[0].data.features.map((t=>t.attributes))}}}return i}function Z(t){if((t===null||t===void 0?void 0:t.type)==="timestamp"){return{type:"date",intlOptions:{}}}else if(t.type==="number"){return{type:"number",intlOptions:{style:"decimal",notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}}}else{return{type:"category",characterLimit:11,intlOptions:{}}}}function B(t){switch(t.type){case"sparkline":{return"lineSeries"}case"line":{return"lineSeries"}case"bar":{return"barSeries"}}}function H(t){return{size:14}}function _(t){return t.type!=="sparkline"}const F=":host{display:block}.chart{height:100%}.source{display:none;z-index:1000;overflow:auto;height:300px;border:1px solid gray;grid-template-columns:50% 50%;grid-column-gap:0px}.source-cedar{grid-column:1;overflow:auto}.source-chart{grid-column:2;overflow:auto}.source.visible{display:grid}";const R=class{constructor(i){t(this,i);this.configUrl=null;this.cedarUrl=null;this.data=null;this.chartTitle="";this.config=null;this.cedar=null;this.chartType="bar";this.chartConfig=null}async componentWillLoad(){await this.loadChart()}componentWillRender(){console.debug("cedar-chart: componentWillRender()")}async loadChart(){var t;if(!!this.configUrl){console.debug("cedar-chart: loadChart(configUrl)",this.configUrl);const t=await fetch(this.configUrl);this.chartConfig=await t.json()}else if(!!this.cedarUrl){console.debug("cedar-chart: loadChart(cedarUrl)",this.cedarUrl);const i=await fetch(this.cedarUrl);this.cedar=await i.json();this.chartType=(t=this.cedar)===null||t===void 0?void 0:t.type;if(!!this.data){this.cedar.datasets[0].data.features=this.data}console.debug("cedar-chart: Chart cedar converting...",{cedar:this.cedar});this.chartConfig=E(this.cedar,this.chartTitle)}else if(!!this.cedar){console.debug("cedar-chart: loadChart(cedar)",this.cedar);this.chartConfig=E(this.cedar,this.chartTitle||"")}else if(!!this.config){console.debug("cedar-chart: loadChart(config)",this.cedar);this.chartConfig=this.config}else{console.debug("cedar-chart: no load option?")}console.debug("cedar-chart: Chart config loaded",{cedar:this.cedar,configUrl:this.configUrl,cedarUrl:this.cedarUrl,config:this.config,json:JSON.stringify(this.config)})}loadingComplete(t){console.debug("arcgisChartsDataProcessComplete",t)}dataError(t){console.error("arcgisChartsDataProcessError",t)}updateComplete(t){console.debug("arcgisChartsUpdateComplete",t)}render(){console.debug("cedar-chart: Rendering chart",{config:this.chartConfig});let t=null;if(!!this.chartConfig){t=this.renderChart(this.chartConfig)}return s(a,null,s("slot",null),t)}renderSource(){return[s("a",{onClick:t=>this.sourceEl.classList.toggle("visible")},"source"),s("div",{class:"source",ref:t=>this.sourceEl=t},s("code",{class:"source-cedar"},"Cedar",JSON.stringify(this.cedar)),s("code",{class:"source-chart"},"ArcGIS Charts",JSON.stringify(this.config)))]}renderChart(t){const i=t.chartType||t.series[0].type.replace(/Series/,"");console.debug("cedar-chart: renderChart",{type:i,config:t});switch(i){case"bar":{return this.renderBarChart(t)}case"line":{return this.renderLineChart(t)}case"sparkline":{return this.renderLineChart(t)}case"pie":{return this.renderPieChart(t)}case"scatter":{return this.renderScatterChart(t)}default:{return s("strong",null,"`",i,"` is not a recognized chart type")}}}renderPieChart(t){return[s("h3",null,"Pie Chart"),s("arcgis-charts-pie-chart",{id:"chart",class:"chart",config:t})]}renderScatterChart(t){return[s("h3",null,"Scatter Plot"),s("arcgis-charts-scatter-plot",{id:"chart",class:"chart",config:t})]}renderLineChart(t){return[s("h3",null,"Line Chart"),s("arcgis-charts-line-chart",{id:"chart",class:"chart",config:t})]}renderBarChart(t){console.debug("rendering Bar Chart",{config:t});return[s("h3",null,"Bar Chart"),s("arcgis-charts-bar-chart",{id:"chart",class:"chart",config:t})]}static get watchers(){return{cedar:["loadChart"],cedarUrl:["loadChart"],data:["loadChart"],config:["loadChart"]}}};R.style=F;export{N as arcgis_charts_bar_chart,U as arcgis_charts_scatter_plot,R as cedar_chart};
//# sourceMappingURL=p-c248af2f.entry.js.map