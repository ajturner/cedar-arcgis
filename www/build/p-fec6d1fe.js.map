{"version":3,"names":["r","async","t","n","Array","vertexAttributes","position","e","o","this","_createMeshData","s","invoke","transferList","createIndexThread","result","_createPooledRBush","fromJSON","Float64Array","components","_createIndexComponentsThread","map","Uint32Array","_createIndexAllThread","length","load","toJSON","a","i","vertexSpace","isRelative","normal","tangent","transform","spatialReference","buffer","some","faces","has","minX","Math","min","maxX","max","minY","maxY","p0","p1","p2"],"sources":["./node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{PooledRBush as e}from\"../../../core/libs/rbush/PooledRBush.js\";import{georeferenceApplyTransform as t}from\"./georeference.js\";class r{async createIndex(t,r){const n=new Array;if(!t.vertexAttributes||!t.vertexAttributes.position)return new e;const o=this._createMeshData(t),s=null!=r?await r.invoke(\"createIndexThread\",o,{transferList:n}):this.createIndexThread(o).result;return this._createPooledRBush().fromJSON(s)}createIndexThread(e){const t=new Float64Array(e.position),r=this._createPooledRBush();return e.components?this._createIndexComponentsThread(r,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(r,t)}_createIndexAllThread(e,t){const r=new Array(t.length/9);let o=0;for(let s=0;s<t.length;s+=9)r[o++]=n(t,s,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,t,r){let o=0;for(const n of r)o+=n.length/3;const s=new Array(o);let a=0;for(const i of r)for(let e=0;e<i.length;e+=3)s[a++]=n(t,3*i[e],3*i[e+1],3*i[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const r=(e.vertexSpace.isRelative?t({position:e.vertexAttributes.position,normal:null,tangent:null},e.vertexSpace,e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:r}:{position:r,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new e(9,has(\"esri-csp-restrictions\")?e=>e:[\".minX\",\".minY\",\".maxX\",\".maxY\"])}}function n(e,t,r,n){return{minX:Math.min(e[t],e[r],e[n]),maxX:Math.max(e[t],e[r],e[n]),minY:Math.min(e[t+1],e[r+1],e[n+1]),maxY:Math.max(e[t+1],e[r+1],e[n+1]),p0:[e[t],e[t+1],e[t+2]],p1:[e[r],e[r+1],e[r+2]],p2:[e[n],e[n+1],e[n+2]]}}export{r as default};\n"],"mappings":"oaAI2K,MAAMA,EAAEC,kBAAkBC,EAAEF,GAAG,MAAMG,EAAE,IAAIC,MAAM,IAAIF,EAAEG,mBAAmBH,EAAEG,iBAAiBC,SAAS,OAAO,IAAIC,EAAE,MAAMC,EAAEC,KAAKC,gBAAgBR,GAAGS,EAAE,MAAMX,QAAQA,EAAEY,OAAO,oBAAoBJ,EAAE,CAACK,aAAaV,IAAIM,KAAKK,kBAAkBN,GAAGO,OAAO,OAAON,KAAKO,qBAAqBC,SAASN,EAAE,CAACG,kBAAkBP,GAAG,MAAML,EAAE,IAAIgB,aAAaX,EAAED,UAAUN,EAAES,KAAKO,qBAAqB,OAAOT,EAAEY,WAAWV,KAAKW,6BAA6BpB,EAAEE,EAAEK,EAAEY,WAAWE,KAAKd,GAAG,IAAIe,YAAYf,MAAME,KAAKc,sBAAsBvB,EAAEE,EAAE,CAACqB,sBAAsBhB,EAAEL,GAAG,MAAMF,EAAE,IAAII,MAAMF,EAAEsB,OAAO,GAAG,IAAIhB,EAAE,EAAE,IAAI,IAAIG,EAAE,EAAEA,EAAET,EAAEsB,OAAOb,GAAG,EAAEX,EAAEQ,KAAKL,EAAED,EAAES,EAAEA,EAAE,EAAEA,EAAE,GAAG,OAAOJ,EAAEkB,KAAKzB,GAAG,CAACe,OAAOR,EAAEmB,SAAS,CAACN,6BAA6Bb,EAAEL,EAAEF,GAAG,IAAIQ,EAAE,EAAE,IAAI,MAAML,KAAKH,EAAEQ,GAAGL,EAAEqB,OAAO,EAAE,MAAMb,EAAE,IAAIP,MAAMI,GAAG,IAAImB,EAAE,EAAE,IAAI,MAAMC,KAAK5B,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAEqB,EAAEJ,OAAOjB,GAAG,EAAEI,EAAEgB,KAAKxB,EAAED,EAAE,EAAE0B,EAAErB,GAAG,EAAEqB,EAAErB,EAAE,GAAG,EAAEqB,EAAErB,EAAE,IAAI,OAAOA,EAAEkB,KAAKd,GAAG,CAACI,OAAOR,EAAEmB,SAAS,CAAChB,gBAAgBH,GAAG,MAAMP,GAAGO,EAAEsB,YAAYC,WAAW5B,EAAE,CAACI,SAASC,EAAEF,iBAAiBC,SAASyB,OAAO,KAAKC,QAAQ,MAAMzB,EAAEsB,YAAYtB,EAAE0B,UAAU1B,EAAE2B,kBAAkB5B,SAASC,EAAEF,iBAAiBC,UAAU6B,OAAO,OAAO5B,EAAEY,YAAYZ,EAAEY,WAAWiB,MAAM7B,IAAIA,EAAE8B,QAAQ,CAAC/B,SAASN,GAAG,CAACM,SAASN,EAAEmB,WAAWZ,EAAEY,WAAWE,KAAKd,GAAGA,EAAE8B,QAAQ,CAACrB,qBAAqB,OAAO,IAAIT,EAAE,EAAE+B,EAAI,yBAAyB/B,GAAGA,EAAE,CAAC,QAAQ,QAAQ,QAAQ,SAAS,EAAE,SAASJ,EAAEI,EAAEL,EAAEF,EAAEG,GAAG,MAAM,CAACoC,KAAKC,KAAKC,IAAIlC,EAAEL,GAAGK,EAAEP,GAAGO,EAAEJ,IAAIuC,KAAKF,KAAKG,IAAIpC,EAAEL,GAAGK,EAAEP,GAAGO,EAAEJ,IAAIyC,KAAKJ,KAAKC,IAAIlC,EAAEL,EAAE,GAAGK,EAAEP,EAAE,GAAGO,EAAEJ,EAAE,IAAI0C,KAAKL,KAAKG,IAAIpC,EAAEL,EAAE,GAAGK,EAAEP,EAAE,GAAGO,EAAEJ,EAAE,IAAI2C,GAAG,CAACvC,EAAEL,GAAGK,EAAEL,EAAE,GAAGK,EAAEL,EAAE,IAAI6C,GAAG,CAACxC,EAAEP,GAAGO,EAAEP,EAAE,GAAGO,EAAEP,EAAE,IAAIgD,GAAG,CAACzC,EAAEJ,GAAGI,EAAEJ,EAAE,GAAGI,EAAEJ,EAAE,IAAI,gB"}