{"version":3,"names":["async","f","t","o","r","e","m","c","n","i","p","u","outStatistics","has","format","a","d","name","s","l","fieldsIndex","fields","get","Object","assign","toJSON","infoFor3D","assetMaps","features","length","fromJSON","meshFeatureSetFromJSON","import","then","b","from","sourceSpatialReference","gdbVersion","dynamicDataSource","clone","formatOf3DObjects","supportedFormats","queryFormats","outFields","includes","originX","originY","originZ","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","y","transformFieldRoles","push","returnGeometry","multipatchOption"],"sources":["./node_modules/@arcgis/core/rest/query/executeQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import has from\"../../core/has.js\";import{whenOrAbort as o}from\"../../core/promiseUtils.js\";import{getMimeTypeFormatId as r,getFilenameFormatId as e}from\"../../layers/support/infoFor3D.js\";import{DataLayerSource as n}from\"../../layers/support/source/DataLayerSource.js\";import{executeRawQueryJSON as s}from\"./executeQueryJSON.js\";import{executeRawQueryPBF as a}from\"./executeQueryPBF.js\";import i from\"../support/FeatureSet.js\";import u from\"../support/Query.js\";async function f(t,o,r,e){return m(o,await c(t,o,r,e),r,e)}async function c(t,o,r,e){const n={...e},i=p(o,r),u=null!=o.outStatistics?.[0],f=has(\"featurelayer-pbf-statistics\"),c=!u||f;let m;if(\"pbf\"===r?.format&&c)try{m=await a(t,i,n)}catch(d){if(\"query:parsing-pbf\"!==d.name)throw d;r.format=\"json\"}return\"json\"!==r?.format&&c||(m=await s(t,i,n)),l(r?.fieldsIndex,m.fields),m}function l(t,o){if(null!=t&&null!=o)for(const r of o){const o=t.get(r.name);o&&Object.assign(r,o.toJSON())}}async function m(t,r,e,n){const s=e?.infoFor3D;if(!(d(t,s)&&null!=s&&r.assetMaps&&r.features&&r.features.length))return i.fromJSON(r);const{meshFeatureSetFromJSON:a}=await o(import(\"../support/meshFeatureSet.js\"),n);return a(t,s,r)}function p(o,s){let a=u.from(o);a.sourceSpatialReference=a.sourceSpatialReference??s?.sourceSpatialReference??null,(s?.gdbVersion||s?.dynamicDataSource)&&(a=a===o?a.clone():a,a.gdbVersion=o.gdbVersion||s.gdbVersion,a.dynamicDataSource=o.dynamicDataSource?n.from(o.dynamicDataSource):s.dynamicDataSource);const i=s?.infoFor3D;if(null!=i&&d(o,i)){a=a===o?a.clone():a,a.formatOf3DObjects=null;const{supportedFormats:n,queryFormats:s}=i,u=r(\"model/gltf-binary\",n)??e(\"glb\",n),f=r(\"model/gltf+json\",n)??e(\"gtlf\",n);for(const t of s){if(t===u){a.formatOf3DObjects=t;break}t!==f||a.formatOf3DObjects||(a.formatOf3DObjects=t)}if(!a.formatOf3DObjects)throw new t(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(null==a.outFields||!a.outFields.includes(\"*\")){a=a===o?a.clone():a,null==a.outFields&&(a.outFields=[]);const{originX:t,originY:r,originZ:e,translationX:n,translationY:s,translationZ:u,scaleX:f,scaleY:c,scaleZ:l,rotationX:m,rotationY:p,rotationZ:d,rotationDeg:y}=i.transformFieldRoles;a.outFields.push(t,r,e,n,s,u,f,c,l,m,p,d,y)}}return a}function d(t,o){return null!=o&&!0===t.returnGeometry&&\"xyFootprint\"!==t.multipatchOption&&!t.outStatistics}export{f as executeQuery,c as executeRawQuery,l as normalizeFields};\n"],"mappings":"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"}